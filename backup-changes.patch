diff --git a/.gitignore b/.gitignore
index 5f8c697..826cf5e 100644
--- a/.gitignore
+++ b/.gitignore
@@ -4,7 +4,16 @@
 # Node modules
 node_modules/
 
-DELETEME.md
+# Ignore all Markdown files
+*.md
+
+# But don't ignore any .md files in /docs/
+!docs/**/*.md
+!docs/*.md
+
+# Also keep any README.md anywhere
+!README.md
+!**/README.md
 
 # Closed-source packages (completely ignored)
 packages/yakkl-ai-private/
@@ -14,6 +23,11 @@ packages/yakkl-wallet-private/
 packages/yakkl-wallet-pro/
 # packages/yakkl-sdk/
 
+# Ignore all v1 files
+packages/yakkl-wallet/**/*v1*
+packages/yakkl-wallet/**/v1*
+packages/yakkl-wallet/**/*v1
+
 # This is temporary
 packages/yakkl-contracts/ 
 
diff --git a/packages/yakkl-wallet/package.json b/packages/yakkl-wallet/package.json
index 356dc7e..b8de8b9 100644
--- a/packages/yakkl-wallet/package.json
+++ b/packages/yakkl-wallet/package.json
@@ -192,6 +192,7 @@
 		"assert": "^2.1.0",
 		"buffer": "^6.0.3",
 		"cheerio": "^1.0.0",
+		"decimal.js": "^10.6.0",
 		"esbuild": "^0.24.2",
 		"https-browserify": "^1.0.0",
 		"is-stream": "^4.0.1",
diff --git a/packages/yakkl-wallet/src/app.html b/packages/yakkl-wallet/src/app.html
index f0c2651..4dc3dca 100644
--- a/packages/yakkl-wallet/src/app.html
+++ b/packages/yakkl-wallet/src/app.html
@@ -21,6 +21,7 @@
 		<link rel="shortcut icon" href="/images/favicon.png" />
 		<link rel="stylesheet" type="text/css" href="/css/inter.css" />
 
+		<script src="/js/init-polyfill.js"></script>
 		<script src="/ext/browser-polyfill.js"></script>
 
 		<style>
diff --git a/packages/yakkl-wallet/src/contexts/background/extensions/chrome/background-jwt-example.ts b/packages/yakkl-wallet/src/contexts/background/extensions/chrome/background-jwt-example.ts
index 0fcc91c..3fd87f1 100644
--- a/packages/yakkl-wallet/src/contexts/background/extensions/chrome/background-jwt-example.ts
+++ b/packages/yakkl-wallet/src/contexts/background/extensions/chrome/background-jwt-example.ts
@@ -73,7 +73,7 @@ async function createJWTAfterAuth(userDetails: {
 			userDetails.userId,
 			userDetails.username,
 			userDetails.profileId,
-			userDetails.planLevel || 'basic',
+			userDetails.planLevel || 'explorer_member',
 			userDetails.sessionId
 		);
 
diff --git a/packages/yakkl-wallet/src/contexts/background/extensions/chrome/background.ts b/packages/yakkl-wallet/src/contexts/background/extensions/chrome/background.ts
index 5799763..9c97fd2 100644
--- a/packages/yakkl-wallet/src/contexts/background/extensions/chrome/background.ts
+++ b/packages/yakkl-wallet/src/contexts/background/extensions/chrome/background.ts
@@ -1,862 +1,892 @@
-// background.ts - Complete implementation with unified port handling and message deduplication
-import { ensureProcessPolyfill } from '$lib/common/process';
-ensureProcessPolyfill();
+/* eslint-disable @typescript-eslint/no-unused-vars */
+/* eslint-disable @typescript-eslint/no-explicit-any */
+// Background actions for the extension...
+import { initializeEIP6963, showEIP6963Popup, handleRequestAccounts } from './eip-6963';
 
-import { initializeEIP6963 } from './eip-6963';
 import { addBackgroundListeners } from '$lib/common/listeners/background/backgroundListeners';
-import { log } from '$lib/common/logger-wrapper';
-import browser from 'webextension-polyfill';
+import { globalListenerManager } from '$lib/managers/GlobalListenerManager';
+import { log } from '$lib/managers/Logger';
+// import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
 import { onAlarmListener } from '$lib/common/listeners/background/alarmListeners';
+
+import browser from 'webextension-polyfill';
 import type { Runtime } from 'webextension-polyfill';
-import { type ActiveTab } from '$lib/common';
+
+import { activeTabBackgroundStore, activeTabUIStore, backgroundUIConnectedStore } from '$lib/common/stores';
+import { get } from 'svelte/store';
+import { type ActiveTab, type YakklCurrentlySelected } from '$lib/common';
 import { initializePermissions } from '$lib/permissions';
 import { initializeStorageDefaults, watchLockedState } from '$lib/common/backgroundUtils';
-import { getObjectFromLocalStorage } from '$lib/common/backgroundSecuredStorage';
+import { KeyManager } from '$lib/managers/KeyManager';
+import { getMemoizedKey, migrateToSecureStorage, SecureStore, getObjectFromLocalStorage } from '$lib/common/backgroundSecuredStorage';
 import { SecurityLevel } from '$lib/permissions/types';
 import { getAlchemyProvider } from '$lib/managers/providers/network/ethereum_provider/alchemy';
-import type { PendingRequestData } from '$lib/common/interfaces';
-import { extractSecureDomain } from '$lib/common/security';
-import { sendErrorResponse } from './errorResponseHandler';
-import {
-	isSimulationMethod,
-	isWriteMethod,
-	isReadMethod
-} from './methodClassification';
-import { handleReadOnlyRequest } from '$lib/common/listeners/background/readMethodHandler';
-import { handleSimulationRequest } from '$lib/common/listeners/background/simulationMethodHandler';
-import { handleWriteRequest } from '$lib/common/listeners/background/writeMethodHandler';
-import { initContextTracker } from './context';
-import { registerWalletLockHandlers, registerBackgroundWalletLockHandlers } from '$lib/common/lockWallet';
-// import { handleMessage } from '$contexts/background/handlers/MessageHandler';
-import { validateBackgroundRequest, validateMethodParams, logSecurityEvent } from './requestValidator';
+import { ProviderRpcError } from '$lib/common';
+import type { PendingRequestData, RequestMetadata, YakklCurrentlySelected as YakklCurrentlySelectedInterface, YakklMessage, YakklRequest, YakklResponse } from '$lib/common/interfaces';
+import { STORAGE_YAKKL_CURRENTLY_SELECTED } from '$lib/common/constants';
+// import { openPopups } from '$lib/common/reload';
+import { showExtensionPopup } from '$lib/extensions/chrome/ui';
 import { showPopup } from './ui';
-
-// Type definitions for our unified architecture
-export type RuntimePort = Runtime.Port;
-
-export interface PortInfo {
-	port: RuntimePort;
-	type: 'unified' | 'legacy';
-	lastActivity: number;
-	metadata: {
-		tabId?: number;
-		url?: string;
-		isContentScript: boolean;
-	};
-}
-
-// Do this for background context as early as possible
-if (typeof process !== 'undefined' && process.env && process.env.DEV_MODE) {
-	log.setLevel('DEBUG', 'CONTAINS', [
-		'DEBUG',
-		'DEBUG_TRACE',
-		'INFO',
-		'INFO_TRACE',
-		'WARN',
-		'ERROR',
-		'ERROR_TRACE',
-		'TRACE'
-	]);
-} else {
-	log.setLevel('ERROR', 'CONTAINS', ['ERROR', 'ERROR_TRACE']);
-}
-
-// Connection manager class to handle all port connections
-class ConnectionManager {
-	private ports: Map<string, PortInfo> = new Map();
-	private portIdCounter = 0;
-	private processedMessages = new Map<string, number>();
-	private MESSAGE_DEDUP_THRESHOLD = 500; // ms
-
-	// Register a new port connection
-	public registerPort(port: RuntimePort, sender?: Runtime.MessageSender): string {
-		const portId = `port-${this.portIdCounter++}`;
-
-		const portInfo: PortInfo = {
-			port,
-			type: this.detectPortType(port.name),
-			lastActivity: Date.now(),
-			metadata: {
-				tabId: sender?.tab?.id,
-				url: sender?.url || sender?.tab?.url,
-				isContentScript: sender?.url?.startsWith('chrome-extension://') === false
-			}
-		};
-
-		this.ports.set(portId, portInfo);
-
-		log.debug('Port registered:', false, {
-			portId,
-			type: portInfo.type,
-			metadata: portInfo.metadata
-		});
-
-		return portId;
-	}
-
-	// Detect the type of port based on its name
-	private detectPortType(portName: string): 'unified' | 'legacy' {
-		if (portName === 'yakkl-unified') {
-			return 'unified';
-		}
-		return 'legacy';
-	}
-
-	// Get port info by ID
-	public getPort(portId: string): PortInfo | undefined {
-		return this.ports.get(portId);
-	}
-
-	// Remove a port
-	public removePort(portId: string): void {
-		this.ports.delete(portId);
-		log.debug('Port removed:', false, { portId });
-	}
-
-	// Update port activity
-	public updateActivity(portId: string): void {
-		const portInfo = this.ports.get(portId);
-		if (portInfo) {
-			portInfo.lastActivity = Date.now();
-		}
-	}
-
-	// Clean up inactive ports
-	public cleanupInactivePorts(maxInactiveTime: number = 300000): void {
-		// 5 minutes
-		const now = Date.now();
-		for (const [portId, portInfo] of this.ports.entries()) {
-			if (now - portInfo.lastActivity > maxInactiveTime) {
-				this.removePort(portId);
-			}
-		}
-	}
-
-	// Check if a message is a duplicate
-	public isDuplicateMessage(message: any): boolean {
-		if (!message || !message.type) return false;
-
-		// Skip deduplication for activity and response messages
-		if (
-			message.type === 'USER_ACTIVITY' ||
-			message.type === 'ui_context_activity' ||
-			message.type.includes('RESPONSE')
-		) {
-			return false;
-		}
-
-		// Create a hash based on message type and id
-		const messageId = `${message.type}:${message.id || ''}:${message.contextId || ''}`;
-		const now = Date.now();
-
-		// Check if we've seen this message recently
-		const lastSeen = this.processedMessages.get(messageId);
-		if (lastSeen && now - lastSeen < this.MESSAGE_DEDUP_THRESHOLD) {
-			return true; // Duplicate message
-		}
-
-		// Track this message
-		this.processedMessages.set(messageId, now);
-		return false;
-	}
-
-	// Clean up old message tracking entries
-	public cleanupProcessedMessages(): void {
-		const now = Date.now();
-		const cutoffTime = now - 60000; // 1 minute
-
-		for (const [messageId, timestamp] of this.processedMessages.entries()) {
-			if (timestamp < cutoffTime) {
-				this.processedMessages.delete(messageId);
-			}
-		}
-
-		// Keep map at reasonable size
-		if (this.processedMessages.size > 5000) {
-			const entriesToDelete = this.processedMessages.size - 4000;
-			const entries = Array.from(this.processedMessages.entries())
-				.sort((a, b) => a[1] - b[1])
-				.slice(0, entriesToDelete)
-				.map((entry) => entry[0]);
-
-			for (const messageId of entries) {
-				this.processedMessages.delete(messageId);
-			}
-		}
-	}
-}
-
-// Create our connection manager instance
-const connectionManager = new ConnectionManager();
-
-// Pending requests tracking
+import { extractSecureDomain } from '$lib/common/security';
+import { getAddressesForDomain, verifyDomainConnected } from '$lib/extensions/chrome/verifyDomainConnectedBackground';
+import { onDappListener } from '$lib/extensions/chrome/dapp';
+import { getCurrentlySelectedData } from '$lib/common/shortcuts';
+
+type RuntimeSender = Runtime.MessageSender;
+type RuntimePort = Runtime.Port;
+
+// NOTE: This is a workaround for how Chrome handles alarms, listeners, and state changes in the background
+//  It appears that if the extension is suspended, the idle listener may not be triggered
+//  This workaround sets up a periodic check to ensure the state is updated
+//  If the devtools are open, the extension is not suspended and works as expected but, Chrome seems to be
+//  more aggressive when devtools is not open
+
+// UPDATE: Moved idle timer to the IdleManager plugin and for anything needed to always be active while the UI is active
+// IdleManager is UI context only and is not used in the background context
+
+// Export KeyManager for console debugging
+// Use globalThis instead of window to support Service Workers
+(globalThis as any).debugKeyManager = KeyManager.getInstance();
+
+// Track connected ports
+const ports: Map<string, RuntimePort> = new Map();
+let isProcessingQueue = false;
+
+// Add port state tracking
+const activePorts = new Map<string, {
+  port: RuntimePort;
+  lastActivity: number;
+  pendingMessages: number;
+}>();
+
+// Define the type for pending requests
 export type BackgroundPendingRequest = {
-	resolve: (value: any) => void;
-	reject: (reason: any) => void;
-	port: RuntimePort;
-	data: PendingRequestData;
-	error?: {
-		code: number;
-		message: string;
-	};
-	result?: any;
+  resolve: (value: any) => void;
+  reject: (reason: any) => void;
+  port: RuntimePort;
+  data: PendingRequestData;
+  error?: {
+    code: number;
+    message: string;
+  };
+  result?: any;
 };
 
+// Export the pendingRequests Map
 export const pendingRequests = new Map<string, BackgroundPendingRequest>();
 
-// Track processed requests to prevent duplicates
+// Store for request metadata
+const requestMetadata: Map<string, RequestMetadata> = new Map();
+
+// Flag to check if the client is ready so that we can send messages to the client correctly
+// let isClientReady = false;
+
+// browser.runtime.onMessage.addListener((message: any): any => {
+//   if (message.type === 'clientReady') {
+//     isClientReady = true;
+//   }
+//   return false;
+// });
+
+// Add at the top with other imports
 const processedBackgroundRequests = new Set<string>();
 
-// Debug helper - redirects to context.ts
-export function getIdleManagerStatus() {
-	// Import from context.ts
-	const { getIdleStatus } = require('./context');
-	return getIdleStatus();
+// Add message queue system
+interface QueuedMessage {
+  message: YakklMessage;
+  port: RuntimePort;
+  timestamp: number;
 }
 
-// Update global debug object to point to the new implementation
-if (typeof self !== 'undefined' && (self as any).YAKKLDebug) {
-	// If debug API already exists, update it
-	(self as any).YAKKLDebug = {
-		...(self as any).YAKKLDebug,
-		idleManager: {
-			getStatus: getIdleManagerStatus
-		}
-	};
+const messageQueue: QueuedMessage[] = [];
+const MESSAGE_QUEUE_TIMEOUT = 5000; // 5 seconds timeout for queued messages
+const PORT_CLEANUP_DELAY = 2000; // 2 seconds delay before port cleanup
+
+// Process message queue
+async function processMessageQueue() {
+  log.debug('Background: Start - Processing message queue:', false, {
+    messageQueueLength: messageQueue.length,
+    timestamp: new Date().toISOString()
+  });
+
+  if (isProcessingQueue) return;
+  isProcessingQueue = true;
+
+  try {
+    while (messageQueue.length > 0) {
+      const { message, port, timestamp } = messageQueue[0];
+
+      // Process the message
+      await handlePortMessage(message, port);
+
+      // Update port state
+      const portId = port.name || `port-${Date.now()}`;
+      const portState = activePorts.get(portId);
+      if (portState) {
+        portState.pendingMessages--;
+        portState.lastActivity = Date.now();
+      }
+
+      // Remove processed message
+      messageQueue.shift();
+    }
+  } finally {
+    isProcessingQueue = false;
+  }
 }
 
-// Main port connection handler
-browser.runtime.onConnect.addListener((port: RuntimePort) => {
-	const sender = port.sender;
-	const portId = connectionManager.registerPort(port, sender);
-
-	log.debug('Background: Port connected:', false, {
-		portId,
-		portName: port.name,
-		sender: sender,
-		timestamp: new Date().toISOString()
-	});
-
-	// Set up message listener for this port
-	port.onMessage.addListener(async (message: any) => {
-		try {
-			connectionManager.updateActivity(portId);
-
-			// Extract actual message content if nested
-			const actualMessage = message.message || message;
-
-			// Check for duplicate messages to prevent handling flood
-			if (connectionManager.isDuplicateMessage(actualMessage)) {
-				log.debug('Background: Dropping duplicate message:', false, {
-					type: actualMessage.type
-				});
-				return;
-			}
-
-			log.debug('Background: Message received on port:', false, {
-				portId,
-				type: actualMessage.type,
-				timestamp: new Date().toISOString()
-			});
-
-			// Handle different message sources
-			if (actualMessage.source === 'content' || actualMessage.source === 'provider') {
-				log.debug('Background: Handling provider message:', false, {
-					portId,
-					type: actualMessage.type,
-					timestamp: new Date().toISOString()
-				});
-				await handleProviderMessage(actualMessage, port, portId);
-			} else {
-				// Handle other message types based on the message itself
-				log.debug('Background: Handling general message:', false, {
-					portId,
-					type: actualMessage.type,
-					timestamp: new Date().toISOString()
-				});
-				await handleGeneralMessage(actualMessage, port, portId);
-			}
-		} catch (error) {
-			log.error('Error handling port message:', false, error);
-			sendErrorResponse(port, message.id, error);
-		}
-	});
-
-	// Handle port disconnection
-	port.onDisconnect.addListener(() => {
-		log.debug('Background: Port disconnected:', false, {
-			portId,
-			timestamp: new Date().toISOString()
-		});
-
-		connectionManager.removePort(portId);
-
-		// Clean up any pending requests for this port
-		cleanupPendingRequestsForPort(port);
-	});
-});
-
-// Simple message handler function for runtime messages
-async function handleMessage(request: any, sender: Runtime.MessageSender): Promise<any> {
-	log.debug('Handling message:', false, { type: request?.type });
-
-	switch (request?.type) {
-		// The 'popout' case is handled by unifiedMessageListener to avoid duplicate popups
-		default:
-			// For unhandled message types, return null
-			return null;
-	}
+interface DappRequest {
+  type: 'YAKKL_REQUEST:EIP6963';
+  id: string;
+  method: string;
+  params?: any[];
+  requiresApproval?: boolean;
 }
 
-// Handle one-off runtime messages (for BaseService/safeClientSendMessage)
-browser.runtime.onMessage.addListener((request: any, sender: Runtime.MessageSender, sendResponse: (response?: any) => void) => {
-	log.debug('Background: Runtime message received:', false, {
-		type: request?.type,
-		hasPayload: !!request?.payload,
-		sender: sender.tab?.id || 'extension'
-	});
-
-	// Handle the message asynchronously
-	(async () => {
-		try {
-			const response = await handleMessage(request, sender);
-			sendResponse(response);
-		} catch (error: any) {
-			log.error('Error handling runtime message:', false, error);
-			sendResponse({
-				success: false,
-				error: error?.message || 'Unknown error'
-			});
-		}
-	})();
-
-	// Return true to indicate async response
-	return true;
+// Handle port connections
+browser.runtime.onConnect.addListener((port: RuntimePort) => {
+  const portId = port.name || `port-${Date.now()}`;
+
+  log.debug('Background: Port connected:', false, {
+    portId,
+    portName: port.name,
+    sender: port.sender,
+    timestamp: new Date().toISOString()
+  });
+
+  // Store the port with state tracking
+  activePorts.set(portId, {
+    port,
+    lastActivity: Date.now(),
+    pendingMessages: 0
+  });
+
+  // Set up message listener
+  port.onMessage.addListener(async (message, port: RuntimePort) => {
+    log.debug('Background: Message received:', false, {
+      message,
+      portId,
+      timestamp: new Date().toISOString()
+    });
+
+    const portState = activePorts.get(portId);
+    if (portState) {
+      portState.lastActivity = Date.now();
+      portState.pendingMessages++;
+    }
+
+    // Process the message immediately
+    try {
+      if (message && typeof message === 'object') {
+        const msg = message as DappRequest;
+
+        if (msg.type === 'YAKKL_REQUEST:EIP6963') {
+
+
+          try {
+            // Handle the request
+            // If successful, send a response via the port from onDappListener deeper in the stack
+
+            await handleDappRequest(msg, port);
+
+          } catch (error) {
+            log.error('Error handling dapp request:', false, error);
+            port.postMessage({
+              type: 'YAKKL_RESPONSE:EIP6963',
+              id: msg.id,
+              method: msg.method,
+              error: {
+                code: -32603,
+                message: 'Internal error processing request'
+              }
+            });
+          }
+
+
+        }
+
+      }
+    } catch (error) {
+      log.error('Error processing message:', false, error);
+      if (message && typeof message === 'object') {
+        const msg = message as DappRequest;
+        port.postMessage({
+          type: 'YAKKL_RESPONSE:EIP6963',
+          id: msg.id,
+          method: msg.method,
+          error: {
+            code: -32603,
+            message: 'Internal error processing request'
+          }
+        });
+      }
+    } finally {
+      if (portState) {
+        portState.pendingMessages--;
+      }
+    }
+  });
+
+  // Handle disconnection with delay and cleanup
+  port.onDisconnect.addListener(() => {
+    log.debug('Port disconnect initiated', false, {
+      portId,
+      timestamp: new Date().toISOString()
+    });
+
+    // Clean up immediately if there are no pending messages
+    const portState = activePorts.get(portId);
+    if (!portState || portState.pendingMessages === 0) {
+      cleanupPort(portId);
+    } else {
+      // Wait for pending messages to complete
+      setTimeout(() => {
+        cleanupPort(portId);
+      }, 1000); // 1 second delay
+    }
+  });
 });
 
-// Handle provider-specific messages
-async function handleProviderMessage(message: any, port: RuntimePort, portId: string) {
-	// Skip duplicate requests
-	if (message.id && processedBackgroundRequests.has(message.id)) {
-		log.debug('Background: Skipping duplicate request:', false, {
-			requestId: message.id,
-			method: message.method
-		});
-		return;
-	}
-
-	if (message.id) {
-		processedBackgroundRequests.add(message.id);
-	}
-
-	// Handle different message types
-	switch (message.type) {
-		case 'YAKKL_REQUEST:EIP6963':
-		case 'YAKKL_REQUEST:EIP1193':
-			// Route to appropriate handler based on method type
-			const method = message.method;
-
-			if (!method) {
-				log.warn('No method specified in provider message:', false, message);
-				sendErrorResponse(port, message.id, new Error('Method is required'));
-				return;
-			}
-
-			try {
-				// Get port metadata for validation
-				const portInfo = connectionManager.getPort(portId);
-				const origin = portInfo?.metadata.url || 'unknown';
-				const tabId = portInfo?.metadata.tabId;
-
-				// Validate authentication and permissions
-				const validation = await validateBackgroundRequest(method, origin, tabId);
-				
-				// Special handling for popup methods that can proceed even when wallet is locked
-				const isPopupMethod = ['eth_requestAccounts', 'wallet_requestPermissions'].includes(method);
-
-				if (!validation.isValid) {
-					// For popup methods, check if wallet is at least initialized
-					if (isPopupMethod && validation.reason === 'Wallet is locked') {
-						// Allow popup methods to proceed - they'll handle authentication in the popup
-						log.info('Allowing popup method to proceed despite locked wallet', false, { method, origin });
-					} else {
-						// Log security event
-						await logSecurityEvent(
-							validation.isAuthenticated ? 'permission_denied' : 'auth_failure',
-							{ method, origin, reason: validation.reason }
-						);
-
-						// Send appropriate error response
-						if (!validation.isAuthenticated) {
-							// Log as debug since this is an expected condition when wallet is locked
-							log.debug('Request rejected - wallet is locked or not initialized', false, { method, origin });
-							sendErrorResponse(port, message.id, new Error('Wallet is locked or not initialized'));
-						} else {
-							log.warn('Request rejected - unauthorized', false, { method, origin, reason: validation.reason });
-							sendErrorResponse(port, message.id, new Error('Unauthorized: ' + validation.reason));
-						}
-						return;
-					}
-				}
-
-				// Validate method parameters
-				const paramValidation = validateMethodParams(method, message.params);
-				if (!paramValidation.valid) {
-					sendErrorResponse(port, message.id, new Error(paramValidation.error || 'Invalid parameters'));
-					return;
-				}
-
-				// Process the request based on method type
-				if (isSimulationMethod(method)) {
-					await handleSimulationRequest(message, port);
-				} else if (isWriteMethod(method)) {
-					await handleWriteRequest(message, port);
-				} else if (isReadMethod(method)) {
-					await handleReadOnlyRequest(message, port);
-				} else {
-					log.warn('Unknown provider method:', false, { method });
-					sendErrorResponse(port, message.id, new Error(`Unknown method: ${method}`));
-				}
-			} catch (error) {
-				log.error('Error handling provider message:', false, error);
-				sendErrorResponse(port, message.id, error);
-			}
-			break;
-
-		case 'CONNECTION_TEST':
-			// Respond to connection test
-			port.postMessage({
-				type: 'CONNECTION_TEST_RESPONSE',
-				id: message.id
-			});
-			break;
-
-		case 'clientReady':
-			// Client is ready, just acknowledge
-			port.postMessage({
-				type: 'clientReady_response',
-				id: message.id,
-				success: true
-			});
-			break;
-
-		default:
-			// Handle through unified message handler
-			await handleUnknownMessage(message, port, portId);
-	}
+// Add port cleanup function
+function cleanupPort(portId: string) {
+  const portState = activePorts.get(portId);
+  if (!portState) return;
+
+  log.debug('Port cleanup executing', false, {
+    portId,
+    pendingMessages: portState.pendingMessages,
+    timestamp: new Date().toISOString()
+  });
+
+  // Clean up any pending requests for this port
+  for (const [id, request] of pendingRequests.entries()) {
+    if (request.port === portState.port) {
+      pendingRequests.delete(id);
+    }
+  }
+
+  // Remove the port
+  activePorts.delete(portId);
 }
 
-// Handle general messages (not provider-specific)
-async function handleGeneralMessage(message: any, port: RuntimePort, portId: string) {
-	// Extract actual message if needed
-	const actualMessage = message.message || message;
-
-	// List of one-way messages that should always get immediate responses
-	const oneWayMessages = [
-		'clientReady',
-		'ui_context_initialized',
-		'ui_context_activity',
-		'ui_context_closing',
-		'SET_LOGIN_VERIFIED',
-		'USER_ACTIVITY'
-	];
-
-	// Check if this is a one-way message type
-	if (oneWayMessages.includes(actualMessage.type)) {
-		// Send immediate acknowledgment response
-		try {
-			port.postMessage({
-				type: `${actualMessage.type}_response`,
-				id: actualMessage.id || actualMessage.messageId,
-				success: true
-			});
-		} catch (err) {
-			// If port is closed, ignore the error
-		}
-	}
-
-	// Then proceed with regular message handling
-	switch (actualMessage.type) {
-		case 'SECURITY_CONFIG_REQUEST':
-			// Handle security configuration requests
-			const securityLevel = await getSecurityLevel();
-			port.postMessage({
-				type: 'SECURITY_CONFIG_RESPONSE',
-				securityLevel,
-				injectIframes: shouldInjectIframes(securityLevel)
-			});
-			break;
-
-		case 'YAKKL_RESPONSE:EIP6963':
-		case 'YAKKL_RESPONSE:EIP1193':
-			await handleProviderResponse(actualMessage, port, portId);
-			break;
-
-		case 'clientReady':
-			// Client is ready, already acknowledged above
-			break;
-
-		case 'ui_context_initialized':
-		case 'ui_context_activity':
-		case 'ui_context_closing':
-		case 'SET_LOGIN_VERIFIED':
-		case 'USER_ACTIVITY':
-		case 'IDLE_MANAGER_START':
-		case 'GET_IDLE_STATUS':
-			// These are handled by context tracker, no need to handle again
-			break;
-
-		default:
-			// Try legacy handlers or handle unknown message
-			await handleUnknownMessage(actualMessage, port, portId);
-	}
+// Modify handlePortMessage to track message completion
+async function handlePortMessage(message: YakklMessage, port: RuntimePort) {
+  const portId = port.name || `port-${Date.now()}`;
+  const portState = activePorts.get(portId);
+
+  try {
+    // Skip if we've already processed this request
+    if (message && typeof message === 'object' && 'id' in message) {
+      const messageId = (message as any).id;
+      if (processedBackgroundRequests.has(messageId)) {
+        log.debug('Background: Skipping duplicate request:', false, {
+          requestId: messageId,
+          method: (message as any).method
+        });
+        return;
+      }
+      processedBackgroundRequests.add(messageId);
+    }
+
+    if (!message || typeof message !== 'object') {
+      log.warn('Invalid message from port', false, message);
+      return;
+    }
+
+    // Handle responses from popups
+    if (message.type === 'YAKKL_RESPONSE:EIP6963') {
+      const { id, result, method, error } = message as YakklResponse;
+      const originalRequest = pendingRequests.get(id);
+
+      if (!originalRequest) {
+        log.warn('No original request found for response', false, { id });
+        return;
+      }
+
+      // Forward the response to the original requester
+      if (originalRequest.port) {
+        originalRequest.port.postMessage({
+          ...message,
+          id,
+          method: method || originalRequest.data.method,
+          jsonrpc: '2.0'
+        });
+        pendingRequests.delete(id);
+      }
+      return;
+    }
+
+    // Handle requests
+    if (message.type === 'YAKKL_REQUEST:EIP6963' || message.type === 'YAKKL_REQUEST:EIP1193') {
+      const request = message as YakklRequest;
+      const { id, method, params, requiresApproval } = request;
+      const origin = port.sender?.url || '';
+
+      try {
+        if (requiresApproval) {
+          const { showEIP6963Popup } = await import('./eip-6963');
+          const activeTab = get(activeTabBackgroundStore);
+          const url = activeTab?.url || '';
+          const domain = url ? extractSecureDomain(url) : 'NO DOMAIN - NOT ALLOWED';
+          const typedParams = Array.isArray(params) ? params : [params];
+          const message = method === 'personal_sign' && typedParams[0] ? String(typedParams[0]) : 'Not Available';
+
+          const requestData = {
+            id,
+            method,
+            params: typedParams,
+            requiresApproval: true,
+            timestamp: Date.now(),
+            metaData: {
+              method,
+              params: typedParams,
+              metaData: {
+                domain,
+                isConnected: await verifyDomainConnected(domain),
+                icon: activeTab?.favIconUrl || '/images/failIcon48x48.png',
+                title: activeTab?.title || 'Not Available',
+                origin: url,
+                message
+              }
+            }
+          };
+
+          const fullRequest = {
+            resolve: (result: unknown) => {
+              port.postMessage({
+                type: 'YAKKL_RESPONSE:EIP6963',
+                jsonrpc: '2.0',
+                id,
+                result
+              });
+              // if (portState) portState.pendingMessages--;
+            },
+            reject: (error: Error) => {
+              port.postMessage({
+                type: 'YAKKL_RESPONSE:EIP6963',
+                jsonrpc: '2.0',
+                id,
+                error: {
+                  code: -32603,
+                  message: error?.message || 'Internal error'
+                }
+              });
+              if (portState) portState.pendingMessages--;
+            },
+            port,
+            data: requestData
+          };
+
+          pendingRequests.set(id, fullRequest);
+          const result = await showEIP6963Popup(method, params || []);
+          port.postMessage({
+            type: 'YAKKL_RESPONSE:EIP6963',
+            jsonrpc: '2.0',
+            method,
+            id,
+            result
+          });
+          if (portState) portState.pendingMessages--;
+          return;
+        }
+
+        // For non-approval methods, handle directly
+        const result = await handleRequest(method, params || [], origin, port, id);
+        port.postMessage({
+          type: 'YAKKL_RESPONSE:EIP6963',
+          jsonrpc: '2.0',
+          method,
+          id,
+          result
+        });
+        if (portState) portState.pendingMessages--;
+      } catch (error) {
+        log.error('Error processing request:', false, error);
+        port.postMessage({
+          type: 'YAKKL_RESPONSE:EIP6963',
+          jsonrpc: '2.0',
+          id,
+          error: {
+            code: -32603,
+            message: 'Internal error processing request'
+          }
+        });
+        if (portState) portState.pendingMessages--;
+      }
+    }
+  } catch (error) {
+    log.error('Error in handlePortMessage:', false, error);
+    if (portState) portState.pendingMessages--;
+  }
 }
 
-// New function to handle unknown message types
-async function handleUnknownMessage(message: any, port: RuntimePort, portId: string) {
-	// Try to handle through the MessageHandler system first
-	try {
-		const response = await handleMessage(message, port.sender);
-		if (response) {
-			// Send response back through the port
-			port.postMessage({
-				...response,
-				id: message.id || message.messageId,
-				requestId: message.requestId
-			});
-			return;
-		}
-	} catch (error: any) {
-		log.debug('MessageHandler could not process message:', false, {
-			type: message.type,
-			error: error?.message
-		});
-	}
-
-	// Log unknown message types, but only once per type to avoid log flooding
-	const seenUnknownMessageTypes = new Map<string, number>();
-	const now = Date.now();
-
-	// Only log unknown message types once per minute
-	if (
-		!seenUnknownMessageTypes.has(message.type) ||
-		now - seenUnknownMessageTypes.get(message.type)! > 60000
-	) {
-		log.debug('Unknown message type received:', false, {
-			type: message.type,
-			portId
-		});
-		seenUnknownMessageTypes.set(message.type, now);
-	}
-
-	// Keep the map size reasonable
-	if (seenUnknownMessageTypes.size > 100) {
-		const oldestTypesToRemove = Array.from(seenUnknownMessageTypes.entries())
-			.sort((a, b) => a[1] - b[1])
-			.slice(0, 50)
-			.map((entry) => entry[0]);
-
-		for (const type of oldestTypesToRemove) {
-			seenUnknownMessageTypes.delete(type);
-		}
-	}
+// Helper function to check if method requires approval
+function requiresApproval(method: string): boolean {
+  const approvalMethods = [
+    'eth_requestAccounts',
+    'eth_sendTransaction',
+    'eth_signTransaction',
+    'eth_sign',
+    'personal_sign',
+    'eth_signTypedData_v4',
+    'wallet_addEthereumChain',
+    'wallet_switchEthereumChain',
+    'wallet_watchAsset'
+  ];
+  return approvalMethods.includes(method);
 }
 
-// Add this new function to handle provider responses
-async function handleProviderResponse(response: any, port: RuntimePort, portId: string) {
-	const { id, result, error } = response;
-
-	log.debug('Handling provider response:', false, {
-		id,
-		hasResult: result !== undefined,
-		hasError: error !== undefined,
-		portId,
-		timestamp: new Date().toISOString()
-	});
-
-	// Find the pending request
-	const pendingRequest = pendingRequests.get(id);
-	if (!pendingRequest) {
-		log.warn('No pending request found for response:', false, { id });
-		return;
-	}
-
-	// Forward the response back through the original port that made the request
-	const originalPort = pendingRequest.port;
-
-	try {
-		log.debug('Forwarding response to original port:', false, {
-			id,
-			originalPortName: originalPort.name,
-			currentPortName: port.name,
-			timestamp: new Date().toISOString()
-		});
-
-		originalPort.postMessage(response);
-
-		// Clean up the pending request
-		pendingRequests.delete(id);
-
-		log.debug('Response forwarded successfully', false, { id });
-	} catch (error) {
-		log.error('Failed to forward response:', false, {
-			id,
-			error,
-			originalPortDisconnected: !originalPort.name
-		});
-
-		// If the original port is disconnected, clean up
-		pendingRequests.delete(id);
-	}
+// Get provider instance
+async function getProvider() {
+  return getAlchemyProvider(); // Add other providers here
 }
 
-// Helper function to get tab information for a port
-async function getTabInfoForPort(portInfo: any): Promise<{
-	domain: string;
-	url: string;
-	title: string;
-	icon: string;
-}> {
-	try {
-		if (portInfo?.metadata?.tabId) {
-			const tab = await browser.tabs.get(portInfo.metadata.tabId);
-			return {
-				domain: extractSecureDomain(tab.url || ''),
-				url: tab.url || '',
-				title: tab.title || 'Unknown',
-				icon: tab.favIconUrl || '/images/failIcon48x48.png'
-			};
-		}
-	} catch (error) {
-		log.error('Error getting tab info:', false, error);
-	}
-
-	// Return defaults if we can't get tab info
-	return {
-		domain: 'Unknown',
-		url: '',
-		title: 'Unknown',
-		icon: '/images/failIcon48x48.png'
-	};
+async function handleRequest(method: string, params: any[], origin: string, port?: Runtime.Port, requestId?: string) {
+  try {
+    const yakklCurrentlySelectedData = await getCurrentlySelectedData();
+
+  log.debug('Processing request:', false, {
+    method,
+    params,
+    origin,
+    yakklCurrentlySelectedData,
+    timestamp: new Date().toISOString()
+  });
+
+  // Handle methods that should be handled by YAKKL directly
+  switch (method) {
+    case 'eth_chainId':
+      return yakklCurrentlySelectedData?.chainId || '0x1';
+    case 'eth_accounts':
+      // For eth_accounts, use the original implementation
+
+      // Check if the domain is connected
+      const domain = extractSecureDomain(origin);
+      const isConnected = await verifyDomainConnected(domain);
+      if (!isConnected) {
+        return [];
+      }
+
+      return await getAddressesForDomain(domain);
+    case 'eth_requestAccounts': {
+      try {
+        return await handleRequestAccounts(port, requestId);
+      } catch (error) {
+        log.error('Error using EIP-6963 implementation for eth_requestAccounts:', false, error);
+        throw error;
+      }
+    }
+
+    case 'net_version': {
+      const chainId = yakklCurrentlySelectedData?.chainId;
+      if (!chainId) return '1';
+
+      // Handle both string and number chainId formats
+      const chainIdStr = typeof chainId === 'string' ? chainId : `0x${chainId.toString(16)}`;
+      return parseInt(chainIdStr.replace('0x', ''), 16).toString();
+    }
+  }
+
+    // For other methods, delegate to the network provider
+    const provider = await getProvider();
+    return provider.request({ method, params });
+  } catch (error) {
+    log.error('Error handling request:', false, error);
+    throw error;
+  }
 }
 
-// Helper function to get approval message for different methods
-function getApprovalMessage(method: string, params?: any[]): string {
-	switch (method) {
-		case 'personal_sign':
-			return params?.[0] ? String(params[0]) : 'Sign Message';
-		case 'eth_signTypedData_v4':
-			return 'Sign Typed Data';
-		case 'eth_sendTransaction':
-			return 'Send Transaction';
-		default:
-			return 'Approve Request';
-	}
+// Helper function to get a user-friendly description of a method
+function getMethodDescription(method: string): string {
+  switch (method) {
+    case 'eth_requestAccounts':
+      return 'connect to your wallet';
+    case 'eth_sendTransaction':
+      return 'send a transaction';
+    case 'eth_sign':
+    case 'personal_sign':
+    case 'eth_signTypedData_v4':
+      return 'sign a message';
+    case 'wallet_switchEthereumChain':
+      return 'switch networks';
+    case 'wallet_addEthereumChain':
+      return 'add a new network';
+    case 'wallet_watchAsset':
+      return 'add a token to your wallet';
+    default:
+      return 'perform an action';
+  }
 }
 
-// Clean up pending requests for a disconnected port
-function cleanupPendingRequestsForPort(port: RuntimePort) {
-	for (const [id, request] of pendingRequests.entries()) {
-		if (request.port === port) {
-			pendingRequests.delete(id);
-			log.debug('Cleaned up pending request:', false, { id });
-		}
-	}
+// Send events to all connected ports
+function broadcastEvent(eventName: string, data: any, type: string = 'YAKKL_EVENT:EIP6963') {
+  const event = {
+    type,
+    event: eventName,
+    data
+  };
+  // Send to all ports
+  for (const port of ports.values()) {
+    port.postMessage(event);
+  }
 }
 
-interface SecuritySettings {
-	level: SecurityLevel;
-	lastUpdated?: number;
-	// Add any other security settings properties here
-}
+// When we get ready to add other providers, we can use this function to setup the events for each provider
+// function setupAllProviderEvents() {
+//   const providers = [getAlchemyProvider(), getInfuraProvider(), getCustomProvider()];
+//   for (const provider of providers) {
+//     provider.on('accountsChanged', ...);
+//     // ... other events
+//   }
+// }
 
-// Create a dedicated function for getting security settings
-async function getSecuritySettings(): Promise<SecuritySettings | null> {
-	try {
-		const data = await getObjectFromLocalStorage('securitySettings');
-
-		// Validate the structure
-		if (!data || typeof data !== 'object') {
-			return null;
-		}
-
-		// Check if 'level' exists and is a valid SecurityLevel
-		if ('level' in data && Object.values(SecurityLevel).includes((data as any).level)) {
-			return data as SecuritySettings;
-		}
-
-		return null;
-	} catch (error) {
-		console.error('Error retrieving security settings:', error);
-		return null;
-	}
+// Set up event listeners for provider events
+function setupProviderEvents() {
+  const provider = getAlchemyProvider(); // Add other providers here
+
+  // Listen for account changes
+  provider.on('accountsChanged', (accounts: string[]) => {
+    broadcastEvent('accountsChanged', accounts);
+    broadcastEvent('accountsChanged', accounts, 'YAKKL_EVENT:EIP1193');
+  });
+
+  // Listen for chain changes
+  provider.on('chainChanged', (chainId: string) => {
+    broadcastEvent('chainChanged', chainId);
+    broadcastEvent('chainChanged', chainId, 'YAKKL_EVENT:EIP1193');
+  });
+
+  // Listen for connect events
+  provider.on('connect', (connectInfo: { chainId: string }) => {
+    broadcastEvent('connect', connectInfo);
+    broadcastEvent('connect', connectInfo, 'YAKKL_EVENT:EIP1193');
+  });
+
+  // Listen for disconnect events
+  provider.on('disconnect', (error: { code: number; message: string }) => {
+    broadcastEvent('disconnect', error);
+    broadcastEvent('disconnect', error, 'YAKKL_EVENT:EIP1193');
+  });
+
+  // Listen for message events
+  provider.on('message', (message: { type: string; data: unknown }) => {
+    broadcastEvent('message', message);
+    broadcastEvent('message', message, 'YAKKL_EVENT:EIP1193');
+  });
 }
 
-// Your main function becomes simpler and more type-safe
-async function getSecurityLevel(): Promise<SecurityLevel> {
-	const settings = await getSecuritySettings();
-	return settings?.level || SecurityLevel.MEDIUM;
+// Initialize background script
+function initialize() {
+  // Set up provider events
+  setupProviderEvents();
+
+  // Clean up old pending requests periodically
+  setInterval(() => {
+    const now = Date.now();
+    for (const [id, request] of pendingRequests.entries()) {
+      // Remove requests older than 45 seconds
+      if (now - request?.data?.timestamp > 45000) {
+        log.warn('Removing stale request', false, {
+          id,
+          method: request.data.method,
+          age: now - request.data.timestamp
+        });
+        pendingRequests.delete(id);
+      }
+    }
+  }, 20000);
 }
 
-// Determine if iframes should be injected based on security level
-function shouldInjectIframes(securityLevel: SecurityLevel): boolean {
-	switch (securityLevel) {
-		case SecurityLevel.HIGH:
-			return false;
-		case SecurityLevel.MEDIUM:
-		case SecurityLevel.STANDARD:
-			return true;
-		default:
-			return true;
-	}
+// Start the background script
+initialize();
+
+// Initialize on startup
+async function initializeOnStartup() {
+  try {
+    // Add extension listeners
+    addBackgroundListeners();
+    browser.alarms.onAlarm.addListener(onAlarmListener);
+
+    // Initialize default storage values first
+    initializeStorageDefaults();
+
+    // Initialize KeyManager first
+    // await initializeKeyManager(); // Will come back to this when focusing on security
+
+    // Initialize permissions system
+    initializePermissions();
+
+    // Initialize EIP-6963 handler
+    initializeEIP6963();
+
+    await watchLockedState(2 * 60 * 1000);
+
+    // Migrate legacy storage to secure storage test
+    // const store = new SecureStore('wallet', await getMemoizedKey(tmp_getMemoizedKey));
+
+    // await migrateToSecureStorage<YakklCurrentlySelectedInterface>(
+    //   'yakklCurrentlySelected',
+    //   store,
+    //   'yakklCurrentlySelected.secure',
+    //   [
+    //     'shortcuts.address',
+    //     'shortcuts.smartContract',
+    //     'preferences.locale',
+    //     'shortcuts.networks.*.chainId'
+    //   ]
+    // );
+  } catch (error) {
+    log.error('Failed to initialize background script', true, error);
+  }
 }
 
-// Setup provider event broadcasting
-function setupProviderEvents() {
-	const provider = getAlchemyProvider();
-
-	// Listen for provider events and broadcast them
-	provider.on('accountsChanged', (accounts: string[]) => {
-		broadcastEvent('accountsChanged', accounts);
-	});
-
-	provider.on('chainChanged', (chainId: string) => {
-		broadcastEvent('chainChanged', chainId);
-	});
-
-	provider.on('connect', (connectInfo: { chainId: string }) => {
-		broadcastEvent('connect', connectInfo);
-	});
-
-	provider.on('disconnect', (error: { code: number; message: string }) => {
-		broadcastEvent('disconnect', error);
-	});
+await initializeOnStartup(); // Initial setup on load or reload. Alarm and State need to be set up quickly so they are here
+
+try {
+  if (browser) {
+    // Set the active tab on startup
+    const tabs = await browser.tabs.query({ active: true }); //, currentWindow: true });
+    if (tabs.length > 0) {
+      const realTab = tabs.find(t => !t.url?.startsWith('chrome-extension://'));
+      const win = await browser.windows.get(realTab.windowId);
+      let activeTab: ActiveTab | null = {
+        tabId: realTab.id,
+        windowId: realTab.windowId,
+        windowType: win.type,
+        url: realTab.url,
+        title: realTab.title,
+        favIconUrl: realTab.favIconUrl,
+        dateTime: new Date().toISOString()
+      };
+
+      if (activeTab.tabId === 0) activeTab = null;
+      if (activeTab?.windowType === 'normal') {
+        activeTabBackgroundStore.set(activeTab);
+        activeTabUIStore.set(activeTab);
+        await browser.storage.local.set({['activeTabBackground']: activeTab});
+      }
+
+      try {
+        const backgroundUIConnected = get(backgroundUIConnectedStore);
+      } catch (error) {
+        // silent
+        log.error('Error setting active tab 1:', false, error);
+      }
+    }
+  } else {
+    activeTabBackgroundStore.set(null);
+    activeTabUIStore.set(null);
+  }
+} catch (error) {
+  log.error('Error setting active tab 2:', false, error);
 }
 
-// Broadcast events to all connected ports
-function broadcastEvent(eventName: string, data: any) {
-	const event = {
-		type: 'YAKKL_EVENT:EIP6963',
-		event: eventName,
-		data
-	};
-
-	// Send to all connected ports
-	for (const [portId, portInfo] of Object.entries(connectionManager['ports'])) {
-		try {
-			portInfo.port.postMessage(event);
-		} catch (error) {
-			log.debug('Failed to send event to port:', false, error);
-		}
-	}
+// Moved here for now
+export async function onRuntimeMessageBackgroundListener(
+  message: any,
+  sender: RuntimeSender
+): Promise<any> {
+  try {
+    switch (message.type) {
+      case 'getActiveTab': {
+        try {
+          let activeTab: ActiveTab | null = null;
+          const tabs = await browser.tabs.query({ active: true });
+
+          if (tabs.length > 0) {
+            const realTab = tabs.find(t => !t.url?.startsWith('chrome-extension://'));
+            if (realTab) {
+              const win = await browser.windows.get(realTab.windowId);
+              activeTab = {
+                tabId: realTab.id,
+                windowId: realTab.windowId,
+                windowType: win.type,
+                url: realTab.url,
+                title: realTab.title,
+                favIconUrl: realTab.favIconUrl,
+                dateTime: new Date().toISOString()
+              };
+            }
+          }
+
+          if (activeTab && activeTab.tabId) {
+            return { success: true, activeTab: activeTab };
+          } else {
+            log.error('No active tab found:', true);
+            return { success: false, error: 'No active tab found.' };
+          }
+        } catch (err) {
+          log.error('Error opening side panel:', true, err);
+          return { success: false, error: err };
+        }
+      }
+
+      case 'popout': {
+        log.debug('popout:', false, message);
+        showPopup('');
+        return { success: true };
+      }
+
+      default: {
+        // Not handled by this listener
+        return undefined;
+      }
+    }
+  } catch (error: any) {
+    log.error('Error handling message:', true, error);
+    return {
+      success: false,
+      error: error?.message || 'Unknown error occurred.'
+    };
+  }
 }
 
-// Initialize background script
-async function initializeBackground() {
-	try {
-		log.debug('Initializing background script...', false);
-
-		if (typeof chrome !== 'undefined' && chrome.sidePanel) {
-			log.info('Background initializing: chrome.sidePanel is defined', false);
-			// Disable automatic side panel opening - we'll handle popup/sidepanel manually
-			// chrome.sidePanel.setPanelBehavior({ openPanelOnActionClick: true });
-		}
-
-		// Initialize core components
-		await initializeStorageDefaults();
-		initializePermissions();
-		initializeEIP6963();
-
-		// Add listeners
-		addBackgroundListeners();
-		browser.alarms.onAlarm.addListener(onAlarmListener);
-
-		// Setup provider events
-		setupProviderEvents();
-
-		// Start periodic cleanup
-		setInterval(() => {
-			connectionManager.cleanupInactivePorts();
-			connectionManager.cleanupProcessedMessages();
-			cleanupOldProcessedRequests();
-		}, 60000); // Every minute
-
-		// Watch locked state
-		await watchLockedState(2 * 60 * 1000);
-
-		initContextTracker();
-
-		// Register wallet lock handlers
-		// Register general handlers
-		registerWalletLockHandlers();
-		// Register background-specific handlers (pass browser API directly)
-		registerBackgroundWalletLockHandlers(browser);
-
-		log.debug('Background script initialized successfully', false);
-	} catch (error) {
-		log.error('Failed to initialize background script:', false, error);
-	}
+// unused at the moment
+export async function onSuspendListener() {
+  try {
+    log.info('onSuspendListener');
+    globalListenerManager.removeAll();
+  } catch (error) {
+    log.error('Background: onSuspendListener:', false, error);
+  }
 }
 
-// Clean up old processed requests
-function cleanupOldProcessedRequests() {
-	const now = Date.now();
-
-	// Clean up pending requests older than 5 minutes
-	for (const [id, request] of pendingRequests.entries()) {
-		if (now - request.data.timestamp > 300000) {
-			pendingRequests.delete(id);
-			log.debug('Cleaned up stale pending request:', false, { id });
-		}
-	}
-
-	// Keep processed requests set reasonable size
-	if (processedBackgroundRequests.size > 5000) {
-		const toRemove = processedBackgroundRequests.size - 4000;
-		const iterator = processedBackgroundRequests.values();
-		for (let i = 0; i < toRemove; i++) {
-			processedBackgroundRequests.delete(iterator.next().value);
-		}
-	}
+/**
+ * Determine if we're in a development environment
+ * This method checks multiple possible indicators since NODE_ENV might be inconsistent
+ */
+function isDevelopmentEnvironment(): boolean {
+  // Check multiple possible indicators for development mode
+  return (
+    // Standard NODE_ENV check
+    (typeof process !== 'undefined' && process.env && process.env.NODE_ENV !== 'production') ||
+    // Vite-specific development indicator
+    (typeof import.meta !== 'undefined' && import.meta.env && import.meta.env.DEV === true) ||
+    // Check for DEV_MODE flag that might be set in your build process
+    (typeof process !== 'undefined' && process.env && process.env.DEV_MODE === 'true')
+  );
 }
 
-// Get active tab information - unifiedMessageListener handles this now but keep for possible future use
-async function getActiveTab(): Promise<ActiveTab | null> {
-	try {
-		const tabs = await browser.tabs.query({ active: true });
-
-		if (tabs.length > 0) {
-			const realTab = tabs.find((t) => !t.url?.startsWith('chrome-extension://'));
-			if (realTab && browser.windows) {
-				const win = await browser.windows.get(realTab.windowId);
-				return {
-					tabId: realTab.id,
-					windowId: realTab.windowId,
-					windowType: win.type,
-					url: realTab.url,
-					title: realTab.title,
-					favIconUrl: realTab.favIconUrl,
-					dateTime: new Date().toISOString()
-				};
-			}
-		}
-
-		return null;
-	} catch (error) {
-		log.error('Error getting active tab:', false, error);
-		return null;
-	}
+/**
+ * Initialize the KeyManager
+ */
+async function initializeKeyManager(): Promise<void> {
+  try {
+    const keyManager = await KeyManager.getInstance();
+
+    // Log environment details for debugging
+    log.info('Environment details:', false, {
+      NODE_ENV: process.env.NODE_ENV,
+      isDev: isDevelopmentEnvironment(),
+      availableEnvKeys: process.env ? Object.keys(process.env).filter(key =>
+        key.includes('API_KEY') || key.includes('ALCHEMY') || key.includes('INFURA') || key.includes('BLOCKNATIVE')
+      ) : []
+    });
+
+    // Skip direct key setup - it's better to allow empty keys than to use incorrect values
+    // KeyManager.getKey will now return empty strings instead of undefined for missing keys
+
+    // Log available keys for debugging
+    const keyStatus = keyManager.getKeyStatus();
+
+    // Explicitly log full key details (development only)
+    if (isDevelopmentEnvironment()) {
+      try {
+        log.info('Logging detailed key information...');
+        keyManager.debugLogKeys();
+      } catch (error) {
+        log.error('Failed to log key details', false, error);
+      }
+    }
+  } catch (error) {
+    log.error('Failed to initialize KeyManager', false, error);
+  }
 }
 
-// Export the connection manager for testing and debugging
-(globalThis as any).connectionManager = connectionManager;
-
-// Handle extension icon clicks - open popup window
-browser.action.onClicked.addListener(async (tab) => {
-	log.info('Extension icon clicked', false, { tab });
-	// Open the popup using the singleton manager
-	await showPopup('', '');
-});
+// Map security levels to iframe injection settings
+const SECURITY_LEVEL_IFRAME_SETTINGS = {
+  [SecurityLevel.HIGH]: {
+    injectIframes: false,
+    description: 'No iframe injection (highest security)'
+  },
+  [SecurityLevel.MEDIUM]: {
+    injectIframes: true,
+    description: 'Inject into trusted domains only (balanced security)'
+  },
+  [SecurityLevel.STANDARD]: {
+    injectIframes: true,
+    description: 'Inject into all non-null origin frames (dApp compatible)'
+  }
+} as const;
+
+async function updateSecurityConfig(securityLevel: SecurityLevel) {
+  try {
+    // Get all tabs
+    const tabs = await browser.tabs.query({});
+
+    // Get iframe settings based on security level
+    const iframeSettings = SECURITY_LEVEL_IFRAME_SETTINGS[securityLevel];
+
+    // Send the update to each tab
+    for (const tab of tabs) {
+      if (tab.id) {
+        await browser.tabs.sendMessage(tab.id, {
+          type: 'YAKKL_SECURITY_CONFIG_UPDATE',
+          securityLevel,
+          injectIframes: iframeSettings.injectIframes
+        });
+      }
+    }
+
+    log.debug('Security configuration updated across all tabs', false, {
+      securityLevel,
+      iframeSettings,
+      timestamp: new Date().toISOString()
+    });
+  } catch (error) {
+    log.error('Failed to update security configuration:', false, error);
+  }
+}
 
-// Initialize immediately on load
-initializeBackground();
+// browser.tabs.sendMessage(tabId, {
+//   type: 'YAKKL_SECURITY_CONFIG_UPDATE',
+//   securityLevel: 2, // Change to strict mode
+//   injectIframes: false // Disable iframe injection
+// });
+
+// Helper function to handle dapp requests
+async function handleDappRequest(msg: DappRequest, port: RuntimePort) {
+  try {
+    // Process the request based on the method
+    switch (msg.method) {
+      // case 'get_params':
+      //   // Handle get_params request
+      //   const request = requestManager.getRequest(msg.id);
+      //   if (request) {
+      //     port.postMessage({
+      //       type: 'YAKKL_RESPONSE:EIP6963',
+      //       id: msg.id,
+      //       method: msg.method,
+      //       result: request
+      //     });
+      //   } else {
+      //     port.postMessage({
+      //       type: 'YAKKL_RESPONSE:EIP6963',
+      //       id: msg.id,
+      //       method: msg.method,
+      //       result: { params: [] }
+      //     });
+      //   }
+      //   break;
+      default:
+
+        // Forward other requests to the appropriate handler
+        await onDappListener(msg, port);
+
+        break;
+    }
+  } catch (error) {
+    log.error('Error in handleDappRequest:', false, error);
+    throw error;
+  }
+}
diff --git a/packages/yakkl-wallet/src/contexts/background/extensions/chrome/backgroundStorageHandler.ts b/packages/yakkl-wallet/src/contexts/background/extensions/chrome/backgroundStorageHandler.ts
index 7682f1f..93a1ff2 100644
--- a/packages/yakkl-wallet/src/contexts/background/extensions/chrome/backgroundStorageHandler.ts
+++ b/packages/yakkl-wallet/src/contexts/background/extensions/chrome/backgroundStorageHandler.ts
@@ -1,135 +1,6 @@
 // background-storage-handler.ts
-import browser from 'webextension-polyfill';
-import type { Runtime } from 'webextension-polyfill';
+import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
+import type { Runtime } from '$lib/types/browser-types';
 import type { StorageRequest, StorageResponse } from '$lib/common/storageTypes';
+const browser = getBrowserExt()!;
 
-export class BackgroundStorageHandler {
-	private static instance: BackgroundStorageHandler;
-	private syncQueue: Set<string> = new Set();
-	private syncInProgress = false;
-
-	private constructor() {
-		this.initialize();
-	}
-
-	static getInstance(): BackgroundStorageHandler {
-		if (!BackgroundStorageHandler.instance) {
-			BackgroundStorageHandler.instance = new BackgroundStorageHandler();
-		}
-		return BackgroundStorageHandler.instance;
-	}
-
-	private initialize() {
-		browser.runtime.onConnect.addListener((port) => {
-			if (port.name !== 'yakkl-storage-port') return;
-			this.handlePortConnection(port);
-		});
-	}
-
-	private async handlePortConnection(port: Runtime.Port) {
-		port.onMessage.addListener(async (message: unknown, _port: Runtime.Port) => {
-			try {
-				const request = message as StorageRequest & { requestId: string };
-				const response = await this.handleStorageRequest(request);
-				port.postMessage({ ...response, requestId: request.requestId });
-			} catch (error: unknown) {
-				port.postMessage({
-					success: false,
-					error: {
-						code: 'STORAGE_ERROR',
-						message: error instanceof Error ? error.message : 'Unknown error'
-					},
-					requestId: (message as { requestId?: string })?.requestId || 'unknown'
-				});
-			}
-		});
-	}
-
-	private async handleStorageRequest(request: StorageRequest): Promise<StorageResponse> {
-		switch (request.action) {
-			case 'get': {
-				const local = await this.getLocal(request.key!);
-				if (request.storageType === 'both' || request.storageType === 'remote') {
-					// Add remote fetch logic here when implementing Cloudflare Workers
-					const remote = await this.getRemote(request.key!);
-					// Merge logic here
-				}
-				return {
-					success: true,
-					data: local,
-					source: 'local',
-					metadata: {
-						timestamp: Date.now()
-					}
-				};
-			}
-			case 'set': {
-				await this.setLocal(request.key!, request.value);
-				if (request.storageType === 'both' || request.storageType === 'remote') {
-					this.queueSync(request.key!);
-				}
-				return {
-					success: true,
-					metadata: {
-						timestamp: Date.now(),
-						synced: request.storageType === 'local'
-					}
-				};
-			}
-			case 'remove': {
-				await this.removeLocal(request.key!);
-				if (request.storageType === 'both' || request.storageType === 'remote') {
-					this.queueSync(request.key!);
-				}
-				return {
-					success: true,
-					metadata: {
-						timestamp: Date.now(),
-						synced: request.storageType === 'local'
-					}
-				};
-			}
-			// Add other actions...
-		}
-	}
-
-	private async getLocal(key: string): Promise<any> {
-		const result = await browser.storage.local.get(key);
-		return result[key];
-	}
-
-	private async setLocal(key: string, value: any): Promise<void> {
-		await browser.storage.local.set({ [key]: value });
-	}
-
-	private async getRemote(key: string): Promise<any> {
-		// Implement Cloudflare Workers fetch logic here
-		return null;
-	}
-
-	private queueSync(key: string) {
-		this.syncQueue.add(key);
-		if (!this.syncInProgress) {
-			this.startSync();
-		}
-	}
-
-	private async startSync() {
-		if (this.syncInProgress || this.syncQueue.size === 0) return;
-
-		this.syncInProgress = true;
-		try {
-			// Implement sync logic with Cloudflare Workers
-			// Could include batching, retry logic, etc.
-		} finally {
-			this.syncInProgress = false;
-			if (this.syncQueue.size > 0) {
-				this.startSync();
-			}
-		}
-	}
-
-	private async removeLocal(key: string): Promise<void> {
-		await browser.storage.local.remove(key);
-	}
-}
diff --git a/packages/yakkl-wallet/src/contexts/background/extensions/chrome/content.ts b/packages/yakkl-wallet/src/contexts/background/extensions/chrome/content.ts
index 0981b29..a849b24 100644
--- a/packages/yakkl-wallet/src/contexts/background/extensions/chrome/content.ts
+++ b/packages/yakkl-wallet/src/contexts/background/extensions/chrome/content.ts
@@ -6,7 +6,9 @@ import { Duplex } from 'readable-stream';
 import { WALLET_SECURITY_CONFIG, YAKKL_DAPP } from '$lib/common/constants';
 import type { SecurityLevel } from '$lib/permissions/types';
 import { SecurityLevel as SecurityLevelEnum } from '$lib/permissions/types';
-import browser, { type Runtime } from 'webextension-polyfill';
+import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
+import type { Runtime } from '$lib/types/browser-types';
+const browser = getBrowserExt()!;
 import { log } from '$lib/managers/Logger';
 import { isExtensionContextValid } from '$lib/common';
 import {
diff --git a/packages/yakkl-wallet/src/contexts/background/extensions/chrome/context.ts b/packages/yakkl-wallet/src/contexts/background/extensions/chrome/context.ts
deleted file mode 100644
index c6612c1..0000000
--- a/packages/yakkl-wallet/src/contexts/background/extensions/chrome/context.ts
+++ /dev/null
@@ -1,1545 +0,0 @@
-import { log } from '$lib/common/logger-wrapper';
-import browser from 'webextension-polyfill';
-import type { Runtime } from 'webextension-polyfill';
-import {
-	TIMER_IDLE_THRESHOLD,
-	TIMER_IDLE_LOCK_DELAY,
-	TIMER_IDLE_CHECK_INTERVAL
-} from '$lib/common';
-import { NotificationService } from '$lib/common/notifications';
-import { protectedContexts } from '$lib/common/globals';
-
-// Helper function to check if context needs idle protection
-function needsIdleProtection(contextType: string): boolean {
-	return protectedContexts.includes(contextType);
-}
-
-// Define the context info type
-export interface ContextInfo {
-	id: string;
-	type: 'sidepanel' | 'popup-wallet' | 'popup-dapp' | 'options' | 'devtools' | 'unknown' | string;
-	windowId?: number;
-	tabId?: number;
-	url?: string;
-	createdAt: number;
-	lastActive: number;
-}
-
-// Track active UI contexts
-const activeContexts = new Map<string, ContextInfo>();
-
-// Message deduplication - simplified and more robust
-const recentMessages = new Map<string, number>();
-const MESSAGE_DEDUP_WINDOW = 1000; // 1 second window
-const MAX_RECENT_MESSAGES = 500; // Limit memory usage
-
-// Idle management state
-let isLockdownInitiated: boolean = false;
-let isLoginVerified: boolean = false;
-let previousState: IdleState = 'active';
-let lastActivity: number = Date.now();
-let stateChangeListener: ((state: IdleState) => void) | null = null;
-let activityCheckTimer: number | null = null;
-let idleThreshold: number = TIMER_IDLE_THRESHOLD;
-let idleLockDelay: number = TIMER_IDLE_LOCK_DELAY;
-
-// Add state management locks to prevent race conditions
-let isProcessingStateChange = false;
-let isCleaningUp = false;
-let pendingCleanupPromise: Promise<void> | null = null;
-
-// Add debounce tracking with better logic
-let lastStateChangeTime = 0;
-const STATE_CHANGE_DEBOUNCE = 3000; // Reduced from 5s to 3s
-const CLEANUP_THROTTLE = 2000; // Throttle cleanup operations
-
-type IdleState = 'active' | 'idle' | 'locked';
-
-/**
- * Initialize the context and idle tracker module
- */
-export function initContextTracker() {
-	try {
-		// Set up message listener for context messages
-		browser.runtime.onMessage.addListener(handleContextMessage);
-
-		// Listen for window removal to clean up
-		if (browser.windows && browser.windows.onRemoved) {
-			browser.windows.onRemoved.addListener(handleWindowRemoved);
-		}
-
-		// Set up alarm listener for lockdown and keepalive
-		if (browser.alarms && browser.alarms.onAlarm) {
-			browser.alarms.onAlarm.addListener((alarm) => {
-				log.info('[IdleManager] Alarm received:', false, alarm);
-				if (alarm.name === 'yakkl-lock-alarm') {
-					log.info('[IdleManager] Executing lockdown from alarm');
-					executeLockdown().catch((error) => {
-						log.error('[IdleManager] Error executing lockdown from alarm:', false, error);
-					});
-				} else if (alarm.name === 'yakkl-lock-notification') {
-					log.info('[IdleManager] Sending lockdown warning from alarm');
-					NotificationService.sendLockdownWarning(idleLockDelay);
-				} else if (alarm.name === 'yakkl-keepalive') {
-					// Keepalive alarm - just log to keep service worker active
-					log.debug('[ContextTracker]  Keepalive alarm - checking idle state');
-
-					// If we have protected contexts and login is verified, check inactivity
-					if (isLoginVerified) {
-						checkInactivity().catch((error) => {
-							log.error('[ContextTracker] Error in keepalive activity check:', false, error);
-						});
-					}
-				}
-			});
-		}
-
-		log.info('[ContextTracker]  INITIALIZED with idle threshold:', false, {
-			threshold: idleThreshold / 1000,
-			lockDelay: idleLockDelay / 1000,
-			browserIdleSupported: !!(browser.idle && browser.idle.setDetectionInterval),
-			alarmSupported: !!(browser.alarms && browser.alarms.onAlarm),
-			notificationSupported: !!browser.notifications
-		});
-
-		// Start cleanup interval for processed messages
-		setInterval(cleanupRecentMessages, 30000); // Clean every 30 seconds
-
-		// Initialize debugging API
-		initializeDebugAPI();
-	} catch (error) {
-		log.error('[ContextTracker] Failed to initialize:', false, error);
-	}
-}
-
-/**
- * Clean up old message tracking entries - simplified and more efficient
- */
-function cleanupRecentMessages() {
-	try {
-		const now = Date.now();
-		const cutoffTime = now - MESSAGE_DEDUP_WINDOW * 2; // Keep extra buffer
-
-		// Remove old entries
-		for (const [messageId, timestamp] of recentMessages.entries()) {
-			if (timestamp < cutoffTime) {
-				recentMessages.delete(messageId);
-			}
-		}
-
-		// Ensure the map doesn't grow too large
-		if (recentMessages.size > MAX_RECENT_MESSAGES) {
-			// Keep only the most recent messages
-			const entries = Array.from(recentMessages.entries())
-				.sort((a, b) => b[1] - a[1]) // Sort by timestamp (newest first)
-				.slice(0, MAX_RECENT_MESSAGES);
-
-			recentMessages.clear();
-			entries.forEach(([id, timestamp]) => {
-				recentMessages.set(id, timestamp);
-			});
-		}
-	} catch (error) {
-		log.warn('[ContextTracker] Error during cleanup:', false, error);
-	}
-}
-
-/**
- * Check if a message is a duplicate - simplified logic
- */
-function isDuplicateMessage(message: any): boolean {
-	try {
-		// Always allow activity messages
-		if (message.type === 'USER_ACTIVITY' || message.type === 'ui_context_activity') {
-			return false;
-		}
-
-		// Create a simple message ID
-		const messageId = `${message.type}:${message.contextId || 'global'}`;
-		const now = Date.now();
-
-		// Check if we've seen this message recently
-		const lastSeen = recentMessages.get(messageId);
-		if (lastSeen && now - lastSeen < MESSAGE_DEDUP_WINDOW) {
-			return true; // Duplicate message
-		}
-
-		// Track this message
-		recentMessages.set(messageId, now);
-		return false;
-	} catch (error) {
-		log.warn('[ContextTracker] Error checking duplicate message:', false, error);
-		return false; // If we can't check, allow the message through
-	}
-}
-
-/**
- * Handle messages related to contexts and idle management
- */
-function handleContextMessage(
-	message: any,
-	sender: Runtime.MessageSender,
-	sendResponse: (response?: any) => void
-): true | undefined {
-	try {
-		// Extract wrapped message if needed
-		const actualMessage = message.message || message;
-
-		// Validate message format
-		if (!actualMessage || typeof actualMessage !== 'object') {
-			return undefined;
-		}
-
-		// Check for duplicate messages to prevent handling flood
-		if (isDuplicateMessage(actualMessage)) {
-			if (actualMessage.type !== 'CLEAR_ALL_ENHANCED_ALERTS') {
-				log.debug('[ContextTracker] Dropping duplicate message:', false, {
-					type: actualMessage.type
-				});
-			}
-			sendResponse({ success: false, error: 'Duplicate message' });
-			return true;
-		}
-
-		// Handle context initialization messages
-		if (actualMessage.type === 'ui_context_initialized') {
-			sendResponse({ success: true });
-			setTimeout(() => registerContext(actualMessage, sender), 0);
-			return true;
-		}
-
-		// Handle context activity
-		if (actualMessage.type === 'ui_context_activity' || actualMessage.type === 'USER_ACTIVITY') {
-			sendResponse({ success: true });
-			setTimeout(() => updateContextActivity(actualMessage), 0);
-			return true;
-		}
-
-		// Handle context closing
-		if (actualMessage.type === 'ui_context_closing') {
-			sendResponse({ success: true });
-			setTimeout(() => removeContext(actualMessage), 0);
-			return true;
-		}
-
-		// Handle login verification
-		if (actualMessage.type === 'SET_LOGIN_VERIFIED') {
-			log.info('[ContextTracker] SET_LOGIN_VERIFIED received:', false, actualMessage);
-			sendResponse({ success: true });
-			setTimeout(() => setLoginVerified(actualMessage.verified, actualMessage.contextId), 0);
-			return true;
-		}
-
-		// Handle IDLE_MANAGER_START
-		if (actualMessage.type === 'IDLE_MANAGER_START') {
-			const context = activeContexts.get(actualMessage.contextId);
-			if (context && context.type === 'popup-wallet') {
-				sendResponse({ success: false, message: 'Idle manager not supported in popup wallet' });
-				return true;
-			}
-
-			log.info(
-				`[ContextTracker] Starting idle manager from ${actualMessage.contextId || 'unknown'}`
-			);
-			sendResponse({ success: true, message: 'Idle manager started' });
-			setTimeout(() => setLoginVerified(true), 0);
-			return true;
-		}
-
-		// Handle status request
-		if (actualMessage.type === 'GET_IDLE_STATUS') {
-			sendResponse(getIdleStatus());
-			return true;
-		}
-
-		// Handle clientReady message
-		if (actualMessage.type === 'clientReady') {
-			sendResponse({ success: true, clientReady: true });
-			return true;
-		}
-
-		// Not our message
-		return undefined;
-	} catch (error) {
-		log.error('[ContextTracker] Error handling context message:', false, error);
-		try {
-			sendResponse({ success: false, error: 'Internal error' });
-		} catch (responseError) {
-			log.error('[ContextTracker] Error sending error response:', false, responseError);
-		}
-		return true;
-	}
-}
-
-/**
- * Handle window removal events
- */
-function handleWindowRemoved(windowId: number) {
-	try {
-		// Find and remove any contexts associated with this window
-		for (const [contextId, contextInfo] of activeContexts.entries()) {
-			if (contextInfo.windowId === windowId) {
-				activeContexts.delete(contextId);
-				log.info(`[ContextTracker] Context ${contextId} removed due to window close`);
-
-				// Notify other contexts (async, non-blocking)
-				setTimeout(() => {
-					broadcastToOtherContexts(
-						'context_removed',
-						{
-							id: contextId,
-							type: contextInfo.type
-						},
-						contextId
-					);
-				}, 0);
-			}
-		}
-	} catch (error) {
-		log.error('[ContextTracker] Error handling window removal:', false, error);
-	}
-}
-
-/**
- * Register a new UI context
- */
-function registerContext(message: any, sender: Runtime.MessageSender) {
-	try {
-		// Improve context type detection
-		let contextType = message.contextType;
-
-		// If context type is unknown but we have URL info, try to detect it
-		if (contextType === 'unknown' && sender.url) {
-			if (sender.url.includes('sidepanel')) {
-				contextType = 'sidepanel';
-			} else if (sender.url.includes('index.html') || sender.url.endsWith('/')) {
-				contextType = 'popup-wallet';
-			} else if (sender.url.includes('dapp/popups')) {
-				contextType = 'popup-dapp';
-			} else if (sender.url.includes('options')) {
-				contextType = 'options';
-			} else {
-				contextType = 'popup-wallet';
-			}
-			log.info(
-				`[ContextTracker] Corrected context type from 'unknown' to '${contextType}' based on URL: ${sender.url}`
-			);
-		}
-
-		const contextInfo: ContextInfo = {
-			id: message.contextId,
-			type: contextType,
-			windowId: sender.tab?.windowId,
-			tabId: sender.tab?.id,
-			url: sender.url,
-			createdAt: message.timestamp || Date.now(),
-			lastActive: Date.now()
-		};
-
-		// Store the context info
-		activeContexts.set(message.contextId, contextInfo);
-
-		log.info(`[ContextTracker] UI Context initialized: ${contextType}`, false, contextInfo);
-
-		// Broadcast to other contexts (async, non-blocking)
-		setTimeout(() => {
-			broadcastToOtherContexts(
-				'context_added',
-				{
-					id: message.contextId,
-					type: contextType
-				},
-				message.contextId
-			);
-		}, 0);
-	} catch (error) {
-		log.error('[ContextTracker] Error registering context:', false, error);
-	}
-}
-
-/**
- * Update a context's activity timestamp
- */
-async function updateContextActivity(message: any) {
-	try {
-		const contextId = message.contextId;
-		const now = Date.now();
-
-		// Update context activity
-		if (activeContexts.has(contextId)) {
-			const context = activeContexts.get(contextId)!;
-			context.lastActive = now;
-			activeContexts.set(contextId, context);
-		} else {
-			// If context not found, register it
-			const contextType = message.contextType || 'unknown';
-			activeContexts.set(contextId, {
-				id: contextId,
-				type: contextType,
-				createdAt: now,
-				lastActive: now
-			});
-		}
-
-		// Only update global activity for protected contexts
-		const context = activeContexts.get(contextId);
-		if (context && needsIdleProtection(context.type)) {
-			// Update global last activity timestamp
-			lastActivity = now;
-
-			// Clear lockdown state if needed
-			if (isLockdownInitiated) {
-				log.info('[ContextTracker] User activity detected, clearing lockdown state');
-				await clearLockdownState();
-			}
-
-			// If we were inactive and now detected activity
-			if (previousState !== 'active') {
-				handleStateChanged('active').catch((error) => {
-					log.error('[ContextTracker] Error handling state change to active:', false, error);
-				});
-			}
-		}
-	} catch (error) {
-		log.error('[ContextTracker] Error updating context activity:', false, error);
-	}
-}
-
-/**
- * Clear lockdown state with proper error handling
- */
-async function clearLockdownState(): Promise<void> {
-	if (isCleaningUp) {
-		// If already cleaning up, wait for it to complete
-		if (pendingCleanupPromise) {
-			await pendingCleanupPromise;
-		}
-		return;
-	}
-
-	isCleaningUp = true;
-	const now = Date.now();
-
-	try {
-		pendingCleanupPromise = (async () => {
-			// Clear any pending lockdown FIRST
-			cancelPendingLockdown();
-
-			// Clear alarms
-			try {
-				if (browser.alarms) {
-					await Promise.all([
-						browser.alarms.clear('yakkl-lock-alarm'),
-						browser.alarms.clear('yakkl-lock-notification'),
-						browser.alarms.clear('yakkl-keepalive')
-					]);
-				}
-			} catch (error) {
-				log.warn('[ContextTracker] Error clearing alarms:', false, error);
-			}
-
-			// Clear notifications using enhanced method
-			try {
-				await NotificationService.clearAllAlertsEnhanced();
-			} catch (error) {
-				log.warn('[ContextTracker] Error clearing notifications:', false, error);
-			}
-
-			// Reset badge and icon
-			try {
-				if (browser.action) {
-					await Promise.all([
-						browser.action.setBadgeText({ text: '' }),
-						browser.action.setIcon({
-							path: {
-								16: '/images/logoBullFav16x16.png',
-								32: '/images/logoBullFav32x32.png',
-								48: '/images/logoBullFav48x48.png',
-								96: '/images/logoBullFav96x96.png',
-								128: '/images/logoBullFav128x128.png'
-							}
-						})
-					]);
-				}
-			} catch (error) {
-				log.warn('[ContextTracker] Error resetting badge/icon:', false, error);
-			}
-
-			// Send clear message to UI contexts (throttled)
-			const shouldSendClearMessage =
-				now - (clearLockdownState as any).lastClearTime > CLEANUP_THROTTLE;
-			if (shouldSendClearMessage) {
-				(clearLockdownState as any).lastClearTime = now;
-
-				const clearPromises = [];
-				for (const [_, contextInfo] of activeContexts.entries()) {
-					if (contextInfo.tabId && contextInfo.id) {
-						clearPromises.push(
-							browser.tabs
-								.sendMessage(contextInfo.tabId, {
-									type: 'CLEAR_ALL_ENHANCED_ALERTS',
-									timestamp: now,
-									source: 'user_activity',
-									targetContextTypes: [contextInfo.type]
-								})
-								.catch(() => {}) // Ignore errors
-						);
-					}
-				}
-				await Promise.allSettled(clearPromises);
-			}
-
-			// Restart idle detection if login is verified
-			if (isLoginVerified) {
-				startIdleDetection();
-			}
-
-			// Reset state
-			isLockdownInitiated = false;
-			previousState = 'active';
-
-			// Notify UI contexts to start pricing checks
-			// Note: We don't use runtime.sendMessage from background as it sends to itself
-			// The UI contexts will start pricing checks when they receive the idle status change
-
-			log.info('[ContextTracker] Lockdown state cleared successfully');
-		})();
-
-		await pendingCleanupPromise;
-	} finally {
-		isCleaningUp = false;
-		pendingCleanupPromise = null;
-	}
-}
-
-// Initialize the lastClearTime property
-(clearLockdownState as any).lastClearTime = 0;
-
-/**
- * Remove a context
- */
-function removeContext(message: any) {
-	try {
-		const contextId = message.contextId;
-		if (activeContexts.has(contextId)) {
-			const removedContext = activeContexts.get(contextId)!;
-			activeContexts.delete(contextId);
-
-			log.info(`[ContextTracker] UI Context closed: ${removedContext.type}`, false, removedContext);
-
-			// Check if we still have any protected contexts
-			const hasProtectedContexts = Array.from(activeContexts.values()).some((context) =>
-				needsIdleProtection(context.type)
-			);
-
-			// If no more protected contexts, stop idle detection
-			if (!hasProtectedContexts) {
-				log.info('[ContextTracker] No more protected contexts, stopping idle detection');
-				stopIdleDetection();
-				isLoginVerified = false; // Reset login verification
-			}
-
-			// Notify other contexts (async, non-blocking)
-			setTimeout(() => {
-				broadcastToOtherContexts(
-					'context_removed',
-					{
-						id: contextId,
-						type: removedContext.type
-					},
-					contextId
-				);
-			}, 0);
-		}
-	} catch (error) {
-		log.error('[ContextTracker] Error removing context:', false, error);
-	}
-}
-
-/**
- * Helper to broadcast a message to all contexts except the sender
- */
-export function broadcastToOtherContexts(type: string, data: any, excludeContextId?: string) {
-	try {
-		const broadcastPromises = [];
-
-		for (const [contextId, contextInfo] of activeContexts.entries()) {
-			if (contextId !== excludeContextId) {
-				// If we have a tab ID, use it for more targeted messaging
-				if (contextInfo.tabId) {
-					broadcastPromises.push(
-						browser.tabs
-							.sendMessage(contextInfo.tabId, {
-								type,
-								data,
-								fromContextId: excludeContextId,
-								timestamp: Date.now()
-							})
-							.catch((err) => {
-								log.debug(
-									`[ContextTracker] Failed to send message to context ${contextId}:`,
-									false,
-									err
-								);
-							})
-					);
-				}
-			}
-		}
-
-		// Execute all broadcasts concurrently but don't wait for them
-		Promise.allSettled(broadcastPromises).catch(() => {});
-	} catch (error) {
-		log.warn('[ContextTracker] Error broadcasting to other contexts:', false, error);
-	}
-}
-
-/**
- * Helper to broadcast a message to protected contexts only
- */
-export function broadcastToProtectedContexts(type: string, data: any, excludeContextId?: string) {
-	try {
-		const broadcastPromises = [];
-
-		for (const [contextId, contextInfo] of activeContexts.entries()) {
-			if (contextId !== excludeContextId && needsIdleProtection(contextInfo.type)) {
-				if (contextInfo.tabId) {
-					broadcastPromises.push(
-						browser.tabs
-							.sendMessage(contextInfo.tabId, {
-								type,
-								data,
-								fromContextId: excludeContextId,
-								timestamp: Date.now()
-							})
-							.catch((err) => {
-								log.debug(
-									`[ContextTracker] Failed to send message to context ${contextId}:`,
-									false,
-									err
-								);
-							})
-					);
-				}
-			}
-		}
-
-		// Execute all broadcasts concurrently but don't wait for them
-		Promise.allSettled(broadcastPromises).catch(() => {});
-	} catch (error) {
-		log.warn('[ContextTracker] Error broadcasting to protected contexts:', false, error);
-	}
-}
-
-/**
- * Set login verification status
- */
-export function setLoginVerified(verified: boolean, contextId?: string): void {
-	try {
-		log.info(`[ContextTracker]  LOGIN VERIFICATION REQUEST:`, false, {
-			verified,
-			contextId,
-			currentLoginState: isLoginVerified,
-			totalContexts: activeContexts.size,
-			activeContextTypes: Array.from(activeContexts.values()).map((ctx) => ctx.type)
-		});
-
-		// Only set login verified if we have at least one protected context
-		const protectedContexts = Array.from(activeContexts.values()).filter((context) =>
-			needsIdleProtection(context.type)
-		);
-		const hasProtectedContext = protectedContexts.length > 0;
-
-		log.info(`[ContextTracker]  PROTECTED CONTEXTS ANALYSIS:`, false, {
-			hasProtectedContext,
-			protectedCount: protectedContexts.length,
-			protectedTypes: protectedContexts.map((ctx) => ctx.type),
-			allContexts: Array.from(activeContexts.values()).map((ctx) => ({
-				id: ctx.id,
-				type: ctx.type
-			}))
-		});
-
-		if (!hasProtectedContext && verified) {
-			log.warn('[ContextTracker]  NO PROTECTED CONTEXTS - not starting idle detection:', false, {
-				reason: 'No popup-wallet or popup-dapp contexts found',
-				allContextTypes: Array.from(activeContexts.values()).map((ctx) => ctx.type),
-				expectedProtectedTypes: ['popup-wallet', 'popup-dapp']
-			});
-			return;
-		}
-
-		const wasVerified = isLoginVerified;
-		isLoginVerified = verified;
-
-		log.info(`[ContextTracker]  LOGIN STATE CHANGED:`, false, {
-			from: wasVerified,
-			to: verified,
-			willStartIdle: verified && hasProtectedContext,
-			willStopIdle: !verified && wasVerified
-		});
-
-		if (verified) {
-			log.info('[ContextTracker]  STARTING idle detection due to login verification');
-			startIdleDetection();
-			broadcastIdleStatus('active');
-		} else {
-			log.info('[ContextTracker]  STOPPING idle detection due to login unverification');
-			stopIdleDetection();
-		}
-	} catch (error) {
-		log.error('[ContextTracker]  CRITICAL ERROR setting login verified:', false, error);
-	}
-}
-
-/**
- * Start idle detection
- */
-function startIdleDetection(): void {
-	try {
-		log.info('[ContextTracker]  ATTEMPTING to start idle detection');
-
-		if (!isLoginVerified) {
-			log.warn('[ContextTracker]  NOT STARTING - login not verified:', false, {
-				isLoginVerified,
-				activeContextsCount: activeContexts.size,
-				protectedContextsPresent: Array.from(activeContexts.values()).filter((ctx) =>
-					['popup-wallet', 'popup-dapp'].includes(ctx.type)
-				).length
-			});
-			return;
-		}
-
-		log.info('[ContextTracker]  Login verified, proceeding with idle detection setup');
-
-		// Set up system idle detection
-		if (browser.idle && browser.idle.setDetectionInterval) {
-			const detectionInterval = Math.floor(idleThreshold / 1000);
-			browser.idle.setDetectionInterval(detectionInterval);
-			log.info('[ContextTracker]  Browser idle detection interval set:', false, {
-				intervalSeconds: detectionInterval,
-				idleThreshold: idleThreshold
-			});
-		} else {
-			log.error('[ContextTracker]  Browser idle API not available:', false, {
-				hasIdleAPI: !!browser.idle,
-				hasSetInterval: !!(browser.idle && browser.idle.setDetectionInterval),
-				hasOnStateChanged: !!(browser.idle && browser.idle.onStateChanged)
-			});
-		}
-
-		// Add state change listener
-		if (!stateChangeListener && browser.idle && browser.idle.onStateChanged) {
-			stateChangeListener = (state: IdleState) => {
-				log.info('[ContextTracker]  IDLE STATE CHANGED:', false, {
-					newState: state,
-					timestamp: new Date().toISOString(),
-					lastActivity: new Date(lastActivity).toISOString()
-				});
-				handleStateChanged(state).catch((error) => {
-					log.error('[ContextTracker]  Error in state change listener:', false, error);
-				});
-			};
-			browser.idle.onStateChanged.addListener(stateChangeListener);
-			log.info('[ContextTracker]  Idle state change listener added');
-		} else if (stateChangeListener) {
-			log.info('[ContextTracker]  State change listener already exists');
-		} else {
-			log.error('[ContextTracker]  Cannot add state change listener - browser API not available');
-		}
-
-		// Start activity check timer
-		if (!activityCheckTimer && typeof setInterval !== 'undefined') {
-			activityCheckTimer = setInterval(() => {
-				log.debug('[ContextTracker]  Running periodic activity check');
-				checkInactivity().catch((error) => {
-					log.error('[ContextTracker]  Error in activity check:', false, error);
-				});
-			}, TIMER_IDLE_CHECK_INTERVAL) as any;
-			log.info('[ContextTracker]  Activity check timer started:', false, {
-				intervalMs: TIMER_IDLE_CHECK_INTERVAL
-			});
-		} else if (activityCheckTimer) {
-			log.info('[ContextTracker]  Activity check timer already running');
-		}
-
-		// Set up keepalive alarm to prevent service worker from going dormant
-		if (browser.alarms) {
-			// Create a recurring alarm every 15 seconds to keep service worker active
-			// This matches our idle check interval
-			browser.alarms.create('yakkl-keepalive', {
-				periodInMinutes: 0.25 // 15 seconds
-			});
-			log.info('[ContextTracker]  Keepalive alarm created (every 15 seconds)');
-		}
-
-		// Set initial state
-		checkCurrentState()
-			.then((state) => {
-				log.info(`[ContextTracker]  Initial idle state: ${state}`);
-			})
-			.catch((error) => {
-				log.error('[ContextTracker]  Error checking initial state:', false, error);
-			});
-
-		log.info('[ContextTracker]  IDLE DETECTION SETUP COMPLETE');
-	} catch (error) {
-		log.error('[ContextTracker]  CRITICAL ERROR starting idle detection:', false, error);
-	}
-}
-
-/**
- * Stop idle detection
- */
-function stopIdleDetection(): void {
-	try {
-		log.info('[ContextTracker] Stopping idle detection');
-
-		// Remove state change listener
-		if (stateChangeListener && browser.idle && browser.idle.onStateChanged) {
-			browser.idle.onStateChanged.removeListener(stateChangeListener);
-			stateChangeListener = null;
-		}
-
-		// Clear activity check timer
-		if (activityCheckTimer) {
-			clearInterval(activityCheckTimer);
-			activityCheckTimer = null;
-		}
-
-		// Cancel any pending lockdown
-		cancelPendingLockdown();
-
-		// Reset state
-		isLockdownInitiated = false;
-		previousState = 'active';
-		lastActivity = Date.now();
-
-		// Clear any alarms
-		if (browser.alarms) {
-			Promise.allSettled([
-				browser.alarms.clear('yakkl-lock-alarm'),
-				browser.alarms.clear('yakkl-lock-notification'),
-				browser.alarms.clear('yakkl-keepalive')
-			]).catch(() => {});
-		}
-
-		// Clear any notifications
-		NotificationService.clearAllAlertsEnhanced().catch(() => {});
-	} catch (error) {
-		log.error('[ContextTracker] Error stopping idle detection:', false, error);
-	}
-}
-
-/**
- * Check if we've been inactive based on both system idle and our own tracking
- */
-async function checkInactivity(): Promise<void> {
-	if (!isLoginVerified || isProcessingStateChange) return;
-
-	try {
-		const now = Date.now();
-		const timeSinceLastActivity = now - lastActivity;
-		const timeSinceLastStateChange = now - lastStateChangeTime;
-
-		// Don't check if we're within the debounce period
-		if (timeSinceLastStateChange < STATE_CHANGE_DEBOUNCE) {
-			return;
-		}
-
-		// First, query the browser idle state directly
-		const currentIdleState = await checkCurrentState();
-
-		// If browser reports idle/locked, handle it immediately
-		if (currentIdleState !== 'active' && !isLockdownInitiated) {
-			log.info(`[ContextTracker] Browser reports ${currentIdleState} state - handling immediately`);
-			await handleStateChanged(currentIdleState);
-			return;
-		}
-
-		// If we've passed the idle threshold and not already initiated lockdown
-		if (timeSinceLastActivity >= idleThreshold && !isLockdownInitiated) {
-			log.info(`[ContextTracker] Idle threshold reached: ${timeSinceLastActivity}ms`);
-			await handleStateChanged('idle');
-		}
-	} catch (error) {
-		log.error('[ContextTracker] Error checking inactivity:', false, error);
-	}
-}
-
-/**
- * Check current system idle state
- */
-async function checkCurrentState(): Promise<IdleState> {
-	if (!isLoginVerified) return 'active';
-
-	try {
-		if (browser.idle && browser.idle.queryState) {
-			const querySeconds = Math.floor(idleThreshold / 1000);
-			const state = await browser.idle.queryState(querySeconds);
-
-			// Log state queries periodically for debugging
-			const now = Date.now();
-			if (!checkCurrentState.lastLogTime || now - checkCurrentState.lastLogTime > 10000) {
-				log.debug('[ContextTracker] Idle state query:', false, {
-					state,
-					querySeconds,
-					timeSinceLastActivity: now - lastActivity
-				});
-				checkCurrentState.lastLogTime = now;
-			}
-
-			return state as IdleState;
-		}
-		return 'active';
-	} catch (error) {
-		log.warn('[ContextTracker] Error querying idle state:', false, error);
-		return 'active'; // Default to active on error
-	}
-}
-
-// Add property to track last log time
-checkCurrentState.lastLogTime = 0;
-
-/**
- * Handle state changes with improved race condition prevention
- */
-async function handleStateChanged(state: IdleState): Promise<void> {
-	if (!isLoginVerified || isProcessingStateChange) return;
-	if (state === previousState) return;
-
-	const now = Date.now();
-	const timeSinceLastStateChange = now - lastStateChangeTime;
-
-	// Don't allow rapid state changes
-	if (timeSinceLastStateChange < STATE_CHANGE_DEBOUNCE) {
-		log.debug('[ContextTracker] Skipping state change - too soon since last change:', false, {
-			timeSinceLastChange: timeSinceLastStateChange,
-			debouncePeriod: STATE_CHANGE_DEBOUNCE
-		});
-		return;
-	}
-
-	// Check if we have any protected contexts before proceeding
-	const hasProtectedContexts = Array.from(activeContexts.values()).some((context) =>
-		needsIdleProtection(context.type)
-	);
-
-	if (!hasProtectedContexts) {
-		log.info('[ContextTracker] No protected contexts found, stopping idle detection');
-		stopIdleDetection();
-		return;
-	}
-
-	// Set the processing flag to prevent race conditions
-	isProcessingStateChange = true;
-
-	try {
-		log.info(`[ContextTracker] State changing from ${previousState} to ${state}`);
-		previousState = state;
-		lastStateChangeTime = now;
-
-		// Broadcast state to all UI contexts
-		broadcastIdleStatus(state);
-
-		switch (state) {
-			case 'active':
-				await handleActiveState(now);
-				break;
-
-			case 'idle':
-			case 'locked':
-				await handleIdleLockState(state, now);
-				break;
-		}
-	} catch (error) {
-		log.error('[ContextTracker] Error handling state change:', false, error);
-		// Reset state on error
-		isLockdownInitiated = false;
-		previousState = 'active';
-	} finally {
-		isProcessingStateChange = false;
-	}
-}
-
-/**
- * Handle active state
- */
-async function handleActiveState(now: number): Promise<void> {
-	try {
-		// Clear any pending lockdown first
-		cancelPendingLockdown();
-
-		// Reset the last activity timestamp to prevent immediate idle detection
-		lastActivity = now;
-
-		// Clear notifications and reset UI
-		await clearLockdownState();
-
-		// IMPORTANT: Restart idle detection
-		if (isLoginVerified) {
-			startIdleDetection();
-		}
-
-		// Notify UI contexts to start pricing checks
-		// Note: We don't use runtime.sendMessage from background as it sends to itself
-		// The UI contexts will start pricing checks when they receive the idle status change
-	} catch (error) {
-		log.error('[ContextTracker] Error handling active state:', false, error);
-	}
-}
-
-/**
- * Handle idle/locked state
- */
-async function handleIdleLockState(state: IdleState, now: number): Promise<void> {
-	try {
-		// Only proceed if we haven't already initiated lockdown
-		if (!isLockdownInitiated) {
-			// Double check if we're still idle
-			const currentState = await checkCurrentState();
-			if (currentState !== 'active') {
-				isLockdownInitiated = true;
-
-				if (idleLockDelay <= 0) {
-					// Immediate lockdown
-					log.info(`[ContextTracker] ${state} detected, initiating immediate lockdown`);
-					await executeLockdown();
-				} else {
-					// Delayed lockdown
-					log.info(
-						`[ContextTracker] ${state} detected, lockdown will occur in ${idleLockDelay / 1000} seconds`
-					);
-					await startLockdownSequence();
-				}
-			} else {
-				log.info('[ContextTracker] State changed to active during idle check, canceling lockdown');
-				await handleStateChanged('active');
-			}
-		}
-	} catch (error) {
-		log.error('[ContextTracker] Error handling idle/lock state:', false, error);
-		isLockdownInitiated = false;
-	}
-}
-
-/**
- * Start the lockdown sequence with notification and timer
- */
-async function startLockdownSequence(): Promise<void> {
-	try {
-		// Check if we have any protected contexts before proceeding
-		const protectedContextsLocal = Array.from(activeContexts.values()).filter((context) =>
-			needsIdleProtection(context.type)
-		);
-
-		if (protectedContextsLocal.length === 0) {
-			log.info('[ContextTracker] No protected contexts found, skipping lockdown sequence');
-			return;
-		}
-
-		log.info(
-			`[ContextTracker] Starting lockdown sequence for ${protectedContextsLocal.length} protected context(s)`
-		);
-
-		// Calculate remaining time for accurate notification
-		const remainingTime = Math.max(0, idleLockDelay);
-		const remainingSeconds = Math.ceil(remainingTime / 1000);
-
-		// Send lockdown warning to all tabs first
-		const messagePromises = [];
-		for (const context of protectedContextsLocal) {
-			if (context.tabId && context.id) {
-				messagePromises.push(
-					browser.tabs
-						.sendMessage(context.tabId, {
-							type: 'lockdownImminent',
-							delayMs: remainingTime,
-							remainingSeconds,
-							enhanced: true,
-							targetContextTypes: protectedContexts,
-							timestamp: Date.now()
-						})
-						.catch((err) => {
-							log.warn(
-								`[ContextTracker] Failed to send lockdownImminent to context ${context.id}:`,
-								false,
-								err
-							);
-						})
-				);
-			}
-		}
-
-		// Send all messages concurrently
-		await Promise.allSettled(messagePromises);
-
-		// Send enhanced browser notification with countdown
-		await NotificationService.sendLockdownWarningEnhanced(remainingTime);
-
-		// Set lockdown alarm
-		if (browser.alarms) {
-			await browser.alarms.create('yakkl-lock-alarm', {
-				when: Date.now() + remainingTime
-			});
-		}
-
-		log.info(`[ContextTracker] Alarm set for lockdown in ${remainingSeconds} seconds`);
-	} catch (error) {
-		log.error('[ContextTracker] Error starting lockdown sequence:', false, error);
-	}
-}
-
-/**
- * Cancel a pending lockdown
- */
-function cancelPendingLockdown(): void {
-	if (!isLockdownInitiated) return;
-
-	try {
-		log.info('[ContextTracker] Canceling pending lockdown');
-
-		// Clear flag FIRST to prevent race conditions
-		isLockdownInitiated = false;
-
-		// Clear alarms
-		if (browser.alarms) {
-			Promise.allSettled([
-				browser.alarms.clear('yakkl-lock-alarm'),
-				browser.alarms.clear('yakkl-lock-notification')
-			]).catch(() => {});
-		}
-
-		// Reset state
-		previousState = 'active';
-
-		log.info('[ContextTracker] Pending lockdown canceled');
-	} catch (error) {
-		log.error('[ContextTracker] Error canceling pending lockdown:', false, error);
-	}
-}
-
-/**
- * Execute the actual lockdown
- */
-async function executeLockdown(): Promise<void> {
-	try {
-		log.info('[ContextTracker] Executing lockdown');
-
-		// Check if we have any protected contexts before proceeding
-		const protectedContextsLocal = Array.from(activeContexts.values()).filter((context) =>
-			needsIdleProtection(context.type)
-		);
-
-		if (protectedContextsLocal.length === 0) {
-			log.info('[ContextTracker] No protected contexts found, skipping lockdown');
-			isLockdownInitiated = false;
-			return;
-		}
-
-		log.info(
-			`[ContextTracker] Executing lockdown for ${protectedContextsLocal.length} protected context(s)`
-		);
-
-		// Send lockdown to all protected tabs
-		const lockdownPromises = [];
-		for (const context of protectedContextsLocal) {
-			if (context.tabId) {
-				lockdownPromises.push(
-					browser.tabs
-						.sendMessage(context.tabId, {
-							type: 'lockdown',
-							targetContextTypes: protectedContexts,
-							timestamp: Date.now()
-						})
-						.catch((err) => {
-							log.warn(
-								`[ContextTracker] Failed to send lockdown to context ${context.id}:`,
-								false,
-								err
-							);
-						})
-				);
-			}
-		}
-
-		// Send all lockdown messages concurrently
-		await Promise.allSettled(lockdownPromises);
-
-		// Send browser notification that wallet is locked (includes sound)
-		await NotificationService.sendWalletLocked();
-
-		// Reset state
-		isLockdownInitiated = false;
-	} catch (error) {
-		log.error('[ContextTracker] Error executing lockdown:', false, error);
-		isLockdownInitiated = false;
-	}
-}
-
-/**
- * Broadcast idle status to protected contexts only
- */
-function broadcastIdleStatus(state: IdleState): void {
-	try {
-		// Get protected contexts
-		const protectedContextsLocal = Array.from(activeContexts.values()).filter((context) =>
-			needsIdleProtection(context.type)
-		);
-
-		if (protectedContextsLocal.length === 0) {
-			log.debug('[ContextTracker] No protected contexts to broadcast to');
-			return;
-		}
-
-		log.info(
-			`[ContextTracker] Broadcasting idle status '${state}' to ${protectedContextsLocal.length} protected context(s)`
-		);
-
-		// Send directly to each known protected context with a tab ID
-		const broadcastPromises = [];
-		for (const context of protectedContextsLocal) {
-			if (context.tabId && context.id) {
-				broadcastPromises.push(
-					browser.tabs
-						.sendMessage(context.tabId, {
-							type: 'IDLE_STATUS_CHANGED',
-							state,
-							timestamp: Date.now(),
-							targetContextTypes: protectedContexts
-						})
-						.catch(() => {
-							// Silently fail - tab might have been closed
-						})
-				);
-			}
-		}
-
-		// Execute all broadcasts concurrently but don't wait for them
-		Promise.allSettled(broadcastPromises).catch(() => {});
-	} catch (error) {
-		log.error('[ContextTracker] Error broadcasting idle status:', false, error);
-	}
-}
-
-/**
- * Get a list of active contexts
- */
-export function getActiveContexts() {
-	try {
-		return Array.from(activeContexts.entries()).map(([id, info]) => ({
-			id,
-			type: info.type,
-			url: info.url,
-			createdAt: new Date(info.createdAt).toISOString(),
-			lastActive: new Date(info.lastActive).toISOString(),
-			age: Math.floor((Date.now() - info.createdAt) / 1000) + 's'
-		}));
-	} catch (error) {
-		log.error('[ContextTracker] Error getting active contexts:', false, error);
-		return [];
-	}
-}
-
-/**
- * Check if a context exists
- */
-export function hasContext(contextId: string): boolean {
-	return activeContexts.has(contextId);
-}
-
-/**
- * Get context info
- */
-export function getContextInfo(contextId: string): ContextInfo | undefined {
-	return activeContexts.get(contextId);
-}
-
-/**
- * Get contexts by type
- */
-export function getContextsByType(contextType: string): ContextInfo[] {
-	try {
-		return Array.from(activeContexts.values()).filter((context) => context.type === contextType);
-	} catch (error) {
-		log.error('[ContextTracker] Error getting contexts by type:', false, error);
-		return [];
-	}
-}
-
-/**
- * Get the number of active contexts
- */
-export function getActiveContextCount(): number {
-	return activeContexts.size;
-}
-
-/**
- * Get the number of protected contexts
- */
-export function getProtectedContextCount(): number {
-	try {
-		return Array.from(activeContexts.values()).filter((context) =>
-			needsIdleProtection(context.type)
-		).length;
-	} catch (error) {
-		log.error('[ContextTracker] Error getting protected context count:', false, error);
-		return 0;
-	}
-}
-
-/**
- * Get current idle status (for debugging)
- */
-export function getIdleStatus(): any {
-	try {
-		const protectedContextsLocal = Array.from(activeContexts.entries())
-			.filter(([_, info]) => needsIdleProtection(info.type))
-			.map(([id, info]) => ({
-				id,
-				type: info.type,
-				lastActivity: new Date(info.lastActive).toISOString(),
-				idleFor: Math.round((Date.now() - info.lastActive) / 1000) + 's'
-			}));
-
-		return {
-			isLockdownInitiated,
-			isLoginVerified,
-			previousState,
-			threshold: idleThreshold,
-			lockDelay: idleLockDelay,
-			lastActivity,
-			timeSinceLastActivity: Date.now() - lastActivity,
-			activeContextsCount: activeContexts.size,
-			protectedContextsCount: protectedContextsLocal.length,
-			recentMessagesCount: recentMessages.size,
-			isProcessingStateChange,
-			isCleaningUp,
-			lastStateChangeTime,
-			activeContexts: Array.from(activeContexts.entries()).map(([id, info]) => ({
-				id,
-				type: info.type,
-				isProtected: needsIdleProtection(info.type),
-				lastActivity: new Date(info.lastActive).toISOString(),
-				idleFor: Math.round((Date.now() - info.lastActive) / 1000) + 's'
-			})),
-			protectedContexts: protectedContextsLocal
-		};
-	} catch (error) {
-		log.error('[ContextTracker] Error getting idle status:', false, error);
-		return {
-			error: 'Failed to get idle status',
-			timestamp: new Date().toISOString()
-		};
-	}
-}
-
-/**
- * Clear all tracked contexts (for debugging)
- */
-export function clearAllContexts(): void {
-	try {
-		activeContexts.clear();
-		recentMessages.clear();
-		log.info('[ContextTracker] All contexts cleared');
-	} catch (error) {
-		log.error('[ContextTracker] Error clearing all contexts:', false, error);
-	}
-}
-
-/**
- * Initialize debugging API
- */
-function initializeDebugAPI(): void {
-	try {
-		// Expose for debugging in browser console
-		if (typeof globalThis !== 'undefined') {
-			(globalThis as any).YAKKLBackgroundDebug = {
-				// Existing debugging functions
-				getIdleStatus,
-				getActiveContexts,
-				getProtectedContextCount,
-				hasLockdownInitiated: () => isLockdownInitiated,
-				getLastActivity: () => ({
-					timestamp: lastActivity,
-					timeSinceLastActivity: Date.now() - lastActivity,
-					timeInSeconds: Math.round((Date.now() - lastActivity) / 1000)
-				}),
-				getCurrentState: checkCurrentState,
-				triggerStateChange: (state: IdleState) => {
-					log.info(`[Debug] Manually triggering state change to: ${state}`);
-					handleStateChanged(state).catch((error) => {
-						log.error('[Debug] Error in manual state change:', false, error);
-					});
-				},
-				clearLockdown: () => {
-					log.info('[Debug] Manually clearing lockdown state');
-					isLockdownInitiated = false;
-					cancelPendingLockdown();
-					handleStateChanged('active').catch((error) => {
-						log.error('[Debug] Error in manual clear lockdown:', false, error);
-					});
-				},
-				clearAllContexts,
-				recentMessagesCount: () => recentMessages.size,
-				clearRecentMessages: () => recentMessages.clear(),
-
-				// NEW: Enhanced idle detection debugging functions
-				getDetailedIdleStatus: () => ({
-					isLoginVerified,
-					isLockdownInitiated,
-					previousState,
-					lastActivity,
-					timeSinceLastActivity: Date.now() - lastActivity,
-					idleThreshold,
-					idleLockDelay,
-					hasStateChangeListener: !!stateChangeListener,
-					hasActivityCheckTimer: !!activityCheckTimer,
-					browserIdleAPI: {
-						available: !!(browser.idle && browser.idle.setDetectionInterval),
-						hasOnStateChanged: !!(browser.idle && browser.idle.onStateChanged),
-						hasQueryState: !!(browser.idle && browser.idle.queryState)
-					},
-					activeContexts: Array.from(activeContexts.values()).map((ctx) => ({
-						id: ctx.id,
-						type: ctx.type,
-						isProtected: needsIdleProtection(ctx.type),
-						lastActive: ctx.lastActive,
-						timeSinceActive: Date.now() - ctx.lastActive
-					}))
-				}),
-
-				// NEW: Manual idle detection testing
-				manuallySetLoginVerified: (verified: boolean) => {
-					log.info(`[Debug]  Manually setting login verified to: ${verified}`);
-					setLoginVerified(verified, 'debug-manual');
-				},
-
-				manuallyStartIdleDetection: () => {
-					log.info('[Debug]  Manually starting idle detection');
-					startIdleDetection();
-				},
-
-				manuallyStopIdleDetection: () => {
-					log.info('[Debug]  Manually stopping idle detection');
-					stopIdleDetection();
-				},
-
-				// NEW: Test idle flow end-to-end
-				testIdleFlow: async () => {
-					log.info('[Debug]  TESTING COMPLETE IDLE FLOW');
-
-					// 1. Check initial state
-					const initialStatus = getIdleStatus();
-					log.info('[Debug]  Initial status:', false, initialStatus);
-
-					// 2. Verify browser APIs
-					const browserAPIs = {
-						hasIdle: !!browser.idle,
-						hasSetInterval: !!(browser.idle && browser.idle.setDetectionInterval),
-						hasOnStateChanged: !!(browser.idle && browser.idle.onStateChanged),
-						hasQueryState: !!(browser.idle && browser.idle.queryState)
-					};
-					log.info('[Debug]  Browser APIs:', false, browserAPIs);
-
-					// 3. Test state query
-					if (browser.idle && browser.idle.queryState) {
-						const currentState = await browser.idle.queryState(Math.floor(idleThreshold / 1000));
-						log.info('[Debug]  Current browser idle state:', false, currentState);
-					}
-
-					// 4. Check contexts
-					const contexts = Array.from(activeContexts.values());
-					log.info('[Debug]  Active contexts:', false, contexts);
-
-					// 5. Check protected contexts
-					const protectedContexts = contexts.filter((ctx) => needsIdleProtection(ctx.type));
-					log.info('[Debug]  Protected contexts:', false, protectedContexts);
-
-					return {
-						initialStatus,
-						browserAPIs,
-						contexts,
-						protectedContexts,
-						recommendation:
-							protectedContexts.length > 0 && browserAPIs.hasIdle
-								? 'All components available for idle detection'
-								: 'Missing components - see logs for details'
-					};
-				},
-
-				// NEW: Simulate user activity
-				simulateActivity: () => {
-					log.info('[Debug]  Simulating user activity');
-					lastActivity = Date.now();
-
-					// Broadcast to all protected contexts
-					const protectedContexts = Array.from(activeContexts.values()).filter((ctx) =>
-						needsIdleProtection(ctx.type)
-					);
-
-					protectedContexts.forEach((ctx) => {
-						if (ctx.tabId) {
-							browser.tabs
-								.sendMessage(ctx.tabId, {
-									type: 'USER_ACTIVITY',
-									timestamp: Date.now(),
-									contextId: ctx.id,
-									source: 'debug-simulation'
-								})
-								.catch(() => {}); // Ignore errors
-						}
-					});
-				},
-
-				// NEW: Force idle detection interval
-				forceSetIdleInterval: (seconds: number) => {
-					if (browser.idle && browser.idle.setDetectionInterval) {
-						browser.idle.setDetectionInterval(seconds);
-						log.info(`[Debug]  Forced idle detection interval to ${seconds} seconds`);
-					} else {
-						log.error('[Debug]  Browser idle API not available');
-					}
-				},
-
-				// NEW: Test the new idle warning notification system
-				testIdleWarningNotification: (delaySeconds: number = 15) => {
-					log.info(`[Debug]  Testing idle warning notification for ${delaySeconds} seconds`);
-
-					// Send enhanced lockdown warning to UI contexts
-					const protectedContexts = Array.from(activeContexts.values()).filter((ctx) =>
-						needsIdleProtection(ctx.type)
-					);
-
-					protectedContexts.forEach((ctx) => {
-						if (ctx.tabId) {
-							browser.tabs
-								.sendMessage(ctx.tabId, {
-									type: 'LOCKDOWN_WARNING_ENHANCED',
-									message: `Test idle warning notification - wallet will lock in ${delaySeconds} seconds`,
-									timestamp: Date.now(),
-									delayMs: delaySeconds * 1000,
-									delaySeconds: delaySeconds,
-									notificationId: `test-lockdown-warning-${Date.now()}`,
-									windowFocused: false
-								})
-								.catch(() => {}); // Ignore errors
-						}
-					});
-				}
-			};
-
-			log.info(
-				'[ContextTracker]  Enhanced debug API available via YAKKLBackgroundDebug global object'
-			);
-			log.info(
-				'[ContextTracker]  Try: YAKKLBackgroundDebug.testIdleFlow() or YAKKLBackgroundDebug.getDetailedIdleStatus()'
-			);
-			log.info(
-				'[ContextTracker]  NEW: YAKKLBackgroundDebug.testIdleWarningNotification(15) - Test new visual notification system!'
-			);
-		}
-	} catch (error) {
-		log.warn('[ContextTracker] Failed to initialize debug API:', false, error);
-	}
-}
diff --git a/packages/yakkl-wallet/src/contexts/background/extensions/chrome/dapp.ts b/packages/yakkl-wallet/src/contexts/background/extensions/chrome/dapp.ts
index c8e0fe9..4d0d345 100644
--- a/packages/yakkl-wallet/src/contexts/background/extensions/chrome/dapp.ts
+++ b/packages/yakkl-wallet/src/contexts/background/extensions/chrome/dapp.ts
@@ -2,7 +2,7 @@
 import { requestManager } from './eip-6963';
 import { log } from '$lib/managers/Logger';
 import { verifyDomainConnected } from './verifyDomainConnectedBackground';
-import type { Runtime } from 'webextension-polyfill';
+import type { Runtime } from '$lib/types/browser-types';
 import { portManager } from '$lib/managers/PortManager';
 import { UnifiedTimerManager } from '$lib/managers/UnifiedTimerManager';
 
diff --git a/packages/yakkl-wallet/src/contexts/background/extensions/chrome/eip-6963.ts b/packages/yakkl-wallet/src/contexts/background/extensions/chrome/eip-6963.ts
index d9acd90..d997007 100644
--- a/packages/yakkl-wallet/src/contexts/background/extensions/chrome/eip-6963.ts
+++ b/packages/yakkl-wallet/src/contexts/background/extensions/chrome/eip-6963.ts
@@ -44,6 +44,18 @@ export { requestManager };
 
 type RuntimePort = Runtime.Port;
 
+// Define the interface for our request data
+interface RequestsExternalData {
+  resolve: (value: any) => void;
+  reject: (reason: any) => void;
+  method: string;
+  params: any[];
+  timestamp: number;
+}
+
+// Create our own requestsExternal Map with the correct type
+const requestsExternal = new Map<string, RequestsExternalData>();
+
 // Map to track active connections
 const eip6963Ports = new Map<string, RuntimePort>();
 
@@ -59,17 +71,17 @@ interface EIP6963Message {
 		message: string;
 	};
 }
-const messageAnalyzer = new MessageAnalyzer();
+
 // Add before the handleEIP6963Request function
 type PermissionlessMethod = () => Promise<unknown> | unknown;
 type PermissionRequiredMethod = () => Promise<unknown>;
 
 interface PermissionlessMethods {
-	[key: string]: PermissionlessMethod;
+  [key: string]: PermissionlessMethod;
 }
 
 interface PermissionRequiredMethods {
-	[key: string]: PermissionRequiredMethod;
+  [key: string]: PermissionRequiredMethod;
 }
 
 // Add before handleEIP6963Request
@@ -84,1095 +96,623 @@ const EIP1193_ERRORS = {
 };
 
 // Track active requests to prevent duplicates
-const activeRequests = new Map<
-	string,
-	{
-		timestamp: number;
-		promise: Promise<any>;
-	}
->();
-
-// Clean up old requests every 5 minutes using UnifiedTimerManager
-const timerManager = UnifiedTimerManager.getInstance();
-timerManager.addInterval(
-	'eip6963-cleanup',
-	() => {
-		const now = Date.now();
-		for (const [requestId, request] of activeRequests.entries()) {
-			if (now - request.timestamp > 5 * 60 * 1000) {
-				activeRequests.delete(requestId);
-			}
-		}
-	},
-	5 * 60 * 1000
-);
-timerManager.startInterval('eip6963-cleanup');
-
-// Add at the top with other imports
-const processedEIP6963Requests = new Set<string>();
+const activeRequests = new Map<string, {
+  timestamp: number;
+  promise: Promise<any>;
+}>();
+
+// Clean up old requests every 5 minutes
+setInterval(() => {
+  const now = Date.now();
+  for (const [requestId, request] of activeRequests.entries()) {
+    if (now - request.timestamp > 5 * 60 * 1000) {
+      activeRequests.delete(requestId);
+    }
+  }
+}, 5 * 60 * 1000);
 
 /**
  * Get the origin from a request
  * This needs to be implemented based on how your extension receives requests
  */
 function getRequestOrigin(request?: any, sender?: browser.Runtime.MessageSender): string {
-	try {
-		// If we have a sender with a URL, extract the origin
-		if (sender && sender.url) {
-			return new URL(sender.url).origin;
-		}
-
-		// If request contains origin information
-		if (request && request.origin) {
-			return request.origin;
-		}
-
-		// If request contains metadata with domain
-		if (request && request.metaDataParams && request.metaDataParams.domain) {
-			// Ensure it's a proper origin with protocol
-			const domain = request.metaDataParams.domain;
-			if (domain.startsWith('http://') || domain.startsWith('https://')) {
-				return domain;
-			}
-			return `https://${domain}`;
-		}
-
-		// Default to a placeholder if we can't determine the origin
-		log.warn('Could not determine request origin, using placeholder', false, { request, sender });
-		return 'unknown-origin';
-	} catch (error) {
-		log.error('Error getting request origin', false, error);
-		return 'unknown-origin';
-	}
-}
-
-// Add to existing listeners in backgroundListeners.ts
-export async function onEIP6963MessageListener(
-	message: any,
-	sender: Runtime.MessageSender
-): Promise<any> {
-	try {
-		// Type guard to check for EIP-6963 message
-		const isEIP6963Message = (msg: any): msg is EIP6963Message =>
-			msg &&
-			typeof msg === 'object' &&
-			typeof msg.action === 'string' &&
-			typeof msg.requestId === 'string';
-
-		if (!isEIP6963Message(message)) {
-			// Let other handlers try to process it
-			log.info('EIP6963 - onMessage - not an EIP6963 message so passing through', false, {
-				message
-			});
-			return undefined; // Return undefined to let the message pass through
-		}
-
-		log.info('Received EIP6963 message', false, message);
-
-		if (message.action === 'resolveEIP6963Request') {
-			const success = await resolveEIP6963Request(message.requestId, message.result);
-			log.debug('EIP6963: resolveEIP6963Request', false, {
-				success,
-				requestId: message.requestId
-			});
-			return {
-				type: 'YAKKL_RESPONSE:EIP6963',
-				result: success,
-				requestId: message.requestId
-			};
-		}
-
-		if (message.action === 'rejectEIP6963Request') {
-			const success = await rejectEIP6963Request(message.requestId, message.error);
-			log.debug('EIP6963: rejectEIP6963Request', false, {
-				success,
-				requestId: message.requestId,
-				error: message.error
-			});
-			return {
-				type: 'YAKKL_RESPONSE:EIP6963',
-				result: success,
-				requestId: message.requestId,
-				error: message.error
-			};
-		}
-
-		// If we got here but message is EIP-6963, still respond with an error
-		throw new Error('Unknown EIP6963 action');
-	} catch (error) {
-		log.error('Error handling EIP-6963 message', false, error);
-		return {
-			type: 'YAKKL_RESPONSE:EIP6963',
-			error: {
-				code: 4200,
-				message: error instanceof Error ? error.message : String(error)
-			}
-		};
-	}
+  try {
+    if (request?.origin) return request.origin;
+    if (sender?.url) return new URL(sender.url).origin;
+    if (sender?.tab?.url) return new URL(sender.tab.url).origin;
+    return '';
+  } catch (error) {
+    log.error('Error getting request origin:', false, error);
+    return '';
+  }
+}
+
+// Add this function to handle messages with proper typing
+function setupMessageListener() {
+  browser.runtime.onMessage.addListener((
+    message: unknown,
+    sender: Runtime.MessageSender,
+    sendResponse: (response?: any) => void
+  ): any | Promise<unknown> => {
+    try {
+      log.warn('Received message', false, message);
+      log.warn('Sender', false, sender);
+      log.warn('Send response', false, sendResponse);
+
+      // Type guard to check if message has the expected structure
+      const isEIP6963Message = (msg: any): msg is EIP6963Message => {
+        return msg &&
+          typeof msg === 'object' &&
+          typeof msg.action === 'string' &&
+          typeof msg.requestId === 'string';
+      };
+
+      if (!isEIP6963Message(message)) {
+        log.debug('Received non-EIP6963 message', false, message);
+        sendResponse({
+          type: 'YAKKL_RESPONSE:EIP6963',
+          error: {
+            code: 4200,
+            message: 'Invalid message format'
+          }
+        });
+        return true;
+      }
+
+      if (message.action === 'resolveEIP6963Request') {
+        log.debug('Resolving EIP-6963 request from popup', false, {
+          requestId: message.requestId,
+          result: message.result
+        });
+
+        const success = resolveEIP6963Request(message.requestId, message.result);
+        sendResponse({
+          type: 'YAKKL_RESPONSE:EIP6963',
+          result: success,
+          requestId: message.requestId
+        });
+        return true;
+      }
+      else if (message.action === 'rejectEIP6963Request') {
+        log.debug('Rejecting EIP-6963 request from popup', false, {
+          requestId: message.requestId,
+          error: message.error
+        });
+
+        const success = rejectEIP6963Request(message.requestId, message.error);
+        sendResponse({
+          type: 'YAKKL_RESPONSE:EIP6963',
+          result: success,
+          requestId: message.requestId,
+          error: message.error
+        });
+        return true;
+      }
+
+      // Default case - respond with error
+      sendResponse({
+        type: 'YAKKL_RESPONSE:EIP6963',
+        error: {
+          code: 4200,
+          message: 'Unknown action'
+        }
+      });
+      return true;
+    } catch (error) {
+      log.error('Error handling EIP-6963 message', false, error);
+      sendResponse({
+        type: 'YAKKL_RESPONSE:EIP6963',
+        error: {
+          code: 4200,
+          message: error instanceof Error ? error.message : String(error)
+        }
+      });
+      return true;
+    }
+  });
 }
 
 export function initializeEIP6963() {
-	if (!browser) return;
-
-	try {
-		// Initialize the permissions system
-		initializePermissions();
-
-		browser.runtime.onConnect.addListener((port: RuntimePort) => {
-			if (port.name !== YAKKL_PROVIDER_EIP6963) return;
-
-			log.debug('EIP6963: Port connected:', false, {
-				portName: port.name,
-				port: port,
-				timestamp: new Date().toISOString()
-			});
-
-			const portId = `eip6963_${Date.now()}_${Math.random().toString(36).slice(2, 11)}`;
-			eip6963Ports.set(portId, port);
-
-			// Use the exported onEIP6963Listener directly
-			port.onMessage.addListener(async (message: unknown) => {
-				await onEIP6963PortListener(message, port);
-			});
-
-			port.onDisconnect.addListener(() => {
-				eip6963Ports.delete(portId);
-
-				if (browser.runtime.lastError) {
-					log.error('EIP-6963 port error on disconnect', false, browser.runtime.lastError);
-				}
-			});
-		});
-	} catch (error) {
-		log.error('Failed to initialize EIP-6963 handler', true, error);
-	}
+  if (!browser) return;
+
+  try {
+    setupMessageListener();
+
+    // Initialize the permissions system
+    initializePermissions();
+
+    log.info('initializeEIP6963 - browser.runtime.onConnect', false);
+
+    browser.runtime.onConnect.addListener((port: RuntimePort) => {
+      if (port.name !== YAKKL_PROVIDER_EIP6963) return;
+
+      const portId = `eip6963_${Date.now()}_${Math.random().toString(36).slice(2, 11)}`;
+      eip6963Ports.set(portId, port);
+
+      log.warn('EIP-6963 port connected', false, { portId });
+
+      // Use the exported onEIP6963Listener directly
+      port.onMessage.addListener(async (message: unknown) => {
+        log.debug('Received message in EIP-6963 port', false, { message, portId });
+        await onEIP6963Listener(message, port);
+      });
+
+      port.onDisconnect.addListener(() => {
+        log.debug('EIP-6963 port disconnected', false, { portId });
+        eip6963Ports.delete(portId);
+
+        if (browser.runtime.lastError) {
+          log.error('EIP-6963 port error on disconnect', false, browser.runtime.lastError);
+        }
+      });
+    });
+
+    // Set up a periodic check for timed-out requests
+    // setInterval(() => {
+    //   const now = Date.now();
+    //   for (const [id, request] of requestsExternal.entries()) {
+    //     if (now - request.timestamp > REQUEST_TIMEOUT) {
+    //       log.warn(`Request timed out: ${request.method}`, false, {
+    //         id,
+    //         params: request.params,
+    //         timestamp: new Date().toISOString()
+    //       });
+
+    //       // Create a properly formatted error response
+    //       const errorResponse = {
+    //         type: 'YAKKL_RESPONSE:EIP6963',
+    //         id,
+    //         error: {
+    //           code: 4999,
+    //           message: 'Request timeout'
+    //         }
+    //       };
+
+    //       // Find the port to send the error response
+    //       for (const port of eip6963Ports.values()) {
+    //         if (port.sender) {
+    //           log.debug('Sending timeout error response:', false, {
+    //             errorResponse,
+    //             timestamp: new Date().toISOString()
+    //           });
+    //           port.postMessage(errorResponse);
+    //           break;
+    //         }
+    //       }
+
+    //       request.reject(new ProviderRpcError(4999, 'Request timeout'));
+    //       requestsExternal.delete(id);
+    //     }
+    //   }
+    // }, 10000); // Check every 10 seconds
+
+    log.info('EIP-6963 handler initialized');
+  } catch (error) {
+    log.error('Failed to initialize EIP-6963 handler', true, error);
+  }
 }
 
 // Helper function to handle getBlock
-async function handleGetBlock(
-	chainId: number,
-	block: BlockTag | Promise<BlockTag>
-): Promise<Block | undefined> {
-	return await getBlock(chainId, block, undefined);
+async function handleGetBlock(chainId: number, block: BlockTag | Promise<BlockTag>): Promise<Block | undefined> {
+  return await getBlock(chainId, block, undefined);
 }
 
 // Helper function to handle estimateGas
 async function handleEstimateGas(chainId: any, params: any[]): Promise<unknown | undefined> {
-	return await estimateGasLegacy(chainId, params[0]);
+  return await estimateGasLegacy(chainId, params[0]);
 }
 
 // Define read-only methods that don't require approval
-export const READONLY_METHODS = [
-	// Account and Address Methods
-	'eth_accounts',
-	'eth_coinbase',
-	'eth_getBalance',
-	'eth_getCode',
-	'eth_getStorageAt',
-	'eth_getTransactionCount',
-
-	// Block Methods
-	'eth_blockNumber',
-	'eth_getBlockByHash',
-	'eth_getBlockByNumber',
-	'eth_getBlockTransactionCountByHash',
-	'eth_getBlockTransactionCountByNumber',
-	'eth_getUncleByBlockHashAndIndex',
-	'eth_getUncleByBlockNumberAndIndex',
-	'eth_getUncleCountByBlockHash',
-	'eth_getUncleCountByBlockNumber',
-
-	// Chain and Network Methods
-	'eth_chainId',
-	'net_version',
-	'eth_protocolVersion',
-
-	// Compiler Methods
-	'eth_compileLLL',
-	'eth_compileSerpent',
-	'eth_compileSolidity',
-	'eth_getCompilers',
-
-	// Filter Methods
-	'eth_getFilterChanges',
-	'eth_getFilterLogs',
-	'eth_getLogs',
-	'eth_newBlockFilter',
-	'eth_newFilter',
-	'eth_newPendingTransactionFilter',
-	'eth_uninstallFilter',
-
-	// Gas and Mining Methods
-	'eth_gasPrice',
-	'eth_hashrate',
-	'eth_mining',
-
-	// Transaction Methods
-	'eth_getTransactionByBlockHashAndIndex',
-	'eth_getTransactionByBlockNumberAndIndex',
-	'eth_getTransactionByHash',
-	'eth_getTransactionReceipt',
-
-	// Work Methods
-	'eth_getWork',
-	'eth_submitHashrate',
-	'eth_submitWork',
-
-	// State Methods
-	'eth_syncing'
-];
+const READONLY_METHODS = [
+  'eth_chainId',
+  'eth_accounts',
+  'net_version',
+  'eth_blockNumber',
+  'eth_getBalance',
+  'eth_getCode',
+  'eth_getStorageAt',
+  'eth_getTransactionCount',
+  'eth_getBlockTransactionCountByHash',
+  'eth_getBlockTransactionCountByNumber',
+  'eth_getUncleCountByBlockHash',
+  'eth_getUncleCountByBlockNumber',
+  'eth_protocolVersion',
+  'eth_syncing',
+  'eth_coinbase',
+  'eth_mining',
+  'eth_hashrate',
+  'eth_gasPrice',
+  'eth_getBlockByHash',
+  'eth_getBlockByNumber',
+  'eth_getTransactionByHash',
+  'eth_getTransactionByBlockHashAndIndex',
+  'eth_getTransactionByBlockNumberAndIndex',
+  'eth_getTransactionReceipt',
+  'eth_getUncleByBlockHashAndIndex',
+  'eth_getUncleByBlockNumberAndIndex',
+  'eth_getCompilers',
+  'eth_compileLLL',
+  'eth_compileSolidity',
+  'eth_compileSerpent',
+  'eth_newFilter',
+  'eth_newBlockFilter',
+  'eth_newPendingTransactionFilter',
+  'eth_uninstallFilter',
+  'eth_getFilterChanges',
+  'eth_getFilterLogs',
+  'eth_getLogs',
+  'eth_getWork',
+  'eth_submitWork',
+  'eth_submitHashrate'
+] as const;
 
 // Function to handle read-only methods
-export async function handleReadOnlyMethod(
-	method: string,
-	params: any[] = [],
-	requestId?: string
-): Promise<any> {
-	try {
-		switch (method) {
-			case 'eth_chainId':
-				return await getCurrentlySelectedChainId(requestId);
-			case 'eth_accounts':
-				return await getCurrentlySelectedAccounts(requestId);
-			case 'net_version':
-				return await getCurrentlySelectedNetworkVersion(requestId);
-			case 'eth_blockNumber':
-				return await getCurrentlySelectedBlockNumber(requestId);
-			case 'eth_getBalance':
-				return await getCurrentlySelectedBalance(params[0], requestId);
-			case 'eth_getCode':
-				return await getCurrentlySelectedCode(params[0], requestId);
-			case 'eth_getStorageAt':
-				return await getCurrentlySelectedStorageAt(params[0], params[1], requestId);
-			case 'eth_getTransactionCount':
-				return await getCurrentlySelectedTransactionCount(params[0], requestId);
-			case 'eth_gasPrice':
-				return await getCurrentlySelectedGasPrice(requestId);
-			case 'eth_getBlockByHash':
-				return await getCurrentlySelectedBlockByHash(params[0], params[1], requestId);
-			case 'eth_getBlockByNumber':
-				return await getCurrentlySelectedBlockByNumber(params[0], params[1], requestId);
-			case 'eth_getTransactionByHash':
-				return await getCurrentlySelectedTransactionByHash(params[0], requestId);
-			case 'eth_getTransactionReceipt':
-				return await getCurrentlySelectedTransactionReceipt(params[0], requestId);
-			case 'eth_getLogs':
-				return await getCurrentlySelectedLogs(params[0], requestId);
-			default:
-				throw new ProviderRpcError(4200, `Method ${method} not supported`);
-		}
-	} catch (error) {
-		log.error('Error handling read-only method:', false, {
-			method,
-			error,
-			timestamp: new Date().toISOString()
-		});
-		throw error;
-	}
-}
-
-// Helper function to handle getBlockByNumber
-async function getCurrentlySelectedBlockByNumber(
-	blockNumber: string,
-	fullTx: boolean,
-	requestId?: string
-): Promise<any> {
-	try {
-		const shortcuts = await getCurrentlySelectedData(requestId);
-		const block = await getBlock(shortcuts.chainId, blockNumber, fullTx ? true : false);
-		return block;
-	} catch (error) {
-		log.error('Error getting block by number:', false, {
-			error,
-			blockNumber,
-			requestId,
-			timestamp: new Date().toISOString()
-		});
-		throw error;
-	}
-}
-
+export async function handleReadOnlyMethod(method: string, params: any[] = []): Promise<any> {
+  try {
+    switch (method) {
+      case 'eth_chainId':
+        return await getCurrentlySelectedChainId();
+      case 'eth_accounts':
+        return await getCurrentlySelectedAccounts();
+      case 'net_version':
+        return await getCurrentlySelectedNetworkVersion();
+      case 'eth_blockNumber':
+        return await getCurrentlySelectedBlockNumber();
+      case 'eth_getBalance':
+        return await getCurrentlySelectedBalance(params[0]);
+      case 'eth_getCode':
+        return await getCurrentlySelectedCode(params[0]);
+      case 'eth_getStorageAt':
+        return await getCurrentlySelectedStorageAt(params[0], params[1]);
+      case 'eth_getTransactionCount':
+        return await getCurrentlySelectedTransactionCount(params[0]);
+      case 'eth_gasPrice':
+        return await getCurrentlySelectedGasPrice();
+      case 'eth_getBlockByHash':
+        return await getCurrentlySelectedBlockByHash(params[0], params[1]);
+      case 'eth_getBlockByNumber':
+        return await getCurrentlySelectedBlockByNumber(params[0], params[1]);
+      case 'eth_getTransactionByHash':
+        return await getCurrentlySelectedTransactionByHash(params[0]);
+      case 'eth_getTransactionReceipt':
+        return await getCurrentlySelectedTransactionReceipt(params[0]);
+      case 'eth_getLogs':
+        return await getCurrentlySelectedLogs(params[0]);
+      default:
+        throw new ProviderRpcError(4200, `Method ${method} not supported`);
+    }
+  } catch (error) {
+    log.error('Error handling read-only method:', false, {
+      method,
+      error,
+      timestamp: new Date().toISOString()
+    });
+    throw error;
+  }
+}
+
+// eth_requestAccounts is in write methods but it's special
 // Function to handle write methods that require approval
-export async function handleWriteMethod(
-	method: string,
-	port: Runtime.Port,
-	params: any[] = [],
-	requestId?: string
-): Promise<any> {
-	try {
-		switch (method) {
-			case 'eth_requestAccounts':
-				return await handleRequestAccounts(port, requestId);
-			case 'eth_sendTransaction':
-				return await handleSendTransaction(port, params, requestId);
-			case 'eth_sign':
-				return await handleSign(port, params, requestId);
-			case 'personal_sign':
-				return await handlePersonalSign(port, params, requestId);
-			case 'eth_signTypedData_v4':
-				return await handleSignTypedDataV4(port, params, requestId);
-			case 'wallet_addEthereumChain':
-				return await handleAddEthereumChain(port, params, requestId);
-			case 'wallet_switchEthereumChain':
-				return await handleSwitchEthereumChain(port, params, requestId);
-			case 'wallet_requestPermissions':
-				return await handleRequestPermissions(port, params, requestId);
-			case 'wallet_revokePermissions':
-				return await handleRevokePermissions(port, params, requestId);
-			case 'wallet_getPermissions':
-				return await handleGetPermissions(port, requestId);
-			default:
-				throw new ProviderRpcError(4200, `Method ${method} not supported`);
-		}
-	} catch (error) {
-		log.error('Error handling write method:', false, {
-			method,
-			error,
-			timestamp: new Date().toISOString()
-		});
-		throw error;
-	}
-}
-
-// Primary EIP-6963 Port Listener
-export async function onEIP6963PortListener(message: any, port: Runtime.Port): Promise<void> {
-	try {
-		messageAnalyzer.analyze(message);
-		// First, let's understand what we received
-		log.debug('EIP6963 handler received raw message', false, {
-			message,
-			messageType: typeof message,
-			hasMethod: 'method' in message,
-			hasType: 'type' in message,
-			timestamp: new Date().toISOString()
-		});
-
-		// Try to extract method from various possible locations
-		let method = message.method;
-		let id = message.id;
-
-		// Fallback: Check if method is nested in data or payload
-		if (!method && message.data?.method) {
-			method = message.data.method;
-			log.debug('Found method in message.data', false, { method });
-		}
-
-		// Fallback: Check if this is a wrapped message
-		if (!method && message.payload?.method) {
-			method = message.payload.method;
-			log.debug('Found method in message.payload', false, { method });
-		}
-
-		// Fallback: Check if type contains method information (e.g., "YAKKL_REQUEST:eth_accounts")
-		if (!method && message.type && typeof message.type === 'string') {
-			const typeMatch = message.type.match(/:(eth_[a-zA-Z0-9_]+)/);
-			if (typeMatch) {
-				method = typeMatch[1];
-				log.debug('Extracted method from type', false, { type: message.type, method });
-			}
-		}
-
-		// Fallback: Check for action field (some systems use action instead of method)
-		if (!method && message.action) {
-			method = message.action;
-			log.debug('Using action as method', false, { action: message.action });
-		}
-
-		// Special case: handle non-RPC messages
-		if (!method && message.type) {
-			switch (message.type) {
-				case 'ping':
-				case 'PING':
-				case 'connection_test':
-					// Handle ping/connection test
-					port.postMessage({
-						type: 'pong',
-						id: id || message.id || Date.now().toString(),
-						timestamp: Date.now()
-					});
-					log.debug('Handled ping message', false);
-					return;
-
-				case 'init':
-				case 'INIT':
-				case 'handshake':
-					// Handle initialization
-					port.postMessage({
-						type: 'init_ack',
-						id: id || message.id || Date.now().toString(),
-						status: 'ready'
-					});
-					log.debug('Handled init message', false);
-					return;
-
-				default:
-				// Log unknown message types for debugging
-				// log.warn('Unknown message type without method', false, {
-				//   type: message.type,
-				//   message
-				// });
-			}
-		}
-
-		// After all fallbacks, validate we have a method
-		if (!method) {
-			log.error('No method found in EIP6963 message after all fallbacks', false, {
-				message,
-				checkedLocations: [
-					'message.method',
-					'message.data.method',
-					'message.payload.method',
-					'message.type (extraction)',
-					'message.action'
-				]
-			});
-
-			// If we have an ID, send a proper error response
-			if (id) {
-				sendErrorResponse(port, id, new Error('Method is required'));
-			} else {
-				// Without an ID, we can't send a proper response
-				// Log it and potentially close the connection
-				log.error('Cannot send error response - no request ID', false);
-			}
-			return;
-		}
-
-		// Now we definitely have a method, continue with normal processing
-		log.debug('EIP6963 handler processing message', false, {
-			method,
-			id,
-			timestamp: new Date().toISOString()
-		});
-
-		// Skip duplicate requests check remains the same
-		if (id && processedEIP6963Requests.has(id)) {
-			log.debug('EIP6963: Skipping duplicate request:', false, {
-				requestId: id,
-				method,
-				timestamp: new Date().toISOString()
-			});
-			return;
-		}
-
-		if (id) {
-			processedEIP6963Requests.add(id);
-		}
-
-		// Route based on method type
-		if (isSimulationMethod(method)) {
-			log.debug('Routing to simulation handler:', false, { method });
-			await handleSimulationRequest(message, port);
-		} else if (isWriteMethod(method)) {
-			log.debug('Routing to write handler:', false, { method });
-			await handleWriteRequest(message, port);
-		} else if (isReadMethod(method)) {
-			log.debug('Routing to read handler:', false, { method });
-			await handleReadOnlyRequest(message, port);
-		} else {
-			log.warn('Unknown EIP6963 method:', false, { method });
-			if (id) {
-				sendErrorResponse(port, id, new Error(`Unknown method: ${method}`));
-			}
-		}
-	} catch (error) {
-		log.error('Error in EIP6963 handler:', false, error);
-		if (message?.id) {
-			sendErrorResponse(port, message.id, error);
-		}
-	}
-}
-
-async function switchEthereumChain(params: any, requestId?: string): Promise<null> {
-	try {
-		const newChainId = parseInt(params[0].chainId, 16);
-		// Update chain through appropriate mechanism
-		broadcastToEIP6963Ports('chainChanged', `0x${newChainId.toString(16)}`, requestId);
-		return null;
-	} catch (error) {
-		log.error('Error in wallet_switchEthereumChain', false, error);
-		throw new ProviderRpcError(4901, 'Failed to switch chain');
-	}
-}
-
-async function addEthereumChain(
-	params: any,
-	port: Runtime.Port,
-	requestId?: string
-): Promise<null> {
-	return (await showEIP6963Popup('wallet_addEthereumChain', params, port, requestId)) as null;
-}
-
-async function getBlockByNumber(params: any, port: Runtime.Port, requestId?: string): Promise<any> {
-	const result = await browser.storage.local.get(STORAGE_YAKKL_CURRENTLY_SELECTED);
-	const yakklCurrentlySelected = result[STORAGE_YAKKL_CURRENTLY_SELECTED] as YakklCurrentlySelected;
-	if (!yakklCurrentlySelected?.shortcuts?.chainId) {
-		throw new ProviderRpcError(4100, 'Wallet not initialized');
-	}
-	return await showEIP6963Popup('eth_getBlockByNumber', params, port, requestId);
-}
-
-async function estimateGas(
-	params: any,
-	apiKey: string,
-	port: Runtime.Port,
-	requestId?: string
-): Promise<any> {
-	const result = await browser.storage.local.get(STORAGE_YAKKL_CURRENTLY_SELECTED);
-	const yakklCurrentlySelected = result[STORAGE_YAKKL_CURRENTLY_SELECTED] as YakklCurrentlySelected;
-	if (!yakklCurrentlySelected?.shortcuts?.chainId) {
-		throw new ProviderRpcError(4100, 'Wallet not initialized');
-	}
-	return await showEIP6963Popup('eth_estimateGas', params, port, requestId);
+export async function handleWriteMethod(method: string, params: any[] = []): Promise<any> {
+  try {
+    switch (method) {
+      case 'eth_requestAccounts':
+        return await handleRequestAccounts(params[0], params[1]);
+      case 'eth_sendTransaction':
+        return await handleSendTransaction(params[0]);
+      case 'eth_sign':
+        return await handleSign(params[0], params[1]);
+      case 'personal_sign':
+        return await handlePersonalSign(params[0], params[1]);
+      case 'eth_signTypedData_v3':
+        return await handleSignTypedDataV3(params[0], params[1]);
+      case 'eth_signTypedData_v4':
+        return await handleSignTypedDataV4(params[0], params[1]);
+      case 'wallet_addEthereumChain':
+        return await handleAddEthereumChain(params[0]);
+      case 'wallet_switchEthereumChain':
+        return await handleSwitchEthereumChain(params[0]);
+      default:
+        throw new ProviderRpcError(4200, `Method ${method} not supported`);
+    }
+  } catch (error) {
+    log.error('Error handling write method:', false, {
+      method,
+      error,
+      timestamp: new Date().toISOString()
+    });
+    throw error;
+  }
+}
+
+// Main EIP-6963 listener
+export async function onEIP6963Listener(message: unknown, port: Runtime.Port) {
+  const { id, method, params = [], requiresApproval } = message as {
+    id: number;
+    method: string;
+    params?: any[];
+    requiresApproval?: boolean;
+  };
+
+  try {
+    log.debug('Processing request in background:', false, {
+      id,
+      method,
+      params,
+      requiresApproval,
+      timestamp: new Date().toISOString()
+    });
+
+    let result: any;
+
+    // Check if method is read-only
+    if (READONLY_METHODS.includes(method as typeof READONLY_METHODS[number])) {
+      result = await handleReadOnlyMethod(method, params);
+    } else {
+      // Handle write methods that require approval
+      result = await handleWriteMethod(method, params);
+    }
+
+    // Send success response
+    port.postMessage({
+      type: 'YAKKL_RESPONSE:EIP6963',
+      id,
+      method,
+      result
+    });
+
+  } catch (error) {
+    log.error('Request failed', false, {
+      error,
+      method,
+      timestamp: new Date().toISOString()
+    });
+
+    // Send error response
+    port.postMessage({
+      type: 'YAKKL_RESPONSE:EIP6963',
+      id,
+      method,
+      error: {
+        code: error instanceof ProviderRpcError ? error.code : 4200,
+        message: error instanceof Error ? error.message : "Unknown error occurred"
+      }
+    });
+  }
+}
+
+async function switchEthereumChain(params: any[]): Promise<null> {
+  try {
+    const newChainId = parseInt(params[0].chainId, 16);
+    // Update chain through appropriate mechanism
+    broadcastToEIP6963Ports('chainChanged', `0x${newChainId.toString(16)}`);
+    return null;
+  } catch (error) {
+    log.error('Error in wallet_switchEthereumChain', false, error);
+    throw new ProviderRpcError(4901, 'Failed to switch chain');
+  }
+}
+
+async function addEthereumChain(params: any[]): Promise<null> {
+  return await showEIP6963Popup('wallet_addEthereumChain', params);
+}
+
+async function getBlockByNumber(params: any[]): Promise<any> {
+  const result = await browser.storage.local.get(STORAGE_YAKKL_CURRENTLY_SELECTED);
+  const yakklCurrentlySelected = result[STORAGE_YAKKL_CURRENTLY_SELECTED] as YakklCurrentlySelected;
+  if (!yakklCurrentlySelected?.shortcuts?.chainId) {
+    throw new ProviderRpcError(4100, 'Wallet not initialized');
+  }
+  return await showEIP6963Popup('eth_getBlockByNumber', params);
+}
+
+async function estimateGas(params: any[], apiKey: string): Promise<any> {
+  const result = await browser.storage.local.get(STORAGE_YAKKL_CURRENTLY_SELECTED);
+  const yakklCurrentlySelected = result[STORAGE_YAKKL_CURRENTLY_SELECTED] as YakklCurrentlySelected;
+  if (!yakklCurrentlySelected?.shortcuts?.chainId) {
+    throw new ProviderRpcError(4100, 'Wallet not initialized');
+  }
+  return await showEIP6963Popup('eth_estimateGas', params);
 }
 
 // Add parameter validation
 function validateParams(method: string, params: any[]): boolean {
-	try {
-		switch (method) {
-			case 'eth_sendTransaction':
-				return params.length === 1 && typeof params[0] === 'object';
-			case 'eth_sign':
-				return (
-					params.length === 2 && typeof params[0] === 'string' && typeof params[1] === 'string'
-				);
-			case 'personal_sign':
-				return (
-					params.length === 2 && typeof params[0] === 'string' && typeof params[1] === 'string'
-				);
-			case 'eth_signTypedData_v4':
-				return (
-					params.length === 2 && typeof params[0] === 'string' && typeof params[1] === 'string'
-				);
-			case 'wallet_switchEthereumChain':
-				return (
-					params.length === 1 &&
-					typeof params[0] === 'object' &&
-					typeof params[0].chainId === 'string'
-				);
-			case 'wallet_addEthereumChain':
-				return (
-					params.length === 1 &&
-					typeof params[0] === 'object' &&
-					typeof params[0].chainId === 'string'
-				);
-			case 'wallet_requestPermissions':
-				return (
-					params.length === 1 &&
-					Array.isArray(params[0]) &&
-					params[0].every((p) => typeof p === 'object' && typeof p.eth_accounts === 'object')
-				);
-			case 'wallet_revokePermissions':
-				return (
-					params.length === 1 &&
-					Array.isArray(params[0]) &&
-					params[0].every((p) => typeof p === 'object' && typeof p.eth_accounts === 'object')
-				);
-			case 'wallet_getPermissions':
-				return params.length === 0; // No parameters needed
-			// Add more method validations as needed
-			default:
-				return true; // Default to true for methods without specific validation
-		}
-	} catch (error) {
-		log.error('Parameter validation error', false, { method, params, error });
-		return false;
-	}
+  try {
+    switch (method) {
+      case 'eth_sendTransaction':
+        return params.length === 1 && typeof params[0] === 'object';
+      case 'eth_sign':
+        return params.length === 2 && typeof params[0] === 'string' && typeof params[1] === 'string';
+      case 'personal_sign':
+        return params.length === 3 && typeof params[0] === 'string' && typeof params[1] === 'string';
+      case 'eth_signTypedData_v4':
+      case 'eth_signTypedData_v3':
+        return params.length === 2 && typeof params[0] === 'string' && typeof params[1] === 'string';
+      case 'wallet_switchEthereumChain':
+        return params.length === 1 && typeof params[0] === 'object' && typeof params[0].chainId === 'string';
+      case 'wallet_addEthereumChain':
+        return params.length === 1 && typeof params[0] === 'object' && typeof params[0].chainId === 'string';
+      // Add more method validations as needed
+      default:
+        return true; // Default to true for methods without specific validation
+    }
+  } catch (error) {
+    log.error('Parameter validation error', false, { method, params, error });
+    return false;
+  }
 }
 
-// Helper functions to get data from currentlySelected.shortcuts
-export async function getCurrentlySelectedData(requestId?: string) {
-	try {
-		const result = await browser.storage.local.get(STORAGE_YAKKL_CURRENTLY_SELECTED);
-		const yakklCurrentlySelected = result[
-			STORAGE_YAKKL_CURRENTLY_SELECTED
-		] as YakklCurrentlySelected;
-		if (!yakklCurrentlySelected?.shortcuts) {
-			throw new ProviderRpcError(4100, 'Wallet shortcuts not initialized');
-		}
-
-		return yakklCurrentlySelected.shortcuts;
-	} catch (error) {
-		log.error('Error getting currently selected data', false, error);
-		throw new ProviderRpcError(4100, 'Error getting currently selected data');
-	}
-}
 
-// Read-only method handlers
-async function getCurrentlySelectedChainId(requestId?: string): Promise<string> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_chainId');
-	}
-	const shortcuts = await getCurrentlySelectedData(requestId);
-	return `0x${shortcuts.chainId.toString(16)}`;
-}
 
-export async function getCurrentlySelectedAccounts(requestId?: string): Promise<string[]> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_accounts');
-	}
-	const shortcuts = await getCurrentlySelectedData(requestId);
-	const id = shortcuts.id;
-	const persona = shortcuts.persona;
-	const domain = await getDomainForRequestId(requestId);
-	const addresses = await getAddressesForDomain(domain);
-	log.info('getCurrentlySelectedAccounts', false, { id, persona, addresses });
-	return addresses;
+async function getCurrentlySelectedStorageAt(address: string, position: string): Promise<string> {
+  const shortcuts = await getCurrentlySelectedData();
+  return await getCode(shortcuts.chainId, address); // Implement actual storage getter
 }
 
-async function getCurrentlySelectedNetworkVersion(requestId?: string): Promise<string> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_chainId');
-	}
-	const shortcuts = await getCurrentlySelectedData(requestId);
-	return shortcuts.chainId.toString();
+async function getCurrentlySelectedTransactionCount(address: string): Promise<string> {
+  const shortcuts = await getCurrentlySelectedData();
+  const nonce = await getNonce(shortcuts.chainId, address);
+  return nonce.toString();
 }
 
-async function getCurrentlySelectedBlockNumber(requestId?: string): Promise<string> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_blockNumber');
-	}
-	const shortcuts = await getCurrentlySelectedData(requestId);
-	const block = await getLatestBlock(shortcuts.chainId);
-	return block.number.toString();
+async function getCurrentlySelectedGasPrice(): Promise<string> {
+  const shortcuts = await getCurrentlySelectedData();
+  const gasPrice = await getGasPrice(shortcuts.chainId);
+  return gasPrice.toString();
 }
 
-async function getCurrentlySelectedBalance(address: string, requestId?: string): Promise<string> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_getBalance');
-	}
-	const shortcuts = await getCurrentlySelectedData(requestId);
-	const balance = await getBalance(shortcuts.chainId, address);
-	return balance.toString();
+async function getCurrentlySelectedBlockByHash(hash: string, fullTx: boolean): Promise<any> {
+  const shortcuts = await getCurrentlySelectedData();
+  return await getBlock(shortcuts.chainId, hash, fullTx ? true : false);
 }
 
-async function getCurrentlySelectedCode(address: string, requestId?: string): Promise<string> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_getCode');
-	}
-	const shortcuts = await getCurrentlySelectedData(requestId);
-	return await getCode(shortcuts.chainId, address);
+async function getCurrentlySelectedBlockByNumber(blockNumber: string, fullTx: boolean): Promise<any> {
+  const shortcuts = await getCurrentlySelectedData();
+  return await getBlock(shortcuts.chainId, blockNumber, fullTx ? true : false);
 }
 
-async function getCurrentlySelectedStorageAt(
-	address: string,
-	position: string,
-	requestId?: string
-): Promise<string> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_getStorageAt');
-	}
-	const shortcuts = await getCurrentlySelectedData(requestId);
-	return await getCode(shortcuts.chainId, address); // Implement actual storage getter
+async function getCurrentlySelectedTransactionByHash(hash: string): Promise<any> {
+  const shortcuts = await getCurrentlySelectedData();
+  return await getTransaction(shortcuts.chainId, hash);
 }
 
-async function getCurrentlySelectedTransactionCount(
-	address: string,
-	requestId?: string
-): Promise<string> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_getTransactionCount');
-	}
-	const shortcuts = await getCurrentlySelectedData(requestId);
-	const nonce = await getNonce(shortcuts.chainId, address);
-	return nonce.toString();
+async function getCurrentlySelectedTransactionReceipt(hash: string): Promise<any> {
+  const shortcuts = await getCurrentlySelectedData();
+  return await getTransactionReceipt(shortcuts.chainId, hash);
 }
 
-async function getCurrentlySelectedGasPrice(requestId?: string): Promise<string> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_gasPrice');
-	}
-	const shortcuts = await getCurrentlySelectedData(requestId);
-	const gasPrice = await getGasPrice(shortcuts.chainId);
-	return gasPrice.toString();
-}
-
-async function getCurrentlySelectedBlockByHash(
-	hash: string,
-	fullTx: boolean,
-	requestId?: string
-): Promise<any> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_getBlockByHash');
-	}
-	const shortcuts = await getCurrentlySelectedData(requestId);
-	return await getBlock(shortcuts.chainId, hash, fullTx ? true : false);
-}
-
-async function getCurrentlySelectedTransactionByHash(
-	hash: string,
-	requestId?: string
-): Promise<any> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_getTransactionByHash');
-	}
-	const shortcuts = await getCurrentlySelectedData(requestId);
-	return await getTransaction(shortcuts.chainId, hash);
-}
-
-async function getCurrentlySelectedTransactionReceipt(
-	hash: string,
-	requestId?: string
-): Promise<any> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_getTransactionReceipt');
-	}
-	const shortcuts = await getCurrentlySelectedData(requestId);
-	return await getTransactionReceipt(shortcuts.chainId, hash);
-}
-
-async function getCurrentlySelectedLogs(params: any, requestId?: string): Promise<any> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_getLogs');
-	}
-	const shortcuts = await getCurrentlySelectedData(requestId);
-	return await getLogs(shortcuts.chainId, params);
+async function getCurrentlySelectedLogs(params: any): Promise<any> {
+  const shortcuts = await getCurrentlySelectedData();
+  return await getLogs(shortcuts.chainId, params);
 }
 
 // Write method handlers
-export async function handleSendTransaction(
-	port: Runtime.Port,
-	params: any[],
-	requestId?: string
-): Promise<string> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_sendTransaction');
-	}
-	return showEIP6963Popup('eth_sendTransaction', params, port, requestId) as Promise<string>;
+export async function handleSendTransaction(params: any): Promise<string> {
+  return await showEIP6963Popup('eth_sendTransaction', [params]);
 }
 
-export async function handleRequestAccounts(
-	port: Runtime.Port,
-	requestId?: string
-): Promise<string[]> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_requestAccounts');
-	}
-	log.warn('Requesting accounts', false, { method: 'eth_requestAccounts', requestId });
-	return showEIP6963Popup('eth_requestAccounts', [], port, requestId) as Promise<string[]>;
-}
-
-export async function handleSign(
-	port: Runtime.Port,
-	params: any[],
-	requestId?: string
-): Promise<string> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_sign');
-	}
-	return showEIP6963Popup('eth_sign', params, port, requestId) as Promise<string>;
-}
+export async function handleRequestAccounts(port: Runtime.Port, requestId: string): Promise<string[]> {
+  log.warn('Requesting accounts', false, { method: 'eth_requestAccounts', params: [] });
 
-export async function handlePersonalSign(
-	port: Runtime.Port,
-	params: any[],
-	requestId?: string
-): Promise<string> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for personal_sign');
-	}
-	return showEIP6963Popup('personal_sign', params, port, requestId) as Promise<string>;
+  return await showEIP6963Popup('eth_requestAccounts', [port, requestId]);
 }
 
-export async function handleSignTypedDataV4(
-	port: Runtime.Port,
-	params: any[],
-	requestId?: string
-): Promise<string> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_signTypedData_v4');
-	}
-	return showEIP6963Popup('eth_signTypedData_v4', params, port, requestId) as Promise<string>;
+export async function handleSign(address: string, message: string): Promise<string> {
+  return await showEIP6963Popup('eth_sign', [address, message]);
 }
 
-export async function handleAddEthereumChain(
-	port: Runtime.Port,
-	params: any[],
-	requestId?: string
-): Promise<null> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for wallet_addEthereumChain');
-	}
-	return showEIP6963Popup('wallet_addEthereumChain', params, port, requestId) as null;
+export async function handlePersonalSign(message: string, address: string): Promise<string> {
+  return await showEIP6963Popup('personal_sign', [message, address]);
 }
 
-export async function handleSwitchEthereumChain(
-	port: Runtime.Port,
-	params: any[],
-	requestId?: string
-): Promise<null> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for wallet_switchEthereumChain');
-	}
-	return showEIP6963Popup('wallet_switchEthereumChain', params, port, requestId) as null;
+export async function handleSignTypedDataV3(address: string, typedData: string): Promise<string> {
+  return await showEIP6963Popup('eth_signTypedData_v3', [address, typedData]);
 }
 
-// Add new handlers for permission methods
-export async function handleRequestPermissions(
-	port: Runtime.Port,
-	params: any[],
-	requestId?: string
-): Promise<any> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for wallet_requestPermissions');
-	}
-	try {
-		// Validate parameters
-		if (!validateParams('wallet_requestPermissions', params)) {
-			throw new ProviderRpcError(
-				EIP1193_ERRORS.INVALID_PARAMS.code,
-				'Invalid parameters for wallet_requestPermissions'
-			);
-		}
-
-		// Show popup for permission request
-		return await showEIP6963Popup('wallet_requestPermissions', params, port, requestId);
-	} catch (error) {
-		log.error('Error handling wallet_requestPermissions:', false, error);
-		throw error;
-	}
+export async function handleSignTypedDataV4(address: string, typedData: string): Promise<string> {
+  return await showEIP6963Popup('eth_signTypedData_v4', [address, typedData]);
 }
 
-export async function handleRevokePermissions(
-	port: Runtime.Port,
-	params: any[],
-	requestId?: string
-): Promise<any> {
-	try {
-		// Validate parameters
-		if (!validateParams('wallet_revokePermissions', params)) {
-			throw new ProviderRpcError(
-				EIP1193_ERRORS.INVALID_PARAMS.code,
-				'Invalid parameters for wallet_revokePermissions'
-			);
-		}
-
-		// Get the origin from the port
-		const origin = port.sender?.url ? new URL(port.sender.url).origin : null;
-		if (!origin) {
-			throw new ProviderRpcError(
-				EIP1193_ERRORS.INVALID_PARAMS.code,
-				'Could not determine origin for permission revocation'
-			);
-		}
-
-		// Revoke permissions automatically
-		await revokeDomainConnection(origin); // This will remove the domain connection
-
-		// Return success
-		return true;
-	} catch (error) {
-		log.error('Error handling wallet_revokePermissions:', false, error);
-		throw error;
-	}
+export async function handleAddEthereumChain(params: any): Promise<null> {
+  return await showEIP6963Popup('wallet_addEthereumChain', [params]);
 }
 
-export async function handleGetPermissions(port: Runtime.Port, requestId?: string): Promise<any> {
-	try {
-		// Validate parameters
-		if (!validateParams('wallet_getPermissions', [])) {
-			throw new ProviderRpcError(
-				EIP1193_ERRORS.INVALID_PARAMS.code,
-				'Invalid parameters for wallet_getPermissions'
-			);
-		}
-
-		// Get the origin from the port
-		const origin = port.sender?.url ? new URL(port.sender.url).origin : null;
-		if (!origin) {
-			throw new ProviderRpcError(
-				EIP1193_ERRORS.INVALID_PARAMS.code,
-				'Could not determine origin for permission check'
-			);
-		}
-
-		// Check if the domain is connected
-		const isConnected = await verifyDomainConnected(origin);
-
-		// If connected, return the standard eth_accounts permission
-		if (isConnected) {
-			return [
-				{
-					parentCapability: 'eth_accounts',
-					caveats: []
-				}
-			];
-		}
-
-		// If not connected, return empty array
-		return [];
-	} catch (error) {
-		log.error('Error handling wallet_getPermissions:', false, error);
-		throw error;
-	}
+export async function handleSwitchEthereumChain(params: any): Promise<null> {
+  return await showEIP6963Popup('wallet_switchEthereumChain', [params]);
 }
 
 // Request handling functions
-export async function resolveEIP6963Request(requestId: string, result: any): Promise<void> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for resolveEIP6963Request');
-	}
-	const request = await requestManager.getRequest(requestId);
-	if (!request) {
-		throw new ProviderRpcError(4100, 'Request not found');
-	}
-	request.resolve(result);
-	requestManager.removeRequest(requestId);
+export function resolveEIP6963Request(requestId: string, result: any): boolean {
+  const request = requestsExternal.get(requestId);
+  if (!request) {
+    log.warn('No request found for ID:', false, requestId);
+    return false;
+  }
+
+  request.resolve(result);
+  requestsExternal.delete(requestId);
+  return true;
 }
 
-export async function rejectEIP6963Request(requestId: string, error: any): Promise<void> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for rejectEIP6963Request');
-	}
-	const request = await requestManager.getRequest(requestId);
-	if (!request) {
-		throw new ProviderRpcError(4100, 'Request not found');
-	}
-	request.reject(error);
-	requestManager.removeRequest(requestId);
+export function rejectEIP6963Request(requestId: string, error: any): boolean {
+  const request = requestsExternal.get(requestId);
+  if (!request) {
+    log.warn('No request found for ID:', false, requestId);
+    return false;
+  }
+
+  request.reject(error);
+  requestsExternal.delete(requestId);
+  return true;
 }
 
 // Event broadcasting function
-export function broadcastToEIP6963Ports(event: string, data: any, requestId?: string): void {
-	eip6963Ports.forEach((port) => {
-		try {
-			if (port.sender) {
-				port.postMessage({
-					type: 'YAKKL_EVENT:EIP6963',
-					event,
-					data
-				});
-			}
-		} catch (error) {
-			log.error('Error broadcasting to port', false, error);
-		}
-	});
+export function broadcastToEIP6963Ports(event: string, data: any): void {
+  eip6963Ports.forEach(port => {
+    try {
+      if (port.sender) {
+        port.postMessage({
+          type: 'YAKKL_EVENT:EIP6963',
+          event,
+          data
+        });
+      }
+    } catch (error) {
+      log.error('Error broadcasting to port', false, error);
+    }
+  });
+}
+
+export async function showEIP6963Popup(method: string, params: any[]): Promise<any> {
+  // Generate a unique request ID using the ID generator
+  const requestId = generateEipId();
+
+  // Check if we already have an active request for this method and params
+  const requestKey = `${method}_${JSON.stringify(params)}`;
+  const existingRequest = activeRequests.get(requestKey);
+
+  if (existingRequest) {
+    log.debug('Reusing existing request', false, { method, params, requestId: existingRequest.timestamp });
+    return existingRequest.promise;
+  }
+
+  // Create new promise for this request
+  const promise = new Promise((resolve, reject) => {
+    try {
+      // Store the request callbacks
+      requestsExternal.set(requestId, {
+        resolve,
+        reject,
+        method,
+        params,
+        timestamp: Date.now()
+      });
+
+      log.warn('Showing EIP-6963 popup', false, { method, params, requestId });
+
+      // Show the appropriate popup based on the method
+      if (method === 'eth_sendTransaction') {
+        showDappPopup(`/dapp/popups/transactions.html?requestId=${requestId}&source=eip6963&method=${method}`);
+      } else if (['eth_signTypedData_v3', 'eth_signTypedData_v4', 'personal_sign'].includes(method)) {
+        showDappPopup(`/dapp/popups/sign.html?requestId=${requestId}&source=eip6963&method=${method}`);
+      } else if (method === 'wallet_addEthereumChain' || method === 'wallet_switchEthereumChain') {
+        showDappPopup(`/dapp/popups/network.html?requestId=${requestId}&source=eip6963&method=${method}`);
+      } else {
+        // eth_requestAccounts is special and falls through to here
+        showDappPopup(`/dapp/popups/approve.html?requestId=${requestId}&source=eip6963&method=${method}`);
+      }
+    } catch (error) {
+      log.error(`Error showing EIP-6963 popup for ${method}`, false, error);
+      reject(new ProviderRpcError(4001, 'User rejected the request'));
+    }
+  });
+
+  // Store the active request
+  activeRequests.set(requestKey, {
+    timestamp: Date.now(),
+    promise
+  });
+
+  return promise;
 }
 
-export async function showEIP6963Popup(
-	method: string,
-	params: any[],
-	port: RuntimePort,
-	requestId?: string,
-	pinnedLocation: string = 'M'
-): Promise<any> {
-	// Use the provided request ID or throw an error if none provided
-	if (!requestId) {
-		throw new Error('Request ID is required for EIP-6963 popup');
-	}
-
-	// Check if we already have a pending request with this ID
-	const existingRequest = await requestManager.getRequest(requestId);
-	if (existingRequest) {
-		log.info(`Reusing existing request for ID: ${requestId}`, false, {
-			method,
-			requestManager: requestManager,
-			existingRequest: existingRequest
-		});
-
-		return new Promise<any>((resolve, reject) => {
-			existingRequest.resolve = resolve;
-			existingRequest.reject = reject;
-		});
-	}
-
-	// Check for duplicate requests with the same method and params
-	const activeRequests = requestManager.getActiveRequests();
-	const duplicateRequest = activeRequests.find(
-		(req) =>
-			req.data.method === method &&
-			JSON.stringify(req.data.params) === JSON.stringify(params) &&
-			req.data.timestamp > Date.now() - 5000 // Only consider requests from the last 5 seconds
-	);
-
-	if (duplicateRequest) {
-		log.info(`Found duplicate request for method: ${method}`, false, {
-			originalId: duplicateRequest.data.id,
-			newId: requestId
-		});
-		return new Promise<any>((resolve, reject) => {
-			duplicateRequest.resolve = resolve;
-			duplicateRequest.reject = reject;
-		});
-	}
-
-	// Show popup
-	const activeTab = get(activeTabBackgroundStore);
-	const url = activeTab?.url || '';
-	const domain = url ? extractSecureDomain(url) : 'NO DOMAIN - NOT ALLOWED';
-
-	// Ensure params is an array and contains the correct data
-	const requestParams = Array.isArray(params) ? params : [params];
-
-	log.debug('----------- EIP-6963: Request params: ------------', false, {
-		requestParams: requestParams,
-		method: method,
-		params: params
-	});
-
-	const requestData: PendingRequestData = {
-		id: requestId,
-		method,
-		params: requestParams,
-		timestamp: Date.now(),
-		requiresApproval: true,
-		metaData: {
-			method: method,
-			params: requestParams,
-			metaData: {
-				domain: domain,
-				isConnected: await verifyDomainConnected(domain),
-				icon: activeTab?.favIconUrl || '/images/failIcon48x48.png',
-				title: activeTab?.title || 'Not Available',
-				origin: url,
-				message:
-					requestParams && requestParams.length > 0 ? String(requestParams[0]) : 'Not Available'
-			}
-		}
-	};
-
-	// Create a new request with proper resolve/reject handlers
-	const request: BackgroundPendingRequest = {
-		resolve: (result) => {
-			port.postMessage({
-				type: 'YAKKL_RESPONSE:EIP6963',
-				jsonrpc: '2.0',
-				id: requestId,
-				method,
-				result
-			});
-		},
-		reject: (error) => {
-			port.postMessage({
-				type: 'YAKKL_RESPONSE:EIP6963',
-				jsonrpc: '2.0',
-				id: requestId,
-				method,
-				error: {
-					code: -32603,
-					message: error?.message || 'Internal error'
-				}
-			});
-		},
-		port: port as Runtime.Port,
-		data: requestData
-	};
-
-	// Add request to request manager
-	requestManager.addRequest(requestId, request);
-
-	// Show popup based on method
-	let popupUrl = `/dapp/popups/approve.html?requestId=${requestId}&source=eip6963&method=${method}`;
-
-	// Show the popup
-	showPopupForMethod(method, requestId, 'M');
-
-	// Return a promise that resolves when the user approves or rejects
-	return new Promise<any>(async (resolve, reject) => {
-		const request = await requestManager.getRequest(requestId);
-		if (request) {
-			request.resolve = resolve;
-			request.reject = reject;
-		}
-	});
-}
diff --git a/packages/yakkl-wallet/src/contexts/background/extensions/chrome/errorResponseHandler.ts b/packages/yakkl-wallet/src/contexts/background/extensions/chrome/errorResponseHandler.ts
index 1da5910..d675e85 100644
--- a/packages/yakkl-wallet/src/contexts/background/extensions/chrome/errorResponseHandler.ts
+++ b/packages/yakkl-wallet/src/contexts/background/extensions/chrome/errorResponseHandler.ts
@@ -1,7 +1,7 @@
 // src/lib/extensions/chrome/utils/errorResponseHandler.ts
 
 import { log } from '$lib/managers/Logger';
-import type { Runtime } from 'webextension-polyfill';
+import type { Runtime } from '$lib/types/browser-types';
 
 /**
  * Standardized error response handler for RPC messages
diff --git a/packages/yakkl-wallet/src/contexts/background/extensions/chrome/ports.ts b/packages/yakkl-wallet/src/contexts/background/extensions/chrome/ports.ts
index 4d47e71..83c1aba 100644
--- a/packages/yakkl-wallet/src/contexts/background/extensions/chrome/ports.ts
+++ b/packages/yakkl-wallet/src/contexts/background/extensions/chrome/ports.ts
@@ -1,10 +1,10 @@
-import type { Runtime } from 'webextension-polyfill';
-import browser from 'webextension-polyfill';
+import type { Runtime } from '$lib/types/browser-types';
+import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
 import { log } from '$lib/common/logger-wrapper';
 import { getTargetOrigin, safePostMessage } from '$lib/common/origin';
 
 type RuntimePort = Runtime.Port;
-const browser_ext = browser;
+const browser_ext = getBrowserExt();
 
 // Port collections
 const portsDapp: RuntimePort[] = [];
diff --git a/packages/yakkl-wallet/src/contexts/background/extensions/chrome/requestValidator.ts b/packages/yakkl-wallet/src/contexts/background/extensions/chrome/requestValidator.ts
index d3e9a8f..c89274d 100644
--- a/packages/yakkl-wallet/src/contexts/background/extensions/chrome/requestValidator.ts
+++ b/packages/yakkl-wallet/src/contexts/background/extensions/chrome/requestValidator.ts
@@ -8,7 +8,7 @@ import { getObjectFromLocalStorage } from '$lib/common/backgroundSecuredStorage'
 import { STORAGE_YAKKL_SETTINGS, STORAGE_YAKKL_PROFILE } from '$lib/common/constants';
 import type { Settings, Profile } from '$lib/common/interfaces';
 import { getPermission } from '$lib/permissions';
-import browser from 'webextension-polyfill';
+import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
 
 export interface RequestValidationResult {
   isValid: boolean;
diff --git a/packages/yakkl-wallet/src/contexts/background/extensions/chrome/restart.ts b/packages/yakkl-wallet/src/contexts/background/extensions/chrome/restart.ts
index 972f638..a799fea 100644
--- a/packages/yakkl-wallet/src/contexts/background/extensions/chrome/restart.ts
+++ b/packages/yakkl-wallet/src/contexts/background/extensions/chrome/restart.ts
@@ -1,27 +1,5 @@
 // import { browser_ext } from '$lib/common/environment';
-import browser from 'webextension-polyfill';
+import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
 import { log } from '$lib/managers/Logger';
+const browser = getBrowserExt()!;
 
-// WIP - do not use
-export async function restartExtension() {
-	try {
-		if (!browser) return;
-
-		log.info('Restarting extension...');
-
-		// Open the extension popup after a slight delay
-		setTimeout(() => {
-			browser.windows.create({
-				url: browser.runtime.getURL('/popup/popup.html'),
-				type: 'popup',
-				width: 400,
-				height: 600
-			});
-		}, 2000); // Adjust delay as needed to allow the extension to reload
-
-		// Reopen the extension popup after reload
-		browser.runtime.reload();
-	} catch (error) {
-		log.error('Failed to restart extension:', false, error);
-	}
-}
diff --git a/packages/yakkl-wallet/src/contexts/background/extensions/chrome/signingHandler.ts b/packages/yakkl-wallet/src/contexts/background/extensions/chrome/signingHandler.ts
index 41a8e4f..7cfa218 100644
--- a/packages/yakkl-wallet/src/contexts/background/extensions/chrome/signingHandler.ts
+++ b/packages/yakkl-wallet/src/contexts/background/extensions/chrome/signingHandler.ts
@@ -1,6 +1,6 @@
 import { log } from '$lib/managers/Logger';
 import { getSigningManager } from './signingManager';
-import type { Runtime } from 'webextension-polyfill';
+import type { Runtime } from '$lib/types/browser-types';
 
 export type SigningRequest = {
 	type: string; //'personal_sign' | 'eth_signTypedData_v4';
diff --git a/packages/yakkl-wallet/src/contexts/background/extensions/chrome/storage.ts b/packages/yakkl-wallet/src/contexts/background/extensions/chrome/storage.ts
index b9afa58..2db07cd 100644
--- a/packages/yakkl-wallet/src/contexts/background/extensions/chrome/storage.ts
+++ b/packages/yakkl-wallet/src/contexts/background/extensions/chrome/storage.ts
@@ -5,7 +5,7 @@ import { log } from '$lib/managers/Logger';
 import { upgrade } from '$lib/upgrades/upgrades';
 import UpgradeMigrationManager from '$lib/upgrades/UpgradeMigrationManager';
 import { detect } from 'detect-browser';
-import type { Runtime } from 'webextension-polyfill';
+import type { Runtime } from '$lib/types/browser-types';
 
 type RuntimePlatformInfo = Runtime.PlatformInfo;
 
diff --git a/packages/yakkl-wallet/src/contexts/background/extensions/chrome/ui.ts b/packages/yakkl-wallet/src/contexts/background/extensions/chrome/ui.ts
index 07b157b..58d0630 100644
--- a/packages/yakkl-wallet/src/contexts/background/extensions/chrome/ui.ts
+++ b/packages/yakkl-wallet/src/contexts/background/extensions/chrome/ui.ts
@@ -4,16 +4,15 @@ import type { Windows } from 'webextension-polyfill';
 import browser from 'webextension-polyfill';
 import { getObjectFromLocalStorage, setObjectInLocalStorage } from '$lib/common/storage';
 import { log } from '$lib/common/logger-wrapper';
-import type { ExtendedBrowser } from '$lib/common/types/browser-extensions';
+// import type { ExtendedBrowser } from '$lib/common/types/browser-extensions';
 import { SingletonWindowManager } from '$lib/managers/SingletonWindowManager';
 import { quickAuthCheck } from '$lib/common/authValidation';
 import { getSettings } from '$lib/common/stores';
+import { popupSecurityManager } from '$lib/managers/PopupSecurityManager';
 
 // NOTE: For background usage
 type WindowsWindow = Windows.Window;
 
-const browser_ext = browser as ExtendedBrowser;
-
 export const openWindows = new Map();
 
 // export const openPopups = new Map();
@@ -26,12 +25,12 @@ export async function showExtensionPopup(
 ): Promise<WindowsWindow> {
 	try {
 		// Uses the default 'get' here
-		const pref = (await browser_ext.storage.local.get(STORAGE_YAKKL_PREFERENCES)) as {
+		const pref = (await browser.storage.local.get(STORAGE_YAKKL_PREFERENCES)) as {
 			yakklPreferences: Preferences;
 		};
 		const yakkl = pref['yakklPreferences'] as Preferences;
 		// eslint-disable-next-line prefer-const, @typescript-eslint/no-unused-vars
-		let { left, top } = await browser_ext.windows.getCurrent();
+		let { left, top } = await browser.windows.getCurrent();
 
 		// Pull from settings and get pin information...
 		if (yakkl && yakkl.wallet) {
@@ -93,7 +92,7 @@ export async function showExtensionPopup(
 
 		// Use the URL as-is since v2 uses actual HTML files
 		let finalUrl = url || 'home.html';
-		const fullUrl = browser_ext.runtime.getURL(finalUrl);
+		const fullUrl = browser.runtime.getURL(finalUrl);
 
 		log.info('showExtensionPopup: Creating window', false, {
 			finalUrl,
@@ -107,7 +106,7 @@ export async function showExtensionPopup(
 		});
 
 		try {
-			const window = await browser_ext.windows.create({
+			const window = await browser.windows.create({
 				url: fullUrl,
 				type: 'popup',
 				left: left,
@@ -116,12 +115,11 @@ export async function showExtensionPopup(
 				height: popupHeight,
 				focused: true
 			});
-			
-			log.info('showExtensionPopup: Window created successfully', false, { 
+
+			log.info('showExtensionPopup: Window created successfully', false, {
 				windowId: window?.id,
-				windowState: window?.state 
 			});
-			
+
 			return window;
 		} catch (error) {
 			log.error('showExtensionPopup: Failed to create window', false, {
@@ -138,57 +136,83 @@ export async function showExtensionPopup(
 	}
 }
 
-// TBD! - May need to set up a connection between UI and here
-// Check the lastlogin date - todays date = days hash it using dj2 then use as salt to encrypt and send to here and send back on request where it is reversed or else login again
-export async function showPopup(url: string = '', pinnedLocation: string = '0'): Promise<void> {
-	try {
-		// Perform comprehensive authentication validation
-		const isAuthenticated = await quickAuthCheck();
-
-		// If not authenticated, redirect to appropriate page
-		if (!isAuthenticated) {
-			// const settings = await getSettings();
-      const settings = await getObjectFromLocalStorage<Settings>(STORAGE_YAKKL_SETTINGS);
-			log.info('showPopup: settings =', false, settings);
-			log.info('showPopup: settings.init =', false, settings?.init);
-			log.info('showPopup: settings.legal =', false, settings?.legal);
-
-			// Only go to register if settings.init is explicitly false or undefined (very first time)
-			// If settings.init is true, user has already registered and should go to login
-			if (settings?.init === true) {
-				// User has already initialized, check if they need to agree to terms
-				if (!settings?.legal?.termsAgreed) {
-					url = 'legal.html';
-				} else {
-					url = 'login.html';
-				}
-			} else {
-				// settings.init is false/undefined - first time user
-				url = 'register.html';
-			}
+// export async function showPopupOld(url: string = '', pinnedLocation: string = '0'): Promise<void> {
+// 	try {
+// 		// Perform comprehensive authentication validation
+// 		const isAuthenticated = await quickAuthCheck();
+
+// 		// If not authenticated, redirect to appropriate page
+// 		if (!isAuthenticated) {
+// 			// const settings = await getSettings();
+//       const settings = await getObjectFromLocalStorage<Settings>(STORAGE_YAKKL_SETTINGS);
+// 			log.info('showPopup: settings =', false, settings);
+// 			log.info('showPopup: settings.init =', false, settings?.init);
+// 			log.info('showPopup: settings.legal =', false, settings?.legal);
+
+// 			// Only go to register if settings.init is explicitly false or undefined (very first time)
+// 			// If settings.init is true, user has already registered and should go to login
+// 			if (settings?.init === true) {
+// 				// User has already initialized, check if they need to agree to terms
+// 				if (!settings?.legal?.termsAgreed) {
+// 					url = 'legal.html';
+// 				} else {
+// 					url = 'login.html';
+// 				}
+// 			} else {
+// 				// settings.init is false/undefined - first time user
+// 				url = 'register.html';
+// 			}
+
+// 			log.info('showPopup: User not authenticated, redirecting to:', false, url);
+// 		} else if (!url || url === '') {
+// 			// For authenticated users, use home.html
+// 			url = 'home.html';
+// 			log.info('showPopup: User authenticated, opening main wallet interface');
+// 		}
+
+// 		const windowManager = SingletonWindowManager.getInstance();
+// 		log.info('showPopup: About to call windowManager.showPopup', false, { url, pinnedLocation });
+// 		await windowManager.showPopup(url, pinnedLocation);
+// 		log.info('showPopup: windowManager.showPopup completed successfully');
+
+//   } catch (error) {
+//     log.error('Background - showPopup', false, error);
+//   }
+// }
 
-			log.info('showPopup: User not authenticated, redirecting to:', false, url);
-		} else if (!url || url === '') {
-			// For authenticated users, use home.html
-			url = 'home.html';
-			log.info('showPopup: User authenticated, opening main wallet interface');
-		}
 
-		const windowManager = SingletonWindowManager.getInstance();
-		log.info('showPopup: About to call windowManager.showPopup', false, { url, pinnedLocation });
-		await windowManager.showPopup(url, pinnedLocation);
-		log.info('showPopup: windowManager.showPopup completed successfully');
 
 		// showExtensionPopup(428, 926, url, pinnedLocation).then(async (result) => {
-		//   browser_ext.windows.update(result.id, {drawAttention: true});
-		//   await browser_ext.storage.session.set({windowId: result.id});
+		//   browser.windows.update(result.id, {drawAttention: true});
+		//   await browser.storage.session.set({windowId: result.id});
 
 		//   openWindows.set(result.id, result);
 		// }).catch((error) => {
 		//   log.error('Background - YAKKL: ' + false, error);  // need to send these area back to content.ts to inpage.ts to dapp so they can respond properly
 		// });
+
+// Check the lastlogin date - todays date = days hash it using dj2 then use as salt to encrypt and send to here and send back on request where it is reversed or else login again
+
+export async function showPopup(url: string = '', pinnedLocation: string = '0', source: 'internal' | 'external' = 'external'): Promise<void> {
+	try {
+		// Use the PopupSecurityManager (now statically imported)
+		log.info('showPopup: Using enhanced session-based security', false, { url, pinnedLocation, source });
+
+		// Use the enhanced popup security flow
+		await popupSecurityManager.handlePopupRequest(url, pinnedLocation, source);
+
+		log.info('showPopup: Enhanced popup security completed successfully');
 	} catch (error) {
-		log.error('Background - showPopup', false, error); // need to send these area back to content.ts to inpage.ts to dapp so they can respond properly
+		log.error('Background - showPopup', false, error);
+
+		// Fallback to basic popup creation if enhanced security fails
+		try {
+			const windowManager = SingletonWindowManager.getInstance();
+			await windowManager.showPopup(url || 'login.html', pinnedLocation);
+			log.info('showPopup: Fallback popup creation completed');
+		} catch (fallbackError) {
+			log.error('Background - showPopup fallback failed', false, fallbackError);
+		}
 	}
 }
 
@@ -204,8 +228,8 @@ export async function showPopup(url: string = '', pinnedLocation: string = '0'):
 //     log.info('[APPROVE] New popup received request:', false, {request, requestId, method});
 
 //     showExtensionPopup(428, 620, request, pinnedLocation).then(async (result) => {
-//       browser_ext.windows.update(result.id, {drawAttention: true});
-//       await browser_ext.storage.session.set({windowId: result.id});
+//       browser.windows.update(result.id, {drawAttention: true});
+//       await browser.storage.session.set({windowId: result.id});
 //     }).catch((error) => {
 //       log.error('Background - YAKKL: ' + false, error);
 //     });
@@ -215,7 +239,7 @@ export async function showPopup(url: string = '', pinnedLocation: string = '0'):
 // }
 
 export async function updateScreenPreferences(event: any): Promise<void> {
-	if (typeof browser_ext === 'undefined') {
+	if (typeof browser === 'undefined') {
 		log.error('Browser extension API is not available.', false);
 		return;
 	}
diff --git a/packages/yakkl-wallet/src/contexts/background/extensions/chrome/unifiedMessageRouter.ts b/packages/yakkl-wallet/src/contexts/background/extensions/chrome/unifiedMessageRouter.ts
index 2a36086..94b23ed 100644
--- a/packages/yakkl-wallet/src/contexts/background/extensions/chrome/unifiedMessageRouter.ts
+++ b/packages/yakkl-wallet/src/contexts/background/extensions/chrome/unifiedMessageRouter.ts
@@ -5,8 +5,8 @@ import { onEIP6963PortListener } from './eip-6963';
 import { onDappListener } from './dapp';
 import { onPortInternalListener } from '$lib/common/listeners/ui/portListeners';
 import { log } from '$lib/managers/Logger';
-import type { Runtime } from 'webextension-polyfill';
-import browser from 'webextension-polyfill';
+import type { Runtime } from '$lib/types/browser-types';
+import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
 import { YAKKL_DAPP } from '$lib/common/constants';
 
 // This is the single handler that routes to your existing handlers
diff --git a/packages/yakkl-wallet/src/contexts/background/extensions/chrome/utils.ts b/packages/yakkl-wallet/src/contexts/background/extensions/chrome/utils.ts
index c279f24..577026e 100644
--- a/packages/yakkl-wallet/src/contexts/background/extensions/chrome/utils.ts
+++ b/packages/yakkl-wallet/src/contexts/background/extensions/chrome/utils.ts
@@ -4,5 +4,5 @@ export function extractDomain(url: string | URL): string {
 }
 
 // export const browser_ext = typeof browser !== "undefined" ? browser : chrome;
-// import browser from 'webextension-polyfill';
-// export const browser_ext = browser;
+// import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
+// export const browser_ext = getBrowserExt();
diff --git a/packages/yakkl-wallet/src/contexts/background/handlers/MessageHandler.ts b/packages/yakkl-wallet/src/contexts/background/handlers/MessageHandler.ts
index 3488b8c..e716871 100644
--- a/packages/yakkl-wallet/src/contexts/background/handlers/MessageHandler.ts
+++ b/packages/yakkl-wallet/src/contexts/background/handlers/MessageHandler.ts
@@ -11,7 +11,7 @@ import { sessionHandlers } from './session';
 import { swapEnhancedHandlers } from './swapEnhanced';
 import { cryptoHandlers } from './crypto';
 import { sensitiveOperationHandlers } from './sensitiveOperations';
-import type { Runtime } from 'webextension-polyfill';
+import type { Runtime } from '$lib/types/browser-types';
 
 export interface MessageRequest {
   requestId?: number;
diff --git a/packages/yakkl-wallet/src/contexts/background/handlers/action.ts b/packages/yakkl-wallet/src/contexts/background/handlers/action.ts
index 931c726..8b71374 100644
--- a/packages/yakkl-wallet/src/contexts/background/handlers/action.ts
+++ b/packages/yakkl-wallet/src/contexts/background/handlers/action.ts
@@ -1,95 +1,5 @@
 import type { MessageHandlerFunc, MessageResponse } from './MessageHandler';
-import browser from 'webextension-polyfill';
+import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
 import { sendToExtensionUI } from '$lib/common/safeMessaging';
+const browser = getBrowserExt()!;
 
-export const actionHandlers = new Map<string, MessageHandlerFunc>([
-  ['action.setBadgeText', async (payload): Promise<MessageResponse> => {
-    try {
-      await browser.action.setBadgeText(payload);
-      return { success: true };
-    } catch (error) {
-      return { success: false, error: (error as Error).message };
-    }
-  }],
-
-  ['action.getBadgeText', async (payload): Promise<MessageResponse> => {
-    try {
-      const text = await browser.action.getBadgeText(payload || {});
-      return { success: true, data: text };
-    } catch (error) {
-      return { success: false, error: (error as Error).message };
-    }
-  }],
-
-  ['action.setBadgeBackgroundColor', async (payload): Promise<MessageResponse> => {
-    try {
-      await browser.action.setBadgeBackgroundColor(payload);
-      return { success: true };
-    } catch (error) {
-      return { success: false, error: (error as Error).message };
-    }
-  }],
-
-  ['action.getBadgeBackgroundColor', async (payload): Promise<MessageResponse> => {
-    try {
-      const color = await browser.action.getBadgeBackgroundColor(payload || {});
-      return { success: true, data: color };
-    } catch (error) {
-      return { success: false, error: (error as Error).message };
-    }
-  }],
-
-  ['action.setIcon', async (payload): Promise<MessageResponse> => {
-    try {
-      await browser.action.setIcon(payload);
-      return { success: true };
-    } catch (error) {
-      return { success: false, error: (error as Error).message };
-    }
-  }],
-
-  ['action.setTitle', async (payload): Promise<MessageResponse> => {
-    try {
-      await browser.action.setTitle(payload);
-      return { success: true };
-    } catch (error) {
-      return { success: false, error: (error as Error).message };
-    }
-  }],
-
-  ['action.getTitle', async (payload): Promise<MessageResponse> => {
-    try {
-      const title = await browser.action.getTitle(payload || {});
-      return { success: true, data: title };
-    } catch (error) {
-      return { success: false, error: (error as Error).message };
-    }
-  }],
-
-  ['action.enable', async (payload): Promise<MessageResponse> => {
-    try {
-      const { tabId } = payload || {};
-      await browser.action.enable(tabId);
-      return { success: true };
-    } catch (error) {
-      return { success: false, error: (error as Error).message };
-    }
-  }],
-
-  ['action.disable', async (payload): Promise<MessageResponse> => {
-    try {
-      const { tabId } = payload || {};
-      await browser.action.disable(tabId);
-      return { success: true };
-    } catch (error) {
-      return { success: false, error: (error as Error).message };
-    }
-  }]
-]);
-
-browser.action.onClicked.addListener((tab) => {
-  sendToExtensionUI({
-    type: 'action.clicked',
-    response: { success: true, data: { tab } }
-  });
-});
\ No newline at end of file
diff --git a/packages/yakkl-wallet/src/contexts/background/handlers/alarms.ts b/packages/yakkl-wallet/src/contexts/background/handlers/alarms.ts
index abfc617..8b71374 100644
--- a/packages/yakkl-wallet/src/contexts/background/handlers/alarms.ts
+++ b/packages/yakkl-wallet/src/contexts/background/handlers/alarms.ts
@@ -1,60 +1,5 @@
 import type { MessageHandlerFunc, MessageResponse } from './MessageHandler';
-import browser from 'webextension-polyfill';
+import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
 import { sendToExtensionUI } from '$lib/common/safeMessaging';
+const browser = getBrowserExt()!;
 
-export const alarmsHandlers = new Map<string, MessageHandlerFunc>([
-  ['alarms.create', async (payload): Promise<MessageResponse> => {
-    try {
-      const { name, alarmInfo } = payload;
-      await browser.alarms.create(name, alarmInfo);
-      return { success: true };
-    } catch (error) {
-      return { success: false, error: (error as Error).message };
-    }
-  }],
-
-  ['alarms.get', async (payload): Promise<MessageResponse> => {
-    try {
-      const { name } = payload || {};
-      const alarm = await browser.alarms.get(name);
-      return { success: true, data: alarm };
-    } catch (error) {
-      return { success: false, error: (error as Error).message };
-    }
-  }],
-
-  ['alarms.getAll', async (): Promise<MessageResponse> => {
-    try {
-      const alarms = await browser.alarms.getAll();
-      return { success: true, data: alarms };
-    } catch (error) {
-      return { success: false, error: (error as Error).message };
-    }
-  }],
-
-  ['alarms.clear', async (payload): Promise<MessageResponse> => {
-    try {
-      const { name } = payload || {};
-      const wasCleared = await browser.alarms.clear(name);
-      return { success: true, data: wasCleared };
-    } catch (error) {
-      return { success: false, error: (error as Error).message };
-    }
-  }],
-
-  ['alarms.clearAll', async (): Promise<MessageResponse> => {
-    try {
-      const wasCleared = await browser.alarms.clearAll();
-      return { success: true, data: wasCleared };
-    } catch (error) {
-      return { success: false, error: (error as Error).message };
-    }
-  }]
-]);
-
-browser.alarms.onAlarm.addListener((alarm) => {
-  sendToExtensionUI({
-    type: 'alarms.onAlarm',
-    response: { success: true, data: alarm }
-  });
-});
\ No newline at end of file
diff --git a/packages/yakkl-wallet/src/contexts/background/handlers/blockchain.ts b/packages/yakkl-wallet/src/contexts/background/handlers/blockchain.ts
index ace0372..69ee256 100644
--- a/packages/yakkl-wallet/src/contexts/background/handlers/blockchain.ts
+++ b/packages/yakkl-wallet/src/contexts/background/handlers/blockchain.ts
@@ -2,7 +2,7 @@ import type { MessageHandlerFunc, MessageResponse } from './MessageHandler';
 import { BlockchainExplorer } from '$lib/managers/providers/explorer/BlockchainExplorer';
 import { getYakklCurrentlySelected } from '$lib/common/stores';
 import { log } from '$lib/common/logger-wrapper';
-import browser from 'webextension-polyfill';
+import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
 import { safeSendMessage } from '$lib/common/safeMessaging';
 
 export const blockchainHandlers = new Map<string, MessageHandlerFunc>([
diff --git a/packages/yakkl-wallet/src/contexts/background/handlers/notifications.ts b/packages/yakkl-wallet/src/contexts/background/handlers/notifications.ts
index 6296c5b..8b71374 100644
--- a/packages/yakkl-wallet/src/contexts/background/handlers/notifications.ts
+++ b/packages/yakkl-wallet/src/contexts/background/handlers/notifications.ts
@@ -1,73 +1,5 @@
 import type { MessageHandlerFunc, MessageResponse } from './MessageHandler';
-import browser from 'webextension-polyfill';
+import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
 import { sendToExtensionUI } from '$lib/common/safeMessaging';
+const browser = getBrowserExt()!;
 
-export const notificationsHandlers = new Map<string, MessageHandlerFunc>([
-  ['notifications.create', async (payload): Promise<MessageResponse> => {
-    try {
-      const { notificationId, options } = payload;
-      const id = await browser.notifications.create(notificationId, options);
-      return { success: true, data: id };
-    } catch (error) {
-      return { success: false, error: (error as Error).message };
-    }
-  }],
-
-  ['notifications.clear', async (payload): Promise<MessageResponse> => {
-    try {
-      const { notificationId } = payload;
-      const wasCleared = await browser.notifications.clear(notificationId);
-      return { success: true, data: wasCleared };
-    } catch (error) {
-      return { success: false, error: (error as Error).message };
-    }
-  }],
-
-  ['notifications.getAll', async (): Promise<MessageResponse> => {
-    try {
-      const notifications = await browser.notifications.getAll();
-      return { success: true, data: notifications };
-    } catch (error) {
-      return { success: false, error: (error as Error).message };
-    }
-  }],
-
-  ['notifications.update', async (payload): Promise<MessageResponse> => {
-    try {
-      const { notificationId, options } = payload;
-      // Note: notifications.update might not be available in all browsers
-      if ('update' in browser.notifications) {
-        const wasUpdated = await (browser.notifications as any).update(notificationId, options);
-        return { success: true, data: wasUpdated };
-      } else {
-        // Fallback: clear and recreate
-        await browser.notifications.clear(notificationId);
-        await browser.notifications.create(notificationId, options);
-        return { success: true, data: true };
-      }
-    } catch (error) {
-      return { success: false, error: (error as Error).message };
-    }
-  }]
-]);
-
-browser.notifications.onClicked.addListener((notificationId) => {
-  sendToExtensionUI({
-    type: 'notifications.clicked',
-    response: { success: true, data: { notificationId } }
-  });
-});
-
-browser.notifications.onButtonClicked.addListener((notificationId, buttonIndex) => {
-  sendToExtensionUI({
-    type: 'notifications.buttonClicked',
-    response: { success: true, data: { notificationId, buttonIndex } }
-  });
-});
-
-browser.notifications.onClosed.addListener((notificationId, byUser) => {
-  sendToExtensionUI({
-    type: 'notifications.closed',
-    response: { success: true, data: { notificationId, byUser } }
-  });
-});
\ No newline at end of file
diff --git a/packages/yakkl-wallet/src/contexts/background/handlers/popout.ts b/packages/yakkl-wallet/src/contexts/background/handlers/popout.ts
index c848194..3dfdb28 100644
--- a/packages/yakkl-wallet/src/contexts/background/handlers/popout.ts
+++ b/packages/yakkl-wallet/src/contexts/background/handlers/popout.ts
@@ -12,10 +12,11 @@ export const popoutHandlers = new Map<string, MessageHandlerFunc>([
   ['popout_with_auth', async (payload): Promise<MessageResponse> => {
     try {
       log.info('popout_with_auth handler called', false, payload);
-      
+
       // Use the showPopup function that handles authentication checks
-      await showPopup('', '0');
-      
+      // Mark as external since this is a user-initiated popup request
+      await showPopup('', '0', 'external');
+
       log.info('popout_with_auth handler completed successfully');
       return { success: true };
     } catch (error) {
@@ -31,9 +32,10 @@ export const popoutHandlers = new Map<string, MessageHandlerFunc>([
  */
 export async function handlePopoutWithAuth(): Promise<void> {
   try {
-    await showPopup('', '0');
+    // Mark as external since this is a user-initiated popup request
+    await showPopup('', '0', 'external');
   } catch (error) {
     log.error('handlePopoutWithAuth failed:', false, error);
     throw error;
   }
-}
\ No newline at end of file
+}
diff --git a/packages/yakkl-wallet/src/contexts/background/handlers/runtime.ts b/packages/yakkl-wallet/src/contexts/background/handlers/runtime.ts
index b355e1b..cbcf810 100644
--- a/packages/yakkl-wallet/src/contexts/background/handlers/runtime.ts
+++ b/packages/yakkl-wallet/src/contexts/background/handlers/runtime.ts
@@ -1,88 +1,6 @@
 import type { MessageHandlerFunc, MessageResponse } from './MessageHandler';
-import browser from 'webextension-polyfill';
+import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
 import { getSettings } from '$lib/common/stores';
 import { setBadgeText, setIconLock, setIconUnlock } from '$lib/utilities/utilities';
+const browser = getBrowserExt()!;
 
-export const runtimeHandlers = new Map<string, MessageHandlerFunc>([
-  ['runtime.getManifest', async (): Promise<MessageResponse> => {
-    try {
-      const manifest = browser.runtime.getManifest();
-      return { success: true, data: manifest };
-    } catch (error) {
-      return { success: false, error: (error as Error).message };
-    }
-  }],
-
-  ['runtime.getURL', async (payload): Promise<MessageResponse> => {
-    try {
-      const { path } = payload;
-      const url = browser.runtime.getURL(path);
-      return { success: true, data: url };
-    } catch (error) {
-      return { success: false, error: (error as Error).message };
-    }
-  }],
-
-  ['runtime.getPlatformInfo', async (): Promise<MessageResponse> => {
-    try {
-      const info = await browser.runtime.getPlatformInfo();
-      return { success: true, data: info };
-    } catch (error) {
-      return { success: false, error: (error as Error).message };
-    }
-  }],
-
-  ['runtime.openOptionsPage', async (): Promise<MessageResponse> => {
-    try {
-      await browser.runtime.openOptionsPage();
-      return { success: true };
-    } catch (error) {
-      return { success: false, error: (error as Error).message };
-    }
-  }],
-
-  ['runtime.reload', async (): Promise<MessageResponse> => {
-    try {
-      browser.runtime.reload();
-      return { success: true };
-    } catch (error) {
-      return { success: false, error: (error as Error).message };
-    }
-  }]
-]);
-
-browser.runtime.onInstalled.addListener(async (details) => {
-  // Don't try to send messages during installation - no listeners exist yet
-  console.log('Extension installed/updated:', details);
-  
-  // Set icon based on lock state
-  await initializeIconState();
-});
-
-browser.runtime.onStartup.addListener(async () => {
-  // Set icon based on lock state when browser starts
-  await initializeIconState();
-});
-
-browser.runtime.onUpdateAvailable.addListener((details) => {
-  // Don't try to send messages - store update info if needed
-  console.log('Extension update available:', details);
-});
-
-async function initializeIconState() {
-  try {
-    const settings = await getSettings();
-    
-    // Clear badge text
-    await setBadgeText('');
-    
-    // Set icon based on lock state
-    if (!settings || settings.isLocked || !settings.init) {
-      await setIconLock();
-    } else {
-      await setIconUnlock();
-    }
-  } catch (error) {
-    console.error('Failed to initialize icon state:', error);
-  }
-}
\ No newline at end of file
diff --git a/packages/yakkl-wallet/src/contexts/background/handlers/session.ts b/packages/yakkl-wallet/src/contexts/background/handlers/session.ts
index 7cda544..4b8c733 100644
--- a/packages/yakkl-wallet/src/contexts/background/handlers/session.ts
+++ b/packages/yakkl-wallet/src/contexts/background/handlers/session.ts
@@ -2,7 +2,7 @@ import type { MessageHandlerFunc, MessageResponse } from './MessageHandler';
 import { setLoginVerified, getIdleStatus } from '../extensions/chrome/context';
 import { log } from '$lib/common/logger-wrapper';
 import { lockWallet } from '$lib/common/lockWallet';
-import browser from 'webextension-polyfill';
+import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
 
 export const sessionHandlers = new Map<string, MessageHandlerFunc>([
   ['session.verifyLogin', async (payload): Promise<MessageResponse> => {
diff --git a/packages/yakkl-wallet/src/contexts/background/handlers/storage.ts b/packages/yakkl-wallet/src/contexts/background/handlers/storage.ts
index 896c0fc..8b71374 100644
--- a/packages/yakkl-wallet/src/contexts/background/handlers/storage.ts
+++ b/packages/yakkl-wallet/src/contexts/background/handlers/storage.ts
@@ -1,53 +1,5 @@
 import type { MessageHandlerFunc, MessageResponse } from './MessageHandler';
-import browser from 'webextension-polyfill';
+import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
 import { sendToExtensionUI } from '$lib/common/safeMessaging';
+const browser = getBrowserExt()!;
 
-export const storageHandlers = new Map<string, MessageHandlerFunc>([
-  ['storage.get', async (payload): Promise<MessageResponse> => {
-    try {
-      const { keys } = payload || {};
-      const data = await browser.storage.local.get(keys);
-      return { success: true, data };
-    } catch (error) {
-      return { success: false, error: (error as Error).message };
-    }
-  }],
-
-  ['storage.set', async (payload): Promise<MessageResponse> => {
-    try {
-      const { items } = payload;
-      await browser.storage.local.set(items);
-      return { success: true };
-    } catch (error) {
-      return { success: false, error: (error as Error).message };
-    }
-  }],
-
-  ['storage.remove', async (payload): Promise<MessageResponse> => {
-    try {
-      const { keys } = payload;
-      await browser.storage.local.remove(keys);
-      return { success: true };
-    } catch (error) {
-      return { success: false, error: (error as Error).message };
-    }
-  }],
-
-  ['storage.clear', async (): Promise<MessageResponse> => {
-    try {
-      await browser.storage.local.clear();
-      return { success: true };
-    } catch (error) {
-      return { success: false, error: (error as Error).message };
-    }
-  }]
-]);
-
-browser.storage.onChanged.addListener((changes, areaName) => {
-  if (areaName === 'local') {
-    sendToExtensionUI({
-      type: 'storage.changed',
-      response: { success: true, data: changes }
-    });
-  }
-});
\ No newline at end of file
diff --git a/packages/yakkl-wallet/src/contexts/background/handlers/tabs.ts b/packages/yakkl-wallet/src/contexts/background/handlers/tabs.ts
index 391793e..43c9cc4 100644
--- a/packages/yakkl-wallet/src/contexts/background/handlers/tabs.ts
+++ b/packages/yakkl-wallet/src/contexts/background/handlers/tabs.ts
@@ -1,5 +1,5 @@
 import type { MessageHandlerFunc, MessageResponse } from './MessageHandler';
-import browser from 'webextension-polyfill';
+import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
 
 export const tabsHandlers = new Map<string, MessageHandlerFunc>([
   ['tabs.get', async (payload): Promise<MessageResponse> => {
diff --git a/packages/yakkl-wallet/src/contexts/background/handlers/windows.ts b/packages/yakkl-wallet/src/contexts/background/handlers/windows.ts
index 6eb2a0c..16ad178 100644
--- a/packages/yakkl-wallet/src/contexts/background/handlers/windows.ts
+++ b/packages/yakkl-wallet/src/contexts/background/handlers/windows.ts
@@ -1,6 +1,7 @@
 import type { MessageHandlerFunc, MessageResponse } from './MessageHandler';
-import browser from 'webextension-polyfill';
+import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
 import { SingletonWindowManager } from '$lib/managers/SingletonWindowManager';
+import { log } from '$lib/common/logger-wrapper'
 // Added: Import helper function to handle popout with authentication checks
 import { handlePopoutWithAuth } from './popout';
 
@@ -70,15 +71,15 @@ export const windowsHandlers = new Map<string, MessageHandlerFunc>([
       // This fixes the issue where popup window wouldn't reopen after closing
       // The helper uses showPopup from ui.ts instead of calling SingletonWindowManager directly
       await handlePopoutWithAuth();
-      
+
       // Original code preserved below (commented out):
       // const windowManager = SingletonWindowManager.getInstance();
       // await windowManager.showPopup('', '0');
-      
+
       return { success: true };
     } catch (error) {
-      console.error('Failed to open popup window:', error);
+      log.error('Failed to open popup window:', false, error);
       return { success: false, error: (error as Error).message };
     }
   }]
-]);
\ No newline at end of file
+]);
diff --git a/packages/yakkl-wallet/src/contexts/client/api/RuntimeAPI.ts b/packages/yakkl-wallet/src/contexts/client/api/RuntimeAPI.ts
index 7f990cd..c6b479d 100644
--- a/packages/yakkl-wallet/src/contexts/client/api/RuntimeAPI.ts
+++ b/packages/yakkl-wallet/src/contexts/client/api/RuntimeAPI.ts
@@ -1,5 +1,5 @@
 import { backgroundAPI } from './BackgroundAPI';
-import type { Manifest, Runtime } from 'webextension-polyfill';
+import type { Manifest, Runtime } from '$lib/types/browser-types';
 
 export interface ExtensionInfo {
   id: string;
diff --git a/packages/yakkl-wallet/src/global.d.ts b/packages/yakkl-wallet/src/global.d.ts
index f5d9567..3eb7182 100644
--- a/packages/yakkl-wallet/src/global.d.ts
+++ b/packages/yakkl-wallet/src/global.d.ts
@@ -1,13 +1,14 @@
-// import type * as WebExtensionPolyfill from 'webextension-polyfill';
+import type { BrowserAPI } from '$lib/types/browser-types';
 
-// declare global {
-//   const browser_ext: typeof WebExtensionPolyfill;
-// }
+declare global {
+  interface Window {
+    browser?: BrowserAPI;
+    browserPolyfill?: BrowserAPI;
+    chrome?: any;
+    __browserPolyfillReady?: Promise<void>;
+  }
 
-// import type { Browser } from 'webextension-polyfill';
-
-// declare global {
-//   interface Window {
-//     browser_ext?: Browser;
-//   }
-// }
+  // Also declare browser as a global variable for extension contexts
+  const browser: BrowserAPI | undefined;
+  const chrome: any;
+}
diff --git a/packages/yakkl-wallet/src/hooks.client.ts b/packages/yakkl-wallet/src/hooks.client.ts
index 7fe2862..aa1185c 100644
--- a/packages/yakkl-wallet/src/hooks.client.ts
+++ b/packages/yakkl-wallet/src/hooks.client.ts
@@ -1,5 +1,5 @@
 // src/hooks.client.ts
-import type { Browser } from 'webextension-polyfill';
+import type { BrowserAPI } from '$lib/types/browser-types';
 import { getSettings, setContextTypeStore, syncStorageToStore } from '$lib/common/stores';
 import { loadTokens } from '$lib/common/stores/tokens';
 import { BalanceCacheManager } from '$lib/managers/BalanceCacheManager';
@@ -11,6 +11,7 @@ import { globalListenerManager } from '$lib/managers/GlobalListenerManager';
 import { uiListenerManager } from '$lib/common/listeners/ui/uiListeners';
 import { protectedContexts } from '$lib/common/globals';
 import { initializeGlobalErrorHandlers, cleanupGlobalErrorHandlers } from '$lib/common/globalErrorHandler';
+import { getBrowserExt as getBrowserExtFromWrapper } from '$lib/browser-polyfill-wrapper';
 
 // Helper function to check if context needs idle protection
 function contextNeedsIdleProtection(contextType: string): boolean {
@@ -20,7 +21,6 @@ function contextNeedsIdleProtection(contextType: string): boolean {
 // Store the browser reference globally for SvelleKit to use
 declare global {
 	interface Window {
-		browserPolyfill: Browser;
 		EXTENSION_INIT_STATE: {
 			initialized: boolean;
 			contextId: string;
@@ -71,10 +71,10 @@ if (isClient) {
 	}
 }
 
-let browser_ext: Browser | null = null;
+let browser_ext: BrowserAPI | null = null;
 let initializationAttempted = false;
 
-function getBrowserExt(): Browser | null {
+function getBrowserExt(): BrowserAPI | null {
 	if (!isClient) return null;
 
 	// If already initialized, return the existing instance
@@ -85,24 +85,8 @@ function getBrowserExt(): Browser | null {
 		initializationAttempted = true;
 	}
 
-	// First try window.browser (set by polyfill script)
-	if (window.browser) {
-		browser_ext = window.browser;
-		window.browserPolyfill = browser_ext;
-		return browser_ext;
-	}
-
-	// Then try window.browserPolyfill (may have been set manually)
-	if (window.browserPolyfill) {
-		browser_ext = window.browserPolyfill;
-		return browser_ext;
-	}
-
-	// Finally try chrome with basic detection
-	if (typeof chrome !== 'undefined' && chrome.runtime && chrome.runtime.id) {
-		// You might want to initialize Chrome shim here
-		// For now, just return null
-	}
+	// Use the centralized browser detection from browser-polyfill-wrapper
+	browser_ext = getBrowserExtFromWrapper();
 
 	// Log only on first failed attempt
 	if (!browser_ext && initializationAttempted) {
@@ -147,7 +131,7 @@ if (isClient) {
 			log.debug('Suppressed console error:', false, ...args);
 			return;
 		}
-		
+
 		// Call the original console.error for other errors
 		originalConsoleError.apply(console, args);
 	};
@@ -158,16 +142,16 @@ if (isClient) {
  */
 async function loadCacheManagers(): Promise<void> {
 	if (!isClient) return;
-	
+
 	try {
 		// Initialize cache managers to load their data from storage
 		// These will load cached balance and token data that needs to be available immediately
 		BalanceCacheManager.getInstance();
 		AccountTokenCacheManager.getInstance();
-		
+
 		// Give them a moment to load from storage
 		await new Promise(resolve => setTimeout(resolve, 10));
-		
+
 		log.debug('Cache managers loaded successfully');
 	} catch (error) {
 		log.warn('Failed to load cache managers:', false, error);
@@ -249,7 +233,7 @@ export async function init() {
 		// Initialize stores first (these need to be ready before any UI rendering)
 		await syncStorageToStore();
 		await loadTokens();
-		
+
 		// Load cache managers very early to ensure cached data is available
 		await loadCacheManagers();
 
@@ -366,7 +350,7 @@ if (isClient) {
 // Function to register with background script - moved to a function so we can call it at the right time
 async function registerWithBackgroundScript() {
 	if (!isClient || !getBrowserExt()) return;
-	
+
 	try {
 		const contextType = getContextType();
 		const browserExt = getBrowserExt();
diff --git a/packages/yakkl-wallet/src/hooks.client.v1.ts b/packages/yakkl-wallet/src/hooks.client.v1.ts
deleted file mode 100644
index 0bfe5ea..0000000
--- a/packages/yakkl-wallet/src/hooks.client.v1.ts
+++ /dev/null
@@ -1,8 +0,0 @@
-// src/hooks.client.v1.ts - This is a copy of the original hooks.client.ts for v1
-// When building v1, this file is copied to hooks.client.ts by build-config.js
-
-// This file should contain the original hooks.client.ts logic without preview2 modifications
-// For now, this is a placeholder. In production, you would copy the existing hooks.client.ts here
-
-// The content would be identical to the current hooks.client.ts
-// but preserved for v1 builds
\ No newline at end of file
diff --git a/packages/yakkl-wallet/src/hooks.client.v2.ts b/packages/yakkl-wallet/src/hooks.client.v2.ts
deleted file mode 100644
index b0c9612..0000000
--- a/packages/yakkl-wallet/src/hooks.client.v2.ts
+++ /dev/null
@@ -1,312 +0,0 @@
-// src/hooks.client.v2.ts - Preview 2.0 specific initialization
-import type { Browser } from 'webextension-polyfill';
-import { getSettings, setContextTypeStore, syncStorageToStore } from '$lib/common/stores';
-import { loadTokens } from '$lib/common/stores/tokens';
-import { ErrorHandler } from '$lib/managers/ErrorHandler';
-import { log } from '$lib/managers/Logger';
-import { addUIListeners, removeUIListeners } from '$lib/common/listeners/ui/uiListeners';
-import { globalListenerManager } from '$lib/managers/GlobalListenerManager';
-import { uiListenerManager } from '$lib/common/listeners/ui/uiListeners';
-import { protectedContexts } from '$lib/common/globals';
-import { BUILD_CONFIG, INITIAL_ROUTE } from '$lib/common/build-constants';
-
-// Helper function to check if context needs idle protection
-function contextNeedsIdleProtection(contextType: string): boolean {
-	return protectedContexts.includes(contextType);
-}
-
-// Store the browser reference globally for SvelteKit to use
-declare global {
-	interface Window {
-		browserPolyfill: Browser;
-		EXTENSION_INIT_STATE: {
-			initialized: boolean;
-			contextId: string;
-			activityTrackingStarted: boolean;
-			startTime: number;
-		};
-	}
-}
-
-// Create a unique context ID for this execution instance
-const CONTEXT_ID =
-	typeof Date !== 'undefined'
-		? Date.now().toString(36) + Math.random().toString(36).substr(2, 5)
-		: 'server';
-
-// Early check for window existence
-const isClient = typeof window !== 'undefined';
-
-// Configure logger for v2
-if (isClient && BUILD_CONFIG.isDevelopment) {
-	log.setLevel('DEBUG', 'CONTAINS', [
-		'DEBUG',
-		'DEBUG_TRACE',
-		'INFO',
-		'INFO_TRACE',
-		'WARN',
-		'ERROR',
-		'ERROR_TRACE',
-		'TRACE'
-	]);
-	console.log(`[V2][${CONTEXT_ID}] Logger set to DEBUG mode`);
-} else {
-	log.setLevel('ERROR', 'CONTAINS', ['ERROR', 'ERROR_TRACE']);
-}
-
-if (isClient) {
-	// Check for existing initialization state
-	if (!window.EXTENSION_INIT_STATE) {
-		window.EXTENSION_INIT_STATE = {
-			initialized: false,
-			contextId: CONTEXT_ID,
-			activityTrackingStarted: false,
-			startTime: Date.now()
-		};
-	}
-}
-
-let browser_ext: Browser | null = null;
-let initializationAttempted = false;
-
-function getBrowserExt(): Browser | null {
-	if (!isClient) return null;
-
-	// If already initialized, return the existing instance
-	if (browser_ext) return browser_ext;
-
-	// Only log once
-	if (!initializationAttempted) {
-		initializationAttempted = true;
-	}
-
-	// First try window.browser (set by polyfill script)
-	if (window.browser) {
-		browser_ext = window.browser;
-		window.browserPolyfill = browser_ext;
-		return browser_ext;
-	}
-
-	// Then try window.browserPolyfill (may have been set manually)
-	if (window.browserPolyfill) {
-		browser_ext = window.browserPolyfill;
-		return browser_ext;
-	}
-
-	// Finally try chrome with basic detection
-	if (typeof chrome !== 'undefined' && chrome.runtime && chrome.runtime.id) {
-		// You might want to initialize Chrome shim here
-		// For now, just return null
-	}
-
-	// Log only on first failed attempt
-	if (!browser_ext && initializationAttempted) {
-		log.warn(
-			'Browser extension API not available - ' + 'check if browser-polyfill.js is loading correctly'
-		);
-	}
-
-	return browser_ext;
-}
-
-const errorHandler = ErrorHandler.getInstance(); // Initialize error handlers
-
-/**
- * Determine the context type based on the current URL
- */
-export function getContextType(): string {
-	if (!isClient) return 'unknown';
-
-	const pathname = window.location.pathname;
-	const href = window.location.href;
-
-
-	if (pathname.includes('sidepanel') || href.includes('sidepanel')) {
-		setContextTypeStore('sidepanel');
-		return 'sidepanel';
-	} else if (
-		pathname.includes('index.html') ||
-		href.includes('index.html') ||
-		pathname === '/' ||
-		pathname === ''
-	) {
-		setContextTypeStore('popup-wallet');
-		return 'popup-wallet';
-	} else if (pathname.includes('dapp/popups') || href.includes('dapp/popups')) {
-		setContextTypeStore('popup-dapp');
-		return 'popup-dapp';
-	} else if (pathname.includes('options') || href.includes('options')) {
-		setContextTypeStore('options');
-		return 'options';
-	} else {
-		console.warn(
-			`[Context Detection] Unknown context type for pathname: ${pathname}, href: ${href}`
-		);
-		setContextTypeStore('popup-wallet'); // Default to popup-wallet for main extension
-		return 'popup-wallet';
-	}
-}
-
-export async function init() {
-	if (!isClient) return; // Skip initialization on server
-
-	try {
-		// Use window state to prevent multiple initializations across contexts
-		if (window.EXTENSION_INIT_STATE && window.EXTENSION_INIT_STATE.initialized) {
-			return;
-		}
-
-		console.log(`[V2][${CONTEXT_ID}] Initializing v${BUILD_CONFIG.version}...`);
-
-		try {
-			await getSettings();
-		} catch (error) {
-			console.info(`[V2][${CONTEXT_ID}] Failed to get settings in hooks - passing on:`, error);
-		}
-
-		// First get the browser API
-		const browserApi = getBrowserExt();
-
-		// Register UI context with global listener manager if not already done
-		if (!globalListenerManager.hasContext('ui')) {
-			globalListenerManager.registerContext('ui', uiListenerManager);
-		}
-
-		// Initialize stores first (these need to be ready before any UI rendering)
-		await syncStorageToStore();
-		await loadTokens();
-
-		// Get context type for this initialization
-		const contextType = getContextType();
-
-		// Set up UI listeners through the manager
-		await setupUIListeners();
-
-		// Mark as initialized
-		window.EXTENSION_INIT_STATE.initialized = true;
-		
-		console.log(`[V2][${CONTEXT_ID}] Initialization complete`);
-	} catch (error: any) {
-		console.warn(`[V2][${CONTEXT_ID}] Initialization error:`, error);
-		handleError(error);
-	}
-}
-
-export function handleError(error: Error) {
-	console.warn(`[V2][${CONTEXT_ID}] Error:`, error);
-	errorHandler.handleError(error);
-}
-
-async function setupUIListeners() {
-	if (!isClient) return; // Skip on server
-
-	try {
-		// Clean up any existing listeners first
-		removeUIListeners();
-		// Add UI listeners through the manager
-		addUIListeners();
-		// Set up cleanup for page unload
-		const cleanup = () => {
-			try {
-				removeUIListeners();
-			} catch (error) {
-				console.warn(`[V2][${CONTEXT_ID}] Cleanup error:`, error);
-			}
-		};
-
-		// Add unload handler
-		try {
-			// @ts-ignore
-			if (!window.fencedFrameConfig) {
-				window.removeEventListener('beforeunload', cleanup);
-				window.addEventListener('beforeunload', cleanup);
-			}
-		} catch (e: any) {
-			if (e.message.includes('fenced frames')) {
-				console.warn('Skipping unload in fenced frame context');
-				return;
-			} else {
-				console.warn(`[V2][${CONTEXT_ID}] Failed to add unload handler:`, e);
-			}
-		}
-
-		return cleanup;
-	} catch (error) {
-		console.warn(`[V2][${CONTEXT_ID}] Setup UI listeners error:`, error);
-	}
-}
-
-// Run init early, but only in browser context
-if (isClient) {
-	// Give a slight delay to ensure all globals are available
-	setTimeout(() => {
-		init().catch((err) => {
-			console.warn(`[V2][${CONTEXT_ID}] Failed to initialize:`, err);
-		});
-	}, 50);
-}
-
-// Register with background script if we're in a UI context
-if (isClient && getBrowserExt()) {
-	try {
-		const contextType = getContextType();
-		const browserExt = getBrowserExt();
-
-		browserExt?.runtime
-			.sendMessage({
-				type: 'ui_context_initialized',
-				contextId: CONTEXT_ID,
-				contextType: contextType,
-				timestamp: Date.now(),
-				version: BUILD_CONFIG.version,
-				isV2: true
-			})
-			.catch((err) => console.warn(`[V2][${CONTEXT_ID}] Failed to register context:`, err));
-
-		// Only set up idle status listener for protected contexts
-		if (contextNeedsIdleProtection(contextType)) {
-			// Set up idle status listener
-			browserExt?.runtime.onMessage.addListener(
-				(message: any, _sender: any, _sendResponse: any) => {
-					if (message.type === 'IDLE_STATUS_CHANGED') {
-						// Check if message is targeted to this context type
-						if (
-							message.targetContextTypes &&
-							Array.isArray(message.targetContextTypes) &&
-							!message.targetContextTypes.includes(contextType)
-						) {
-							return undefined;
-						}
-
-						// Dispatch event for UI components
-						window.dispatchEvent(
-							new CustomEvent('yakklIdleStateChanged', {
-								detail: {
-									state: message.state,
-									timestamp: message.timestamp
-								}
-							})
-						);
-
-						return undefined; // Allow other listeners to process this message
-					}
-					return undefined;
-				}
-			);
-		}
-
-		window.addEventListener('beforeunload', () => {
-			browserExt?.runtime
-				.sendMessage({
-					type: 'ui_context_closing',
-					contextId: CONTEXT_ID
-				})
-				.catch((err) => console.warn('Failed to send context closing message', err));
-		});
-	} catch (err) {
-		console.warn(`[V2][${CONTEXT_ID}] Error registering context:`, err);
-	}
-}
-
-// Export for external use if needed
-export { getBrowserExt };
\ No newline at end of file
diff --git a/packages/yakkl-wallet/src/lib/browser-polyfill-wrapper.ts b/packages/yakkl-wallet/src/lib/browser-polyfill-wrapper.ts
index a169cea..dfbf81a 100644
--- a/packages/yakkl-wallet/src/lib/browser-polyfill-wrapper.ts
+++ b/packages/yakkl-wallet/src/lib/browser-polyfill-wrapper.ts
@@ -1,53 +1,79 @@
 // $lib/browser-polyfill-wrapper.ts
-import type { Browser } from 'webextension-polyfill';
-import { log } from '$lib/managers/Logger';
+import type { BrowserAPI } from './types/browser-types';
 
-let browser_ext: Browser | null = null;
-let initialized = false;
+// Global declarations for browser APIs
+declare const browser: any;
+declare const chrome: any;
+
+// Simple logging to avoid any circular dependencies
+function safeLog(level: 'debug' | 'warn' | 'error', message: string, error?: any) {
+	const logLevel = level === 'debug' ? 'log' : level;
+	console[logLevel](`[BrowserPolyfill] ${message}`, error || '');
+}
 
 // Helper function to safely check the environment
 function isServerSide(): boolean {
 	return typeof window === 'undefined' || typeof document === 'undefined';
 }
 
-export function getBrowserExt(): Browser | null {
+// Cache for browser API - using a more robust approach
+let cachedBrowserApi: BrowserAPI | null | undefined = undefined;
+
+export function getBrowserExt(): BrowserAPI | null {
 	// Don't attempt to use outside a browser
 	if (isServerSide()) {
 		return null;
 	}
 
-	if (!initialized) {
-		initializeBrowserAPI();
+	// If we've already attempted to get the browser API, return the cached result
+	if (cachedBrowserApi !== undefined) {
+		return cachedBrowserApi;
 	}
 
-	return browser_ext;
-}
+	// Attempt to get browser API
+	try {
+		let browserApi: BrowserAPI | null = null;
 
-export function initializeBrowserAPI(): Browser | null {
-	if (initialized) return browser_ext;
+		// First try the window property (for normal extension pages)
+		if (typeof window !== 'undefined' && window && (window as any).browser) {
+			browserApi = (window as any).browser as BrowserAPI;
+			safeLog('debug', 'Browser API found from window.browser');
+		}
+		// Then try global browser (for content scripts and service workers)
+		else if (typeof browser !== 'undefined' && browser?.storage) {
+			browserApi = browser as unknown as BrowserAPI;
+			safeLog('debug', 'Browser API found from global browser');
+		}
+		// Fallback to chrome global if available
+		else if (typeof chrome !== 'undefined' && chrome?.storage) {
+			// Wrap chrome API to match webextension-polyfill interface
+			browserApi = chrome as unknown as BrowserAPI;
+			safeLog('debug', 'Browser API found from global chrome');
+		}
+		else {
+			safeLog('warn', 'Browser extension API not found in any expected location');
+			browserApi = null;
+		}
 
-	// Skip for SSR
-	if (isServerSide()) {
-		return null;
-	}
+		// Cache the result (including null)
+		cachedBrowserApi = browserApi;
+		return browserApi;
 
-	try {
-		// Access the global browser object
-		if (window && (window as any).browser) {
-			browser_ext = (window as any).browser as Browser;
-			initialized = true;
-		} else {
-			log.warn('Browser extension API not found in global scope');
-		}
 	} catch (error: unknown) {
-		log.error('Failed to initialize browser extension API:', false, error);
+		safeLog('error', 'Failed to get browser extension API:', error);
+		cachedBrowserApi = null;
+		return null;
 	}
+}
 
-	return browser_ext;
+export function initializeBrowserAPI(): BrowserAPI | null {
+	// Reset cache and try again
+	cachedBrowserApi = undefined;
+	return getBrowserExt();
 }
 
 // For asynchronous access
-export async function getBrowserExtAsync(): Promise<Browser | null> {
+export async function getBrowserExtAsync(): Promise<BrowserAPI | null> {
 	if (isServerSide()) return null;
 	return getBrowserExt();
 }
diff --git a/packages/yakkl-wallet/src/lib/browser-polyfill.d.ts b/packages/yakkl-wallet/src/lib/browser-polyfill.d.ts
index 4a82032..135f72c 100644
--- a/packages/yakkl-wallet/src/lib/browser-polyfill.d.ts
+++ b/packages/yakkl-wallet/src/lib/browser-polyfill.d.ts
@@ -1,8 +1,8 @@
-// import type { Browser } from 'webextension-polyfill';
+// import type { BrowserAPI } from '$lib/types/browser-types';
 
 // declare global {
 //   interface Window {
-//     browser?: Browser;
+//     browser?: BrowserAPI;
 //   }
 // }
 
diff --git a/packages/yakkl-wallet/src/lib/common/alarms.ts b/packages/yakkl-wallet/src/lib/common/alarms.ts
index 0ce1b4b..1e1a58c 100644
--- a/packages/yakkl-wallet/src/lib/common/alarms.ts
+++ b/packages/yakkl-wallet/src/lib/common/alarms.ts
@@ -1,4 +1,4 @@
-import type { Alarms } from 'webextension-polyfill';
+import type { Alarms } from '$lib/types/browser-types';
 import { browser_ext } from './environment';
 import { log } from '$lib/managers/Logger';
 
diff --git a/packages/yakkl-wallet/src/lib/common/authValidation.ts b/packages/yakkl-wallet/src/lib/common/authValidation.ts
index 77c7a41..6087a62 100644
--- a/packages/yakkl-wallet/src/lib/common/authValidation.ts
+++ b/packages/yakkl-wallet/src/lib/common/authValidation.ts
@@ -1,13 +1,15 @@
 // authValidation.ts - Centralized authentication validation
 import { log } from '$lib/common/logger-wrapper';
-import { getMiscStore, yakklMiscStore } from '$lib/common/stores';
-import { getObjectFromLocalStorage } from '$lib/common/storage';
+import { getMiscStore, resetStores, setMiscStore, yakklMiscStore } from '$lib/common/stores';
+import { getObjectFromLocalStorage, setObjectInLocalStorage } from '$lib/common/storage';
 import { STORAGE_YAKKL_SETTINGS } from '$lib/common/constants';
 import { sessionManager } from '$lib/managers/SessionManager';
 import { jwtManager } from '$lib/utilities/jwt';
 import { getProfile } from '$lib/common/stores';
 import type { Profile, ProfileData, Settings } from '$lib/common/interfaces';
 import { get } from 'svelte/store';
+import { decryptData } from './encryption';
+import { isEncryptedData } from './misc';
 
 export interface ValidationResult {
   isValid: boolean;
@@ -29,61 +31,57 @@ export async function validateAuthentication(): Promise<ValidationResult> {
       log.warn('Authentication failed: Wallet not initialized');
       return { isValid: false, reason: 'Wallet not initialized' };
     }
-    
+
     // Step 2: Check if legal terms are accepted
     if (!settings.legal?.termsAgreed) {
-      log.warn('Authentication failed: Legal terms not accepted');
+      log.error('Authentication failed: Legal terms not accepted');
       return { isValid: false, reason: 'Legal terms not accepted' };
     }
-    
+
     // Step 3: Check if wallet is locked
     if (settings.isLocked !== false) {
-      log.warn('Authentication failed: Wallet is locked');
+      log.error('Authentication failed: Wallet is locked');
       return { isValid: false, reason: 'Wallet is locked' };
     }
 
     // Step 4: Validate digest exists and is non-empty
     const digest = getMiscStore();
     if (!digest || digest.length === 0) {
-      log.warn('Authentication failed: No valid digest found');
+      log.error('Authentication failed: No valid digest found');
       return { isValid: false, reason: 'No authentication digest' };
     }
 
     // Step 5: Verify digest matches stored value
     const storedDigest = get(yakklMiscStore);
     if (digest !== storedDigest) {
-      log.warn('Authentication failed: Digest mismatch');
+      log.error('Authentication failed: Digest mismatch');
       return { isValid: false, reason: 'Invalid authentication state' };
     }
 
     // Step 6: Retrieve and validate profile
     const profile = await getProfile();
     if (!profile) {
-      log.warn('Authentication failed: No profile found');
+      log.error('Authentication failed: No profile found');
       return { isValid: false, reason: 'No profile found' };
     }
-    
+
     // Profile from getProfile is already decrypted, validate its structure
     if (!profile.data) {
-      log.warn('Authentication failed: No profile data');
+      log.error('Authentication failed: No profile data');
       return { isValid: false, reason: 'Profile data missing' };
     }
 
     // Step 7: Validate profile data exists
     // The profile from getProfile() is already decrypted if the digest was valid
-    const profileData = profile.data as ProfileData;
-    if (!profileData) {
-      log.warn('Authentication failed: No profile data available');
-      return { isValid: false, reason: 'Profile data missing' };
-    }
-
-    // Step 8: Validate profile integrity
-    if (!profile || !profile.id || !profileData) {
-      log.warn('Authentication failed: Invalid profile structure');
-      return { isValid: false, reason: 'Corrupted profile data' };
+    if (isEncryptedData(profile.data)) {
+      const profileData = await decryptData(profile.data, digest) as ProfileData;
+      if (!profileData) {
+        log.error('Authentication failed: No profile data available');
+        return { isValid: false, reason: 'Profile data missing' };
+      }
     }
 
-    // Step 9: Check JWT session validity
+    // Step 8: Check JWT session validity
     let hasValidJWT = false;
     if (sessionManager.isSessionActive()) {
       const jwtToken = sessionManager.getCurrentJWTToken();
@@ -94,16 +92,16 @@ export async function validateAuthentication(): Promise<ValidationResult> {
             hasValidJWT = true;
             log.debug('JWT token validated successfully');
           } else {
-            log.warn('JWT token validation failed');
+            log.error('JWT token validation failed');
             // Don't fail auth entirely if JWT is invalid - the session manager will handle this
           }
         } catch (error) {
-          log.warn('JWT token verification error', false, error);
+          log.error('JWT token verification error', false, error);
         }
       }
     }
 
-    // Step 10: Additional security checks
+    // Step 9: Additional security checks
     // Check if profile ID matches expected format
     if (!/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/i.test(profile.id)) {
       log.warn('Authentication failed: Invalid profile ID format');
@@ -112,8 +110,8 @@ export async function validateAuthentication(): Promise<ValidationResult> {
 
     // All checks passed
     log.info('Authentication validated successfully');
-    return { 
-      isValid: true, 
+    return {
+      isValid: true,
       profile: profile,
       hasValidSession: sessionManager.isSessionActive(),
       hasValidJWT: hasValidJWT
@@ -133,7 +131,7 @@ export async function quickAuthCheck(): Promise<boolean> {
   try {
     const settings = await getObjectFromLocalStorage(STORAGE_YAKKL_SETTINGS) as Settings;
     const digest = getMiscStore();
-    
+
     return !!(settings && settings.isLocked === false && digest && digest.length > 0);
   } catch {
     return false;
@@ -145,20 +143,16 @@ export async function quickAuthCheck(): Promise<boolean> {
  */
 export async function clearAuthenticationState(): Promise<void> {
   try {
-    const { setObjectInLocalStorage } = await import('$lib/common/storage');
-    const { STORAGE_YAKKL_SETTINGS } = await import('$lib/common/constants');
-    const { setMiscStore, resetStores } = await import('$lib/common/stores');
-    
     // Lock the wallet
     const settings = await getObjectFromLocalStorage(STORAGE_YAKKL_SETTINGS) as Settings;
     if (settings) {
       settings.isLocked = true;
       await setObjectInLocalStorage(STORAGE_YAKKL_SETTINGS, settings);
     }
-    
+
     // Clear sensitive data
     setMiscStore('');
-    
+
     // Clear session if active
     try {
       if (sessionManager.isSessionActive()) {
@@ -167,10 +161,10 @@ export async function clearAuthenticationState(): Promise<void> {
     } catch (error) {
       log.warn('Error ending session during auth clear', false, error);
     }
-    
+
     // Reset stores
     await resetStores();
-    
+
     log.info('Authentication state cleared');
   } catch (error) {
     log.error('Error clearing authentication state', false, error);
@@ -184,12 +178,12 @@ export async function clearAuthenticationState(): Promise<void> {
 export async function validateAndRefreshAuth(): Promise<boolean> {
   try {
     const validation = await validateAuthentication();
-    
+
     if (!validation.isValid) {
       await clearAuthenticationState();
       return false;
     }
-    
+
     // Refresh session if active
     if (sessionManager.isSessionActive()) {
       try {
@@ -198,7 +192,7 @@ export async function validateAndRefreshAuth(): Promise<boolean> {
         log.warn('Failed to extend session during auth refresh', false, error);
       }
     }
-    
+
     return true;
   } catch (error) {
     log.error('Error validating and refreshing auth', false, error);
@@ -212,7 +206,7 @@ export async function validateAndRefreshAuth(): Promise<boolean> {
 export async function auditAuthEvent(event: string, details: any = {}): Promise<void> {
   try {
     log.info(`Auth Event: ${event}`, false, details);
-    
+
     // Store audit event if needed
     const auditEntry = {
       event,
@@ -220,7 +214,7 @@ export async function auditAuthEvent(event: string, details: any = {}): Promise<
       details,
       profileId: 'unknown' // Profile ID not available in this context
     };
-    
+
     // Could store in local storage or send to backend
     // For now, just log it
     if (event === 'validation_failed' || event === 'unauthorized_access') {
@@ -242,24 +236,24 @@ const RATE_LIMIT_WINDOW = 15 * 60 * 1000; // 15 minutes
 export function checkAuthRateLimit(identifier: string): boolean {
   const now = Date.now();
   const record = authRateLimitMap.get(identifier);
-  
+
   if (!record) {
     authRateLimitMap.set(identifier, { attempts: 1, lastAttempt: now });
     return true;
   }
-  
+
   // Reset if outside time window
   if (now - record.lastAttempt > RATE_LIMIT_WINDOW) {
     authRateLimitMap.set(identifier, { attempts: 1, lastAttempt: now });
     return true;
   }
-  
+
   // Check if exceeded attempts
   if (record.attempts >= MAX_AUTH_ATTEMPTS) {
     log.warn('Authentication rate limit exceeded', false, { identifier });
     return false;
   }
-  
+
   // Increment attempts
   record.attempts++;
   record.lastAttempt = now;
@@ -271,4 +265,4 @@ export function checkAuthRateLimit(identifier: string): boolean {
  */
 export function clearAuthRateLimit(identifier: string): void {
   authRateLimitMap.delete(identifier);
-}
\ No newline at end of file
+}
diff --git a/packages/yakkl-wallet/src/lib/common/backgroundSecuredStorage.ts b/packages/yakkl-wallet/src/lib/common/backgroundSecuredStorage.ts
index bd61088..462d735 100644
--- a/packages/yakkl-wallet/src/lib/common/backgroundSecuredStorage.ts
+++ b/packages/yakkl-wallet/src/lib/common/backgroundSecuredStorage.ts
@@ -1,10 +1,10 @@
 /* eslint-disable @typescript-eslint/no-explicit-any */
 import { log } from '$lib/managers/Logger';
-import browser from 'webextension-polyfill';
 import { decryptData, deriveKeyFromPassword, digestMessage, encryptData } from './encryption';
-import type { EncryptedData } from './interfaces';
-import type { SaltedKey } from './evm';
-import { CURRENT_STORAGE_VERSION } from './constants';
+import type { EncryptedData } from '$lib/common/interfaces';
+import type { SaltedKey } from '$lib/common/evm';
+import { CURRENT_STORAGE_VERSION } from '$lib/common/constants';
+import browser from 'webextension-polyfill';
 
 export interface SecureWrapper<T> {
 	encrypted: EncryptedData; // AES-GCM encrypted JSON of T (includes public)
diff --git a/packages/yakkl-wallet/src/lib/common/backgroundSecurity.ts b/packages/yakkl-wallet/src/lib/common/backgroundSecurity.ts
index 911ad17..00a4442 100644
--- a/packages/yakkl-wallet/src/lib/common/backgroundSecurity.ts
+++ b/packages/yakkl-wallet/src/lib/common/backgroundSecurity.ts
@@ -1,4 +1,4 @@
-import browser from 'webextension-polyfill';
+import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
 
 // NOTE: If the compiler generates an error, it's most likely because of trying to use 'browser' in the client context.
 export function isBackgroundContext(): boolean {
diff --git a/packages/yakkl-wallet/src/lib/common/backgroundStorage.ts b/packages/yakkl-wallet/src/lib/common/backgroundStorage.ts
index 242ed6b..f7a970a 100644
--- a/packages/yakkl-wallet/src/lib/common/backgroundStorage.ts
+++ b/packages/yakkl-wallet/src/lib/common/backgroundStorage.ts
@@ -1,6 +1,6 @@
 /* eslint-disable @typescript-eslint/no-explicit-any */
 import { log } from '$lib/managers/Logger';
-import browser from 'webextension-polyfill';
+import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
 
 export const clearObjectsFromLocalStorage = async (): Promise<void> => {
 	try {
diff --git a/packages/yakkl-wallet/src/lib/common/backgroundUtils.ts b/packages/yakkl-wallet/src/lib/common/backgroundUtils.ts
index 6e6b7b1..2b0b442 100644
--- a/packages/yakkl-wallet/src/lib/common/backgroundUtils.ts
+++ b/packages/yakkl-wallet/src/lib/common/backgroundUtils.ts
@@ -1,5 +1,5 @@
 import { yakklStoredObjects } from '../models/dataModels';
-import browser from 'webextension-polyfill'; // This will cause a build error if not used in a background script.
+import { getBrowserExt } from '$lib/browser-polyfill-wrapper'; // This will cause a build error if not used in a background script.
 import { log } from '$lib/managers/Logger';
 import { getObjectFromLocalStorage, setObjectInLocalStorage } from './backgroundSecuredStorage';
 import { STORAGE_YAKKL_CURRENTLY_SELECTED, STORAGE_YAKKL_SETTINGS } from './constants';
diff --git a/packages/yakkl-wallet/src/lib/common/bignumber-ethereum.ts b/packages/yakkl-wallet/src/lib/common/bignumber-ethereum.ts
index 1758ba6..6782b2e 100644
--- a/packages/yakkl-wallet/src/lib/common/bignumber-ethereum.ts
+++ b/packages/yakkl-wallet/src/lib/common/bignumber-ethereum.ts
@@ -1,5 +1,13 @@
 // EthereumBigNumber.ts
 import { BigNumber, CurrencyCode, type BigNumberish } from './bignumber';
+import Decimal from 'decimal.js';
+
+export interface FiatFormatOptions {
+	locale?: string;
+	decimalPlaces?: number;
+	currencyStyle?: 'symbol' | 'code' | 'name'; // Choose how to display currency
+	smallThreshold?: number; // Below this, display "< $0.01"
+}
 
 export class EthereumBigNumber extends BigNumber {
 	// Instance methods
@@ -160,6 +168,11 @@ export class EthereumBigNumber extends BigNumber {
 		return new EthereumBigNumber(weiValue / BigInt('1000000000000000000'));
 	}
 
+	static toDecimalEther(value: BigNumberish): Decimal {
+		const wei = EthereumBigNumber.toBigInt(value) ?? BigInt(0);
+		return new Decimal(wei.toString()).div('1e18');
+	}
+
 	static toEtherString(value: BigNumberish): string {
 		const weiValue = EthereumBigNumber.from(value).toBigInt() ?? BigInt(0);
 		const etherValue = weiValue / BigInt('1000000000000000000');
@@ -173,26 +186,95 @@ export class EthereumBigNumber extends BigNumber {
 		return etherString;
 	}
 
-	static toFiat(value: BigNumberish, price: number): number {
-		const etherValue = parseFloat(EthereumBigNumber.toEtherString(value));
-		if (isNaN(etherValue)) {
-			throw new Error('Invalid BigNumberish value');
-		}
-		return etherValue * price;
+	// static toFiat(value: BigNumberish, price: number): number {
+	// 	const etherValue = parseFloat(EthereumBigNumber.toEtherString(value));
+	// 	if (isNaN(etherValue)) {
+	// 		throw new Error('Invalid BigNumberish value');
+	// 	}
+	// 	return etherValue * price;
+	// }
+
+	static toFiat(value: BigNumberish, price: number | string | BigNumberish): number {
+		const ether = this.toDecimalEther(value);
+		const fiat = ether.times(new Decimal(price.toString()));
+		return fiat.toNumber();
+	}
+
+	static toFiatString(value: BigNumberish, price: number, decimals = 2): string {
+		const fiat = EthereumBigNumber.toFiat(value, price);
+		return fiat.toFixed(decimals);
 	}
 
 	static toFormattedFiat(
 		value: BigNumberish,
-		price: number,
+		price: BigNumberish,
+		currencyCode: CurrencyCode,
+		locale: string = 'en-US',
+		decimalPlaces: number = 2
+	): string {
+		const wei = EthereumBigNumber.toBigInt(value);
+		if (wei === null) {
+			throw new Error('Invalid BigNumberish token value');
+		}
+
+		const ether = new Decimal(wei.toString()).div('1e18');
+		const decimalPrice = new Decimal(price.toString());
+		const fiatValue = ether.times(decimalPrice);
+
+		const formatter = new Intl.NumberFormat(locale, {
+			style: 'currency',
+			currency: currencyCode,
+			minimumFractionDigits: decimalPlaces,
+			maximumFractionDigits: decimalPlaces
+		});
+
+		return formatter.format(fiatValue.toNumber());
+	}
+
+	static toFormattedFiat2(
+		value: BigNumberish,
+		price: BigNumberish,
 		currencyCode: CurrencyCode,
-		locale: string = ''
+		options: FiatFormatOptions = {}
 	): string {
-		const fiatValue = EthereumBigNumber.toFiat(value, price);
-		const formatter = new Intl.NumberFormat(locale || undefined, {
+		const {
+			locale = 'en-US',
+			decimalPlaces = 2,
+			currencyStyle = 'symbol',
+			smallThreshold = 0.01
+		} = options;
+
+		const wei = EthereumBigNumber.toBigInt(value);
+		if (wei === null) {
+			throw new Error('Invalid BigNumberish token value');
+		}
+
+		const ether = new Decimal(wei.toString()).div('1e18');
+		const decimalPrice = new Decimal(price.toString());
+		const fiatValue = ether.times(decimalPrice);
+
+		// Handle small values
+		if (fiatValue.lessThan(smallThreshold)) {
+			const smallFormatted = new Intl.NumberFormat(locale, {
+				style: 'currency',
+				currency: currencyCode,
+				currencyDisplay: currencyStyle,
+				minimumFractionDigits: decimalPlaces,
+				maximumFractionDigits: decimalPlaces
+			}).format(smallThreshold);
+
+			return `< ${smallFormatted}`;
+		}
+
+		const formatter = new Intl.NumberFormat(locale, {
 			style: 'currency',
-			currency: currencyCode
+			currency: currencyCode,
+			currencyDisplay: currencyStyle,
+			minimumFractionDigits: decimalPlaces,
+			maximumFractionDigits: decimalPlaces
 		});
-		return formatter.format(fiatValue);
+
+		return formatter.format(fiatValue.toNumber());
 	}
 
 	static toHex(value: BigNumberish): string {
diff --git a/packages/yakkl-wallet/src/lib/common/computeTokenValue.ts b/packages/yakkl-wallet/src/lib/common/computeTokenValue.ts
index 33f38b1..9ed0354 100644
--- a/packages/yakkl-wallet/src/lib/common/computeTokenValue.ts
+++ b/packages/yakkl-wallet/src/lib/common/computeTokenValue.ts
@@ -1,16 +1,21 @@
 import type { TokenData } from './interfaces';
+import { EthereumBigNumber } from './bignumber-ethereum';
+import type { BigNumberish } from './bignumber';
 
 /**
- * Computes the balance and value of a token.
+ * Computes the balance and value of a token using BigNumber precision.
  * @param token The token data object
- * @returns { balance: number, value: number }
+ * @returns { balance: BigNumberish, value: BigNumberish }
  */
+export function computeTokenValue(token: TokenData): { balance: BigNumberish; value: BigNumberish } {
+	// Use EthereumBigNumber for precise calculations
+	const balance = token?.balance ? EthereumBigNumber.from(token.balance) : EthereumBigNumber.from(0);
 
-export function computeTokenValue(token: TokenData): { balance: number; value: number } {
-	let balance = token?.balance ? Number(token.balance) : 0; // Direct conversion
+	const price = token?.price?.price ? EthereumBigNumber.from(token.price.price) : EthereumBigNumber.from(0);
+	const value = balance.mul(price);
 
-	const price = token?.price?.price ?? 0;
-	const value = balance * price;
-
-	return { balance, value };
+	return {
+		balance: balance.toBigInt(),
+		value: value.toBigInt()
+	};
 }
diff --git a/packages/yakkl-wallet/src/lib/common/createPriceUpdater.ts b/packages/yakkl-wallet/src/lib/common/createPriceUpdater.ts
index 38fa8a6..102ec18 100644
--- a/packages/yakkl-wallet/src/lib/common/createPriceUpdater.ts
+++ b/packages/yakkl-wallet/src/lib/common/createPriceUpdater.ts
@@ -2,6 +2,8 @@ import { writable } from 'svelte/store';
 import type { TokenData } from './interfaces';
 import type { PriceManager } from '$lib/managers/PriceManager';
 import { log } from '$lib/managers/Logger';
+import { BigNumberishUtils } from './BigNumberishUtils';
+import { DecimalMath } from './DecimalMath';
 
 // Utility for debouncing
 function debounce(func: (...args: any[]) => void, delay: number) {
@@ -50,13 +52,13 @@ export function createPriceUpdater(priceManager: PriceManager) {
 			const price = marketPrice?.price ?? 0;
 
 			// Balance is already in human-readable format (e.g., "1.5" ETH)
-			// Don't divide by decimals again
+			// Use DecimalMath for precise value calculation
 			const balance = Number(token.balance || 0);
-			const value = balance * price;
+			const value = DecimalMath.of(balance).mul(BigNumberishUtils.toNumber(price)).toNumber();
 
 			// Keep existing change data from token
 			const change = token.change || [];
-			
+
 			return {
 				...token,
 				price: {
@@ -80,9 +82,9 @@ export function createPriceUpdater(priceManager: PriceManager) {
 			log.error(`fetchTokenData - Failed to fetch price for ${token.symbol}`, false, error);
 			return {
 				...token,
-				price: { 
-					price: 0, 
-					provider: '', 
+				price: {
+					price: 0,
+					provider: '',
 					lastUpdated: new Date(),
 					isNative: token.isNative || false,
 					chainId: token.chainId,
diff --git a/packages/yakkl-wallet/src/lib/common/defaults.ts b/packages/yakkl-wallet/src/lib/common/defaults.ts
deleted file mode 100644
index 2063225..0000000
--- a/packages/yakkl-wallet/src/lib/common/defaults.ts
+++ /dev/null
@@ -1,107 +0,0 @@
-/* eslint-disable @typescript-eslint/no-explicit-any */
-// src/lib/utilities/defaults.ts
-
-import { getProfile, yakklMiscStore } from '$lib/common/stores';
-import { decryptData, digestMessage } from '$lib/common/encryption';
-import type { ProfileData } from '$lib/common/interfaces';
-import { isEncryptedData } from '$lib/common/misc';
-import { log } from '$lib/managers/Logger';
-
-// Verifies the profile using the provided id and decrypts data if necessary.
-export async function verify(id: string) {
-	try {
-		if (!id) {
-			return undefined;
-		}
-		const profile = await getProfile();
-		const digest = await digestMessage(id);
-		if (!profile || !digest) {
-			yakklMiscStore.set('');
-			return undefined;
-		} else {
-			if (isEncryptedData(profile.data)) {
-				await decryptData(profile.data, digest).then(
-					(result) => {
-						profile.data = result as ProfileData;
-						yakklMiscStore.set(digest);
-						// eslint-disable-next-line @typescript-eslint/no-unused-vars
-					},
-					(_reason) => {
-						throw 'Verification failed!';
-					}
-				);
-			}
-			return profile;
-		}
-	} catch (e) {
-		log.error(e);
-		return undefined;
-	}
-}
-
-// Type guards and utility functions for various types.
-// export function isEncryptedData(data: any): data is EncryptedData {
-//   return (data as EncryptedData).iv !== undefined;
-// }
-
-// export function isProfileData(data: EncryptedData | ProfileData | Promise<ProfileData>): data is ProfileData {
-//   return (data as ProfileData).pincode !== undefined;
-// }
-
-// export function isMetaData(meta: unknown): meta is MetaData {
-//   return meta !== null && typeof meta === 'object';
-// }
-
-// export function isCurrentlySelectedData(data: EncryptedData | CurrentlySelectedData): data is CurrentlySelectedData {
-//   return (data as CurrentlySelectedData).profile !== undefined;
-// }
-
-// export function isPrimaryAccountData(data: EncryptedData | PrimaryAccountData): data is PrimaryAccountData {
-//   return (data as PrimaryAccountData).privateKey !== undefined;
-// }
-
-// export function isYakklPrimaryAccount(account: any): account is YakklPrimaryAccount {
-//   return account && account.subAccounts !== undefined;
-// }
-
-// export function isYakklAccount(account: any): account is YakklAccount {
-//   return account && account.accountType !== undefined;
-// }
-
-// export async function resolveProperties<T>(object: Readonly<Deferrable<T>>): Promise<T> {
-//   const promises: Array<Promise<Result>> = Object.keys(object).map(async (key) => {
-//     const value = object[<keyof Deferrable<T>>key];
-//     const v = await Promise.resolve(value);
-//     return { key: key, value: v };
-//   });
-
-//   const results = await Promise.all(promises);
-
-//   return results.reduce((accum, result) => {
-//     accum[<keyof T>(result.key)] = result.value;
-//     return accum;
-//   }, <T>{});
-// }
-
-// defaults.ts
-
-// Ensures that the object has all the properties from the defaults object, and sets them to the default value if they are missing.
-// export function ensureDefaults<T extends object>(obj: T, defaults: Partial<T>): T {
-//   for (const key in defaults) {
-//     if (obj[key] === undefined) {
-//       obj[key] = defaults[key]!;
-//     }
-//   }
-//   return obj;
-// }
-
-// For null or undefined properties, set them to the value passed. Use this to set values for properties that are null or undefined.
-// export function setDefinedProperty<T extends object, K extends keyof T>(
-//   target: T | undefined,
-//   property: K,
-//   value: T[K] | undefined
-// ): void {
-//   if (target && value !== undefined) {
-//     target[property] = value;
-//   }
-// }
diff --git a/packages/yakkl-wallet/src/lib/common/encryption.ts b/packages/yakkl-wallet/src/lib/common/encryption.ts
index e9dd17b..962c159 100644
--- a/packages/yakkl-wallet/src/lib/common/encryption.ts
+++ b/packages/yakkl-wallet/src/lib/common/encryption.ts
@@ -1,6 +1,4 @@
 /* eslint-disable @typescript-eslint/no-explicit-any */
-export const prerender = false;
-
 import { type SaltedKey } from '$lib/common';
 import type { EncryptedData } from '$lib/common';
 import { log } from '$lib/managers/Logger';
diff --git a/packages/yakkl-wallet/src/lib/common/environment.ts b/packages/yakkl-wallet/src/lib/common/environment.ts
index c68dcce..8fe3a16 100644
--- a/packages/yakkl-wallet/src/lib/common/environment.ts
+++ b/packages/yakkl-wallet/src/lib/common/environment.ts
@@ -1,5 +1,5 @@
 // $lib/common/environment.ts
-import type { Browser } from 'webextension-polyfill';
+import type { BrowserAPI } from '$lib/types/browser-types';
 import { log } from '$lib/managers/Logger';
 
 // Helper function to check if we're in a browser environment
@@ -21,22 +21,22 @@ const mockBrowser = {
 		}
 	}
 	// Add other APIs as needed
-} as unknown as Browser;
+} as unknown as BrowserAPI;
 
 // Get the browser API from the global set in hooks.client.ts
-export function getBrowserExtFromGlobal(): Browser | null {
+export function getBrowserExtFromGlobal(): BrowserAPI | null {
 	if (!isClient) return null; // mockBrowser for SSR??
 
 	try {
-		// First try the dedicated property we set
-		if (window.browserPolyfill) {
-			return window.browserPolyfill;
-		}
-
-		// Then try the standard global
+		// First try window.browser
 		if ((window as any).browser) {
 			return (window as any).browser;
 		}
+
+		// Then try chrome
+		if ((window as any).chrome && (window as any).chrome.runtime) {
+			return (window as any).chrome;
+		}
 	} catch (err) {
 		log.error('Error accessing browser API from global:', false, err);
 	}
@@ -45,7 +45,7 @@ export function getBrowserExtFromGlobal(): Browser | null {
 }
 
 // Export a function that gets the browser API
-export function getBrowserExt(): Browser | null {
+export function getBrowserExt(): BrowserAPI | null {
 	if (!isClient) return null;
 	return getBrowserExtFromGlobal();
 }
diff --git a/packages/yakkl-wallet/src/lib/common/interfaces.ts b/packages/yakkl-wallet/src/lib/common/interfaces.ts
index 72d2896..477055d 100644
--- a/packages/yakkl-wallet/src/lib/common/interfaces.ts
+++ b/packages/yakkl-wallet/src/lib/common/interfaces.ts
@@ -13,7 +13,8 @@ import type {
 } from '$lib/common/types';
 import type { BigNumberish } from '$lib/common/bignumber';
 import type { Token } from '$lib/managers/Token';
-import type { Runtime } from 'webextension-polyfill';
+import type { Runtime } from '$lib/types/browser-types';
+import type { EthereumBigNumber } from './bignumber-ethereum';
 
 // Session Info is used to check if the session is valid and if the port is open - mainly used for the dapp popups
 export interface SessionInfo {
@@ -239,24 +240,24 @@ export interface MetaDataParams {
 }
 
 export interface PoolInfo {
-	fee: number;
+	fee: BigNumberish;           // Changed from number
 	liquidity: string;
 	// quoteAmount: number;
-	price: number;
+	price: BigNumberish;         // Changed from number
 	tokenInAmount?: string; // Converted from bigint to string
 	tokenOutAmount: string; // Converted from bigint to string
 	tokenInReserve: string;
 	tokenOutReserve: string;
-	tokenInPrice: number;
-	tokenOutPrice: number;
-	tvl: number;
+	tokenInPrice: BigNumberish;  // Changed from number
+	tokenOutPrice: BigNumberish; // Changed from number
+	tvl: BigNumberish;           // Changed from number
 }
 
 export interface PriceData {
 	provider: string;
-	price: number;
+	price: BigNumberish;         // Changed from number - CRITICAL
 	lastUpdated: Date;
-	contractFeePool?: number; // May be phased out. This is the fee pool for the contract found in PoolInfo as 'fee'
+	contractFeePool?: BigNumberish; // Changed from number
 	isNative?: boolean;
 	status?: number;
 	message?: string;
@@ -533,8 +534,8 @@ export interface SwapToken {
 export interface TokenData extends SwapToken {
 	change?: TokenChange[] | null; // getTokenChange(timeline)
 	price?: MarketPriceData | null; // Current price of the token. Price is in PriceData but is for the provider's price
-	value?: number; // Since this would be the user's value in the token
-	quantity?: number; // User's holdings
+	value?: BigNumberish; // Changed from number - CRITICAL for financial calculations
+	quantity?: EthereumBigNumber; // User's holdings
 	formattedValue?: string; // Formatted value for display
 	alias?: string; // Alias for the token
 	customDefault?: 'custom' | 'default'; // If 'custom' then it's a custom token and if 'default' then it's a default token
@@ -563,8 +564,8 @@ export interface TokenData extends SwapToken {
 		discord?: string;
 		totalSupply?: string;
 		maxSupply?: string;
-		marketCap?: number;
-		fdv?: number; // Fully diluted valuation
+		marketCap?: BigNumberish; // Changed from number
+		fdv?: BigNumberish; // Changed from number - Fully diluted valuation
 		lastUpdated?: string;
 	};
 }
@@ -572,7 +573,7 @@ export interface TokenData extends SwapToken {
 // Currently only used for the token list and not as a stand alone data store
 export interface TokenChange {
 	timeline?: string;
-	percentChange?: number;
+	percentChange?: BigNumberish; // Changed from number for precision
 }
 
 // export interface SwapTokenListTag {
@@ -809,6 +810,8 @@ export interface ProfileData {
 	id?: string;
 	persona?: string; // The persona that is associated with the account
 	name: Name;
+  username?: string;
+  planType?: PlanType;
 	email: string;
 	bio?: string;
 	website?: string;
@@ -870,7 +873,7 @@ export interface Settings {
 	legal: Legal;
 	platform: Platform;
 	plan: {
-		type: PlanType;
+		type: PlanType; // This is the public plan type of the user but is verified against the profileData.planType which is encrypted
 		source?: AccessSourceType;
 		promo?: PromoClassificationType;
 		trialEndDate?: string;
@@ -1174,22 +1177,22 @@ export interface SwapPriceData extends BasePriceData {
 	amountOut: BigNumberish; // Amount of buy token
 	exchangeRate: BigNumberish; // Amount of buy token per sell token
 
-	// MarketPrice
-	marketPriceIn: number; // Fiat price of tokenIn which updates in interval. It is here so that we can show the price of the tokenIn in the UI
-	marketPriceOut: number; // Fiat price of tokenOut which updates in interval. It is here so that we can show the price of the tokenOut in the UI. This is only used if priceIn is not available
-	marketPriceGas: number; // Gas market price
+	// MarketPrice - Updated to BigNumberish for precision
+	marketPriceIn: BigNumberish; // Changed from number
+	marketPriceOut: BigNumberish; // Changed from number
+	marketPriceGas: BigNumberish; // Changed from number
 
-	priceImpactRatio: number; // Price impact ratio percentage
+	priceImpactRatio: BigNumberish; // Changed from number - critical for DeFi calculations
 	path: string[]; // Path of tokens for the swap
-	fee?: number; // Pool fee if used by the provider
-	feeBasisPoints: number; // Fee in basis points - constant - YAKKL_FEE_BASIS_POINTS
-	feeAmountPrice: number; // Fee in price
+	fee?: BigNumberish; // Changed from number
+	feeBasisPoints: number; // Fee in basis points - constant - can stay number
+	feeAmountPrice: BigNumberish; // Changed from number
 	feeAmountInUSD?: string; // Fee in USD formatted
 	gasEstimate: BigNumberish; // Gas estimate for the swap
 	gasEstimateInUSD?: string; // Gas estimate in USD formatted
 	tokenOutPriceInUSD?: string; // Token out price in USD formatted
 
-	slippageTolerance?: number; // Slippage percentage
+	slippageTolerance?: BigNumberish; // Changed from number for precision
 	deadline?: number; // Deadline for the swap
 
 	sqrtPriceX96After?: BigNumberish; // Uniswap specific - sqrtPriceX96 after the swap
@@ -1208,12 +1211,12 @@ export interface SwapPriceData extends BasePriceData {
 // }
 
 export interface MarketPriceData extends BasePriceData {
-	price: number;
+	price: BigNumberish; // Changed from number - CRITICAL
 	pair?: string;
 }
 
 export interface PoolInfoData extends BasePriceData {
-	fee?: number;
+	fee?: BigNumberish; // Changed from number
 	liquidity: string;
 	sqrtPriceX96: string;
 	tick: number;
@@ -1242,13 +1245,13 @@ export interface SwapCalculation {
 }
 
 export interface PoolPriceData {
-	price: number;
-	token0Price: number;
-	token1Price: number;
+	price: BigNumberish; // Changed from number
+	token0Price: BigNumberish; // Changed from number
+	token1Price: BigNumberish; // Changed from number
 	token0Reserve: string;
 	token1Reserve: string;
-	liquidityUSD: number;
-	priceImpact: number;
+	liquidityUSD: BigNumberish; // Changed from number
+	priceImpact: BigNumberish; // Changed from number
 }
 
 // interfaces.ts (add this)
diff --git a/packages/yakkl-wallet/src/lib/common/listeners/background/alarmListeners.ts b/packages/yakkl-wallet/src/lib/common/listeners/background/alarmListeners.ts
index 6833e40..55f62c1 100644
--- a/packages/yakkl-wallet/src/lib/common/listeners/background/alarmListeners.ts
+++ b/packages/yakkl-wallet/src/lib/common/listeners/background/alarmListeners.ts
@@ -1,4 +1,4 @@
-import browser from 'webextension-polyfill';
+import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
 import { log } from '$lib/managers/Logger';
 
 export async function onAlarmListener(alarm: any) {
diff --git a/packages/yakkl-wallet/src/lib/common/listeners/background/backgroundListeners.ts b/packages/yakkl-wallet/src/lib/common/listeners/background/backgroundListeners.ts
index c5f5bf1..1eb48a9 100644
--- a/packages/yakkl-wallet/src/lib/common/listeners/background/backgroundListeners.ts
+++ b/packages/yakkl-wallet/src/lib/common/listeners/background/backgroundListeners.ts
@@ -1,7 +1,7 @@
 // listeners/backgroundListeners.ts
 import { ListenerManager } from '$lib/managers/ListenerManager';
-import browser from 'webextension-polyfill';
-import type { Runtime } from 'webextension-polyfill';
+import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
+import type { Runtime } from '$lib/types/browser-types';
 import { initializeBlacklistDatabase } from '$contexts/background/extensions/chrome/database';
 import { yakklStoredObjects } from '$lib/models/dataModels';
 import { setObjectInLocalStorage } from '$lib/common/storage';
diff --git a/packages/yakkl-wallet/src/lib/common/listeners/background/portListeners.ts b/packages/yakkl-wallet/src/lib/common/listeners/background/portListeners.ts
index 116bb31..87460a6 100644
--- a/packages/yakkl-wallet/src/lib/common/listeners/background/portListeners.ts
+++ b/packages/yakkl-wallet/src/lib/common/listeners/background/portListeners.ts
@@ -11,13 +11,13 @@ import {
 import type { YakklCurrentlySelected } from '$lib/common/interfaces';
 import { getObjectFromLocalStorage, setObjectInLocalStorage } from '$lib/common/storage';
 import { setIconUnlock } from '$lib/utilities/utilities';
-import type { Runtime } from 'webextension-polyfill';
+import type { Runtime } from '$lib/types/browser-types';
 import { showPopup } from '$contexts/background/extensions/chrome/ui';
 import { estimateGas, getBlock } from '$contexts/background/extensions/chrome/legacy';
 import { supportedChainId } from '$lib/common/utils';
 import { onPortInternalListener } from '$lib/common/listeners/ui/portListeners';
 import { onEthereumListener } from '$lib/common/listeners/background/backgroundListeners';
-import browser from 'webextension-polyfill';
+import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
 import { log } from '$lib/managers/Logger';
 import { addDAppActivity } from '../../activities/dapp-activity';
 import type { DAppActivity } from '../../activities/dapp-activity';
@@ -26,9 +26,11 @@ import { onUnifiedMessageHandler } from '$contexts/background/extensions/chrome/
 import { sessionPortManager } from '$lib/managers/SessionPortManager';
 import { showPopupForMethod } from '$lib/managers/DAppPopupManager';
 import { UnifiedTimerManager } from '$lib/managers/UnifiedTimerManager';
+import { BackgroundJWTValidatorService } from '$lib/services/background-jwt-validator.service';
+import { showEIP6963Popup } from '$contexts/background/extensions/chrome/eip-6963';
 
 // Browser extension reference
-const browser_ext = browser;
+const browser_ext = getBrowserExt();
 
 // Initialize timer manager
 const timerManager = UnifiedTimerManager.getInstance();
@@ -146,6 +148,26 @@ export async function onPortConnectListener(port: Runtime.Port) {
 					port.onMessage.addListener(onPortInternalListener);
 				}
 				registerInternalPort(connectionId, port, connectionInfo);
+				break;
+
+						case 'jwt-validator':
+				// Handle JWT validator port connections
+				log.info('[PortListener] JWT validator port connected', false, {
+					connectionId,
+					tabId: connectionInfo.tabId,
+					url: connectionInfo.url
+				});
+
+				// Register the port with the JWT validator service
+				try {
+					const jwtValidator = BackgroundJWTValidatorService.getInstance();
+					jwtValidator.registerJWTValidatorPort(port);
+				} catch (error) {
+					log.error('[PortListener] Failed to register JWT validator port', false, error);
+				}
+
+				// Also register it internally for tracking
+				registerInternalPort(connectionId, port, connectionInfo);
 				break;
 
 			case YAKKL_SPLASH:
@@ -481,7 +503,6 @@ export async function onPortExternalListener(message: any, port: Runtime.Port):
 			case 'eth_requestAccounts':
 			case 'wallet_requestPermissions':
 				try {
-					const { showEIP6963Popup } = await import('../../../extensions/chrome/eip-6963');
 					await showEIP6963Popup(event.method, event.params || [], port, event.id);
 				} catch (error) {
 					log.error('Error using EIP-6963 implementation for eth_requestAccounts:', false, error);
@@ -491,7 +512,6 @@ export async function onPortExternalListener(message: any, port: Runtime.Port):
 
 			case 'eth_sendTransaction':
 				try {
-					const { showEIP6963Popup } = await import('../../../extensions/chrome/eip-6963');
 					await showEIP6963Popup(event.method, event.params || [], port, event.id);
 				} catch (error) {
 					log.error('Error using EIP-6963 implementation for eth_sendTransaction:', false, error);
@@ -502,7 +522,6 @@ export async function onPortExternalListener(message: any, port: Runtime.Port):
 			case 'eth_signTypedData_v4':
 			case 'personal_sign':
 				try {
-					const { showEIP6963Popup } = await import('../../../extensions/chrome/eip-6963');
 					await showEIP6963Popup(event.method, event.params || [], port, event.id);
 				} catch (error) {
 					log.error(
@@ -735,11 +754,13 @@ export async function onPopupLaunchListener(message: unknown, port: Runtime.Port
 				await browser_ext.windows.update(windowId, { focused: true });
 				port.postMessage({ popup: 'YAKKL: Launched' });
 			} catch {
-				await showPopup('');
+				// Mark as internal since this is a session management popup
+				await showPopup('', '0', 'internal');
 				port.postMessage({ popup: 'YAKKL: Launched' });
 			}
 		} else {
-			await showPopup('');
+			// Mark as internal since this is a session management popup
+			await showPopup('', '0', 'internal');
 			port.postMessage({ popup: 'YAKKL: Launched' });
 		}
 	} catch (error) {
diff --git a/packages/yakkl-wallet/src/lib/common/listeners/background/readMethodHandler.ts b/packages/yakkl-wallet/src/lib/common/listeners/background/readMethodHandler.ts
index 1e06d02..084b210 100644
--- a/packages/yakkl-wallet/src/lib/common/listeners/background/readMethodHandler.ts
+++ b/packages/yakkl-wallet/src/lib/common/listeners/background/readMethodHandler.ts
@@ -8,10 +8,11 @@ import {
 	verifyDomainConnected,
 	getAddressesForDomain
 } from '$contexts/background/extensions/chrome/verifyDomainConnected';
-import type { Runtime } from 'webextension-polyfill';
+import type { Runtime } from '$lib/types/browser-types';
 import type { YakklResponse } from '$lib/common/interfaces';
 import { VERSION } from '$lib/common/constants';
 import { BlockchainExplorer } from '$lib/managers/providers/explorer/BlockchainExplorer';
+import { getAlchemyProvider } from '$lib/managers/providers/network/ethereum_provider/alchemy';
 
 /**
  * Handles read-only RPC methods that don't require user approval
@@ -139,9 +140,6 @@ async function handleGetAccounts(request: any): Promise<string[]> {
 async function callRPCProvider(method: string, params: any[], chainId: number): Promise<any> {
 	try {
 		// Import your RPC provider
-		const { getAlchemyProvider } = await import(
-			'$lib/managers/providers/network/ethereum_provider/alchemy'
-		);
 		const provider = getAlchemyProvider();
 
 		// Make the RPC call
diff --git a/packages/yakkl-wallet/src/lib/common/listeners/background/runtimeListeners.ts b/packages/yakkl-wallet/src/lib/common/listeners/background/runtimeListeners.ts
index 5a87163..4f632de 100644
--- a/packages/yakkl-wallet/src/lib/common/listeners/background/runtimeListeners.ts
+++ b/packages/yakkl-wallet/src/lib/common/listeners/background/runtimeListeners.ts
@@ -1,96 +1,8 @@
 // import { isBrowserEnv, browser_ext } from '$lib/common/environment';
-import browser from 'webextension-polyfill';
-import type { Runtime } from 'webextension-polyfill';
+import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
+import type { Runtime } from '$lib/types/browser-types';
 import { startLockIconTimer, stopLockIconTimer } from '$contexts/background/extensions/chrome/iconTimer';
 import { setIconLock, setIconUnlock } from '$lib/utilities/utilities';
 import { log } from '$lib/managers/Logger';
+const browser = getBrowserExt()!;
 
-type RuntimeSender = Runtime.MessageSender;
-
-// These functions are used to add and remove listeners for the extension EXCEPT for the window listeners and any other listeners that may be specific to a given component or whatever.
-
-export async function onRuntimeMessageListener(message: any, sender: RuntimeSender): Promise<any> {
-	try {
-		if (!browser) {
-			return { success: false, error: 'Browser API not available' };
-		}
-
-		log.info('runtimeListeners - onRuntimeMessageListener:', false, message);
-
-		switch (message.type) {
-			case 'ping': {
-				return { success: true, message: 'Pong' };
-			}
-
-			case 'clipboard-timeout': {
-				// Start the timeout but return immediately
-				setTimeout(async () => {
-					try {
-						browser.scripting.executeScript({
-							target: { tabId: message.tabId },
-							func: async () => {
-								try {
-									await navigator.clipboard.writeText(message.redactText);
-								} catch (error) {
-									log.error('Failed to write to clipboard:', false, error);
-								}
-							}
-						});
-					} catch (error) {
-						log.error('Failed to write to clipboard:', false, error);
-					}
-				}, message.timeout);
-
-				return { success: true, message: 'Clipboard timeout scheduled' };
-			}
-
-			case 'createNotification': {
-				const { notificationId, title, messageText } = message.payload;
-
-				// Testing to see where this may have come from
-				if (title === 'Security Notification') {
-					return { success: false, message: 'Security Notification canceled' };
-				}
-
-				await browser.notifications.create(notificationId as string, {
-					type: 'basic',
-					iconUrl: browser.runtime.getURL('/images/logoBullLock48x48.png'),
-					title: title || 'Notification',
-					message: messageText || 'Default message.'
-				});
-
-				return { success: true, message: 'Notification sent' };
-			}
-
-			case 'startLockIconTimer': {
-				startLockIconTimer();
-				return { success: true, message: 'Lock icon timer started.' };
-			}
-
-			case 'stopLockIconTimer': {
-				stopLockIconTimer();
-				return { success: true, message: 'Lock icon timer stopped.' };
-			}
-
-			case 'setIconLock': {
-				await setIconLock();
-				return { success: true, message: 'Lock icon set.' };
-			}
-
-			case 'setIconUnlock': {
-				await setIconUnlock();
-				return { success: true, message: 'Unlock icon set.' };
-			}
-
-			default: {
-				return undefined;
-			}
-		}
-	} catch (error: any) {
-		log.error('Error handling message:', false, error);
-		return {
-			success: false,
-			error: error?.message || 'Unknown error occurred.'
-		};
-	}
-}
diff --git a/packages/yakkl-wallet/src/lib/common/listeners/background/secureListener.ts b/packages/yakkl-wallet/src/lib/common/listeners/background/secureListener.ts
index 6b54742..4ea7335 100644
--- a/packages/yakkl-wallet/src/lib/common/listeners/background/secureListener.ts
+++ b/packages/yakkl-wallet/src/lib/common/listeners/background/secureListener.ts
@@ -1,6 +1,6 @@
 // // File: src/background/secureListener.ts
 // import { log } from '$lib/common/logger-wrapper';
-// import browser, { type Runtime } from 'webextension-polyfill';
+// import browser, { type Runtime } from '$lib/types/browser-types';
 // import type { SessionToken } from '$lib/common/interfaces';
 // import { decryptData } from '$lib/common/encryption';
 // import { isEncryptedData } from '$lib/common/misc';
diff --git a/packages/yakkl-wallet/src/lib/common/listeners/background/simulationMethodHandler.ts b/packages/yakkl-wallet/src/lib/common/listeners/background/simulationMethodHandler.ts
index 650c377..2dce0a4 100644
--- a/packages/yakkl-wallet/src/lib/common/listeners/background/simulationMethodHandler.ts
+++ b/packages/yakkl-wallet/src/lib/common/listeners/background/simulationMethodHandler.ts
@@ -3,7 +3,7 @@
 import { log } from '$lib/managers/Logger';
 import { getYakklCurrentlySelected } from '$lib/common/stores';
 import { sendErrorResponse } from '$contexts/background/extensions/chrome/errorResponseHandler';
-import type { Runtime } from 'webextension-polyfill';
+import type { Runtime } from '$lib/types/browser-types';
 import type { YakklResponse } from '$lib/common/interfaces';
 
 /**
diff --git a/packages/yakkl-wallet/src/lib/common/listeners/background/tabListeners.ts b/packages/yakkl-wallet/src/lib/common/listeners/background/tabListeners.ts
index c4dd312..7cbe8ef 100644
--- a/packages/yakkl-wallet/src/lib/common/listeners/background/tabListeners.ts
+++ b/packages/yakkl-wallet/src/lib/common/listeners/background/tabListeners.ts
@@ -1,9 +1,9 @@
 // import { browserSvelte, browser_ext } from "$lib/common/environment";
-import browser from 'webextension-polyfill';
+import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
 import { isBlacklisted } from '$contexts/background/extensions/chrome/database';
 import { portsExternal } from '$contexts/background/extensions/chrome/ports';
 import { log } from '$lib/managers/Logger';
-import type { Tabs } from 'webextension-polyfill';
+import type { Tabs } from '$lib/types/browser-types';
 import { activeTabBackgroundStore, activeTabUIStore } from '$lib/common/stores';
 import { get } from 'svelte/store';
 import { setObjectInLocalStorage } from '$lib/common/storage';
@@ -12,7 +12,7 @@ import { MessageType } from '$lib/common/types';
 import type { WindowFocusData } from '$lib/common/types';
 
 // This should be backend only
-const browser_ext = browser;
+const browser_ext = getBrowserExt();
 
 export async function onTabActivatedListener(activeInfo: Tabs.OnActivatedActiveInfoType) {
 	try {
diff --git a/packages/yakkl-wallet/src/lib/common/listeners/background/unifiedMessageListener.ts b/packages/yakkl-wallet/src/lib/common/listeners/background/unifiedMessageListener.ts
index d2b596a..f8e6a34 100644
--- a/packages/yakkl-wallet/src/lib/common/listeners/background/unifiedMessageListener.ts
+++ b/packages/yakkl-wallet/src/lib/common/listeners/background/unifiedMessageListener.ts
@@ -1,1210 +1,985 @@
-// unified-message-handler.ts
-// This file handles all message routing in the extension, combining the original
-// sender-based system with the new port-based architecture for better connection tracking
-
-import { log } from '$lib/common/logger-wrapper';
+import { log } from '$plugins/Logger';
 import browser from 'webextension-polyfill';
 import type { Runtime } from 'webextension-polyfill';
 import type { SessionToken } from '$lib/common/interfaces';
 import type { YakklResponse } from '$lib/common/interfaces';
 import { getSafeUUID } from '$lib/common/uuid';
-import { requestManager } from '$contexts/background/extensions/chrome/requestManager';
-import { getSigningManager } from '$contexts/background/extensions/chrome/signingManager';
+import { requestManager } from '$lib/extensions/chrome/requestManager';
+import { signingManager } from '$lib/extensions/chrome/signingManager';
 import { getYakklCurrentlySelected } from '$lib/common/stores';
-import { showEIP6963Popup } from '$contexts/background/extensions/chrome/eip-6963';
-import type { BackgroundPendingRequest } from '$contexts/background/extensions/chrome/background';
+import { showEIP6963Popup } from '$lib/extensions/chrome/eip-6963';
+import type { BackgroundPendingRequest } from '$lib/extensions/chrome/background';
 import { decryptData } from '$lib/common/encryption';
 import { isEncryptedData } from '$lib/common/misc';
-import { showPopup } from '$contexts/background/extensions/chrome/ui';
-import { SingletonWindowManager } from '$lib/managers/SingletonWindowManager';
-import { startLockIconTimer, stopLockIconTimer } from '$contexts/background/extensions/chrome/iconTimer';
+import { showPopup } from '$lib/extensions/chrome/ui';
+import { startLockIconTimer, stopLockIconTimer } from '$lib/extensions/chrome/iconTimer';
 import { setIconLock, setIconUnlock } from '$lib/utilities';
 import { isBackgroundContext } from '$lib/common/backgroundSecurity';
-import { sessionPortManager } from '$lib/managers/SessionPortManager';
-import {
-	requestManager as newRequestManager,
-	type ExtendedBackgroundPendingRequest
-} from '$lib/managers/RequestManager';
-import { backgroundJWTManager } from '$lib/utilities/jwt-background';
-import { handleMessage } from '$contexts/background/handlers/MessageHandler';
-
-// Interface for tracking active tabs
+
 interface ActiveTab {
-	tabId: number;
-	windowId: number;
-	windowType: string;
-	url?: string;
-	title?: string;
-	favIconUrl?: string;
-	dateTime: string;
+  tabId: number;
+  windowId: number;
+  windowType: string;
+  url?: string;
+  title?: string;
+  favIconUrl?: string;
+  dateTime: string;
 }
 
-// Message type constants for routing
+// Message type constants
 export const EIP6963_REQUEST = 'EIP6963_REQUEST';
 export const EIP6963_RESPONSE = 'EIP6963_RESPONSE';
 export const EIP6963_ANNOUNCE = 'EIP6963_ANNOUNCE';
 export const SECURITY_MESSAGE = 'SECURITY_MESSAGE';
 export const RUNTIME_MESSAGE = 'RUNTIME_MESSAGE';
 
-// Session management configuration and state
+// Session management
 const SESSION_TIMEOUT_MS = 15 * 60 * 1000; // 15 minutes
-const JWT_EXPIRATION_MINUTES = 60; // 60 minutes for JWT tokens
-let isClientReady = false; // Flag to check if the client is ready before sending messages
+let isClientReady = false; // Flag to check if the client is ready before sending messages from background to client
 let sessionToken: SessionToken | null = null;
 let memoryHash: string | null = null;
-const sessionPorts = new Map<string, Runtime.Port>(); // Original session port storage
+const sessionPorts = new Map<string, Runtime.Port>();
 const memoryHashes = new Map<string, string>();
-let currentProfileData: { userId?: string; username?: string; profileId?: string } = {};
-
-// Generates a new session token with JWT
-async function generateSessionToken(): Promise<SessionToken> {
-	try {
-		// Generate JWT token if we have profile data
-		if (currentProfileData.userId && currentProfileData.username && currentProfileData.profileId) {
-			const jwtToken = await backgroundJWTManager.generateToken(
-				currentProfileData.userId,
-				currentProfileData.username,
-				currentProfileData.profileId,
-				'basic', // Default plan level
-				undefined, // Let it generate session ID
-				JWT_EXPIRATION_MINUTES
-			);
-			
-			const expiresAt = Date.now() + JWT_EXPIRATION_MINUTES * 60 * 1000;
-			return { token: jwtToken, expiresAt };
-		}
-	} catch (error) {
-		log.warn('Failed to generate JWT token, falling back to simple token', false, error);
-	}
-	
-	// Fallback to simple token
-	const token = getSafeUUID();
-	const expiresAt = Date.now() + SESSION_TIMEOUT_MS;
-	return { token, expiresAt };
+
+function generateSessionToken(): SessionToken {
+  const token = getSafeUUID();
+  const expiresAt = Date.now() + SESSION_TIMEOUT_MS;
+  return { token, expiresAt };
 }
 
-// Clears the current session data
 function clearSession(reason: string) {
-	sessionToken = null;
-	memoryHash = null;
+  sessionToken = null;
+  memoryHash = null;
 }
 
-// Original port registration function enhanced to work with both systems
+// Add port registration function
 function registerSessionPort(port: Runtime.Port, requestId: string) {
-	try {
-		log.info('Attempting to register port', false, {
-			requestId,
-			portName: port?.name,
-			portType: typeof port,
-			hasOnDisconnect: !!port?.onDisconnect,
-			hasOnMessage: !!port?.onMessage
-		});
-
-		if (!port || !requestId) {
-			log.error('Invalid port or requestId', false, {
-				port: port ? { name: port.name, type: typeof port } : null,
-				requestId
-			});
-			return { success: false, error: 'Invalid port or requestId' };
-		}
-
-		// Check if port is already registered in original system
-		if (sessionPorts.has(requestId)) {
-			const existingPort = sessionPorts.get(requestId);
-			log.warn('Port already registered for requestId', false, {
-				requestId,
-				existingPortName: existingPort?.name,
-				newPortName: port.name
-			});
-			return { success: false, error: 'Port already registered' };
-		}
-
-		// Store the port in original system
-		sessionPorts.set(requestId, port);
-
-		// Also register with the new session port manager for enhanced tracking
-		sessionPortManager.registerSessionPort({ requestId }, port);
-
-		log.info('Port registered successfully', false, {
-			requestId,
-			portName: port.name,
-			totalPorts: sessionPorts.size
-		});
-
-		return { success: true };
-	} catch (error) {
-		log.error('Error registering port', false, {
-			error: error instanceof Error ? error.message : 'Unknown error',
-			requestId,
-			port: port ? { name: port.name, type: typeof port } : null,
-			stack: error instanceof Error ? error.stack : undefined
-		});
-		return { success: false, error: error instanceof Error ? error.message : 'Unknown error' };
-	}
+  try {
+    log.info('Attempting to register port', false, {
+      requestId,
+      portName: port?.name,
+      portType: typeof port,
+      hasOnDisconnect: !!port?.onDisconnect,
+      hasOnMessage: !!port?.onMessage
+    });
+
+    if (!port || !requestId) {
+      log.error('Invalid port or requestId', false, {
+        port: port ? { name: port.name, type: typeof port } : null,
+        requestId
+      });
+      return { success: false, error: 'Invalid port or requestId' };
+    }
+
+    // Check if port is already registered
+    if (sessionPorts.has(requestId)) {
+      const existingPort = sessionPorts.get(requestId);
+      log.warn('Port already registered for requestId', false, {
+        requestId,
+        existingPortName: existingPort?.name,
+        newPortName: port.name
+      });
+      return { success: false, error: 'Port already registered' };
+    }
+
+    // Store the port
+    sessionPorts.set(requestId, port);
+    log.info('Port registered successfully', false, {
+      requestId,
+      portName: port.name,
+      totalPorts: sessionPorts.size
+    });
+
+    return { success: true };
+  } catch (error) {
+    log.error('Error registering port', false, {
+      error: error instanceof Error ? error.message : 'Unknown error',
+      requestId,
+      port: port ? { name: port.name, type: typeof port } : null,
+      stack: error instanceof Error ? error.stack : undefined
+    });
+    return { success: false, error: error instanceof Error ? error.message : 'Unknown error' };
+  }
 }
 
-// Validates the current session token
-async function validateSession(token: string, scope: string): Promise<void> {
-	try {
-		if (!sessionToken || Date.now() > sessionToken.expiresAt) {
-			log.warn('Session validation failed', false, {
-				reason: !sessionToken ? 'No session token' : 'Token expired',
-				expiresAt: sessionToken?.expiresAt,
-				currentTime: Date.now()
-			});
-			clearSession('Token expired or missing');
-			throw new Error('Session expired');
-		}
-		
-		// Try JWT validation first
-		const isJWT = token.includes('.');
-		if (isJWT) {
-			const isValid = await backgroundJWTManager.validateToken(token);
-			if (!isValid) {
-				log.warn(`JWT validation failed for ${scope}`, false);
-				throw new Error('Invalid JWT token');
-			}
-		} else if (sessionToken.token !== token) {
-			log.warn(`Unauthorized access to ${scope}`, false, {
-				providedToken: token,
-				expectedToken: sessionToken.token
-			});
-			throw new Error('Unauthorized');
-		}
-		
-		if (!memoryHash) {
-			log.warn('Memory hash missing during session validation', false);
-			throw new Error('Memory hash missing');
-		}
-	} catch (error) {
-		log.error('Session validation error', false, {
-			error: error instanceof Error ? error.message : 'Unknown error',
-			scope,
-			token
-		});
-		throw error;
-	}
+function validateSession(token: string, scope: string): void {
+  try {
+    if (!sessionToken || Date.now() > sessionToken.expiresAt) {
+      log.warn('Session validation failed', false, {
+        reason: !sessionToken ? 'No session token' : 'Token expired',
+        expiresAt: sessionToken?.expiresAt,
+        currentTime: Date.now()
+      });
+      clearSession('Token expired or missing');
+      throw new Error('Session expired');
+    }
+    if (sessionToken.token !== token) {
+      log.warn(`Unauthorized access to ${scope}`, false, {
+        providedToken: token,
+        expectedToken: sessionToken.token
+      });
+      throw new Error('Unauthorized');
+    }
+    if (!memoryHash) {
+      log.warn('Memory hash missing during session validation', false);
+      throw new Error('Memory hash missing');
+    }
+  } catch (error) {
+    log.error('Session validation error', false, {
+      error: error instanceof Error ? error.message : 'Unknown error',
+      scope,
+      token
+    });
+    throw error;
+  }
 }
 
-// Decrypts data in the background context
 export async function decryptDataBackground(payload: any, token: string): Promise<any> {
-	// Verify this is being called from the background context
-	if (!isBackgroundContext()) {
-		throw new Error('Unauthorized context');
-	}
-
-	await validateSession(token, 'decryption');
-	if (!isEncryptedData(payload)) {
-		log.warn('Invalid encrypted data structure');
-		throw new Error('Decryption failed');
-	}
-	return await decryptData(payload, memoryHash!);
+  // Verify this is being called from the background context
+  if (!isBackgroundContext()) {
+    throw new Error('Unauthorized context');
+  }
+
+  validateSession(token, 'decryption');
+  if (!isEncryptedData(payload)) {
+    log.warn('Invalid encrypted data structure');
+    throw new Error('Decryption failed');
+  }
+  return await decryptData(payload, memoryHash!);
 }
 
-// New port-based message handler that works with the unified port architecture
-export async function onUnifiedPortMessageListener(
-	message: any,
-	port: Runtime.Port
-): Promise<void> {
-	try {
-		const { id: requestId, method, type, action } = message;
-
-		log.debug('Unified port handler received message', false, {
-			requestId: requestId,
-			method: method,
-			type: type,
-			action: action,
-			portName: port.name
-		});
-
-		// Handle session port registration with new connection ID system
-		if (type === 'REGISTER_SESSION_PORT') {
-			const connectionId = sessionPortManager.registerSessionPort(message, port);
-
-			// Also register in original system for backward compatibility
-			registerSessionPort(port, message.requestId);
-
-			port.postMessage({
-				type: 'SESSION_PORT_REGISTERED',
-				connectionId: connectionId,
-				requestId: message.requestId,
-				portName: port.name
-			});
-
-			log.info('Session port registered', false, {
-				connectionId: connectionId,
-				requestId: message.requestId,
-				portName: port.name
-			});
-			return;
-		}
-
-		// Handle session port requests with new system
-		if (type === 'REQUEST_SESSION_PORT') {
-			const sessionInfo = sessionPortManager.getSessionInfo(message.requestId);
-
-			// Fall back to original system if needed
-			if (!sessionInfo) {
-				const originalPort = sessionPorts.get(message.requestId);
-				if (originalPort) {
-					port.postMessage({
-						type: 'SESSION_PORT_INFO',
-						sessionInfo: {
-							connectionId: 'legacy',
-							portName: originalPort.name,
-							requestId: message.requestId
-						},
-						requestId: message.requestId
-					});
-					return;
-				}
-			}
-
-			if (sessionInfo) {
-				port.postMessage({
-					type: 'SESSION_PORT_INFO',
-					sessionInfo: sessionInfo,
-					requestId: message.requestId
-				});
-			} else {
-				port.postMessage({
-					type: 'SESSION_PORT_NOT_FOUND',
-					requestId: message.requestId,
-					error: 'No session found for this request ID'
-				});
-			}
-
-			log.info('Session info request handled', false, {
-				requestId: message.requestId,
-				found: !!sessionInfo
-			});
-			return;
-		}
-
-		// For all other messages, convert port to sender format and call original handler
-		const sender: Runtime.MessageSender = {
-			tab: port.sender?.tab,
-			id: port.sender?.id,
-			url: port.sender?.url,
-			frameId: port.sender?.frameId
-		};
-
-		// Create an augmented sender with port for handlers that need it
-		const senderWithPort = Object.assign({}, sender, { port });
-
-		// Call the original message listener
-		const result = await onUnifiedMessageListener(message, senderWithPort);
-
-		// If the original handler returned a result, send it back through the port
-		if (result !== undefined) {
-			port.postMessage(result);
-		}
-	} catch (error) {
-		log.error('Error in unified port message handler', false, {
-			error,
-			message,
-			portName: port.name
-		});
-
-		// Send error response if we have a request ID
-		if (message.id) {
-			port.postMessage({
-				type: 'ERROR_RESPONSE',
-				id: message.id,
-				error: {
-					code: -32603,
-					message: error instanceof Error ? error.message : 'Internal error'
-				}
-			});
-		}
-	}
+// Update handleRequestSessionPort to use the consolidated session ports
+async function handleRequestSessionPort(requestId: string) {
+  try {
+    if (!requestId) {
+      log.error('No request ID provided', false, { requestId });
+      return { success: false, error: 'No request ID provided' };
+    }
+
+    const port = sessionPorts.get(requestId);
+    if (!port) {
+      log.warn('No port found for request ID', false, { requestId });
+      return { success: false, error: 'No port found for request' };
+    }
+
+    // Check if the port is still connected
+    if (!port.name) {
+      log.warn('Port has no name, may be disconnected', false, { requestId });
+      sessionPorts.delete(requestId);
+      return { success: false, error: 'Port disconnected' };
+    }
+
+    log.debug('Session port found', false, { requestId, portName: port.name });
+    return { success: true, portName: port.name };
+  } catch (error) {
+    log.error('Error handling request session port', false, { error, requestId });
+    return { success: false, error: error instanceof Error ? error.message : 'Unknown error' };
+  }
 }
 
-// Alias for consistency with naming conventions
-export const onUnifiedMessageHandler = onUnifiedPortMessageListener;
-
-// Original unified message listener that handles all message types
+// Unified message handler
 export async function onUnifiedMessageListener(
-	message: any,
-	sender: Runtime.MessageSender & { port?: Runtime.Port }
+  message: any,
+  sender: Runtime.MessageSender
 ): Promise<any> {
-	try {
-		const { id: requestId, method, type } = message;
-
-		log.debug('onUnifiedMessageListener - Received message', false, { message, sender });
-
-		// Popout messages
-		if (message.type === 'popout') {
-			return await handleRuntimeMessage(message, sender);
-		}
-
-		// Client ready messages
-		if (message.type === 'clientReady') {
-			return { success: true, message: 'Client ready acknowledged' };
-		}
-
-		// Security messages
-		if (message.type === SECURITY_MESSAGE) {
-			return await handleSecurityMessage(message, sender);
-		}
-
-		// EIP-6963 messages (all variations)
-		// Check if this is an external dApp request (not from the extension itself)
-		const isExternalRequest = !sender?.url?.startsWith('chrome-extension://') && !sender?.url?.startsWith('extension://');
-		
-		// Log internal eth_ calls that would have been incorrectly routed
-		if (!isExternalRequest && message.method?.startsWith('eth_')) {
-			log.debug('Skipping internal eth_ call from extension:', false, {
-				method: message.method,
-				senderUrl: sender?.url,
-				messageType: message.type
-			});
-		}
-		
-		if (
-			message.type === EIP6963_REQUEST ||
-			message.type === EIP6963_RESPONSE ||
-			message.type === EIP6963_ANNOUNCE ||
-			message.type === 'YAKKL_REQUEST:EIP6963' ||
-			message.type === 'YAKKL_RESPONSE:EIP6963' ||
-			message.type === 'YAKKL_EVENT:EIP6963' ||
-			message.type === 'YAKKL_REQUEST:EIP1193' ||
-			message.type === 'YAKKL_RESPONSE:EIP1193' ||
-			message.type === 'YAKKL_EVENT:EIP1193' ||
-			(isExternalRequest && message.method?.startsWith('eth_'))
-		) {
-			// Use the new request manager when we have proper connection tracking
-			if (message.id && sender.port) {
-				const connectionId = sessionPortManager.getSessionInfo(message.id)?.connectionId;
-				newRequestManager.addRequest(
-					message.id,
-					{
-						data: message,
-						port: sender.port,
-						resolve: () => {},
-						reject: () => {}
-					} as ExtendedBackgroundPendingRequest,
-					connectionId
-				);
-			}
-
-			return await handleEIP6963Message(message, sender);
-		}
-
-		// Runtime messages
-		if (
-			message.type === RUNTIME_MESSAGE ||
-			message.type === 'getActiveTab' ||
-			message.type === 'YAKKL_STATE_CHANGE' ||
-			message.type === 'SET_PANEL_BEHAVIOR' ||
-			message.type === 'clipboard-timeout' ||
-			message.type === 'startPricingChecks' ||
-			message.type === 'stopPricingChecks'
-		) {
-			return await handleRuntimeMessage(message, sender);
-		}
-
-		// Session messages
-		if (
-			message.type === 'REQUEST_SESSION_PORT' ||
-			message.type === 'REGISTER_SESSION_PORT' ||
-			message.type === 'UNREGISTER_SESSION_PORT' ||
-			message.type === 'STORE_SESSION_HASH' ||
-			message.type === 'REFRESH_SESSION' ||
-			message.type === 'SESSION_TOKEN_BROADCAST'
-		) {
-			return await handleSecurityMessage(message, sender);
-		}
-
-		// Signing messages
-		if (
-			message.type === 'SIGNING_RESPONSE' ||
-			message.type?.includes('personal_sign') ||
-			message.type?.includes('eth_signTypedData_v4')
-		) {
-			return await handleSigningMessage(message, sender);
-		}
-
-		// Security config messages
-		if (
-			message.type === 'YAKKL_SECURITY_CONFIG_UPDATE' ||
-			message.type === 'SECURITY_CONFIG_UPDATE'
-		) {
-			return await handleSecurityMessage(message, sender);
-		}
-
-		// Handle messages with 'yakkl_' prefix using the MessageHandler
-		if (message.type && message.type.startsWith('yakkl_')) {
-			log.debug('Routing yakkl_ message to MessageHandler', false, { type: message.type });
-			return await handleMessage(message, sender);
-		}
-
-		// log.warn('Unknown message type', false, { message });
-		return { success: false, error: 'Message type not handled in this listener' };
-	} catch (error) {
-		log.error('Error in unified message listener', false, error);
-		return { success: false, error: error instanceof Error ? error.message : 'Unknown error' };
-	}
+  try {
+    const { id: requestId, method, type } = message;
+
+    log.debug('Received message', false, { message, sender });
+
+    // Popout messages
+    if (message.type === 'popout') {
+      return await handleRuntimeMessage(message, sender);
+    }
+
+    // Client ready messages
+    if (message.type === 'clientReady') {
+      return { success: true, message: 'Client ready acknowledged' };
+    }
+
+    // Security messages
+    if (message.type === SECURITY_MESSAGE) {
+      return await handleSecurityMessage(message, sender);
+    }
+
+    // EIP-6963 messages
+    if (message.type === EIP6963_REQUEST ||
+        message.type === EIP6963_RESPONSE ||
+        message.type === EIP6963_ANNOUNCE ||
+        message.type === 'YAKKL_REQUEST:EIP6963' ||
+        message.type === 'YAKKL_RESPONSE:EIP6963' ||
+        message.type === 'YAKKL_EVENT:EIP6963' ||
+        message.type === 'YAKKL_REQUEST:EIP1193' ||
+        message.type === 'YAKKL_RESPONSE:EIP1193' ||
+        message.type === 'YAKKL_EVENT:EIP1193' ||
+        message.method?.startsWith('eth_')) {
+      return await handleEIP6963Message(message, sender);
+    }
+
+    // Runtime messages
+    if (message.type === RUNTIME_MESSAGE ||
+        message.type === 'getActiveTab' ||
+        message.type === 'YAKKL_STATE_CHANGE' ||
+        message.type === 'SET_PANEL_BEHAVIOR' ||
+        message.type === 'clipboard-timeout' ||
+        message.type === 'lockdown' ||
+        message.type === 'lockdownImminent' ||
+        message.type === 'startPricingChecks' ||
+        message.type === 'stopPricingChecks') {
+      return await handleRuntimeMessage(message, sender);
+    }
+
+    // Session messages
+    if (message.type === 'REQUEST_SESSION_PORT' ||
+        message.type === 'REGISTER_SESSION_PORT' ||
+        message.type === 'UNREGISTER_SESSION_PORT' ||
+        message.type === 'STORE_SESSION_HASH' ||
+        message.type === 'REFRESH_SESSION' ||
+        message.type === 'SESSION_TOKEN_BROADCAST') {
+      return await handleSecurityMessage(message, sender);
+    }
+
+    // Signing messages
+    if (message.type === 'SIGNING_RESPONSE' ||
+        message.type?.includes('personal_sign') ||
+        message.type?.includes('eth_signTypedData_v4')) {
+      return await handleSigningMessage(message, sender);
+    }
+
+    // Security config messages
+    if (message.type === 'YAKKL_SECURITY_CONFIG_UPDATE' ||
+        message.type === 'SECURITY_CONFIG_UPDATE') {
+      return await handleSecurityMessage(message, sender);
+    }
+
+    log.warn('Unknown message type', false, { message });
+    return { success: false, error: 'Unknown message type' };
+  } catch (error) {
+    log.error('Error in unified message listener', false, error);
+    return { success: false, error: error instanceof Error ? error.message : 'Unknown error' };
+  }
 }
 
-// Handles all security-related messages
-async function handleSecurityMessage(
-	message: any,
-	sender: Runtime.MessageSender & { port?: Runtime.Port }
-) {
-	try {
-		log.info('Security message received:', false, {
-			type: message?.type,
-			action: message?.action,
-			hasPayload: !!message?.payload,
-			hasToken: !!message?.token,
-			requestId: message?.requestId
-		});
-
-		// Handle REQUEST_SESSION_PORT
-		if (message?.type === 'REQUEST_SESSION_PORT') {
-			const requestId = message.requestId;
-			if (!requestId) {
-				log.error('No requestId provided for REQUEST_SESSION_PORT', false);
-				return { success: false, error: 'No requestId provided' };
-			}
-
-			// Check both the new and original session management systems
-			const newSessionInfo = sessionPortManager.getSessionInfo(requestId);
-
-			log.info('handleSecurityMessage - New session info:', false, newSessionInfo);
-
-			if (newSessionInfo) {
-				return { success: true, portName: newSessionInfo.portName };
-			}
-
-			// Fall back to original system
-			const existingPort = sessionPorts.get(requestId);
-
-			log.info('handleSecurityMessage - Existing port:', false, existingPort);
-
-			if (existingPort) {
-				log.info('Found existing port for requestId', false, {
-					requestId,
-					portName: existingPort.name
-				});
-				return { success: true, portName: existingPort.name };
-			}
-
-			// If no existing port, try to register the sender's port
-			if (sender.port) {
-				const registrationResult = registerSessionPort(sender.port, requestId);
-
-				log.info('handleSecurityMessage - Registration result:', false, registrationResult);
-
-				if (registrationResult.success) {
-					return { success: true, portName: sender.port.name };
-				}
-			}
-
-			log.warn('No port found for request', false, { requestId });
-			return { success: false, error: 'No port found for request' };
-		}
-
-		// Handle REGISTER_SESSION_PORT
-		if (message?.type === 'REGISTER_SESSION_PORT') {
-			if (!message.requestId || !message.port) {
-				log.error('Invalid REGISTER_SESSION_PORT request', false, {
-					requestId: message?.requestId,
-					hasPort: !!message?.port
-				});
-				return { success: false, error: 'Invalid request' };
-			}
-
-			return registerSessionPort(message.port, message.requestId);
-		}
-
-		// Handle UNREGISTER_SESSION_PORT
-		if (message?.type === 'UNREGISTER_SESSION_PORT') {
-			if (!message.requestId) {
-				log.error('No requestId provided for UNREGISTER_SESSION_PORT', false);
-				return { success: false, error: 'No requestId provided' };
-			}
-
-			unregisterPort(message.requestId);
-			// Also unregister from new system
-			sessionPortManager.removeRequest(message.requestId);
-			return { success: true };
-		}
-
-		// Handle STORE_SESSION_HASH
-		if (message?.type === 'STORE_SESSION_HASH') {
-			if (!message.payload || typeof message.payload !== 'string') {
-				log.error('Invalid payload for STORE_SESSION_HASH', false);
-				return { success: false, error: 'Invalid payload' };
-			}
-
-			memoryHash = message.payload;
-			
-			// Store profile data if provided with the hash
-			if (message.profileData) {
-				currentProfileData = message.profileData;
-			}
-			
-			sessionToken = await generateSessionToken();
-
-			// Send broadcast after returning response
-			setTimeout(async () => {
-				await browser.runtime.sendMessage({
-					type: 'SESSION_TOKEN_BROADCAST',
-					token: sessionToken.token,
-					expiresAt: sessionToken.expiresAt
-				});
-			}, 0);
-
-			return {
-				success: true,
-				token: sessionToken.token,
-				expiresAt: sessionToken.expiresAt
-			};
-		}
-
-		// Handle REFRESH_SESSION
-		if (message?.type === 'REFRESH_SESSION') {
-			if (sessionToken && message.token === sessionToken.token) {
-				sessionToken.expiresAt = Date.now() + SESSION_TIMEOUT_MS;
-				return {
-					success: true,
-					token: sessionToken.token,
-					expiresAt: sessionToken.expiresAt
-				};
-			} else {
-				clearSession('Invalid or expired refresh request');
-				return { success: false, error: 'Unauthorized' };
-			}
-		}
-
-		// Handle SESSION_TOKEN_BROADCAST
-		if (message?.type === 'SESSION_TOKEN_BROADCAST') {
-			// This is handled by the client context
-			return undefined;
-		}
-
-		// Handle other security messages
-		if (message?.type === SECURITY_MESSAGE) {
-			// Add handling for other security messages here
-			return undefined;
-		}
-
-		// If no handler found, return undefined to let other listeners handle it
-		return undefined;
-	} catch (error) {
-		log.error('Error handling security message', false, {
-			error: error instanceof Error ? error.message : 'Unknown error',
-			message: message?.type,
-			requestId: message?.requestId
-		});
-		return {
-			success: false,
-			error: error instanceof Error ? error.message : 'Unknown error'
-		};
-	}
+// Security message handler
+async function handleSecurityMessage(message: any, sender: Runtime.MessageSender & { port?: Runtime.Port }) {
+  try {
+    log.info('Security message received:', false, {
+      type: message?.type,
+      action: message?.action,
+      hasPayload: !!message?.payload,
+      hasToken: !!message?.token,
+      requestId: message?.requestId
+    });
+
+    // Handle REQUEST_SESSION_PORT
+    if (message?.type === 'REQUEST_SESSION_PORT') {
+      const requestId = message.requestId;
+      if (!requestId) {
+        log.error('No requestId provided for REQUEST_SESSION_PORT', false);
+        return { success: false, error: 'No requestId provided' };
+      }
+
+      // First check if the port is already registered
+      const existingPort = sessionPorts.get(requestId);
+      if (existingPort) {
+        log.info('Found existing port for requestId', false, {
+          requestId,
+          portName: existingPort.name
+        });
+        return { success: true, portName: existingPort.name };
+      }
+
+      // If no existing port, try to register the sender's port
+      if (sender.port) {
+        const registrationResult = registerSessionPort(sender.port, requestId);
+        if (registrationResult.success) {
+          return { success: true, portName: sender.port.name };
+        }
+      }
+
+      log.warn('No port found for request', false, { requestId });
+      return { success: false, error: 'No port found for request' };
+    }
+
+    // Handle REGISTER_SESSION_PORT
+    if (message?.type === 'REGISTER_SESSION_PORT') {
+      if (!message.requestId || !message.port) {
+        log.error('Invalid REGISTER_SESSION_PORT request', false, {
+          requestId: message?.requestId,
+          hasPort: !!message?.port
+        });
+        return { success: false, error: 'Invalid request' };
+      }
+
+      return registerSessionPort(message.port, message.requestId);
+    }
+
+    // Handle UNREGISTER_SESSION_PORT
+    if (message?.type === 'UNREGISTER_SESSION_PORT') {
+      if (!message.requestId) {
+        log.error('No requestId provided for UNREGISTER_SESSION_PORT', false);
+        return { success: false, error: 'No requestId provided' };
+      }
+
+      unregisterPort(message.requestId);
+      return { success: true };
+    }
+
+    // Handle STORE_SESSION_HASH
+    if (message?.type === 'STORE_SESSION_HASH') {
+      if (!message.payload || typeof message.payload !== 'string') {
+        log.error('Invalid payload for STORE_SESSION_HASH', false);
+        return { success: false, error: 'Invalid payload' };
+      }
+
+      memoryHash = message.payload;
+      sessionToken = generateSessionToken();
+
+      // Send broadcast after returning response
+      setTimeout(async () => {
+        await browser.runtime.sendMessage({
+          type: 'SESSION_TOKEN_BROADCAST',
+          token: sessionToken.token,
+          expiresAt: sessionToken.expiresAt
+        });
+      }, 0);
+
+      return {
+        success: true,
+        token: sessionToken.token,
+        expiresAt: sessionToken.expiresAt
+      };
+    }
+
+    // Handle REFRESH_SESSION
+    if (message?.type === 'REFRESH_SESSION') {
+      if (sessionToken && message.token === sessionToken.token) {
+        sessionToken.expiresAt = Date.now() + SESSION_TIMEOUT_MS;
+        return {
+          success: true,
+          token: sessionToken.token,
+          expiresAt: sessionToken.expiresAt
+        };
+      } else {
+        clearSession('Invalid or expired refresh request');
+        return { success: false, error: 'Unauthorized' };
+      }
+    }
+
+    // Handle SESSION_TOKEN_BROADCAST
+    if (message?.type === 'SESSION_TOKEN_BROADCAST') {
+      // This is handled by the client context
+      return undefined;
+    }
+
+    // Handle other security messages
+    if (message?.type === SECURITY_MESSAGE) {
+      // Add handling for other security messages here
+      return undefined;
+    }
+
+    // If no handler found, return undefined to let other listeners handle it
+    return undefined;
+
+  } catch (error) {
+    log.error('Error handling security message', false, {
+      error: error instanceof Error ? error.message : 'Unknown error',
+      message: message?.type,
+      requestId: message?.requestId
+    });
+    return {
+      success: false,
+      error: error instanceof Error ? error.message : 'Unknown error'
+    };
+  }
 }
 
-// Handles all EIP-6963 and EIP-1193 related messages
-async function handleEIP6963Message(message: any, sender: Runtime.MessageSender): Promise<any> {
-	try {
-		const requestId = message.id || getSafeUUID();
-		const origin = getRequestOrigin(message, sender);
-
-		// Handle EIP-1193 methods
-		if (message.method?.startsWith('eth_')) {
-			return await handleEIP1193Method(message, sender, requestId);
-		}
-
-		// Handle EIP-6963 requests
-		if (EIP6963_REQUEST === message.type) {
-			return await handleEIP6963Request(message, sender, requestId, origin);
-		}
-
-		// Handle EIP-6963 responses
-		if (EIP6963_RESPONSE === message.type) {
-			return await handleEIP6963Response(message, sender, requestId, origin);
-		}
-
-		// Handle EIP-6963 events
-		if (EIP6963_ANNOUNCE === message.type) {
-			return await handleEIP6963Event(message, sender, requestId, origin);
-		}
-
-		return undefined;
-	} catch (error) {
-		log.error('Error handling EIP-6963 message:', false, error);
-		return {
-			type: EIP6963_RESPONSE,
-			error: {
-				code: -32603,
-				message: error instanceof Error ? error.message : 'EIP-6963 error'
-			}
-		};
-	}
+// EIP-6963 message handler
+async function handleEIP6963Message(
+  message: any,
+  sender: Runtime.MessageSender
+): Promise<any> {
+  try {
+    const requestId = message.id || getSafeUUID();
+    const origin = getRequestOrigin(message, sender);
+
+    // Handle EIP-1193 methods
+    if (message.method?.startsWith('eth_')) {
+      return await handleEIP1193Method(message, sender, requestId);
+    }
+
+    // Handle EIP-6963 requests
+    if (EIP6963_REQUEST === message.type) {
+      return await handleEIP6963Request(message, sender, requestId, origin);
+    }
+
+    // Handle EIP-6963 responses
+    if (EIP6963_RESPONSE === message.type) {
+      return await handleEIP6963Response(message, sender, requestId, origin);
+    }
+
+    // Handle EIP-6963 events
+    if (EIP6963_ANNOUNCE === message.type) {
+      return await handleEIP6963Event(message, sender, requestId, origin);
+    }
+
+    return undefined;
+  } catch (error) {
+    log.error('Error handling EIP-6963 message:', false, error);
+    return {
+      type: EIP6963_RESPONSE,
+      error: {
+        code: -32603,
+        message: error instanceof Error ? error.message : 'EIP-6963 error'
+      }
+    };
+  }
 }
 
-// Handles signing-related messages
+// Signing message handler
 async function handleSigningMessage(
-	message: any,
-	sender: Runtime.MessageSender
+  message: any,
+  sender: Runtime.MessageSender
 ): Promise<YakklResponse> {
-	try {
-		if (!message || typeof message !== 'object') {
-			log.warn('Invalid signing message', false, { message });
-			return {
-				type: 'YAKKL_RESPONSE:EIP6963',
-				id: message?.requestId || 'unknown',
-				error: {
-					code: -32602,
-					message: 'Invalid message format'
-				}
-			};
-		}
-
-		const { requestId, type, params, token } = message;
-		if (!requestId || !type || !params || !token) {
-			log.warn('Missing required fields in signing message', false, { message });
-			return {
-				type: 'YAKKL_RESPONSE:EIP6963',
-				id: requestId || 'unknown',
-				error: {
-					code: -32602,
-					message: 'Missing required fields'
-				}
-			};
-		}
-
-		// Validate session token
-		try {
-			await validateSession(token, 'signing');
-		} catch (error) {
-			log.error('Session validation failed', false, { error });
-			return {
-				type: 'YAKKL_RESPONSE:EIP6963',
-				id: requestId,
-				error: {
-					code: -32000,
-					message: error instanceof Error ? error.message : 'Session validation failed'
-				}
-			};
-		}
-
-		// Handle the signing request
-		const signingManagerInstance = await getSigningManager();
-		const result = await signingManagerInstance.handleSigningRequest(
-			requestId,
-			type,
-			params,
-			token
-		);
-		log.info('Signing request completed', false, { result });
-
-		return {
-			type: 'YAKKL_RESPONSE:EIP6963',
-			id: requestId,
-			method: type,
-			result: result.result
-		};
-	} catch (error) {
-		log.error('Error handling signing message', false, { error });
-		return {
-			type: 'YAKKL_RESPONSE:EIP6963',
-			id: message?.requestId || 'unknown',
-			error: {
-				code: -32603,
-				message: error instanceof Error ? error.message : 'Unknown error occurred'
-			}
-		};
-	}
+  try {
+    if (!message || typeof message !== 'object') {
+      log.warn('Invalid signing message', false, { message });
+      return {
+        type: 'YAKKL_RESPONSE:EIP6963',
+        id: message?.requestId || 'unknown',
+        error: {
+          code: -32602,
+          message: 'Invalid message format'
+        }
+      };
+    }
+
+    const { requestId, type, params, token } = message;
+    if (!requestId || !type || !params || !token) {
+      log.warn('Missing required fields in signing message', false, { message });
+      return {
+        type: 'YAKKL_RESPONSE:EIP6963',
+        id: requestId || 'unknown',
+        error: {
+          code: -32602,
+          message: 'Missing required fields'
+        }
+      };
+    }
+
+    // Validate session token
+    try {
+      validateSession(token, 'signing');
+    } catch (error) {
+      log.error('Session validation failed', false, { error });
+      return {
+        type: 'YAKKL_RESPONSE:EIP6963',
+        id: requestId,
+        error: {
+          code: -32000,
+          message: error instanceof Error ? error.message : 'Session validation failed'
+        }
+      };
+    }
+
+    // Handle the signing request
+    const signingManagerInstance = await signingManager;
+    const result = await signingManagerInstance.handleSigningRequest(requestId, type, params, token);
+    log.info('Signing request completed', false, { result });
+
+    return {
+      type: 'YAKKL_RESPONSE:EIP6963',
+      id: requestId,
+      method: type,
+      result: result.result
+    };
+
+  } catch (error) {
+    log.error('Error handling signing message', false, { error });
+    return {
+      type: 'YAKKL_RESPONSE:EIP6963',
+      id: message?.requestId || 'unknown',
+      error: {
+        code: -32603,
+        message: error instanceof Error ? error.message : 'Unknown error occurred'
+      }
+    };
+  }
 }
 
-// Handles runtime messages (tabs, popouts, notifications, etc.)
-async function handleRuntimeMessage(message: any, sender: Runtime.MessageSender): Promise<any> {
-	try {
-		log.info('unifiedMessageListener - handleRuntimeMessage - message:', false, message);
-
-		switch (message.type) {
-			case 'getActiveTab': {
-				try {
-					let activeTab: ActiveTab | null = null;
-					const tabs = await browser.tabs.query({ active: true });
-
-					if (tabs.length > 0) {
-						const realTab = tabs.find((t) => !t.url?.startsWith('chrome-extension://'));
-						if (realTab) {
-							const win = await browser.windows.get(realTab.windowId);
-							activeTab = {
-								tabId: realTab.id,
-								windowId: realTab.windowId,
-								windowType: win.type,
-								url: realTab.url,
-								title: realTab.title,
-								favIconUrl: realTab.favIconUrl,
-								dateTime: new Date().toISOString()
-							};
-						}
-					}
-
-					if (activeTab && activeTab.tabId) {
-						return { success: true, activeTab: activeTab };
-					} else {
-						log.error('No active tab found:', true);
-						return { success: false, error: 'No active tab found.' };
-					}
-				} catch (err) {
-					log.error('Error getting active tab:', true, err);
-					return { success: false, error: err };
-				}
-			}
-
-			case 'popout': {
-				try {
-					await showPopup('', '0');
-					return { success: true };
-				} catch (error) {
-					log.error('Failed to open popup window:', false, error);
-					return { success: false, error: (error as Error).message };
-				}
-			}
-
-			case 'ping': {
-				return { success: true, message: 'Pong' };
-			}
-
-			case 'clipboard-timeout': {
-				// Start the timeout but return immediately
-				setTimeout(async () => {
-					try {
-						browser.scripting.executeScript({
-							target: { tabId: message.tabId },
-							func: async () => {
-								try {
-									await navigator.clipboard.writeText(message.redactText);
-								} catch (error) {
-									log.error('Failed to write to clipboard:', false, error);
-								}
-							}
-						});
-					} catch (error) {
-						log.error('Failed to write to clipboard:', false, error);
-					}
-				}, message.timeout);
-
-				return { success: true, message: 'Clipboard timeout scheduled' };
-			}
-
-			case 'createNotification': {
-				const { notificationId, title, messageText } = message.payload;
-
-				// Testing to see where this may have come from
-				if (title === 'Security Notification') {
-					return { success: false, message: 'Security Notification canceled' };
-				}
-
-				await browser.notifications.create(notificationId as string, {
-					type: 'basic',
-					iconUrl: browser.runtime.getURL('/images/logoBullLock48x48.png'),
-					title: title || 'Notification',
-					message: messageText || 'Default message.'
-				});
-
-				return { success: true, message: 'Notification sent' };
-			}
-
-			case 'startLockIconTimer': {
-				startLockIconTimer();
-				return { success: true, message: 'Lock icon timer started.' };
-			}
-
-			case 'stopLockIconTimer': {
-				stopLockIconTimer();
-				return { success: true, message: 'Lock icon timer stopped.' };
-			}
-
-			case 'setIconLock': {
-				await setIconLock();
-				return { success: true, message: 'Lock icon set.' };
-			}
-
-			case 'setIconUnlock': {
-				await setIconUnlock();
-				return { success: true, message: 'Unlock icon set.' };
-			}
-
-			default: {
-				// Not handled by this listener
-				log.info(
-					'unifiedMessageListener - handleRuntimeMessage - default (passed through):',
-					false,
-					message
-				);
-				return undefined;
-			}
-		}
-	} catch (error: any) {
-		log.error('Error handling runtime message:', false, error);
-		return {
-			success: false,
-			error: error?.message || 'Unknown error occurred.'
-		};
-	}
+// Runtime message handler
+async function handleRuntimeMessage(
+  message: any,
+  sender: Runtime.MessageSender
+): Promise<any> {
+  try {
+    switch (message.type) {
+      case 'getActiveTab': {
+        try {
+          let activeTab: ActiveTab | null = null;
+          const tabs = await browser.tabs.query({ active: true });
+
+          if (tabs.length > 0) {
+            const realTab = tabs.find(t => !t.url?.startsWith('chrome-extension://'));
+            if (realTab) {
+              const win = await browser.windows.get(realTab.windowId);
+              activeTab = {
+                tabId: realTab.id,
+                windowId: realTab.windowId,
+                windowType: win.type,
+                url: realTab.url,
+                title: realTab.title,
+                favIconUrl: realTab.favIconUrl,
+                dateTime: new Date().toISOString()
+              };
+            }
+          }
+
+          if (activeTab && activeTab.tabId) {
+            return { success: true, activeTab: activeTab };
+          } else {
+            log.error('No active tab found:', true);
+            return { success: false, error: 'No active tab found.' };
+          }
+        } catch (err) {
+          log.error('Error getting active tab:', true, err);
+          return { success: false, error: err };
+        }
+      }
+
+      case 'popout': {
+        log.debug('popout:', false, message);
+        showPopup('');
+        return { success: true };
+      }
+
+      case 'ping': {
+        return { success: true, message: 'Pong' };
+      }
+
+      case 'clipboard-timeout': {
+        // Start the timeout but return immediately
+        setTimeout(async () => {
+          try {
+            browser.scripting.executeScript({
+              target: { tabId: message.tabId },
+              func: async () => {
+                try {
+                  await navigator.clipboard.writeText(message.redactText);
+                } catch (error) {
+                  log.error("Failed to write to clipboard:", false, error);
+                }
+              }
+            });
+          } catch (error) {
+            log.error('Failed to write to clipboard:', false, error);
+          }
+        }, message.timeout);
+
+        return { success: true, message: 'Clipboard timeout scheduled' };
+      }
+
+      case 'createNotification': {
+        const { notificationId, title, messageText } = message.payload;
+
+        // Testing to see where this may have come from
+        if (title === 'Security Notification') {
+          return { success: false, message: 'Security Notification canceled' };
+        }
+
+        await browser.notifications.create(notificationId as string, {
+          type: 'basic',
+          iconUrl: browser.runtime.getURL('/images/logoBullLock48x48.png'),
+          title: title || 'Notification',
+          message: messageText || 'Default message.',
+        });
+
+        return { success: true, message: 'Notification sent' };
+      }
+
+      case 'startLockIconTimer': {
+        startLockIconTimer();
+        return { success: true, message: 'Lock icon timer started.' };
+      }
+
+      case 'stopLockIconTimer': {
+        stopLockIconTimer();
+        return { success: true, message: 'Lock icon timer stopped.' };
+      }
+
+      case 'setIconLock': {
+        await setIconLock();
+        return { success: true, message: 'Lock icon set.' };
+      }
+
+      case 'setIconUnlock': {
+        await setIconUnlock();
+        return { success: true, message: 'Unlock icon set.' };
+      }
+
+      default: {
+        // Not handled by this listener
+        return undefined;
+      }
+    }
+  } catch (error: any) {
+    log.error('Error handling runtime message:', false, error);
+    return {
+      success: false,
+      error: error?.message || 'Unknown error occurred.'
+    };
+  }
 }
 
-// Helper function to extract origin from request or sender
+// Helper functions
 function getRequestOrigin(request?: any, sender?: Runtime.MessageSender): string {
-	try {
-		if (request?.origin) return request.origin;
-		if (sender?.url) return new URL(sender.url).origin;
-		if (sender?.tab?.url) return new URL(sender.tab.url).origin;
-		return '';
-	} catch (error) {
-		log.error('Error getting request origin:', false, error);
-		return '';
-	}
+  try {
+    if (request?.origin) return request.origin;
+    if (sender?.url) return new URL(sender.url).origin;
+    if (sender?.tab?.url) return new URL(sender.tab.url).origin;
+    return '';
+  } catch (error) {
+    log.error('Error getting request origin:', false, error);
+    return '';
+  }
 }
 
-// Handles storing session hash and generating token
 async function handleStoreSessionHash(payload: any) {
-	try {
-		if (!payload || typeof payload !== 'string') {
-			log.warn('Invalid payload for session hash storage', false, { payload });
-			return { success: false, error: 'Invalid payload' };
-		}
-
-		memoryHash = payload;
-		sessionToken = await generateSessionToken();
-
-		// Broadcast the new session token
-		try {
-			await browser.runtime.sendMessage({
-				type: 'SESSION_TOKEN_BROADCAST',
-				token: sessionToken.token,
-				expiresAt: sessionToken.expiresAt
-			});
-		} catch (error) {
-			log.warn('Failed to broadcast session token', false, { error });
-		}
-
-		log.info('Session hash stored and token generated', false, {
-			token: sessionToken.token,
-			expiresAt: sessionToken.expiresAt
-		});
-
-		return {
-			success: true,
-			token: sessionToken.token,
-			expiresAt: sessionToken.expiresAt
-		};
-	} catch (error) {
-		log.error('Error storing session hash', false, {
-			error: error instanceof Error ? error.message : 'Unknown error',
-			payload
-		});
-		return { success: false, error: error instanceof Error ? error.message : 'Unknown error' };
-	}
+  try {
+    if (!payload || typeof payload !== 'string') {
+      log.warn('Invalid payload for session hash storage', false, { payload });
+      return { success: false, error: 'Invalid payload' };
+    }
+
+    memoryHash = payload;
+    sessionToken = generateSessionToken();
+
+    // Broadcast the new session token
+    try {
+      await browser.runtime.sendMessage({
+        type: 'SESSION_TOKEN_BROADCAST',
+        token: sessionToken.token,
+        expiresAt: sessionToken.expiresAt
+      });
+    } catch (error) {
+      log.warn('Failed to broadcast session token', false, { error });
+    }
+
+    log.info('Session hash stored and token generated', false, {
+      token: sessionToken.token,
+      expiresAt: sessionToken.expiresAt
+    });
+
+    return {
+      success: true,
+      token: sessionToken.token,
+      expiresAt: sessionToken.expiresAt
+    };
+  } catch (error) {
+    log.error('Error storing session hash', false, {
+      error: error instanceof Error ? error.message : 'Unknown error',
+      payload
+    });
+    return { success: false, error: error instanceof Error ? error.message : 'Unknown error' };
+  }
 }
 
-// Handles session refresh requests
 export async function handleRefreshSession(token: string) {
-	try {
-		// Verify this is being called from the background context
-		if (!isBackgroundContext()) {
-			log.warn('Attempt to refresh session from non-background context');
-			return { success: false, error: 'Unauthorized context' };
-		}
-
-		if (!token) {
-			log.warn('No token provided for session refresh', false);
-			return { success: false, error: 'No token provided' };
-		}
-
-		// Check if the token matches and is not expired
-		if (sessionToken && token === sessionToken.token) {
-			// Extend the session
-			sessionToken.expiresAt = Date.now() + SESSION_TIMEOUT_MS;
-			log.info('Session refreshed', false, {
-				expiresAt: sessionToken.expiresAt,
-				token: sessionToken.token
-			});
-
-			// Broadcast the new session token - client context will handle storing it
-			try {
-				await browser.runtime.sendMessage({
-					type: 'SESSION_TOKEN_BROADCAST',
-					token: sessionToken.token,
-					expiresAt: sessionToken.expiresAt
-				});
-			} catch (error) {
-				log.warn('Failed to broadcast session token', false, { error });
-			}
-
-			return {
-				success: true,
-				token: sessionToken.token,
-				expiresAt: sessionToken.expiresAt
-			};
-		} else {
-			log.warn('Invalid or expired refresh request', false, {
-				providedToken: token,
-				currentToken: sessionToken?.token
-			});
-			clearSession('Invalid refresh token');
-			return { success: false, error: 'Invalid or expired token' };
-		}
-	} catch (error) {
-		log.error('Error refreshing session', false, {
-			error: error instanceof Error ? error.message : 'Unknown error',
-			token
-		});
-		return { success: false, error: error instanceof Error ? error.message : 'Unknown error' };
-	}
+  try {
+    // Verify this is being called from the background context
+    if (!isBackgroundContext()) {
+      log.warn('Attempt to refresh session from non-background context');
+      return { success: false, error: 'Unauthorized context' };
+    }
+
+    if (!token) {
+      log.warn('No token provided for session refresh', false);
+      return { success: false, error: 'No token provided' };
+    }
+
+    // Check if the token matches and is not expired
+    if (sessionToken && token === sessionToken.token) {
+      // Extend the session
+      sessionToken.expiresAt = Date.now() + SESSION_TIMEOUT_MS;
+      log.info('Session refreshed', false, {
+        expiresAt: sessionToken.expiresAt,
+        token: sessionToken.token
+      });
+
+      // Broadcast the new session token - client context will handle storing it
+      try {
+        await browser.runtime.sendMessage({
+          type: 'SESSION_TOKEN_BROADCAST',
+          token: sessionToken.token,
+          expiresAt: sessionToken.expiresAt
+        });
+      } catch (error) {
+        log.warn('Failed to broadcast session token', false, { error });
+      }
+
+      return {
+        success: true,
+        token: sessionToken.token,
+        expiresAt: sessionToken.expiresAt
+      };
+    } else {
+      log.warn('Invalid or expired refresh request', false, {
+        providedToken: token,
+        currentToken: sessionToken?.token
+      });
+      clearSession('Invalid refresh token');
+      return { success: false, error: 'Invalid or expired token' };
+    }
+  } catch (error) {
+    log.error('Error refreshing session', false, {
+      error: error instanceof Error ? error.message : 'Unknown error',
+      token
+    });
+    return { success: false, error: error instanceof Error ? error.message : 'Unknown error' };
+  }
 }
 
-// Handles EIP-1193 method calls
 async function handleEIP1193Method(
-	message: any,
-	sender: Runtime.MessageSender,
-	requestId: string
+  message: any,
+  sender: Runtime.MessageSender,
+  requestId: string
 ): Promise<any> {
-	try {
-		const { method, params } = message;
-		const origin = getRequestOrigin(message, sender);
-
-		const request: BackgroundPendingRequest = {
-			resolve: () => {},
-			reject: () => {},
-			port: sender as Runtime.Port,
-			data: {
-				id: requestId,
-				method,
-				params,
-				timestamp: Date.now(),
-				type: EIP6963_REQUEST,
-				origin
-			}
-		};
-
-		// Add request to request manager
-		requestManager.addRequest(requestId, request);
-
-		// Show EIP-6963 popup for user interaction
-		await showEIP6963Popup(method, params, sender as Runtime.Port, requestId);
-
-		// Wait for response from request manager
-		const response = await requestManager.getRequest(requestId);
-
-		if (response?.error) {
-			throw new Error(response.error.message);
-		}
-
-		return {
-			type: EIP6963_RESPONSE,
-			id: requestId,
-			result: response?.result
-		};
-	} catch (error) {
-		log.error('Error handling EIP-1193 method:', false, error);
-		return {
-			type: EIP6963_RESPONSE,
-			id: requestId,
-			error: {
-				code: -32603,
-				message: error instanceof Error ? error.message : 'EIP-1193 method error'
-			}
-		};
-	}
+  try {
+    const { method, params } = message;
+    const origin = getRequestOrigin(message, sender);
+
+    const request: BackgroundPendingRequest = {
+      resolve: () => {},
+      reject: () => {},
+      port: sender as Runtime.Port,
+      data: {
+        id: requestId,
+        method,
+        params,
+        timestamp: Date.now(),
+        type: EIP6963_REQUEST,
+        origin
+      }
+    };
+
+    // Add request to request manager
+    requestManager.addRequest(requestId, request);
+
+    // Show EIP-6963 popup for user interaction
+    await showEIP6963Popup(method, params, sender as Runtime.Port, requestId);
+
+    // Wait for response from request manager
+    const response = await requestManager.getRequest(requestId);
+
+    if (response?.error) {
+      throw new Error(response.error.message);
+    }
+
+    return {
+      type: EIP6963_RESPONSE,
+      id: requestId,
+      result: response?.result
+    };
+  } catch (error) {
+    log.error('Error handling EIP-1193 method:', false, error);
+    return {
+      type: EIP6963_RESPONSE,
+      id: requestId,
+      error: {
+        code: -32603,
+        message: error instanceof Error ? error.message : 'EIP-1193 method error'
+      }
+    };
+  }
 }
 
-// Handles EIP-6963 requests
 async function handleEIP6963Request(
-	message: any,
-	sender: Runtime.MessageSender,
-	requestId: string,
-	origin: string
+  message: any,
+  sender: Runtime.MessageSender,
+  requestId: string,
+  origin: string
 ): Promise<any> {
-	try {
-		const { type, payload } = message;
-
-		const request: BackgroundPendingRequest = {
-			resolve: () => {},
-			reject: () => {},
-			port: sender as Runtime.Port,
-			data: {
-				id: requestId,
-				method: type,
-				params: [payload],
-				timestamp: Date.now(),
-				type,
-				origin
-			}
-		};
-
-		// Add request to request manager
-		requestManager.addRequest(requestId, request);
-
-		// Show EIP-6963 popup for user interaction
-		await showEIP6963Popup(type, [payload], sender as Runtime.Port, requestId);
-
-		// Wait for response from request manager
-		const response = await requestManager.getRequest(requestId);
-
-		if (response?.error) {
-			throw new Error(response.error.message);
-		}
-
-		return {
-			type: EIP6963_RESPONSE,
-			id: requestId,
-			result: response?.result
-		};
-	} catch (error) {
-		log.error('Error handling EIP-6963 request:', false, error);
-		return {
-			type: EIP6963_RESPONSE,
-			id: requestId,
-			error: {
-				code: -32603,
-				message: error instanceof Error ? error.message : 'EIP-6963 request error'
-			}
-		};
-	}
+  try {
+    const { type, payload } = message;
+
+    const request: BackgroundPendingRequest = {
+      resolve: () => {},
+      reject: () => {},
+      port: sender as Runtime.Port,
+      data: {
+        id: requestId,
+        method: type,
+        params: [payload],
+        timestamp: Date.now(),
+        type,
+        origin
+      }
+    };
+
+    // Add request to request manager
+    requestManager.addRequest(requestId, request);
+
+    // Show EIP-6963 popup for user interaction
+    await showEIP6963Popup(type, [payload], sender as Runtime.Port, requestId);
+
+    // Wait for response from request manager
+    const response = await requestManager.getRequest(requestId);
+
+    if (response?.error) {
+      throw new Error(response.error.message);
+    }
+
+    return {
+      type: EIP6963_RESPONSE,
+      id: requestId,
+      result: response?.result
+    };
+  } catch (error) {
+    log.error('Error handling EIP-6963 request:', false, error);
+    return {
+      type: EIP6963_RESPONSE,
+      id: requestId,
+      error: {
+        code: -32603,
+        message: error instanceof Error ? error.message : 'EIP-6963 request error'
+      }
+    };
+  }
 }
 
-// Handles EIP-6963 responses
 async function handleEIP6963Response(
-	message: any,
-	sender: Runtime.MessageSender,
-	requestId: string,
-	origin: string
+  message: any,
+  sender: Runtime.MessageSender,
+  requestId: string,
+  origin: string
 ): Promise<any> {
-	try {
-		const { type, result, error } = message;
-
-		// Update request in request manager
-		requestManager.updateRequest(requestId, {
-			data: {
-				id: requestId,
-				method: type,
-				params: [],
-				timestamp: Date.now(),
-				type
-			},
-			result,
-			error
-		});
-
-		return {
-			type: EIP6963_RESPONSE,
-			id: requestId,
-			success: true
-		};
-	} catch (error) {
-		log.error('Error handling EIP-6963 response:', false, error);
-		return {
-			type: EIP6963_RESPONSE,
-			id: requestId,
-			error: {
-				code: -32603,
-				message: error instanceof Error ? error.message : 'EIP-6963 response error'
-			}
-		};
-	}
+  try {
+    const { type, result, error } = message;
+
+    // Update request in request manager
+    requestManager.updateRequest(requestId, {
+      data: {
+        id: requestId,
+        method: type,
+        params: [],
+        timestamp: Date.now(),
+        type
+      },
+      result,
+      error
+    });
+
+    return {
+      type: EIP6963_RESPONSE,
+      id: requestId,
+      success: true
+    };
+  } catch (error) {
+    log.error('Error handling EIP-6963 response:', false, error);
+    return {
+      type: EIP6963_RESPONSE,
+      id: requestId,
+      error: {
+        code: -32603,
+        message: error instanceof Error ? error.message : 'EIP-6963 response error'
+      }
+    };
+  }
 }
 
-// Handles EIP-6963 events
 async function handleEIP6963Event(
-	message: any,
-	sender: Runtime.MessageSender,
-	requestId: string,
-	origin: string
+  message: any,
+  sender: Runtime.MessageSender,
+  requestId: string,
+  origin: string
 ): Promise<any> {
-	try {
-		const { type, event, data } = message;
-
-		// Handle different event types
-		switch (event) {
-			case 'accountsChanged':
-				// Handle accounts changed event
-				const accounts = await getYakklCurrentlySelected();
-				return {
-					type: EIP6963_ANNOUNCE,
-					event: 'accountsChanged',
-					data: accounts
-				};
-
-			case 'chainChanged':
-				// Handle chain changed event
-				return {
-					type: EIP6963_ANNOUNCE,
-					event: 'chainChanged',
-					data: data
-				};
-
-			case 'disconnect':
-				// Handle disconnect event
-				return {
-					type: EIP6963_ANNOUNCE,
-					event: 'disconnect',
-					data: data
-				};
-
-			default:
-				return undefined;
-		}
-	} catch (error) {
-		log.error('Error handling EIP-6963 event:', false, error);
-		return {
-			type: EIP6963_RESPONSE,
-			id: requestId,
-			error: {
-				code: -32603,
-				message: error instanceof Error ? error.message : 'EIP-6963 event error'
-			}
-		};
-	}
+  try {
+    const { type, event, data } = message;
+
+    // Handle different event types
+    switch (event) {
+      case 'accountsChanged':
+        // Handle accounts changed event
+        const accounts = await getYakklCurrentlySelected();
+        return {
+          type: EIP6963_ANNOUNCE,
+          event: 'accountsChanged',
+          data: accounts
+        };
+
+      case 'chainChanged':
+        // Handle chain changed event
+        return {
+          type: EIP6963_ANNOUNCE,
+          event: 'chainChanged',
+          data: data
+        };
+
+      case 'disconnect':
+        // Handle disconnect event
+        return {
+          type: EIP6963_ANNOUNCE,
+          event: 'disconnect',
+          data: data
+        };
+
+      default:
+        return undefined;
+    }
+  } catch (error) {
+    log.error('Error handling EIP-6963 event:', false, error);
+    return {
+      type: EIP6963_RESPONSE,
+      id: requestId,
+      error: {
+        code: -32603,
+        message: error instanceof Error ? error.message : 'EIP-6963 event error'
+      }
+    };
+  }
 }
 
-// Unregisters a port from both systems
 export function unregisterPort(requestId: string) {
-	// Verify this is being called from the background context
-	if (!isBackgroundContext()) {
-		return { success: false, error: 'Unauthorized context' };
-	}
-
-	log.info('Unregistering port', false, { requestId });
-	sessionPorts.delete(requestId);
-
-	// Also unregister from new system
-	sessionPortManager.removeRequest(requestId);
-
-	return { success: true };
+  // Verify this is being called from the background context
+  if (!isBackgroundContext()) {
+    return { success: false, error: 'Unauthorized context' };
+  }
+
+  log.info('Unregistering port', false, { requestId });
+  sessionPorts.delete(requestId);
+  return { success: true };
 }
 
-// Gets the current session token from the background context
+/**
+ * Safely retrieves the current session token from the background context.
+ * This function can only be called from the background context and will
+ * return null if called from any other context.
+ *
+ * @returns The current session token or null if not available or if called from wrong context
+ */
 export function getBackgroundSessionToken(): SessionToken | null {
-	try {
-		// Verify this is being called from the background context
-		if (!isBackgroundContext()) {
-			throw new Error('Unauthorized context');
-		}
-
-		if (!sessionToken) {
-			log.debug('No active session token found');
-			return null;
-		}
-
-		// Verify the token hasn't expired
-		if (Date.now() > sessionToken.expiresAt) {
-			log.debug('Session token has expired');
-			clearSession('Token expired');
-			return null;
-		}
-
-		return sessionToken;
-	} catch (error) {
-		log.error('Error accessing session token:', false, error);
-		return null;
-	}
+  try {
+    // Verify this is being called from the background context
+    if (!isBackgroundContext()) {
+      throw new Error('Unauthorized context');
+    }
+
+
+    if (!sessionToken) {
+      log.debug('No active session token found');
+      return null;
+    }
+
+    // Verify the token hasn't expired
+    if (Date.now() > sessionToken.expiresAt) {
+      log.debug('Session token has expired');
+      clearSession('Token expired');
+      return null;
+    }
+
+    return sessionToken;
+  } catch (error) {
+    log.error('Error accessing session token:', false, error);
+    return null;
+  }
 }
diff --git a/packages/yakkl-wallet/src/lib/common/listeners/background/writeMethodHandler.ts b/packages/yakkl-wallet/src/lib/common/listeners/background/writeMethodHandler.ts
index 410ded4..ffc8bfb 100644
--- a/packages/yakkl-wallet/src/lib/common/listeners/background/writeMethodHandler.ts
+++ b/packages/yakkl-wallet/src/lib/common/listeners/background/writeMethodHandler.ts
@@ -4,11 +4,12 @@ import { log } from '$lib/managers/Logger';
 import { sendErrorResponse } from '$contexts/background/extensions/chrome/errorResponseHandler';
 import { pendingRequests, type BackgroundPendingRequest } from '$contexts/background/extensions/chrome/background';
 import { showEIP6963Popup } from '$contexts/background/extensions/chrome/eip-6963';
-import type { Runtime } from 'webextension-polyfill';
+import type { Runtime } from '$lib/types/browser-types';
 import type { YakklRequest, YakklResponse } from '$lib/common/interfaces';
 import { extractSecureDomain } from '$lib/common/security';
-import browser from 'webextension-polyfill';
+import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
 import { verifyDomainConnected } from '$contexts/background/extensions/chrome/verifyDomainConnectedBackground';
+import { getAlchemyProvider } from '$lib/managers/providers/network/ethereum_provider/alchemy';
 
 /**
  * Handles write methods that require user approval
@@ -108,9 +109,6 @@ async function handleApprovalRequest(request: YakklRequest, port: Runtime.Port):
  * Executes write methods that don't require approval
  */
 async function executeWriteMethod(method: string, params: any[]): Promise<any> {
-	const { getAlchemyProvider } = await import(
-		'$lib/managers/providers/network/ethereum_provider/alchemy'
-	);
 	const provider = await getAlchemyProvider();
 
 	// Execute the method via RPC
diff --git a/packages/yakkl-wallet/src/lib/common/listeners/content/contentListeners.ts b/packages/yakkl-wallet/src/lib/common/listeners/content/contentListeners.ts
index d3a109d..1dde082 100644
--- a/packages/yakkl-wallet/src/lib/common/listeners/content/contentListeners.ts
+++ b/packages/yakkl-wallet/src/lib/common/listeners/content/contentListeners.ts
@@ -1,12 +1,12 @@
 // listeners/contentListeners.ts
 import { ListenerManager } from '$lib/managers/ListenerManager';
-import browser from 'webextension-polyfill';
+import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
 import { globalListenerManager } from '$lib/managers/GlobalListenerManager';
 import { log } from '$lib/managers/Logger';
 
 // NOTE: Only for background
 
-const browser_ext = browser;
+const browser_ext = getBrowserExt();
 
 export const contentListenerManager = new ListenerManager('content');
 
diff --git a/packages/yakkl-wallet/src/lib/common/listeners/ui/portListeners.ts b/packages/yakkl-wallet/src/lib/common/listeners/ui/portListeners.ts
index 8887163..231b3aa 100644
--- a/packages/yakkl-wallet/src/lib/common/listeners/ui/portListeners.ts
+++ b/packages/yakkl-wallet/src/lib/common/listeners/ui/portListeners.ts
@@ -1,6 +1,6 @@
 import { openWindows, updateScreenPreferences } from '$contexts/background/extensions/chrome/ui';
 import { setIconLock } from '$lib/utilities/utilities';
-import type { Runtime } from 'webextension-polyfill';
+import type { Runtime } from '$lib/types/browser-types';
 
 export async function onPortInternalListener(event: any, port?: Runtime.Port): Promise<void> {
 	if (event && event.method) {
diff --git a/packages/yakkl-wallet/src/lib/common/listeners/ui/uiListeners.ts b/packages/yakkl-wallet/src/lib/common/listeners/ui/uiListeners.ts
index 4149e30..0788d5a 100644
--- a/packages/yakkl-wallet/src/lib/common/listeners/ui/uiListeners.ts
+++ b/packages/yakkl-wallet/src/lib/common/listeners/ui/uiListeners.ts
@@ -1,6 +1,6 @@
 import { ListenerManager } from '$lib/managers/ListenerManager';
 import { browser_ext, isBrowserEnv } from '$lib/common/environment'; // UI context only
-import type { Runtime } from 'webextension-polyfill'; // Correct Type Import
+import type { Runtime } from '$lib/types/browser-types'; // Correct Type Import
 import { startCheckPrices, stopCheckPrices } from '$lib/tokens/prices';
 import { handleLockDown } from '$lib/common/handlers';
 import { globalListenerManager } from '$lib/managers/GlobalListenerManager';
@@ -11,6 +11,7 @@ import { addWindowListeners, removeWindowListeners } from './windowListeners';
 import { safeLogout } from '$lib/common/safeNavigate';
 import { protectedContexts } from '$lib/common/globals';
 import { playBeep } from '$lib/common/sound';
+import { hideSecurityWarning, showSecurityWarning } from '$lib/common/stores/securityWarning';
 
 export const uiListenerManager = new ListenerManager('ui');
 
@@ -184,7 +185,6 @@ async function _performCleanup(source: string): Promise<void> {
 		// 4. Clear in-app security warning
 		if (typeof window !== 'undefined') {
 			try {
-				const { hideSecurityWarning } = await import('$lib/common/stores/securityWarning');
 				hideSecurityWarning();
 				log.info('[uiListeners] In-app security warning cleared');
 			} catch (e) {
@@ -478,7 +478,6 @@ export async function handleOnMessageForExtension(
 
 					// 2. Show enhanced in-app security warning
 					if (typeof window !== 'undefined') {
-						const { showSecurityWarning } = await import('$lib/common/stores/securityWarning');
 						showSecurityWarning(message.delaySeconds || Math.ceil(message.delayMs / 1000), () => {
 							log.info('[uiListeners] Enhanced security warning completed');
 						});
diff --git a/packages/yakkl-wallet/src/lib/common/lockWallet.ts b/packages/yakkl-wallet/src/lib/common/lockWallet.ts
index d0c4d9a..d5f1a41 100644
--- a/packages/yakkl-wallet/src/lib/common/lockWallet.ts
+++ b/packages/yakkl-wallet/src/lib/common/lockWallet.ts
@@ -10,7 +10,9 @@ import { resetTokenDataStoreValues } from './resetTokenDataStoreValues';
 import { get } from 'svelte/store';
 import { STORAGE_YAKKL_CURRENTLY_SELECTED, STORAGE_YAKKL_SETTINGS } from './constants';
 import { getBrowserExt } from './environment';
-import type { Browser } from 'webextension-polyfill';
+import type { BrowserAPI } from '$lib/types/browser-types';
+import { walletCacheStore } from '$lib/stores/wallet-cache.store';
+import { SingletonWindowManager } from '$lib/managers/SingletonWindowManager';
 
 /**
  * Lock the wallet and clear all sensitive data
@@ -22,7 +24,7 @@ export async function lockWallet(reason: string = 'manual'): Promise<void> {
 
     // 1. Stop all active processes
     await stopActivityTracking();
-    
+
     // 2. Update UI indicators
     await setBadgeText('');
     await setIconLock();
@@ -30,23 +32,22 @@ export async function lockWallet(reason: string = 'manual'): Promise<void> {
     // 3. Save wallet cache before clearing - CRITICAL: Do not save if being reset
     try {
       // Force save of wallet cache to ensure complete state is persisted
-      const { walletCacheStore } = await import('$lib/stores/wallet-cache.store');
       const cacheState = get(walletCacheStore);
-      
+
       // Only save if we have valid data (not zeroed out)
       if (cacheState && cacheState.chainAccountCache) {
         let hasValidData = false;
-        
+
         // Check if there's at least one non-zero value in the cache
         Object.values(cacheState.chainAccountCache).forEach(chainData => {
           Object.values(chainData as any).forEach((accountData: any) => {
-            if (accountData?.portfolio?.totalValue > 0 || 
+            if (accountData?.portfolio?.totalValue > 0 ||
                 accountData?.tokens?.some((t: any) => t.balance && parseFloat(t.balance) > 0)) {
               hasValidData = true;
             }
           });
         });
-        
+
         if (hasValidData) {
           await setObjectInLocalStorage('yakklWalletCache', cacheState);
           log.info('Wallet cache saved before lock with valid data');
@@ -64,7 +65,7 @@ export async function lockWallet(reason: string = 'manual'): Promise<void> {
       yakklCurrentlySelected.shortcuts.isLocked = true;
       await setObjectInLocalStorage(STORAGE_YAKKL_CURRENTLY_SELECTED, yakklCurrentlySelected);
     }
-    
+
     // Also update settings to ensure consistent locked state
     const settings = await getObjectFromLocalStorage(STORAGE_YAKKL_SETTINGS) as any;
     if (settings) {
@@ -77,10 +78,10 @@ export async function lockWallet(reason: string = 'manual'): Promise<void> {
     removeListeners();
     setMiscStore('');
     resetTokenDataStoreValues();
-    
+
     // 6. Zero out values in custom token storage
     setYakklTokenDataCustomStorage(get(yakklTokenDataCustomStore));
-    
+
     // 7. Reset all stores
     resetStores();
 
@@ -95,7 +96,7 @@ export async function lockWallet(reason: string = 'manual'): Promise<void> {
       // Get all keys from session storage
       const allData = await browserExt.storage.session.get(null);
       const keysToRemove = Object.keys(allData).filter(key => key !== 'windowId');
-      
+
       // Remove all keys except windowId
       if (keysToRemove.length > 0) {
         await browserExt.storage.session.remove(keysToRemove);
@@ -109,7 +110,6 @@ export async function lockWallet(reason: string = 'manual'): Promise<void> {
 
     // 11. Reset SingletonWindowManager to clear any stale window references
     try {
-      const { SingletonWindowManager } = await import('$lib/managers/SingletonWindowManager');
       SingletonWindowManager.reset();
       log.info('SingletonWindowManager reset during wallet lock');
     } catch (error) {
@@ -139,7 +139,7 @@ export function registerWalletLockHandlers(): void {
   // Handle browser/tab close - safe for all contexts
   if (typeof window !== 'undefined') {
     window.addEventListener('beforeunload', () => {
-      lockWallet('window-close').catch(err => 
+      lockWallet('window-close').catch(err =>
         log.error('Error locking wallet on beforeunload:', false, err)
       );
     });
@@ -162,7 +162,7 @@ export function registerWalletLockHandlers(): void {
  * This should only be called from the background script
  * @param browserApi - The browser API object (pass browser from webextension-polyfill)
  */
-export function registerBackgroundWalletLockHandlers(browserApi: Browser): void {
+export function registerBackgroundWalletLockHandlers(browserApi: BrowserAPI): void {
   if (!browserApi) {
     log.error('Browser API is required for background handlers');
     return;
@@ -188,4 +188,4 @@ export function registerBackgroundWalletLockHandlers(browserApi: Browser): void
       }
     });
   }
-}
\ No newline at end of file
+}
diff --git a/packages/yakkl-wallet/src/lib/common/messaging.ts b/packages/yakkl-wallet/src/lib/common/messaging.ts
index 6fa3444..94e17f9 100644
--- a/packages/yakkl-wallet/src/lib/common/messaging.ts
+++ b/packages/yakkl-wallet/src/lib/common/messaging.ts
@@ -1,6 +1,6 @@
 // src/lib/common/messaging.ts
 import { log } from '$lib/common/logger-wrapper';
-import type { Browser, Runtime } from 'webextension-polyfill';
+import type { Browser, Runtime } from '$lib/types/browser-types';
 import { protectedContexts } from './globals';
 import { UnifiedTimerManager } from '$lib/managers/UnifiedTimerManager';
 
@@ -23,7 +23,7 @@ class ExtensionMessaging {
 	private retryCount: Map<string, number> = new Map();
 	private MAX_RETRIES = 3;
 	private RETRY_DELAY = 500; // ms
-	private browserApi: Browser | null = null;
+	private browserApi: BrowserAPI | null = null;
 	private contextId: string = '';
 	private pendingRequests = new Map<
 		string,
@@ -66,7 +66,7 @@ class ExtensionMessaging {
 	 * Initialize the messaging system
 	 * @param browserExtensionApi The browser extension API object from webextension-polyfill
 	 */
-	public initialize(browserExtensionApi: Browser): void {
+	public initialize(browserExtensionApi: BrowserAPI): void {
 		if (!isBrowser) return; // Skip on server
 
 		this.browserApi = browserExtensionApi;
@@ -757,7 +757,7 @@ export const messagingService = ExtensionMessaging.getInstance();
  * Initialize the messaging service with the browser extension API
  * @param browserExtensionApi The browser extension API from webextension-polyfill
  */
-export function initializeMessaging(browserExtensionApi: Browser): void {
+export function initializeMessaging(browserExtensionApi: BrowserAPI): void {
 	if (!isBrowser) return;
 	messagingService.initialize(browserExtensionApi);
 }
@@ -816,7 +816,7 @@ function determineBestContextType(): string {
  * @param contextType Optional context type override
  */
 export async function initializeUiContext(
-	browserExtensionApi: Browser,
+	browserExtensionApi: BrowserAPI,
 	contextType?: string
 ): Promise<void> {
 	if (!isBrowser) return;
diff --git a/packages/yakkl-wallet/src/lib/common/notifications.ts b/packages/yakkl-wallet/src/lib/common/notifications.ts
index 16a8ac1..84db42a 100644
--- a/packages/yakkl-wallet/src/lib/common/notifications.ts
+++ b/packages/yakkl-wallet/src/lib/common/notifications.ts
@@ -9,8 +9,9 @@ import type {
 import { startLockIconTimer, stopLockIconTimer } from '$contexts/background/extensions/chrome/iconTimer';
 import { browser_ext } from './environment';
 import { log } from '$lib/common/logger-wrapper';
-import type { Notifications } from 'webextension-polyfill';
+import type { Notifications } from '$lib/types/browser-types';
 import { setBadgeText } from '$lib/utilities';
+import { hideSecurityWarning } from './stores/securityWarning';
 
 const DEFAULT_ICON = '/images/logoBullLock48x48.png';
 
@@ -910,7 +911,6 @@ export class NotificationService {
 
 				// Clear in-app security warning
 				try {
-					const { hideSecurityWarning } = await import('$lib/common/stores/securityWarning');
 					hideSecurityWarning();
 				} catch (e) {
 					log.debug('Error hiding security warning:', false, e);
diff --git a/packages/yakkl-wallet/src/lib/common/origin.ts b/packages/yakkl-wallet/src/lib/common/origin.ts
index 8fd60ef..4603cc7 100644
--- a/packages/yakkl-wallet/src/lib/common/origin.ts
+++ b/packages/yakkl-wallet/src/lib/common/origin.ts
@@ -1,7 +1,7 @@
 // import type { RuntimePort } from "$lib/extensions/chrome/background";
 import { log } from '$lib/managers/Logger';
 import { isFrameAccessible } from './frameInspector';
-// import browser from "webextension-polyfill";
+// import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
 
 const MAX_RETRY_ATTEMPTS = 3;
 const RETRY_DELAY = 1000; // 1 second
diff --git a/packages/yakkl-wallet/src/lib/common/plans.ts b/packages/yakkl-wallet/src/lib/common/plans.ts
index 95a709a..584c19e 100644
--- a/packages/yakkl-wallet/src/lib/common/plans.ts
+++ b/packages/yakkl-wallet/src/lib/common/plans.ts
@@ -27,7 +27,7 @@ export const PlanMetadata: Record<
 		priority: 3,
 		description: 'Early adopter plan which includes the YAKKL PRO plan'
 	},
-	basic_member: {
+	explorer_member: {
 		label: 'Basic Member',
 		color: 'red',
 		priority: 4,
diff --git a/packages/yakkl-wallet/src/lib/common/safeBackgroundSendMessage.ts b/packages/yakkl-wallet/src/lib/common/safeBackgroundSendMessage.ts
index 4382b85..701e577 100644
--- a/packages/yakkl-wallet/src/lib/common/safeBackgroundSendMessage.ts
+++ b/packages/yakkl-wallet/src/lib/common/safeBackgroundSendMessage.ts
@@ -1,41 +1,3 @@
-import browser from 'webextension-polyfill';
+import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
+const browser = getBrowserExt()!;
 
-export async function safeBackgroundSendMessage<T = any>(
-	message: any,
-	timeoutMs = 3000
-): Promise<T> {
-	return new Promise<T>((resolve, reject) => {
-		let isSettled = false;
-
-		const timeout = setTimeout(() => {
-			if (!isSettled) {
-				isSettled = true;
-				reject(new Error(`safeBackgroundSendMessage timed out after ${timeoutMs} ms`));
-			}
-		}, timeoutMs);
-
-		try {
-			browser.runtime
-				.sendMessage(message)
-				.then((response) => {
-					if (!isSettled) {
-						clearTimeout(timeout);
-						isSettled = true;
-						resolve(response as T);
-					}
-				})
-				.catch((err) => {
-					if (!isSettled) {
-						clearTimeout(timeout);
-						isSettled = true;
-						reject(err);
-					}
-				});
-		} catch (err) {
-			if (!isSettled) {
-				clearTimeout(timeout);
-				reject(err);
-			}
-		}
-	});
-}
diff --git a/packages/yakkl-wallet/src/lib/common/safeBackgroundSendMessageWithRetry.ts b/packages/yakkl-wallet/src/lib/common/safeBackgroundSendMessageWithRetry.ts
index 89bfce0..701e577 100644
--- a/packages/yakkl-wallet/src/lib/common/safeBackgroundSendMessageWithRetry.ts
+++ b/packages/yakkl-wallet/src/lib/common/safeBackgroundSendMessageWithRetry.ts
@@ -1,70 +1,3 @@
-import browser from 'webextension-polyfill';
+import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
+const browser = getBrowserExt()!;
 
-export async function safeBackgroundSendMessageWithRetry<T = any>(
-	message: any,
-	{ timeoutMs = 3000, retries = 2, retryDelayMs = 500 } = {}
-): Promise<T> {
-	let attempt = 0;
-
-	while (attempt <= retries) {
-		try {
-			return await new Promise<T>((resolve, reject) => {
-				let isSettled = false;
-
-				const timeout = setTimeout(() => {
-					if (!isSettled) {
-						isSettled = true;
-						reject(
-							new Error(
-								`safeBackgroundSendMessageWithRetry timed out after ${timeoutMs} ms (attempt ${attempt + 1})`
-							)
-						);
-					}
-				}, timeoutMs);
-
-				browser.runtime
-					.sendMessage(message)
-					.then((response) => {
-						if (!isSettled) {
-							clearTimeout(timeout);
-							isSettled = true;
-							resolve(response as T);
-						}
-					})
-					.catch((err) => {
-						if (!isSettled) {
-							clearTimeout(timeout);
-							isSettled = true;
-							reject(err);
-						}
-					});
-			});
-		} catch (error) {
-			console.warn(`[safeBackgroundSendMessageWithRetry] attempt ${attempt + 1} failed:`, error);
-			if (attempt === retries) {
-				throw new Error(
-					`safeBackgroundSendMessageWithRetry failed after ${retries + 1} attempts: ${error}`
-				);
-			}
-			attempt++;
-			await delay(retryDelayMs); // Wait before retrying
-		}
-	}
-
-	throw new Error('Unexpected failure in safeSendBackgroundMessageWithRetry');
-}
-
-// Helper delay function
-function delay(ms: number): Promise<void> {
-	return new Promise((resolve) => setTimeout(resolve, ms));
-}
-
-// Example:
-// const sessionInfo = await safeBackgroundSendMessageWithRetry<StoreHashResponse>({
-//   type: 'STORE_SESSION_HASH',
-//   payload: encryptedHash
-// }, {
-//   timeoutMs: 3000,  // optional
-//   retries: 2,       // optional
-//   retryDelayMs: 500 // optional
-// });
diff --git a/packages/yakkl-wallet/src/lib/common/safeMessaging.ts b/packages/yakkl-wallet/src/lib/common/safeMessaging.ts
index 96f2e4c..079fe1e 100644
--- a/packages/yakkl-wallet/src/lib/common/safeMessaging.ts
+++ b/packages/yakkl-wallet/src/lib/common/safeMessaging.ts
@@ -1,62 +1,5 @@
 // Safe messaging utility to suppress "Receiving end does not exist" errors
-import browser from 'webextension-polyfill';
+import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
 import { log } from '$lib/common/logger-wrapper';
+const browser = getBrowserExt()!;
 
-/**
- * Safely send a message from background context with error suppression
- * This is used when the background needs to notify UI components that may or may not exist
- */
-export async function safeSendMessage(message: any): Promise<void> {
-  try {
-    // Try to send to all tabs and extension pages
-    const tabs = await browser.tabs.query({});
-    
-    // Send to each tab's content script if it exists
-    for (const tab of tabs) {
-      if (tab.id) {
-        browser.tabs.sendMessage(tab.id, message).catch(() => {
-          // Silently ignore - tab might not have content script
-        });
-      }
-    }
-    
-    // Also try runtime.sendMessage for extension pages (popup, options, etc)
-    // but suppress the error since they might not exist
-    browser.runtime.sendMessage(message).catch(() => {
-      // Expected error when no receivers exist - suppress it
-    });
-  } catch (error) {
-    // Log only if it's not the expected "no receiver" error
-    if (error instanceof Error && !error.message.includes('Receiving end does not exist')) {
-      log.debug('Error in safeSendMessage:', false, error);
-    }
-  }
-}
-
-/**
- * Send a message only to extension UI contexts (not content scripts)
- */
-export async function sendToExtensionUI(message: any): Promise<void> {
-  try {
-    // This will only reach extension pages like popup, options, sidepanel
-    await browser.runtime.sendMessage(message);
-  } catch (error) {
-    // Suppress "Receiving end does not exist" errors
-    if (error instanceof Error && !error.message.includes('Receiving end does not exist')) {
-      log.debug('Error sending to extension UI:', false, error);
-    }
-  }
-}
-
-/**
- * Wrap a sendMessage call to suppress common errors
- */
-export function suppressMessageError(promise: Promise<any>): Promise<any> {
-  return promise.catch((error): any => {
-    // Only log if it's not a "no receiver" error
-    if (error instanceof Error && !error.message.includes('Receiving end does not exist')) {
-      log.debug('Message send error:', false, error);
-    }
-    return null;
-  });
-}
\ No newline at end of file
diff --git a/packages/yakkl-wallet/src/lib/common/safePostMessage.ts b/packages/yakkl-wallet/src/lib/common/safePostMessage.ts
index 13478cb..7e6d1df 100644
--- a/packages/yakkl-wallet/src/lib/common/safePostMessage.ts
+++ b/packages/yakkl-wallet/src/lib/common/safePostMessage.ts
@@ -1,4 +1,4 @@
-import type { Runtime } from 'webextension-polyfill';
+import type { Runtime } from '$lib/types/browser-types';
 
 // NOTE: This is used in the background script to content script or other background scripts only.
 export function safePostMessage<T = any>(
diff --git a/packages/yakkl-wallet/src/lib/common/shared/BrowserAccessor.ts b/packages/yakkl-wallet/src/lib/common/shared/BrowserAccessor.ts
deleted file mode 100644
index c9f2df4..0000000
--- a/packages/yakkl-wallet/src/lib/common/shared/BrowserAccessor.ts
+++ /dev/null
@@ -1,597 +0,0 @@
-// $lib/shared/BrowserAccessor.ts
-import type { Runtime, Tabs, Alarms } from 'webextension-polyfill';
-import { log } from '$lib/managers/Logger';
-import type { ExtendedBrowser } from '../types/browser-extensions';
-import { browser_ext } from '../environment';
-
-// Interfaces for local use (to avoid namespace issues)
-interface ChromeRuntimeConnectInfo {
-	name?: string;
-}
-// Chrome types are now imported automatically from the .d.ts file
-
-/**
- * Describes the execution context of the extension
- */
-export enum ExtensionContext {
-	UNKNOWN = 'unknown',
-	BACKGROUND = 'background',
-	POPUP = 'popup',
-	CONTENT_SCRIPT = 'content_script',
-	OPTIONS = 'options',
-	DEVTOOLS = 'devtools',
-	SIDEPANEL = 'sidepanel'
-}
-
-/**
- * A robust utility class for accessing browser extension APIs
- * across different contexts (background, popup, etc.)
- */
-export class BrowserAccessor {
-	private static instance: BrowserAccessor;
-	private browserApi: ExtendedBrowser | null = null;
-	private currentContext: ExtensionContext = ExtensionContext.UNKNOWN;
-	private initialized = false;
-	private initPromise: Promise<ExtendedBrowser | null> | null = null;
-	/**
-	 * Private constructor - use getInstance()
-	 */
-	private constructor() {
-		// Intentionally empty - initialization happens on demand
-	}
-
-	/**
-	 * Get the singleton instance
-	 */
-	public static getInstance(): BrowserAccessor {
-		if (!BrowserAccessor.instance) {
-			BrowserAccessor.instance = new BrowserAccessor();
-		}
-		return BrowserAccessor.instance;
-	}
-
-	/**
-	 * Check if we're in a service worker context
-	 */
-	private isInServiceWorker(): boolean {
-		try {
-			// Check if the ServiceWorkerGlobalScope exists
-			return (
-				typeof self !== 'undefined' &&
-				typeof (self as any).ServiceWorkerGlobalScope !== 'undefined' &&
-				self instanceof (self as any).ServiceWorkerGlobalScope
-			);
-		} catch (error) {
-			return false;
-		}
-	}
-
-	/**
-	 * Check if Chrome APIs are available
-	 */
-	private hasChromeApis(): boolean {
-		return typeof chrome !== 'undefined' && !!chrome && !!chrome.runtime;
-	}
-
-	/**
-	 * Detect which extension context we're running in
-	 */
-	private async detectContext(): Promise<ExtensionContext> {
-		// Skip if not in a browser
-		if (typeof window === 'undefined' && typeof self === 'undefined') {
-			return ExtensionContext.UNKNOWN;
-		}
-
-		try {
-			// Check for background context - service worker
-			const isServiceWorker = this.isInServiceWorker();
-
-			// Check for extension APIs
-			const hasExtensionApi = this.hasChromeApis();
-
-			// For UI contexts we need to check window
-			const isWindow = typeof window !== 'undefined';
-
-			// Check specific UI contexts if window exists
-			const isPopup =
-				isWindow &&
-				(window.location.pathname.includes('popup.html') ||
-					document.body?.dataset.context === 'popup');
-
-			const isOptions =
-				isWindow &&
-				(window.location.pathname.includes('options.html') ||
-					document.body?.dataset.context === 'options');
-
-			const hasDevtools =
-				typeof chrome !== 'undefined' && typeof (chrome as any).devtools !== 'undefined';
-
-			// Content scripts run in web pages
-			const isContentScript =
-				isWindow && hasExtensionApi && window.location.protocol.startsWith('http');
-
-			if ((await this.resolveExecutionContext()) === 'sidepanel') {
-				return ExtensionContext.SIDEPANEL;
-			}
-
-			if (isServiceWorker && hasExtensionApi) {
-				return ExtensionContext.BACKGROUND;
-			} else if (isPopup) {
-				return ExtensionContext.POPUP;
-			} else if (isOptions) {
-				return ExtensionContext.OPTIONS;
-			} else if (hasDevtools) {
-				return ExtensionContext.DEVTOOLS;
-			} else if (isContentScript) {
-				return ExtensionContext.CONTENT_SCRIPT;
-			} else if (hasExtensionApi) {
-				// If we can't specifically identify, but have extension APIs
-				return ExtensionContext.POPUP; // Default to popup for UI contexts
-			}
-		} catch (error) {
-			log.error('Error detecting context:', false, error);
-		}
-
-		return ExtensionContext.UNKNOWN;
-	}
-
-	async resolveExecutionContext(): Promise<'popup' | 'sidepanel'> {
-		try {
-			const win = await browser_ext.windows.getCurrent();
-			if (!win || !win.type) {
-				return import.meta.env.VITE_YAKKL_TYPE;
-			}
-
-			if (win.type === 'popup') return 'popup';
-			if (win.type === 'normal') return 'sidepanel';
-
-			return import.meta.env.VITE_YAKKL_TYPE;
-		} catch (err) {
-			console.warn('Error resolving execution context:', err);
-			return import.meta.env.VITE_YAKKL_TYPE;
-		}
-	}
-
-	/**
-	 * Initialize the browser API - respects the context it's running in
-	 * Returns a promise that resolves to the browser API or null
-	 */
-	public async initialize(): Promise<ExtendedBrowser | null> {
-		// Return existing result if already initialized
-		if (this.initialized) {
-			return this.browserApi;
-		}
-
-		// Return existing promise if already initializing
-		if (this.initPromise) {
-			return this.initPromise;
-		}
-
-		// Skip if not in a browser
-		if (typeof window === 'undefined' && typeof self === 'undefined') {
-			this.initialized = true;
-			return null;
-		}
-
-		// Create a single initialization promise
-		this.initPromise = (async () => {
-			try {
-				// Detect which context we're in
-				this.currentContext = await this.detectContext();
-				log.info(`Initializing browser API in ${this.currentContext} context`);
-
-				// Try to get browser API based on context
-				if (this.currentContext !== ExtensionContext.UNKNOWN) {
-					// First try global browser (from script tag)
-					if (typeof window !== 'undefined' && (window as any).browser) {
-						this.browserApi = (window as any).browser as ExtendedBrowser;
-						log.info('Using global browser API from window.browser');
-					}
-					// Then try chrome namespace with polyfill
-					else if (this.hasChromeApis()) {
-						// In background context, we need to be careful with the polyfill
-						if (this.currentContext === ExtensionContext.BACKGROUND) {
-							// In background context, we can directly import
-							try {
-								log.info('Loaded browser API via dynamic import in background');
-								const polyfill = await import('webextension-polyfill');
-								this.browserApi = polyfill.default as ExtendedBrowser;
-							} catch (e) {
-								log.error('Failed to import polyfill in background:', false, e);
-								// Fallback to chrome APIs if needed
-								this.browserApi = this.createChromeShim();
-							}
-						} else {
-							// For UI contexts, use the global or chrome
-							this.browserApi = (window as any).browser || this.createChromeShim();
-							log.info('Using global browser API or chrome shim');
-						}
-					}
-				}
-
-				if (!this.browserApi) {
-					log.warn(`No browser API available in ${this.currentContext} context`);
-				}
-			} catch (error) {
-				log.error('Failed to initialize browser API:', false, error);
-				this.browserApi = null;
-			} finally {
-				this.initialized = true;
-				this.initPromise = null;
-			}
-
-			return this.browserApi;
-		})();
-
-		return this.initPromise;
-	}
-
-	/**
-	 * Get the browser API instance with lazy initialization
-	 */
-	public async getBrowser(): Promise<ExtendedBrowser | null> {
-		if (!this.initialized && !this.initPromise) {
-			await this.initialize();
-		}
-		return this.browserApi;
-	}
-
-	/**
-	 * Get the browser API synchronously - may return null if not initialized
-	 * Consider using getBrowser() for more reliable access
-	 */
-	public getBrowserSync(): ExtendedBrowser | null {
-		if (!this.initialized && !this.initPromise) {
-			// Start initialization but don't wait for it
-			this.initialize().catch((e) => {
-				log.error('Async initialization failed:', false, e);
-			});
-		}
-		return this.browserApi;
-	}
-
-	/**
-	 * Get the current extension context
-	 */
-	public async getContext(): Promise<ExtensionContext> {
-		if (this.currentContext === ExtensionContext.UNKNOWN) {
-			this.currentContext = await this.detectContext();
-		}
-		return this.currentContext;
-	}
-
-	/**
-	 * Set the browser API explicitly (useful for testing or special contexts)
-	 */
-	public setBrowser(browser: ExtendedBrowser): void {
-		this.browserApi = browser;
-		this.initialized = true;
-	}
-
-	/**
-	 * Check if a specific Chrome API is available
-	 */
-	public hasChromeApi(apiName: string): boolean {
-		if (!this.hasChromeApis()) return false;
-
-		switch (apiName) {
-			case 'sidePanel':
-				return typeof (chrome as any).sidePanel !== 'undefined';
-			case 'tabs':
-				return typeof (chrome as any).tabs !== 'undefined';
-			case 'alarms':
-				return typeof (chrome as any).alarms !== 'undefined';
-			case 'idle':
-				return typeof (chrome as any).idle !== 'undefined';
-			case 'notifications':
-				return typeof (chrome as any).notifications !== 'undefined';
-			default:
-				return false;
-		}
-	}
-
-	/**
-	 * Perform a browser API operation safely with proper typing
-	 */
-	public async performOperation<T>(
-		operation: (browser: ExtendedBrowser) => Promise<T> | T,
-		fallback: T
-	): Promise<T> {
-		const browser = await this.getBrowser();
-
-		if (!browser) {
-			return fallback;
-		}
-
-		try {
-			return await operation(browser);
-		} catch (error) {
-			log.error('Browser operation failed:', false, error);
-			return fallback;
-		}
-	}
-
-	/**
-	 * Create a chrome API shim that mimics the browser API
-	 * This is a fallback when the polyfill isn't available
-	 */
-	private createChromeShim(): ExtendedBrowser {
-		if (!this.hasChromeApis()) {
-			log.warn('Chrome APIs not available for creating shim');
-			return {} as ExtendedBrowser;
-		}
-
-		// Create an empty object to serve as our browser implementation
-		const browser = {} as any;
-
-		// Add runtime API if available
-		if (chrome?.runtime) {
-			browser.runtime = {
-				sendMessage: (message: any): Promise<any> => {
-					return new Promise((resolve, reject) => {
-						chrome.runtime.sendMessage(message, (response: any) => {
-							if (chrome.runtime.lastError) {
-								reject(chrome.runtime.lastError);
-							} else {
-								resolve(response);
-							}
-						});
-					});
-				},
-				connect: (connectInfo?: any): Runtime.Port => {
-					const port = chrome.runtime.connect(connectInfo as any);
-					return port as unknown as Runtime.Port;
-				}
-				// Add other runtime methods as needed
-			};
-
-			// Add event listeners
-			// if (chrome.runtime.onMessage) {
-			//   browser.runtime.onMessage = {
-			//     addListener: chrome.runtime.onMessage.addListener.bind(chrome.runtime.onMessage),
-			//     removeListener: chrome.runtime.onMessage.removeListener.bind(chrome.runtime.onMessage),
-			//     hasListener: chrome.runtime.onMessage.hasListener.bind(chrome.runtime.onMessage)
-			//   };
-			// }
-		}
-
-		// Add storage API if available
-		if (chrome?.storage) {
-			browser.storage = {
-				local: {
-					get: (
-						keys: string | string[] | Record<string, any> | null
-					): Promise<Record<string, any>> => {
-						return new Promise((resolve, reject) => {
-							chrome.storage.local.get(keys as any, (result: { [key: string]: any }) => {
-								if (chrome.runtime.lastError) {
-									reject(chrome.runtime.lastError);
-								} else {
-									resolve(result);
-								}
-							});
-						});
-					},
-					set: (items: Record<string, any>): Promise<void> => {
-						return new Promise<void>((resolve, reject) => {
-							chrome.storage.local.set(items, () => {
-								if (chrome.runtime.lastError) {
-									reject(chrome.runtime.lastError);
-								} else {
-									resolve();
-								}
-							});
-						});
-					},
-					remove: (keys: string | string[]): Promise<void> => {
-						return new Promise<void>((resolve, reject) => {
-							chrome.storage.local.remove(keys, () => {
-								if (chrome.runtime.lastError) {
-									reject(chrome.runtime.lastError);
-								} else {
-									resolve();
-								}
-							});
-						});
-					},
-					clear: (): Promise<void> => {
-						return new Promise<void>((resolve, reject) => {
-							chrome.storage.local.clear(() => {
-								if (chrome.runtime.lastError) {
-									reject(chrome.runtime.lastError);
-								} else {
-									resolve();
-								}
-							});
-						});
-					}
-				}
-			};
-		}
-
-		// Add sidePanel API if available
-		if (chrome?.sidePanel) {
-			browser.sidePanel = {
-				setPanelBehavior: (options: { openPanelOnActionClick: boolean }): Promise<void> => {
-					return new Promise<void>((resolve, reject) => {
-						try {
-							chrome.sidePanel.setPanelBehavior(options);
-							resolve();
-						} catch (error) {
-							reject(error);
-						}
-					});
-				},
-				open: (options: { tabId: number }): Promise<void> => {
-					return new Promise<void>((resolve, reject) => {
-						try {
-							chrome.sidePanel.open(options);
-							resolve();
-						} catch (error) {
-							reject(error);
-						}
-					});
-				}
-			};
-		}
-
-		// Add tabs API if available
-		if (chrome?.tabs) {
-			// Create a minimal tabs implementation with the methods you actually use
-			const tabsImpl: Partial<Tabs.Static> = {
-				query: (queryInfo: any): Promise<Tabs.Tab[]> => {
-					return new Promise((resolve, reject) => {
-						chrome.tabs.query(queryInfo, (tabs) => {
-							if (chrome.runtime.lastError) {
-								reject(chrome.runtime.lastError);
-							} else {
-								resolve(tabs as unknown as Tabs.Tab[]);
-							}
-						});
-					});
-				},
-				get: (tabId: number): Promise<Tabs.Tab> => {
-					return new Promise((resolve, reject) => {
-						chrome.tabs.get(tabId, (tab) => {
-							if (chrome.runtime.lastError) {
-								reject(chrome.runtime.lastError);
-							} else {
-								resolve(tab as unknown as Tabs.Tab);
-							}
-						});
-					});
-				},
-				getCurrent: (): Promise<Tabs.Tab | undefined> => {
-					return new Promise((resolve, reject) => {
-						chrome.tabs.getCurrent((tab) => {
-							if (chrome.runtime.lastError) {
-								reject(chrome.runtime.lastError);
-							} else {
-								resolve(tab as unknown as Tabs.Tab);
-							}
-						});
-					});
-				}
-				// Add only the methods you actually use
-			};
-
-			// Add the implementation to the browser object
-			browser.tabs = tabsImpl;
-		}
-
-		// Add alarms API if available
-		if (chrome?.alarms) {
-			// Create a minimal alarms implementation with the methods you actually use
-			const alarmsImpl: Partial<Alarms.Static> = {
-				// Fix the create method to match both overloads
-				create: function (
-					nameOrInfo: string | Alarms.CreateAlarmInfoType,
-					maybeInfo?: Alarms.CreateAlarmInfoType
-				): void {
-					try {
-						if (typeof nameOrInfo === 'string') {
-							// First overload: create(name, alarmInfo)
-							if (maybeInfo) {
-								chrome.alarms.create(nameOrInfo, maybeInfo as any);
-							} else {
-								// Chrome requires alarmInfo, even if empty
-								chrome.alarms.create(nameOrInfo, {});
-							}
-						} else {
-							// Second overload: create(alarmInfo)
-							// Chrome requires name parameter, use empty string as default
-							chrome.alarms.create('', nameOrInfo as any);
-						}
-					} catch (error) {
-						log.error('Error creating alarm:', false, error);
-					}
-				},
-
-				clear: (name?: string): Promise<boolean> => {
-					return new Promise((resolve, reject) => {
-						chrome.alarms.clear(name, (wasCleared) => {
-							if (chrome.runtime.lastError) {
-								reject(chrome.runtime.lastError);
-							} else {
-								resolve(wasCleared);
-							}
-						});
-					});
-				},
-
-				clearAll: (): Promise<boolean> => {
-					return new Promise((resolve, reject) => {
-						chrome.alarms.clearAll((wasCleared) => {
-							if (chrome.runtime.lastError) {
-								reject(chrome.runtime.lastError);
-							} else {
-								resolve(wasCleared);
-							}
-						});
-					});
-				}
-				// Add only the methods you actually use
-			};
-
-			// Get alarm by name
-			get: (name?: string): Promise<Alarms.Alarm | undefined> => {
-				return new Promise((resolve, reject) => {
-					if (!chrome?.alarms) {
-						reject(new Error('Chrome alarms API not available'));
-						return;
-					}
-
-					chrome.alarms.get(name, (alarm) => {
-						if (chrome.runtime.lastError) {
-							reject(chrome.runtime.lastError);
-						} else {
-							resolve(alarm as unknown as Alarms.Alarm);
-						}
-					});
-				});
-			};
-
-			// Get all alarms
-			getAll: (): Promise<Alarms.Alarm[]> => {
-				return new Promise((resolve, reject) => {
-					if (!chrome?.alarms) {
-						reject(new Error('Chrome alarms API not available'));
-						return;
-					}
-
-					chrome.alarms.getAll((alarms) => {
-						if (chrome.runtime.lastError) {
-							reject(chrome.runtime.lastError);
-						} else {
-							resolve(alarms as unknown as Alarms.Alarm[]);
-						}
-					});
-				});
-			};
-
-			// Create a stub for onAlarm if needed
-			if (chrome.alarms.onAlarm) {
-				alarmsImpl.onAlarm = {
-					addListener: (listener: (alarm: Alarms.Alarm) => void) => {
-						chrome.alarms.onAlarm.addListener(listener as any);
-					},
-					removeListener: (listener: (alarm: Alarms.Alarm) => void) => {
-						chrome.alarms.onAlarm.removeListener(listener as any);
-					},
-					hasListener: (listener: (alarm: Alarms.Alarm) => void) => {
-						return chrome.alarms.onAlarm.hasListener(listener as any);
-					}
-				};
-			}
-
-			// Add the implementation to the browser object
-			browser.alarms = alarmsImpl as Alarms.Static;
-		}
-
-		// Add other APIs as needed using the same pattern
-
-		const browser_ext = browser as ExtendedBrowser;
-
-		return browser_ext;
-	}
-}
diff --git a/packages/yakkl-wallet/src/lib/common/shared/StorageService.ts b/packages/yakkl-wallet/src/lib/common/shared/StorageService.ts
index 5b46e5a..da8baaa 100644
--- a/packages/yakkl-wallet/src/lib/common/shared/StorageService.ts
+++ b/packages/yakkl-wallet/src/lib/common/shared/StorageService.ts
@@ -1,40 +1,25 @@
 // $lib/shared/StorageService.ts
-import type { Browser } from 'webextension-polyfill';
-import { BrowserAccessor } from './BrowserAccessor';
 import { log } from '$lib/common/logger-wrapper';
+import { getObjectFromExtensionStorage, removeFromExtensionStorage, setObjectInExtensionStorage } from '../stores';
 
 /**
  * Service for cross-context storage operations
+ * This is a simple wrapper around the storage functions in stores.ts
  */
 export class StorageService {
-	private browserAccessor: BrowserAccessor;
 	private initialized = false;
-	private initPromise: Promise<void> | null = null;
 
 	constructor() {
-		this.browserAccessor = BrowserAccessor.getInstance();
+		// No initialization needed anymore - getBrowserExt handles everything
+		this.initialized = true;
 	}
 
 	/**
-	 * Initialize the service
+	 * Initialize the service (kept for backward compatibility)
 	 */
 	public async initialize(): Promise<void> {
-		if (this.initialized) return;
-		if (this.initPromise) return this.initPromise;
-
-		this.initPromise = (async () => {
-			try {
-				// Ensure browser accessor is initialized
-				await this.browserAccessor.initialize();
-				this.initialized = true;
-			} catch (error) {
-				log.error('Failed to initialize StorageService:', false, error);
-			} finally {
-				this.initPromise = null;
-			}
-		})();
-
-		return this.initPromise;
+		// No-op - initialization happens automatically in getBrowserExt
+		this.initialized = true;
 	}
 
 	/**
@@ -46,98 +31,52 @@ export class StorageService {
 			await this.initialize();
 		}
 
-		return this.browserAccessor.performOperation(async (browser: Browser) => {
-			try {
-				// Get the data from storage
-				const result = await browser.storage.local.get(key);
-
-				// Check if the key exists
-				if (result[key] !== undefined) {
-					// Safely type cast and validate
-					return this.validateAndCast(result[key], defaultValue);
-				}
-			} catch (error) {
-				log.error(`Error getting data for key "${key}":`, false, error);
-			}
-
+		try {
+			const result = await getObjectFromExtensionStorage<T>(key);
+			return result ?? defaultValue;
+		} catch (error) {
+			log.error(`Error getting data for key "${key}":`, false, error);
 			return defaultValue;
-		}, defaultValue);
+		}
 	}
 
 	/**
 	 * Save data to storage
 	 */
-	public async saveData<T>(key: string, value: T): Promise<boolean> {
+	public async saveData<T>(key: string, value: T): Promise<void | boolean> {
 		// Ensure initialized
 		if (!this.initialized) {
 			await this.initialize();
 		}
 
-		return this.browserAccessor.performOperation(async (browser: Browser) => {
-			try {
-				await browser.storage.local.set({ [key]: value });
-				log.debug(`Data saved for key "${key}"`);
-				return true;
-			} catch (error) {
-				log.error(`Error saving data for key "${key}":`, false, error);
-				return false;
-			}
-		}, false);
-	}
-
-	/**
-	 * Validate and cast the value to the expected type
-	 */
-	private validateAndCast<T>(value: unknown, defaultValue: T): T {
 		try {
-			// For primitive types
-			if (typeof value === typeof defaultValue) {
-				return value as T;
-			}
-
-			// For arrays
-			if (Array.isArray(value) && Array.isArray(defaultValue)) {
-				return value as T;
-			}
-
-			// For objects (excluding null)
-			if (
-				typeof value === 'object' &&
-				value !== null &&
-				typeof defaultValue === 'object' &&
-				defaultValue !== null
-			) {
-				return value as T;
-			}
-
-			// If types don't match, log a warning and return default
-			log.warn(`Type mismatch in storage: expected ${typeof defaultValue}, got ${typeof value}`);
-			return defaultValue;
+			await setObjectInExtensionStorage(key, value);
+			log.debug(`Data saved for key "${key}"`);
+			return true;
 		} catch (error) {
-			log.error('Error validating storage data:', false, error);
-			return defaultValue;
+			log.error(`Error saving data for key "${key}":`, false, error);
+			return false;
 		}
 	}
 
+
 	/**
 	 * Remove data from storage
 	 */
-	public async removeData(key: string): Promise<boolean> {
+	public async removeData(key: string): Promise<void | boolean> {
 		// Ensure initialized
 		if (!this.initialized) {
 			await this.initialize();
 		}
 
-		return this.browserAccessor.performOperation(async (browser: Browser) => {
-			try {
-				await browser.storage.local.remove(key);
-				log.debug(`Data removed for key "${key}"`);
-				return true;
-			} catch (error) {
-				log.error(`Error removing data for key "${key}":`, false, error);
-				return false;
-			}
-		}, false);
+		try {
+			await removeFromExtensionStorage(key);
+			log.debug(`Data removed for key "${key}"`);
+			return true;
+		} catch (error) {
+			log.error(`Error removing data for key "${key}":`, false, error);
+			return false;
+		}
 	}
 
 	/**
@@ -149,16 +88,21 @@ export class StorageService {
 			await this.initialize();
 		}
 
-		return this.browserAccessor.performOperation(async (browser: Browser) => {
-			try {
+		try {
+			// Note: clearAllExtensionStorage should be imported from stores.ts if needed
+			// For now, we'll use the browser API directly via getBrowserExt
+			const { getBrowserExt } = await import('$lib/browser-polyfill-wrapper');
+			const browser = getBrowserExt();
+			if (browser?.storage?.local) {
 				await browser.storage.local.clear();
 				log.debug('All storage data cleared');
 				return true;
-			} catch (error) {
-				log.error('Error clearing storage:', false, error);
-				return false;
 			}
-		}, false);
+			return false;
+		} catch (error) {
+			log.error('Error clearing storage:', false, error);
+			return false;
+		}
 	}
 }
 
diff --git a/packages/yakkl-wallet/src/lib/common/shared/container.ts b/packages/yakkl-wallet/src/lib/common/shared/container.ts
deleted file mode 100644
index aaece65..0000000
--- a/packages/yakkl-wallet/src/lib/common/shared/container.ts
+++ /dev/null
@@ -1,56 +0,0 @@
-// $lib/shared/container.ts
-import { BrowserAccessor } from './BrowserAccessor';
-import { StorageService } from './StorageService';
-
-/**
- * Simple dependency injection container
- */
-export class Container {
-	private static instance: Container;
-	private services: Map<string, any> = new Map();
-
-	private constructor() {
-		// Register core services
-		this.register('browserAccessor', BrowserAccessor.getInstance());
-		this.register('storageService', new StorageService());
-	}
-
-	public static getInstance(): Container {
-		if (!Container.instance) {
-			Container.instance = new Container();
-		}
-		return Container.instance;
-	}
-
-	public register<T>(name: string, instance: T): void {
-		this.services.set(name, instance);
-	}
-
-	public get<T>(name: string): T {
-		const service = this.services.get(name);
-		if (!service) {
-			throw new Error(`Service "${name}" not found in container`);
-		}
-		return service as T;
-	}
-
-	/**
-	 * Initialize all services
-	 */
-	public async initialize(): Promise<void> {
-		// Get the browser accessor
-		const browserAccessor = this.get<BrowserAccessor>('browserAccessor');
-		await browserAccessor.initialize();
-
-		// Initialize storage service
-		const storageService = this.get<StorageService>('storageService');
-		await storageService.initialize();
-
-		// Initialize other services as needed
-	}
-}
-
-// Usage:
-// const container = Container.getInstance();
-// await container.initialize();
-// const storageService = container.get<StorageService>('storageService');
diff --git a/packages/yakkl-wallet/src/lib/common/shared/types.ts b/packages/yakkl-wallet/src/lib/common/shared/types.ts
index 22f6d51..dfc1920 100644
--- a/packages/yakkl-wallet/src/lib/common/shared/types.ts
+++ b/packages/yakkl-wallet/src/lib/common/shared/types.ts
@@ -1,5 +1,5 @@
 // $lib/shared/types.ts
-import type { Browser } from 'webextension-polyfill';
+import type { BrowserAPI } from '$lib/types/browser-types';
 
 // Define storage item types
 export interface StorageSchema {
diff --git a/packages/yakkl-wallet/src/lib/common/storagePort.ts b/packages/yakkl-wallet/src/lib/common/storagePort.ts
index 26477af..4e10b56 100644
--- a/packages/yakkl-wallet/src/lib/common/storagePort.ts
+++ b/packages/yakkl-wallet/src/lib/common/storagePort.ts
@@ -1,6 +1,6 @@
 import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
 import { log } from '$lib/managers/Logger';
-import type { Runtime } from 'webextension-polyfill';
+import type { Runtime } from '$lib/types/browser-types';
 import type { StorageRequest, StorageResponse } from './storageTypes';
 import { getSafeUUID } from './uuid';
 
diff --git a/packages/yakkl-wallet/src/lib/common/stores.ts b/packages/yakkl-wallet/src/lib/common/stores.ts
index dc00226..825d4ba 100644
--- a/packages/yakkl-wallet/src/lib/common/stores.ts
+++ b/packages/yakkl-wallet/src/lib/common/stores.ts
@@ -4,7 +4,7 @@
 
 export const prerender = false;
 
-import { getObjectFromLocalStorage, setObjectInLocalStorage } from '$lib/common/storage';
+import { getObjectFromLocalStorage, setObjectInLocalStorage, removeObjectFromLocalStorage } from '$lib/common/storage';
 import { writable, get } from 'svelte/store';
 import {
 	yakklSettings,
@@ -20,7 +20,6 @@ import {
   yakklWalletBlockchains,
   yakklWalletProviders
 } from '$lib/models/dataModels';
-import { BrowserAccessor } from '$lib/common/shared/BrowserAccessor';
 import {
 	STORAGE_YAKKL_REGISTERED_DATA,
 	STORAGE_YAKKL_ACCOUNTS,
@@ -79,6 +78,9 @@ import { tokens } from './stores/tokens';
 import { log } from '$lib/managers/Logger';
 import { AccountTypeCategory, NetworkType } from '$lib/common/types';
 import type { RSSItem } from '$lib/managers/ExtensionRSSFeedService';
+import { BigNumber, type BigNumberish } from '$lib/common/bignumber';
+import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
+import type { BrowserAPI } from '$lib/types/browser-types';
 
 // Svelte writeable stores
 export const alert = writable({
@@ -199,9 +201,9 @@ export interface TokenCacheEntry {
   tokenAddress: string;
   isNative: boolean;
   symbol: string;            // For quick reference
-  quantity: number;
-  price: number;
-  value: number;
+  quantity: BigNumberish;
+  price: BigNumberish;       // Changed from number
+  value: BigNumberish;       // Changed from number
   lastPriceUpdate: Date;
   lastBalanceUpdate: Date;
   priceProvider: string;     // Changed from provider to priceProvider
@@ -257,6 +259,7 @@ export function resetStores() {
 		setYakklWalletProvidersStore(yakklWalletProviders);
 
     // [] gets set from json data files (usually)
+    setYakklAddressTokenHoldingsStore([]);
 		setYakklTokenDataStore([]);
 		setYakklTokenDataCustomStore([]);
 		setYakklCombinedTokenStore([]);
@@ -396,7 +399,7 @@ export async function syncStorageToStore() {
 			getYakklChats(),
 			getYakklTokenData(),
 			getYakklTokenDataCustom(),
-			getYakklCombinedToken(),
+			getYakklCombinedTokens(),
 			getYakklConnectedDomains(),
 			getYakklAddressTokenHoldings(),
 			getYakklTokenCache(),
@@ -418,7 +421,7 @@ export async function syncStorageToStore() {
 		setYakklTokenDataCustomStore(yakklTokenDataCustom);
 		setYakklCombinedTokenStore(yakklCombinedTokens);
 		setYakklConnectedDomainsStore(yakklConnectedDomains);
-		yakklAddressTokenHoldingsStore.set(yakklAddressTokenHoldings);
+		setYakklAddressTokenHoldingsStore(yakklAddressTokenHoldings);
 		yakklTokenCacheStore.set(yakklTokenCache);
 		yakklWalletBlockchainsStore.set(yakklWalletBlockchains);
 		yakklWalletProvidersStore.set(yakklWalletProviders);
@@ -485,6 +488,11 @@ export function getYakklContactsStore() {
 	return store;
 }
 
+export function getYakklAddressTokenHoldingsStore() {
+	const store = get(yakklAddressTokenHoldingsStore);
+	return store;
+}
+
 export function getYakklTokenDataStore() {
 	const store = get(yakklTokenDataStore);
 	return store;
@@ -637,6 +645,12 @@ export function setYakklContactsStore(values: YakklContact[]) {
 	return store;
 }
 
+export function setYakklAddressTokenHoldingsStore(values: AddressTokenHolding[]) {
+	const store = get(yakklAddressTokenHoldingsStore);
+	yakklAddressTokenHoldingsStore.set(values);
+	return store;
+}
+
 export function setYakklTokenDataStore(values: TokenData[]) {
 	const store = get(yakklTokenDataStore);
 	yakklTokenDataStore.set(values);
@@ -863,7 +877,7 @@ export async function getYakklTokenDataCustom(id?: string, persona?: string): Pr
 	}
 }
 
-export async function getYakklCombinedToken(id?: string, persona?: string): Promise<TokenData[]> {
+export async function getYakklCombinedTokens(id?: string, persona?: string): Promise<TokenData[]> {
 	try {
 		const value = await getObjectFromLocalStorage<TokenData[]>(STORAGE_YAKKL_COMBINED_TOKENS);
 		if (typeof value === 'string') {
@@ -878,7 +892,7 @@ export async function getYakklCombinedToken(id?: string, persona?: string): Prom
 		if (value) setYakklCombinedTokenStore(value);
 		return value || []; // Return an empty array or provide a default value if necessary
 	} catch (error) {
-		log.error('Error in getYakklCombinedToken:', false, error);
+		log.error('Error in getYakklCombinedTokens:', false, error);
 		throw error;
 	}
 }
@@ -1309,10 +1323,12 @@ export async function getYakklTokenCache(): Promise<TokenCacheEntry[]> {
 				}
 
 				// Check if the value matches any suspicious values
-				if (SUSPICIOUS_VALUES.some(suspicious =>
-					Math.abs(entry.value - suspicious) < 0.01 ||
-					Math.abs(entry.price - suspicious) < 0.01
-				)) {
+				if (SUSPICIOUS_VALUES.some(suspicious => {
+					const entryValue = BigNumber.toNumber(entry.value) || 0;
+					const entryPrice = BigNumber.toNumber(entry.price) || 0;
+					return Math.abs(entryValue - suspicious) < 0.01 ||
+						Math.abs(entryPrice - suspicious) < 0.01;
+				})) {
 					log.warn('[Cache] Filtering out suspicious hardcoded value:', false, {
 						symbol: entry.symbol,
 						value: entry.value,
@@ -1366,27 +1382,41 @@ export async function setYakklTokenCacheStorage(values: TokenCacheEntry[], force
 				);
 
 				// If we have a valid existing entry, check if it's not too old
-				if (existingEntry && existingEntry.price > 0 && existingEntry.value > 0) {
-					// Check if the existing entry is fresh enough (less than 5 minutes old)
-					const entryAge = new Date().getTime() - new Date(existingEntry.lastPriceUpdate).getTime();
-					const maxAge = 5 * 60 * 1000; // 5 minutes
+				if (existingEntry) {
+					const existingPrice = BigNumber.toNumber(existingEntry.price) || 0;
+					const existingValue = BigNumber.toNumber(existingEntry.value) || 0;
+
+					if (existingPrice > 0 && existingValue > 0) {
+						// Check if the existing entry is fresh enough (less than 5 minutes old)
+						const entryAge = new Date().getTime() - new Date(existingEntry.lastPriceUpdate).getTime();
+						const maxAge = 5 * 60 * 1000; // 5 minutes
+
+						if (entryAge > maxAge) {
+							log.info('[Cache Validation] Existing entry is too old, not preserving:', false, {
+								symbol: newEntry.symbol,
+								ageMinutes: Math.round(entryAge / 60000),
+								existingValue: existingEntry.value
+							});
+							return null; // Don't preserve old entries
+						}
 
-					if (entryAge > maxAge) {
-						log.info('[Cache Validation] Existing entry is too old, not preserving:', false, {
+						log.debug('[Cache Validation] Preserving recent non-zero cache entry for token:', false, {
 							symbol: newEntry.symbol,
-							ageMinutes: Math.round(entryAge / 60000),
-							existingValue: existingEntry.value
+							existingPrice: existingEntry.price,
+							existingValue: existingEntry.value,
+							ageMinutes: Math.round(entryAge / 60000)
 						});
-						return null; // Don't preserve old entries
+						return existingEntry;
 					}
 
-					log.debug('[Cache Validation] Preserving recent non-zero cache entry for token:', false, {
+					// Otherwise, skip this entry (don't cache zero values)
+					log.warn('[Cache Validation] Skipping zero value cache entry:', false, {
 						symbol: newEntry.symbol,
-						existingPrice: existingEntry.price,
-						existingValue: existingEntry.value,
-						ageMinutes: Math.round(entryAge / 60000)
+						address: newEntry.tokenAddress,
+						price: newEntry.price,
+						value: newEntry.value
 					});
-					return existingEntry;
+					return null;
 				}
 
 				// Otherwise, skip this entry (don't cache zero values)
@@ -1644,18 +1674,17 @@ getYakklBookmarkedArticles().then((articles) => {
 });
 
 // Extension Storage Functions
-export async function setObjectInExtensionStorage(key: string, value: any): Promise<void> {
+export async function setObjectInExtensionStorage(key: string, value: any): Promise<void | boolean> {
 	try {
-		const accessor = BrowserAccessor.getInstance();
-		const browser = await accessor.getBrowser();
-
+    if (typeof window === 'undefined') return null;
+		const browser = getBrowserExt();
 		if (!browser || !browser.storage || !browser.storage.local) {
 			// Fallback to localStorage
 			return setObjectInLocalStorage(key, value);
 		}
 
-		const data = { [key]: value };
-		await browser.storage.local.set(data);
+		await browser.storage.local.set({ [key]: value });
+		return true;
 	} catch (error) {
 		console.error('Error setting extension storage:', error);
 		// Fallback to localStorage
@@ -1665,8 +1694,17 @@ export async function setObjectInExtensionStorage(key: string, value: any): Prom
 
 export async function getObjectFromExtensionStorage<T>(key: string): Promise<T | null> {
 	try {
-		const accessor = BrowserAccessor.getInstance();
-		const browser = await accessor.getBrowser();
+    if (typeof window === 'undefined') return null; // Return null instead of undefined
+
+		// Safely get browser extension API
+		let browser: Browser | null = null;
+		try {
+			browser = getBrowserExt();
+		} catch (err) {
+			// If getBrowserExt fails, fall back to localStorage
+			console.warn('Browser extension API not available, using localStorage fallback');
+			return getObjectFromLocalStorage<T>(key);
+		}
 
 		if (!browser || !browser.storage || !browser.storage.local) {
 			// Fallback to localStorage
@@ -1676,31 +1714,49 @@ export async function getObjectFromExtensionStorage<T>(key: string): Promise<T |
 		const result = await browser.storage.local.get(key);
 		return (result[key] || null) as T;
 	} catch (error) {
-		console.error('Error getting extension storage:', error);
+		// Only log actual errors, not initialization issues
+		if (error && typeof error === 'object' && 'message' in error &&
+		    !error.message.includes('Cannot access') &&
+		    !error.message.includes('before initialization')) {
+			console.error('Error getting extension storage:', error);
+		}
 		// Fallback to localStorage
 		return getObjectFromLocalStorage<T>(key);
 	}
 }
 
-export async function removeFromExtensionStorage(key: string): Promise<void> {
+export async function removeFromExtensionStorage(key: string): Promise<void | boolean> {
 	try {
-		const accessor = BrowserAccessor.getInstance();
-		const browser = await accessor.getBrowser();
+    if (typeof window === 'undefined') return null;
+		const browser = getBrowserExt();
 
 		if (!browser || !browser.storage || !browser.storage.local) {
 			// Fallback to localStorage
-			localStorage.removeItem(key);
-			return;
+			return removeObjectFromLocalStorage(key);
 		}
 
 		await browser.storage.local.remove(key);
+		return true;
 	} catch (error) {
 		console.error('Error removing from extension storage:', error);
 		// Fallback to localStorage
-		localStorage.removeItem(key);
+		return removeObjectFromLocalStorage(key);
 	}
 }
 
+export async function clearAllExtensionStorage(): Promise<void | boolean> {
+  // Disabled for now
+  // if (typeof window === 'undefined') return null;
+  // const browser = getBrowserExt();
+
+  // if (!browser || !browser.storage || !browser.storage.local) {
+  //   return false;
+  // }
+
+  // await browser.storage.local.clear();
+  return true;
+}
+
 // Note: extensionTokenCacheStore is now deprecated - use wallet-cache.store.ts instead
 // For migration purposes, we'll create a temporary shim
 export const extensionTokenCacheStore = {
diff --git a/packages/yakkl-wallet/src/lib/common/stores/settings.ts b/packages/yakkl-wallet/src/lib/common/stores/settings.ts
index 94d57ca..8d1e66f 100644
--- a/packages/yakkl-wallet/src/lib/common/stores/settings.ts
+++ b/packages/yakkl-wallet/src/lib/common/stores/settings.ts
@@ -33,7 +33,7 @@ export async function checkTrialExpiration(): Promise<void> {
 		s.plan.trialEndDate &&
 		new Date(s.plan.trialEndDate).getTime() <= Date.now()
 	) {
-		s.plan.type = PlanType.BASIC_MEMBER;
+		s.plan.type = PlanType.EXPLORER_MEMBER;
 		s.plan.source = AccessSourceType.STANDARD;
 		await setSettings(s);
 		await safeLogout();
diff --git a/packages/yakkl-wallet/src/lib/common/stores/tokenTotals.ts b/packages/yakkl-wallet/src/lib/common/stores/tokenTotals.ts
index 42684b6..1d86deb 100644
--- a/packages/yakkl-wallet/src/lib/common/stores/tokenTotals.ts
+++ b/packages/yakkl-wallet/src/lib/common/stores/tokenTotals.ts
@@ -3,6 +3,7 @@ import { yakklCombinedTokenStore } from '$lib/common/stores';
 import { log } from '$lib/managers/Logger';
 import { DEBUG_ALL_LOGS } from '../constants';
 import { computeTokenValue } from '$lib/common/computeTokenValue'; // Utility function to ensure accurate calculations
+import { BigNumberishUtils } from '../BigNumberishUtils';
 
 // Type definition for the store value
 export type TokenTotals = {
@@ -38,10 +39,11 @@ export const tokenTotals: Readable<TokenTotals> = derived(
 			if (!token) return;
 
 			const { value } = computeTokenValue(token); // Compute accurate token value
-			portfolioTotal += value;
+			const valueNum = BigNumberishUtils.toNumber(value);
+			portfolioTotal += valueNum;
 
 			const chainId = token.chainId ?? -1; // Default to -1 if undefined
-			chainTotals[chainId] = (chainTotals[chainId] ?? 0) + value;
+			chainTotals[chainId] = (chainTotals[chainId] ?? 0) + valueNum;
 		});
 
 		// Format portfolio total
diff --git a/packages/yakkl-wallet/src/lib/common/token-analytics.ts b/packages/yakkl-wallet/src/lib/common/token-analytics.ts
index 623c038..6e72c0e 100644
--- a/packages/yakkl-wallet/src/lib/common/token-analytics.ts
+++ b/packages/yakkl-wallet/src/lib/common/token-analytics.ts
@@ -1,6 +1,8 @@
 // token-analytics.ts - Basic vs Pro token data interfaces and utilities
 
 import type { TokenData } from './interfaces';
+import { BigNumberishUtils } from './BigNumberishUtils';
+import { DecimalMath } from './DecimalMath';
 
 export interface BasicTokenAnalytics {
 	symbol: string;
@@ -134,7 +136,7 @@ export function toBasicAnalytics(token: TokenData): BasicTokenAnalytics {
 	return {
 		symbol: token.symbol,
 		balance: token.balance.toString() || '0',
-		currentPrice: token.price?.price || 0,
+		currentPrice: BigNumberishUtils.toNumber(token.price?.price || 0),
 		value: calculateTokenValue(token),
 		name: token.name,
 		address: token.address,
@@ -184,14 +186,14 @@ export function calculateTokenValue(token: TokenData): number {
 		balanceNum = Number(token.balance);
 	}
 
-	return balanceNum * token.price.price;
+	return DecimalMath.of(balanceNum).mul(BigNumberishUtils.toNumber(token.price.price)).toNumber();
 }
 
 /**
  * Determines if a user should see Pro features
  */
 export function shouldShowProFeatures(userPlan: string): boolean {
-	return userPlan !== 'basic_member';
+	return userPlan !== 'explorer_member';
 }
 
 // Mock data generators for demo purposes
diff --git a/packages/yakkl-wallet/src/lib/common/tokenPriceManager.ts b/packages/yakkl-wallet/src/lib/common/tokenPriceManager.ts
index bf437c0..4afb1ff 100644
--- a/packages/yakkl-wallet/src/lib/common/tokenPriceManager.ts
+++ b/packages/yakkl-wallet/src/lib/common/tokenPriceManager.ts
@@ -1,11 +1,13 @@
 import { writable, get } from 'svelte/store';
-import { yakklCombinedTokenStore, setYakklCombinedTokenStorage } from '$lib/common/stores';
+import { yakklCombinedTokenStore, setYakklCombinedTokenStorage, getYakklTokenCache, setYakklTokenCacheStorage } from '$lib/common/stores';
 import { log } from '$lib/managers/Logger';
 import { PriceManager } from '$lib/managers/PriceManager';
 import { createPriceUpdater } from './createPriceUpdater';
 import { TimerManager } from '$lib/managers/TimerManager';
 import type { TokenData } from '$lib/common/interfaces';
 import { TIMER_TOKEN_PRICE_CYCLE_TIME } from './constants';
+import { balanceCacheManager } from '$lib/managers/BalanceCacheManager';
+import { EthereumBigNumber } from './bignumber-ethereum';
 
 let priceManager: PriceManager | null = null;
 let priceUpdater: any | null = null;
@@ -36,31 +38,37 @@ export async function updateTokenPrices() {
 
 		// Persist to localStorage
 		await setYakklCombinedTokenStorage(updatedTokens);
-		
-		// Update token cache with new prices
+
+		// Update token cache with new prices using precise BigNumber arithmetic
 		try {
-			const { getYakklTokenCache, setYakklTokenCacheStorage } = await import('$lib/common/stores');
 			const cache = await getYakklTokenCache();
-			
-			// Update prices in cache
+
+			// Update prices in cache using EthereumBigNumber for precision
 			const updatedCache = cache.map(entry => {
-				const updatedToken = updatedTokens.find(t => 
-					t.address === entry.tokenAddress && 
+				const updatedToken = updatedTokens.find(t =>
+					t.address === entry.tokenAddress &&
 					t.chainId === entry.chainId
 				);
-				
+
 				if (updatedToken && updatedToken.price?.price) {
+					// Use EthereumBigNumber for precise calculations
+					const quantityBN = EthereumBigNumber.from(entry.quantity);
+					const priceBN = EthereumBigNumber.from(updatedToken.price.price);
+
+					// Calculate value = quantity * price with full precision
+					const valueBN = quantityBN.mul(priceBN);
+
 					return {
 						...entry,
 						price: updatedToken.price.price,
-						value: entry.quantity * updatedToken.price.price,
+						value: valueBN.toBigInt(),
 						lastPriceUpdate: new Date(),
 						priceProvider: updatedToken.price.provider || 'unknown'
 					};
 				}
 				return entry;
 			});
-			
+
 			// Force update to ensure new prices override old cached values
 			await setYakklTokenCacheStorage(updatedCache, true);
 			log.info('[tokenPriceManager] Force updated token cache with new prices, entries:', false, updatedCache.length);
@@ -68,15 +76,25 @@ export async function updateTokenPrices() {
 			log.error('[tokenPriceManager] Failed to update token cache:', false, error);
 		}
 
-		// Update cached balances with new token prices
-		const { balanceCacheManager } = await import('$lib/managers/BalanceCacheManager');
+		// Update cached balances with new token prices using BigNumber comparison
 		const ethToken = updatedTokens.find((token) => token.isNative && token.symbol === 'ETH');
-		if (ethToken && ethToken.price && ethToken.price.price > 0) {
-			balanceCacheManager.updatePriceForAllEntries(ethToken.price.price);
-			log.debug('[updateTokenPrices] Updated cached entries with ETH price:', false, {
-				newPrice: ethToken.price.price,
-				oldIncorrectValue: ethToken.value
-			});
+		if (ethToken && ethToken.price?.price) {
+			// Use BigNumber for precise price comparison
+			const ethPriceBN = EthereumBigNumber.from(ethToken.price.price);
+			const zeroBN = EthereumBigNumber.from(0);
+
+			if (ethPriceBN.compare(zeroBN) > 0) {
+				// Convert price to number for legacy balanceCacheManager (until we update it)
+				const ethPriceNumber = ethPriceBN.toNumber();
+				if (ethPriceNumber && ethPriceNumber > 0) {
+					balanceCacheManager.updatePriceForAllEntries(ethPriceNumber);
+					log.debug('[updateTokenPrices] Updated cached entries with ETH price:', false, {
+						newPrice: ethPriceNumber,
+						newPriceBN: ethPriceBN.toString(),
+						ethTokenValue: ethToken.value?.toString()
+					});
+				}
+			}
 		}
 
 		log.info('updateTokenPrices: Successfully updated and persisted token prices');
@@ -118,4 +136,4 @@ updateTokenPrices().then(() => {
 	log.info('Initial token price update completed');
 }).catch(error => {
 	log.error('Initial token price update failed:', false, error);
-});
\ No newline at end of file
+});
diff --git a/packages/yakkl-wallet/src/lib/common/tokens.ts b/packages/yakkl-wallet/src/lib/common/tokens.ts
index bbc6495..8f0e36d 100644
--- a/packages/yakkl-wallet/src/lib/common/tokens.ts
+++ b/packages/yakkl-wallet/src/lib/common/tokens.ts
@@ -7,11 +7,13 @@ import {
 	setYakklTokenDataCustomStorage,
 	setYakklTokenDataStorage,
 	updateCombinedTokenStore,
-	yakklCombinedTokenStore
+	yakklCombinedTokenStore,
+  yakklPricingStore
 } from '$lib/common/stores';
 import { isEqual } from 'lodash-es';
 import { log } from '$lib/managers/Logger';
 import { computeTokenValue } from './computeTokenValue';
+import { balanceCacheManager } from '$lib/managers/BalanceCacheManager';
 
 // Helper functions to get balance for a token
 
@@ -30,16 +32,13 @@ export async function getTokenBalance(
       log.warn('No provider found');
       return undefined;
     }
-    
+
 		// Handle native tokens (like ETH)
 		if (token.isNative) {
 			const balance = await provider.getBalance(userAddress);
 
 			// Update cache for native token balance
-			const { balanceCacheManager } = await import('$lib/managers/BalanceCacheManager');
-			const { yakklPricingStore } = await import('$lib/common/stores');
-			const { get: getStore } = await import('svelte/store');
-			const currentPrice = getStore(yakklPricingStore)?.price;
+			const currentPrice = get(yakklPricingStore)?.price;
 			if (currentPrice) {
 				balanceCacheManager.setCachedBalance(userAddress, balance, currentPrice);
 				log.debug('[tokens] Updated cache for native token balance');
diff --git a/packages/yakkl-wallet/src/lib/common/types.ts b/packages/yakkl-wallet/src/lib/common/types.ts
index 8bdd5af..85b6fe9 100644
--- a/packages/yakkl-wallet/src/lib/common/types.ts
+++ b/packages/yakkl-wallet/src/lib/common/types.ts
@@ -142,7 +142,7 @@ export enum AccountTypeStatus {
 }
 
 export enum RegisteredType {
-	BASIC_MEMBER = 'basic_member',
+	EXPLORER_MEMBER = 'explorer_member',
 	FOUNDING_MEMBER = 'founding_member',
 	EARLY_ADOPTER = 'early_adopter',
 	YAKKL_PRO = 'yakkl_pro',
@@ -153,7 +153,7 @@ export enum RegisteredType {
 
 export enum PlanType {
 	TRIAL = 'trial',
-	BASIC_MEMBER = 'basic_member',
+	EXPLORER_MEMBER = 'explorer_member',
 	FOUNDING_MEMBER = 'founding_member',
 	EARLY_ADOPTER = 'early_adopter',
 	YAKKL_PRO = 'yakkl_pro',
diff --git a/packages/yakkl-wallet/src/lib/common/types/browser-extensions.ts b/packages/yakkl-wallet/src/lib/common/types/browser-extensions.ts
index a8d668d..8cec8d7 100644
--- a/packages/yakkl-wallet/src/lib/common/types/browser-extensions.ts
+++ b/packages/yakkl-wallet/src/lib/common/types/browser-extensions.ts
@@ -1,4 +1,4 @@
-import type { Browser as WebExtensionBrowser } from 'webextension-polyfill';
+import type { Browser as WebExtensionBrowser } from '$lib/types/browser-types';
 
 // Define the side panel interface
 interface SidePanelAPI {
diff --git a/packages/yakkl-wallet/src/lib/common/utils.ts b/packages/yakkl-wallet/src/lib/common/utils.ts
index aac0077..2c13435 100644
--- a/packages/yakkl-wallet/src/lib/common/utils.ts
+++ b/packages/yakkl-wallet/src/lib/common/utils.ts
@@ -21,7 +21,7 @@ import { browser_ext } from './environment';
 import { ethers as ethersv6 } from 'ethers-v6';
 import { get } from 'svelte/store';
 import { log } from '$lib/managers/Logger';
-import type { Runtime } from 'webextension-polyfill';
+import type { Runtime } from '$lib/types/browser-types';
 
 // Global flag to track extension context validity
 let extensionContextValid = true;
@@ -109,7 +109,7 @@ export async function isProLevel(): Promise<boolean> {
 
 export async function isStandard(): Promise<boolean> {
 	const settings = await getSettings();
-	return settings?.plan.type === PlanType.BASIC_MEMBER;
+	return settings?.plan.type === PlanType.EXPLORER_MEMBER;
 }
 
 export async function setRegisteredType(type: PlanType): Promise<void> {
@@ -184,7 +184,7 @@ export function normalizeUserPlan(settings: Settings): Settings {
 			...settings,
 			plan: {
 				...settings.plan,
-				type: PlanType.BASIC_MEMBER,
+				type: PlanType.EXPLORER_MEMBER,
 				source: AccessSourceType.STANDARD,
 				trialEndDate: null,
 				promo: null,
diff --git a/packages/yakkl-wallet/src/lib/components/AccountActivity.svelte b/packages/yakkl-wallet/src/lib/components/AccountActivity.svelte
index b5c6a11..77dea2f 100644
--- a/packages/yakkl-wallet/src/lib/components/AccountActivity.svelte
+++ b/packages/yakkl-wallet/src/lib/components/AccountActivity.svelte
@@ -3,11 +3,10 @@
   import { uiStore } from '$lib/stores/ui.store';
   import { modalStore } from '$lib/stores/modal.store';
   import ProtectedValue from './ProtectedValue.svelte';
-  import type { TransactionDisplay } from '$lib/types';
-  import type { YakklAccount as Account } from '$lib/types';
-  
+  import type { TransactionDisplay, AccountDisplay } from '$lib/types';
+
   interface Props {
-    account: Account;
+    account: AccountDisplay;
     chainId: number;
     chainName: string;
     transactions: TransactionDisplay[];
@@ -17,10 +16,10 @@
     onCopyAddress?: (address: string) => void;
     onTransactionClick?: (transaction: TransactionDisplay) => void;
   }
-  
+
   let {
     account,
-    chainId, 
+    chainId,
     chainName,
     transactions = [],
     ethPrice = 0,
@@ -29,23 +28,23 @@
     onCopyAddress,
     onTransactionClick
   }: Props = $props();
-  
+
   // Filter transactions for this account and chain
   let accountTransactions = $derived(
-    transactions.filter(tx => 
-      (tx.from.toLowerCase() === account.address.toLowerCase() || 
+    transactions.filter(tx =>
+      (tx.from.toLowerCase() === account.address.toLowerCase() ||
        tx.to.toLowerCase() === account.address.toLowerCase()) &&
       tx.chainId === chainId
     )
   );
-  
+
   // Apply max transactions limit if set
   let displayTransactions = $derived(
-    maxTransactions > 0 
+    maxTransactions > 0
       ? accountTransactions.slice(0, maxTransactions)
       : accountTransactions
   );
-  
+
   // Calculate account total value from transactions
   let accountTotal = $derived.by(() => {
     return accountTransactions.reduce((total, tx) => {
@@ -54,7 +53,7 @@
       return total + (isOutgoing ? -value : value);
     }, 0);
   });
-  
+
   function formatAmount(value: string): string {
     try {
       const num = parseFloat(value);
@@ -66,7 +65,7 @@
       return value;
     }
   }
-  
+
   function calculateFiatValue(ethAmount: string): number {
     try {
       const amount = parseFloat(ethAmount);
@@ -75,7 +74,7 @@
       return 0;
     }
   }
-  
+
   function formatFiatValue(value: number): string {
     if (value === 0) return '';
     return new Intl.NumberFormat('en-US', {
@@ -85,12 +84,12 @@
       maximumFractionDigits: 2
     }).format(value);
   }
-  
+
   function shortAddress(address: string): string {
     if (!address) return '';
     return `${address.slice(0, 6)}...${address.slice(-4)}`;
   }
-  
+
   function formatTime(timestamp: number): string {
     const now = Date.now();
     const diff = now - timestamp;
@@ -104,11 +103,11 @@
     if (hours < 24) return `${hours}h ago`;
     return `${days}d ago`;
   }
-  
+
   function getTransactionDirection(tx: TransactionDisplay): 'sent' | 'received' {
     return tx.from.toLowerCase() === account.address.toLowerCase() ? 'sent' : 'received';
   }
-  
+
   function getStatusColor(status: string): string {
     switch (status) {
       case 'confirmed':
@@ -120,7 +119,7 @@
         return 'bg-yellow-200 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200';
     }
   }
-  
+
   function getTransactionIcon(type: string): string {
     switch (type) {
       case 'send':
@@ -135,7 +134,7 @@
         return '';
     }
   }
-  
+
   async function copyAddress(address: string) {
     if (onCopyAddress) {
       onCopyAddress(address);
@@ -149,21 +148,21 @@
       }
     }
   }
-  
+
   function handleTransactionClick(tx: TransactionDisplay) {
     if (onTransactionClick) {
       onTransactionClick(tx);
     }
   }
-  
+
   function getAccountType(): string {
     if (account.accountType === 'imported') return 'Imported';
-    if (account.smartContract) return 'Contract';
+    if (account.accountType === 'contract') return 'Contract';
     if (account.accountType === 'primary') return 'Primary';
     if (account.accountType === 'sub') return 'Sub-account';
     return 'Account';
   }
-  
+
   function handleShowAllTransactions() {
     // Open modal with all transactions for this account
     modalStore.openModal('transactionList', {
@@ -204,7 +203,7 @@
       </div>
     </div>
   {/if}
-  
+
   {#if displayTransactions.length === 0}
     <div class="text-center py-4 text-xs text-gray-500 dark:text-gray-400">
       No transactions for this account
@@ -304,7 +303,7 @@
       </tbody>
     </table>
     </div>
-    
+
     {#if maxTransactions > 0 && accountTransactions.length > maxTransactions}
       <!-- Show all transactions link -->
       <div class="mt-3 text-center">
@@ -316,7 +315,7 @@
         </button>
       </div>
     {/if}
-    
+
     {#if showHeader}
       <!-- Account footer with totals -->
       <div class="mt-2 pt-2 border-t border-zinc-200 dark:border-zinc-700 space-y-1">
@@ -353,4 +352,4 @@
   td span.rounded-full {
     margin-top: 4px;
   }
-</style>
\ No newline at end of file
+</style>
diff --git a/packages/yakkl-wallet/src/lib/components/AddCustomToken.svelte b/packages/yakkl-wallet/src/lib/components/AddCustomToken.svelte
index 92ec36e..5b6dfd0 100644
--- a/packages/yakkl-wallet/src/lib/components/AddCustomToken.svelte
+++ b/packages/yakkl-wallet/src/lib/components/AddCustomToken.svelte
@@ -11,6 +11,7 @@
   import { Coins, AlertCircle, Info } from 'lucide-svelte';
   import type { TokenData } from '$lib/common/interfaces';
   import { VERSION } from '$lib/common/constants';
+  import { EthereumBigNumber } from '$lib/common/bignumber-ethereum';
 
   interface Props {
     show?: boolean;
@@ -121,7 +122,7 @@
         decimals: values.decimals,
         chainId: values.chainId,
         balance: 0n,
-        quantity: 0,
+        quantity: new EthereumBigNumber(0),
         price: {
           price: 0,
           isNative: false,
diff --git a/packages/yakkl-wallet/src/lib/components/BookmarkedArticles.svelte b/packages/yakkl-wallet/src/lib/components/BookmarkedArticles.svelte
index 4b91c7f..8597521 100644
--- a/packages/yakkl-wallet/src/lib/components/BookmarkedArticles.svelte
+++ b/packages/yakkl-wallet/src/lib/components/BookmarkedArticles.svelte
@@ -82,7 +82,6 @@
 		sortDirection.update((d) => (d === 'asc' ? 'desc' : 'asc'));
 	}
 
-
 	// Only show locked footer if not pro
 	let showLockedFooter = $state(false);
 
@@ -134,7 +133,7 @@
 					<div
 						class="group-hover:bg-gray-50 dark:group-hover:bg-zinc-800/50 transition-colors duration-200 relative"
 					>
-						<NewsFeedLineView newsItem={article} />
+						<NewsFeedLineView newsItem={article} showDate={true} />
 						<ArticleControls
 							{article}
 							bookmarkEnabled={true}
diff --git a/packages/yakkl-wallet/src/lib/components/ChainActivity.svelte b/packages/yakkl-wallet/src/lib/components/ChainActivity.svelte
index eb640d4..32bc128 100644
--- a/packages/yakkl-wallet/src/lib/components/ChainActivity.svelte
+++ b/packages/yakkl-wallet/src/lib/components/ChainActivity.svelte
@@ -1,12 +1,11 @@
 <!-- ChainActivity.svelte - Shows all accounts' transactions for a single chain -->
 <script lang="ts">
   import AccountActivity from './AccountActivity.svelte';
-  import type { TransactionDisplay, ChainDisplay } from '$lib/types';
-  import type { YakklAccount as Account } from '$lib/types';
+  import type { TransactionDisplay, ChainDisplay, AccountDisplay } from '$lib/types';
   
   interface Props {
     chain: ChainDisplay;
-    accounts: Account[];
+    accounts: AccountDisplay[];
     transactions: TransactionDisplay[];
     ethPrice?: number;
     showChainHeader?: boolean;
diff --git a/packages/yakkl-wallet/src/lib/components/EmergencyKit.svelte b/packages/yakkl-wallet/src/lib/components/EmergencyKit.svelte
index 7d17e35..efb0769 100644
--- a/packages/yakkl-wallet/src/lib/components/EmergencyKit.svelte
+++ b/packages/yakkl-wallet/src/lib/components/EmergencyKit.svelte
@@ -6,13 +6,13 @@
   import { log } from '$lib/common/logger-wrapper';
   import { getMiscStore } from '$lib/common/stores';
   import EmergencyKitShamir from './EmergencyKitShamir.svelte';
-  
+
   let { onClose } = $props();
-  
+
   let account = $derived($currentAccount);
   let chain = $derived($currentChain);
   let allAccounts = $derived($accounts);
-  
+
   let showPrivateKey = $state(false);
   let showSeedPhrase = $state(false);
   let copied = $state(false);
@@ -22,24 +22,24 @@
   let metadata = $state<any>(null);
   let showShamirModal = $state(false);
   let emergencyKitData = $state<any>(null);
-  
+
   function handlePrint() {
     // Navigate to the dedicated print page
     window.open('/accounts/print-emergency-kit', '_blank');
   }
-  
+
   async function handleExport() {
     loading = true;
     try {
       // Get all the necessary data
-      const { 
+      const {
         getPreferences, getSettings, getProfile, getYakklCurrentlySelected,
         getYakklContacts, getYakklChats, getYakklAccounts, getYakklPrimaryAccounts,
         getYakklWatchList, getYakklBlockedList, getYakklConnectedDomains,
-        getYakklTokenData, getYakklTokenDataCustom, getYakklCombinedToken,
+        	getYakklTokenData, getYakklTokenDataCustom, getYakklCombinedTokens,
         getYakklWalletProviders, getYakklWalletBlockchains
       } = await import('$lib/common/stores');
-      
+
       const preferences = await getPreferences();
       const settings = await getSettings();
       const profile = await getProfile();
@@ -54,7 +54,7 @@
       const passwordOrSaltedKey = getMiscStore();
       const tokenData = await getYakklTokenData();
       const tokenDataCustom = await getYakklTokenDataCustom();
-      const combinedTokenStore = await getYakklCombinedToken();
+      		const combinedTokenStore = await getYakklCombinedTokens();
       const walletProviders = await getYakklWalletProviders();
       const walletBlockchains = await getYakklWalletBlockchains();
 
@@ -86,12 +86,12 @@
       emergencyKitData = bulkEmergencyKit;
 
       const fileName = await EmergencyKitManager.downloadBulkEmergencyKit(bulkEmergencyKit);
-      
+
       await notificationService.show({
         message: `Emergency kit exported successfully as ${fileName}`,
         type: 'success'
       });
-      
+
       // Don't close yet - user might want to create Shamir shards
     } catch (err) {
       log.error('Failed to export emergency kit', false, err);
@@ -103,7 +103,7 @@
       loading = false;
     }
   }
-  
+
   async function handleFileSelect(event: Event) {
     const target = event.target as HTMLInputElement;
     if (target.files && target.files.length > 0) {
@@ -115,7 +115,7 @@
       }
     }
   }
-  
+
   async function handleImport() {
     if (!file) {
       await notificationService.show({
@@ -124,7 +124,7 @@
       });
       return;
     }
-    
+
     loading = true;
     try {
       const passwordOrSaltedKey = getMiscStore();
@@ -138,13 +138,13 @@
         message: 'Emergency kit imported successfully. Logging out...',
         type: 'success'
       });
-      
+
       // Logout after import
       const { safeLogout } = await import('$lib/common/safeNavigate');
       setTimeout(() => {
         safeLogout();
       }, 2000);
-      
+
     } catch (err) {
       log.error('Failed to import emergency kit', false, err);
       await notificationService.show({
@@ -173,7 +173,7 @@
           </svg>
         </button>
       </div>
-      
+
       <!-- Mode Tabs -->
       <div class="flex gap-1 mt-4 bg-zinc-100 dark:bg-zinc-900 rounded-lg p-1">
         <button
@@ -190,7 +190,7 @@
         </button>
       </div>
     </div>
-    
+
     <!-- Warning Banner -->
     <div class="bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 p-4 m-6">
       <div class="flex items-start gap-3">
@@ -200,13 +200,13 @@
         <div>
           <h3 class="font-semibold text-red-800 dark:text-red-200">Critical Security Information</h3>
           <p class="text-sm text-red-700 dark:text-red-300 mt-1">
-            This kit contains sensitive information that provides complete access to your wallet. 
+            This kit contains sensitive information that provides complete access to your wallet.
             Store it securely and never share it with anyone.
           </p>
         </div>
       </div>
     </div>
-    
+
     <!-- Content -->
     <div class="p-6 space-y-6">
       {#if mode === 'export'}
@@ -225,7 +225,7 @@
               </p>
             </div>
           </div>
-          
+
           <div class="bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4">
             <h4 class="font-medium text-amber-800 dark:text-amber-200 mb-2">What's Included:</h4>
             <ul class="space-y-1 text-sm text-amber-700 dark:text-amber-300">
@@ -252,7 +252,7 @@
               </p>
             </div>
           </div>
-          
+
           <div class="space-y-4">
             <div>
               <label for="importFile" class="block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-2">
@@ -266,7 +266,7 @@
                 class="w-full px-3 py-2 border border-zinc-300 dark:border-zinc-600 rounded-lg bg-white dark:bg-zinc-900 text-zinc-900 dark:text-white file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100 dark:file:bg-indigo-900/30 dark:file:text-indigo-400"
               />
             </div>
-            
+
             {#if metadata}
               <div class="bg-zinc-50 dark:bg-zinc-900/50 rounded-lg p-4 space-y-2">
                 <h4 class="font-medium text-zinc-900 dark:text-white">Kit Details:</h4>
@@ -277,7 +277,7 @@
                   <p>Type: {metadata.type}</p>
                 </div>
               </div>
-              
+
               <div class="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4">
                 <p class="text-sm text-red-700 dark:text-red-300">
                   <strong>Important:</strong> YAKKL will automatically log out after import. You'll need to log in again with your password.
@@ -288,7 +288,7 @@
         </div>
       {/if}
     </div>
-    
+
     <!-- Actions -->
     <div class="p-6 border-t border-zinc-200 dark:border-zinc-700 flex flex-wrap gap-3">
       {#if mode === 'export'}
@@ -307,7 +307,7 @@
             Export Emergency Kit
           {/if}
         </button>
-        
+
         {#if emergencyKitData}
           <button
             onclick={() => showShamirModal = true}
@@ -337,7 +337,7 @@
           {/if}
         </button>
       {/if}
-      
+
       <button
         onclick={onClose}
         class="yakkl-btn-secondary ml-auto"
@@ -349,7 +349,7 @@
 </div>
 
 <!-- Shamir's Secret Sharing Modal -->
-<EmergencyKitShamir 
+<EmergencyKitShamir
   bind:show={showShamirModal}
   {emergencyKitData}
   onComplete={() => {
@@ -364,13 +364,13 @@
       position: static;
       background: white;
     }
-    
+
     button {
       display: none;
     }
-    
+
     .max-h-\[90vh\] {
       max-height: none;
     }
   }
-</style>
\ No newline at end of file
+</style>
diff --git a/packages/yakkl-wallet/src/lib/components/EthUnitConverter.svelte b/packages/yakkl-wallet/src/lib/components/EthUnitConverter.svelte
index 75d46b1..681ca3f 100644
--- a/packages/yakkl-wallet/src/lib/components/EthUnitConverter.svelte
+++ b/packages/yakkl-wallet/src/lib/components/EthUnitConverter.svelte
@@ -7,6 +7,7 @@
 	import { CoingeckoPriceProvider } from '$lib/managers/providers/price/coingecko/CoingeckoPriceProvider';
 	import { KrakenPriceProvider } from '$lib/managers/providers/price/kraken/KrakenPriceProvider';
 	import { log } from '$lib/managers/Logger';
+	import { BigNumberishUtils } from '$lib/common/BigNumberishUtils';
 
 	let {
 		show = $bindable(false),
@@ -157,7 +158,7 @@
 	async function fetchEthPrice() {
 		try {
 			const result = await priceManager.getMarketPrice('ETH-USD');
-			ethPrice = result && typeof result === 'object' && 'price' in result ? result.price : 0;
+			ethPrice = result && typeof result === 'object' && 'price' in result ? BigNumberishUtils.toNumber(result.price) : 0;
 		} catch (error) {
 			log.error('Failed to fetch ETH price:', false, error);
 			ethPrice = 0;
diff --git a/packages/yakkl-wallet/src/lib/components/ExportPrivateKey.svelte b/packages/yakkl-wallet/src/lib/components/ExportPrivateKey.svelte
index 813fded..4a2048f 100644
--- a/packages/yakkl-wallet/src/lib/components/ExportPrivateKey.svelte
+++ b/packages/yakkl-wallet/src/lib/components/ExportPrivateKey.svelte
@@ -3,9 +3,9 @@
   import { onMount } from 'svelte';
   import { yakklCurrentlySelectedStore } from '$lib/common/stores';
   import { get } from 'svelte/store';
-  import PincodeVerify from './v1/PincodeVerify.svelte';
+  import PincodeVerify from './PincodeVerify.svelte';
   import Modal from '$lib/components/Modal.svelte';
-  import Copy from './v1/Copy.svelte';
+  import Copy from './Copy.svelte';
   import { AlertTriangle, Key } from 'lucide-svelte';
   import { sendToBackground } from '$lib/services/message.service';
 
diff --git a/packages/yakkl-wallet/src/lib/components/ExtensionRSSNewsFeed.svelte b/packages/yakkl-wallet/src/lib/components/ExtensionRSSNewsFeed.svelte
index efbc674..09b8b35 100644
--- a/packages/yakkl-wallet/src/lib/components/ExtensionRSSNewsFeed.svelte
+++ b/packages/yakkl-wallet/src/lib/components/ExtensionRSSNewsFeed.svelte
@@ -53,31 +53,40 @@
 	const timerManager = UnifiedTimerManager.getInstance();
 	const timerId = 'rss-feed-refresh';
 
-	// Subscribe to store changes
-	const unsubscribeStore = rssStore.subscribe(items => {
-		newsItems = items;
-		// Only set isFirstLoad to false if we have items
-		if (items.length > 0) {
-			isFirstLoad = false;
-		}
-	});
+	// Store unsubscribe functions
+	let unsubscribeStore: (() => void) | null = null;
+	let unsubscribeLoading: (() => void) | null = null;
+	let unsubscribeUpdating: (() => void) | null = null;
+	let unsubscribeLastUpdate: (() => void) | null = null;
 
-	const unsubscribeLoading = rssStore.isLoading.subscribe(loading => {
-		// Only show loading spinner on first load when we have no items
-		if (newsItems.length === 0) {
-			isLoading = loading;
-		}
-	});
+	// Store message listener reference for cleanup
+	let messageListener: ((message: any, sender: any, sendResponse: any) => boolean) | null = null;
 
-	const unsubscribeUpdating = rssStore.isUpdating.subscribe(updating => {
-		isUpdating = updating;
-	});
+	onMount(async () => {
+		// Subscribe to store changes
+		unsubscribeStore = rssStore.subscribe(items => {
+			newsItems = items;
+			// Only set isFirstLoad to false if we have items
+			if (items.length > 0) {
+				isFirstLoad = false;
+			}
+		});
 
-	const unsubscribeLastUpdate = rssStore.lastUpdateTime.subscribe(time => {
-		lastUpdateTime = time;
-	});
+		unsubscribeLoading = rssStore.isLoading.subscribe(loading => {
+			// Only show loading spinner on first load when we have no items
+			if (newsItems.length === 0) {
+				isLoading = loading;
+			}
+		});
+
+		unsubscribeUpdating = rssStore.isUpdating.subscribe(updating => {
+			isUpdating = updating;
+		});
+
+		unsubscribeLastUpdate = rssStore.lastUpdateTime.subscribe(time => {
+			lastUpdateTime = time;
+		});
 
-	onMount(async () => {
 		// Initialize store if needed
 		await rssStore.init();
 		
@@ -97,7 +106,7 @@
 		timerManager.startInterval(timerId);
 
 		// Listen for updates from background script
-		const messageListener = (message: any, sender: any, sendResponse: any): boolean => {
+		messageListener = (message: any, sender: any, sendResponse: any): boolean => {
 			if (message.type === 'RSS_FEED_UPDATE') {
 				backgroundUpdate();
 				return true;
@@ -106,17 +115,19 @@
 		};
 
 		browser_ext.runtime.onMessage.addListener(messageListener as any);
+	});
 
-		// Return cleanup function
-		onDestroy(() => {
-			unsubscribeStore();
-			unsubscribeLoading();
-			unsubscribeUpdating();
-			unsubscribeLastUpdate();
-			timerManager.stopInterval(timerId);
-			timerManager.removeInterval(timerId);
+	// Clean up on component destroy
+	onDestroy(() => {
+		if (unsubscribeStore) unsubscribeStore();
+		if (unsubscribeLoading) unsubscribeLoading();
+		if (unsubscribeUpdating) unsubscribeUpdating();
+		if (unsubscribeLastUpdate) unsubscribeLastUpdate();
+		timerManager.stopInterval(timerId);
+		timerManager.removeInterval(timerId);
+		if (messageListener) {
 			browser_ext.runtime.onMessage.removeListener(messageListener as any);
-		});
+		}
 	});
 
 	// Fetch all feeds and update the store
diff --git a/packages/yakkl-wallet/src/lib/components/ImportPhrase.svelte b/packages/yakkl-wallet/src/lib/components/ImportPhrase.svelte
index ac352ec..cf81ac3 100644
--- a/packages/yakkl-wallet/src/lib/components/ImportPhrase.svelte
+++ b/packages/yakkl-wallet/src/lib/components/ImportPhrase.svelte
@@ -100,8 +100,8 @@
 		});
 
 		if (!response.success) {
-			const errorMessage = typeof response.error === 'object' && response.error?.message 
-				? response.error.message 
+			const errorMessage = typeof response.error === 'object' && response.error?.message
+				? response.error.message
 				: 'Failed to import recovery phrase';
 			throw new Error(errorMessage);
 		}
@@ -126,7 +126,11 @@
 
 		// Show success notification
 		const notificationModule = await import('$lib/services/notification.service');
-		notificationModule.notificationService.showToast('Success', 'Recovery phrase imported successfully', 'success');
+		notificationModule.notificationService.show({
+			title: 'Success',
+			message: 'Recovery phrase imported successfully',
+			type: 'success'
+		});
 	}
 
 	function resetForm() {
diff --git a/packages/yakkl-wallet/src/lib/components/Login.svelte b/packages/yakkl-wallet/src/lib/components/Login.svelte
index 322313b..c7199ec 100644
--- a/packages/yakkl-wallet/src/lib/components/Login.svelte
+++ b/packages/yakkl-wallet/src/lib/components/Login.svelte
@@ -73,7 +73,6 @@
 				const profile = await authStore.login(username, password);
 				const digest = getMiscStore();
 
-				log.info('Login.svelte: useAuthStore: digest =', false, digest);
 				if (!digest) {
 					throw 'Authentication succeeded but failed to retrieve security digest';
 				}
@@ -83,15 +82,15 @@
 
 				props.onSuccess(profile, digest, minimumAuth, jwtToken);
 				return;
-			}
+			} else {
+        log.warn('Login.svelte: useAuthStore is disabled, using verify', false, props);
+      }
 
 			// Original verification method
 			// Format the username properly (removing .nfs.id if already present, then adding it)
 			const normalizedUsername = username.toLowerCase().trim().replace('.nfs.id', '');
 			const loginString = normalizedUsername + '.nfs.id' + password;
 
-			log.error('Login.svelte: loginString =', false, loginString);
-			log.error('Login.svelte: username =', false, username);
 			// Call the existing verify function - this is your core authentication
 			const profile = await verify(loginString);
 
@@ -118,7 +117,7 @@
 					log.info('Login.svelte: settings.plan =', false, settings?.plan);
 					log.info('Login.svelte: settings.plan.type =', false, settings?.plan?.type);
 
-					const planLevel = settings?.plan?.type || 'basic';
+					const planLevel = settings?.plan?.type || 'explorer_member';
 
 					// Generate JWT token
 					jwtToken = await jwtManager.generateToken(
diff --git a/packages/yakkl-wallet/src/lib/components/ManageAccounts.svelte b/packages/yakkl-wallet/src/lib/components/ManageAccounts.svelte
index 3258cb8..33f0450 100644
--- a/packages/yakkl-wallet/src/lib/components/ManageAccounts.svelte
+++ b/packages/yakkl-wallet/src/lib/components/ManageAccounts.svelte
@@ -4,23 +4,25 @@
   import { goto } from '$app/navigation';
   import { displayTokens } from '$lib/stores/token.store';
   import Modal from './Modal.svelte';
-  import ProtectedValue from './v1/ProtectedValue.svelte';
-  import EditControls from './v1/EditControls.svelte';
+  import ProtectedValue from './ProtectedValue.svelte';
+  // import EditControls from './EditControls.svelte'; // TODO: Component missing, needs to be created
   import type { AccountDisplay } from '$lib/types';
-  
+  import { BigNumberishUtils } from '$lib/common/BigNumberishUtils';
+  import { DecimalMath } from '$lib/common/DecimalMath';
+
   interface Props {
     onClose: () => void;
   }
-  
+
   let { onClose }: Props = $props();
-  
+
   let allAccounts = $derived($accounts);
   let current = $derived($currentAccount);
   let tokens = $derived($displayTokens);
   let editingAccount = $state<any>(null);
   let showOptions = $state<Record<string, boolean>>({});
   let editingName = $state('');
-  
+
   async function selectAccount(account: any) {
     if (account.address === current?.address) {
       // If already selected, close modal and go to home
@@ -28,7 +30,7 @@
       await goto('/home');
       return;
     }
-    
+
     try {
       await accountStore.switchAccount(account.address);
       uiStore.showSuccess('Account Switched', `Now using ${account.ens || account.username || 'account'}`);
@@ -39,19 +41,19 @@
       uiStore.showError('Switch Failed', 'Unable to switch accounts');
     }
   }
-  
+
   function toggleOptions(address: string) {
     showOptions[address] = !showOptions[address];
   }
-  
+
   async function editAccount(account: any) {
     editingAccount = account;
     editingName = account.ens || account.username || '';
   }
-  
+
   async function saveAccountName() {
     if (!editingAccount || !editingName.trim()) return;
-    
+
     try {
       // Update account name
       await accountStore.updateAccountName(editingAccount.address, editingName.trim());
@@ -62,25 +64,25 @@
       uiStore.showError('Update Failed', 'Unable to update account name');
     }
   }
-  
+
   async function printAccount(account: any) {
     // Store account for emergency kit printing
     sessionStorage.setItem('print-account', account.address);
     window.open('/accounts/print-emergency-kit', '_blank');
   }
-  
+
   async function exportAccount(account: any) {
     sessionStorage.setItem('export-account', account.address);
     await goto('/accounts/export');
     onClose();
   }
-  
+
   async function deleteAccount(account: any) {
     if (allAccounts.length <= 1) {
       uiStore.showError('Cannot Delete', 'You must have at least one account');
       return;
     }
-    
+
     if (confirm(`Are you sure you want to delete ${account.ens || account.username || 'this account'}?`)) {
       try {
         await accountStore.deleteAccount(account.address);
@@ -91,7 +93,7 @@
       }
     }
   }
-  
+
   async function copyAddress(address: string) {
     try {
       await navigator.clipboard.writeText(address);
@@ -100,33 +102,45 @@
       console.error('Failed to copy:', error);
     }
   }
-  
+
   function shortAddr(addr: string) {
     if (!addr) return '';
     return `${addr.slice(0, 6)}...${addr.slice(-4)}`;
   }
-  
+
   // Calculate total value for account across all tokens
   function getAccountValue(address: string): number {
     if (!tokens || !Array.isArray(tokens)) return 0;
-    
+
     // In multi-chain view, tokens are already filtered by address
     // In single-chain view, we need to check if this is the current account
     if (address === current?.address) {
       return tokens.reduce((sum, token) => {
-        const value = typeof token.value === 'number' ? token.value : parseFloat(token.value || '0');
+        // Simple and consistent: always use BigNumberishUtils.toNumber for any value
+        const value = BigNumberishUtils.toNumber(token.value || 0);
         return sum + value;
       }, 0);
     }
-    
+
     // For other accounts, we don't have their balance data
     return 0;
   }
-  
+
   // Get total token count for account
   function getTokenCount(address: string): number {
     if (!tokens || !Array.isArray(tokens) || address !== current?.address) return 0;
-    return tokens.filter(token => (token.qty || 0) > 0).length;
+
+    return tokens.filter(token => {
+      // Simple approach: get the balance/qty value and check if > 0
+      // Handle both TokenDisplay (with qty) and TokenCache (with balance) types
+      let amount: any = 0;
+      if ('qty' in token) {
+        amount = token.qty;
+      } else if ('balance' in token) {
+        amount = token.balance;
+      }
+      return BigNumberishUtils.toNumber(amount) > 0;
+    }).length;
   }
 </script>
 
@@ -146,12 +160,12 @@
           <div class="relative group">
             <!-- Account Item -->
             <div
-              class="w-full flex items-center gap-3 p-4 rounded-lg transition-all duration-200 {isActive 
-                ? 'bg-indigo-50 dark:bg-indigo-900/20 border-2 border-indigo-500 shadow-md' 
+              class="w-full flex items-center gap-3 p-4 rounded-lg transition-all duration-200 {isActive
+                ? 'bg-indigo-50 dark:bg-indigo-900/20 border-2 border-indigo-500 shadow-md'
                 : 'bg-zinc-50 dark:bg-zinc-900/50 hover:bg-zinc-100 dark:hover:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 hover:shadow-md'}">
-              
-              <!-- Edit Controls Overlay -->
-              <div class="absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity z-10">
+
+              <!-- Edit Controls Overlay - TODO: Implement EditControls component -->
+              <!-- <div class="absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity z-10">
                 <EditControls
                   controls={['copy', 'edit', 'delete']}
                   onCopy={() => copyAddress(account.address)}
@@ -159,8 +173,8 @@
                   onDelete={() => deleteAccount(account)}
                   hasBalance={getAccountValue(account.address) > 0}
                 />
-              </div>
-              
+              </div> -->
+
               <!-- Clickable area for account selection -->
               <button
                 onclick={() => selectAccount(account)}
@@ -171,7 +185,7 @@
                 <div class="w-12 h-12 rounded-full bg-gradient-to-br from-indigo-400 to-purple-600 flex items-center justify-center text-white font-bold text-lg shadow-md">
                   {account.ens?.[0]?.toUpperCase() || account.username?.[0]?.toUpperCase() || '?'}
                 </div>
-                
+
                 <!-- Account Info -->
                 <div class="flex-1">
                   <div class="flex items-center gap-2">
@@ -191,9 +205,9 @@
                     {#if isActive && value > 0}
                       <span class="flex items-center gap-1">
                         <span class="font-medium">Value:</span>
-                        <ProtectedValue 
-                          value={`$${value.toFixed(2)}`} 
-                          placeholder="$" 
+                        <ProtectedValue
+                          value={`$${value.toFixed(2)}`}
+                          placeholder="$"
                         />
                       </span>
                       <span></span>
@@ -205,7 +219,7 @@
                 </div>
               </button>
             </div>
-            
+
             <!-- Tooltip on hover -->
             <div class="absolute left-0 right-0 top-full mt-2 z-20 opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity duration-200">
               <div class="bg-gray-900 text-white text-xs rounded-lg shadow-xl p-3 mx-4">
@@ -235,7 +249,7 @@
           </div>
         {/each}
       {/if}
-      
+
       <!-- Add Account Button -->
       <a
         href="/accounts/import"
@@ -247,7 +261,7 @@
         <span class="text-zinc-600 dark:text-zinc-400">Add New Account</span>
       </a>
     </div>
-    
+
     <!-- Quick Actions -->
     <div class="mt-6 pt-6 border-t border-zinc-200 dark:border-zinc-700">
       <div class="flex justify-center gap-3">
@@ -291,7 +305,7 @@
         class="w-full px-3 py-2 rounded-lg border border-zinc-300 dark:border-zinc-600 bg-white dark:bg-zinc-900 focus:outline-none focus:ring-2 focus:ring-indigo-500"
         placeholder="Enter account name"
       />
-      
+
       <div class="flex gap-3">
         <button
           onclick={() => editingAccount = null}
@@ -308,4 +322,4 @@
       </div>
     </div>
   </Modal>
-{/if}
\ No newline at end of file
+{/if}
diff --git a/packages/yakkl-wallet/src/lib/components/NewsFeedLineView.svelte b/packages/yakkl-wallet/src/lib/components/NewsFeedLineView.svelte
index 332bd73..636c58f 100644
--- a/packages/yakkl-wallet/src/lib/components/NewsFeedLineView.svelte
+++ b/packages/yakkl-wallet/src/lib/components/NewsFeedLineView.svelte
@@ -16,9 +16,10 @@
 		};
 		className?: string;
 		locked?: boolean;
+		showDate?: boolean;
 	}
 
-	let { newsItem, className = '', locked = true }: Props = $props();
+	let { newsItem, className = '', locked = true, showDate = false }: Props = $props();
 
 	// Check if the news item has all required properties
 	const isValidNewsItem =
@@ -54,7 +55,11 @@
 					<div class="flex items-center gap-1 text-[10px] text-gray-500 dark:text-gray-400 mt-1">
 						<span>{newsItem.source}</span>
 						<span></span>
-						<span>{newsItem.date}</span>
+						{#if showDate}
+							<span>{new Date(newsItem.publishedAt || newsItem.date || '').toLocaleString()}</span>
+						{:else}
+							<span>{newsItem.date}</span>
+						{/if}
 					</div>
 					<p class="text-xs text-gray-600 dark:text-gray-300 mt-1 line-clamp-2">
 						{newsItem.description}
diff --git a/packages/yakkl-wallet/src/lib/components/PlanBadge.svelte b/packages/yakkl-wallet/src/lib/components/PlanBadge.svelte
index 583e5c6..d478ca5 100644
--- a/packages/yakkl-wallet/src/lib/components/PlanBadge.svelte
+++ b/packages/yakkl-wallet/src/lib/components/PlanBadge.svelte
@@ -1,12 +1,12 @@
 <script lang="ts">
-  let { planType = 'Pro (Trial)', trialEnds = null, className = '' } = $props();
+  let { planType = 'yakkl_pro (Trial)', trialEnds = null, className = '' } = $props();
 
   let label = $state(planType);
   let showTrial = $state(trialEnds ? new Date(trialEnds) > new Date() : false);
   let trialText = $derived(showTrial ? `Trial ends: ${trialEnds}` : '');
 
   let badgeClass = $state(`inline-flex items-center px-2 py-0.5 rounded-full shadow text-[10px] font-semibold opacity-80 ${className} `);
-  if (planType.includes('pro')) {
+  if (planType.includes('yakkl_pro')) {
     badgeClass += 'bg-blue-50 dark:bg-blue-900 text-blue-700 dark:text-blue-200';
   } else if (planType.includes('founding')) {
     badgeClass += 'bg-yellow-50 dark:bg-yellow-900 text-yellow-700 dark:text-yellow-200';
diff --git a/packages/yakkl-wallet/src/lib/components/PortfolioDetailsModal.svelte b/packages/yakkl-wallet/src/lib/components/PortfolioDetailsModal.svelte
index 1140cc0..2024e28 100644
--- a/packages/yakkl-wallet/src/lib/components/PortfolioDetailsModal.svelte
+++ b/packages/yakkl-wallet/src/lib/components/PortfolioDetailsModal.svelte
@@ -5,10 +5,11 @@
   import { currentChain, chainStore } from '$lib/stores/chain.store';
   import type { TokenDisplay } from '$lib/types';
   import { get } from 'svelte/store';
-  
+  import { BigNumberishUtils } from '$lib/common/BigNumberishUtils';
+
   function formatCurrency(value: number): string {
     if (value === 0) return '$0.00';
-    
+
     const absValue = Math.abs(value);
     if (absValue >= 1e12) {
       return `$${(value / 1e12).toFixed(1)}T+`;
@@ -19,7 +20,7 @@
     } else if (absValue >= 1e3) {
       return `$${(value / 1e3).toFixed(1)}K+`;
     }
-    
+
     return new Intl.NumberFormat('en-US', {
       style: 'currency',
       currency: 'USD',
@@ -27,7 +28,7 @@
       maximumFractionDigits: 2
     }).format(value);
   }
-  
+
   function formatCurrencyFull(value: number): string {
     return new Intl.NumberFormat('en-US', {
       style: 'currency',
@@ -36,10 +37,10 @@
       maximumFractionDigits: 2
     }).format(value);
   }
-  
+
   function formatBalance(balance: number): string {
     if (balance === 0) return '0';
-    
+
     const absBalance = Math.abs(balance);
     if (absBalance >= 1e12) {
       return `${(balance / 1e12).toFixed(1)}T+`;
@@ -56,27 +57,27 @@
     } else if (absBalance < 1000) {
       return balance.toFixed(4);
     }
-    
+
     return balance.toLocaleString('en-US', { maximumFractionDigits: 2 });
   }
-  
+
   function formatBalanceFull(balance: number): string {
     if (balance === 0) return '0';
     if (balance < 0.0001) return balance.toExponential(4);
     if (balance < 1) return balance.toFixed(6);
     return balance.toLocaleString('en-US', { maximumFractionDigits: 6 });
   }
-  
+
   interface Props {
     show?: boolean;
     onClose?: () => void;
   }
-  
-  let { 
+
+  let {
     show = $bindable(false),
     onClose = () => { show = false; }
   }: Props = $props();
-  
+
   interface NetworkBreakdown {
     chainId: number;
     chainName: string;
@@ -86,34 +87,34 @@
     tokens: TokenDisplay[];
     isTestnet: boolean;
   }
-  
+
   let isMultiChain = $derived($isMultiChainView);
   let tokens = $derived($displayTokens);
   let currentChainData = $derived($currentChain);
-  
+
   // Group tokens by network
   let networkBreakdowns = $derived.by(() => {
     const groups = new Map<number, NetworkBreakdown>();
-    
+
     // Ensure tokens is an array
     const tokenArray = Array.isArray(tokens) ? tokens : [];
-    
+
     // Get chain information
     const chains = get(chainStore).chains;
     const chainMap = new Map(chains.map(c => [c.chainId, c]));
-    
+
     for (const token of tokenArray) {
       if (!token.chainId) continue;
-      
+
       // Skip tokens with 0 value unless specifically requested
       if (!token.value || token.value === 0) continue;
-      
+
       let group = groups.get(token.chainId);
       if (!group) {
         const chainInfo = chainMap.get(token.chainId);
         const chainName = chainInfo ? chainInfo.name : 'Unknown';
         const network = chainInfo ? chainInfo.network : `Network ${token.chainId}`;
-        
+
         group = {
           chainId: token.chainId,
           chainName: chainName,
@@ -125,22 +126,22 @@
         };
         groups.set(token.chainId, group);
       }
-      
-      group.totalValue += typeof token.value === 'number' ? token.value : parseFloat(token.value || '0');
+
+      group.totalValue += typeof token.value === 'number' ? token.value : BigNumberishUtils.toNumber(token.value || 0);
       group.tokenCount++;
       group.tokens.push(token);
     }
-    
+
     // Sort by total value descending
     return Array.from(groups.values()).sort((a, b) => b.totalValue - a.totalValue);
   });
-  
+
   let totalValue = $derived(
     Array.isArray(networkBreakdowns) ? networkBreakdowns.reduce((sum, network) => sum + network.totalValue, 0) : 0
   );
-  
+
   let expandedChains = $state(new Set<number>());
-  
+
   function toggleNetwork(chainId: number) {
     if (expandedChains.has(chainId)) {
       expandedChains.delete(chainId);
@@ -165,11 +166,11 @@
           </span>
         </div>
         <div class="text-xs text-gray-500 dark:text-gray-400 mt-1">
-          Across {networkBreakdowns.length} network{networkBreakdowns.length !== 1 ? 's' : ''}  
+          Across {networkBreakdowns.length} network{networkBreakdowns.length !== 1 ? 's' : ''} 
           {networkBreakdowns.reduce((sum, network) => sum + network.tokenCount, 0)} token{networkBreakdowns.reduce((sum, network) => sum + network.tokenCount, 0) !== 1 ? 's' : ''}
         </div>
       </div>
-      
+
       <!-- Network Breakdowns -->
       <div class="space-y-2">
         {#each networkBreakdowns as network}
@@ -198,18 +199,18 @@
                 <span class="font-semibold text-gray-900 dark:text-gray-100">
                   <ProtectedValue value={formatCurrency(network.totalValue)} placeholder="******" />
                 </span>
-                <svg 
+                <svg
                   class="w-4 h-4 text-gray-400 transition-transform duration-200"
                   class:rotate-180={expandedChains.has(network.chainId)}
-                  fill="none" 
-                  stroke="currentColor" 
+                  fill="none"
+                  stroke="currentColor"
                   viewBox="0 0 24 24"
                 >
                   <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                 </svg>
               </div>
             </button>
-            
+
             <!-- Token List -->
             {#if expandedChains.has(network.chainId)}
               <div class="border-t border-gray-200 dark:border-gray-700">
@@ -237,12 +238,12 @@
                               {@const isImagePath = token.icon && (token.icon.startsWith('/') || token.icon.startsWith('http') || token.icon.includes('.svg') || token.icon.includes('.png') || token.icon.includes('.jpg') || token.icon.includes('.jpeg') || token.icon.includes('.gif') || token.icon.includes('.webp'))}
                               {#if isImagePath}
                                 <!-- Image files (local or remote) -->
-                                <img src={token.icon} alt={token.symbol} class="w-6 h-6 rounded-full" 
-                                     onerror={(e) => { 
+                                <img src={token.icon} alt={token.symbol} class="w-6 h-6 rounded-full"
+                                     onerror={(e) => {
                                        const target = e.currentTarget as HTMLImageElement;
-                                       target.style.display='none'; 
+                                       target.style.display='none';
                                        const nextElement = target.nextElementSibling as HTMLElement;
-                                       if (nextElement) nextElement.style.display='flex'; 
+                                       if (nextElement) nextElement.style.display='flex';
                                      }} />
                                 <div class="w-6 h-6 rounded-full items-center justify-center bg-gray-400 text-white font-bold text-xs" style="display:none;">
                                   {token.symbol?.[0] || '?'}
@@ -269,17 +270,17 @@
                           </div>
                         </td>
                         <td class="px-3 py-3 text-right text-sm text-gray-900 dark:text-gray-100">
-                          <div class="cursor-help" title={`${formatBalanceFull(token.qty || 0)} ${token.symbol}`}>
-                            <ProtectedValue 
-                              value={formatBalance(token.qty || 0)} 
-                              placeholder="****" 
+                          <div class="cursor-help" title={`${formatBalanceFull(BigNumberishUtils.toNumber(token.qty || 0))} ${token.symbol}`}>
+                            <ProtectedValue
+                              value={formatBalance(BigNumberishUtils.toNumber(token.qty || 0))}
+                              placeholder="****"
                             />
                           </div>
                         </td>
                         <td class="px-3 py-3 text-right text-sm text-gray-900 dark:text-gray-100">
                           {#if token.price}
-                            <div class="cursor-help" title={formatCurrencyFull(token.price)}>
-                              <ProtectedValue value={formatCurrency(token.price)} placeholder="****" />
+                            <div class="cursor-help" title={formatCurrencyFull(BigNumberishUtils.toNumber(token.price))}>
+                              <ProtectedValue value={formatCurrency(BigNumberishUtils.toNumber(token.price))} placeholder="****" />
                             </div>
                           {:else}
                             <span class="text-gray-400">--</span>
@@ -287,8 +288,8 @@
                         </td>
                         <td class="px-3 py-3 text-right font-medium text-gray-900 dark:text-gray-100">
                           {#if token.value}
-                            <div class="cursor-help" title={formatCurrencyFull(token.value)}>
-                              <ProtectedValue value={formatCurrency(token.value)} placeholder="*****" />
+                            <div class="cursor-help" title={formatCurrencyFull(BigNumberishUtils.toNumber(token.value))}>
+                              <ProtectedValue value={formatCurrency(BigNumberishUtils.toNumber(token.value))} placeholder="*****" />
                             </div>
                           {:else}
                             <span class="text-gray-400">$0.00</span>
@@ -303,7 +304,7 @@
           </div>
         {/each}
       </div>
-      
+
       {#if networkBreakdowns.length === 0}
         <div class="text-center py-8 text-gray-500 dark:text-gray-400">
           <svg class="w-12 h-12 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
@@ -315,7 +316,7 @@
       {/if}
     </div>
   {/snippet}
-  
+
   {#snippet footer()}
     <div class="flex justify-between items-center">
       <div class="text-xs text-gray-500 dark:text-gray-400">
@@ -329,4 +330,4 @@
       </button>
     </div>
   {/snippet}
-</Modal>
\ No newline at end of file
+</Modal>
diff --git a/packages/yakkl-wallet/src/lib/components/Profile.svelte b/packages/yakkl-wallet/src/lib/components/Profile.svelte
index c4db317..9656290 100644
--- a/packages/yakkl-wallet/src/lib/components/Profile.svelte
+++ b/packages/yakkl-wallet/src/lib/components/Profile.svelte
@@ -2,9 +2,9 @@
 <script lang="ts">
 	import { createForm } from 'svelte-forms-lib';
 	import * as yup from 'yup';
-	import Modal from './v1/Modal.svelte';
-	import Avatar from './v1/Avatar.svelte';
-	import ErrorNoAction from './v1/ErrorNoAction.svelte';
+	import Modal from './Modal.svelte';
+	import Avatar from './Avatar.svelte';
+	import ErrorNoAction from './ErrorNoAction.svelte';
 	import { getProfile, setProfileStorage, yakklMiscStore } from '$lib/common/stores';
 	import { log } from '$lib/common/logger-wrapper';
 	import type { Profile, ProfileData } from '$lib/common/interfaces';
@@ -380,7 +380,7 @@
 					<div class="text-center">
 						<Avatar
 							url={previewAvatarUrl}
-							username={$form.firstName || $form.username}
+							userName={$form.firstName || $form.username}
 							className="w-24 h-24 rounded-full ring-4 ring-offset-2 ring-indigo-500"
 							ariaLabel="Profile Avatar"
 						/>
diff --git a/packages/yakkl-wallet/src/lib/components/ProtectedValue.svelte b/packages/yakkl-wallet/src/lib/components/ProtectedValue.svelte
index 77b6c5b..71d0d65 100644
--- a/packages/yakkl-wallet/src/lib/components/ProtectedValue.svelte
+++ b/packages/yakkl-wallet/src/lib/components/ProtectedValue.svelte
@@ -1,15 +1,68 @@
 <script lang="ts">
 	import { visibilityStore } from '$lib/common/stores/visibilityStore';
 	import { get } from 'svelte/store';
+	import { onDestroy, onMount } from 'svelte';
+	import { tokenizeProtectedText, type Token } from '$lib/utils/tokenizer';
+	import { MotionEntropyDetector, type EnforcementStage, type DetectionState } from '$lib/utils/motionEntropyDetector';
+	import { PlaceholderAnimator, type AnimationConfig, type AnimatedChar } from '$lib/utils/placeholderAnimator';
+	import { animationScheduler } from '$lib/utils/animationScheduler';
+	import { animationControlStore, shouldAnimate } from '$lib/common/stores/animationControlStore';
 
-	const { value, placeholder = '**********' } = $props<{
+	type MAPCRSConfig = boolean | {
+		enabled: boolean;
+		enforcement?: EnforcementStage;
+		debug?: boolean;
+	};
+
+	type PlaceholderAnimationConfig = {
+		enabled: boolean;
+		type?: AnimationConfig['type'];
+		speed?: number;
+		intensity?: number;
+		phaseShift?: boolean;
+	};
+
+	const {
+		value,
+		placeholder = '**********',
+		mapcrs = true,
+		placeholderAnimation = { enabled: true }
+	} = $props<{
 		value: string;
 		placeholder?: string;
+		mapcrs?: MAPCRSConfig;
+		placeholderAnimation?: PlaceholderAnimationConfig;
 	}>();
 
 	// Initialize with current store value
 	let visible = $state(get(visibilityStore));
 
+	// Parse MAPCRS config
+	const mapcrsEnabled = typeof mapcrs === 'boolean' ? mapcrs : mapcrs.enabled;
+	const enforcement = typeof mapcrs === 'object' ? (mapcrs.enforcement || 'learning') : 'learning';
+	const debug = typeof mapcrs === 'object' ? (mapcrs.debug || false) : false;
+
+	// MAPCRS state
+	const tokenMap = new Map<string, string>();
+	let tokens = $state<Token[]>([]);
+	let revealedTokenId = $state<string | null>(null);
+	let revealTimer: number | null = null;
+	let hoverTimer: number | null = null;
+	let cooldownActive = $state(false);
+	let lastRevealTime = 0;
+
+	// Motion detection state
+	let detector: MotionEntropyDetector | null = null;
+	let detectionState = $state<DetectionState>('normal');
+	let baseCooldown = 300; // Base cooldown in ms
+	let currentCooldown = $state(baseCooldown);
+
+	// Placeholder animation state
+	let componentId = crypto.randomUUID();
+	let placeholderAnimator: PlaceholderAnimator | null = null;
+	let animatedPlaceholder = $state<AnimatedChar[]>([]);
+	let placeholderElement = $state<HTMLElement | null>(null);
+
 	$effect(() => {
 		const unsubscribe = visibilityStore.subscribe((value) => {
 			visible = value;
@@ -17,12 +70,395 @@
 
 		return unsubscribe;
 	});
+
+	// Initialize motion detector and animation
+	onMount(() => {
+		if (mapcrsEnabled) {
+			detector = new MotionEntropyDetector(enforcement, debug);
+		}
+
+		// Setup placeholder animation
+		if (placeholderAnimation?.enabled && shouldAnimate(componentId)) {
+			placeholderAnimator = new PlaceholderAnimator();
+
+			// Build animation config
+			const animConfig: AnimationConfig = {
+				type: placeholderAnimation.type || 'wave',
+				speed: placeholderAnimation.speed || 3,
+				intensity: placeholderAnimation.intensity || 0.3,
+				phaseShift: placeholderAnimation.phaseShift !== false
+			};
+
+			// Register with animation scheduler
+			animationScheduler.register(componentId, (time) => {
+				if (!visible && placeholder && shouldAnimate(componentId)) {
+					animatedPlaceholder = placeholderAnimator!.calculate(
+						placeholder,
+						time,
+						animConfig
+					);
+				}
+			});
+
+			// Setup intersection observer for performance
+			if (placeholderElement && 'IntersectionObserver' in window) {
+				const observer = new IntersectionObserver((entries) => {
+					entries.forEach(entry => {
+						if (entry.isIntersecting) {
+							if (!animationScheduler.isRegistered(componentId) && shouldAnimate(componentId)) {
+								animationScheduler.register(componentId, (time) => {
+									if (!visible && placeholder) {
+										animatedPlaceholder = placeholderAnimator!.calculate(
+											placeholder,
+											time,
+											animConfig
+										);
+									}
+								});
+							}
+						} else {
+							animationScheduler.unregister(componentId);
+						}
+					});
+				});
+
+				observer.observe(placeholderElement);
+
+				return () => observer.disconnect();
+			}
+		}
+	});
+
+	// Tokenize value when it changes or when MAPCRS is toggled
+	$effect(() => {
+		if (mapcrsEnabled && value) {
+			tokenMap.clear();
+			tokens = tokenizeProtectedText(value);
+
+			// Assign IDs and store values securely
+			tokens.forEach(token => {
+				if (token.type === 'word') {
+					token.id = crypto.randomUUID();
+					tokenMap.set(token.id, token.value);
+				}
+			});
+		} else {
+			tokens = [];
+			tokenMap.clear();
+		}
+	});
+
+	function handleMouseEnter(tokenId: string, event: MouseEvent) {
+		// Clear any existing timers
+		if (hoverTimer) clearTimeout(hoverTimer);
+		if (revealTimer) clearTimeout(revealTimer);
+
+		// Track motion if detector exists
+		if (detector) {
+			detector.trackMouseEnter(tokenId, { x: event.clientX, y: event.clientY });
+
+			// Analyze pattern and update state
+			const result = detector.analyzePattern();
+			detectionState = result.state;
+			currentCooldown = baseCooldown * result.cooldownMultiplier;
+
+			// If locked, prevent all reveals
+			if (result.isLocked) {
+				cooldownActive = true;
+				return;
+			}
+		}
+
+		// If cooldown is active, don't allow new reveals
+		if (cooldownActive) {
+			return;
+		}
+
+		// If a word is currently revealed, hide it immediately and enforce cooldown
+		if (revealedTokenId && revealedTokenId !== tokenId) {
+			revealedTokenId = null;
+			cooldownActive = true;
+
+			// Calculate remaining cooldown time with multiplier
+			const timeSinceLastReveal = Date.now() - lastRevealTime;
+			const remainingCooldown = Math.max(currentCooldown - timeSinceLastReveal, 100);
+
+			// Set cooldown timer
+			setTimeout(() => {
+				cooldownActive = false;
+			}, remainingCooldown);
+
+			// Don't process this hover - user must hover again after cooldown
+			return;
+		}
+
+		// Add delay before revealing to prevent accidental reveals
+		hoverTimer = window.setTimeout(() => {
+			// Double-check cooldown hasn't been activated while waiting
+			if (!cooldownActive && detectionState !== 'locked') {
+				revealedTokenId = tokenId;
+				lastRevealTime = Date.now();
+			}
+		}, currentCooldown);
+	}
+
+	function handleMouseLeave(event: MouseEvent) {
+		// Clear hover timer if still waiting
+		if (hoverTimer) {
+			clearTimeout(hoverTimer);
+			hoverTimer = null;
+		}
+
+		// Track motion if detector exists
+		if (detector && revealedTokenId) {
+			detector.trackMouseLeave(revealedTokenId, { x: event.clientX, y: event.clientY });
+		}
+
+		// Don't set auto-hide timer - word should hide immediately when hovering another
+		// This prevents multiple words being visible at once
+	}
+
+	function handleMouseMove(event: MouseEvent) {
+		// Track mouse movements for entropy detection
+		if (detector && revealedTokenId) {
+			detector.trackMouseMove({ x: event.clientX, y: event.clientY });
+		}
+	}
+
+	onDestroy(() => {
+		tokenMap.clear();
+		if (revealTimer) clearTimeout(revealTimer);
+		if (hoverTimer) clearTimeout(hoverTimer);
+		if (detector) detector.reset();
+
+		// Cleanup animation
+		animationScheduler.unregister(componentId);
+		animationControlStore.enableComponent(componentId); // Re-enable in case it was disabled
+	});
 </script>
 
-<span>
+<span class="protected-value" class:detection-suspicious={detectionState === 'suspicious'} class:detection-locked={detectionState === 'locked'}>
+	{#if detectionState === 'locked' && mapcrsEnabled}
+		<span class="lock-indicator" title="Suspicious activity detected - reveal disabled"></span>
+	{/if}
 	{#if visible}
 		{value}
+	{:else if mapcrsEnabled && tokens.length > 0}
+		{#each tokens as token}
+			{#if token.type === 'word' && token.id}
+				<span
+					class="word-token"
+					class:cooldown={cooldownActive}
+					onmouseenter={(e) => handleMouseEnter(token.id!, e)}
+					onmouseleave={handleMouseLeave}
+					onmousemove={handleMouseMove}
+					role="button"
+					tabindex="0"
+				>
+					{#if revealedTokenId === token.id}
+						<span class="revealed-word">{tokenMap.get(token.id)}</span>
+						<span class="redacted-word invisible">{token.redacted}</span>
+					{:else}
+						<span class="redacted-word">{token.redacted}</span>
+					{/if}
+				</span>
+			{:else}
+				{token.value}
+			{/if}
+		{/each}
+	{:else if placeholderAnimation?.enabled && animatedPlaceholder.length > 0 && shouldAnimate(componentId)}
+		<span class="animated-placeholder" bind:this={placeholderElement}>
+			{#each animatedPlaceholder as char}
+				<span class="animated-char" style={char.style}>
+					{char.char}
+				</span>
+			{/each}
+		</span>
 	{:else}
-		{placeholder}
+		<span bind:this={placeholderElement}>{placeholder}</span>
 	{/if}
 </span>
+
+<style>
+	.protected-value {
+		display: inline;
+	}
+
+	.word-token {
+		position: relative;
+		display: inline-block;
+		cursor: pointer;
+		transition: background-color 0.2s ease;
+	}
+
+	.word-token:hover {
+		background-color: rgba(0, 0, 0, 0.05);
+		border-radius: 3px;
+	}
+
+	.word-token.cooldown {
+		cursor: not-allowed;
+		opacity: 0.7;
+	}
+
+	.word-token.cooldown:hover {
+		background-color: transparent;
+	}
+
+	:global(.dark) .word-token:hover {
+		background-color: rgba(255, 255, 255, 0.1);
+	}
+
+	:global(.dark) .word-token.cooldown:hover {
+		background-color: transparent;
+	}
+
+	.redacted-word {
+		display: inline-block;
+	}
+
+	.redacted-word.invisible {
+		visibility: hidden;
+	}
+
+	.revealed-word {
+		position: absolute;
+		left: 50%;
+		transform: translateX(-50%);
+		bottom: 100%;
+		margin-bottom: 8px;
+		background-color: var(--color-surface-200);
+		color: var(--color-text-900);
+		padding: 6px 10px;
+		border-radius: 6px;
+		box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
+		font-size: 1.1em;
+		font-weight: 500;
+		white-space: nowrap;
+		z-index: 1000;
+		pointer-events: none;
+		animation: revealFadeIn 200ms ease-out;
+	}
+
+	:global(.dark) .revealed-word {
+		background-color: var(--color-surface-700);
+		color: var(--color-text-100);
+		box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
+	}
+
+	.revealed-word::after {
+		content: '';
+		position: absolute;
+		top: 100%;
+		left: 50%;
+		transform: translateX(-50%);
+		width: 0;
+		height: 0;
+		border-style: solid;
+		border-width: 6px 6px 0 6px;
+		border-color: var(--color-surface-200) transparent transparent transparent;
+	}
+
+	:global(.dark) .revealed-word::after {
+		border-color: var(--color-surface-700) transparent transparent transparent;
+	}
+
+	@keyframes revealFadeIn {
+		from {
+			opacity: 0;
+			transform: translateX(-50%) translateY(4px);
+		}
+		to {
+			opacity: 1;
+			transform: translateX(-50%) translateY(0);
+		}
+	}
+
+	/* Accessibility */
+	.word-token:focus {
+		outline: 2px solid var(--color-primary-500);
+		outline-offset: 2px;
+		border-radius: 3px;
+	}
+
+	.word-token:focus:not(:focus-visible) {
+		outline: none;
+	}
+
+	/* Detection state indicators */
+	.protected-value.detection-suspicious {
+		position: relative;
+		padding: 2px 4px;
+		background-color: rgba(255, 193, 7, 0.1);
+		border-radius: 4px;
+	}
+
+	.protected-value.detection-locked {
+		position: relative;
+		padding: 2px 4px;
+		background-color: rgba(244, 67, 54, 0.1);
+		border-radius: 4px;
+	}
+
+	.lock-indicator {
+		display: inline-block;
+		margin-right: 4px;
+		font-size: 0.9em;
+		opacity: 0.8;
+		cursor: help;
+	}
+
+	/* Adjust word token opacity based on detection state */
+	.detection-suspicious .word-token {
+		opacity: 0.8;
+	}
+
+	.detection-locked .word-token {
+		cursor: not-allowed !important;
+		opacity: 0.5;
+	}
+
+	.detection-locked .word-token:hover {
+		background-color: transparent !important;
+	}
+
+	:global(.dark) .protected-value.detection-suspicious {
+		background-color: rgba(255, 193, 7, 0.2);
+	}
+
+	:global(.dark) .protected-value.detection-locked {
+		background-color: rgba(244, 67, 54, 0.2);
+	}
+
+	/* Animated placeholder styles */
+	.animated-placeholder {
+		display: inline-block;
+		letter-spacing: 0.05em;
+		user-select: none;
+		-webkit-user-select: none;
+		pointer-events: none;
+	}
+
+	.animated-char {
+		display: inline-block;
+		transform-origin: center center;
+		backface-visibility: hidden;
+		-webkit-backface-visibility: hidden;
+		will-change: transform, opacity;
+	}
+
+	/* Disable animations if user prefers reduced motion */
+	@media (prefers-reduced-motion: reduce) {
+		.animated-char {
+			animation: none !important;
+			transform: none !important;
+		}
+	}
+
+	/* Add anti-aliasing for smoother animations */
+	.animated-placeholder {
+		-webkit-font-smoothing: antialiased;
+		-moz-osx-font-smoothing: grayscale;
+		text-rendering: optimizeLegibility;
+	}
+</style>
diff --git a/packages/yakkl-wallet/src/lib/components/ProtectedViewToggle.svelte b/packages/yakkl-wallet/src/lib/components/ProtectedViewToggle.svelte
index f0a9f53..a97f00a 100644
--- a/packages/yakkl-wallet/src/lib/components/ProtectedViewToggle.svelte
+++ b/packages/yakkl-wallet/src/lib/components/ProtectedViewToggle.svelte
@@ -3,7 +3,7 @@
   import EyeIcon from './icons/EyeIcon.svelte';
   import EyeOffIcon from './icons/EyeOffIcon.svelte';
   import Tooltip from './Tooltip.svelte';
-  import PincodeVerify from './v1/PincodeVerify.svelte';
+  import PincodeVerify from './PincodeVerify.svelte';
   import { visibilityStore } from '$lib/common/stores/visibilityStore';
   import { notificationService } from '$lib/services/notification.service';
 
diff --git a/packages/yakkl-wallet/src/lib/components/ReactivePrice.svelte b/packages/yakkl-wallet/src/lib/components/ReactivePrice.svelte
index 8857600..3cae3e1 100644
--- a/packages/yakkl-wallet/src/lib/components/ReactivePrice.svelte
+++ b/packages/yakkl-wallet/src/lib/components/ReactivePrice.svelte
@@ -1,16 +1,17 @@
 <script lang="ts">
   import { type TokenDisplay } from '$lib/types';
-  import ProtectedValue from './v1/ProtectedValue.svelte';
-  
+  import ProtectedValue from './ProtectedValue.svelte';
+  import { BigNumberishUtils } from '$lib/common/BigNumberishUtils';
+
   interface Props {
     token: TokenDisplay | undefined;
     format?: 'price' | 'value' | 'full';
     showChange?: boolean;
     className?: string;
   }
-  
+
   let { token, format = 'price', showChange = false, className = '' }: Props = $props();
-  
+
   function formatPrice(price: number | undefined): string {
     if (!price) return '$0.00';
     if (price < 0.01) {
@@ -23,7 +24,7 @@
       maximumFractionDigits: price < 1 ? 6 : 2
     }).format(price);
   }
-  
+
   function formatValue(val: number | undefined): string {
     if (!val) return '$0.00';
     return new Intl.NumberFormat('en-US', {
@@ -33,7 +34,7 @@
       maximumFractionDigits: 2
     }).format(val);
   }
-  
+
   function formatFullPrice(price: number | undefined): string {
     if (!price) return '$0.00000000';
     if (price < 0.00000001) {
@@ -46,23 +47,23 @@
       maximumFractionDigits: 10
     }).format(price);
   }
-  
+
   let displayValue = $derived.by(() => {
     if (!token) return '$0.00';
-    
+
     switch (format) {
       case 'value':
-        return formatValue(token.value);
+        return formatValue(Number(token.value));
       case 'full':
-        return formatFullPrice(token.price);
+        return formatFullPrice(BigNumberishUtils.toNumber(token.price));
       default:
-        return formatPrice(token.price);
+        return formatPrice(BigNumberishUtils.toNumber(token.price));
     }
   });
-  
+
   let changeClass = $derived(
     token?.change24h !== undefined
-      ? token.change24h >= 0 ? 'text-green-500' : 'text-red-500'
+      ? BigNumberishUtils.compare(token.change24h, 0) >= 0 ? 'text-green-500' : 'text-red-500'
       : ''
   );
 </script>
@@ -71,7 +72,7 @@
   <ProtectedValue value={displayValue} placeholder="*****" />
   {#if showChange && token?.change24h !== undefined}
     <span class="text-xs ml-1 {changeClass}">
-      {token.change24h >= 0 ? '+' : ''}{token.change24h.toFixed(2)}%
+      {BigNumberishUtils.compare(token.change24h, 0) >= 0 ? '+' : ''}{BigNumberishUtils.toNumber(token.change24h).toFixed(2)}%
     </span>
   {/if}
-</div>
\ No newline at end of file
+</div>
diff --git a/packages/yakkl-wallet/src/lib/components/Receive.svelte b/packages/yakkl-wallet/src/lib/components/Receive.svelte
index db719dd..94e989c 100644
--- a/packages/yakkl-wallet/src/lib/components/Receive.svelte
+++ b/packages/yakkl-wallet/src/lib/components/Receive.svelte
@@ -1,11 +1,11 @@
 <!-- Receive.svelte -->
 <script lang="ts">
 	import { onMount } from 'svelte';
-	import QR from './v1/QR.svelte';
+	import QR from './QR.svelte';
 	import { YAKKL_ZERO_ADDRESS } from '$lib/common/constants';
 	import { yakklCurrentlySelectedStore } from '$lib/common/stores';
-	import Modal from './v1/Modal.svelte';
-	import Copy from './v1/Copy.svelte';
+	import Modal from './Modal.svelte';
+	import Copy from './Copy.svelte';
 
 	interface Props {
 		show?: boolean;
@@ -68,7 +68,7 @@
 					</div>
 					<div class="ml-3">
 						<p class="text-sm text-blue-800">
-							<span class="font-medium">Scan the QR code</span> with your mobile wallet or 
+							<span class="font-medium">Scan the QR code</span> with your mobile wallet or
 							<span class="font-medium">copy the address</span> to receive payments
 						</p>
 					</div>
@@ -87,4 +87,4 @@
 			</div>
 		{/if}
 	</div>
-</Modal>
\ No newline at end of file
+</Modal>
diff --git a/packages/yakkl-wallet/src/lib/components/ReceiveModal.svelte b/packages/yakkl-wallet/src/lib/components/ReceiveModal.svelte
index c61e366..3c8cf20 100644
--- a/packages/yakkl-wallet/src/lib/components/ReceiveModal.svelte
+++ b/packages/yakkl-wallet/src/lib/components/ReceiveModal.svelte
@@ -1,5 +1,5 @@
 <script lang="ts">
-  import { ReceiveService } from '../features/basic/receive/receive.service';
+  import { ReceiveService } from '../features/explorer/receive/receive.service';
   import { currentAccount } from '../stores/account.store';
   import { currentChain } from '../stores/chain.store';
 
diff --git a/packages/yakkl-wallet/src/lib/components/RecentActivity.svelte b/packages/yakkl-wallet/src/lib/components/RecentActivity.svelte
index d0a398c..9bba5bf 100644
--- a/packages/yakkl-wallet/src/lib/components/RecentActivity.svelte
+++ b/packages/yakkl-wallet/src/lib/components/RecentActivity.svelte
@@ -9,7 +9,8 @@
   import { currentChain, chainStore } from '$lib/stores/chain.store';
   import { isMultiChainView, tokens } from '$lib/stores/token.store';
   import type { TransactionDisplay } from '../types';
-  import { uiStore } from '$lib/stores/ui.store';
+  // import { uiStore } from '$lib/stores/ui.store';
+  import { BigNumberishUtils } from '$lib/common/BigNumberishUtils';
 
   // Define view modes
   type ViewMode = 'current_account' | 'single_network' | 'all_networks';
@@ -34,69 +35,69 @@
   let tokenList = $derived($tokens);
   let accounts = $derived($accountStore.accounts || []);
   let chains = $derived($chainStore?.chains || []);
-  
+
   // State for view mode
   let viewMode = $state<ViewMode>('current_account');
-  
+
   // Sync with multi-chain view when it changes
   $effect(() => {
     if (isMultiChain) {
       viewMode = 'all_networks';
     }
   });
-  
+
   // Get ETH price from token list
   let ethPrice = $derived.by(() => {
     const ethToken = tokenList.find(t => t.symbol === 'ETH' || t.symbol === chain?.nativeCurrency?.symbol);
-    return ethToken?.price || 0;
+    return BigNumberishUtils.toNumber(ethToken?.price || 0);
   });
 
   let expanded = $state(false);
   let sortNewestFirst = $state(true);
   let isRefreshing = $state(false);
   let refreshDebounceTimer: number | null = $state(null);
-  
+
   // Filter chains based on current chain type (mainnet vs testnet)
   let visibleChains = $derived.by(() => {
     if (!chain) return chains;
     const isTestnet = chain.isTestnet || false;
     return chains.filter(c => (c.isTestnet || false) === isTestnet);
   });
-  
+
   // Sort transactions
   let sortedTransactions = $derived.by(() => {
     const txs = [...transactions];
-    return sortNewestFirst 
+    return sortNewestFirst
       ? txs.sort((a, b) => b.timestamp - a.timestamp)
       : txs.sort((a, b) => a.timestamp - b.timestamp);
   });
-  
+
   // Filter transactions based on view mode
   let filteredTransactions = $derived.by(() => {
     if (!account || !chain) return [];
-    
+
     switch (viewMode) {
       case 'current_account':
         // Only current account on current chain
-        return sortedTransactions.filter(tx => 
+        return sortedTransactions.filter(tx =>
           (tx.from.toLowerCase() === account.address.toLowerCase() ||
            tx.to.toLowerCase() === account.address.toLowerCase()) &&
           tx.chainId === chain.chainId
         );
-        
+
       case 'single_network':
         // All accounts on current chain - only show transactions involving our accounts
         const ourAddresses = accounts.map(a => a.address.toLowerCase());
-        return sortedTransactions.filter(tx => 
+        return sortedTransactions.filter(tx =>
           tx.chainId === chain.chainId &&
           (ourAddresses.includes(tx.from.toLowerCase()) || ourAddresses.includes(tx.to.toLowerCase()))
         );
-        
+
       case 'all_networks':
         // All accounts on all visible chains (filtered by mainnet/testnet)
         const visibleChainIds = visibleChains.map(c => c.chainId);
         return sortedTransactions.filter(tx => visibleChainIds.includes(tx.chainId));
-        
+
       default:
         return [];
     }
@@ -123,8 +124,8 @@
       }, 3000);
     }
   }
-  
-  
+
+
   function getViewModeDescription(): string {
     switch (viewMode) {
       case 'current_account':
@@ -137,7 +138,7 @@
         return `${accounts.length} account${accounts.length !== 1 ? 's' : ''} across ${visibleChains.length} network${visibleChains.length !== 1 ? 's' : ''}`;
     }
   }
-  
+
   // Calculate totals based on view mode
   let viewTotals = $derived.by(() => {
     const totals = {
@@ -145,26 +146,26 @@
       accountCount: 0,
       chainCount: 0
     };
-    
+
     // Get unique accounts and chains
     const uniqueAccounts = new Set<string>();
     const uniqueChains = new Set<number>();
-    
+
     filteredTransactions.forEach(tx => {
       uniqueAccounts.add(tx.from.toLowerCase());
       uniqueAccounts.add(tx.to.toLowerCase());
       uniqueChains.add(tx.chainId);
     });
-    
+
     // Filter to only our accounts
     const ourAddresses = accounts.map(a => a.address.toLowerCase());
-    const ourAccountsInTx = Array.from(uniqueAccounts).filter(addr => 
+    const ourAccountsInTx = Array.from(uniqueAccounts).filter(addr =>
       ourAddresses.includes(addr)
     );
-    
+
     totals.accountCount = ourAccountsInTx.length;
     totals.chainCount = uniqueChains.size;
-    
+
     return totals;
   });
 </script>
@@ -200,7 +201,7 @@
         >
           {viewMode === 'current_account' ? 'Current Account' : viewMode === 'single_network' ? 'Single Network' : 'All Networks'}
         </button>
-        
+
         <!-- Sort toggle -->
         <button
           onclick={() => sortNewestFirst = !sortNewestFirst}
@@ -217,7 +218,7 @@
           </svg>
           <span>{sortNewestFirst ? 'Newest' : 'Oldest'}</span>
         </button>
-        
+
         <!-- Refresh button -->
         <button
           onclick={handleRefresh}
@@ -232,7 +233,7 @@
         </button>
       </div>
     </div>
-    
+
   </div>
 
   {#if loading}
@@ -275,7 +276,7 @@
           maxTransactions={expanded ? 0 : maxRows}
           {onTransactionClick}
         />
-        
+
       {:else if viewMode === 'single_network' && chain}
         <!-- Single Network View -->
         <ChainActivity
@@ -290,7 +291,7 @@
           expanded={true}
           {onTransactionClick}
         />
-        
+
       {:else if viewMode === 'all_networks'}
         <!-- All Networks View -->
         <div class="space-y-4">
@@ -351,4 +352,4 @@
   div {
     transition: all 0.2s ease;
   }
-</style>
\ No newline at end of file
+</style>
diff --git a/packages/yakkl-wallet/src/lib/components/RegistrationOption.svelte b/packages/yakkl-wallet/src/lib/components/RegistrationOption.svelte
index de40968..53c9459 100644
--- a/packages/yakkl-wallet/src/lib/components/RegistrationOption.svelte
+++ b/packages/yakkl-wallet/src/lib/components/RegistrationOption.svelte
@@ -27,7 +27,7 @@
 
 	onMount(async () => {
 		settings = await getSettings();
-		isProUser = shouldShowProFeatures(settings?.plan?.type || PlanType.BASIC_MEMBER);
+		isProUser = shouldShowProFeatures(settings?.plan?.type || PlanType.EXPLORER_MEMBER);
 	});
 
 	function handleRestore() {
diff --git a/packages/yakkl-wallet/src/lib/components/SendModalEnhanced.svelte b/packages/yakkl-wallet/src/lib/components/SendModalEnhanced.svelte
index c98d67d..66db9ca 100644
--- a/packages/yakkl-wallet/src/lib/components/SendModalEnhanced.svelte
+++ b/packages/yakkl-wallet/src/lib/components/SendModalEnhanced.svelte
@@ -6,12 +6,13 @@
   import { get } from 'svelte/store';
   import GasFeeSelector from './GasFeeSelector.svelte';
   import PincodeVerify from './PincodeVerify.svelte';
-  import Contacts from './v1/Contacts.svelte';
+  import Contacts from './Contacts.svelte';
   import Modal from './Modal.svelte';
   import { uiStore } from '../stores/ui.store';
   import { notificationService } from '../services/notification.service';
   import { messagingService } from '$lib/common/messaging';
   import type { TokenDisplay } from '../types';
+  import { BigNumberishUtils } from '$lib/common/BigNumberishUtils';
 
   let {
     show = $bindable(false),
@@ -25,7 +26,7 @@
 
   // Tab state
   let activeTab = $state<'amount' | 'fees' | 'activity'>('amount');
-  
+
   // Form state
   let recipient = $state('');
   let recipientENS = $state(''); // Resolved ENS name
@@ -34,7 +35,7 @@
   let selectedToken = $state(preSelectedToken || tokens[0] || { symbol: 'ETH', icon: '/images/eth.svg' });
   let valueType = $state<'crypto' | 'fiat'>('crypto');
   let fiatAmount = $state('');
-  
+
   // Gas state
   let gasEstimate = $state('21000');
   let estimatingGas = $state(false);
@@ -47,7 +48,7 @@
   let customGasPrice = $state('');
   let customGasLimit = $state('');
   let gasTrend = $state<'up' | 'down' | 'flat'>('flat');
-  
+
   // UI state
   let validationError = $state('');
   let showContacts = $state(false);
@@ -56,13 +57,13 @@
   let showZeroValueWarning = $state(false);
   let transactionHistory = $state<any[]>([]);
   let loadingHistory = $state(false);
-  
+
   // Reactive values
   let sending = $derived($isLoadingTx);
   let error = $derived($txError);
   let account = $derived($currentAccount);
   let currentNetwork = $derived($currentChain);
-  
+
   // Calculate total cost
   let totalCost = $derived.by(() => {
     if (!amount || !gasEstimate || !gasPrice.standard) return '0';
@@ -135,19 +136,19 @@
       validationError = 'Please enter a valid amount';
       return false;
     }
-    
+
     const balance = parseFloat(selectedToken.balance || '0');
     if (parseFloat(amount) > balance) {
       validationError = 'Insufficient balance';
       return false;
     }
-    
+
     // Check for zero value transaction
     if (parseFloat(amount) === 0 && !showZeroValueWarning) {
       showZeroValueWarning = true;
       return false;
     }
-    
+
     return true;
   }
 
@@ -157,7 +158,7 @@
     try {
       const isETH = selectedToken.symbol === 'ETH';
       const to = recipientENS || recipient;
-      
+
       const response = await transactionStore.estimateGas(
         account?.address || '',
         to,
@@ -165,7 +166,7 @@
         isETH ? undefined : selectedToken.address,
         hexData || undefined
       );
-      
+
       if (response.success && response.data) {
         gasEstimate = response.data.gasLimit;
         // Update gas prices if available
@@ -204,7 +205,7 @@
     try {
       const to = recipientENS || recipient;
       const value = amount;
-      
+
       // Prepare transaction
       const tx = {
         to,
@@ -214,7 +215,7 @@
         maxFeePerGas: customGasPrice ? ethers.parseUnits(customGasPrice, 'gwei') : undefined,
         maxPriorityFeePerGas: gasPrice[gasSpeed] ? ethers.parseUnits(gasPrice[gasSpeed], 'gwei') : undefined
       };
-      
+
       // For ERC20 tokens
       if (selectedToken.symbol !== 'ETH' && selectedToken.address) {
         // Create transfer data
@@ -222,30 +223,30 @@
           ethers.concat([
             '0xa9059cbb', // transfer(address,uint256) method ID
             ethers.zeroPadValue(to, 32),
-            ethers.zeroPadValue(ethers.parseUnits(value, selectedToken.decimals || 18), 32)
+            ethers.zeroPadValue(ethers.toBeHex(ethers.parseUnits(value, selectedToken.decimals || 18), 32), 32)
           ])
         );
-        
+
         tx.to = selectedToken.address;
         tx.value = 0n;
         tx.data = transferData;
       }
-      
+
       // Send transaction
       const response = await transactionStore.sendTransaction(tx);
-      
+
       if (response.success && response.data) {
         // Show success notification
         notificationService.success('Transaction Sent', `Transaction hash: ${response.data.hash}`);
-        
+
         // Call parent handler
         if (onSend) {
           onSend(response.data);
         }
-        
+
         // Close modal
         show = false;
-        
+
         // Reset form
         resetForm();
       } else {
@@ -260,18 +261,18 @@
   // Form submission
   async function handleSubmit() {
     validationError = '';
-    
+
     // Validate recipient
     if (!validateAddress(recipient)) {
       validationError = 'Please enter a valid address';
       return;
     }
-    
+
     // Validate amount
     if (!validateAmount()) {
       return;
     }
-    
+
     // Show PIN verification
     showPincode = true;
   }
@@ -324,7 +325,7 @@
       const debounceTimer = setTimeout(() => {
         estimateGas();
       }, 500);
-      
+
       return () => clearTimeout(debounceTimer);
     }
   });
@@ -416,7 +417,8 @@
             type="number"
             value={valueType === 'crypto' ? amount : fiatAmount}
             oninput={(e) => {
-              const value = e.target.value;
+              const target = e.target as HTMLInputElement;
+              const value = target.value;
               if (valueType === 'crypto') {
                 amount = value;
               } else {
@@ -481,7 +483,7 @@
       {#if showZeroValueWarning}
         <div class="p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg">
           <p class="text-sm text-yellow-800 dark:text-yellow-200">
-             You're about to send a 0 value transaction. This is valid but will still cost gas fees. 
+             You're about to send a 0 value transaction. This is valid but will still cost gas fees.
             This is often used to cancel pending transactions.
           </p>
           <div class="mt-2 flex gap-2">
@@ -515,7 +517,7 @@
         {estimatingGas}
         onUpdate={estimateGas}
       />
-      
+
       <!-- Gas Trend Indicator -->
       <div class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
         <span class="text-sm font-medium">Gas Trend</span>
@@ -538,7 +540,7 @@
           {/if}
         </div>
       </div>
-      
+
       <!-- Total Cost Summary -->
       <div class="p-4 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg">
         <h4 class="font-medium mb-2">Transaction Summary</h4>
@@ -657,15 +659,15 @@
   details summary::-webkit-details-marker {
     display: none;
   }
-  
+
   details[open] summary::after {
     transform: rotate(180deg);
   }
-  
+
   details summary::after {
     content: '';
     display: inline-block;
     margin-left: 0.5rem;
     transition: transform 0.2s;
   }
-</style>
\ No newline at end of file
+</style>
diff --git a/packages/yakkl-wallet/src/lib/components/Settings.svelte b/packages/yakkl-wallet/src/lib/components/Settings.svelte
index 1a8fda7..5607842 100644
--- a/packages/yakkl-wallet/src/lib/components/Settings.svelte
+++ b/packages/yakkl-wallet/src/lib/components/Settings.svelte
@@ -2,7 +2,7 @@
 <script lang="ts">
 	import { createForm } from 'svelte-forms-lib';
 	import * as yup from 'yup';
-	import Modal from './v1/Modal.svelte';
+	import Modal from './Modal.svelte';
 	import { getSettings, setSettings, getProfile, setProfileStorage } from '$lib/common/stores';
 	import { log } from '$lib/managers/Logger';
 	import type { Settings, Profile } from '$lib/common/interfaces';
@@ -299,7 +299,7 @@
 
 	function getPlanLabel(planType: PlanType): string {
 		switch (planType) {
-			case PlanType.BASIC_MEMBER:
+			case PlanType.EXPLORER_MEMBER:
 				return 'Basic Member';
 			case PlanType.FOUNDING_MEMBER:
 				return 'Founding Member';
diff --git a/packages/yakkl-wallet/src/lib/components/SwapModalV2.svelte b/packages/yakkl-wallet/src/lib/components/SwapModalV2.svelte
index fc0f3b0..c18cc6b 100644
--- a/packages/yakkl-wallet/src/lib/components/SwapModalV2.svelte
+++ b/packages/yakkl-wallet/src/lib/components/SwapModalV2.svelte
@@ -10,6 +10,7 @@
   import { ethers } from 'ethers-v6';
   import { ArrowDownUp, Settings, Info, AlertTriangle } from 'lucide-svelte';
   import type { TokenDisplay } from '$lib/types';
+  import { BigNumberishUtils } from '$lib/common/BigNumberishUtils';
 
   let {
     show = $bindable(false),
@@ -25,7 +26,7 @@
   let slippage = $state(0.5); // 0.5% default
   let deadline = $state(30); // 30 minutes default
   let poolFee = $state(3000); // 0.3% default
-  
+
   // UI State
   let loading = $state(false);
   let fetchingQuote = $state(false);
@@ -35,19 +36,19 @@
   let quoteData = $state<any>(null);
   let priceImpact = $state(0);
   let insufficientLiquidity = $state(false);
-  
+
   // Auto-select fee tier for stablecoins
   let autoFeeEnabled = $state(true);
-  
+
   // Reactive values
   let account = $derived($currentAccount);
   let chain = $derived($currentChain);
   let tokenList = $derived($displayTokens);
-  
+
   // Supported tokens for swapping
   const SUPPORTED_TOKENS = ['ETH', 'WETH', 'USDC', 'USDT', 'DAI', 'WBTC', 'AAVE', 'UNI', 'LINK'];
   const STABLECOINS = ['USDC', 'USDT', 'DAI', 'BUSD'];
-  
+
   let swappableTokens = $derived(tokenList.filter(t =>
     SUPPORTED_TOKENS.includes(t.symbol.toUpperCase())
   ));
@@ -63,10 +64,10 @@
   // Auto-adjust fee tier for stablecoin pairs
   $effect(() => {
     if (autoFeeEnabled && fromToken && toToken) {
-      const isStablecoinPair = 
-        STABLECOINS.includes(fromToken.symbol) && 
+      const isStablecoinPair =
+        STABLECOINS.includes(fromToken.symbol) &&
         STABLECOINS.includes(toToken.symbol);
-      
+
       if (isStablecoinPair) {
         poolFee = 500; // 0.05% for stablecoin pairs
       } else {
@@ -80,11 +81,11 @@
     const temp = fromToken;
     fromToken = toToken;
     toToken = temp;
-    
+
     const tempAmount = fromAmount;
     fromAmount = toAmount;
     toAmount = tempAmount;
-    
+
     // Clear quote data
     quoteData = null;
   }
@@ -92,38 +93,38 @@
   // Validate swap
   function validateSwap(): boolean {
     validationError = '';
-    
+
     if (!fromToken || !toToken) {
       validationError = 'Please select tokens';
       return false;
     }
-    
+
     if (!fromAmount || parseFloat(fromAmount) <= 0) {
       validationError = 'Please enter an amount';
       return false;
     }
-    
-    const balance = parseFloat(fromToken.balance || '0');
+
+    const balance = BigNumberishUtils.toNumber(fromToken.balance || 0);
     if (parseFloat(fromAmount) > balance) {
       validationError = 'Insufficient balance';
       return false;
     }
-    
+
     if (fromToken.address === toToken.address) {
       validationError = 'Cannot swap same token';
       return false;
     }
-    
+
     return true;
   }
 
   // Fetch quote
   async function fetchQuote() {
     if (!validateSwap()) return;
-    
+
     fetchingQuote = true;
     insufficientLiquidity = false;
-    
+
     try {
       const response = await messagingService.sendMessage('swap.getQuote', {
         fromToken: {
@@ -141,15 +142,15 @@
         slippage,
         fee: poolFee
       });
-      
+
       if (response.success && response.data) {
         quoteData = response.data;
         toAmount = response.data.toAmount;
-        
+
         // Calculate price impact
         const impactPercent = parseFloat(response.data.priceImpact || '0');
         priceImpact = impactPercent;
-        
+
         // Check for high price impact
         if (impactPercent > 5) {
           validationError = 'High price impact! Consider smaller amount.';
@@ -159,7 +160,7 @@
       }
     } catch (error: any) {
       console.error('Quote error:', error);
-      
+
       if (error.message?.includes('insufficient liquidity')) {
         insufficientLiquidity = true;
         validationError = 'Insufficient liquidity for this trade';
@@ -191,7 +192,7 @@
   // Execute swap
   async function executeSwap() {
     if (!quoteData || !fromToken || !toToken) return;
-    
+
     loading = true;
     try {
       // Check allowance for ERC20 tokens
@@ -201,31 +202,31 @@
           ownerAddress: account?.address,
           spenderAddress: '0xE592427A0AEce92De3Edee1F18E0157C05861564' // Uniswap V3 Router
         });
-        
+
         if (allowanceResponse.success) {
-          const allowance = BigInt(allowanceResponse.data.allowance);
+          const allowance = BigNumberishUtils.toBigInt(allowanceResponse.data.allowance);
           const amountIn = ethers.parseUnits(fromAmount, fromToken.decimals || 18);
-          
+
           if (allowance < amountIn) {
             // Need approval
             notificationService.info('Approving token for swap...');
-            
+
             const approvalResponse = await messagingService.sendMessage('swap.approve', {
               tokenAddress: fromToken.address,
               spenderAddress: '0xE592427A0AEce92De3Edee1F18E0157C05861564',
               amount: amountIn.toString()
             });
-            
+
             if (!approvalResponse.success) {
               throw new Error('Failed to approve token');
             }
-            
+
             // Wait a bit for approval to be mined
             await new Promise(resolve => setTimeout(resolve, 2000));
           }
         }
       }
-      
+
       // Execute swap
       const swapResponse = await messagingService.sendMessage('swap.execute', {
         fromToken: {
@@ -244,22 +245,22 @@
         fee: poolFee,
         deadline: Math.floor(Date.now() / 1000) + (deadline * 60)
       });
-      
+
       if (swapResponse.success && swapResponse.data) {
         // Show success notification
         notificationService.success(
           'Swap Initiated!',
           `Transaction hash: ${swapResponse.data.txHash}`
         );
-        
+
         // Show pending transaction UI
         uiStore.showTransactionPending(swapResponse.data.txHash);
-        
+
         // Call parent handler
         if (onSwap) {
           onSwap(swapResponse.data);
         }
-        
+
         // Close modal
         show = false;
         resetForm();
@@ -277,7 +278,7 @@
   // Submit handler
   function handleSubmit() {
     if (!validateSwap() || !quoteData) return;
-    
+
     // Show PIN verification
     showPincode = true;
   }
@@ -326,9 +327,9 @@
   }
 </script>
 
-<Modal 
-  bind:show 
-  title="Swap Tokens" 
+<Modal
+  bind:show
+  title="Swap Tokens"
   size="lg"
   onClose={() => {
     show = false;
@@ -366,11 +367,11 @@
       </div>
       {#if fromToken}
         <div class="mt-2 flex justify-between text-sm text-gray-500">
-          <span>Balance: {formatAmount(fromToken.balance || '0')}</span>
+          <span>Balance: {formatAmount(BigNumberishUtils.toNumber(fromToken.balance || 0))}</span>
           <button
             class="text-indigo-600 hover:text-indigo-800"
             onclick={() => {
-              fromAmount = fromToken?.balance || '0';
+              fromAmount = BigNumberishUtils.toNumber(fromToken?.balance || 0).toString();
               handleAmountChange();
             }}
           >
@@ -418,7 +419,7 @@
       </div>
       {#if toToken}
         <div class="mt-2 text-sm text-gray-500">
-          Balance: {formatAmount(toToken.balance || '0')}
+          Balance: {formatAmount(BigNumberishUtils.toNumber(toToken.balance || 0))}
         </div>
       {/if}
     </div>
@@ -529,9 +530,9 @@
 
 <!-- Settings Modal -->
 {#if showSettings}
-  <Modal 
-    show={showSettings} 
-    title="Transaction Settings" 
+  <Modal
+    show={showSettings}
+    title="Transaction Settings"
     size="sm"
     onClose={() => showSettings = false}
   >
@@ -625,4 +626,4 @@
     onSuccess={handlePinSuccess}
     onCancel={() => showPincode = false}
   />
-{/if}
\ No newline at end of file
+{/if}
diff --git a/packages/yakkl-wallet/src/lib/components/TokenComponentList.svelte b/packages/yakkl-wallet/src/lib/components/TokenComponentList.svelte
index 0569bc4..64ed6cb 100644
--- a/packages/yakkl-wallet/src/lib/components/TokenComponentList.svelte
+++ b/packages/yakkl-wallet/src/lib/components/TokenComponentList.svelte
@@ -1,5 +1,5 @@
 <script lang="ts">
-	import { getYakklCombinedToken, yakklCombinedTokenStore, getSettings } from '$lib/common/stores';
+	import { getYakklCombinedTokens, yakklCombinedTokenStore, getSettings } from '$lib/common/stores';
 	import type { Settings, TokenData } from '$lib/common';
 	import { onMount } from 'svelte';
 	import { log } from '$lib/managers/Logger';
@@ -40,7 +40,7 @@
 			tokens = [];
 			updateTokenDisplay();
 		} else {
-			getYakklCombinedToken().then((initialTokens) => {
+			getYakklCombinedTokens().then((initialTokens) => {
 				console.log('TokenComponentList: combined tokens loaded', initialTokens.length);
 
 				// If no tokens are loaded, try to trigger loading them
@@ -51,7 +51,7 @@
 					import('$lib/managers/tokens/loadDefaultTokens').then(({ loadDefaultTokens }) => {
 						loadDefaultTokens().then(() => {
 							// After loading defaults, attempt to get combined tokens again
-							getYakklCombinedToken().then((reloadedTokens) => {
+							getYakklCombinedTokens().then((reloadedTokens) => {
 								console.log('TokenComponentList: tokens after reload', reloadedTokens.length);
 								const effectiveMaxTokens = locked ? maxTokens : maxTokens > 0 ? maxTokens : 0;
 								tokens =
@@ -59,7 +59,7 @@
 										? reloadedTokens.slice(0, effectiveMaxTokens)
 										: reloadedTokens;
 								updateTokenDisplay();
-								
+
 								// Trigger price update after tokens are loaded
 								import('$lib/common/tokenPriceManager').then(({ updateTokenPrices }) => {
 									updateTokenPrices();
@@ -85,7 +85,7 @@
 
 			// Start pricing checks for ETH-USD
 			startPricingChecks();
-			
+
 			// Import and start token price updates dynamically to avoid SSR issues
 			import('$lib/common/tokenPriceManager').then(({ updateTokenPrices }) => {
 				// Initial price update after a short delay
diff --git a/packages/yakkl-wallet/src/lib/components/TokenDetailModal.svelte b/packages/yakkl-wallet/src/lib/components/TokenDetailModal.svelte
index 6e3e2dd..42d50c4 100644
--- a/packages/yakkl-wallet/src/lib/components/TokenDetailModal.svelte
+++ b/packages/yakkl-wallet/src/lib/components/TokenDetailModal.svelte
@@ -3,7 +3,8 @@
   import type { TokenDisplay } from '../types';
   import { currentChain } from '../stores/chain.store';
   import { get } from 'svelte/store';
-  import ProtectedValue from './v1/ProtectedValue.svelte';
+  import ProtectedValue from './ProtectedValue.svelte';
+  import { BigNumberishUtils } from '$lib/common/BigNumberishUtils';
 
   interface Props {
     show?: boolean;
@@ -114,14 +115,14 @@
         <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-3">
           <p class="text-xs text-gray-500 dark:text-gray-400">Price</p>
           <p class="text-sm font-medium text-gray-900 dark:text-white">
-            <ProtectedValue value={formatPrice(token.price)} placeholder="****" />
+            <ProtectedValue value={formatPrice(BigNumberishUtils.toNumber(token.price))} placeholder="****" />
           </p>
         </div>
 
         <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-3">
           <p class="text-xs text-gray-500 dark:text-gray-400">24h Change</p>
-          <p class="text-sm font-medium {token.change24h && token.change24h >= 0 ? 'text-green-600' : 'text-red-600'}">
-            {token.change24h !== undefined ? `${token.change24h >= 0 ? '+' : ''}${token.change24h.toFixed(2)}%` : 'N/A'}
+          <p class="text-sm font-medium {token.change24h && BigNumberishUtils.compare(token.change24h, 0) >= 0 ? 'text-green-600' : 'text-red-600'}">
+            {token.change24h !== undefined ? `${BigNumberishUtils.compare(token.change24h, 0) >= 0 ? '+' : ''}${BigNumberishUtils.toNumber(token.change24h).toFixed(2)}%` : 'N/A'}
           </p>
         </div>
       </div>
diff --git a/packages/yakkl-wallet/src/lib/components/TokenFiatConverter.svelte b/packages/yakkl-wallet/src/lib/components/TokenFiatConverter.svelte
index 36edb1e..18ed509 100644
--- a/packages/yakkl-wallet/src/lib/components/TokenFiatConverter.svelte
+++ b/packages/yakkl-wallet/src/lib/components/TokenFiatConverter.svelte
@@ -7,6 +7,7 @@
 	import { CoinbasePriceProvider } from '$lib/managers/providers/price/coinbase/CoinbasePriceProvider';
 	import { CoingeckoPriceProvider } from '$lib/managers/providers/price/coingecko/CoingeckoPriceProvider';
 	import { KrakenPriceProvider } from '$lib/managers/providers/price/kraken/KrakenPriceProvider';
+	import { BigNumberishUtils } from '$lib/common/BigNumberishUtils';
 
 	let {
 		show = $bindable(false),
@@ -51,7 +52,7 @@
 			isLoading = true;
 			try {
 				const result = await priceManager.getMarketPrice(fromToken.symbol);
-				price = result && typeof result === 'object' && 'price' in result ? result.price : 0;
+				price = result && typeof result === 'object' && 'price' in result ? BigNumberishUtils.toNumber(result.price) : 0;
 			} catch (error) {
 				console.error('Failed to fetch price:', error);
 				price = 0;
diff --git a/packages/yakkl-wallet/src/lib/components/TokenPortfolio.svelte b/packages/yakkl-wallet/src/lib/components/TokenPortfolio.svelte
index 2370c43..d6d3772 100644
--- a/packages/yakkl-wallet/src/lib/components/TokenPortfolio.svelte
+++ b/packages/yakkl-wallet/src/lib/components/TokenPortfolio.svelte
@@ -3,7 +3,7 @@
   import MoreLess from "./MoreLess.svelte";
   import { tokenStore, isMultiChainView } from '$lib/stores/token.store';
   import { canUseFeature } from '$lib/utils/features';
-  import ProtectedValue from './v1/ProtectedValue.svelte';
+  import ProtectedValue from './ProtectedValue.svelte';
   import { CacheSyncManager } from '$lib/services/cache-sync.service';
   import { currentAccount } from '$lib/stores/account.store';
   import { currentChain } from '$lib/stores/chain.store';
diff --git a/packages/yakkl-wallet/src/lib/components/TransactionDetailModal.svelte b/packages/yakkl-wallet/src/lib/components/TransactionDetailModal.svelte
index 40e0e74..d5bf874 100644
--- a/packages/yakkl-wallet/src/lib/components/TransactionDetailModal.svelte
+++ b/packages/yakkl-wallet/src/lib/components/TransactionDetailModal.svelte
@@ -1,6 +1,6 @@
 <script lang="ts">
   import type { TransactionDisplay } from '../types';
-  import ProtectedValue from './v1/ProtectedValue.svelte';
+  import ProtectedValue from './ProtectedValue.svelte';
   import Modal from './Modal.svelte';
   import { currentChain } from '../stores/chain.store';
   import { currentAccount } from '../stores/account.store';
@@ -8,6 +8,7 @@
   import TransactionTooltips from './TransactionTooltips.svelte';
   import TransactionStatusTooltip from './TransactionStatusTooltip.svelte';
   import TransactionHoverCard from './TransactionHoverCard.svelte';
+  import { BigNumberishUtils } from '$lib/common/BigNumberishUtils';
 
   interface Props {
     show: boolean;
@@ -20,13 +21,13 @@
   let chain = $derived($currentChain);
   let account = $derived($currentAccount);
   let tokens = $derived($displayTokens);
-  
+
   // Get native token price
   let nativeToken = $derived(
-    tokens.find(t => 
-      t.symbol === chain?.nativeCurrency?.symbol || 
-      t.symbol === 'ETH' || 
-      t.symbol === 'MATIC' || 
+    tokens.find(t =>
+      t.symbol === chain?.nativeCurrency?.symbol ||
+      t.symbol === 'ETH' ||
+      t.symbol === 'MATIC' ||
       t.symbol === 'BNB'
     )
   );
@@ -140,9 +141,9 @@
 
   let txType = $derived(transaction ? getTransactionType(transaction) : '');
   let isOutgoing = $derived(transaction && account ? transaction.from.toLowerCase() === account.address.toLowerCase() : false);
-  let gasEth = $derived(transaction ? formatGasUsed(transaction.gasUsed || '0', transaction.gasPrice || '0') : '0');
-  let gasFiat = $derived(formatFiatValue(gasEth, nativePrice));
-  let valueFiat = $derived(transaction ? formatFiatValue(transaction.value, nativePrice) : '$0.00');
+  let gasEth = $derived(transaction ? formatGasUsed(transaction.gasUsed || '0', BigNumberishUtils.toNumber(transaction.gasPrice || 0).toString()) : '0');
+  let gasFiat = $derived(formatFiatValue(gasEth, BigNumberishUtils.toNumber(nativePrice)));
+  let valueFiat = $derived(transaction ? formatFiatValue(BigNumberishUtils.toNumber(transaction.value).toString(), BigNumberishUtils.toNumber(nativePrice)) : '$0.00');
 </script>
 
 <Modal bind:show {onClose} title="Transaction Details" className="max-w-lg">
@@ -262,9 +263,9 @@
               <TransactionTooltips type="nativeToken" placement="auto" />
             </div>
             <div class="font-mono {isOutgoing ? 'text-red-500' : 'text-green-500'} font-bold text-lg">
-              <ProtectedValue 
-                value={`${isOutgoing ? '' : '+'}${formatFullAmount(transaction.value)} ${chain?.nativeCurrency?.symbol || 'ETH'}`} 
-                placeholder="******* ***" 
+              <ProtectedValue
+                value={`${isOutgoing ? '' : '+'}${formatFullAmount(transaction.value)} ${chain?.nativeCurrency?.symbol || 'ETH'}`}
+                placeholder="******* ***"
               />
             </div>
           </div>
diff --git a/packages/yakkl-wallet/src/lib/components/TransactionHoverCard.svelte b/packages/yakkl-wallet/src/lib/components/TransactionHoverCard.svelte
index f924841..04a899f 100644
--- a/packages/yakkl-wallet/src/lib/components/TransactionHoverCard.svelte
+++ b/packages/yakkl-wallet/src/lib/components/TransactionHoverCard.svelte
@@ -1,6 +1,6 @@
 <script lang="ts">
   import type { TransactionDisplay } from '../types';
-  import ProtectedValue from './v1/ProtectedValue.svelte';
+  import ProtectedValue from './ProtectedValue.svelte';
   import SimpleHoverCard from './SimpleHoverCard.svelte';
   import { currentChain } from '../stores/chain.store';
 
@@ -209,4 +209,4 @@
     </div>
     </div>
   {/snippet}
-</SimpleHoverCard>
\ No newline at end of file
+</SimpleHoverCard>
diff --git a/packages/yakkl-wallet/src/lib/components/Upgrade.svelte b/packages/yakkl-wallet/src/lib/components/Upgrade.svelte
index 83f3d9d..25f27b7 100644
--- a/packages/yakkl-wallet/src/lib/components/Upgrade.svelte
+++ b/packages/yakkl-wallet/src/lib/components/Upgrade.svelte
@@ -2,7 +2,7 @@
   import { onMount } from 'svelte';
   import { planStore, currentPlan, isOnTrial } from '../stores/plan.store';
   import { canUseFeature } from '../utils/features';
-  import { PlanType } from '../types';
+  import { PlanType } from '../common';
 
   let {
     show = $bindable(false),
@@ -18,32 +18,32 @@
   let upgradeStep = $state('overview'); // 'overview', 'selecting', 'processing', 'success'
   let isProcessing = $state(false);
   let progress = $state(0);
-  let selectedPlan = $state(PlanType.Pro);
+  let selectedPlan = $state(PlanType.YAKKL_PRO);
   let statusMessage = $state('');
 
   // Plan features configuration
   const planFeatures = {
-    [PlanType.Basic]: [
+    [PlanType.EXPLORER_MEMBER]: [
       'Basic wallet functionality',
       'Up to 3 accounts',
       'Standard networks',
       'Community support'
     ],
-    [PlanType.FoundingMember]: [
+    [PlanType.FOUNDING_MEMBER]: [
       'Everything in Pro',
       'Founding member benefits',
       'Lifetime features',
       'Special recognition',
       'Direct founder access'
     ],
-    [PlanType.EarlyAdopter]: [
+    [PlanType.EARLY_ADOPTER]: [
       'Everything in Pro',
       'Early adopter benefits',
       'Special pricing',
       'Beta access',
       'Priority feedback'
     ],
-    [PlanType.Pro]: [
+    [PlanType.YAKKL_PRO]: [
       'Unlimited accounts',
       'Advanced analytics',
       'Custom networks',
@@ -55,7 +55,7 @@
       'Portfolio tracking',
       'Advanced trading tools'
     ],
-    [PlanType.Enterprise]: [
+    [PlanType.ENTERPRISE]: [
       'Everything in Pro',
       'Multi-signature support',
       'White label solutions',
@@ -70,23 +70,23 @@
   };
 
   const planPricing = {
-    [PlanType.Basic]: { monthly: 0, yearly: 0 },
-    [PlanType.FoundingMember]: { monthly: 0, yearly: 0 }, // Special pricing
-    [PlanType.EarlyAdopter]: { monthly: 7.99, yearly: 79.99 }, // Discounted
-    [PlanType.Pro]: { monthly: 9.99, yearly: 99.99 },
-    [PlanType.Enterprise]: { monthly: 49.99, yearly: 499.99 },
+    [PlanType.EXPLORER_MEMBER]: { monthly: 0, yearly: 0 },
+    [PlanType.FOUNDING_MEMBER]: { monthly: 0, yearly: 0 }, // Special pricing
+    [PlanType.EARLY_ADOPTER]: { monthly: 7.99, yearly: 79.99 }, // Discounted
+    [PlanType.YAKKL_PRO]: { monthly: 9.99, yearly: 99.99 },
+    [PlanType.ENTERPRISE]: { monthly: 49.99, yearly: 499.99 },
   };
 
   const planColors = {
-    [PlanType.Basic]: 'from-gray-500 to-gray-600',
-    [PlanType.FoundingMember]: 'from-purple-600 to-pink-600',
-    [PlanType.EarlyAdopter]: 'from-blue-600 to-cyan-600',
-    [PlanType.Pro]: 'from-indigo-500 to-purple-600',
-    [PlanType.Enterprise]: 'from-yellow-500 to-orange-600',
+    [PlanType.EXPLORER_MEMBER]: 'from-gray-500 to-gray-600',
+    [PlanType.FOUNDING_MEMBER]: 'from-purple-600 to-pink-600',
+    [PlanType.EARLY_ADOPTER]: 'from-blue-600 to-cyan-600',
+    [PlanType.YAKKL_PRO]: 'from-indigo-500 to-purple-600',
+    [PlanType.ENTERPRISE]: 'from-yellow-500 to-orange-600',
   };
 
   function getAvailableUpgrades() {
-    const plans = [PlanType.Basic, PlanType.Pro, PlanType.Enterprise];
+    const plans = [PlanType.EXPLORER_MEMBER, PlanType.YAKKL_PRO, PlanType.ENTERPRISE];
     const currentIndex = plans.indexOf(plan);
     return plans.slice(currentIndex + 1);
   }
@@ -99,11 +99,11 @@
 
   function getPlanIcon(planType: PlanType): string {
     switch (planType) {
-      case PlanType.Basic: return '';
-      case PlanType.FoundingMember: return '';
-      case PlanType.EarlyAdopter: return '';
-      case PlanType.Pro: return '';
-      case PlanType.Enterprise: return '';
+      case PlanType.EXPLORER_MEMBER: return '';
+      case PlanType.FOUNDING_MEMBER: return '';
+      case PlanType.EARLY_ADOPTER: return '';
+      case PlanType.YAKKL_PRO: return '';
+      case PlanType.ENTERPRISE: return '';
       default: return '';
     }
   }
@@ -241,8 +241,8 @@
                         {formatPlanName(planType)}
                       </h4>
                       <p class="text-sm text-zinc-600 dark:text-zinc-400">
-                        Perfect for {planType === PlanType.Pro ? 'advanced users' :
-                                    planType === PlanType.Enterprise ? 'businesses' :
+                        Perfect for {planType === PlanType.YAKKL_PRO ? 'advanced users' :
+                                    planType === PlanType.ENTERPRISE ? 'businesses' :
                                     'getting started'}
                       </p>
                     </div>
diff --git a/packages/yakkl-wallet/src/lib/components/UserMenu.svelte b/packages/yakkl-wallet/src/lib/components/UserMenu.svelte
index 6b6b2bf..1cb5104 100644
--- a/packages/yakkl-wallet/src/lib/components/UserMenu.svelte
+++ b/packages/yakkl-wallet/src/lib/components/UserMenu.svelte
@@ -83,7 +83,7 @@
 
   // Membership plan colors for rings
   let ringColor = $derived.by(() => {
-    const planLower = plan?.toLowerCase() || 'basic';
+    const planLower = plan?.toLowerCase() || 'explorer_member';
 
     if (planLower.includes('founding')) {
       return 'oklch(71.97% 0.149 81.37 / 1)'; // Founding member color
@@ -98,7 +98,7 @@
 
   // Plan tag for avatar
   let planTag = $derived.by(() => {
-    const planLower = plan?.toLowerCase() || 'basic';
+    const planLower = plan?.toLowerCase() || 'explorer_member';
 
     if (planLower.includes('founding')) {
       return 'fpro';
@@ -107,7 +107,7 @@
     } else if (planLower === 'yakkl_pro' || planLower === 'pro') {
       return 'pro';
     } else {
-      return 'basic';
+      return 'explorer_member';
     }
   });
 
@@ -160,7 +160,7 @@
         </div>
       {/if}
     </button>
-    {#if planTag !== 'basic'}
+    {#if planTag !== 'explorer_member'}
       <span class="absolute -bottom-1 -right-1 text-[8px] font-semibold px-1 rounded text-white"
             style={`background-color: ${ringColor}`}>
         {planTag.toUpperCase()}
diff --git a/packages/yakkl-wallet/src/lib/components/extensions/ExtensionDashboard.svelte b/packages/yakkl-wallet/src/lib/components/extensions/ExtensionDashboard.svelte
index 00bd038..b5b184d 100644
--- a/packages/yakkl-wallet/src/lib/components/extensions/ExtensionDashboard.svelte
+++ b/packages/yakkl-wallet/src/lib/components/extensions/ExtensionDashboard.svelte
@@ -7,6 +7,20 @@
   import { extensions, discoveredExtensions, isCoreAvailable, discoverExtensions, loadExtension } from '../../core/integration';
   import ExtensionRenderer from './ExtensionRenderer.svelte';
 
+  interface ExtensionManifest {
+    id: string;
+    name: string;
+    description: string;
+    version: string;
+    category: string;
+    tier: string;
+  }
+
+  interface Extension {
+    manifest?: ExtensionManifest;
+    id?: string;
+  }
+
   let { className = '' } = $props();
 
   let loading = $state(false);
@@ -14,8 +28,8 @@
   let selectedCategory = $state('all');
 
   // Reactive stores
-  let loadedExtensions = $derived($extensions);
-  let discovered = $derived($discoveredExtensions);
+  let loadedExtensions = $derived($extensions as Extension[]);
+  let discovered = $derived($discoveredExtensions as Extension[]);
 
   // Categories for filtering
   const categories = [
@@ -33,7 +47,7 @@
     if (selectedCategory === 'all') {
       return loadedExtensions;
     }
-    return loadedExtensions.filter(v => v.manifest.category === selectedCategory);
+    return loadedExtensions.filter(v => v.manifest?.category === selectedCategory);
   });
 
   onMount(async () => {
@@ -195,26 +209,26 @@
             <div class="bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-xl p-4 hover:shadow-md transition-shadow">
               <div class="flex items-start gap-3 mb-3">
                 <div class="w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center text-white text-sm font-bold">
-                  {getCategoryIcon(extension.manifest.category)}
+                  {getCategoryIcon(extension.manifest?.category || 'utility')}
                 </div>
                 <div class="flex-1 min-w-0">
                   <div class="flex items-center gap-2 mb-1">
                     <h3 class="font-medium text-zinc-900 dark:text-white truncate">
-                      {extension.manifest.name}
+                      {extension.manifest?.name || 'Unknown Extension'}
                     </h3>
-                    <span class={`px-2 py-0.5 text-xs font-medium rounded-full ${getTierColor(extension.manifest.tier)}`}>
-                      {extension.manifest.tier}
+                    <span class={`px-2 py-0.5 text-xs font-medium rounded-full ${getTierColor(extension.manifest?.tier || 'community')}`}>
+                      {extension.manifest?.tier || 'community'}
                     </span>
                   </div>
                   <p class="text-sm text-zinc-600 dark:text-zinc-400 line-clamp-2">
-                    {extension.manifest.description}
+                    {extension.manifest?.description || 'No description available'}
                   </p>
                 </div>
               </div>
 
               <div class="flex items-center justify-between">
                 <div class="text-xs text-zinc-500 dark:text-zinc-500">
-                  v{extension.manifest.version}
+                  v{extension.manifest?.version || '1.0.0'}
                 </div>
                 <div class="flex gap-2">
                   <span class="inline-flex items-center px-2 py-1 bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300 text-xs rounded-full">
diff --git a/packages/yakkl-wallet/src/lib/components/showcase/PrivateFeatures.svelte b/packages/yakkl-wallet/src/lib/components/showcase/PrivateFeatures.svelte
index dba0922..d386e0a 100644
--- a/packages/yakkl-wallet/src/lib/components/showcase/PrivateFeatures.svelte
+++ b/packages/yakkl-wallet/src/lib/components/showcase/PrivateFeatures.svelte
@@ -4,10 +4,10 @@
 
 <script lang="ts">
   import { canUseFeature, currentPlan, isProUser } from '../../stores/plan.store';
-  import { PlanType } from '../../types';
+  import { PlanType } from '$lib/common/types';
   import Upgrade from '../Upgrade.svelte';
 
-  let { 
+  let {
     className = '',
     variant = 'card' // 'card', 'banner', 'modal'
   } = $props();
@@ -73,7 +73,7 @@
 
   function getFeatureStatus(feature: string) {
     if (canUseFeature(feature)) return 'available';
-    if (plan === PlanType.Private) return 'available';
+    if (plan === PlanType.ENTERPRISE) return 'available';
     return 'locked';
   }
 </script>
@@ -95,7 +95,7 @@
         </button>
       </div>
     </div>
-  
+
   {:else if variant === 'card'}
     <!-- Card Style -->
     <div class="yakkl-card p-6 border-2 border-red-200 dark:border-red-800">
@@ -105,7 +105,7 @@
         </div>
         <h2 class="text-xl font-bold mb-2">YAKKL Private</h2>
         <p class="text-gray-600 dark:text-gray-400">
-          {#if plan === PlanType.Private}
+          {#if plan === PlanType.ENTERPRISE}
             You have access to all Private security features!
           {:else if isProOrHigher}
             Upgrade to Private for maximum security and privacy
@@ -161,7 +161,7 @@
       </div>
 
       <!-- Action Buttons -->
-      {#if plan !== PlanType.Private}
+      {#if plan !== PlanType.ENTERPRISE}
         <div class="text-center">
           <button
             onclick={handleUpgrade}
@@ -187,14 +187,9 @@
 </div>
 
 <!-- Upgrade Modal -->
-<Upgrade 
+<Upgrade
   bind:show={showUpgradeModal}
   onComplete={() => showUpgradeModal = false}
   onCancel={() => showUpgradeModal = false}
 />
 
-<style>
-  .private-features-showcase {
-    /* Base styling for the showcase component */
-  }
-</style>
\ No newline at end of file
diff --git a/packages/yakkl-wallet/src/lib/components/showcase/ProFeatures.svelte b/packages/yakkl-wallet/src/lib/components/showcase/ProFeatures.svelte
index e313ab4..4cbc5c4 100644
--- a/packages/yakkl-wallet/src/lib/components/showcase/ProFeatures.svelte
+++ b/packages/yakkl-wallet/src/lib/components/showcase/ProFeatures.svelte
@@ -4,10 +4,10 @@
 
 <script lang="ts">
   import { canUseFeature, currentPlan, isOnTrial } from '../../stores/plan.store';
-  import { PlanType } from '../../types';
+  import { PlanType } from '$lib/common/types';
   import Upgrade from '../Upgrade.svelte';
 
-  let { 
+  let {
     className = '',
     variant = 'card' // 'card', 'banner', 'modal'
   } = $props();
@@ -73,7 +73,7 @@
 
   function getFeatureStatus(feature: string) {
     if (canUseFeature(feature)) return 'available';
-    if (plan === PlanType.Basic) return 'locked';
+    if (plan === PlanType.EXPLORER_MEMBER) return 'locked';
     return 'upgrade'; // Pro user looking at higher tier features
   }
 </script>
@@ -95,7 +95,7 @@
         </button>
       </div>
     </div>
-  
+
   {:else if variant === 'card'}
     <!-- Card Style -->
     <div class="yakkl-card p-6">
@@ -107,7 +107,7 @@
         <p class="text-gray-600 dark:text-gray-400">
           {#if trial}
             You're currently on a trial. Upgrade to keep these features!
-          {:else if plan === PlanType.Basic}
+          {:else if plan === PlanType.EXPLORER_MEMBER}
             Unlock advanced features with YAKKL Pro
           {:else}
             You have access to all Pro features!
@@ -149,7 +149,7 @@
       </div>
 
       <!-- Action Buttons -->
-      {#if plan === PlanType.Basic || trial}
+      {#if plan === PlanType.EXPLORER_MEMBER || trial}
         <div class="text-center">
           <button
             onclick={handleUpgrade}
@@ -175,14 +175,9 @@
 </div>
 
 <!-- Upgrade Modal -->
-<Upgrade 
+<Upgrade
   bind:show={showUpgradeModal}
   onComplete={() => showUpgradeModal = false}
   onCancel={() => showUpgradeModal = false}
 />
 
-<style>
-  .pro-features-showcase {
-    /* Base styling for the showcase component */
-  }
-</style>
\ No newline at end of file
diff --git a/packages/yakkl-wallet/src/lib/components/v1/AccountForm.svelte b/packages/yakkl-wallet/src/lib/components/v1/AccountForm.svelte
deleted file mode 100644
index f9e7307..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/AccountForm.svelte
+++ /dev/null
@@ -1,151 +0,0 @@
-<!-- AccountForm.svelte -->
-<script lang="ts">
-	import { createForm } from 'svelte-forms-lib';
-	import { ClipboardIcon } from 'svelte-feather-icons';
-	import * as yup from 'yup';
-	import type { YakklAccount } from '$lib/common';
-	import Modal from './Modal.svelte';
-
-	interface Props {
-		show?: boolean;
-		account?: YakklAccount | null;
-		onSubmit?: (account: YakklAccount) => void;
-	}
-
-	let { show = $bindable(false), account = null, onSubmit = () => {} }: Props = $props();
-
-	// Not using onCancel here but letting it fall through to the Modal component since we don't need to do anything special
-	// export let onCancel: () => void = () => {show = false};
-
-	const { form, errors, handleChange, handleSubmit, updateInitialValues } = createForm({
-		initialValues: {
-			name: '',
-			alias: '',
-			description: ''
-		},
-		validationSchema: yup.object().shape({
-			name: yup.string().required('Please enter an account name'),
-			alias: yup.string().optional(),
-			description: yup.string().optional()
-		}),
-		onSubmit: (values) => {
-			if (account) {
-				const updatedAccount: YakklAccount = {
-					...account,
-					name: values.name,
-					alias: values.alias,
-					description: values.description
-				};
-				onSubmit(updatedAccount);
-			}
-			show = false;
-		}
-	});
-
-	function resetForm() {
-		updateInitialValues({
-			name: '',
-			alias: '',
-			description: ''
-		});
-	}
-
-	function copyAddress(address: string) {
-		navigator.clipboard.writeText(address);
-	}
-
-	$effect(() => {
-		if (account) {
-			updateInitialValues({
-				name: account.name,
-				alias: account.alias || '',
-				description: account.description || ''
-			});
-		} else {
-			resetForm();
-		}
-	});
-</script>
-
-<Modal bind:show title={account ? 'Edit Account' : 'Add Account'}>
-	<form onsubmit={handleSubmit} class="space-y-4 p-6">
-		<div>
-			<!-- svelte-ignore a11y_label_has_associated_control -->
-			<label class="block text-sm font-medium text-gray-700">Address</label>
-			<div class="mt-1 flex items-center">
-				<input
-					type="text"
-					class="flex-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm text-gray-800 bg-gray-100 cursor-not-allowed"
-					value={account?.address || ''}
-					disabled
-				/>
-				<button
-					type="button"
-					class="ml-2 inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
-					onclick={() => copyAddress(account?.address || '')}
-				>
-					<ClipboardIcon class="h-4 w-4" />
-				</button>
-			</div>
-		</div>
-
-		<div>
-			<label for="name" class="block text-sm font-medium text-gray-700">Name</label>
-			<input
-				type="text"
-				id="name"
-				class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm text-gray-800"
-				bind:value={$form.name}
-				onchange={handleChange}
-			/>
-			{#if $errors.name}
-				<p class="mt-2 text-sm text-red-600">{$errors.name}</p>
-			{/if}
-		</div>
-		<div>
-			<label for="alias" class="block text-sm font-medium text-gray-700">Alias</label>
-			<input
-				type="text"
-				id="alias"
-				class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm text-gray-800"
-				bind:value={$form.alias}
-				onchange={handleChange}
-			/>
-			{#if $errors.alias}
-				<p class="mt-2 text-sm text-red-600">{$errors.alias}</p>
-			{/if}
-		</div>
-		<div>
-			<label for="description" class="block text-sm font-medium text-gray-700">Description</label>
-			<textarea
-				id="description"
-				rows="3"
-				class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm text-gray-800"
-				bind:value={$form.description}
-				onchange={handleChange}
-			></textarea>
-			{#if $errors.description}
-				<p class="mt-2 text-sm text-red-600">{$errors.description}</p>
-			{/if}
-		</div>
-		<div class="pt-5">
-			<div class="flex justify-end space-x-4">
-				<button
-					type="button"
-					class="rounded-md border border-gray-300 bg-white py-2 px-4 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"
-					onclick={() => (show = false)}>Cancel</button
-				>
-				<button
-					type="button"
-					class="rounded-md border border-gray-300 bg-white py-2 px-4 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"
-					onclick={resetForm}>Reset</button
-				>
-				<button
-					type="submit"
-					class="rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"
-					>Save</button
-				>
-			</div>
-		</div>
-	</form>
-</Modal>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/AccountListing.svelte b/packages/yakkl-wallet/src/lib/components/v1/AccountListing.svelte
deleted file mode 100644
index 82e07e9..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/AccountListing.svelte
+++ /dev/null
@@ -1,518 +0,0 @@
-<!-- AccountListing.svelte -->
-<script lang="ts">
-	import type { YakklAccount } from '$lib/common';
-	import { onMount, onDestroy } from 'svelte';
-	import {
-		yakklAccountsStore,
-		yakklCurrentlySelectedStore,
-		yakklPricingStore,
-		yakklPrimaryAccountsStore,
-		yakklSettingsStore
-	} from '$lib/common/stores';
-	import AccountForm from './AccountForm.svelte';
-	import Confirmation from './Confirmation.svelte';
-	import BalanceIndicator from './BalanceIndicator.svelte';
-	import RestrictedAccountDisplay from './RestrictedAccountDisplay.svelte';
-	import SubAccountIndicator from './SubAccountIndicator.svelte';
-	import EnhancedDeleteConfirmation from './EnhancedDeleteConfirmation.svelte';
-	import { dateString } from '$lib/common/datetime';
-	import { setYakklAccountsStorage, setYakklPrimaryAccountsStorage } from '$lib/common/stores';
-	import { AccountTypeCategory } from '$lib/common/types';
-	import EditControls from './EditControls.svelte';
-	import WalletManager from '$lib/managers/WalletManager';
-	import type { Wallet } from '$lib/managers/Wallet';
-	import { log } from '$lib/managers/Logger';
-	import {
-		collectAccountDataProgressive,
-		createAccountDataWithRestrictions,
-		type AccountData
-	} from '$lib/utilities/accountData';
-	import { balanceCacheManager } from '$lib/managers/BalanceCacheManager';
-
-	interface Props {
-		accounts?: YakklAccount[];
-		onAccountSelect?: (account: YakklAccount) => void;
-		onUpgrade?: () => void;
-	}
-
-	let {
-		accounts = $bindable([]),
-		onAccountSelect = () => {},
-		onUpgrade = () => {}
-	}: Props = $props();
-
-	let editMode = $state(false);
-	let showDeleteModal = $state(false);
-	let showEnhancedDeleteModal = $state(false);
-	let selectedAccount: YakklAccount | null = $state(null);
-	let wallet: Wallet | null = $state(null);
-	let accountData: AccountData[] = $state([]);
-	let visibleAccounts: YakklAccount[] = $state([]);
-	let restrictedAccounts: YakklAccount[] = $state([]);
-	let isRestricted = $state(false);
-	let loadDataTimeout: number | null = null;
-	let isLoadingData = $state(false);
-	let isInitialized = $state(false);
-	let initializationTimeout: number | null = null;
-	let lastProcessedAccountsHash = $state('');
-
-	// Function to handle progressive account data updates
-	function handleAccountDataUpdate(data: AccountData[]): void {
-		accountData = data;
-	}
-
-	// Function to retry balance loading for a specific account
-	function retryBalance(accountAddress: string): void {
-		if (!wallet) return;
-
-		const accountIndex = accountData.findIndex((data) => data.account.address === accountAddress);
-		if (accountIndex === -1) return;
-
-		// Clear any cached data for this address to force fresh fetch
-		balanceCacheManager.clearCachedBalance(accountAddress);
-
-		// Reload all account data
-		loadAccountData();
-	}
-
-	// Debounced function to load account data with progressive loading
-	function loadAccountDataDebounced(): void {
-		// Clear any pending timeout
-		if (loadDataTimeout) {
-			clearTimeout(loadDataTimeout);
-		}
-
-		// Skip if already loading or no data to load
-		if (isLoadingData || !wallet || visibleAccounts.length === 0) {
-			if (!wallet || visibleAccounts.length === 0) {
-				accountData = [];
-			}
-			return;
-		}
-
-		// Debounce API calls by 300ms to prevent rapid successive calls
-		loadDataTimeout = setTimeout(() => {
-			loadAccountData();
-		}, 300) as unknown as number;
-	}
-
-	// Function to load account data with progressive loading
-	function loadAccountData(): void {
-		if (!wallet || visibleAccounts.length === 0) {
-			accountData = [];
-			return;
-		}
-
-		// Prevent multiple simultaneous loads
-		if (isLoadingData) {
-			log.debug('[AccountListing] Already loading data, skipping');
-			return;
-		}
-
-		isLoadingData = true;
-
-		log.info('[AccountListing] Starting progressive balance loading for accounts:', false, {
-			accountCount: visibleAccounts.length,
-			addresses: visibleAccounts.map((a) => a.address)
-		});
-
-		// Get initial data with cached balances
-		try {
-			accountData = collectAccountDataProgressive(visibleAccounts, wallet, (data) => {
-				handleAccountDataUpdate(data);
-				isLoadingData = false; // Reset loading flag when complete
-			});
-		} catch (error) {
-			log.error('[AccountListing] Error loading account data:', false, error);
-			isLoadingData = false;
-		}
-	}
-
-	// Effect to handle accounts and membership restrictions
-	$effect(() => {
-		// Prevent processing the same accounts multiple times by using a hash
-		if (accounts.length > 0 && $yakklSettingsStore) {
-			const currentAccountsHash = accounts.map(a => a.address).join(',');
-			
-			if (currentAccountsHash !== lastProcessedAccountsHash) {
-				lastProcessedAccountsHash = currentAccountsHash;
-				
-				const membershipLevel = $yakklSettingsStore.plan?.type || 'basic_member';
-				const restrictions = createAccountDataWithRestrictions(accounts, membershipLevel, 3);
-
-				visibleAccounts = restrictions.visibleAccounts;
-				restrictedAccounts = restrictions.restrictedAccounts;
-				isRestricted = restrictions.isRestricted;
-
-				log.info('[AccountListing] Account restrictions applied:', false, {
-					membershipLevel,
-					totalAccounts: accounts.length,
-					visibleAccounts: visibleAccounts.length,
-					restrictedAccounts: restrictedAccounts.length,
-					isRestricted
-				});
-			}
-		}
-	});
-
-	// Effect to handle pricing changes and reload data
-	$effect(() => {
-		if (!isInitialized || !wallet || !$yakklPricingStore || visibleAccounts.length === 0) {
-			return;
-		}
-		
-		// Only reload if price changed significantly (increased threshold to reduce API calls)
-		const priceChange = Math.abs(
-			($yakklPricingStore.price - $yakklPricingStore.prevPrice) / $yakklPricingStore.prevPrice
-		);
-		if (priceChange > 0.05) {
-			// 5% price change threshold (increased from 1% to reduce API calls)
-			log.info('[AccountListing] Major price change detected, reloading account data');
-			loadAccountDataDebounced();
-		}
-	});
-
-	// Effect to load data when visible accounts or wallet changes
-	$effect(() => {
-		if (!isInitialized || !wallet || visibleAccounts.length === 0) {
-			return;
-		}
-		
-		loadAccountDataDebounced();
-	});
-
-	onMount(() => {
-		if (!accounts.length) {
-			accounts = $yakklAccountsStore;
-		}
-		wallet = WalletManager.getInstance(
-			['Alchemy'],
-			['Ethereum'],
-			$yakklCurrentlySelectedStore!.shortcuts.chainId ?? 1,
-			import.meta.env.VITE_ALCHEMY_API_KEY_PROD
-		);
-
-		// Preload cache for better initial experience
-		const addresses = accounts.map((a) => a.address);
-		const preloaded = balanceCacheManager.preloadBalances(addresses);
-		log.info(`[AccountListing] Preloaded ${preloaded.size} balances from cache`);
-
-		// Initialize reactive effects after a delay to prevent loops during load
-		initializationTimeout = setTimeout(() => {
-			isInitialized = true;
-			log.debug('[AccountListing] Reactive effects initialized');
-		}, 500) as unknown as number;
-	});
-
-	onDestroy(() => {
-		// Clean up any pending timeouts to prevent memory leaks
-		if (loadDataTimeout) {
-			clearTimeout(loadDataTimeout);
-			loadDataTimeout = null;
-		}
-		if (initializationTimeout) {
-			clearTimeout(initializationTimeout);
-			initializationTimeout = null;
-		}
-	});
-
-	function handleEdit(account: YakklAccount) {
-		selectedAccount = account;
-		editMode = true;
-	}
-
-	function handleDelete(account: YakklAccount) {
-		selectedAccount = account;
-		showEnhancedDeleteModal = true;
-	}
-
-	async function confirmDelete() {
-		if (selectedAccount) {
-			// The enhanced modal already shows balances, so we can proceed with deletion
-			// Note: In a production app, you might want to re-check balances here as a safety measure
-
-			if (selectedAccount.accountType === AccountTypeCategory.PRIMARY) {
-				let subAccounts = accounts.filter(
-					(a) => a.primaryAccount?.address === selectedAccount!.address
-				);
-				subAccounts.forEach((subAccount) => {
-					const index = accounts.findIndex((a) => a.address === subAccount.address);
-					if (index !== -1) {
-						accounts.splice(index, 1);
-					}
-				});
-			}
-			accounts = accounts.filter((a) => a.address !== selectedAccount!.address);
-			setYakklAccountsStorage(accounts);
-			$yakklAccountsStore = accounts;
-
-			if (selectedAccount.accountType === AccountTypeCategory.PRIMARY) {
-				let primaryAccounts = $yakklPrimaryAccountsStore.filter(
-					(a) => a.address !== selectedAccount!.address
-				);
-				setYakklPrimaryAccountsStorage(primaryAccounts);
-				selectedAccount = null;
-			} else {
-				if (selectedAccount.address === $yakklCurrentlySelectedStore!.shortcuts.address) {
-					selectedAccount = selectedAccount!.primaryAccount?.account as YakklAccount;
-					onAccountSelect(selectedAccount); // This will update the currently selected account to the primary account if the sub-account is deleted and it's the currently selected account too.
-				}
-			}
-			showEnhancedDeleteModal = false;
-		}
-	}
-
-	// Helper function to determine if an error should be shown to the user
-	function shouldShowErrorToUser(error: any): boolean {
-		const errorMessage = error?.message || error?.toString() || '';
-
-		// Network/API errors that should be handled silently
-		const networkErrors = [
-			'missing response',
-			'timeout',
-			'TIMEOUT',
-			'SERVER_ERROR',
-			'NETWORK_ERROR',
-			'Failed to fetch',
-			'fetch',
-			'Connection failed',
-			'Request timeout',
-			'eth_getBalance',
-			'call revert exception',
-			'alchemy.com',
-			'infura.io',
-			'requestBody',
-			'serverError',
-			'code=SERVER_ERROR',
-			'version=web/',
-			'JsonRpcError',
-			'RPC Error',
-			'getBalance',
-			'Balance fetch'
-		];
-
-		return !networkErrors.some((pattern) =>
-			errorMessage.toLowerCase().includes(pattern.toLowerCase())
-		);
-	}
-
-	async function checkBalances(account: YakklAccount) {
-		let balance = 0n;
-		if (account.accountType === AccountTypeCategory.PRIMARY) {
-			let subAccounts = accounts.filter((a) => a.primaryAccount?.address === account.address);
-			subAccounts.forEach(async (subAccount) => {
-				try {
-					balance = await wallet.getBalance(subAccount.address);
-					if (balance > 0n) {
-						alert(
-							`Sub-account ${subAccount.name} has a balance of ${balance}. Please transfer the balance to another account before deleting!`
-						);
-						return true;
-					}
-				} catch (error) {
-					if (shouldShowErrorToUser(error)) {
-						console.error('[AccountListing] Balance check error for sub-account:', error);
-					}
-					// Skip balance check for network errors
-				}
-			});
-		} else {
-			try {
-				balance = await wallet.getBalance(account.address);
-				if (balance > 0n) {
-					alert(
-						`Account ${account.name} has a balance of ${balance}. Please transfer the balance to another account before deleting!`
-					);
-					return true;
-				}
-			} catch (error) {
-				if (shouldShowErrorToUser(error)) {
-					console.error('[AccountListing] Balance check error:', error);
-				}
-				// Skip balance check for network errors
-			}
-		}
-		return false;
-	}
-
-	function updateAccount(updatedAccount: YakklAccount) {
-		const index = accounts.findIndex((a) => a.address === updatedAccount.address);
-		if (index !== -1) {
-			accounts[index] = { ...updatedAccount, updateDate: dateString() };
-			if (updatedAccount.accountType === AccountTypeCategory.PRIMARY) {
-				updatePrimaryAndSubAccounts(updatedAccount);
-			}
-			setYakklAccountsStorage(accounts);
-			$yakklAccountsStore = accounts;
-			selectedAccount = updatedAccount;
-		}
-		editMode = false;
-	}
-
-	function updatePrimaryAndSubAccounts(updatedPrimaryAccount: YakklAccount) {
-		let primaryAccount = $yakklPrimaryAccountsStore.find(
-			(a) => a.address === updatedPrimaryAccount.address
-		);
-		if (primaryAccount) {
-			primaryAccount.name = updatedPrimaryAccount.name;
-			primaryAccount.updateDate = dateString();
-			setYakklPrimaryAccountsStorage($yakklPrimaryAccountsStore);
-		}
-		let subAccounts = accounts.filter(
-			(a) => a.primaryAccount?.address === updatedPrimaryAccount.address
-		);
-		subAccounts.forEach((subAccount) => {
-			const index = accounts.findIndex((a) => a.address === subAccount.address);
-			if (index !== -1) {
-				accounts[index].primaryAccount!.name = updatedPrimaryAccount.name;
-				accounts[index].primaryAccount!.updateDate = dateString();
-			}
-		});
-	}
-
-	function handleCopy(account: YakklAccount) {
-		navigator.clipboard.writeText(account.address);
-	}
-
-	// Function to load balance for enhanced delete modal - uses cached data first
-	async function loadBalanceForDelete(address: string): Promise<bigint> {
-		// First try to get cached balance
-		const cached = balanceCacheManager.getCachedBalance(address);
-		if (cached) {
-			log.info(`[AccountListing] Using cached balance for delete confirmation: ${address}`);
-			return cached.balance;
-		}
-
-		// Try to get from current accountData
-		const accountDataItem = accountData.find((data) => data.account.address === address);
-		if (accountDataItem && !accountDataItem.isLoading && !accountDataItem.loadingError) {
-			log.info(`[AccountListing] Using accountData balance for delete confirmation: ${address}`);
-			return accountDataItem.quantity;
-		}
-
-		// Fallback to fresh fetch only if no cached data available
-		if (!wallet) return 0n;
-		try {
-			const balance = await wallet.getBalance(address);
-			log.info(`[AccountListing] Fetched fresh balance for delete confirmation: ${address}`);
-			return balance;
-		} catch (error) {
-			// Only log non-network errors, suppress network timeouts
-			if (shouldShowErrorToUser(error)) {
-				log.warn(
-					`[AccountListing] Failed to load balance for delete confirmation: ${address}`,
-					false,
-					error
-				);
-			}
-			return 0n;
-		}
-	}
-</script>
-
-<ul class="overflow-hidden">
-	{#each accountData as data}
-		<li class="mb-3 relative overflow-hidden">
-			<button
-				class="w-full flex items-start rounded-lg p-3 transition-colors duration-200 overflow-hidden {data
-					.account.accountType === AccountTypeCategory.PRIMARY
-					? 'bg-purple-50 hover:bg-purple-100 border border-purple-200'
-					: data.account.accountType === AccountTypeCategory.SUB
-						? 'bg-blue-50 hover:bg-blue-100 border border-blue-200'
-						: 'bg-green-50 hover:bg-green-100 border border-green-200'}"
-				onclick={() => onAccountSelect(data.account)}
-			>
-				<div
-					class="w-6 h-6 flex items-center justify-center rounded-full {data.account.accountType ===
-					AccountTypeCategory.PRIMARY
-						? 'bg-purple-500'
-						: data.account.accountType === AccountTypeCategory.SUB
-							? 'bg-blue-500'
-							: 'bg-green-500'} text-white mr-3 shrink-0"
-				>
-					<svg
-						xmlns="http://www.w3.org/2000/svg"
-						class="w-3 h-3"
-						viewBox="0 0 20 20"
-						fill="currentColor"
-					>
-						<path
-							fill-rule="evenodd"
-							d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
-							clip-rule="evenodd"
-						/>
-					</svg>
-				</div>
-				<div class="flex-1 min-w-0 overflow-hidden">
-					<div class="flex items-center justify-between mb-1">
-						<div class="flex items-center space-x-2">
-							<h3 class="text-sm font-semibold text-gray-800">
-								{data.account.accountType === AccountTypeCategory.PRIMARY
-									? 'PORTFOLIO'
-									: data.account.accountType === AccountTypeCategory.SUB
-										? 'SUB-PORTFOLIO'
-										: 'IMPORTED'}
-							</h3>
-							<!-- Sub-account indicator for primary accounts -->
-							{#if data.account.accountType === AccountTypeCategory.PRIMARY}
-								<SubAccountIndicator
-									primaryAccount={data.account}
-									allAccounts={accounts}
-									className="ml-1"
-								/>
-							{/if}
-						</div>
-					</div>
-					<p class="text-sm font-medium text-gray-700 truncate mb-1" title={data.account.name}>
-						{data.account.name}
-					</p>
-					{#if data.account.accountType === AccountTypeCategory.SUB}
-						<span
-							class="text-xs text-gray-500 mb-1 block truncate"
-							title="Derived from {data.account.primaryAccount?.name}"
-							>Derived from {data.account.primaryAccount?.name}</span
-						>
-					{/if}
-					<p class="text-xs text-gray-500 font-mono truncate mb-2" title={data.account.address}>
-						{data.account.address}
-					</p>
-
-					<!-- Enhanced balance indicator with loading states -->
-					<BalanceIndicator
-						isLoading={data.isLoading}
-						loadingError={data.loadingError}
-						isCached={data.isCached}
-						isStale={data.isStale}
-						lastUpdated={data.lastUpdated}
-						quantityFormatted={data.quantityFormatted}
-						totalValueFormatted={data.totalValueFormatted}
-						onRetry={() => retryBalance(data.account.address)}
-					/>
-				</div>
-			</button>
-			<EditControls
-				onEdit={() => handleEdit(data.account)}
-				onDelete={() => handleDelete(data.account)}
-				onCopy={() => handleCopy(data.account)}
-				controls={['copy', 'edit', 'delete']}
-				hasBalance={data.quantity > 0n}
-			/>
-		</li>
-	{/each}
-</ul>
-
-<!-- Show restricted accounts for basic members -->
-{#if isRestricted}
-	<RestrictedAccountDisplay accounts={restrictedAccounts} {onUpgrade} />
-{/if}
-
-<AccountForm bind:show={editMode} account={selectedAccount} onSubmit={updateAccount} />
-
-<EnhancedDeleteConfirmation
-	bind:show={showEnhancedDeleteModal}
-	account={selectedAccount}
-	allAccounts={accounts}
-	onConfirm={confirmDelete}
-	onCancel={() => (showEnhancedDeleteModal = false)}
-	onLoadBalance={loadBalanceForDelete}
-/>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/Accounts.svelte b/packages/yakkl-wallet/src/lib/components/v1/Accounts.svelte
deleted file mode 100644
index 4d459d7..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/Accounts.svelte
+++ /dev/null
@@ -1,143 +0,0 @@
-<!-- Accounts2.svelte -->
-<script lang="ts">
-	import {
-		yakklAccountsStore,
-		yakklCurrentlySelectedStore,
-		setYakklCurrentlySelectedStorage
-	} from '$lib/common/stores';
-	import { YAKKL_ZERO_ADDRESS } from '$lib/common/constants';
-	import type { YakklAccount } from '$lib/common';
-	import Modal from './Modal.svelte';
-	import AccountListing from './AccountListing.svelte';
-	import { openModal } from '$lib/common/stores/modal';
-	import { log } from '$lib/managers/Logger';
-	import { dateString } from '$lib/common/datetime';
-
-	interface Props {
-		account?: YakklAccount | null;
-		show?: boolean;
-		onAccountSelect?: ((account: YakklAccount) => void) | null;
-		onClose?: (() => void) | null;
-		className?: string;
-	}
-
-	let {
-		account = $bindable(null),
-		show = $bindable(false),
-		onAccountSelect = null,
-		onClose = null,
-		className = 'z-[999]'
-	}: Props = $props();
-
-	// Not using onCancel here but letting it fall through to the Modal component since we don't need to do anything special
-	// export let onCancel: () => void = () => {show = false};
-
-	async function handleAccountSelect(selectedAccount: YakklAccount) {
-		try {
-			log.info('[Accounts] Account selected:', false, {
-				name: selectedAccount.name,
-				address: selectedAccount.address,
-				type: selectedAccount.accountType,
-				currentShowState: show
-			});
-
-			// Update local binding if provided
-			if (account !== null) {
-				account = selectedAccount;
-			}
-
-			// Call parent callback if provided
-			if (onAccountSelect !== null) {
-				onAccountSelect(selectedAccount);
-			}
-
-			// Most importantly: update the global currently selected store
-			const currentlySelected = $yakklCurrentlySelectedStore;
-			if (currentlySelected) {
-				// Update the shortcuts with the new account information
-				const updatedCurrentlySelected = {
-					...currentlySelected,
-					shortcuts: {
-						...currentlySelected.shortcuts,
-						address: selectedAccount.address,
-						accountName: selectedAccount.name,
-						accountType: selectedAccount.accountType,
-						alias: selectedAccount.alias,
-						// Reset quantity to trigger balance refresh
-						quantity: 0n,
-						// Update primary account reference if it's a sub-account
-						primary: selectedAccount.accountType === 'sub' ? selectedAccount.primaryAccount : null
-					},
-					updateDate: dateString()
-				};
-
-				// Save to storage and update store
-				await setYakklCurrentlySelectedStorage(updatedCurrentlySelected);
-
-				log.info('[Accounts] Successfully updated currently selected account, closing modal');
-			} else {
-				log.warn('[Accounts] No currently selected store found, cannot update account');
-			}
-
-			// Force close the modal using both methods
-			show = false;
-			if (onClose) {
-				onClose();
-			}
-			log.info('[Accounts] Modal show state set to false:', false, { show });
-		} catch (error) {
-			log.error('[Accounts] Failed to update selected account:', false, error);
-			show = false;
-			if (onClose) {
-				onClose();
-			}
-		}
-	}
-
-	// Handle upgrade flow
-	function handleUpgrade() {
-		// Close this modal and trigger upgrade flow
-		show = false;
-		// Open the upgrade modal using the same system as PlanBadge
-		openModal('upgrade');
-	}
-
-	// Close the modal without calling onCancel
-	function closeModal() {
-		show = false;
-		if (onClose) {
-			onClose();
-		}
-	}
-</script>
-
-<div class="relative {className}">
-	<Modal
-		bind:show
-		title="Account List"
-		description="Select the account you wish to make current"
-		onClose={closeModal}
-		onCancel={closeModal}
-	>
-		<div class="border-t border-b border-gray-500 py-4">
-			<AccountListing
-				accounts={$yakklAccountsStore}
-				onAccountSelect={handleAccountSelect}
-				onUpgrade={handleUpgrade}
-			/>
-
-			{#if $yakklCurrentlySelectedStore && $yakklCurrentlySelectedStore.shortcuts.address === YAKKL_ZERO_ADDRESS}
-				<p class="text-lg font-bold text-red-500">
-					There are no Portfolio Accounts to display! Create at least one Portfolio account!
-				</p>
-			{/if}
-		</div>
-
-		{#snippet footer()}
-			<p class="text-sm text-gray-500">
-				Whatever account you select will become your <span class="font-bold underline">active</span>
-				account!
-			</p>
-		{/snippet}
-	</Modal>
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/ActionBar.svelte b/packages/yakkl-wallet/src/lib/components/v1/ActionBar.svelte
deleted file mode 100644
index a5cdcff..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/ActionBar.svelte
+++ /dev/null
@@ -1,157 +0,0 @@
-<script lang="ts">
-	import { goto } from '$app/navigation';
-	import {
-		PATH_CRYPTO,
-		PATH_ETHEREUM_TRANSACTIONS_SEND,
-		PATH_ETHEREUM_TRANSACTIONS_STAKE,
-		PATH_ETHEREUM_TRANSACTIONS_SWAP
-	} from '$lib/common/constants';
-
-	interface Props {
-		id?: string;
-	}
-
-	let { id = 'actionbar' }: Props = $props();
-</script>
-
-<nav
-	{id}
-	class="print:hidden visible relative inset-x-0 top-0 navbar navbar-expand-sm py-0 flex items-center w-full justify-center"
->
-	<!-- Imcrease grid-col size when deposit is enabled -->
-	<div class="grid grid-cols-4 gap-10 my-0.5 mx-2 items-center justify-center">
-		<!-- Send -->
-		<div class="rounded-full shadow-lg h-[60px]">
-			<!-- svelte-ignore a11y_click_events_have_key_events -->
-			<!-- svelte-ignore a11y_interactive_supports_focus -->
-			<div
-				role="button"
-				onclick={() => goto(PATH_ETHEREUM_TRANSACTIONS_SEND)}
-				class="w-[60px] h-[60px] flex flex-col items-center justify-center px-4 py-2 border border-transparent text-base font-medium rounded-full text-white bg-indigo-600 hover:bg-indigo-700"
-			>
-				<svg
-					xmlns="http://www.w3.org/2000/svg"
-					fill="none"
-					viewBox="0 0 24 24"
-					stroke-width="1.5"
-					stroke="currentColor"
-					class="absolute w-4 h-4 -mt-5 font-bold"
-				>
-					<path
-						stroke-linecap="round"
-						stroke-linejoin="round"
-						d="M4.5 19.5l15-15m0 0H8.25m11.25 0v11.25"
-					/>
-				</svg>
-				<span class="text-sm mt-3 font-bold">Send</span>
-			</div>
-		</div>
-
-		<!-- Receive -->
-		<div class="rounded-full shadow-lg h-[60px]">
-			<!-- svelte-ignore a11y_click_events_have_key_events -->
-			<!-- svelte-ignore a11y_interactive_supports_focus -->
-			<div
-				role="button"
-				onclick={() => goto(PATH_CRYPTO)}
-				class="w-[60px] h-[60px] flex flex-col items-center justify-center px-4 py-2 border border-transparent text-base font-medium rounded-full text-white bg-indigo-600 hover:bg-indigo-700"
-			>
-				<svg
-					xmlns="http://www.w3.org/2000/svg"
-					fill="none"
-					viewBox="0 0 24 24"
-					stroke-width="1.5"
-					stroke="currentColor"
-					class="absolute w-4 h-4 -mt-5 font-bold"
-				>
-					<!-- <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 4.5l-15 15m0 0h11.25m-11.25 0V8.25" /> -->
-					<path
-						fill-rule="evenodd"
-						d="M3 4.875C3 3.839 3.84 3 4.875 3h4.5c1.036 0 1.875.84 1.875 1.875v4.5c0 1.036-.84 1.875-1.875 1.875h-4.5A1.875 1.875 0 013 9.375v-4.5zM4.875 4.5a.375.375 0 00-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 00.375-.375v-4.5a.375.375 0 00-.375-.375h-4.5zm7.875.375c0-1.036.84-1.875 1.875-1.875h4.5C20.16 3 21 3.84 21 4.875v4.5c0 1.036-.84 1.875-1.875 1.875h-4.5a1.875 1.875 0 01-1.875-1.875v-4.5zm1.875-.375a.375.375 0 00-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 00.375-.375v-4.5a.375.375 0 00-.375-.375h-4.5zM6 6.75A.75.75 0 016.75 6h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75A.75.75 0 016 7.5v-.75zm9.75 0A.75.75 0 0116.5 6h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75zM3 14.625c0-1.036.84-1.875 1.875-1.875h4.5c1.036 0 1.875.84 1.875 1.875v4.5c0 1.035-.84 1.875-1.875 1.875h-4.5A1.875 1.875 0 013 19.125v-4.5zm1.875-.375a.375.375 0 00-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 00.375-.375v-4.5a.375.375 0 00-.375-.375h-4.5zm7.875-.75a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75zm6 0a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75zM6 16.5a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75zm9.75 0a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75zm-3 3a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75zm6 0a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75z"
-						clip-rule="evenodd"
-					/>
-				</svg>
-				<span class="text-sm mt-3 font-bold">Receive</span>
-			</div>
-		</div>
-
-		<!-- Stake -->
-		<div class="rounded-full shadow-lg h-[60px]">
-			<!-- svelte-ignore a11y_click_events_have_key_events -->
-			<!-- svelte-ignore a11y_interactive_supports_focus -->
-			<div
-				role="button"
-				onclick={() => goto(PATH_ETHEREUM_TRANSACTIONS_STAKE)}
-				class="w-[60px] h-[60px] flex flex-col items-center justify-center px-4 py-2 border border-transparent text-base font-medium rounded-full text-white bg-indigo-600 hover:bg-indigo-700"
-			>
-				<svg
-					xmlns="http://www.w3.org/2000/svg"
-					fill="none"
-					viewBox="0 0 24 24"
-					stroke-width="1.5"
-					stroke="currentColor"
-					class="absolute w-4 h-4 -mt-5 font-bold"
-				>
-					<!-- <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 00-3.7-3.7 48.678 48.678 0 00-7.324 0 4.006 4.006 0 00-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3l-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 003.7 3.7 48.656 48.656 0 007.324 0 4.006 4.006 0 003.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3l-3 3" /> -->
-					<path
-						fill-rule="evenodd"
-						d="M15.75 2.25H21a.75.75 0 01.75.75v5.25a.75.75 0 01-1.5 0V4.81L8.03 17.03a.75.75 0 01-1.06-1.06L19.19 3.75h-3.44a.75.75 0 010-1.5zm-10.5 4.5a1.5 1.5 0 00-1.5 1.5v10.5a1.5 1.5 0 001.5 1.5h10.5a1.5 1.5 0 001.5-1.5V10.5a.75.75 0 011.5 0v8.25a3 3 0 01-3 3H5.25a3 3 0 01-3-3V8.25a3 3 0 013-3h8.25a.75.75 0 010 1.5H5.25z"
-						clip-rule="evenodd"
-					/>
-				</svg>
-				<span class="text-sm mt-3 font-bold">Stake</span>
-			</div>
-		</div>
-
-		<!-- Swap -->
-		<div class="rounded-full shadow-lg h-[60px]">
-			<!-- svelte-ignore a11y_click_events_have_key_events -->
-			<!-- svelte-ignore a11y_interactive_supports_focus -->
-			<div
-				role="button"
-				onclick={() => goto(PATH_ETHEREUM_TRANSACTIONS_SWAP)}
-				class="w-[60px] h-[60px] flex flex-col items-center justify-center px-4 py-2 border border-transparent text-base font-medium rounded-full text-white bg-indigo-600 hover:bg-indigo-700"
-			>
-				<svg
-					xmlns="http://www.w3.org/2000/svg"
-					fill="none"
-					viewBox="0 0 24 24"
-					stroke-width="1.5"
-					stroke="currentColor"
-					class="absolute w-4 h-4 -mt-5 font-bold"
-				>
-					<path
-						stroke-linecap="round"
-						stroke-linejoin="round"
-						d="M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 00-3.7-3.7 48.678 48.678 0 00-7.324 0 4.006 4.006 0 00-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3l-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 003.7 3.7 48.656 48.656 0 007.324 0 4.006 4.006 0 003.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3l-3 3"
-					/>
-				</svg>
-				<span class="text-sm mt-3 font-bold">Swap</span>
-			</div>
-		</div>
-
-		<!-- Buy -->
-		<!-- <div class="rounded-full shadow h-[60px]"> -->
-		<!-- svelte-ignore a11y_click_events_have_key_events -->
-		<!-- <div role="button" on:click={() => goto(PATH_ETHEREUM_TRANSACTIONS_BUY)}
-        class="w-[60px] h-[60px] flex flex-col items-center justify-center px-4 py-2 border border-transparent text-base font-medium rounded-full text-white bg-indigo-600 hover:bg-indigo-700">
-        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="absolute w-4 h-4 -mt-5 font-bold">
-          <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 6L9 12.75l4.286-4.286a11.948 11.948 0 014.306 6.43l.776 2.898m0 0l3.182-5.511m-3.182 5.51l-5.511-3.181" />
-        </svg>
-        <span class="text-sm mt-3 font-bold">Buy</span>
-      </div>
-    </div> -->
-
-		<!-- Sell -->
-		<!-- <div class="rounded-full shadow h-[60px]"> -->
-		<!-- svelte-ignore a11y_click_events_have_key_events -->
-		<!-- <div role="button" on:click={() => goto(PATH_ETHEREUM_TRANSACTIONS_SELL)}
-        class="w-[60px] h-[60px] flex flex-col items-center justify-center px-4 py-2 border border-transparent text-base font-medium rounded-full text-white bg-indigo-600 hover:bg-indigo-700">
-        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="absolute w-4 h-4 -mt-5 font-bold">
-          <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 18L9 11.25l4.306 4.307a11.95 11.95 0 015.814-5.519l2.74-1.22m0 0l-5.94-2.28m5.94 2.28l-2.28 5.941" />
-      </svg>
-      <span class="text-sm mt-3 font-bold">Sell</span>
-      </div>
-    </div> -->
-	</div>
-</nav>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/Activity.note.md b/packages/yakkl-wallet/src/lib/components/v1/Activity.note.md
deleted file mode 100644
index b97dc6c..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/Activity.note.md
+++ /dev/null
@@ -1,7 +0,0 @@
-# Activity Tracking
-
-## Activity.svelte
-
-> Generic / abstract view component to allow the user to view all of their activities with the ability to print, export and with encryption.
-
-Modal at the moment but could open the html window next to the sidepanel to act as the viewport allowing the wallet to drive the output
diff --git a/packages/yakkl-wallet/src/lib/components/v1/Ad.svelte b/packages/yakkl-wallet/src/lib/components/v1/Ad.svelte
deleted file mode 100644
index d87b1ae..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/Ad.svelte
+++ /dev/null
@@ -1,20 +0,0 @@
-<script lang="ts">
-	let {
-		useGoogleAd = false,
-		customContent,
-		onCallToAction = null
-	} = $props<{
-		useGoogleAd?: boolean;
-		customContent?: () => string;
-		onCallToAction?: ((index: number) => void) | null;
-	}>();
-</script>
-
-<div class="bg-primary text-primary-content p-2">
-	{#if useGoogleAd}
-		<!-- Google AdSense placeholder -->
-		<div class="h-[100px] flex items-center justify-center">Ad Space</div>
-	{:else if customContent}
-		{@html customContent()}
-	{/if}
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/AnimateButton.svelte b/packages/yakkl-wallet/src/lib/components/v1/AnimateButton.svelte
deleted file mode 100644
index 836acd6..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/AnimateButton.svelte
+++ /dev/null
@@ -1,36 +0,0 @@
-<script lang="ts">
-	import { onMount } from 'svelte';
-	import { UnifiedTimerManager } from '$lib/managers/UnifiedTimerManager';
-
-	const {
-		className = '',
-		onClick = () => {},
-		children
-	} = $props<{
-		className?: string;
-		onClick?: () => void;
-		children?: any;
-	}>();
-
-	let animate = $state(false);
-	const timerManager = UnifiedTimerManager.getInstance();
-
-	onMount(() => {
-		animate = true;
-		timerManager.addTimeout(
-			'animate-button',
-			() => {
-				animate = false;
-			},
-			1000
-		);
-		timerManager.startTimeout('animate-button');
-	});
-</script>
-
-<button
-	class={`transition-transform ${animate ? 'animate-shake' : ''} flex items-center gap-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white px-4 py-2 rounded-xl shadow-md hover:from-green-600 hover:to-emerald-700 transition-all ${className}`}
-	onclick={onClick}
->
-	{@render children?.()}
-</button>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/ArticleControls.svelte b/packages/yakkl-wallet/src/lib/components/v1/ArticleControls.svelte
deleted file mode 100644
index b6014c8..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/ArticleControls.svelte
+++ /dev/null
@@ -1,587 +0,0 @@
-<!-- ArticleControls.svelte -->
-<script lang="ts">
-	import BookmarkIcon from './icons/BookmarkIcon.svelte';
-	import PrinterIcon from './icons/PrinterIcon.svelte';
-	import TrashIcon from './icons/TrashIcon.svelte';
-	import Confirmation from './Confirmation.svelte';
-	import { fade } from 'svelte/transition';
-	import type { RSSItem } from '$lib/managers/ExtensionRSSFeedService';
-	import Tooltip from './Tooltip.svelte';
-	import { yakklBookmarkedArticlesStore, setYakklBookmarkedArticles } from '$lib/common/stores';
-	import { derived } from 'svelte/store';
-	import { log } from '$lib/managers/Logger';
-
-	let {
-		article,
-		bookmarkEnabled = true,
-		printEnabled = true,
-		deleteEnabled = false,
-		onDelete
-	} = $props<{
-		article: RSSItem;
-		bookmarkEnabled?: boolean;
-		printEnabled?: boolean;
-		deleteEnabled?: boolean;
-		onDelete?: (article: RSSItem) => Promise<void>;
-	}>();
-
-	$inspect(article).with(console.log);
-
-	let showDeleteConfirmation = $state(false);
-
-	// Create a derived store for bookmark state
-	const isBookmarked = derived(yakklBookmarkedArticlesStore, ($store) =>
-		$store.some((a) => a.title === article.title && a.source === article.source)
-	);
-
-	// Function to sanitize content
-	function sanitizeContent(content: string): string {
-		const parser = new DOMParser();
-		const doc = parser.parseFromString(content, 'text/html');
-
-		// Remove potentially problematic elements
-		const elementsToRemove = [
-			'script',
-			'iframe',
-			'style',
-			'link',
-			'meta',
-			'object',
-			'embed',
-			'applet',
-			'noscript',
-			'form',
-			'input',
-			'button',
-			'select',
-			'textarea',
-			'[onclick]',
-			'[onload]',
-			'[onerror]',
-			'[src*="platform.twitter.com"]',
-			'[src*="facebook.com"]',
-			'[src*="instagram.com"]',
-			'[src*="youtube.com"]',
-			'[src*="vimeo.com"]',
-			'[src*="player"]',
-			'[src*="widget"]',
-			'[src*="embed"]',
-			'[src*="script"]',
-			'[src*="tracker"]',
-			'[src*="analytics"]',
-			'[src*="pixel"]',
-			'[src*="beacon"]',
-			'[src*="cookie"]',
-			'[src*="ad"]',
-			'[src*="banner"]',
-			'[src*="promo"]',
-			'[src*="sponsor"]',
-			'[src*="affiliate"]',
-			'[src*="tracking"]',
-			'[src*="pixel"]',
-			'[src*="beacon"]',
-			'[src*="cookie"]',
-			'[src*="analytics"]',
-			'[src*="tracker"]',
-			'[src*="monitor"]',
-			'[src*="stat"]',
-			'[src*="count"]',
-			'[src*="counter"]',
-			'[src*="measure"]',
-			'[src*="metric"]',
-			'[src*="track"]',
-			'[src*="trace"]',
-			'[src*="log"]',
-			'[src*="debug"]',
-			'[src*="test"]',
-			'[src*="dev"]',
-			'[src*="staging"]',
-			'[src*="qa"]',
-			'[src*="beta"]',
-			'[src*="alpha"]',
-			'[src*="demo"]',
-			'[src*="example"]',
-			'[src*="sample"]',
-			'[src*="mock"]',
-			'[src*="fake"]',
-			'[src*="dummy"]',
-			'[src*="placeholder"]',
-			'[src*="temp"]',
-			'[src*="temporary"]',
-			'[src*="test"]',
-			'[src*="dev"]',
-			'[src*="development"]',
-			'[src*="staging"]',
-			'[src*="qa"]',
-			'[src*="beta"]',
-			'[src*="alpha"]',
-			'[src*="demo"]',
-			'[src*="example"]',
-			'[src*="sample"]',
-			'[src*="mock"]',
-			'[src*="fake"]',
-			'[src*="dummy"]',
-			'[src*="placeholder"]',
-			'[src*="temp"]',
-			'[src*="temporary"]'
-		];
-
-		elementsToRemove.forEach((selector) => {
-			doc.querySelectorAll(selector).forEach((el) => el.remove());
-		});
-
-		// Remove inline styles and event handlers
-		doc.querySelectorAll('*').forEach((el) => {
-			el.removeAttribute('style');
-			el.removeAttribute('onclick');
-			el.removeAttribute('onload');
-			el.removeAttribute('onerror');
-			el.removeAttribute('onmouseover');
-			el.removeAttribute('onmouseout');
-			el.removeAttribute('onmouseenter');
-			el.removeAttribute('onmouseleave');
-			el.removeAttribute('onmousedown');
-			el.removeAttribute('onmouseup');
-			el.removeAttribute('onmousemove');
-			el.removeAttribute('onkeydown');
-			el.removeAttribute('onkeyup');
-			el.removeAttribute('onkeypress');
-			el.removeAttribute('onfocus');
-			el.removeAttribute('onblur');
-			el.removeAttribute('onchange');
-			el.removeAttribute('onsubmit');
-			el.removeAttribute('onreset');
-			el.removeAttribute('onselect');
-			el.removeAttribute('onabort');
-			el.removeAttribute('oncanplay');
-			el.removeAttribute('oncanplaythrough');
-			el.removeAttribute('ondurationchange');
-			el.removeAttribute('onemptied');
-			el.removeAttribute('onended');
-			el.removeAttribute('onerror');
-			el.removeAttribute('onloadeddata');
-			el.removeAttribute('onloadedmetadata');
-			el.removeAttribute('onloadstart');
-			el.removeAttribute('onpause');
-			el.removeAttribute('onplay');
-			el.removeAttribute('onplaying');
-			el.removeAttribute('onprogress');
-			el.removeAttribute('onratechange');
-			el.removeAttribute('onreadystatechange');
-			el.removeAttribute('onseeked');
-			el.removeAttribute('onseeking');
-			el.removeAttribute('onstalled');
-			el.removeAttribute('onsuspend');
-			el.removeAttribute('ontimeupdate');
-			el.removeAttribute('onvolumechange');
-			el.removeAttribute('onwaiting');
-		});
-
-		// Convert relative URLs to absolute
-		doc.querySelectorAll('a[href]').forEach((link) => {
-			try {
-				const href = link.getAttribute('href');
-				if (href && !href.startsWith('http')) {
-					const absoluteUrl = new URL(href, article.url).toString();
-					link.setAttribute('href', absoluteUrl);
-				}
-			} catch (e) {
-				console.error('Error converting URL:', e);
-			}
-		});
-
-		// Get the sanitized content
-		let sanitizedContent = doc.body.innerHTML;
-
-		// Clean up any remaining script-like content
-		sanitizedContent = sanitizedContent
-			.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi, '')
-			.replace(/javascript:/gi, '')
-			.replace(/data:/gi, '')
-			.replace(/vbscript:/gi, '')
-			.replace(/on\w+="[^"]*"/g, '')
-			.replace(/on\w+='[^']*'/g, '')
-			.replace(/style="[^"]*"/g, '')
-			.replace(/style='[^']*'/g, '');
-
-		return sanitizedContent;
-	}
-
-	// Function to handle bookmarking
-	async function handleBookmark() {
-		if (!bookmarkEnabled) return;
-
-		const bookmarkedArticles = $yakklBookmarkedArticlesStore;
-
-		if ($isBookmarked) {
-			// Remove from bookmarks
-			const updatedArticles = bookmarkedArticles.filter(
-				(a) => !(a.title === article.title && a.source === article.source)
-			);
-			await setYakklBookmarkedArticles(updatedArticles);
-		} else {
-			// Check for duplicates before adding
-			const isDuplicate = bookmarkedArticles.some(
-				(a) => a.title === article.title && a.source === article.source
-			);
-
-			if (!isDuplicate) {
-				// Add to bookmarks only if not a duplicate
-				const updatedArticles = [...bookmarkedArticles, article];
-				await setYakklBookmarkedArticles(updatedArticles);
-			}
-		}
-	}
-
-	// Function to handle deletion
-	async function handleDelete() {
-		if (!deleteEnabled) return;
-
-		if (onDelete) {
-			await onDelete(article);
-		} else {
-			await handleBookmark(); // Fallback to bookmark logic if no onDelete provided
-		}
-
-		showDeleteConfirmation = false;
-	}
-
-	// Prints out the full article in a new window
-	// Example usage:
-	// <button onclick="printFullArticle('https://news.example.com/article/123')">
-	//    Print Full Article
-	// </button>
-	function printFullArticle(articleUrl: string) {
-		const printWindow = window.open(articleUrl, '_blank');
-
-		printWindow.onload = () => {
-			printWindow.focus();
-			printWindow.print();
-		};
-	}
-
-	// Function to handle printing
-	function handlePrint(articleUrl: string = '') {
-		// if (articleUrl) {
-		//   console.log('Printing article from external source', articleUrl);
-		//   printFullArticle(articleUrl); // Optional external print
-		//   return;
-		// }
-
-		console.log('Printing article from internal source', articleUrl);
-		const sanitizedContent = sanitizeContent(
-			article.content || article.description || article.title
-		);
-		const html = generatePrintHtml(article, sanitizedContent);
-
-		const printWindow = window.open('', '_blank');
-		if (!printWindow) {
-			console.error('Failed to open print window');
-			return;
-		}
-
-		// Wait until the new window DOM is available
-		printWindow.document.open();
-		printWindow.document.write(html);
-		printWindow.document.close();
-
-		// Ensure content loads before printing
-		printWindow.onload = () => {
-			printWindow.focus();
-			printWindow.print();
-		};
-
-		// const doc = printWindow.document;
-		// doc.open();
-		// doc.write(`
-		//   <!DOCTYPE html>
-		//   <html>
-		//     <head>
-		//       <title>${article.title}</title>
-		//       <meta charset="utf-8">
-		//       <link rel="shortcut icon" href="https://yakkl.com/images/favicon.png" />
-		//       <style>
-		//         body {
-		//           font-family: Arial, sans-serif;
-		//           padding: 20px;
-		//           max-width: 800px;
-		//           margin: 0 auto;
-		//           color: #333;
-		//         }
-		//         .header {
-		//           margin-bottom: 20px;
-		//           border-bottom: 1px solid #eee;
-		//           padding-bottom: 20px;
-		//         }
-		//         .metadata {
-		//           color: #666;
-		//           font-size: 0.9em;
-		//           margin: 10px 0;
-		//         }
-		//         .metadata span {
-		//           margin-right: 15px;
-		//         }
-		//         .content {
-		//           line-height: 1.6;
-		//           font-size: 1.1em;
-		//           white-space: pre-wrap;
-		//           margin: 20px 0;
-		//         }
-		//         .content img {
-		//           max-width: 100%;
-		//           height: auto;
-		//           margin: 10px 0;
-		//         }
-		//         .content a {
-		//           color: #0066cc;
-		//           text-decoration: none;
-		//         }
-		//         .content a:hover {
-		//           text-decoration: underline;
-		//         }
-		//         .tags {
-		//           margin-top: 20px;
-		//           padding-top: 20px;
-		//           border-top: 1px solid #eee;
-		//         }
-		//         .tag {
-		//           display: inline-block;
-		//           background: #f0f0f0;
-		//           padding: 3px 8px;
-		//           border-radius: 3px;
-		//           margin-right: 5px;
-		//           font-size: 0.9em;
-		//         }
-		//         .source-link {
-		//           margin-top: 20px;
-		//           font-size: 0.9em;
-		//           color: #666;
-		//           border-top: 1px solid #eee;
-		//           padding-top: 20px;
-		//         }
-		//         @media print {
-		//           body { padding: 0; }
-		//           .header { border-bottom: 1px solid #000; }
-		//           .tags { border-top: 1px solid #000; }
-		//           .source-link { border-top: 1px solid #000; }
-		//         }
-		//       </style>
-		//     </head>
-		//     <body>
-		//       <div class="header">
-		//         <h1>${article.title}</h1>
-		//         <div class="metadata">
-		//           <span><strong>Source:</strong> ${article.source}</span>
-		//           ${article.author ? `<span><strong>Author:</strong> ${article.author}</span>` : ''}
-		//           <span><strong>Published:</strong> ${article.publishedAt || article.date}</span>
-		//         </div>
-		//       </div>
-		//       <div class="content">
-		//         ${sanitizedContent}
-		//       </div>
-		//       ${article.categories && article.categories.length > 0 ? `
-		//         <div class="tags">
-		//           Tags: ${article.categories.map((tag: string) => `<span class="tag">${tag}</span>`).join('')}
-		//         </div>
-		//       ` : ''}
-		//       <div class="source-link">
-		//         <p>Source: <a href="${article.url}" target="_blank">${article.url}</a></p>
-		//         <p>Printed on: ${new Date().toLocaleString()}</p>
-		//         <p>Printed by: <a href="https://yakkl.com/?utm_source=yakkl-wallet&utm_medium=print&utm_campaign=${encodeURIComponent(article.source)}&utm_content=${encodeURIComponent(article.title)}" target="_blank">YAKKL Smart Wallet</a></p>
-		//       </div>
-		//     </body>
-		//   </html>
-		// `);
-		// doc.close();
-
-		// Ensure the content is loaded before printing
-		// setTimeout(() => {
-		//   printWindow.focus();
-		//   printWindow.print();
-		// }, 500);
-	}
-
-	// Not for printing from extension context. Use in normal browser context window.
-	function printArticle(article: RSSItem, sanitizedContent: string) {
-		const iframe = document.createElement('iframe');
-		iframe.style.position = 'fixed';
-		iframe.style.right = '0';
-		iframe.style.bottom = '0';
-		iframe.style.width = '0';
-		iframe.style.height = '0';
-		iframe.style.border = 'none';
-
-		// Set the HTML via srcdoc
-		iframe.srcdoc = generatePrintHtml(article, sanitizedContent);
-
-		document.body.appendChild(iframe);
-
-		iframe.onload = () => {
-			iframe.contentWindow.focus();
-			iframe.contentWindow.print();
-			// Optionally remove the iframe afterward
-			setTimeout(() => iframe.remove(), 1000);
-		};
-	}
-
-	function generatePrintHtml(article: RSSItem, sanitizedContent: string) {
-		return `
-    <!DOCTYPE html>
-      <html>
-        <head>
-          <title>${article.title}</title>
-          <meta charset="utf-8">
-          <link rel="shortcut icon" href="https://yakkl.com/images/favicon.png" />
-          <style>
-            body {
-              font-family: Arial, sans-serif;
-              padding: 20px;
-              max-width: 800px;
-              margin: 0 auto;
-              color: #333;
-            }
-            .header {
-              margin-bottom: 20px;
-              border-bottom: 1px solid #eee;
-              padding-bottom: 20px;
-            }
-            .metadata {
-              color: #666;
-              font-size: 0.9em;
-              margin: 10px 0;
-            }
-            .metadata span {
-              margin-right: 15px;
-            }
-            .content {
-              line-height: 1.6;
-              font-size: 1.1em;
-              white-space: pre-wrap;
-              margin: 20px 0;
-            }
-            .content img {
-              max-width: 100%;
-              height: auto;
-              margin: 10px 0;
-            }
-            .content a {
-              color: #0066cc;
-              text-decoration: none;
-            }
-            .content a:hover {
-              text-decoration: underline;
-            }
-            .tags {
-              margin-top: 20px;
-              padding-top: 20px;
-              border-top: 1px solid #eee;
-            }
-            .tag {
-              display: inline-block;
-              background: #f0f0f0;
-              padding: 3px 8px;
-              border-radius: 3px;
-              margin-right: 5px;
-              font-size: 0.9em;
-            }
-            .source-link {
-              margin-top: 20px;
-              font-size: 0.9em;
-              color: #666;
-              border-top: 1px solid #eee;
-              padding-top: 20px;
-            }
-            @media print {
-              body { padding: 0; }
-              .header { border-bottom: 1px solid #000; }
-              .tags { border-top: 1px solid #000; }
-              .source-link { border-top: 1px solid #000; }
-            }
-          </style>
-        </head>
-        <body>
-          <div class="header">
-            <h1>${article.title}</h1>
-            <div class="metadata">
-              <span><strong>Source:</strong> ${article.source}</span>
-              ${article.author ? `<span><strong>Author:</strong> ${article.author}</span>` : ''}
-              <span><strong>Published:</strong> ${article.publishedAt || article.date}</span>
-            </div>
-          </div>
-          <div class="content">
-            ${sanitizedContent}
-          </div>
-          ${
-						article.categories && article.categories.length > 0
-							? `
-            <div class="tags">
-              Tags: ${article.categories.map((tag: string) => `<span class="tag">${tag}</span>`).join('')}
-            </div>
-          `
-							: ''
-					}
-          <div class="source-link">
-            <p>Source: <a href="${article.url}" target="_blank">${article.url}</a></p>
-            <p>Printed on: ${new Date().toLocaleString()}</p>
-            <p>Printed by: <a href="https://yakkl.com/?utm_source=yakkl-wallet&utm_medium=print&utm_campaign=${encodeURIComponent(article.source)}&utm_content=${encodeURIComponent(article.title)}" target="_blank">YAKKL Smart Wallet</a></p>
-          </div>
-        </body>
-      </html>
-    `;
-	}
-</script>
-
-<div
-	class="absolute top-1 right-1 flex items-center space-x-2 bg-white/90 dark:bg-zinc-800/90 backdrop-blur-sm rounded-full p-1 shadow-lg z-10 transition-all duration-200 opacity-0 group-hover:opacity-100"
->
-	<Tooltip content={$isBookmarked ? 'Unbookmark article' : 'Bookmark article'}>
-		<button
-			class="text-gray-400 hover:text-gray-500 focus:outline-none relative {bookmarkEnabled
-				? ''
-				: 'opacity-50 cursor-not-allowed'}"
-			disabled={!bookmarkEnabled}
-			onclick={handleBookmark}
-		>
-			<BookmarkIcon
-				className="w-5 h-5 {$isBookmarked
-					? 'fill-yellow-400'
-					: 'fill-none'} stroke-current text-gray-400"
-			/>
-		</button>
-	</Tooltip>
-	<Tooltip content="Print article">
-		<button
-			class="text-gray-400 hover:text-gray-500 focus:outline-none relative {printEnabled
-				? ''
-				: 'opacity-50 cursor-not-allowed'}"
-			disabled={!printEnabled}
-			onclick={() => handlePrint(article.url)}
-		>
-			<PrinterIcon className="w-5 h-5 text-gray-400" />
-		</button>
-	</Tooltip>
-
-	<Tooltip content="Delete">
-		<button
-			class="text-gray-400 hover:text-gray-500 focus:outline-none relative {deleteEnabled
-				? ''
-				: 'opacity-50 cursor-not-allowed'}"
-			disabled={!deleteEnabled}
-			onclick={() => (showDeleteConfirmation = true)}
-		>
-			<TrashIcon className="w-5 h-5 text-gray-400" />
-		</button>
-	</Tooltip>
-</div>
-
-{#if showDeleteConfirmation}
-	<Confirmation
-		show={showDeleteConfirmation}
-		title="Delete Article"
-		message="Are you sure you want to delete this article?"
-		onConfirm={handleDelete}
-		onCancel={() => {
-			showDeleteConfirmation = false;
-		}}
-	/>
-{/if}
diff --git a/packages/yakkl-wallet/src/lib/components/v1/AuthError.svelte b/packages/yakkl-wallet/src/lib/components/v1/AuthError.svelte
deleted file mode 100644
index f1a0f8b..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/AuthError.svelte
+++ /dev/null
@@ -1,91 +0,0 @@
-<!-- AuthError.svelte -->
-<script lang="ts">
-	interface Props {
-		error: string | Error | null;
-		onRetry?: () => void;
-		onDismiss?: () => void;
-		className?: string;
-		showIcon?: boolean;
-	}
-
-	let { error, onRetry, onDismiss, className = '', showIcon = true }: Props = $props();
-
-	const errorMessage = $derived(
-		error instanceof Error ? error.message : error || 'An error occurred'
-	);
-
-	const isNetworkError = $derived(
-		errorMessage.toLowerCase().includes('network') ||
-			errorMessage.toLowerCase().includes('connection') ||
-			errorMessage.toLowerCase().includes('timeout')
-	);
-
-	const isAuthError = $derived(
-		errorMessage.toLowerCase().includes('credential') ||
-			errorMessage.toLowerCase().includes('authentication') ||
-			errorMessage.toLowerCase().includes('unauthorized')
-	);
-</script>
-
-{#if error}
-	<div class="rounded-md bg-red-50 dark:bg-red-900/20 p-4 mt-4 {className}">
-		<div class="flex">
-			{#if showIcon}
-				<div class="flex-shrink-0">
-					<svg
-						class="h-5 w-5 text-red-400"
-						viewBox="0 0 20 20"
-						fill="currentColor"
-						aria-hidden="true"
-					>
-						<path
-							fill-rule="evenodd"
-							d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"
-							clip-rule="evenodd"
-						/>
-					</svg>
-				</div>
-			{/if}
-			<div class="ml-3 flex-1">
-				<h3 class="text-sm font-medium text-red-800 dark:text-red-200">
-					{#if isNetworkError}
-						Connection Error
-					{:else if isAuthError}
-						Authentication Error
-					{:else}
-						Error
-					{/if}
-				</h3>
-				<div class="mt-2 text-sm text-red-700 dark:text-red-300">
-					<p>{errorMessage}</p>
-
-					{#if isNetworkError}
-						<p class="mt-1 text-xs">Please check your internet connection and try again.</p>
-					{:else if isAuthError}
-						<p class="mt-1 text-xs">Please verify your credentials and try again.</p>
-					{/if}
-				</div>
-			</div>
-			<div class="ml-auto pl-3 flex gap-2">
-				{#if onRetry}
-					<button
-						onclick={onRetry}
-						class="text-sm font-medium text-red-600 dark:text-red-400 hover:text-red-500 dark:hover:text-red-300 transition-colors"
-						aria-label="Retry action"
-					>
-						Retry
-					</button>
-				{/if}
-				{#if onDismiss}
-					<button
-						onclick={onDismiss}
-						class="text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 transition-colors"
-						aria-label="Dismiss error"
-					>
-						Dismiss
-					</button>
-				{/if}
-			</div>
-		</div>
-	</div>
-{/if}
diff --git a/packages/yakkl-wallet/src/lib/components/v1/AuthLoading.svelte b/packages/yakkl-wallet/src/lib/components/v1/AuthLoading.svelte
deleted file mode 100644
index e52330a..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/AuthLoading.svelte
+++ /dev/null
@@ -1,54 +0,0 @@
-<!-- AuthLoading.svelte -->
-<script lang="ts">
-	interface Props {
-		show?: boolean;
-		message?: string;
-		className?: string;
-		size?: 'sm' | 'md' | 'lg';
-		variant?: 'spinner' | 'dots' | 'pulse';
-	}
-
-	let {
-		show = true,
-		message = 'Loading...',
-		className = '',
-		size = 'md',
-		variant = 'spinner'
-	}: Props = $props();
-
-	const sizeClasses = $derived(
-		{
-			sm: 'h-4 w-4',
-			md: 'h-6 w-6',
-			lg: 'h-8 w-8'
-		}[size]
-	);
-</script>
-
-{#if show}
-	<div class="flex flex-col items-center justify-center p-4 {className}">
-		{#if variant === 'spinner'}
-			<div
-				class="animate-spin rounded-full border-2 border-gray-300 border-t-indigo-600 {sizeClasses}"
-			></div>
-		{:else if variant === 'dots'}
-			<div class="flex space-x-1">
-				<div class="w-2 h-2 bg-indigo-600 rounded-full animate-bounce"></div>
-				<div
-					class="w-2 h-2 bg-indigo-600 rounded-full animate-bounce"
-					style="animation-delay: 0.1s"
-				></div>
-				<div
-					class="w-2 h-2 bg-indigo-600 rounded-full animate-bounce"
-					style="animation-delay: 0.2s"
-				></div>
-			</div>
-		{:else if variant === 'pulse'}
-			<div class="bg-indigo-600 rounded-full {sizeClasses} animate-pulse"></div>
-		{/if}
-
-		{#if message}
-			<p class="mt-2 text-sm text-gray-600 dark:text-gray-400 text-center">{message}</p>
-		{/if}
-	</div>
-{/if}
diff --git a/packages/yakkl-wallet/src/lib/components/v1/Avatar.svelte b/packages/yakkl-wallet/src/lib/components/v1/Avatar.svelte
deleted file mode 100644
index 20139aa..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/Avatar.svelte
+++ /dev/null
@@ -1,31 +0,0 @@
-<script lang="ts">
-	const props = $props<{
-		userName?: string;
-		url?: string;
-		className?: string;
-		ariaLabel?: string;
-	}>();
-
-	const initial = props.userName?.charAt(0)?.toUpperCase() ?? '?';
-
-	// Default styles (can be extended or overridden by props.className)
-	const defaultClasses =
-		'w-10 h-10 rounded-full ring-2 ring-offset-1 flex items-center justify-center text-sm font-bold uppercase bg-primary-300 text-base-content';
-</script>
-
-{#if props.url}
-	<img
-		src={props.url}
-		alt={props.ariaLabel ?? 'User avatar'}
-		class={`object-cover ${props.className ?? defaultClasses}`}
-		loading="lazy"
-	/>
-{:else}
-	<div
-		class={props.className ?? defaultClasses}
-		aria-label={props.ariaLabel ?? 'User avatar'}
-		role="img"
-	>
-		{initial}
-	</div>
-{/if}
diff --git a/packages/yakkl-wallet/src/lib/components/v1/Back.svelte b/packages/yakkl-wallet/src/lib/components/v1/Back.svelte
deleted file mode 100644
index 831f6d2..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/Back.svelte
+++ /dev/null
@@ -1,41 +0,0 @@
-<script lang="ts">
-	import { goto } from '$app/navigation';
-
-	interface Props {
-		defaultClass?: string;
-		href?: string;
-	}
-
-	let { defaultClass = 'left-0 top-0', href = '' }: Props = $props();
-
-	// Shim for login page - needs a better way
-	function handleBack(_e: any) {
-		if (href === '') {
-			if (history.length > 2) {
-				history.back();
-			} // it is assumed that it takes at least 2 pages before the welcome screen is presented for the first time. Note, if the user clicks any of the recover or import links on the login page then the length will be higher and this can fool this simple check which can reload the login page and the user has to login again. FYI
-		} else {
-			goto(href);
-		}
-	}
-</script>
-
-<button
-	class="btn btn-sm btn-circle btn-outline z-10 {defaultClass}"
-	onclick={handleBack}
-	aria-label="Back button"
->
-	<svg
-		xmlns="http://www.w3.org/2000/svg"
-		class="h-5 w-5"
-		fill="none"
-		viewBox="0 0 24 24"
-		stroke="currentColor"
-		><path
-			stroke-linecap="round"
-			stroke-linejoin="round"
-			stroke-width="2"
-			d="M19.5 12h-15m0 0l6.75 6.75M4.5 12l6.75-6.75"
-		/></svg
-	>
-</button>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/Balance.svelte b/packages/yakkl-wallet/src/lib/components/v1/Balance.svelte
deleted file mode 100644
index 2d40d5c..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/Balance.svelte
+++ /dev/null
@@ -1,95 +0,0 @@
-<script lang="ts">
-	import { onMount } from 'svelte';
-	import type { BigNumberish, BlockTag } from '$lib/common';
-	import { ethers as ethersv6 } from 'ethers-v6';
-	import type { Provider } from '$lib/managers/Provider';
-
-	interface Props {
-		symbol: string;
-		address?: string | null;
-		blockTag?: BlockTag | 'latest';
-		units?: number | string;
-		provider: Provider;
-		className?: string;
-		balanceText?: string;
-	}
-
-	let {
-		symbol,
-		address = null,
-		blockTag = 'latest',
-		units = 18,
-		provider,
-		className = '',
-		balanceText = 'Balance: '
-	}: Props = $props();
-
-	let balance: BigNumberish = $state(0n);
-
-	// Helper function to determine if an error should be shown to the user
-	function shouldShowErrorToUser(error: any): boolean {
-		const errorMessage = error?.message || error?.toString() || '';
-
-		// Network/API errors that should be handled silently
-		const networkErrors = [
-			'missing response',
-			'timeout',
-			'TIMEOUT',
-			'SERVER_ERROR',
-			'NETWORK_ERROR',
-			'Failed to fetch',
-			'fetch',
-			'Connection failed',
-			'Request timeout',
-			'eth_getBalance',
-			'call revert exception',
-			'alchemy.com',
-			'infura.io',
-			'requestBody',
-			'serverError',
-			'code=SERVER_ERROR',
-			'version=web/',
-			'JsonRpcError',
-			'RPC Error',
-			'getBalance',
-			'Balance fetch'
-		];
-
-		return !networkErrors.some((pattern) =>
-			errorMessage.toLowerCase().includes(pattern.toLowerCase())
-		);
-	}
-
-	onMount(async () => {
-		if (!address || !provider) {
-			return;
-		}
-		try {
-			balance = await provider.getBalance(address, blockTag);
-
-			// Update cache with fetched balance
-			if (balance && symbol === 'ETH') {
-				// Only cache ETH/native token balances
-				const { balanceCacheManager } = await import('$lib/managers/BalanceCacheManager');
-				const { yakklPricingStore } = await import('$lib/common/stores');
-				const { get } = await import('svelte/store');
-				const currentPrice = get(yakklPricingStore)?.price;
-				if (currentPrice) {
-					balanceCacheManager.setCachedBalance(address, balance, currentPrice);
-				}
-			}
-		} catch (error) {
-			// Only log non-network errors, suppress network timeouts
-			if (shouldShowErrorToUser(error)) {
-				console.error('[Balance] Balance fetch error:', error);
-			}
-			// Keep existing balance or set to 0
-			balance = balance || 0n;
-		}
-	});
-</script>
-
-<span class="text-gray-500 {className}">
-	{balanceText}{ethersv6.formatUnits(balance ? balance.toString() : '0', units)}
-	{symbol.toUpperCase()}
-</span>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/BalanceIndicator.svelte b/packages/yakkl-wallet/src/lib/components/v1/BalanceIndicator.svelte
deleted file mode 100644
index 118d84c..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/BalanceIndicator.svelte
+++ /dev/null
@@ -1,103 +0,0 @@
-<!-- BalanceIndicator.svelte - Shows balance with loading/error states -->
-<script lang="ts">
-	import SkeletonBalance from './SkeletonBalance.svelte';
-	import ProtectedValue from './ProtectedValue.svelte';
-
-	interface Props {
-		isLoading?: boolean;
-		loadingError?: string | null;
-		isCached?: boolean;
-		isStale?: boolean;
-		lastUpdated?: Date | null;
-		quantityFormatted?: string;
-		totalValueFormatted?: string;
-		onRetry?: () => void;
-	}
-
-	let {
-		isLoading = false,
-		loadingError = null,
-		isCached = false,
-		isStale = false,
-		lastUpdated = null,
-		quantityFormatted = '',
-		totalValueFormatted = '',
-		onRetry = () => {}
-	}: Props = $props();
-
-	function formatLastUpdated(date: Date | null): string {
-		if (!date) return '';
-		const now = new Date();
-		const diffMs = now.getTime() - date.getTime();
-		const diffMins = Math.floor(diffMs / (1000 * 60));
-
-		if (diffMins < 1) return 'just now';
-		if (diffMins < 60) return `${diffMins}m ago`;
-
-		const diffHours = Math.floor(diffMins / 60);
-		if (diffHours < 24) return `${diffHours}h ago`;
-
-		const diffDays = Math.floor(diffHours / 24);
-		return `${diffDays}d ago`;
-	}
-</script>
-
-<div class="mt-2 space-y-1">
-	<!-- Balance row -->
-	<div class="flex items-center justify-between">
-		{#if isLoading && !isCached}
-			<SkeletonBalance showLabel={false} className="h-4" />
-		{:else if loadingError}
-			<div class="flex items-center space-x-1">
-				<span class="text-xs text-red-500">Error loading</span>
-				<button class="text-xs text-blue-500 hover:text-blue-700 underline" onclick={onRetry}>
-					Retry
-				</button>
-			</div>
-			<span class="text-xs text-gray-400">--</span>
-		{:else}
-			<div class="flex items-center space-x-1">
-				<span class="text-sm font-semibold text-gray-900">
-					<ProtectedValue value={`${quantityFormatted} ETH`} placeholder="******* ETH" />
-				</span>
-				{#if isLoading}
-					<div
-						class="w-3 h-3 border border-blue-400 border-t-transparent rounded-full animate-spin"
-					></div>
-				{:else if isStale}
-					<div title="Data may be outdated">
-						<svg class="w-3 h-3 text-orange-400" fill="currentColor" viewBox="0 0 20 20">
-							<path
-								fill-rule="evenodd"
-								d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z"
-								clip-rule="evenodd"
-							/>
-						</svg>
-					</div>
-				{:else if isCached}
-					<div title="Cached data">
-						<svg class="w-3 h-3 text-green-400" fill="currentColor" viewBox="0 0 20 20">
-							<path
-								fill-rule="evenodd"
-								d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
-								clip-rule="evenodd"
-							/>
-						</svg>
-					</div>
-				{/if}
-			</div>
-			<span class="text-sm font-semibold text-gray-900">
-				<ProtectedValue value={totalValueFormatted} placeholder="*****" />
-			</span>
-		{/if}
-	</div>
-
-	<!-- Last updated info (only show if we have timestamp) -->
-	{#if lastUpdated && (isStale || isCached)}
-		<div class="flex justify-end">
-			<span class="text-xs text-gray-400" title="Last updated: {lastUpdated.toLocaleString()}">
-				Updated {formatLastUpdated(lastUpdated)}
-			</span>
-		</div>
-	{/if}
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/Banner.svelte b/packages/yakkl-wallet/src/lib/components/v1/Banner.svelte
deleted file mode 100644
index a263eb6..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/Banner.svelte
+++ /dev/null
@@ -1,28 +0,0 @@
-<!-- File: src/lib/components/Banner.svelte -->
-<script lang="ts">
-	let {
-		title = 'Welcome to YAKKL',
-		message = 'Your secure crypto wallet',
-		ctaText = 'UPGRADE',
-		onCallToAction = null
-	} = $props<{
-		title?: string;
-		message?: string;
-		ctaText?: string;
-		onCallToAction?: ((index: number) => void) | null;
-	}>();
-</script>
-
-<div class="bg-primary text-primary-content p-4">
-	<div class="flex justify-between items-center">
-		<div>
-			<h2 class="text-lg font-bold">{title}</h2>
-			<p class="text-sm">{message}</p>
-		</div>
-		{#if onCallToAction}
-			<button onclick={onCallToAction} class="btn btn-secondary btn-sm">
-				{ctaText}
-			</button>
-		{/if}
-	</div>
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/BookmarkedArticles.svelte b/packages/yakkl-wallet/src/lib/components/v1/BookmarkedArticles.svelte
deleted file mode 100644
index 0ed47a2..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/BookmarkedArticles.svelte
+++ /dev/null
@@ -1,162 +0,0 @@
-<!-- svelte-ignore state_referenced_locally -->
-<!-- svelte-ignore state_referenced_locally -->
-<!-- BookmarkedArticles.svelte -->
-<script lang="ts">
-	import ArticleControls from './ArticleControls.svelte';
-	import BookmarkIcon from './icons/BookmarkIcon.svelte';
-	import NewsFeedLineView from './NewsFeedLineView.svelte';
-	import SearchSortControls from './SearchSortControls.svelte';
-	import type { RSSItem } from '$lib/managers/ExtensionRSSFeedService';
-	import { yakklBookmarkedArticlesStore, setYakklBookmarkedArticles } from '$lib/common/stores';
-	import { derived, writable } from 'svelte/store';
-	import LockedSectionCard from './LockedSectionCard.svelte';
-	import Upgrade from './Upgrade.svelte';
-	import { onMount } from 'svelte';
-	import { isProLevel } from '$lib/common/utils';
-
-	interface Props {
-		show?: boolean;
-		locked?: boolean;
-		onComplete?: () => void;
-		footer?: any;
-		footerProps?: Record<string, any>;
-		lockedFooter?: any;
-		lockedFooterProps?: Record<string, any>;
-	}
-
-	let {
-		show = $bindable(true),
-		onComplete = $bindable(() => {}),
-		locked = $bindable(true),
-		footer = $bindable(null),
-		footerProps = $bindable({}),
-		lockedFooter = $bindable(null),
-		lockedFooterProps = $bindable({})
-	}: Props = $props();
-
-	let showUpgradeModal = $state(false);
-
-	const searchQuery = writable('');
-	const sortOrder = writable<'date' | 'title'>('date');
-	const sortDirection = writable<'asc' | 'desc'>('desc');
-
-	const filteredArticles = derived(
-		[yakklBookmarkedArticlesStore, searchQuery, sortOrder, sortDirection],
-		([articles, query, order, direction]) => {
-			let filtered = articles;
-			if (query) {
-				const searchLower = query.toLowerCase();
-				filtered = articles.filter(
-					(article) =>
-						article.title.toLowerCase().includes(searchLower) ||
-						article.description?.toLowerCase().includes(searchLower) ||
-						article.source.toLowerCase().includes(searchLower)
-				);
-			}
-
-			return [...filtered].sort((a, b) => {
-				if (order === 'date') {
-					const dateA = new Date(a.publishedAt || a.date || '').getTime();
-					const dateB = new Date(b.publishedAt || b.date || '').getTime();
-					return direction === 'asc' ? dateA - dateB : dateB - dateA;
-				}
-				return direction === 'asc'
-					? a.title.localeCompare(b.title)
-					: b.title.localeCompare(a.title);
-			});
-		}
-	);
-
-	onMount(async () => {
-		locked = (await isProLevel()) ? false : true;
-	});
-
-	function handleSearch(query: string) {
-		searchQuery.set(query);
-	}
-
-	function handleSortOrderChange(order: 'date' | 'title') {
-		sortOrder.set(order);
-	}
-
-	function handleSortDirectionChange() {
-		sortDirection.update((d) => (d === 'asc' ? 'desc' : 'asc'));
-	}
-
-	async function handleArticleDelete(article: RSSItem) {
-		const currentArticles = $yakklBookmarkedArticlesStore;
-		const updatedArticles = currentArticles.filter(
-			(a) => !(a.title === article.title && a.source === article.source)
-		);
-		await setYakklBookmarkedArticles(updatedArticles);
-	}
-
-	// Only show locked footer if not pro
-	let showLockedFooter = $state(false);
-
-	async function updateLockedFooterState() {
-		showLockedFooter = !(await isProLevel());
-	}
-
-	$effect(() => {
-		updateLockedFooterState();
-	});
-</script>
-
-<Upgrade bind:show={showUpgradeModal} {onComplete} />
-
-<LockedSectionCard
-	bind:show
-	title="Bookmarked Articles"
-	icon={BookmarkIcon}
-	minHeight="300px"
-	maxHeight="750px"
-	{locked}
-	lockMessage="Upgrade to Pro to unlock this feature"
-	showButton={true}
-	onComplete={() => {
-		showUpgradeModal = true;
-	}}
-	{footer}
-	{footerProps}
-	lockedFooter={showLockedFooter ? lockedFooter : null}
-	lockedFooterProps={showLockedFooter ? lockedFooterProps : {}}
->
-	<SearchSortControls
-		searchQuery={$searchQuery}
-		sortOrder={$sortOrder}
-		sortDirection={$sortDirection}
-		onSearch={handleSearch}
-		onSortOrderChange={handleSortOrderChange}
-		onSortDirectionChange={handleSortDirectionChange}
-	/>
-
-	{#if $filteredArticles.length === 0}
-		<div class="flex items-center justify-center h-32 text-gray-500">
-			<p>{$searchQuery ? 'No matching articles found' : 'No bookmarked articles yet'}</p>
-		</div>
-	{:else}
-		<div class="space-y-0">
-			{#each $filteredArticles as article, index}
-				<div class="relative group">
-					<div
-						class="group-hover:bg-gray-50 dark:group-hover:bg-zinc-800/50 transition-colors duration-200"
-					>
-						<NewsFeedLineView newsItem={article} />
-					</div>
-					<ArticleControls
-						{article}
-						bookmarkEnabled={false}
-						deleteEnabled={true}
-						onDelete={handleArticleDelete}
-					/>
-					{#if index < $filteredArticles.length - 1}
-						<div class="flex justify-center">
-							<div class="w-[80%] h-[1px] bg-gray-200 dark:bg-gray-700"></div>
-						</div>
-					{/if}
-				</div>
-			{/each}
-		</div>
-	{/if}
-</LockedSectionCard>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/ButtonGrid.svelte b/packages/yakkl-wallet/src/lib/components/v1/ButtonGrid.svelte
deleted file mode 100644
index 80958da..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/ButtonGrid.svelte
+++ /dev/null
@@ -1,12 +0,0 @@
-<script lang="ts">
-	interface Props {
-		children?: import('svelte').Snippet;
-	}
-
-	let { children }: Props = $props();
-	// Nothing to this except for cleaner looking code in certain pages
-</script>
-
-<div class="grid grid-cols-3 gap-2 text-base-content mt-3">
-	{@render children?.()}
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/ButtonGridItem.svelte b/packages/yakkl-wallet/src/lib/components/v1/ButtonGridItem.svelte
deleted file mode 100644
index bf69b13..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/ButtonGridItem.svelte
+++ /dev/null
@@ -1,47 +0,0 @@
-<script lang="ts">
-	import { goto } from '$app/navigation';
-
-	interface Props {
-		path?: string; // If path === '' then handle is used instead of goto
-		title?: string;
-		btn?: string;
-		contentClass?: string;
-		titleClass?: string;
-		handle?: any;
-		children?: import('svelte').Snippet;
-	}
-
-	let {
-		path = '',
-		title = '',
-		btn = 'btn-primary',
-		contentClass = 'p-0',
-		titleClass = 'p-0 m-0',
-		handle = () => {},
-		children
-	}: Props = $props();
-</script>
-
-<div class="rounded-md shadow h-24">
-	<!-- svelte-ignore a11y_click_events_have_key_events -->
-	<!-- svelte-ignore a11y_interactive_supports_focus -->
-	{#if path !== ''}
-		<div
-			role="button"
-			onclick={() => goto(path)}
-			class="btn {btn} flex-nowrap w-full h-full flex flex-col items-center justify-center border border-transparent font-medium rounded-md {contentClass}"
-		>
-			{@render children?.()}
-			<span class="xs:text-xs sm:text-sm md:text-base mt-1 text-center">{title}</span>
-		</div>
-	{:else}
-		<div
-			role="button"
-			onclick={handle}
-			class="btn {btn} flex-nowrap w-full h-full flex flex-col items-center justify-center border border-transparent font-medium rounded-md {contentClass}"
-		>
-			{@render children?.()}
-			<span class="xs:text-xs sm:text-sm md:text-base text-center {titleClass}">{title}</span>
-		</div>
-	{/if}
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/Buy.svelte b/packages/yakkl-wallet/src/lib/components/v1/Buy.svelte
deleted file mode 100644
index 73383da..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/Buy.svelte
+++ /dev/null
@@ -1,49 +0,0 @@
-<script lang="ts">
-	//@ts-ignore
-	import { handleOpenInTab } from '$lib/utilities/utilities';
-
-	interface Props {
-		show?: boolean;
-	}
-
-	let { show = $bindable(false) }: Props = $props();
-
-	function handleBuy(_e: any) {
-		show = false;
-		handleOpenInTab(
-			'https://yakkl.com/crypto/buy?utm_source=yakkl&utm_medium=extension&utm_campaign=buy&utm_content=extension&utm_term=extension'
-		);
-	}
-</script>
-
-<div class="modal" class:modal-open={show}>
-	<div class="modal-box relative justify-center">
-		<h3 class="text-lg font-bold">Buy Crypto</h3>
-		<p class="py-4">Stripe is our provider and this launches a buy page in the browser...</p>
-		<div class="modal-action">
-			<button
-				class="btn"
-				onclick={() => {
-					show = false;
-				}}>Cancel</button
-			>
-			<button class="btn" onclick={handleBuy}
-				>Continue
-				<svg
-					xmlns="http://www.w3.org/2000/svg"
-					fill="none"
-					viewBox="0 0 24 24"
-					stroke-width="1.5"
-					stroke="currentColor"
-					class="w-4 h-4"
-				>
-					<path
-						stroke-linecap="round"
-						stroke-linejoin="round"
-						d="M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"
-					/>
-				</svg>
-			</button>
-		</div>
-	</div>
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/BuyTokenPanel.svelte b/packages/yakkl-wallet/src/lib/components/v1/BuyTokenPanel.svelte
deleted file mode 100644
index 620448a..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/BuyTokenPanel.svelte
+++ /dev/null
@@ -1,282 +0,0 @@
-<!-- BuyTokenPanel.svelte -->
-<script lang="ts">
-	import type { Writable } from 'svelte/store';
-	import TokenDropdown from './TokenDropdown.svelte';
-	import SwapTokenPrice from './SwapTokenPrice.svelte';
-	import type { SwapToken, SwapPriceData } from '$lib/common/interfaces';
-	import { debounce } from 'lodash-es';
-	import { ethers as ethersv6 } from 'ethers-v6';
-	import { toBigInt } from '$lib/common';
-	import NumericInput from './NumericInput.svelte';
-	import { log } from '$lib/common/logger-wrapper';
-
-	interface Props {
-		disabled?: boolean;
-		resetValues?: boolean;
-		swapPriceDataStore: Writable<SwapPriceData>;
-		onTokenSelect: (token: SwapToken) => void;
-		onAmountChange: (amount: string) => void;
-		lastModifiedPanel?: string;
-	}
-
-	let {
-		disabled = false,
-		resetValues = $bindable(false),
-		swapPriceDataStore,
-		onTokenSelect,
-		onAmountChange,
-		lastModifiedPanel = $bindable('sell')
-	}: Props = $props();
-
-	let userInput = $state('');
-	let formattedAmount = $state('');
-
-	// Reset handling
-	$effect(() => {
-		if (resetValues) {
-			userInput = '';
-			formattedAmount = '';
-			resetValues = false;
-		}
-	});
-
-	// Update display amount when quote changes from sell panel
-	$effect(() => {
-		if (lastModifiedPanel === 'sell') {
-			// Removed the !userInput check
-			userInput = ''; // Clear user input when sell panel changes
-			const tokenAmount = ethersv6.formatUnits(
-				toBigInt($swapPriceDataStore.amountOut),
-				$swapPriceDataStore.tokenOut.decimals
-			);
-			formattedAmount = tokenAmount;
-		}
-	});
-
-	const debouncedAmountChange = debounce((value: string) => {
-		onAmountChange(value);
-	}, 300);
-
-	function handleAmountInput(value: string) {
-		lastModifiedPanel = 'buy';
-
-		if (!value) {
-			userInput = '';
-			formattedAmount = '';
-			debouncedAmountChange('');
-			return;
-		}
-
-		userInput = value;
-		formattedAmount = value;
-		debouncedAmountChange(value);
-	}
-
-	function handleTokenSelection(token: SwapToken) {
-		userInput = '';
-		formattedAmount = '';
-		onTokenSelect(token);
-	}
-
-	function handleBlur(value: string) {
-		if (!value) {
-			userInput = '';
-			formattedAmount = '';
-		}
-	}
-</script>
-
-<div
-	class="border border-gray-300 shadow-md p-4 rounded-lg bg-gray-50 dark:bg-gray-800
-  {disabled ? ' opacity-50 pointer-events-none' : ''}"
->
-	<div class="flex justify-between items-center">
-		<NumericInput
-			value={userInput || formattedAmount}
-			onChange={handleAmountInput}
-			onBlur={handleBlur}
-			{disabled}
-			className="
-        bg-transparent
-        text-3xl
-        font-bold
-        w-1/2
-        mr-4
-        focus:outline-none
-        focus:border-b-2
-        focus:border-blue-500
-        text-black dark:text-white
-        {disabled ? 'cursor-not-allowed' : ''}
-      "
-		/>
-		<TokenDropdown
-			{disabled}
-			selectedToken={$swapPriceDataStore.tokenOut}
-			onTokenSelect={handleTokenSelection}
-		/>
-	</div>
-	<div class="flex justify-between items-center mt-2 text-sm">
-		<SwapTokenPrice {swapPriceDataStore} type="buy" />
-	</div>
-</div>
-
-<!-- <script lang="ts">
-  import type { Writable } from 'svelte/store';
-  import TokenDropdown from './TokenDropdown.svelte';
-  import SwapTokenPrice from './SwapTokenPrice.svelte';
-  import type { SwapToken, SwapPriceData } from '$lib/common/interfaces';
-  import { debounce } from 'lodash-es';
-  import { ethers as ethersv6 } from 'ethers-v6';
-  import { convertTokenToUsd, convertUsdToTokenAmount, toBigInt } from '$lib/common';
-  import { isUsdModeStore } from '$lib/common/stores/uiStateStore';
-
-  interface Props {
-    disabled?: boolean;
-    resetValues?: boolean;
-    swapPriceDataStore: Writable<SwapPriceData>;
-    onTokenSelect: (token: SwapToken) => void;
-    onAmountChange: (amount: string) => void;
-  }
-
-  let {
-    disabled = false,
-    resetValues = $bindable(false),
-    swapPriceDataStore,
-    onTokenSelect,
-    onAmountChange,
-  }: Props = $props();
-
-  // Input states
-  let userInput = $state('');
-  let formattedAmount = $state('');
-
-  // Reset handling
-  $effect(() => {
-    if (resetValues) {
-      userInput = '';
-      formattedAmount = '';
-      resetValues = false;
-    }
-  });
-
-  // Sync formatted amount with store data
-  $effect(() => {
-    const tokenAmount = ethersv6.formatUnits(toBigInt($swapPriceDataStore.amountOut), $swapPriceDataStore.tokenOut.decimals);
-
-    // Convert token amount to USD
-    const usdAmount = $swapPriceDataStore.marketPriceOut > 0
-      ? convertTokenToUsd(Number(tokenAmount), $swapPriceDataStore.marketPriceOut)
-      : 0;
-
-    const displayAmount = $isUsdModeStore ? usdAmount.toFixed(2) : tokenAmount;
-
-    if (!userInput) {
-      formattedAmount = displayAmount;
-    }
-  });
-
-  // Debounced amount change handler
-  const debouncedAmountChange = debounce((value: string) => {
-    onAmountChange(value);
-  }, 300);
-
-  // Handle input changes
-  function handleAmountInput(event: Event) {
-    const input = event.target as HTMLInputElement;
-    let value = input.value;
-
-    // Sanitize input: Allow only numbers and a single dot
-    value = value.replace(/[^0-9.]/g, '');
-
-    // Split input into integer and decimal parts
-    const parts = value.split('.');
-    if (parts.length > 2) {
-      value = `${parts[0]}.${parts.slice(1).join('')}`;
-    }
-
-    // Adjust decimal precision based on mode
-    if ($isUsdModeStore) {
-      // Limit to 2 decimal places for USD
-      if (parts[1]?.length > 2) {
-        value = `${parts[0]}.${parts[1].slice(0, 2)}`;
-      }
-    } else {
-      // Use tokenOut decimals for precision
-      const tokenDecimals = $swapPriceDataStore.tokenOut.decimals || 18;
-      if (parts[1]?.length > tokenDecimals) {
-        value = `${parts[0]}.${parts[1].slice(0, tokenDecimals)}`;
-      }
-    }
-
-    if (userInput !== value) {
-      userInput = value;
-
-      if (value === '' || value === '.') {
-        userInput = '';
-        formattedAmount = '';
-        debouncedAmountChange('');
-        return;
-      }
-
-      formattedAmount = value;
-
-      if ($isUsdModeStore) {
-        // Convert USD value to token quantity
-        const marketPrice = $swapPriceDataStore.marketPriceOut || 0;
-        if (marketPrice > 0) {
-          const tokenAmount = convertUsdToTokenAmount(Number(value), marketPrice, $swapPriceDataStore.tokenOut.decimals);
-          debouncedAmountChange(tokenAmount.toString());
-        } else {
-          debouncedAmountChange('');
-        }
-      } else {
-        // Pass the token quantity directly
-        debouncedAmountChange(value);
-      }
-    }
-  }
-
-  // Handle blur (input losing focus)
-  function handleBlur() {
-    if (!userInput || userInput === '.' || userInput === '') {
-      userInput = '';
-      if (!formattedAmount || formattedAmount === '0') formattedAmount = '';
-    } else {
-      formattedAmount = userInput;
-    }
-  }
-</script>
-
-<div class="border border-gray-300 shadow-md p-4 rounded-lg bg-gray-50 dark:bg-gray-800
-  {disabled ? ' opacity-50 pointer-events-none' : ''}">
-  <div class="flex justify-between items-center">
-    <input
-      type="text"
-      placeholder="0"
-      value={userInput || formattedAmount}
-      oninput={handleAmountInput}
-      onblur={handleBlur}
-      disabled={disabled}
-      class="
-        bg-transparent
-        text-3xl
-        font-bold
-        w-1/2
-        mr-4
-        focus:outline-none
-        focus:border-b-2
-        focus:border-blue-500
-        text-black dark:text-white
-        {disabled ? 'cursor-not-allowed' : ''}
-      "
-    />
-    <TokenDropdown
-      disabled={disabled}
-      selectedToken={$swapPriceDataStore.tokenOut}
-      onTokenSelect={onTokenSelect}
-    />
-  </div>
-  <div class="flex justify-between items-center mt-2 text-sm">
-    <SwapTokenPrice {swapPriceDataStore} type="buy" />
-  </div>
-</div> -->
diff --git a/packages/yakkl-wallet/src/lib/components/v1/Cancel.svelte b/packages/yakkl-wallet/src/lib/components/v1/Cancel.svelte
deleted file mode 100644
index eac6461..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/Cancel.svelte
+++ /dev/null
@@ -1,34 +0,0 @@
-<script lang="ts">
-	import { goto } from '$app/navigation';
-	import { PATH_WELCOME } from '$lib/common';
-
-	interface Props {
-		defaultClass?: string;
-		path?: any;
-		handle?: any;
-	}
-
-	let {
-		defaultClass = 'right-0 top-0',
-		path = PATH_WELCOME,
-		handle = () => goto(path)
-	}: Props = $props();
-</script>
-
-<!-- svelte-ignore a11y_consider_explicit_label -->
-<button class="btn btn-sm btn-circle btn-outline z-10 {defaultClass}" onclick={handle}>
-	<svg
-		xmlns="http://www.w3.org/2000/svg"
-		fill="none"
-		viewBox="0 0 24 24"
-		stroke-width="1.5"
-		stroke="currentColor"
-		class="w-6 h-6"
-	>
-		<path
-			stroke-linecap="round"
-			stroke-linejoin="round"
-			d="M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
-		/>
-	</svg>
-</button>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/Card.svelte b/packages/yakkl-wallet/src/lib/components/v1/Card.svelte
deleted file mode 100644
index a75c10a..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/Card.svelte
+++ /dev/null
@@ -1,1488 +0,0 @@
-<script lang="ts">
-	import { goto } from '$app/navigation';
-	import { SpeedDial, SpeedDialButton } from 'flowbite-svelte';
-	import {
-		yakklPricingStore,
-		setYakklCurrentlySelectedStorage,
-		getYakklCurrentlySelected,
-		getMiscStore,
-		yakklMiscStore,
-		yakklCurrentlySelectedStore,
-		yakklAccountsStore,
-		yakklCombinedTokenStore
-	} from '$lib/common/stores';
-	import { PATH_LOGOUT } from '$lib/common/constants';
-	import { onDestroy, onMount } from 'svelte';
-	import { truncate } from '$lib/utilities/utilities';
-	import { encryptData, decryptData } from '$lib/common/encryption';
-	import { checkPricesCallback, startPricingChecks, stopCheckPrices } from '$lib/tokens/prices';
-	import ErrorNoAction from '$lib/components/ErrorNoAction.svelte';
-	import {
-		NetworkType,
-		getInstances,
-		isEncryptedData,
-		type CurrentlySelectedData,
-		type Network,
-		type TokenData,
-		type YakklAccount,
-		type YakklWatch
-	} from '$lib/common';
-	import type { BigNumberish } from '$lib/common/bignumber';
-	import { Wallet } from '$lib/managers/Wallet';
-	import { EthereumBigNumber } from '$lib/common/bignumber-ethereum';
-	import Accounts from './Accounts.svelte';
-	import Contacts from './Contacts.svelte';
-	import TokensEnhanced from './TokensEnhanced.svelte';
-	import Receive from './Receive.svelte';
-	import ImportPrivateKey from './ImportPrivateKey.svelte';
-	import ImportWatchAccount from './ImportWatchAccount.svelte';
-	import Upgrade from './Upgrade.svelte';
-	import type { Blockchain } from '$lib/managers/Blockchain';
-	import type { TokenService } from '$lib/managers/blockchains/evm/TokenService';
-	import type { Provider } from '$lib/managers/Provider';
-	import type { Settings } from '$lib/common/interfaces';
-	import EyeIcon from './icons/EyeIcon.svelte';
-	import ProtectedValue from './ProtectedValue.svelte';
-	import { tokenTotals } from '$lib/common/stores/tokenTotals'; // Used to display portfolio value in html below
-	import { browserSvelte, browser_ext } from '$lib/common/environment';
-	import { log } from '$lib/managers/Logger';
-	import Copy from './Copy.svelte';
-	import { updateTokenPrices } from '$lib/common/tokenPriceManager';
-	import { getSettings } from '$lib/common/stores';
-	import { PlanType, RegisteredType } from '$lib/common/types';
-	import { balanceCacheManager } from '$lib/managers/BalanceCacheManager';
-	import { accountTokenCacheManager } from '$lib/managers/AccountTokenCacheManager';
-	import SkeletonBalance from './SkeletonBalance.svelte';
-	import TokensIcon from './icons/TokensIcon.svelte';
-	import PortfolioTotal from './PortfolioTotal.svelte';
-	import SimpleTooltip from './SimpleTooltip.svelte';
-	import { shouldShowProFeatures } from '$lib/common/token-analytics';
-
-	// Helper function to determine if an error should be shown to the user
-	function shouldShowErrorToUser(error: any): boolean {
-		const errorMessage = error?.message || error?.toString() || '';
-
-		// Network/API errors that should be handled silently
-		const networkErrors = [
-			'missing response',
-			'timeout',
-			'TIMEOUT',
-			'SERVER_ERROR',
-			'NETWORK_ERROR',
-			'Failed to fetch',
-			'fetch',
-			'Connection failed',
-			'Request timeout',
-			'eth_getBalance',
-			'call revert exception',
-			'alchemy.com',
-			'infura.io',
-			'requestBody',
-			'serverError',
-			'code=SERVER_ERROR',
-			'version=web/',
-			'JsonRpcError',
-			'RPC Error'
-		];
-
-		return !networkErrors.some((pattern) =>
-			errorMessage.toLowerCase().includes(pattern.toLowerCase())
-		);
-	}
-
-	// Safely show an error with cooldown to prevent loops
-	function showErrorSafely(errorMsg: any): void {
-		if (errorCooldown) return; // Don't show if in cooldown
-
-		if (shouldShowErrorToUser(errorMsg)) {
-			errorValue = errorMsg as string;
-			error = true;
-
-			// Set cooldown to prevent rapid successive errors
-			errorCooldown = true;
-			setTimeout(() => {
-				errorCooldown = false;
-			}, 3000); // 3 second cooldown
-		}
-	}
-
-	// Manual refresh with debouncing (Pro users only)
-	async function handleManualRefresh() {
-		if (isProUser && !isManualRefreshing) {
-			const now = Date.now();
-			const timeSinceLastRefresh = now - lastManualRefresh;
-			const minInterval = 15000; // 15 seconds minimum between manual refreshes
-
-			if (timeSinceLastRefresh < minInterval) {
-				refreshCooldown = Math.ceil((minInterval - timeSinceLastRefresh) / 1000);
-				const cooldownInterval = setInterval(() => {
-					refreshCooldown--;
-					if (refreshCooldown <= 0) {
-						clearInterval(cooldownInterval);
-					}
-				}, 1000);
-				return;
-			}
-
-			isManualRefreshing = true;
-			lastManualRefresh = now;
-			
-			try {
-				log.debug('Manual Card refresh triggered', false);
-				
-				// Force refresh of token data and prices
-				await checkPricesCallback();
-				await updateTokenPrices();
-				
-				// Refresh balance and account data
-				await updateWithCurrentlySelected();
-				
-			} catch (error) {
-				log.error('Manual Card refresh failed:', false, error);
-				showErrorSafely('Failed to refresh data');
-			} finally {
-				isManualRefreshing = false;
-			}
-		}
-	}
-
-	// Check if manual refresh is available
-	const canManualRefresh = $derived(() => {
-		if (!isProUser || isManualRefreshing) return false;
-		const timeSinceLastRefresh = Date.now() - lastManualRefresh;
-		return timeSinceLastRefresh >= 15000; // 15 seconds cooldown
-	});
-
-	interface Props {
-		id?: string;
-	}
-
-	let { id = 'card' }: Props = $props();
-
-	let wallet: Wallet | null = null;
-	let provider: Provider | null = null;
-	let blockchain: Blockchain | null = null;
-	let tokenService: TokenService<any> | null = null;
-
-	// Pull this from the store later
-	let networks: Network[] = [
-		{
-			blockchain: 'Ethereum',
-			name: 'Mainnet',
-			chainId: 1,
-			symbol: 'ETH',
-			type: NetworkType.MAINNET,
-			explorer: 'https://etherscan.io',
-			decimals: 18
-		},
-		{
-			blockchain: 'Ethereum',
-			name: 'Sepolia',
-			chainId: 11155111,
-			symbol: 'ETH',
-			type: NetworkType.TESTNET,
-			explorer: 'https://sepolia.etherscan.io',
-			decimals: 18
-		}
-	];
-
-	let network: Network = $state(networks[0]);
-	let networkLabel = $state('Mainnet');
-	let addressShow: string = $state('Loading...');
-	let address: string = $state('');
-	let name: string = $state('Loading...');
-	let nameShow: string = $state('Loading...');
-	let valueFiat = $state('0.00');
-	let showAccountsModal = $state(false);
-	let showAccountImportModal = $state(false);
-	let showWatchAccountModal = $state(false);
-	let showContacts = $state(false);
-	let showTokens = $state(false);
-	let showRecv = $state(false);
-	let showUpgradeModal = $state(false);
-
-	let price: number = 0;
-	let prevPrice: number = 0;
-	let direction: string = $state('fl');
-	let showTestNetworks = true;
-	let error = $state(false);
-	let errorValue: string = $state('');
-	let errorCooldown = $state(false); // Prevent rapid error modal loops
-	let assetPriceValue: BigNumberish = $state(0n);
-	let assetPrice: string = $state('');
-	let card = 'background_gradient_2.png'; //'ethereum-background.png';
-
-	// Use reactive store instead of one-time value
-	let symbolLabel: string = $state('');
-	
-	// Pro user check and manual refresh state
-	let isProUser = $state(false);
-	let isManualRefreshing = $state(false);
-	let lastManualRefresh = $state(0);
-	let refreshCooldown = $state(0);
-	let currencyLabel: string = $state('');
-	let currency: Intl.NumberFormat = $state();
-	let shortcutsValue: EthereumBigNumber = $state(EthereumBigNumber.from(0)); // .quantity is the amount of a given token the address holds
-	let chainId: number = $state(1);
-	let formattedEtherValue: string = $state('');
-	let isDropdownOpen = $state(false);
-
-	let tokens: TokenData[] = [];
-	let isCalculatingPortfolio = $state(false);
-	let portfolioValue = $state<string>('-----');
-	let portfolioCurrency = $state<string>('USD');
-
-	let settings = $state<Settings | null>(null);
-	let planType = $state<PlanType>(PlanType.BASIC_MEMBER);
-
-	$effect(() => {
-		(async () => {
-			if (!isInitialized || !$yakklPricingStore || !$yakklMiscStore) return;
-
-			if ($yakklPricingStore.price === $yakklPricingStore.prevPrice) {
-				log.info('Price has not changed.');
-				return; // No change
-			}
-			price = $yakklPricingStore.price ?? 0;
-			const prevPrice = $yakklPricingStore.prevPrice ?? 0;
-			log.info('Price changed:', false, price, prevPrice);
-			if (price) {
-				if (price !== prevPrice) {
-					// Update display values when price changes - don't fetch new balance to prevent loops
-					await updateWithCurrentlySelected();
-					updateDisplayValues(); // Calculate and update fiat values with new price
-				}
-			}
-		})();
-	});
-
-	$effect(() => {
-		if (!isInitialized || !assetPriceValue) return;
-
-		const newAssetPrice = currency ? currency.format(Number(assetPriceValue)) : '0.00';
-		if (assetPrice !== newAssetPrice) {
-			assetPrice = newAssetPrice; // Only update if the value changes
-		}
-	});
-
-	$effect(() => {
-		if (!isInitialized || address) return;
-
-		address = $yakklCurrentlySelectedStore?.shortcuts?.address ?? '';
-	});
-
-	// Track previous address to prevent unnecessary updates
-	let previousAddress = $state<string>('');
-	let isUpdatingBalance = $state(false);
-	let isInitialized = $state(false);
-	let initializationTimeout: number | null = null;
-	let updateDebounceTimeout: number | null = null;
-
-	// React to changes in currently selected account
-	$effect(() => {
-		if (!isInitialized || !$yakklCurrentlySelectedStore || !$yakklMiscStore) {
-			return;
-		}
-
-		const address = $yakklCurrentlySelectedStore.shortcuts.address;
-
-		// Only update if address actually changed
-		if (address === previousAddress) {
-			return;
-		}
-
-		// Skip all updates during initialization to prevent loops
-		if (!isInitialized) {
-			return;
-		}
-
-		log.info('[Card] Currently selected account changed, updating card display');
-		previousAddress = address;
-
-		// Clear any pending updates to prevent rapid successive calls
-		if (updateDebounceTimeout) {
-			clearTimeout(updateDebounceTimeout);
-		}
-
-		// First, load cached data immediately for instant display
-		const cached = balanceCacheManager.getCachedBalance(address);
-
-		if (cached) {
-			log.info('[Card] Loading cached balance for immediate display');
-			// Don't modify the store directly to prevent loops - just update display
-			shortcutsValue = EthereumBigNumber.from(cached.balance);
-			updateWithCurrentlySelected();
-			updateDisplayValues(); // Calculate display values with cached balance
-		} else {
-			// No cache, update with current store values
-			updateWithCurrentlySelected();
-			updateDisplayValues(); // Calculate display values with current balance
-		}
-
-		// Load cached portfolio value immediately
-		const cachedPortfolio = accountTokenCacheManager.getCachedPortfolioValue(address);
-		if (cachedPortfolio) {
-			portfolioValue = currency
-				? currency.format(cachedPortfolio.value)
-				: cachedPortfolio.value.toFixed(2);
-			portfolioCurrency = cachedPortfolio.currency;
-			log.debug('[Card] Loaded cached portfolio value:', false, {
-				value: cachedPortfolio.value,
-				currency: cachedPortfolio.currency
-			});
-		} else {
-			// No cached portfolio, start with loading state
-			isCalculatingPortfolio = true;
-			portfolioValue = '-----';
-		}
-
-		// Then refresh balance in background if needed
-		if (!cached || balanceCacheManager.isStale(address)) {
-			log.info('[Card] Refreshing balance in background');
-			refreshBalanceInBackground();
-		}
-
-		// Refresh portfolio if stale or missing
-		if (!cachedPortfolio || accountTokenCacheManager.isPortfolioValueStale(address)) {
-			log.info('[Card] Refreshing portfolio value in background');
-			refreshPortfolioInBackground();
-		}
-	});
-
-	$effect.root(() => {
-		// Subscribe to token store updates
-		const unsubscribeYakklStore = yakklCombinedTokenStore.subscribe((updatedTokens = []) => {
-			tokens = updatedTokens; // Only keep the latest tokens up to date
-
-			// Only recalculate portfolio if initialized and conditions are met
-			if (
-				!isInitialized ||
-				!$yakklMiscStore ||
-				!$yakklCurrentlySelectedStore?.shortcuts?.address ||
-				updatedTokens.length === 0 ||
-				isCalculatingPortfolio
-			) {
-				return;
-			}
-
-			// Debounce portfolio calculations to prevent rapid successive calls
-			setTimeout(() => {
-				if (isInitialized && !isCalculatingPortfolio) {
-					calculateAndCachePortfolioValue(
-						$yakklCurrentlySelectedStore.shortcuts.address,
-						updatedTokens
-					);
-				}
-			}, 100);
-		});
-
-		return () => {
-			unsubscribeYakklStore();
-		};
-	});
-
-	onMount(async () => {
-		try {
-			log.info('[Card] Component mounting...');
-
-			// Load settings to check membership
-			settings = await getSettings();
-			isProUser = shouldShowProFeatures(settings?.plan?.type || PlanType.BASIC_MEMBER);
-
-			if (browserSvelte) {
-				await browser_ext.runtime.sendMessage({ type: 'clientReady' }); // Safeguard to ensure the client is ready before sending messages
-
-				// Add message listener for YAKKL_ACCOUNT
-				// Come back to this later - this is more cosmetic and not needed for now.
-				// browser_ext.runtime.onMessage.addListener((message: unknown, sender, sendResponse) => {
-				//   log.info('YAKKL_ACCOUNT message received', false, message);
-				//   const typedMessage = message as { type: string; data: YakklAccount };
-				//   if (typedMessage.type === 'YAKKL_ACCOUNT' && typedMessage.data) {
-				//     handleAccounts(typedMessage.data);
-				//     sendResponse({ success: true });
-				//     log.info('YAKKL_ACCOUNT message sent', false, { success: true });
-				//   }
-				//   return true;
-				// });
-
-				startPricingChecks();
-				await updateTokenPrices(); // Initial token price update
-
-				// toastStatus = false;
-				if (!$yakklCurrentlySelectedStore)
-					yakklCurrentlySelectedStore.set(await getYakklCurrentlySelected());
-				// Note: yakklMiscStore will be set during authentication via setMiscStore()
-
-				if ($yakklCurrentlySelectedStore) {
-					const currentlySelected = $yakklCurrentlySelectedStore;
-					currentlySelected.shortcuts.networks = networks;
-
-					currencyLabel = currentlySelected.preferences.currency.code ?? 'USD';
-					currency = new Intl.NumberFormat('en-US', { style: 'currency', currency: currencyLabel });
-					symbolLabel = currentlySelected.shortcuts.symbol ?? 'ETH';
-					chainId = currentlySelected.shortcuts.network.chainId ?? 1;
-
-					const instances = await getInstances();
-					if (instances.length > 0) {
-						wallet = instances[0];
-						provider = instances[1];
-						blockchain = instances[2];
-						tokenService = instances[3];
-
-						if (wallet && provider && blockchain && tokenService) {
-							tokenService.updateTokenBalances(currentlySelected.shortcuts.address);
-						}
-					}
-
-					// These are for the initial load and the intervals take over after this
-					const val = await getBalance(
-						currentlySelected.shortcuts.network.chainId,
-						currentlySelected.shortcuts.address
-					);
-					currentlySelected.shortcuts.quantity = val ?? 0n;
-					checkPricesCallback(); // Simple onetime price update for initial load - NOTE: Do not move this up any higher in the code or it will cause a loop. shortcuts.quantity is used in the updateValuePriceFiat function
-
-					await setYakklCurrentlySelectedStorage(currentlySelected); // This updates the store and local storage
-
-					// Update display immediately
-					updateWithCurrentlySelected();
-
-					if ($yakklCurrentlySelectedStore.shortcuts.quantity) {
-						await updateValuePriceFiat();
-						updateDisplayValues(); // Ensure display values are calculated
-					}
-					// updateUpgradeButton();
-				}
-
-				settings = await getSettings();
-				if (settings) {
-					planType = settings.plan.type as PlanType;
-				}
-			}
-
-			// Initialize reactive effects after a short delay to prevent loops during load
-			initializationTimeout = setTimeout(() => {
-				// Set the previous address to current address to prevent initial trigger
-				if ($yakklCurrentlySelectedStore?.shortcuts?.address) {
-					previousAddress = $yakklCurrentlySelectedStore.shortcuts.address;
-				}
-
-				isInitialized = true;
-				log.debug('[Card] Reactive effects initialized');
-			}, 500) as unknown as number;
-		} catch (e) {
-			log.warn(`onMount: ${e}`);
-		}
-	});
-
-	// Effect to update cache when price changes
-	$effect(() => {
-		if (!isInitialized || !$yakklMiscStore) return;
-
-		const currentPrice = $yakklPricingStore?.price;
-		if (currentPrice && currentPrice > 0) {
-			// Update all cached entries with new price
-			balanceCacheManager.updatePriceForAllEntries(currentPrice);
-			log.debug('[Card] Price changed, updated all cached entries:', false, {
-				newPrice: currentPrice
-			});
-		}
-	});
-
-	async function updateWithCurrentlySelected() {
-		try {
-			const { address, accountName, network, quantity } = $yakklCurrentlySelectedStore.shortcuts;
-
-			addressShow = truncate(address, 6) + address.substring(address.length - 4);
-			name = accountName;
-			nameShow = truncate(accountName, 20);
-			networkLabel = $yakklCurrentlySelectedStore.shortcuts.network.name ?? network.name;
-			assetPriceValue = $yakklPricingStore?.price ?? 0;
-			currencyLabel = $yakklCurrentlySelectedStore.preferences.currency.code ?? 'USD';
-
-			shortcutsValue = EthereumBigNumber.from(quantity) ?? EthereumBigNumber.from(0); // .quantity is the amount of a given token the address holds
-			chainId = network?.chainId ?? 1;
-		} catch (e) {
-			log.warn(e);
-		}
-	}
-
-	onDestroy(async () => {
-		if (initializationTimeout) {
-			clearTimeout(initializationTimeout);
-		}
-		if (updateDebounceTimeout) {
-			clearTimeout(updateDebounceTimeout);
-		}
-		if ($yakklCurrentlySelectedStore) {
-			await setYakklCurrentlySelectedStorage($yakklCurrentlySelectedStore);
-		}
-		stopCheckPrices();
-	});
-
-	function toggleDropdown() {
-		isDropdownOpen = !isDropdownOpen;
-	}
-
-	async function refreshBalanceInBackground() {
-		try {
-			if (!$yakklCurrentlySelectedStore || !wallet || isUpdatingBalance) return;
-
-			isUpdatingBalance = true;
-			const address = $yakklCurrentlySelectedStore.shortcuts.address;
-			const chainId = $yakklCurrentlySelectedStore.shortcuts.network.chainId;
-
-			// Get fresh balance
-			const freshBalance = await getBalance(chainId, address);
-			if (freshBalance && freshBalance !== $yakklCurrentlySelectedStore.shortcuts.quantity) {
-				// Update cache
-				balanceCacheManager.setCachedBalance(address, freshBalance, $yakklPricingStore?.price ?? 0);
-
-				// Update store using .update() method to prevent direct mutation
-				yakklCurrentlySelectedStore.update((current) => ({
-					...current,
-					shortcuts: { ...current.shortcuts, quantity: freshBalance }
-				}));
-
-				// Update display without calling updateValuePriceFiat to prevent loop
-				updateWithCurrentlySelected();
-
-				log.info('[Card] Background balance refresh completed');
-			}
-		} catch (error) {
-			log.warn('[Card] Background balance refresh failed:', false, error);
-			// Don't show errors for background refreshes
-		} finally {
-			isUpdatingBalance = false;
-		}
-	}
-
-	async function refreshPortfolioInBackground() {
-		try {
-			if (!$yakklCurrentlySelectedStore) return;
-
-			const address = $yakklCurrentlySelectedStore.shortcuts.address;
-			isCalculatingPortfolio = true;
-
-			// Get current tokens for this account (from cache or fresh)
-			let accountTokens = accountTokenCacheManager.getCachedTokensForAccount(address);
-
-			if (!accountTokens || accountTokens.length === 0) {
-				// Fall back to current tokens if no cached account-specific tokens
-				accountTokens = tokens;
-			}
-
-			await calculateAndCachePortfolioValue(address, accountTokens);
-		} catch (error) {
-			log.warn('[Card] Background portfolio refresh failed:', false, error);
-			isCalculatingPortfolio = false;
-			portfolioValue = '-----';
-		}
-	}
-
-	async function calculateAndCachePortfolioValue(
-		address: string,
-		tokenList: TokenData[]
-	): Promise<void> {
-		try {
-			isCalculatingPortfolio = true;
-			let totalValue = 0;
-
-			// Calculate total portfolio value
-			for (const token of tokenList) {
-				if (token.balance && token.price?.price) {
-					let balanceNum: number;
-
-					if (typeof token.balance === 'bigint') {
-						// Convert from wei to token units
-						balanceNum = Number(token.balance) / Math.pow(10, token.decimals || 18);
-					} else {
-						balanceNum = Number(token.balance);
-					}
-
-					const tokenValue = balanceNum * token.price.price;
-					totalValue += tokenValue;
-				}
-			}
-
-			// Add native token value (ETH balance)
-			if ($yakklCurrentlySelectedStore?.shortcuts?.quantity && $yakklPricingStore?.price) {
-				const ethValue =
-					parseFloat(formatEther($yakklCurrentlySelectedStore.shortcuts.quantity)) *
-					$yakklPricingStore.price;
-				totalValue += ethValue;
-			}
-
-			// Cache the portfolio value
-			const currencyCode = $yakklCurrentlySelectedStore?.preferences?.currency?.code ?? 'USD';
-			accountTokenCacheManager.setCachedPortfolioValue(address, totalValue, currencyCode);
-
-			// Update display
-			portfolioValue = currency ? currency.format(totalValue) : totalValue.toFixed(2);
-			portfolioCurrency = currencyCode;
-			isCalculatingPortfolio = false;
-
-			log.info('[Card] Portfolio value calculated and cached:', false, {
-				address,
-				value: totalValue,
-				currency: currencyCode,
-				tokenCount: tokenList.length
-			});
-		} catch (error) {
-			log.warn('[Card] Error calculating portfolio value:', false, error);
-			isCalculatingPortfolio = false;
-			portfolioValue = '-----';
-		}
-	}
-
-	async function updateValuePriceFiat(): Promise<void> {
-		try {
-			if (!$yakklCurrentlySelectedStore || isUpdatingBalance) {
-				log.warn('No currently selected account or already updating balance.');
-				resetPriceData();
-				return;
-			}
-
-			isUpdatingBalance = true;
-			let { address, quantity, network } = $yakklCurrentlySelectedStore.shortcuts;
-
-			// Avoid unnecessary balance fetch
-			const qty = await getBalance(network.chainId, address);
-			if ($yakklCurrentlySelectedStore.shortcuts.quantity !== qty) {
-				// Update the quantity field directly, not value to avoid loop
-				yakklCurrentlySelectedStore.update((current) => ({
-					...current,
-					shortcuts: { ...current.shortcuts, quantity: qty ?? 0n }
-				}));
-			}
-
-			// Update cache with new balance and current price
-			if (qty && $yakklPricingStore?.price) {
-				balanceCacheManager.setCachedBalance(address, qty, $yakklPricingStore.price);
-				log.info('[Card] Updated cache with new balance/price:', false, {
-					address,
-					balance: qty.toString(),
-					price: $yakklPricingStore.price
-				});
-			}
-
-			// Update fiat and ether values only if necessary
-			const price = EthereumBigNumber.from($yakklPricingStore?.price ?? 0);
-			if ($yakklCurrentlySelectedStore.shortcuts.quantity !== price) {
-				const etherValue = parseFloat(
-					formatEther($yakklCurrentlySelectedStore.shortcuts.quantity ?? 0n)
-				);
-
-				if (!isNaN(etherValue) && $yakklPricingStore?.price) {
-					const fiatValue = etherValue * $yakklPricingStore.price;
-					const etherValueString = etherValue.toFixed(5);
-					if (formattedEtherValue !== etherValueString) {
-						formattedEtherValue = etherValueString;
-					}
-
-					const newFiatValue = currency ? currency.format(fiatValue) : '0.00';
-					if (valueFiat !== newFiatValue) {
-						valueFiat = newFiatValue;
-					}
-
-					updatePriceDirection($yakklPricingStore.price);
-				} else {
-					resetPriceData();
-				}
-			} else {
-				log.info('updateValuePriceFiat - Value NOT updated.');
-			}
-		} catch (error) {
-			log.warn('Error in updateValuePriceFiat:', false, error);
-			resetPriceData();
-		} finally {
-			isUpdatingBalance = false;
-		}
-	}
-
-	function setDefaultsForZeroAddress() {
-		try {
-			// Dont want to trigger reactivity if the value is zero unless the previous value was something other than 0
-			if (yakklCurrentlySelectedStore && $yakklCurrentlySelectedStore.shortcuts?.quantity !== 0n) {
-				yakklCurrentlySelectedStore.update((current) => ({
-					...current,
-					shortcuts: { ...current.shortcuts, value: EthereumBigNumber.from(0) }
-				}));
-			}
-			resetPriceData();
-		} catch (e) {
-			log.warn(e);
-		}
-	}
-
-	function updatePriceDirection(newPrice: number) {
-		if (prevPrice > newPrice) {
-			direction = 'dn'; // down
-		} else if (prevPrice < newPrice) {
-			direction = 'up'; // up
-		} else {
-			direction = 'fl'; // flat
-		}
-		prevPrice = newPrice;
-	}
-
-	function resetPriceData() {
-		valueFiat = '0.00';
-		formattedEtherValue = '0.00000';
-		direction = 'fl'; // flat
-	}
-
-	// Calculate display values without fetching fresh data (safe for reactive contexts)
-	function updateDisplayValues() {
-		try {
-			if (!$yakklCurrentlySelectedStore || !$yakklPricingStore?.price) {
-				resetPriceData();
-				return;
-			}
-
-			const quantity = $yakklCurrentlySelectedStore.shortcuts.quantity ?? 0n;
-			const etherValue = parseFloat(formatEther(quantity));
-
-			if (!isNaN(etherValue) && $yakklPricingStore?.price) {
-				const fiatValue = etherValue * $yakklPricingStore.price;
-				const etherValueString = etherValue.toFixed(5);
-
-				if (formattedEtherValue !== etherValueString) {
-					formattedEtherValue = etherValueString;
-				}
-
-				const newFiatValue = currency ? currency.format(fiatValue) : '0.00';
-				if (valueFiat !== newFiatValue) {
-					valueFiat = newFiatValue;
-				}
-
-				updatePriceDirection($yakklPricingStore.price);
-			} else {
-				resetPriceData();
-			}
-		} catch (error) {
-			log.warn('Error in updateDisplayValues:', false, error);
-			resetPriceData();
-		}
-	}
-
-	async function handleAccounts(account: YakklAccount): Promise<void> {
-		try {
-			if (!account) {
-				log.warn('Account is not defined.');
-				return;
-			}
-			let updatedCurrentlySelected = $yakklCurrentlySelectedStore;
-
-			if (updatedCurrentlySelected && isEncryptedData(updatedCurrentlySelected.data)) {
-				if (!$yakklMiscStore) {
-					log.warn('Cannot decrypt data: yakklMiscStore is not available');
-					return;
-				}
-				updatedCurrentlySelected.data = (await decryptData(
-					updatedCurrentlySelected.data,
-					$yakklMiscStore
-				)) as CurrentlySelectedData;
-			}
-
-			// Try to get cached balance first, fallback to fresh fetch
-			let balance: bigint;
-			const cached = balanceCacheManager.getCachedBalance(account.address);
-			if (cached) {
-				balance = cached.balance;
-				log.info('[Card] Using cached balance for account selection:', false, {
-					address: account.address,
-					balance: balance.toString()
-				});
-			} else {
-				try {
-					balance = await getBalance(chainId ?? 1, account.address);
-					log.info('[Card] Fetched fresh balance for account selection:', false, {
-						address: account.address,
-						balance: balance.toString()
-					});
-				} catch (error) {
-					log.warn('[Card] Failed to get balance, using 0:', false, error);
-					balance = 0n;
-				}
-			}
-
-			if (!$yakklMiscStore) {
-				log.warn('Cannot encrypt data: yakklMiscStore is not available');
-				return;
-			}
-
-			updatedCurrentlySelected = {
-				...updatedCurrentlySelected,
-				shortcuts: {
-					...updatedCurrentlySelected.shortcuts,
-					accountType: account.accountType,
-					address: account.address,
-					primary: account.primaryAccount,
-					accountName: account.name,
-					quantity: balance ?? EthereumBigNumber.from(0)
-				},
-				data: await encryptData(
-					{
-						...updatedCurrentlySelected?.data,
-						account
-					},
-					$yakklMiscStore
-				)
-			};
-
-			await setYakklCurrentlySelectedStorage(updatedCurrentlySelected);
-
-			// Send state change message for account update
-			if (browserSvelte) {
-				browser_ext.runtime
-					.sendMessage({
-						type: 'YAKKL_STATE_CHANGE',
-						data: {
-							address: account.address,
-							accounts: [account.address]
-						}
-					})
-					.catch((error: Error) => {
-						log.warn('Error sending account change message', true, error);
-					});
-			}
-
-			// Update price and UI
-			await updateWithCurrentlySelected();
-			await updateValuePriceFiat();
-			if (wallet && provider && blockchain && tokenService) {
-				await tokenService.updateTokenBalances($yakklCurrentlySelectedStore.shortcuts.address);
-			}
-
-			// Explicitly close the modal after successful account selection
-			showAccountsModal = false;
-		} catch (error) {
-			log.warn('Error in handleAccounts:', false, error);
-			showAccountsModal = false;
-		}
-	}
-
-	async function handleNetworkTypeChange(net: Network) {
-		try {
-			if ($yakklCurrentlySelectedStore) {
-				isDropdownOpen = false;
-				if (net.chainId === $yakklCurrentlySelectedStore.shortcuts.chainId) {
-					return;
-				}
-
-				const currentlySelected = $yakklCurrentlySelectedStore;
-
-				// Update store using .update() method to prevent direct mutation
-				yakklCurrentlySelectedStore.update((current) => ({
-					...current,
-					shortcuts: {
-						...current.shortcuts,
-						chainId: net.chainId,
-						network: net
-					}
-				}));
-
-				chainId = net.chainId;
-				network = net;
-
-				if (wallet) await wallet.setChainId(chainId);
-
-				direction = 'fl';
-				currentlySelected.shortcuts.symbol = network.symbol;
-				currentlySelected.shortcuts.type = network.type.toString();
-
-				const qty = await getBalance(chainId, currentlySelected.shortcuts.address);
-				currentlySelected.shortcuts.quantity = qty ?? 0n;
-
-				if (!isEncryptedData(currentlySelected.data)) {
-					if ($yakklMiscStore) {
-						const encryptedData = await encryptData(currentlySelected.data, $yakklMiscStore);
-						currentlySelected.data = encryptedData;
-					}
-				}
-
-				await setYakklCurrentlySelectedStorage(currentlySelected);
-				await updateValuePriceFiat();
-				if (wallet && provider && blockchain && tokenService) {
-					tokenService.updateTokenBalances($yakklCurrentlySelectedStore.shortcuts.address);
-				}
-
-				// Send state change message for chain ID update
-				if (browserSvelte) {
-					browser_ext.runtime
-						.sendMessage({
-							type: 'YAKKL_STATE_CHANGE',
-							data: { chainId: net.chainId }
-						})
-						.catch((error: Error) => {
-							log.warn('Error sending chain change message', true, error);
-						});
-				}
-
-				// Close the dropdown
-				isDropdownOpen = false;
-			}
-		} catch (e) {
-			log.warn('[Card] Network change error:', false, e);
-
-			// Use safe error display method
-			showErrorSafely(e);
-
-			// Reset dropdown state on any error
-			isDropdownOpen = false;
-		}
-	}
-
-	async function handleContact() {
-		try {
-			showAccountImportModal = false;
-			updateValuePriceFiat();
-		} catch (e) {
-			log.warn(e);
-		}
-	}
-
-	async function handleToken() {
-		try {
-			showAccountImportModal = false; // ?????????
-			updateValuePriceFiat();
-		} catch (e) {
-			log.warn(e);
-		}
-	}
-
-	async function handleImport() {
-		try {
-			log.info('handleImport - Not implemented');
-		} catch (e) {
-			log.warn(e);
-		}
-	}
-
-	async function handleWatchAccountComplete() {
-		// Reload assets and prices when a watch account is added
-		log.info('Watch account added');
-
-		// Refresh the portfolio calculation
-		if (wallet && provider && blockchain && tokenService) {
-			await tokenService.updateTokenBalances($yakklCurrentlySelectedStore.shortcuts.address);
-		}
-
-		showWatchAccountModal = false;
-	}
-
-	// Gets the ether balance for the given address
-	async function getBalance(chainId: number, address: string): Promise<bigint | null> {
-		try {
-			if (chainId && wallet) {
-				if (wallet.getChainId() !== chainId) {
-					await wallet.setChainId(chainId);
-				}
-				const val = await wallet.getBalance(address);
-
-				// Update cache with fetched balance
-				if (val !== null && $yakklPricingStore?.price) {
-					balanceCacheManager.setCachedBalance(address, val, $yakklPricingStore.price);
-					log.debug('[Card] Updated cache in getBalance:', false, {
-						address,
-						balance: val.toString()
-					});
-				}
-
-				return val;
-			}
-			return null;
-		} catch (e) {
-			log.warn('[Card] Balance fetch error:', false, e);
-
-			// Use safe error display method
-			showErrorSafely(e);
-
-			return null;
-		}
-	}
-
-	function formatEther(value: BigNumberish): string {
-		try {
-			const val = EthereumBigNumber.from(value);
-			// Convert from Wei to Ether and get string representation
-			return val.toEtherString();
-		} catch (e) {
-			log.warn(e);
-			return '0.00000';
-		}
-	}
-
-	// Handle error modal close with extended cooldown
-	function handleErrorClose(): void {
-		error = false;
-		errorValue = '';
-
-		// Set extended cooldown when user manually closes
-		errorCooldown = true;
-		setTimeout(() => {
-			errorCooldown = false;
-		}, 10000); // 10 second cooldown after manual close
-	}
-</script>
-
-<ErrorNoAction bind:show={error} value={errorValue} title="ERROR!" onClose={handleErrorClose} />
-
-{#await $yakklAccountsStore}
-	<p>o_o</p>
-{:then _}
-	{#if $yakklAccountsStore != undefined}
-		<Accounts
-			bind:show={showAccountsModal}
-			onAccountSelect={handleAccounts}
-			onClose={() => (showAccountsModal = false)}
-			className="text-gray-600"
-		/>
-		<Contacts bind:show={showContacts} onContactSelect={handleContact} />
-		<TokensEnhanced bind:show={showTokens} onTokenSelect={handleToken} />
-		<Receive bind:show={showRecv} {address} />
-		<ImportPrivateKey
-			bind:show={showAccountImportModal}
-			onComplete={handleImport}
-			className="text-gray-600 z-[999]"
-		/>
-		<ImportWatchAccount
-			bind:show={showWatchAccountModal}
-			onComplete={handleWatchAccountComplete}
-			onCancel={() => (showWatchAccountModal = false)}
-			className="text-gray-600 z-[999]"
-		/>
-		<Upgrade
-			bind:show={showUpgradeModal}
-			onClose={() => (showUpgradeModal = false)}
-			onCancel={() => (showUpgradeModal = false)}
-		/>
-	{/if}
-{/await}
-
-<div class="visible print:hidden relative top-0 mx-2">
-	<div
-		style="z-index: 4; background-image: url('/images/{card}'); "
-		class="visible print:hidden relative m-2 ml-0 mr-0 h-[261px] rounded-xl"
-	>
-		<div class="grid grid-rows-5 gap-1 h-full">
-			<div class="absolute left-4 bottom-1">
-				<span class="text-gray-100 text-md">Asset Market Price:</span>
-				<span class="ml-2 text-gray-100 text-md">{assetPrice} {currencyLabel}</span>
-			</div>
-
-			<SpeedDial
-				defaultClass="absolute right-1 bottom-1 z-10 bg-primary rounded-full"
-				pill={false}
-				tooltip="none"
-				placement="bottom"
-			>
-				<svg
-					aria-hidden="true"
-					class="w-8 h-8"
-					fill="currentColor"
-					viewBox="0 0 20 20"
-					xmlns="http://www.w3.org/2000/svg"
-					><path
-						d="M6 10a2 2 0 11-4 0 2 2 0 014 0zM12 10a2 2 0 11-4 0 2 2 0 014 0zM16 12a2 2 0 100-4 2 2 0 000 4z"
-					></path></svg
-				>
-				<SpeedDialButton
-					name="Accounts"
-					on:click={() => {
-						showAccountsModal = true;
-					}}
-					class="w-16"
-				>
-					<svg
-						xmlns="http://www.w3.org/2000/svg"
-						viewBox="0 0 20 20"
-						aria-hidden="true"
-						class="w-6 h-6"
-						fill="currentColor"
-					>
-						<path
-							fill-rule="evenodd"
-							d="M6 4.75A.75.75 0 016.75 4h10.5a.75.75 0 010 1.5H6.75A.75.75 0 016 4.75zM6 10a.75.75 0 01.75-.75h10.5a.75.75 0 010 1.5H6.75A.75.75 0 016 10zm0 5.25a.75.75 0 01.75-.75h10.5a.75.75 0 010 1.5H6.75a.75.75 0 01-.75-.75zM1.99 4.75a1 1 0 011-1H3a1 1 0 011 1v.01a1 1 0 01-1 1h-.01a1 1 0 01-1-1v-.01zM1.99 15.25a1 1 0 011-1H3a1 1 0 011 1v.01a1 1 0 01-1 1h-.01a1 1 0 01-1-1v-.01zM1.99 10a1 1 0 011-1H3a1 1 0 011 1v.01a1 1 0 01-1 1h-.01a1 1 0 01-1-1V10z"
-							clip-rule="evenodd"
-						/>
-					</svg>
-				</SpeedDialButton>
-				<SpeedDialButton
-					name="Contacts"
-					on:click={() => {
-						showContacts = true;
-					}}
-					class="w-16"
-				>
-					<svg
-						xmlns="http://www.w3.org/2000/svg"
-						viewBox="0 0 20 20"
-						aria-hidden="true"
-						class="w-6 h-6"
-						fill="currentColor"
-					>
-						<path
-							fill-rule="evenodd"
-							d="M6 4.75A.75.75 0 016.75 4h10.5a.75.75 0 010 1.5H6.75A.75.75 0 016 4.75zM6 10a.75.75 0 01.75-.75h10.5a.75.75 0 010 1.5H6.75A.75.75 0 016 10zm0 5.25a.75.75 0 01.75-.75h10.5a.75.75 0 010 1.5H6.75a.75.75 0 01-.75-.75zM1.99 4.75a1 1 0 011-1H3a1 1 0 011 1v.01a1 1 0 01-1 1h-.01a1 1 0 01-1-1v-.01zM1.99 15.25a1 1 0 011-1H3a1 1 0 011 1v.01a1 1 0 01-1 1h-.01a1 1 0 01-1-1v-.01zM1.99 10a1 1 0 011-1H3a1 1 0 011 1v.01a1 1 0 01-1 1h-.01a1 1 0 01-1-1V10z"
-							clip-rule="evenodd"
-						/>
-					</svg>
-				</SpeedDialButton>
-				<SpeedDialButton
-					name="Tokens"
-					on:click={() => {
-						showTokens = true;
-					}}
-					class="w-16"
-				>
-					<TokensIcon />
-					<!-- <svg
-						xmlns="http://www.w3.org/2000/svg"
-						viewBox="0 0 20 20"
-						aria-hidden="true"
-						class="w-6 h-6"
-						fill="currentColor"
-					>
-						<path
-							stroke-linecap="round"
-							stroke-linejoin="round"
-							d="M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125"
-						/>
-					</svg> -->
-				</SpeedDialButton>
-				<SpeedDialButton
-					name="Receive"
-					on:click={() => {
-						showRecv = true;
-					}}
-					class="w-16"
-				>
-					<svg
-						xmlns="http://www.w3.org/2000/svg"
-						aria-hidden="true"
-						fill="currentColor"
-						viewBox="0 0 24 24"
-						class="w-6 h-6"
-					>
-						<path
-							fill-rule="evenodd"
-							d="M3 4.875C3 3.839 3.84 3 4.875 3h4.5c1.036 0 1.875.84 1.875 1.875v4.5c0 1.036-.84 1.875-1.875 1.875h-4.5A1.875 1.875 0 013 9.375v-4.5zM4.875 4.5a.375.375 0 00-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 00.375-.375v-4.5a.375.375 0 00-.375-.375h-4.5zm7.875.375c0-1.036.84-1.875 1.875-1.875h4.5C20.16 3 21 3.84 21 4.875v4.5c0 1.036-.84 1.875-1.875 1.875h-4.5a1.875 1.875 0 01-1.875-1.875v-4.5zm1.875-.375a.375.375 0 00-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 00.375-.375v-4.5a.375.375 0 00-.375-.375h-4.5zM6 6.75A.75.75 0 016.75 6h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75A.75.75 0 016 7.5v-.75zm9.75 0A.75.75 0 0116.5 6h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75zM3 14.625c0-1.036.84-1.875 1.875-1.875h4.5c1.036 0 1.875.84 1.875 1.875v4.5c0 1.035-.84 1.875-1.875 1.875h-4.5A1.875 1.875 0 013 19.125v-4.5zm1.875-.375a.375.375 0 00-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 00.375-.375v-4.5a.375.375 0 00-.375-.375h-4.5zm7.875-.75a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75zm6 0a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75zM6 16.5a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75zm9.75 0a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75zm-3 3a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75zm6 0a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75z"
-							clip-rule="evenodd"
-						/>
-					</svg>
-				</SpeedDialButton>
-				<SpeedDialButton
-					name="Import Account"
-					on:click={() => {
-						showAccountImportModal = true;
-					}}
-					class="w-16"
-				>
-					<svg
-						xmlns="http://www.w3.org/2000/svg"
-						fill="none"
-						viewBox="0 0 20 20"
-						stroke-width="1.5"
-						stroke="currentColor"
-						class="w-6 h-6"
-					>
-						<path
-							stroke-linecap="round"
-							stroke-linejoin="round"
-							d="M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15M12 9l-3 3m0 0 3 3m-3-3h12.75"
-						/>
-					</svg>
-				</SpeedDialButton>
-				<SpeedDialButton
-					name="Upgrade"
-					on:click={() => {
-						showUpgradeModal = true;
-					}}
-					class="w-16"
-				>
-					<svg
-						xmlns="http://www.w3.org/2000/svg"
-						viewBox="0 0 20 20"
-						aria-hidden="true"
-						class="w-6 h-6"
-						fill="currentColor"
-					>
-						<path
-							fill-rule="evenodd"
-							d="M10 2a.75.75 0 01.75.75v5.59l1.95-2.1a.75.75 0 111.1 1.02l-3.25 3.5a.75.75 0 01-1.1 0L6.2 7.26a.75.75 0 111.1-1.02l1.95 2.1V2.75A.75.75 0 0110 2z"
-							clip-rule="evenodd"
-						/>
-						<path
-							fill-rule="evenodd"
-							d="M10 18a.75.75 0 01-.75-.75v-5.59l-1.95 2.1a.75.75 0 11-1.1-1.02l3.25-3.5a.75.75 0 011.1 0l3.25 3.5a.75.75 0 11-1.1 1.02l-1.95-2.1v5.59a.75.75 0 01-.75.75z"
-							clip-rule="evenodd"
-						/>
-					</svg>
-				</SpeedDialButton>
-				<SpeedDialButton name="Lock/Exit" on:click={() => goto(PATH_LOGOUT)} class="w-16">
-					<svg
-						aria-hidden="true"
-						xmlns="http://www.w3.org/2000/svg"
-						viewBox="0 0 20 20"
-						stroke="currentColor"
-						class="w-6 h-6"
-					>
-						<path
-							fill-rule="evenodd"
-							d="M3 4.25A2.25 2.25 0 015.25 2h5.5A2.25 2.25 0 0113 4.25v2a.75.75 0 01-1.5 0v-2a.75.75 0 00-.75-.75h-5.5a.75.75 0 00-.75.75v11.5c0 .414.336.75.75.75h5.5a.75.75 0 00.75-.75v-2a.75.75 0 011.5 0v2A2.25 2.25 0 0110.75 18h-5.5A2.25 2.25 0 013 15.75V4.25z"
-							clip-rule="evenodd"
-						/>
-						<path
-							fill-rule="evenodd"
-							d="M19 10a.75.75 0 00-.75-.75H8.704l1.048-.943a.75.75 0 10-1.004-1.114l-2.5 2.25a.75.75 0 000 1.114l2.5 2.25a.75.75 0 101.004-1.114l-1.048-.943h9.546A.75.75 0 0019 10z"
-							clip-rule="evenodd"
-						/>
-					</svg>
-				</SpeedDialButton>
-			</SpeedDial>
-
-			<nav
-				{id}
-				class="print:hidden visible relative row-span-1 inset-x-0 navbar navbar-expand-sm p-2 flex items-center w-full justify-between"
-			>
-				<div class="flex justify-between w-full items-center">
-					<span class="text-gray-100 text-center dark:text-white text-4xl ml-2 -mt-6 font-bold">
-						{$yakklCurrentlySelectedStore &&
-							$yakklCurrentlySelectedStore.shortcuts.network.blockchain}
-					</span>
-					{#if showTestNetworks}
-						<span class="flex h-6">
-							<div class="dropdown dropdown-bottom relative">
-								{#if networkLabel.toLowerCase() === 'mainnet'}
-									<!-- svelte-ignore a11y_click_events_have_key_events -->
-									<!-- svelte-ignore a11y_no_noninteractive_element_interactions -->
-									<!-- svelte-ignore a11y_label_has_associated_control -->
-									<button
-										onclick={toggleDropdown}
-										class="w-28 px-3 py-1 bg-red-800/80 text-white font-medium text-xs leading-tight uppercase rounded-full shadow-md hover:bg-red-700 hover:shadow-lg focus:bg-red-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-red-800 active:shadow-lg active:text-white transition duration-150 ease-in-out flex items-center whitespace-nowrap"
-									>
-										LIVE-{networkLabel}
-									</button>
-								{:else}
-									<!-- svelte-ignore a11y_click_events_have_key_events -->
-									<!-- svelte-ignore a11y_no_noninteractive_element_interactions -->
-									<!-- svelte-ignore a11y_label_has_associated_control -->
-									<button
-										onclick={toggleDropdown}
-										class="w-28 px-3 py-1 bg-green-800/80 text-white font-medium text-xs leading-tight uppercase rounded-full shadow-md hover:bg-green-700 hover:shadow-lg focus:bg-green-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-green-800 active:shadow-lg active:text-white transition duration-150 ease-in-out flex items-center whitespace-nowrap"
-									>
-										Test-{networkLabel}
-									</button>
-								{/if}
-								{#if isDropdownOpen}
-									<ul
-										class="absolute top-full left-0 dropdown-content menu bg-opacity-70 text-base z-50 float-left py-2 list-none text-left rounded-lg shadow-lg mt-1 m-0 bg-clip-padding border-none bg-gray-800"
-									>
-										{#each networks as network}
-											<li>
-												<!-- svelte-ignore a11y_click_events_have_key_events -->
-												<!-- svelte-ignore a11y_no_static_element_interactions -->
-												<div
-													role="button"
-													tabindex="0"
-													class="dropdown-item text-sm py-2 px-4 font-normal w-full whitespace-nowrap bg-transparent text-gray-300 hover:bg-gray-500 hover:text-white focus:text-white focus:bg-gray-700"
-													onclick={() => handleNetworkTypeChange(network)}
-												>
-													{#if network.type === NetworkType.MAINNET}
-														LIVE-{network.name}
-													{:else}
-														Testnet-{network.name}
-													{/if}
-												</div>
-											</li>
-										{/each}
-									</ul>
-								{/if}
-							</div>
-						</span>
-					{:else}
-						<span class="flex h-6">
-							<!-- svelte-ignore a11y_label_has_associated_control -->
-							<label
-								class="w-28 px-3 py-1 bg-red-800/80 text-white font-medium text-xs leading-tight uppercase rounded-full shadow-md hover:bg-red-700 hover:shadow-lg focus:bg-red-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-red-800 active:shadow-lg active:text-white transition duration-150 ease-in-out flex items-center whitespace-nowrap"
-							>
-								LIVE-{networkLabel}
-							</label>
-						</span>
-					{/if}
-				</div>
-			</nav>
-
-			<div class="ml-4">
-				<div class="row-span-2 -mt-4">
-					<p class="text-gray-100 dark:text-white text-lg">Account:</p>
-					<p
-						class="text-gray-100 dark:text-white text-lg ml-4 -mt-1"
-						data-bs-toggle="tooltip"
-						data-bs-placement="top"
-						title={name}
-					>
-						Name: <span class="uppercase ml-5">{nameShow}</span>
-					</p>
-					<p
-						class="text-gray-100 dark:text-white text-lg ml-4 -mt-2"
-						data-bs-toggle="tooltip"
-						data-bs-placement="top"
-						title={address}
-					>
-						Number: <span class="ml-1">{addressShow}</span>
-						<Copy target={{ value: address }} />
-					</p>
-				</div>
-				<div
-					class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 opacity-25 -z-10"
-				>
-					{#if symbolLabel}
-						<svg width="60" height="60" fill="none" viewBox="0 0 60 60">
-							<g clip-path="url(#j)">
-								<rect width="60" height="60" rx="30" fill="#987DE8" />
-								<path
-									fill-rule="evenodd"
-									clip-rule="evenodd"
-									d="m15.48 28.367 11.966-19.3c1.174-1.892 3.927-1.892 5.1 0l11.97 19.306a6 6 0 0 1 .9 3.142v.028a6 6 0 0 1-1.154 3.56L33.227 50.208c-1.599 2.188-4.864 2.188-6.461 0L15.733 35.095a6 6 0 0 1-1.154-3.538v-.029a6 6 0 0 1 .9-3.161Z"
-									fill="#fff"
-								/>
-								<path
-									d="M30.84 10.112a.992.992 0 0 0-.844-.464V24.5l12.598 5.53c.081-.466-.001-.963-.27-1.398L30.84 10.112Z"
-									fill="#643CDD"
-								/>
-								<path
-									d="M29.996 9.648a.991.991 0 0 0-.845.465l-11.489 18.53a1.991 1.991 0 0 0-.264 1.387l12.598-5.53V9.648Z"
-									fill="#BDADEB"
-								/>
-								<path
-									d="M29.996 50.544a.994.994 0 0 0 .808-.41l11.235-15.38c.307-.434-.193-.988-.658-.72L31.49 39.71a2.998 2.998 0 0 1-1.494.398v10.437Z"
-									fill="#643CDD"
-								/>
-								<path
-									d="M17.966 34.762 29.19 50.134c.2.274.503.41.807.41V40.108a2.998 2.998 0 0 1-1.493-.398l-9.884-5.676c-.468-.27-.971.292-.653.728Z"
-									fill="#BDADEB"
-								/>
-								<path
-									d="M42.594 30.03 29.996 24.5v13.138a3 3 0 0 0 1.495-.399l10.149-5.83c.525-.31.856-.823.954-1.38Z"
-									fill="#401AB3"
-								/>
-								<path
-									d="M29.996 37.638V24.462l-12.598 5.566c.098.564.437 1.083.974 1.392l10.13 5.82c.462.265.978.398 1.494.398Z"
-									fill="#7C5AE2"
-								/>
-							</g>
-							<rect class="help-img-highlight" x=".5" y=".5" width="59" height="59" rx="29.5" />
-							<defs>
-								<clipPath id="j"><rect width="60" height="60" rx="30" fill="#fff" /></clipPath>
-							</defs>
-						</svg>
-					{/if}
-				</div>
-
-				<div class="flex text-xl justify-center mt-4 text-gray-100 dark:text-white row-span-1">
-					<span
-						data-bs-toggle="tooltip"
-						data-bs-placement="top"
-						title={shortcutsValue.toEtherString()}
-					>
-						<ProtectedValue value={formattedEtherValue} placeholder="*******" />
-					</span>
-					<span class="ml-2">{symbolLabel}</span>
-					<div class="relative flex items-center gap-2">
-						<EyeIcon />
-						
-						<!-- Manual Refresh Button (Pro users only) -->
-						{#if isProUser}
-							<SimpleTooltip content={refreshCooldown > 0 ? `Wait ${refreshCooldown}s before next refresh` : canManualRefresh ? "Manual refresh (Pro feature)" : "Refreshing..."}>
-								<button
-									onclick={handleManualRefresh}
-									disabled={!canManualRefresh}
-									class="p-1 text-white/80 hover:text-white hover:bg-white/10 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
-								>
-									{#if isManualRefreshing}
-										<div class="animate-spin w-4 h-4 border border-white border-t-transparent rounded-full"></div>
-									{:else if refreshCooldown > 0}
-										<span class="text-xs font-medium">{refreshCooldown}</span>
-									{:else}
-										<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
-											<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
-										</svg>
-									{/if}
-								</button>
-							</SimpleTooltip>
-						{/if}
-					</div>
-				</div>
-
-				<div
-					class="flex justify-center text-lg text-gray-100 dark:text-white -mt-1 row-span-1 -ml-[2.3rem]"
-				>
-					<span>
-						{#if direction === 'up'}
-							<svg
-								xmlns="http://www.w3.org/2000/svg"
-								viewBox="0 0 24 24"
-								class="w-6 h-6 fill-green-500 font-bold"
-							>
-								<path
-									fill-rule="evenodd"
-									d="M11.47 2.47a.75.75 0 011.06 0l3.75 3.75a.75.75 0 01-1.06 1.06l-2.47-2.47V21a.75.75 0 01-1.5 0V4.81L8.78 7.28a.75.75 0 01-1.06-1.06l3.75-3.75z"
-									clip-rule="evenodd"
-								/>
-							</svg>
-						{:else if direction === 'dn'}
-							<svg
-								xmlns="http://www.w3.org/2000/svg"
-								viewBox="0 0 24 24"
-								class="w-6 h-6 fill-red-500 font-bold"
-							>
-								<path
-									fill-rule="evenodd"
-									d="M12 2.25a.75.75 0 01.75.75v16.19l2.47-2.47a.75.75 0 111.06 1.06l-3.75 3.75a.75.75 0 01-1.06 0l-3.75-3.75a.75.75 0 111.06-1.06l2.47 2.47V3a.75.75 0 01.75-.75z"
-									clip-rule="evenodd"
-								/>
-							</svg>
-						{/if}
-					</span>
-					<ProtectedValue value={valueFiat} placeholder="*******" />
-					<span class="ml-2">{currencyLabel}</span>
-				</div>
-
-				<div
-					class="flex justify-center text-lg text-gray-100 dark:text-white mt-2 row-span-1"
-					style="max-width: 300px; overflow-x: auto; white-space: nowrap;"
-				>
-					<span>Account Portfolio: </span>
-					{#if isCalculatingPortfolio}
-						<span class="ml-2">
-							<SkeletonBalance className="inline-block" showLabel={false} />
-						</span>
-					{:else if portfolioValue === '-----' || portfolioValue === '$0.00'}
-						<span class="ml-2 text-gray-400">-----</span>
-					{:else}
-						<span class="ml-2"><ProtectedValue value={portfolioValue} placeholder="*******" /></span
-						>
-					{/if}
-				</div>
-
-				<!-- Enhanced Portfolio Total with Rollover -->
-				<div class="flex justify-center mt-3 row-span-1">
-					<PortfolioTotal className="transform scale-90" currency={currencyLabel || 'USD'} />
-				</div>
-			</div>
-		</div>
-	</div>
-
-	<!-- Card stack look -->
-	<div
-		style="z-index: 1;"
-		class="grid right-[18.5px] left-[18.5px] bottom-[5px] h-[10px] absolute rounded bg-secondary text-accent-content place-content-center"
-	></div>
-	<div
-		style="z-index: 0;"
-		class="grid right-[27px] left-[27px] bottom-[2.5px] h-[10px] absolute rounded bg-accent text-secondary-content place-content-center"
-	></div>
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/Chatbot.svelte b/packages/yakkl-wallet/src/lib/components/v1/Chatbot.svelte
deleted file mode 100644
index 60be9e7..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/Chatbot.svelte
+++ /dev/null
@@ -1,259 +0,0 @@
-<script lang="ts">
-	import { browserSvelte } from '$lib/common/environment';
-	// import { browser as browserSvelte } from '$app/environment';
-	import { onDestroy, onMount } from 'svelte';
-	import {
-		yakklChatsStore,
-		getYakklChats,
-		setYakklChatsStorage,
-		yakklGPTRunningStore,
-		yakklConnectionStore,
-		yakklGPTKeyStore
-	} from '$lib/common/stores';
-	import { autoscroll } from '$lib/utilities';
-	import { Avatar, Spinner } from 'flowbite-svelte';
-	import { handleOpenInTab } from '$lib/utilities/utilities';
-	import ErrorNoAction from '$lib/components/ErrorNoAction.svelte';
-	import { dateString, formatTimestamp } from '$lib/common/datetime';
-	import { fetchGPT4Response } from '$lib/api/api-gpt.js';
-	import { apiKeyFetch } from '$lib/api/apis';
-	import ClipboardJS from 'clipboard';
-	import { DEFAULT_PERSONA, VERSION, type YakklChat } from '$lib/common';
-	import { log } from '$lib/managers/Logger';
-
-	let messages = $state<YakklChat[]>([]);
-	let error = $state(false);
-	let errorValue = $state('An error has occurred. Please try again.');
-	let clipboard;
-	let showClearWarning = $state(false);
-
-	$yakklGPTRunningStore = false;
-
-	if (browserSvelte) {
-		try {
-			clipboard = new ClipboardJS('.clip');
-		} catch (e) {
-			log.error(e);
-		}
-	}
-
-	onMount(async () => {
-		try {
-			messages.length = 0; // Clear existing messages
-
-			if ($yakklGPTKeyStore === null || $yakklGPTKeyStore === undefined) {
-				await apiKeyFetch(
-					import.meta.env.VITE_GPT_API_KEY_BACKEND_URL,
-					import.meta.env.VITE_GPT_API_KEY_BACKEND
-				).then((results: any) => {
-					if (results) {
-						$yakklGPTKeyStore = results;
-					} else {
-						throw 'Error loading auth.';
-					}
-				});
-			}
-
-			const loadedMessages = await getYakklChats();
-
-			// Ensure we have an array and add messages one by one
-			if (Array.isArray(loadedMessages)) {
-				loadedMessages.forEach((msg) => {
-					if (msg && typeof msg === 'object') {
-						messages.push(msg);
-					}
-				});
-			}
-		} catch (e) {
-			log.error('Error in onMount:', false, e);
-			errorValue = 'Error loading key or chat history. ' + e;
-			error = true;
-		}
-	});
-
-	onDestroy(async () => {
-		await storeChats();
-	});
-
-	async function storeChats() {
-		try {
-			// Create a clean array from the messages state
-			const messageArray = Array.isArray(messages) ? [...messages] : [];
-
-			// Ensure each message is a proper object before storing
-			const cleanMessages = messageArray.map((msg) => ({
-				text: msg.text || '',
-				sender: msg.sender || '',
-				timestamp: msg.timestamp || Date.now().toString(),
-				usage: msg.usage || {},
-				id: msg.id || '',
-				persona: msg.persona || DEFAULT_PERSONA,
-				version: msg.version || VERSION,
-				createDate: msg.createDate || dateString(),
-				updateDate: msg.updateDate || dateString()
-			}));
-
-			// Update the store first
-			$yakklChatsStore = cleanMessages;
-
-			// Then store in localStorage
-			await setYakklChatsStorage(cleanMessages);
-		} catch (e) {
-			log.error('Error storing chats:', false, e);
-			throw e; // Rethrow if you want to handle it in the calling function
-		}
-	}
-
-	export async function handleSendMessage(input: string) {
-		if (input.trim() === '') return;
-
-		let response = null;
-		let dateNow = dateString();
-
-		try {
-			if (!$yakklConnectionStore) {
-				throw 'Warning. Your Internet connection appears to be down. Try again later.';
-			}
-
-			$yakklGPTRunningStore = true;
-
-			const newUserMessage = {
-				text: input,
-				sender: 'user',
-				timestamp: Date.now().toString(),
-				usage: {},
-				id: '',
-				version: VERSION,
-				createDate: dateNow,
-				updateDate: dateNow
-			};
-
-			messages.push(newUserMessage);
-
-			response = await fetchGPT4Response(input);
-
-			let formattedResponse = response?.content?.replace(/[\n]+/g, '<br/><br/>');
-
-			const newBotMessage = {
-				text: formattedResponse ? formattedResponse : '',
-				sender: 'yak',
-				timestamp: Date.now().toString(),
-				usage: response?.usage,
-				id: '',
-				version: VERSION,
-				createDate: dateNow,
-				updateDate: dateNow
-			};
-
-			messages.push(newBotMessage);
-
-			$yakklChatsStore = [...messages];
-			await storeChats();
-		} catch (e: any) {
-			errorValue = `An error occurred: ${e?.message || e}`;
-			error = true;
-		} finally {
-			$yakklGPTRunningStore = false;
-		}
-	}
-
-	async function clearMessages() {
-		try {
-			messages.length = 0; // This clears the array while maintaining reactivity
-			$yakklChatsStore = [];
-			await setYakklChatsStorage([]);
-			showClearWarning = false;
-		} catch (e) {
-			errorValue = 'Error clearing messages. ' + e;
-			error = true;
-		}
-	}
-
-	function handlePrint() {
-		// Implement print functionality
-		log.error('Print functionality not implemented yet');
-	}
-</script>
-
-<div class="flex flex-col h-full">
-	<ErrorNoAction bind:show={error} value={errorValue} title="ERROR!" />
-
-	<div class="grid grid-cols-2 gap-4 mb-4 px-2">
-		<button class="btn btn-sm btn-outline w-full" onclick={handlePrint}>
-			Print conversation
-		</button>
-		<button
-			class="btn btn-sm btn-outline btn-error w-full"
-			onclick={() => (showClearWarning = true)}
-		>
-			Clear messages
-		</button>
-		<button
-			class="btn btn-sm btn-primary col-span-2 w-full"
-			onclick={() =>
-				handleOpenInTab(
-					'https://yakkl.com/university/support?utm_source=yakkl&utm_medium=extension&utm_campaign=yakkl_gpt&utm_content=knowledge_base&utm_term=extension'
-				)}
-		>
-			YAKKL Knowledge base
-		</button>
-	</div>
-
-	<div
-		class="flex-grow overflow-y-auto bg-gray-100 p-4 rounded-lg border border-gray-300"
-		use:autoscroll
-	>
-		{#if messages}
-			<pre class="hidden">{JSON.stringify(messages, null, 2)}</pre>
-			<!-- Your existing each block -->
-			{#each messages as message, i (i)}
-				<div class="mb-4 flex {message.sender === 'user' ? 'justify-end' : 'justify-start'}">
-					<div class="flex items-start max-w-[70%]">
-						{#if message.sender !== 'user'}
-							<img
-								src="/images/bot-avatar.png"
-								alt="Bot avatar"
-								class="w-8 h-8 rounded-full mr-2"
-							/>
-						{/if}
-						<div
-							class="{message.sender === 'user'
-								? 'bg-blue-500 text-white'
-								: 'bg-gray-300 text-gray-700'} rounded-lg p-3"
-						>
-							<p>{@html message.text}</p>
-							<div
-								class="text-xs mt-1 {message.sender === 'user' ? 'text-blue-200' : 'text-gray-700'}"
-							>
-								{formatTimestamp(message.timestamp)}
-							</div>
-						</div>
-						{#if message.sender === 'user'}
-							<Avatar class="w-8 h-8 rounded-full ml-2" />
-						{/if}
-					</div>
-				</div>
-			{/each}
-		{/if}
-		{#if $yakklGPTRunningStore}
-			<div class="flex justify-center items-center">
-				<Spinner color="purple" size={8} />
-			</div>
-		{/if}
-	</div>
-</div>
-
-{#if showClearWarning}
-	<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[100]">
-		<div class="bg-white p-6 rounded-lg shadow-xl">
-			<h3 class="text-lg font-bold mb-4">Clear all messages?</h3>
-			<p class="mb-4">Are you sure you want to clear all messages? This action cannot be undone.</p>
-			<div class="flex justify-end">
-				<button class="btn btn-sm btn-outline mr-2" onclick={() => (showClearWarning = false)}
-					>Cancel</button
-				>
-				<button class="btn btn-sm btn-error" onclick={clearMessages}>Clear</button>
-			</div>
-		</div>
-	</div>
-{/if}
diff --git a/packages/yakkl-wallet/src/lib/components/v1/ChatbotModal.svelte b/packages/yakkl-wallet/src/lib/components/v1/ChatbotModal.svelte
deleted file mode 100644
index 2b644a3..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/ChatbotModal.svelte
+++ /dev/null
@@ -1,49 +0,0 @@
-<script lang="ts">
-	import Modal from './Modal.svelte';
-	import Chatbot from './Chatbot.svelte';
-
-	interface Props {
-		show?: boolean;
-	}
-
-	let { show = $bindable(false) }: Props = $props();
-
-	let input = $state('');
-	let chatbotComponent: Chatbot = $state();
-
-	function sendMessage() {
-		if (input.trim() !== '') {
-			chatbotComponent.handleSendMessage(input);
-			input = '';
-		}
-	}
-</script>
-
-<Modal
-	bind:show
-	title="YAKKL AI (LIMITED preview)"
-	className="z-[999] w-[100%] h-[90vh] max-w-none"
->
-	<Chatbot bind:this={chatbotComponent} />
-
-	{#snippet footer()}
-		<div class="flex w-full items-center">
-			<textarea
-				bind:value={input}
-				class="flex-grow rounded-l-lg textarea textarea-bordered resize-none h-20 bg-gray-200 text-gray-950"
-				placeholder="Type your question..."
-				rows="3"
-				onkeydown={(e) => {
-					if (e.key === 'Enter' && !e.shiftKey) {
-						e.preventDefault();
-						sendMessage();
-					}
-				}}
-			></textarea>
-			<button class="btn btn-primary rounded-r-lg h-20" onclick={sendMessage}>Send</button>
-		</div>
-		<p class="text-xs text-gray-500 mt-2">
-			Powered by OpenAI and/or Claude. Limited preview w/restrictions. Use with caution.
-		</p>
-	{/snippet}
-</Modal>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/ComingSoon.svelte b/packages/yakkl-wallet/src/lib/components/v1/ComingSoon.svelte
deleted file mode 100644
index 31e4c6b..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/ComingSoon.svelte
+++ /dev/null
@@ -1,30 +0,0 @@
-<script lang="ts">
-	//@ts-nocheck
-	// Confetti needs to be more typescript compliant
-
-	interface Props {
-		// import { Confetti } from "svelte-confetti";
-		show?: boolean;
-		value?: string;
-		title?: string;
-	}
-
-	let {
-		show = $bindable(false),
-		value = 'Get ready - coming soon!',
-		title = 'YAY!'
-	}: Props = $props();
-</script>
-
-<div class="modal" class:modal-open={show}>
-	<div class="modal-box relative justify-center text-center">
-		{#if show}
-			<!-- <Confetti duration=3000 iterationCount=2 amount=100 x={[-0.5, 0.5]} y={[-0.5, -0.5]} delay={[0, 1500]} /> -->
-		{/if}
-		<h3 class="text-lg font-bold">{title}</h3>
-		<p class="py-4">{value}</p>
-		<div class="modal-action">
-			<button class="btn" onclick={() => (show = false)}>Close</button>
-		</div>
-	</div>
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/Confirmation.svelte b/packages/yakkl-wallet/src/lib/components/v1/Confirmation.svelte
deleted file mode 100644
index 21ac3d3..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/Confirmation.svelte
+++ /dev/null
@@ -1,56 +0,0 @@
-<!-- Confirmation.svelte -->
-<script lang="ts">
-	import Modal from './Modal.svelte';
-
-	interface Props {
-		show: boolean;
-		title?: string;
-		message?: string;
-		rejectText?: string;
-		confirmText?: string;
-		className?: string;
-		onConfirm?: () => void;
-		onCancel?: () => void;
-	}
-
-	let {
-		show = $bindable(false),
-		title = 'Confirm',
-		message = 'Are you sure you want to continue?',
-		rejectText = 'Cancel',
-		confirmText = 'Confirm',
-		className = 'z-[999]',
-		onConfirm = () => {},
-		onCancel = () => {
-			show = false;
-		}
-	}: Props = $props();
-
-	function handleConfirm() {
-		onConfirm();
-		show = false; // Ensure modal closes after confirm
-	}
-
-	function handleCancel() {
-		onCancel();
-		show = false; // Ensure modal closes after cancel
-	}
-</script>
-
-<Modal bind:show {title} {className}>
-	<div class="p-6">
-		<p class="text-sm text-gray-500">{message}</p>
-		<div class="mt-4 flex justify-end">
-			<button
-				type="button"
-				class="rounded-md border border-gray-300 bg-white py-2 px-4 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"
-				onclick={handleCancel}>{rejectText}</button
-			>
-			<button
-				type="button"
-				class="ml-2 rounded-md border border-transparent bg-red-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2"
-				onclick={handleConfirm}>{confirmText}</button
-			>
-		</div>
-	</div>
-</Modal>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/ConnectWallet.svelte b/packages/yakkl-wallet/src/lib/components/v1/ConnectWallet.svelte
deleted file mode 100644
index 9b226b7..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/ConnectWallet.svelte
+++ /dev/null
@@ -1,31 +0,0 @@
-<script lang="ts">
-	import { ethers as ethersv6 } from 'ethers-v6';
-
-	async function connectWallet() {
-		if (typeof window.ethereum !== 'undefined') {
-			try {
-				//@ts-ignore
-				const accounts = await window.ethereum.request({
-					method: 'eth_requestAccounts'
-				});
-
-				if (accounts.length > 0) {
-					console.log('Connected wallet address:', accounts[0]);
-					// @ts-ignore
-					const provider = new ethersv6.BrowserProvider(window.ethereum);
-					const signer = await provider.getSigner();
-					console.log('Signer:', signer);
-				}
-			} catch (err) {
-				console.log('Failed to connect wallet:', err);
-			}
-		} else {
-			alert(
-				'Ethereum is not supported in your browser. Please install MetaMask or another compatible wallet.'
-			);
-		}
-	}
-</script>
-
-<!-- add classes -->
-<button onclick={connectWallet}>Connect Wallet</button>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/ContactForm.svelte b/packages/yakkl-wallet/src/lib/components/v1/ContactForm.svelte
deleted file mode 100644
index 40390f5..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/ContactForm.svelte
+++ /dev/null
@@ -1,251 +0,0 @@
-<!-- ContactForm.svelte -->
-<script lang="ts">
-	import { createForm } from 'svelte-forms-lib';
-	import * as yup from 'yup';
-	import { debug_log, type YakklContact } from '$lib/common';
-	import Modal from './Modal.svelte';
-	import { dateString } from '$lib/common/datetime';
-	import { onMount } from 'svelte';
-	import { yakklCurrentlySelectedStore, yakklContactsStore } from '$lib/common/stores';
-	import WalletManager from '$lib/managers/WalletManager';
-	import type { Wallet } from '$lib/managers/Wallet';
-	import { VERSION } from '$lib/common/constants';
-	import { log } from '$lib/managers/Logger';
-
-	interface Props {
-		// import { Input } from './ui/input';
-		show?: boolean;
-		contact?: YakklContact | null;
-		className?: string;
-		onSubmit?: (contact: YakklContact) => void;
-	}
-
-	let {
-		show = $bindable(false),
-		contact = null,
-		className = 'z-[999]',
-		onSubmit = () => {}
-	}: Props = $props();
-
-	const blockchains = ['Ethereum', 'Base', 'Optimism', 'Bitcoin'];
-	let wallet: Wallet;
-	let currentlySelected;
-	let addressType = 'EOA';
-
-	const { form, errors, handleChange, handleSubmit, updateInitialValues } = createForm({
-		initialValues: {
-			blockchain: 'Ethereum',
-			name: '',
-			address: '',
-			alias: '',
-			note: ''
-		},
-		validationSchema: yup.object().shape({
-			blockchain: yup.string().required('Please select a blockchain'),
-			name: yup.string().required('Please enter a contact name'),
-			address: yup.string().required('Please enter a contact address'),
-			alias: yup.string().optional(),
-			note: yup.string().optional()
-		}),
-		onSubmit: async (values) => {
-			try {
-				const verified = await verifyContact(
-					values.name,
-					values.address,
-					values.alias ? values.alias : '',
-					values.note ? values.note : ''
-				);
-				if (verified) {
-					const updatedContact: YakklContact = contact
-						? {
-								...contact,
-								...values,
-								addressType: addressType,
-								version: $yakklCurrentlySelectedStore!.version ?? VERSION,
-								updateDate: dateString()
-							}
-						: {
-								id: crypto.randomUUID(),
-								...values,
-								addressType: addressType,
-								version: $yakklCurrentlySelectedStore!.version ?? VERSION,
-								createDate: dateString(),
-								updateDate: dateString()
-							};
-					onSubmit(updatedContact);
-					show = false;
-				} else {
-					alert(
-						'Unable to verify contact before processing. There could be a duplicate contact or invalid address.'
-					);
-				}
-			} catch (error) {
-				log.error('Error processing contact:', false, error);
-			}
-		}
-	});
-
-	onMount(async () => {
-		currentlySelected = $yakklCurrentlySelectedStore;
-		wallet = WalletManager.getInstance(
-			['Alchemy'],
-			['Ethereum'],
-			currentlySelected!.shortcuts.chainId ?? 1,
-			import.meta.env.VITE_ALCHEMY_API_KEY_PROD
-		);
-	});
-
-	async function verifyContact(fname: string, faddress: string, falias: string, fnote: string) {
-		let resolvedAddr = null;
-		const blockchain = wallet.getBlockchain();
-
-		const isValid = blockchain.isAddress(faddress);
-		if (!isValid) {
-			return false;
-		}
-
-		const isSmartContract =
-			blockchain.isSmartContractSupported() && (await blockchain.isSmartContract(faddress));
-		addressType = isSmartContract ? 'SC' : 'EOA';
-
-		// Check for duplicates
-		const contacts = $yakklContactsStore;
-		const isDuplicate = contacts.some((c) => c.name === fname || c.address === faddress); // alias can be blank so not checking for duplicates
-		if (isDuplicate && !contact) {
-			return false;
-		}
-
-		return true;
-	}
-
-	function resetForm() {
-		updateInitialValues({
-			blockchain: 'Ethereum',
-			name: '',
-			address: '',
-			alias: '',
-			note: ''
-		});
-	}
-
-	$effect(() => {
-		if (contact) {
-			updateInitialValues({
-				blockchain: contact.blockchain,
-				name: contact.name,
-				address: contact.address,
-				alias: contact.alias || '',
-				note: contact.note || ''
-			});
-		} else {
-			resetForm();
-		}
-	});
-</script>
-
-<Modal bind:show title={contact ? 'Edit Contact' : 'Add Contact'} {className}>
-	<form onsubmit={handleSubmit} class="space-y-4 p-6">
-		<div>
-			<label for="blockchain" class="block text-sm font-medium text-gray-700 dark:text-gray-200"
-				>Blockchain</label
-			>
-			<select
-				id="blockchain"
-				class="mt-1 block w-full rounded-md border-gray-300 py-2 pl-3 pr-10 text-base focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm text-gray-800"
-				bind:value={$form.blockchain}
-				onchange={handleChange}
-			>
-				{#each blockchains as blockchain}
-					<option value={blockchain}>{blockchain}</option>
-				{/each}
-			</select>
-			{#if $errors.blockchain}
-				<p class="mt-2 text-sm text-red-600">{$errors.blockchain}</p>
-			{/if}
-		</div>
-
-		<div>
-			<label for="name" class="block text-sm font-medium text-gray-700 dark:text-gray-200"
-				>Name</label
-			>
-			<input
-				type="text"
-				id="name"
-				class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm text-gray-800"
-				bind:value={$form.name}
-				onchange={handleChange}
-			/>
-			{#if $errors.name}
-				<p class="mt-2 text-sm text-red-600">{$errors.name}</p>
-			{/if}
-		</div>
-
-		<div>
-			<label for="address" class="block text-sm font-medium text-gray-700 dark:text-gray-200"
-				>Address</label
-			>
-			<input
-				type="text"
-				id="address"
-				class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focusring:indigo-500 sm:text-sm text-gray-800"
-				bind:value={$form.address}
-				onchange={handleChange}
-			/>
-			{#if $errors.address}
-				<p class="mt-2 text-sm text-red-600">{$errors.address}</p>
-			{/if}
-		</div>
-
-		<div>
-			<label for="alias" class="block text-sm font-medium text-gray-700 dark:text-gray-200"
-				>Alias</label
-			>
-			<input
-				type="text"
-				id="alias"
-				class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm text-gray-800"
-				bind:value={$form.alias}
-				onchange={handleChange}
-			/>
-			{#if $errors.alias}
-				<p class="mt-2 text-sm text-red-600">{$errors.alias}</p>
-			{/if}
-		</div>
-
-		<div>
-			<label for="note" class="block text-sm font-medium medium text-gray-700 dark:text-gray-200"
-				>Note</label
-			>
-			<textarea
-				id="note"
-				rows="3"
-				class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border:indigo-500 focus:ring-indigo-500 sm: text-sm text-gray-800"
-				bind:value={$form.note}
-				onchange={handleChange}
-			></textarea>
-			{#if $errors.note}
-				<p class="mt-2 text-sm text-red-600">{$errors.note}</p>
-			{/if}
-		</div>
-
-		<div class="pt-5">
-			<div class="flex justify-end space-x-4">
-				<button
-					type="button"
-					class="rounded-md border border-gray-300 bg-white py-2 px-4 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"
-					onclick={() => (show = false)}>Cancel</button
-				>
-				<button
-					type="button"
-					class="rounded-md border border-gray-300 bg-white py-2 px-4 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"
-					onclick={resetForm}>Reset</button
-				>
-				<button
-					type="submit"
-					class="rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"
-					>Save</button
-				>
-			</div>
-		</div>
-	</form>
-</Modal>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/ContactList.svelte b/packages/yakkl-wallet/src/lib/components/v1/ContactList.svelte
deleted file mode 100644
index 8f53aac..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/ContactList.svelte
+++ /dev/null
@@ -1,172 +0,0 @@
-<!-- ContactList.svelte -->
-<script lang="ts">
-	import type { YakklContact } from '$lib/common';
-	import ContactForm from './ContactForm.svelte';
-	import Confirmation from './Confirmation.svelte';
-	import EthereumIcon from '$lib/components/icons/EthereumIcon.svelte';
-	import BaseIcon from '$lib/components/icons/BaseIcon.svelte';
-	import OptimismIcon from '$lib/components/icons/OptimismIcon.svelte';
-	import BitcoinIcon from '$lib/components/icons/BitcoinIcon.svelte';
-	import EditControls from './EditControls.svelte';
-
-	interface Props {
-		contacts?: YakklContact[];
-		onContactSelect?: (contact: YakklContact) => void;
-		onContactUpdate?: (contact: YakklContact) => void;
-		onContactDelete?: (contact: YakklContact) => void;
-	}
-
-	let {
-		contacts = [],
-		onContactSelect = () => {},
-		onContactUpdate = () => {},
-		onContactDelete = () => {}
-	}: Props = $props();
-
-	let selectedContact: YakklContact | null = $state(null);
-	let showEditModal = $state(false);
-	let showDeleteModal = $state(false);
-
-	function handleEdit(contact: YakklContact) {
-		selectedContact = contact;
-		showEditModal = true;
-	}
-
-	function handleDelete(contact: YakklContact) {
-		selectedContact = contact;
-		showDeleteModal = true;
-	}
-
-	function handleCopy(contact: YakklContact) {
-		navigator.clipboard.writeText(contact.address);
-	}
-
-	function confirmDelete() {
-		if (selectedContact) {
-			onContactDelete(selectedContact);
-			showDeleteModal = false;
-			selectedContact = null;
-		}
-	}
-</script>
-
-<ul class="overflow-hidden">
-	{#each contacts as contact}
-		<li class="mb-3 relative overflow-hidden">
-			<button
-				class="w-full flex items-start rounded-lg p-3 transition-colors duration-200 overflow-hidden {contact.blockchain === 'Ethereum'
-					? 'bg-indigo-50 hover:bg-indigo-100 border border-indigo-200'
-					: contact.blockchain === 'Base'
-						? 'bg-blue-50 hover:bg-blue-100 border border-blue-200'
-						: contact.blockchain === 'Optimism'
-							? 'bg-red-50 hover:bg-red-100 border border-red-200'
-							: contact.blockchain === 'Bitcoin'
-								? 'bg-orange-50 hover:bg-orange-100 border border-orange-200'
-								: 'bg-gray-50 hover:bg-gray-100 border border-gray-200'}"
-				onclick={() => onContactSelect(contact)}
-			>
-				<div
-					class="w-6 h-6 flex items-center justify-center rounded-full {contact.blockchain === 'Ethereum'
-						? 'bg-indigo-500'
-						: contact.blockchain === 'Base'
-							? 'bg-blue-500'
-							: contact.blockchain === 'Optimism'
-								? 'bg-red-500'
-								: contact.blockchain === 'Bitcoin'
-									? 'bg-orange-500'
-									: 'bg-gray-500'} text-white mr-3 shrink-0"
-				>
-					{#if contact.blockchain === 'Ethereum'}
-						<EthereumIcon className="h-4 w-4" />
-					{:else if contact.blockchain === 'Base'}
-						<BaseIcon className="h-4 w-4" />
-					{:else if contact.blockchain === 'Optimism'}
-						<OptimismIcon className="h-4 w-4" />
-					{:else if contact.blockchain === 'Bitcoin'}
-						<BitcoinIcon className="h-4 w-4" />
-					{:else}
-						<svg
-							xmlns="http://www.w3.org/2000/svg"
-							class="w-3 h-3"
-							viewBox="0 0 20 20"
-							fill="currentColor"
-						>
-							<path
-								fill-rule="evenodd"
-								d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"
-								clip-rule="evenodd"
-							/>
-						</svg>
-					{/if}
-				</div>
-				<div class="flex-1 min-w-0 overflow-hidden">
-					<div class="flex items-center justify-between mb-1">
-						<div class="flex items-center space-x-2">
-							<h3 class="text-sm font-semibold text-gray-800">
-								{contact.blockchain?.toUpperCase() || 'CONTACT'}
-							</h3>
-							<span class="text-xs px-2 py-1 rounded-full {contact.blockchain === 'Ethereum'
-								? 'bg-indigo-100 text-indigo-700'
-								: contact.blockchain === 'Base'
-									? 'bg-blue-100 text-blue-700'
-									: contact.blockchain === 'Optimism'
-										? 'bg-red-100 text-red-700'
-										: contact.blockchain === 'Bitcoin'
-											? 'bg-orange-100 text-orange-700'
-											: 'bg-gray-100 text-gray-700'}">
-								{contact.blockchain || 'Unknown'}
-							</span>
-						</div>
-					</div>
-					<p class="text-sm font-medium text-gray-700 truncate mb-1" title={contact.name}>
-						{contact.name}
-					</p>
-					{#if contact.alias}
-						<p class="text-xs text-gray-500 mb-1 truncate" title={contact.alias}>
-							Alias: {contact.alias}
-						</p>
-					{/if}
-					<p class="text-xs text-gray-500 font-mono truncate mb-2" title={contact.address}>
-						{contact.address}
-					</p>
-					
-					<!-- Contact info badges -->
-					<div class="flex items-center space-x-2">
-						{#if contact.email}
-							<span class="text-xs px-2 py-1 bg-green-100 text-green-700 rounded-full flex items-center">
-								<svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
-									<path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"/>
-									<path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"/>
-								</svg>
-								Email
-							</span>
-						{/if}
-						{#if contact.phone}
-							<span class="text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded-full flex items-center">
-								<svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
-									<path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"/>
-								</svg>
-								Phone
-							</span>
-						{/if}
-					</div>
-				</div>
-			</button>
-			<EditControls
-				onEdit={() => handleEdit(contact)}
-				onDelete={() => handleDelete(contact)}
-				onCopy={() => handleCopy(contact)}
-				controls={['copy', 'edit', 'delete']}
-			/>
-		</li>
-	{/each}
-</ul>
-
-<ContactForm bind:show={showEditModal} contact={selectedContact} onSubmit={onContactUpdate} />
-
-<Confirmation
-	bind:show={showDeleteModal}
-	onConfirm={confirmDelete}
-	title="Delete Contact"
-	message="Are you sure you want to delete this contact? This action cannot be undone."
-/>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/Contacts.svelte b/packages/yakkl-wallet/src/lib/components/v1/Contacts.svelte
deleted file mode 100644
index ade9e23..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/Contacts.svelte
+++ /dev/null
@@ -1,123 +0,0 @@
-<!-- Contacts.svelte -->
-<script lang="ts">
-	import { setYakklContactsStorage, yakklContactsStore } from '$lib/common/stores';
-	import { type YakklContact } from '$lib/common';
-	import Modal from './Modal.svelte';
-	import ContactList from './ContactList.svelte';
-	import ContactForm from './ContactForm.svelte';
-
-	interface Props {
-		show?: boolean;
-		onContactSelect?: ((contact: YakklContact) => void) | null;
-		className?: string;
-	}
-
-	let { show = $bindable(false), onContactSelect = null, className = 'z-[899]' }: Props = $props();
-
-	let showAddModal = $state(false);
-	let contacts: YakklContact[] = $state([]);
-
-	$effect(() => {
-		contacts = $yakklContactsStore;
-	});
-
-	function handleContactSelect(selectedContact: YakklContact) {
-		if (onContactSelect !== null) {
-			onContactSelect(selectedContact);
-		}
-		show = false;
-	}
-
-	function handleContactAdd(contact: YakklContact) {
-		yakklContactsStore.update((contacts) => [...contacts, contact]);
-		setYakklContactsStorage($yakklContactsStore); // Save to local storage - make sure contact is saved. If not then it will be lost.
-		showAddModal = false;
-	}
-
-	function handleContactDelete(deletedContact: YakklContact) {
-		yakklContactsStore.update((contacts) => {
-			const updatedContacts = contacts.filter((c) => c.address !== deletedContact.address);
-			setYakklContactsStorage(updatedContacts);
-			return updatedContacts;
-		});
-	}
-
-	function handleContactUpdate(updatedContact: YakklContact) {
-		yakklContactsStore.update((contacts) => {
-			const updatedContacts = contacts.map((c) =>
-				c.address === updatedContact.address ? updatedContact : c
-			);
-			setYakklContactsStorage(updatedContacts);
-			return updatedContacts;
-		});
-	}
-
-	function closeModal() {
-		show = false;
-	}
-</script>
-
-<!-- <div class="relative {className}"> -->
-<Modal
-	bind:show
-	title="Contact List"
-	description="Select the contact you wish to send/transfer to"
-	onClose={closeModal}
-	{className}
->
-	<div class="p-4">
-		{#if $yakklContactsStore.length > 0}
-			<!-- Contact list with AccountListing-style cards -->
-			<div class="space-y-3 mb-4">
-				<ContactList
-					{contacts}
-					onContactSelect={handleContactSelect}
-					onContactUpdate={handleContactUpdate}
-					onContactDelete={handleContactDelete}
-				/>
-			</div>
-		{:else}
-			<!-- Empty state with modern styling -->
-			<div class="text-center py-12">
-				<div class="w-16 h-16 mx-auto mb-4 bg-gradient-to-br from-indigo-100 to-purple-100 rounded-full flex items-center justify-center">
-					<svg class="w-8 h-8 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
-						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
-					</svg>
-				</div>
-				<h3 class="text-lg font-semibold text-gray-700 mb-2">No Contacts Yet</h3>
-				<p class="text-gray-500 mb-6">Add your first contact to make sending payments easier</p>
-			</div>
-		{/if}
-
-		<!-- Action buttons -->
-		<div class="border-t border-gray-200 pt-4">
-			<button
-				onclick={() => (showAddModal = true)}
-				class="w-full bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white font-semibold py-3 px-4 rounded-lg transition-all duration-200 shadow-md hover:shadow-lg flex items-center justify-center space-x-2"
-			>
-				<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
-					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
-				</svg>
-				<span>Add New Contact</span>
-			</button>
-			
-			<div class="mt-3 p-3 bg-blue-50 rounded-lg border border-blue-200">
-				<div class="flex items-center">
-					<div class="flex-shrink-0">
-						<svg class="w-4 h-4 text-blue-600" fill="currentColor" viewBox="0 0 20 20">
-							<path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
-						</svg>
-					</div>
-					<div class="ml-2">
-						<p class="text-xs text-blue-800">
-							Selected contacts will be used for sending and transferring funds
-						</p>
-					</div>
-				</div>
-			</div>
-		</div>
-	</div>
-</Modal>
-<!-- </div> -->
-
-<ContactForm bind:show={showAddModal} onSubmit={handleContactAdd} />
diff --git a/packages/yakkl-wallet/src/lib/components/v1/ConversionCalc.svelte b/packages/yakkl-wallet/src/lib/components/v1/ConversionCalc.svelte
deleted file mode 100644
index 54cd9dc..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/ConversionCalc.svelte
+++ /dev/null
@@ -1,476 +0,0 @@
-<script lang="ts">
-	import Modal from './Modal.svelte';
-	import { onMount } from 'svelte';
-	import type { TokenData } from '$lib/common';
-	import { PriceManager } from '$lib/managers/PriceManager';
-	import { CoinbasePriceProvider } from '$lib/managers/providers/price/coinbase/CoinbasePriceProvider';
-	import { CoingeckoPriceProvider } from '$lib/managers/providers/price/coingecko/CoingeckoPriceProvider';
-	import { KrakenPriceProvider } from '$lib/managers/providers/price/kraken/KrakenPriceProvider';
-	import { EthereumBigNumber } from '$lib/common/bignumber-ethereum';
-
-	let {
-		show = false,
-		tokens = [],
-		onClose = () => {},
-		title = 'Conversion Calculator'
-	} = $props<{
-		show?: boolean;
-		tokens?: TokenData[];
-		onClose?: () => void;
-		title?: string;
-	}>();
-
-	tokens = tokens as TokenData[];
-
-	// Token conversion state
-	let fromToken: TokenData | null = $state(null);
-	let toToken: TokenData | null = $state(null);
-	let fromAmount = $state('');
-	let toAmount = $state('');
-	let usdAmount = $state('');
-	let price = $state(0);
-
-	// ETH unit conversion state
-	let wei = $state('');
-	let gwei = $state('');
-	let ether = $state('');
-	let ethPrice = $state(0);
-
-	let ethUnitUsd = $state('');
-	$effect(() => {
-		if (ether && ethPrice) {
-			try {
-				// Parse ether as a float and calculate USD value
-				const etherNum = parseFloat(ether);
-				if (!isNaN(etherNum) && etherNum > 0) {
-					const usdValue = etherNum * ethPrice;
-					ethUnitUsd = `$${usdValue.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
-					return;
-				}
-			} catch {}
-		}
-		ethUnitUsd = '';
-	});
-
-	const priceManager = new PriceManager([
-		{ provider: new CoinbasePriceProvider(), weight: 5 },
-		{ provider: new CoingeckoPriceProvider(), weight: 3 },
-		{ provider: new KrakenPriceProvider(), weight: 2 }
-	]);
-
-	// Helper for formatting
-	function formatNum(val: number, decimals = 6) {
-		return Number(val).toLocaleString(undefined, { maximumFractionDigits: decimals });
-	}
-
-	// ETH conversion functions
-	function weiToGwei(wei: string): string {
-		try {
-			if (!wei || wei === '0') return '';
-			const weiNum = BigInt(wei);
-			const gweiWhole = weiNum / 1_000_000_000n;
-			const remainder = weiNum % 1_000_000_000n;
-
-			if (remainder === 0n) {
-				return gweiWhole.toString();
-			}
-
-			const remainderStr = remainder.toString().padStart(9, '0');
-			const trimmed = remainderStr.replace(/0+$/, '');
-
-			if (trimmed) {
-				return `${gweiWhole}.${trimmed}`;
-			}
-			return gweiWhole.toString();
-		} catch {
-			return '';
-		}
-	}
-
-	function weiToEther(wei: string): string {
-		try {
-			if (!wei || wei === '0') return '';
-			const weiNum = BigInt(wei);
-			const etherWhole = weiNum / 1_000_000_000_000_000_000n;
-			const remainder = weiNum % 1_000_000_000_000_000_000n;
-
-			if (remainder === 0n) {
-				return etherWhole.toString();
-			}
-
-			const remainderStr = remainder.toString().padStart(18, '0');
-			// Remove trailing zeros but keep significant decimals
-			const trimmed = remainderStr.replace(/0+$/, '');
-
-			if (trimmed) {
-				return `${etherWhole}.${trimmed}`;
-			}
-			return etherWhole.toString();
-		} catch {
-			return '';
-		}
-	}
-
-	function gweiToWei(gwei: string): string {
-		try {
-			if (!gwei) return '';
-			const parts = gwei.split('.');
-			const wholePart = parts[0] || '0';
-			const decimalPart = parts[1] || '';
-
-			// Pad decimal part to 9 digits
-			const paddedDecimal = decimalPart.padEnd(9, '0').slice(0, 9);
-
-			// Combine and convert to wei
-			const gweiInWei = BigInt(wholePart) * 1_000_000_000n;
-			const decimalInWei = BigInt(paddedDecimal);
-
-			return (gweiInWei + decimalInWei).toString();
-		} catch {
-			return '';
-		}
-	}
-
-	function gweiToEther(gwei: string): string {
-		try {
-			if (!gwei) return '';
-			const weiValue = gweiToWei(gwei);
-			return weiToEther(weiValue);
-		} catch {
-			return '';
-		}
-	}
-
-	function etherToWei(ether: string): string {
-		try {
-			if (!ether) return '';
-			const parts = ether.split('.');
-			const wholePart = parts[0] || '0';
-			const decimalPart = parts[1] || '';
-
-			// Pad decimal part to 18 digits
-			const paddedDecimal = decimalPart.padEnd(18, '0').slice(0, 18);
-
-			// Combine whole and decimal parts
-			const combined = wholePart + paddedDecimal;
-
-			// Remove leading zeros but ensure we have at least one digit
-			return BigInt(combined).toString();
-		} catch {
-			return '';
-		}
-	}
-
-	function etherToGwei(ether: string): string {
-		try {
-			if (!ether) return '';
-			const weiValue = etherToWei(ether);
-			return weiToGwei(weiValue);
-		} catch {
-			return '';
-		}
-	}
-
-	// Fetch ETH price on mount
-	onMount(async () => {
-		// Only set state to defaults, no price fetching or validation
-		fromToken = tokens.length ? tokens[0] : null;
-		toToken = tokens.length > 1 ? tokens[1] : null;
-		fromAmount = '';
-		toAmount = '';
-		usdAmount = '';
-		price = 0;
-		wei = '';
-		gwei = '';
-		ether = '';
-
-		// Fetch ETH price on mount
-		await fetchEthPrice();
-	});
-
-	// Fetch price when token is selected
-	async function handleFromTokenChange(e: Event) {
-		const target = e.target as HTMLSelectElement;
-		fromToken = tokens.find((t: TokenData) => t.symbol === target.value) || null;
-		if (fromToken) {
-			const result = await priceManager.getMarketPrice(fromToken.symbol);
-			price = result && typeof result === 'object' && 'price' in result ? result.price : 0;
-		} else {
-			price = 0;
-		}
-		// Optionally update USD/Token fields if one is filled
-		if (fromAmount && price) {
-			usdAmount = formatNum(parseFloat(fromAmount) * price);
-		} else if (usdAmount && price) {
-			fromAmount = formatNum(parseFloat(usdAmount) / price);
-		}
-	}
-
-	// Fetch ETH price
-	async function fetchEthPrice() {
-		try {
-			const result = await priceManager.getMarketPrice('ETH-USD');
-			ethPrice = result && typeof result === 'object' && 'price' in result ? result.price : 0;
-		} catch (error) {
-			console.error('Failed to fetch ETH price:', error);
-			ethPrice = 0;
-		}
-	}
-
-	// Token/Fiat conversion logic (no validation)
-	async function handleFromAmountInput(e: Event) {
-		const target = e.target as HTMLInputElement;
-		fromAmount = target.value;
-		if (fromToken && !price) {
-			const result = await priceManager.getMarketPrice(fromToken.symbol);
-			price = result && typeof result === 'object' && 'price' in result ? result.price : 0;
-		}
-		usdAmount = price ? formatNum(parseFloat(fromAmount) * price) : '';
-		toAmount = '';
-	}
-
-	async function handleUsdAmountInput(e: Event) {
-		const target = e.target as HTMLInputElement;
-		usdAmount = target.value;
-		if (fromToken && !price) {
-			const result = await priceManager.getMarketPrice(fromToken.symbol);
-			price = result && typeof result === 'object' && 'price' in result ? result.price : 0;
-		}
-		fromAmount = price ? formatNum(parseFloat(usdAmount) / price) : '';
-		toAmount = '';
-	}
-
-	// ETH unit conversion handlers with validation
-	function handleWeiInput(e: Event) {
-		const target = e.target as HTMLInputElement;
-		const value = target.value;
-
-		// Only allow integers for Wei
-		if (!/^\d*$/.test(value)) {
-			target.value = wei;
-			return;
-		}
-
-		wei = value;
-		if (value) {
-			gwei = weiToGwei(value);
-			ether = weiToEther(value);
-		} else {
-			gwei = '';
-			ether = '';
-		}
-	}
-
-	function handleGweiInput(e: Event) {
-		const target = e.target as HTMLInputElement;
-		const value = target.value;
-
-		// Allow decimal point but limit to 9 decimal places
-		if (!/^\d*\.?\d{0,9}$/.test(value)) {
-			target.value = gwei;
-			return;
-		}
-
-		gwei = value;
-		if (value) {
-			wei = gweiToWei(value);
-			ether = gweiToEther(value);
-		} else {
-			wei = '';
-			ether = '';
-		}
-	}
-
-	function handleEtherInput(e: Event) {
-		const target = e.target as HTMLInputElement;
-		const value = target.value;
-
-		// Allow decimal point but limit to 18 decimal places
-		if (!/^\d*\.?\d{0,18}$/.test(value)) {
-			target.value = ether;
-			return;
-		}
-
-		ether = value;
-		if (value) {
-			wei = etherToWei(value);
-			gwei = etherToGwei(value);
-		} else {
-			wei = '';
-			gwei = '';
-		}
-	}
-
-	// Clear/reset helpers
-	function clearTokenFiatFields() {
-		fromToken = tokens.length ? tokens[0] : null;
-		toToken = tokens.length > 1 ? tokens[1] : null;
-		fromAmount = '';
-		toAmount = '';
-		usdAmount = '';
-		price = 0;
-	}
-
-	function clearEthUnitFields() {
-		wei = '';
-		gwei = '';
-		ether = '';
-	}
-</script>
-
-<Modal bind:show {title}>
-	<div class="space-y-6 p-4">
-		<!-- Token/Fiat Conversion -->
-		<div class="relative">
-			<h2 class="text-lg font-semibold mb-2">Token  USD Conversion</h2>
-			<button
-				type="button"
-				class="absolute top-0 right-0 text-xs text-gray-600 hover:text-gray-900 dark:hover:text-gray-200 px-2 py-1"
-				onclick={clearTokenFiatFields}
-				aria-label="Clear"
-			>
-				<svg
-					xmlns="http://www.w3.org/2000/svg"
-					fill="none"
-					viewBox="0 0 24 24"
-					stroke-width="1.5"
-					stroke="currentColor"
-					class="size-6"
-				>
-					<path
-						stroke-linecap="round"
-						stroke-linejoin="round"
-						d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"
-					/>
-				</svg>
-			</button>
-			<div class="flex flex-col gap-3">
-				<div class="flex gap-2 items-center">
-					<select
-						bind:value={fromToken}
-						class="rounded border px-2 py-1"
-						onchange={handleFromTokenChange}
-					>
-						{#each tokens as t (t.symbol)}
-							<!-- @ts-ignore Svelte does not support explicit typing in #each blocks -->
-							<option value={t.symbol}>{t.symbol}</option>
-						{/each}
-					</select>
-					<input
-						type="number"
-						min="0"
-						step="any"
-						placeholder="Token amount"
-						class="rounded border px-2 py-1 flex-1"
-						bind:value={fromAmount}
-						oninput={handleFromAmountInput}
-					/>
-					<span class="text-gray-500">{fromToken?.symbol}</span>
-				</div>
-				<div class="flex gap-2 items-center">
-					<input
-						type="number"
-						min="0"
-						step="any"
-						placeholder="USD amount"
-						class="rounded border px-2 py-1 flex-1"
-						bind:value={usdAmount}
-						oninput={handleUsdAmountInput}
-					/>
-					<span class="text-gray-500">USD</span>
-				</div>
-				<div class="text-xs text-gray-500">
-					1 {fromToken?.symbol}  ${price ? formatNum(price, 2) : '--'}
-				</div>
-			</div>
-		</div>
-
-		<!-- Divider between sections -->
-		<div class="flex justify-center my-4">
-			<div class="bg-gray-300 dark:bg-gray-700 h-0.5 rounded w-1/3"></div>
-		</div>
-
-		<!-- ETH Unit Conversion -->
-		<div class="relative">
-			<h2 class="text-lg font-semibold mb-2">ETH Unit Conversion</h2>
-			<button
-				type="button"
-				class="absolute top-0 right-0 text-xs text-gray-600 hover:text-gray-900 dark:hover:text-gray-200 px-2 py-1"
-				onclick={clearEthUnitFields}
-				aria-label="Clear"
-			>
-				<svg
-					xmlns="http://www.w3.org/2000/svg"
-					fill="none"
-					viewBox="0 0 24 24"
-					stroke-width="1.5"
-					stroke="currentColor"
-					class="size-6"
-				>
-					<path
-						stroke-linecap="round"
-						stroke-linejoin="round"
-						d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"
-					/>
-				</svg>
-			</button>
-			<div class="flex flex-col gap-3">
-				<div class="flex gap-2 items-center">
-					<!-- svelte-ignore a11y_label_has_associated_control -->
-					<label class="w-16 text-sm">Wei</label>
-					<input
-						type="text"
-						pattern="[0-9]*"
-						inputmode="numeric"
-						placeholder="0"
-						class="rounded border px-3 py-2 flex-1 font-mono text-sm"
-						bind:value={wei}
-						oninput={handleWeiInput}
-					/>
-					<span class="text-gray-500 text-sm">wei</span>
-				</div>
-				<div class="flex gap-2 items-center">
-					<!-- svelte-ignore a11y_label_has_associated_control -->
-					<label class="w-16 text-sm">Gwei</label>
-					<input
-						type="text"
-						inputmode="decimal"
-						placeholder="0.0"
-						class="rounded border px-3 py-2 flex-1 font-mono text-sm"
-						bind:value={gwei}
-						oninput={handleGweiInput}
-					/>
-					<span class="text-gray-500 text-sm">gwei</span>
-				</div>
-				<div class="flex gap-2 items-center">
-					<!-- svelte-ignore a11y_label_has_associated_control -->
-					<label class="w-16 text-sm">Ether</label>
-					<input
-						type="text"
-						inputmode="decimal"
-						placeholder="0.0"
-						class="rounded border px-3 py-2 flex-1 font-mono text-sm"
-						bind:value={ether}
-						oninput={handleEtherInput}
-					/>
-					<span class="text-gray-500 text-sm">ETH</span>
-				</div>
-
-				<div class="pt-2 space-y-1">
-					<div class="text-xs text-gray-500">
-						1 ETH  ${ethPrice ? formatNum(ethPrice, 2) : '--'} USD
-					</div>
-					{#if ethUnitUsd}
-						<div class="text-sm text-green-600 dark:text-green-400 font-semibold">
-							{ethUnitUsd}
-						</div>
-					{/if}
-				</div>
-			</div>
-		</div>
-
-		<div class="flex justify-end mt-6">
-			<button type="button" class="btn btn-secondary" onclick={onClose}>Close</button>
-		</div>
-	</div>
-</Modal>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/ConversionCalculator.svelte b/packages/yakkl-wallet/src/lib/components/v1/ConversionCalculator.svelte
deleted file mode 100644
index e29612c..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/ConversionCalculator.svelte
+++ /dev/null
@@ -1,109 +0,0 @@
-<!-- src/lib/components/ConversionCalculator.svelte -->
-<script lang="ts">
-	import Modal from './Modal.svelte';
-	import TokenFiatConverter from './TokenFiatConverter.svelte';
-	import EthUnitConverter from './EthUnitConverter.svelte';
-	import type { TokenData } from '$lib/common';
-
-	let {
-		show = $bindable(false),
-		tokens = [],
-		initialTab = 'token' as 'token' | 'eth',
-		onClose = () => {
-			show = false;
-		},
-		onComplete = null as
-			| ((
-					value: string,
-					type: 'token' | 'usd' | 'wei' | 'gwei' | 'ether',
-					token?: TokenData
-			  ) => void)
-			| null
-	} = $props<{
-		show?: boolean;
-		tokens?: TokenData[];
-		initialTab?: 'token' | 'eth';
-		onClose?: () => void;
-		onComplete?:
-			| ((
-					value: string,
-					type: 'token' | 'usd' | 'wei' | 'gwei' | 'ether',
-					token?: TokenData
-			  ) => void)
-			| null;
-	}>();
-
-	// Tab state - using $state for internal component state
-	let activeTab = $state<'token' | 'eth'>(initialTab);
-
-	// Tab state
-	let showTokenConverter = $derived(activeTab === 'token');
-	let showEthConverter = $derived(activeTab === 'eth');
-
-	// Handle completions from child components
-	function handleTokenComplete(amount: string, isUsd: boolean, token?: TokenData) {
-		if (onComplete) {
-			onComplete(amount, isUsd ? 'usd' : 'token', token);
-		}
-		show = false;
-	}
-
-	function handleEthComplete(value: string, unit: 'wei' | 'gwei' | 'ether') {
-		if (onComplete) {
-			onComplete(value, unit);
-		}
-		show = false;
-	}
-</script>
-
-<Modal bind:show title="Conversion Calculator" {onClose}>
-	<div class="p-4">
-		<!-- Tab Navigation -->
-		<div class="flex gap-1 mb-4 p-1 bg-gray-100 dark:bg-gray-800 rounded-lg">
-			<button
-				type="button"
-				class="flex-1 px-3 py-2 text-sm font-medium rounded-md transition-colors"
-				class:bg-white={activeTab === 'token'}
-				class:dark:bg-gray-700={activeTab === 'token'}
-				class:text-blue-600={activeTab === 'token'}
-				class:dark:text-blue-400={activeTab === 'token'}
-				class:text-gray-600={activeTab !== 'token'}
-				class:dark:text-gray-400={activeTab !== 'token'}
-				onclick={() => (activeTab = 'token')}
-			>
-				Token  USD
-			</button>
-			<button
-				type="button"
-				class="flex-1 px-3 py-2 text-sm font-medium rounded-md transition-colors"
-				class:bg-white={activeTab === 'eth'}
-				class:dark:bg-gray-700={activeTab === 'eth'}
-				class:text-blue-600={activeTab === 'eth'}
-				class:dark:text-blue-400={activeTab === 'eth'}
-				class:text-gray-600={activeTab !== 'eth'}
-				class:dark:text-gray-400={activeTab !== 'eth'}
-				onclick={() => (activeTab = 'eth')}
-			>
-				ETH Units
-			</button>
-		</div>
-
-		<!-- Content -->
-		<div class="mt-4">
-			{#if showTokenConverter}
-				<TokenFiatConverter {tokens} compact={true} show={true} onComplete={handleTokenComplete} />
-			{:else if showEthConverter}
-				<EthUnitConverter
-					compact={true}
-					show={true}
-					showUsdValue={true}
-					onComplete={handleEthComplete}
-				/>
-			{/if}
-		</div>
-
-		<div class="flex justify-end mt-6">
-			<button type="button" class="btn btn-secondary" onclick={onClose}> Close </button>
-		</div>
-	</div>
-</Modal>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/Copy.svelte b/packages/yakkl-wallet/src/lib/components/v1/Copy.svelte
deleted file mode 100644
index bd23b38..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/Copy.svelte
+++ /dev/null
@@ -1,315 +0,0 @@
-<!-- Copy.svelte -->
-<script lang="ts">
-	import { log } from '$lib/common/logger-wrapper';
-	import { browser_ext } from '$lib/common/environment';
-	import { timeoutClipboard } from '$lib/utilities';
-	import { UnifiedTimerManager } from '$lib/managers/UnifiedTimerManager';
-
-	type CopyTarget = {
-		id?: string;
-		value?: string | number | null | undefined;
-		timeout?: number;
-		redactText?: string;
-	};
-
-	type CopyConfig = CopyTarget | CopyTarget[];
-
-	const {
-		target,
-		size = 20,
-		className = '',
-		showFeedback = true,
-		feedbackDuration = 2000,
-		defaultRedactText = '<redacted>',
-		onClick = undefined
-	} = $props<{
-		target: CopyConfig;
-		size?: number;
-		className?: string;
-		showFeedback?: boolean;
-		feedbackDuration?: number;
-		defaultRedactText?: string;
-		onClick?: (copiedValue: string) => void;
-	}>();
-
-	let isCopied = $state(false);
-	let timeoutIds: Map<string, string> = new Map(); // Now stores timer IDs instead of timeout numbers
-	const timerManager = UnifiedTimerManager.getInstance();
-
-	// Add reactive tracking for the target value
-	// $effect(() => {
-	//   // This ensures we're tracking changes to the target value
-	//   if (!Array.isArray(target) && target.value !== undefined) {
-	//     log.debug('Current target value:', target.value);
-	//   }
-	// });
-
-	function getValue(copyTarget: CopyTarget): string {
-		if (copyTarget.id) {
-			const element = document.getElementById(copyTarget.id);
-			if (element instanceof HTMLInputElement || element instanceof HTMLTextAreaElement) {
-				return element.value;
-			} else if (element) {
-				return element.textContent || '';
-			}
-			log.warn(`Element with id '${copyTarget.id}' not found`);
-			return '';
-		}
-
-		// Improved value handling
-		const value = copyTarget.value;
-		if (value === null || value === undefined) {
-			return '';
-		}
-		return value.toString();
-	}
-
-	// Handle single copy target
-	async function handleSingleCopy(copyTarget: CopyTarget): Promise<void> {
-		const value = getValue(copyTarget);
-		await navigator.clipboard.writeText(value);
-
-		// Call onClick handler if provided
-		if (onClick) {
-			onClick(value);
-		}
-
-		// Set redaction timeout if specified
-		if (copyTarget.timeout) {
-			timeoutClipboard(copyTarget.timeout, copyTarget.redactText || defaultRedactText);
-
-			// Get active tab for script injection
-			// try {
-			// const [tab] = await browser_ext.tabs.query({ active: true, currentWindow: true });
-			// if (tab && tab.id) {
-			//   browser_ext.runtime.sendMessage({ type: 'clipboard-timeout', tabId: tab.id, timeout: copyTarget.timeout, redactText: copyTarget.redactText || defaultRedactText });
-			// } else {
-			//   log.error('Failed to get active tab for clipboard timeout');
-			// }
-			// } catch (err) {
-			//   log.error('Failed to set clipboard timeout:', err);
-			// }
-
-			// const timeoutId = setTimeout(async () => {
-			//   const redactText = copyTarget.redactText || defaultRedactText;
-			//   await navigator.clipboard.writeText(redactText);
-			//   timeoutIds.delete(copyTarget.id || value);
-			// }, copyTarget.timeout) as unknown as number;
-
-			// timeoutIds.set(copyTarget.id || value, timeoutId);
-		}
-	}
-
-	// Handle multiple copy targets
-	async function handleMultiCopy(copyTargets: CopyTarget[]): Promise<void> {
-		const values = copyTargets.map((target) => getValue(target));
-		const combinedValue = values.join('\n');
-		await navigator.clipboard.writeText(combinedValue);
-
-		// Call onClick handler if provided
-		if (onClick) {
-			onClick(combinedValue);
-		}
-
-		// Handle individual timeouts using UnifiedTimerManager
-		copyTargets.forEach((target, index) => {
-			if (target.timeout) {
-				const timerId = `copy-timeout-${target.id || index}`;
-				timerManager.addTimeout(
-					timerId,
-					async () => {
-						const currentValues = [...values];
-						const redactText = target.redactText || defaultRedactText;
-						currentValues[index] = redactText;
-						await navigator.clipboard.writeText(currentValues.join('\n'));
-						timeoutIds.delete(target.id || values[index]);
-					},
-					target.timeout
-				);
-				timerManager.startTimeout(timerId);
-
-				timeoutIds.set(target.id || values[index], timerId);
-			}
-		});
-	}
-
-	async function copyToClipboard() {
-		try {
-			if (Array.isArray(target)) {
-				await handleMultiCopy(target);
-			} else {
-				await handleSingleCopy(target);
-			}
-
-			if (showFeedback) {
-				isCopied = true;
-				timerManager.addTimeout(
-					'copy-feedback',
-					() => {
-						isCopied = false;
-					},
-					feedbackDuration
-				);
-				timerManager.startTimeout('copy-feedback');
-			}
-		} catch (err) {
-			// log.error('Failed to copy:', err);
-			isCopied = false;
-		}
-	}
-
-	// Cleanup timeouts
-	$effect(() => {
-		return () => {
-			timeoutIds.forEach((timerId) => {
-				timerManager.stopTimeout(timerId);
-				timerManager.removeTimeout(timerId);
-			});
-			timeoutIds.clear();
-		};
-	});
-</script>
-
-<button
-	type="button"
-	onclick={copyToClipboard}
-	class="
-    inline-flex
-    items-center
-    justify-center
-    transition-all
-    duration-200
-    ease-in-out
-    rounded-md
-    focus:outline-none
-    focus:ring-2
-    focus:ring-offset-2
-    focus:ring-blue-500
-    {className}
-  "
-	title="Copy to clipboard"
->
-	{#if isCopied}
-		<svg
-			xmlns="http://www.w3.org/2000/svg"
-			width={size}
-			height={size}
-			viewBox="0 0 24 24"
-			fill="none"
-			stroke="currentColor"
-			stroke-width="2"
-			stroke-linecap="round"
-			stroke-linejoin="round"
-			class="text-green-500"
-			aria-hidden="true"
-		>
-			<path d="M20 6L9 17l-5-5" />
-		</svg>
-		<span class="sr-only">Copied!</span>
-	{:else}
-		<svg
-			xmlns="http://www.w3.org/2000/svg"
-			width={size}
-			height={size}
-			viewBox="0 0 24 24"
-			fill="none"
-			stroke="currentColor"
-			stroke-width="2"
-			stroke-linecap="round"
-			stroke-linejoin="round"
-			class="text-gray-500 hover:text-blue-500 transition-colors duration-200"
-			aria-hidden="true"
-		>
-			<rect x="9" y="9" width="13" height="13" rx="2" ry="2" />
-			<path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" />
-		</svg>
-		<span class="sr-only">Copy to clipboard</span>
-	{/if}
-</button>
-
-<!-- Example usage: -->
-<!-- Basic usage -->
-<!-- <Copy
-  target={{ value: "Simple text to copy" }}
-  className="hover:bg-gray-100 p-2"
-/> -->
-
-<!-- With custom redaction -->
-<!-- <Copy
-  target={{
-    value: sensitiveData,
-    timeout: 30000,
-    redactText: "Content removed for security"
-  }}
-  className="text-gray-600 hover:text-blue-600"
-/> -->
-
-<!-- Copy from input with custom styling -->
-<!-- <div class="flex items-center space-x-2">
-  <input
-    id="walletAddress"
-    value={address}
-    readonly
-    class="bg-gray-50 border rounded px-3 py-2"
-  />
-  <Copy
-    target={{ id: "walletAddress" }}
-    className="p-1 hover:bg-gray-100 rounded-full"
-    size={16}
-  />
-</div> -->
-
-<!-- Multiple values with different redaction settings -->
-<!-- <Copy
-  target={[
-    {
-      value: "Public info",
-    },
-    {
-      value: "Sensitive info",
-      timeout: 30000,
-      redactText: "REDACTED-SENSITIVE"
-    },
-    {
-      id: "privateKey",
-      timeout: 5000,
-      redactText: "KEY-REMOVED"
-    }
-  ]}
-  className="bg-blue-50 hover:bg-blue-100 p-2 rounded-lg"
-/> -->
-
-<!-- Complex example with different styles -->
-<!-- <div class="space-y-4 p-4 bg-white rounded-lg shadow">
-  <div class="flex items-center justify-between">
-    <input
-      id="wallet"
-      value={walletAddress}
-      readonly
-      class="flex-1 bg-gray-50 rounded border px-3 py-2"
-    />
-    <Copy
-      target={{ id: "wallet" }}
-      className="ml-2 p-2 hover:bg-gray-100 rounded-full transition-all"
-      size={16}
-    />
-  </div>
-
-  <div class="flex items-center justify-between">
-    <input
-      id="privateKey"
-      value={privateKey}
-      type="password"
-      class="flex-1 bg-gray-50 rounded border px-3 py-2"
-    />
-    <Copy
-      target={{
-        id: "privateKey",
-        timeout: 5000,
-        redactText: "PRIVATE-KEY-REMOVED"
-      }}
-      className="ml-2 p-2 hover:bg-gray-100 rounded-full transition-all"
-      size={16}
-    />
-  </div>
-</div> -->
diff --git a/packages/yakkl-wallet/src/lib/components/v1/Copyright.svelte b/packages/yakkl-wallet/src/lib/components/v1/Copyright.svelte
deleted file mode 100644
index ab4e461..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/Copyright.svelte
+++ /dev/null
@@ -1,33 +0,0 @@
-<script lang="ts">
-	import { VERSION, YEAR } from '$lib/common/constants';
-	import type { Settings } from '$lib/common';
-	import { getSettings } from '$lib/common/stores';
-	import { onMount } from 'svelte';
-
-	interface Props {
-		planType?: string | null;
-	}
-
-	let { planType = null }: Props = $props();
-
-	/**
-	 * The registered type retrieved from Yakkl settings.
-	 * @type {string}
-	 */
-	let registered: string = $state();
-
-	onMount(async () => {
-		getSettings().then(async (result) => {
-			const yakklSettings = result as Settings;
-			registered = yakklSettings.plan.type;
-		});
-	});
-</script>
-
-<div class="inline-block absolute left-0 bottom-2 mx-auto w-full text-center label-text">
-	<!-- <a href="https://yakkl.com?utm_source=yakkl" class="text-xs text-primary/50 hover:text-primary/75"> -->
-	<span style="font-size: 10px;"
-		>YAKKL Copyright {YEAR}, Version: {VERSION} {!planType ? registered : planType}</span
-	>
-	<!-- </a> -->
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/CtaPopup.svelte b/packages/yakkl-wallet/src/lib/components/v1/CtaPopup.svelte
deleted file mode 100644
index 82c20b6..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/CtaPopup.svelte
+++ /dev/null
@@ -1,88 +0,0 @@
-<script lang="ts">
-	import { fade } from 'svelte/transition';
-	import { onMount } from 'svelte';
-
-	let popupActive = $state(false);
-	let loadedAt: Date | null = null;
-
-	interface Props {
-		storageKey?: string;
-		children?: import('svelte').Snippet;
-	}
-
-	let { storageKey = 'popup.fired', children }: Props = $props();
-
-	onMount(() => {
-		loadedAt = new Date();
-	});
-
-	function showPopup() {
-		popupActive = true;
-		window.localStorage.setItem(storageKey, new Date().toISOString());
-	}
-
-	function hidePopup() {
-		popupActive = false;
-	}
-
-	function isPending() {
-		if (!loadedAt) return true;
-
-		const now = Date.now();
-		// console.log(now - loadedAt.getDate());
-		return now - loadedAt.getTime() < 10_000; // ready after 10 seconds
-	}
-
-	function isAlreadyFired() {
-		const alreadyFired = window.localStorage.getItem(storageKey);
-		if (!alreadyFired) return false;
-
-		const now = Date.now();
-		const then = Date.parse(alreadyFired);
-		const oneDayAgo = 1000 * 60 * 60 * 24;
-
-		return now - then < oneDayAgo; // prompted 24 hours ago
-	}
-
-	function handleMouseLeave(e: MouseEvent) {
-		if (isAlreadyFired() || isPending() || e.clientY > 200) return;
-
-		showPopup();
-	}
-</script>
-
-<svelte:body onmouseleave={handleMouseLeave} />
-
-{#if popupActive}
-	<div
-		transition:fade
-		class="fixed inset-0 bg-base-200 bg-opacity-95 overflow-y-auto h-full w-full z-20 flex
-
-  justify-center items-center"
-	>
-		{@render children?.()}
-
-		<!-- Pin to top right corner -->
-
-		<div class="absolute top-6 right-6 h-16 w-16">
-			<button class="btn !btn-circle btn-outline" onclick={hidePopup}>
-				<!-- Heroicons close button -->
-
-				<svg
-					xmlns="http://www.w3.org/2000/svg"
-					class="h-6 w-6"
-					fill="none"
-					viewBox="0 0 24 24"
-					stroke="currentColor"
-				>
-					<path
-						stroke-linecap="round"
-						stroke-linejoin="round"
-						stroke-width="2"
-						d="M6 18L18 6M6 6l12 12"
-					/>
-				</svg>
-			</button>
-		</div>
-	</div>
-{/if}
diff --git a/packages/yakkl-wallet/src/lib/components/v1/DappIndicator.svelte b/packages/yakkl-wallet/src/lib/components/v1/DappIndicator.svelte
deleted file mode 100644
index 3caa901..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/DappIndicator.svelte
+++ /dev/null
@@ -1,64 +0,0 @@
-<script lang="ts">
-	import { log } from '$lib/managers/Logger';
-	import { browserSvelte, browser_ext } from '$lib/common/environment';
-	import { onDestroy, onMount } from 'svelte';
-
-	interface Props {
-		show?: boolean;
-		badgeColor?: string;
-		defaultClass?: string;
-	}
-
-	let {
-		show = $bindable(false),
-		badgeColor = 'badge-secondary',
-		defaultClass = ''
-	}: Props = $props();
-
-	let dapp = $state('');
-	// Need to add messaging service so that once content.ts knows it is on a page/domain that is connected to the given address, then it needs to fire a message
-
-	onMount(async () => {
-		try {
-			// if (browserSvelte) browser_ext.runtime.onMessage.addListener(handleOnMessage);
-		} catch (e) {
-			log.error(e);
-		}
-	});
-
-	onDestroy(() => {
-		try {
-			// if (browserSvelte) browser_ext.runtime.onMessage.removeListener(handleOnMessage);
-			show = false;
-			dapp = '';
-		} catch (e) {
-			log.error(e);
-		}
-	});
-
-	export function handleOnMessage(
-		request: any,
-		sender: any,
-		sendResponse: (response?: unknown) => void
-	): any {
-		try {
-			if (request?.method === 'yak_dappsite') {
-				log.error(request);
-				dapp = 'DAPP';
-				show = true;
-				return false;
-			}
-			return false;
-		} catch (e) {
-			log.error('Error handling message:', false, e);
-			return false;
-		}
-	}
-</script>
-
-{#if show === true}
-	<!-- class="indicator"> indicator-item -->
-	<div class="tooltip {defaultClass}" data-tip="Connected to {dapp}">
-		<span class="badge {badgeColor}">DAPP</span>
-	</div>
-{/if}
diff --git a/packages/yakkl-wallet/src/lib/components/v1/DappSidePanel.svelte b/packages/yakkl-wallet/src/lib/components/v1/DappSidePanel.svelte
deleted file mode 100644
index 49cb8b5..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/DappSidePanel.svelte
+++ /dev/null
@@ -1,130 +0,0 @@
-<!-- Unified dapp side panel component -->
-<script lang="ts">
-	import { onMount } from 'svelte';
-	import { page } from '$app/state';
-	import { log } from '$lib/managers/Logger';
-	import { browser } from '$app/environment';
-
-	let currentView: string = '';
-	let requestId: string = '';
-	let method: string = '';
-	let loading: boolean = true;
-
-	// eslint-disable-next-line @typescript-eslint/no-explicit-any
-	type DynamicComponent = any;
-
-	onMount(() => {
-		if (browser) {
-			// Get URL parameters
-			const params = new URLSearchParams(window.location.search);
-			requestId = params.get('id') || '';
-			method = params.get('method') || '';
-
-			// Set the appropriate view based on the method
-			currentView = getViewForMethod(method);
-			loading = false;
-
-			// Listen for content updates
-			window.addEventListener('message', handleMessage);
-		}
-	});
-
-	function getViewForMethod(method: string): string {
-		switch (method) {
-			case 'eth_requestAccounts':
-			case 'eth_accounts':
-				return 'accounts';
-			case 'eth_sendTransaction':
-				return 'transactions';
-			case 'eth_signTypedData_v4':
-			case 'eth_signTypedData_v3':
-			case 'personal_sign':
-				return 'sign';
-			case 'wallet_addEthereumChain':
-			case 'wallet_switchEthereumChain':
-				return 'network';
-			default:
-				return 'approve';
-		}
-	}
-
-	function handleMessage(event: MessageEvent) {
-		if (event.data.type === 'UPDATE_CONTENT') {
-			const params = new URLSearchParams(new URL(event.data.url).search);
-			log.info('handleMessage - 54 (DappSidePanel):', false, { params });
-			requestId = params.get('requestId') || requestId;
-			method = params.get('method') || method;
-			currentView = getViewForMethod(method);
-			log.debug('Side panel content updated:', false, { requestId, method, currentView });
-		}
-	}
-
-	async function loadComponent(view: string): Promise<{ default: DynamicComponent }> {
-		switch (view) {
-			case 'accounts':
-				log.info('Loading accounts page:', false, view);
-				return import('../../routes/(dapp)/dapp/popups/accounts/+page.svelte');
-			case 'transactions':
-				log.info('Loading transactions page:', false, view);
-				return import('../../routes/(dapp)/dapp/popups/transactions/+page.svelte');
-			case 'sign':
-				log.info('Loading sign page:', false, view);
-				return import('../../routes/(dapp)/dapp/popups/sign/+page.svelte');
-			default:
-				log.info('Loading approve page:', false, view);
-				return import('../../routes/(dapp)/dapp/popups/approve/+page.svelte');
-		}
-	}
-
-	$: componentPromise = loadComponent(currentView);
-</script>
-
-<div class="flex flex-col h-screen bg-base-100">
-	<!-- Loading State -->
-	{#if loading}
-		<div class="flex items-center justify-center h-full">
-			<div class="loading loading-spinner text-primary"></div>
-		</div>
-	{:else}
-		<!-- Dynamic Content -->
-		<div class="flex-1">
-			{#await componentPromise}
-				<div class="flex items-center justify-center h-full">
-					<div class="loading loading-spinner text-primary"></div>
-				</div>
-			{:then module}
-				<svelte:component this={module.default} {requestId} {method} />
-			{:catch error}
-				<div class="p-4 text-error">Failed to load component: {error.message}</div>
-			{/await}
-		</div>
-	{/if}
-</div>
-
-<style>
-	/* Ensure the side panel takes full height */
-	:global(html, body) {
-		height: 100%;
-		margin: 0;
-		padding: 0;
-	}
-
-	/* Custom scrollbar styling */
-	:global(::-webkit-scrollbar) {
-		width: 6px;
-	}
-
-	:global(::-webkit-scrollbar-track) {
-		background: transparent;
-	}
-
-	:global(::-webkit-scrollbar-thumb) {
-		background-color: hsl(var(--p));
-		border-radius: 3px;
-	}
-
-	/* Smooth transitions */
-	:global(.flex-1) {
-		transition: all 0.2s ease;
-	}
-</style>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/DebugDataStores.svelte b/packages/yakkl-wallet/src/lib/components/v1/DebugDataStores.svelte
deleted file mode 100644
index ba2714a..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/DebugDataStores.svelte
+++ /dev/null
@@ -1,40 +0,0 @@
-<script lang="ts">
-	import { get } from 'svelte/store';
-	import {
-		yakklTokenDataStore,
-		yakklTokenDataCustomStore,
-		yakklCombinedTokenStore
-	} from '$lib/common/stores';
-
-	// Define the store map
-	const stores = {
-		yakklTokenDataStore,
-		yakklTokenDataCustomStore,
-		yakklCombinedTokenStore
-	};
-</script>
-
-<div class="space-y-4">
-	<h2 class="text-lg font-bold text-gray-700 dark:text-gray-300">Debug Data Stores</h2>
-
-	<div class="overflow-auto border rounded-lg shadow-md w-[1500px]">
-		<table class="table-auto w-full text-left text-sm text-gray-600 dark:text-gray-300">
-			<thead class="bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200">
-				<tr>
-					<th class="px-4 py-2 border-b font-semibold">Store Name</th>
-					<th class="px-4 py-2 border-b font-semibold">Content</th>
-				</tr>
-			</thead>
-			<tbody>
-				{#each Object.entries(stores) as [storeName, store]}
-					<tr class="odd:bg-white even:bg-gray-50 dark:odd:bg-gray-700 dark:even:bg-gray-800">
-						<td class="px-4 py-2 border-b">{storeName}</td>
-						<td class="px-4 py-2 border-b">
-							<pre class="whitespace-pre-wrap break-all">{JSON.stringify(get(store), null, 2)}</pre>
-						</td>
-					</tr>
-				{/each}
-			</tbody>
-		</table>
-	</div>
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/DynamicRSSNewsFeed.svelte b/packages/yakkl-wallet/src/lib/components/v1/DynamicRSSNewsFeed.svelte
deleted file mode 100644
index 0648bd8..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/DynamicRSSNewsFeed.svelte
+++ /dev/null
@@ -1,121 +0,0 @@
-<script lang="ts">
-	import { onMount, onDestroy } from 'svelte';
-	import { DynamicRSSFeedService, type RSSFeed } from '$lib/managers/DynamicRSSFeedService';
-	import NewsFeed from './NewsFeed.svelte';
-	import { log } from '$lib/managers/Logger';
-	import { browser_ext } from '$lib/common/environment';
-
-	interface Props {
-		wsUrl?: string;
-		useSampleFeed?: boolean;
-		maxItemsPerFeed?: number;
-		maxVisibleItems?: number;
-		className?: string;
-		locked?: boolean;
-		show?: boolean;
-		title?: string;
-	}
-
-	let {
-		wsUrl,
-		useSampleFeed = false,
-		maxVisibleItems = 3,
-		className = '',
-		locked = true,
-		maxItemsPerFeed = locked ? 3 : 0,
-		title = 'Crypto News',
-		show = $bindable(true)
-	}: Props = $props();
-
-	let newsItems = $state<RSSFeed['items']>([]);
-	let isLoading = $state(true);
-	let error = $state<string | null>(null);
-	let isConnected = $state(false);
-
-	const dynamicService = DynamicRSSFeedService.getInstance();
-	let unsubscribe: (() => void) | null = null;
-
-	onMount(async () => {
-		try {
-			if (useSampleFeed) {
-				const feed = await dynamicService.loadSampleFeed();
-				newsItems = feed.items.slice(0, maxItemsPerFeed);
-				isLoading = false;
-			} else if (wsUrl) {
-				unsubscribe = dynamicService.onFeedUpdate((feed) => {
-					newsItems = feed.items.slice(0, maxItemsPerFeed);
-					isLoading = false;
-					isConnected = true;
-				});
-
-				await dynamicService.connect(wsUrl);
-			} else {
-				throw new Error('Either wsUrl or useSampleFeed must be provided');
-			}
-		} catch (err) {
-			error = err instanceof Error ? err.message : 'Failed to load RSS feed';
-			log.error('RSS feed error:', false, err);
-			isLoading = false;
-		}
-	});
-
-	onDestroy(() => {
-		if (unsubscribe) {
-			unsubscribe();
-		}
-		if (wsUrl) {
-			dynamicService.disconnect();
-		}
-	});
-
-	async function refreshFeed() {
-		if (useSampleFeed) {
-			try {
-				isLoading = true;
-				const feed = await dynamicService.loadSampleFeed();
-				newsItems = feed.items.slice(0, maxItemsPerFeed);
-			} catch (err) {
-				error = err instanceof Error ? err.message : 'Failed to refresh feed';
-			} finally {
-				isLoading = false;
-			}
-		}
-		// For WebSocket feeds, the server should handle refresh requests
-	}
-</script>
-
-{#if show}
-	<div class={className}>
-		{#if isLoading}
-			<div class="flex items-center justify-center p-8">
-				<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"></div>
-			</div>
-		{:else if error}
-			<div class="flex flex-col items-center justify-center p-8 text-red-500">
-				<p class="text-sm font-medium">Error loading news</p>
-				<p class="text-xs mt-1">{error}</p>
-				<button
-					onclick={refreshFeed}
-					class="mt-4 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 text-sm"
-				>
-					Retry
-				</button>
-			</div>
-		{:else}
-			<div class="flex items-center justify-between mb-2">
-				<h2 class="text-lg font-semibold">{title}</h2>
-				<div class="flex items-center gap-2">
-					{#if wsUrl}
-						<span class="text-xs {isConnected ? 'text-green-500' : 'text-yellow-500'}">
-							{isConnected ? 'Connected' : 'Connecting...'}
-						</span>
-					{/if}
-					<button onclick={refreshFeed} class="text-sm text-blue-500 hover:text-blue-600">
-						Refresh
-					</button>
-				</div>
-			</div>
-			<NewsFeed {newsItems} {maxVisibleItems} {className} {locked} {maxItemsPerFeed} />
-		{/if}
-	</div>
-{/if}
diff --git a/packages/yakkl-wallet/src/lib/components/v1/EIP6963Provider.svelte b/packages/yakkl-wallet/src/lib/components/v1/EIP6963Provider.svelte
deleted file mode 100644
index 74241c4..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/EIP6963Provider.svelte
+++ /dev/null
@@ -1,169 +0,0 @@
-<script lang="ts">
-	import { onMount } from 'svelte';
-	import {
-		eip6963Providers,
-		selectedEIP6963Provider,
-		requestEIP6963Providers,
-		selectEIP6963Provider
-	} from '$lib/stores/eip6963';
-	import type { EIP6963ProviderDetail } from '$lib/managers/providers/network/ethereum_provider/eip-types';
-	import { log } from '$lib/managers/Logger';
-
-	let accounts: string[] = [];
-	let chainId: string | null = null;
-	let networkVersion: string | null = null;
-	let error: string | null = null;
-
-	// Helper function to format chainId for display
-	function formatChainId(chainIdHex: string): string {
-		try {
-			// If it's already a decimal string, return as is
-			if (!chainIdHex.startsWith('0x')) return chainIdHex;
-
-			// Convert hex to decimal
-			const decimal = parseInt(chainIdHex, 16);
-			return `${chainIdHex} (${decimal})`;
-		} catch (e) {
-			log.error('Error formatting chainId', true, e);
-			return chainIdHex;
-		}
-	}
-
-	async function updateProviderState(provider: EIP6963ProviderDetail) {
-		try {
-			// Get initial state
-			const [initialAccounts, initialChainId, initialNetVersion] = await Promise.all([
-				provider.provider.request({ method: 'eth_accounts' }),
-				provider.provider.request({ method: 'eth_chainId' }),
-				provider.provider.request({ method: 'net_version' })
-			]);
-
-			log.debug('Initial provider state', true, {
-				accounts: initialAccounts,
-				chainId: initialChainId,
-				networkVersion: initialNetVersion
-			});
-
-			accounts = initialAccounts as string[];
-			chainId = initialChainId as string;
-			networkVersion = initialNetVersion as string;
-		} catch (e) {
-			log.error('Error getting initial provider state', true, e);
-		}
-	}
-
-	async function handleSelectProvider(provider: EIP6963ProviderDetail) {
-		try {
-			log.debug('Selecting provider', true, { provider: provider.info.name });
-			selectEIP6963Provider(provider);
-
-			// Update initial state
-			await updateProviderState(provider);
-
-			// Request accounts (this will trigger permission request)
-			try {
-				const requestedAccounts = (await provider.provider.request({
-					method: 'eth_requestAccounts'
-				})) as string[];
-				log.debug('Requested accounts received', true, { accounts: requestedAccounts });
-				accounts = requestedAccounts;
-			} catch (e) {
-				log.error('Error requesting accounts', true, e);
-				// Don't throw here - we still want to show the read-only state
-			}
-
-			// Listen for chain changes
-			provider.provider.on('chainChanged', (newChainId: string) => {
-				log.debug('Chain changed', true, { newChainId });
-				chainId = newChainId;
-			});
-
-			// Listen for account changes
-			provider.provider.on('accountsChanged', (newAccounts: string[]) => {
-				log.debug('Accounts changed', true, { newAccounts });
-				accounts = newAccounts;
-			});
-		} catch (e) {
-			error = e instanceof Error ? e.message : 'Failed to connect to provider';
-			log.error('Error selecting provider', true, e);
-		}
-	}
-
-	onMount(() => {
-		// Listen for provider announcements
-		const handleAnnounce = (event: CustomEvent<EIP6963ProviderDetail>) => {
-			const provider = event.detail;
-			log.debug('Provider announced', true, { provider: provider.info.name });
-			eip6963Providers.update((providers) => {
-				// Update existing provider or add new one
-				const existingIndex = providers.findIndex((p) => p.info.uuid === provider.info.uuid);
-				if (existingIndex >= 0) {
-					providers[existingIndex] = provider;
-				} else {
-					providers = [...providers, provider];
-				}
-				return providers;
-			});
-
-			// If this is the selected provider, update its state
-			if ($selectedEIP6963Provider?.info.uuid === provider.info.uuid) {
-				updateProviderState(provider);
-			}
-		};
-
-		window.addEventListener('eip6963:announceProvider', handleAnnounce as EventListener);
-		requestEIP6963Providers();
-
-		return () => {
-			window.removeEventListener('eip6963:announceProvider', handleAnnounce as EventListener);
-		};
-	});
-</script>
-
-<div class="p-4 max-w-3xl mx-auto">
-	<h2 class="text-2xl font-semibold mb-4">Available Wallets</h2>
-
-	{#if $eip6963Providers.length === 0}
-		<p class="text-gray-600">No wallets available. Please install a compatible wallet.</p>
-	{:else}
-		<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 my-4">
-			{#each $eip6963Providers as provider}
-				<div class="flex items-center p-4 border border-gray-200 rounded-lg bg-white shadow-sm">
-					<img src={provider.info.icon} alt={provider.info.name} class="w-8 h-8" />
-					<div class="ml-4 flex-grow">
-						<h3 class="text-base font-medium">{provider.info.name}</h3>
-						<p class="text-sm text-gray-500 mt-1">ID: {provider.info.uuid}</p>
-					</div>
-					<button
-						on:click={() => handleSelectProvider(provider)}
-						class="px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 transition-colors"
-					>
-						Select
-					</button>
-				</div>
-			{/each}
-		</div>
-	{/if}
-
-	{#if $selectedEIP6963Provider}
-		<div class="mt-8 p-4 border border-gray-200 rounded-lg bg-gray-50">
-			<h3 class="text-lg font-medium mb-2">Connected Provider</h3>
-			<p class="text-gray-700">Name: {$selectedEIP6963Provider.info.name}</p>
-			{#if accounts.length > 0}
-				<p class="text-gray-700 mt-1">Accounts: {accounts.join(', ')}</p>
-			{/if}
-			{#if chainId}
-				<p class="text-gray-700 mt-1">Chain ID: {formatChainId(chainId)}</p>
-			{/if}
-			{#if networkVersion}
-				<p class="text-gray-700 mt-1">Network Version: {networkVersion}</p>
-			{/if}
-		</div>
-	{/if}
-
-	{#if error}
-		<div class="mt-4 p-4 bg-red-50 text-red-700 rounded">
-			{error}
-		</div>
-	{/if}
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/EditControls.svelte b/packages/yakkl-wallet/src/lib/components/v1/EditControls.svelte
deleted file mode 100644
index 176a277..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/EditControls.svelte
+++ /dev/null
@@ -1,189 +0,0 @@
-<!-- EditControls.svelte -->
-<script lang="ts">
-	import { Edit2Icon, TrashIcon, ClipboardIcon } from 'svelte-feather-icons';
-	import { fade } from 'svelte/transition';
-	import { onDestroy } from 'svelte';
-	import { UnifiedTimerManager } from '$lib/managers/UnifiedTimerManager';
-
-	interface Props {
-		onEdit?: () => void;
-		onDelete?: () => void;
-		onCopy?: () => void;
-		controls?: string[];
-		hasBalance?: boolean;
-	}
-
-	let {
-		onEdit = () => {},
-		onDelete = () => {},
-		onCopy = () => {},
-		controls = ['copy', 'edit', 'delete'],
-		hasBalance = false
-	}: Props = $props();
-
-	let copied = $state(false);
-	let edited = $state(false);
-	let deleted = $state(false);
-	let hoverText = $state('');
-
-	const timerManager = UnifiedTimerManager.getInstance();
-
-	function handleCopy(event: MouseEvent) {
-		event.stopPropagation();
-		onCopy();
-		copied = true;
-		timerManager.addTimeout(
-			'copy-feedback',
-			() => {
-				copied = false;
-			},
-			1000
-		);
-		timerManager.startTimeout('copy-feedback');
-	}
-
-	function handleEdit(event: MouseEvent) {
-		event.stopPropagation();
-		onEdit();
-		edited = true;
-		timerManager.addTimeout(
-			'edit-feedback',
-			() => {
-				edited = false;
-			},
-			1000
-		);
-		timerManager.startTimeout('edit-feedback');
-	}
-
-	function handleDelete(event: MouseEvent) {
-		event.stopPropagation();
-		onDelete();
-		deleted = true;
-		timerManager.addTimeout(
-			'delete-feedback',
-			() => {
-				deleted = false;
-			},
-			1000
-		);
-		timerManager.startTimeout('delete-feedback');
-	}
-
-	function showHoverText(text: string) {
-		// Prevent reactive loops by checking if text actually changed
-		if (hoverText === text) return;
-		
-		hoverText = text;
-		
-		// Clean up existing timeout to prevent conflicts
-		timerManager.stopTimeout('hover-text');
-		timerManager.removeTimeout('hover-text');
-		
-		// Only add new timeout if text is not empty
-		if (text) {
-			timerManager.addTimeout(
-				'hover-text',
-				() => {
-					hoverText = '';
-				},
-				1000
-			);
-			timerManager.startTimeout('hover-text');
-		}
-	}
-
-	// Cleanup all timers when component is destroyed
-	onDestroy(() => {
-		timerManager.stopTimeout('copy-feedback');
-		timerManager.removeTimeout('copy-feedback');
-		timerManager.stopTimeout('edit-feedback');
-		timerManager.removeTimeout('edit-feedback');
-		timerManager.stopTimeout('delete-feedback');
-		timerManager.removeTimeout('delete-feedback');
-		timerManager.stopTimeout('hover-text');
-		timerManager.removeTimeout('hover-text');
-	});
-</script>
-
-<div
-	class="absolute top-2 right-2 flex items-center space-x-2 bg-white rounded-full p-1 shadow-md z-10"
->
-	{#if controls.includes('copy')}
-		<button
-			type="button"
-			class="text-gray-400 hover:text-gray-500 focus:outline-none relative"
-			onclick={handleCopy}
-			onmouseenter={() => showHoverText('Copy')}
-			onmouseleave={() => (hoverText = '')}
-		>
-			{#if copied}
-				<div class="text-green-500" transition:fade={{ duration: 200 }}>
-					<ClipboardIcon class="h-5 w-5" />
-				</div>
-			{:else}
-				<ClipboardIcon class="h-5 w-5" />
-			{/if}
-			{#if hoverText === 'Copy'}
-				<div
-					class="absolute top-full mt-2 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white text-xs px-2 py-1 rounded shadow-md"
-					transition:fade={{ duration: 200 }}
-				>
-					Copy
-				</div>
-			{/if}
-		</button>
-	{/if}
-	{#if controls.includes('edit')}
-		<button
-			type="button"
-			class="text-gray-400 hover:text-gray-500 focus:outline-none relative"
-			onclick={handleEdit}
-			onmouseenter={() => showHoverText('Edit')}
-			onmouseleave={() => (hoverText = '')}
-		>
-			{#if edited}
-				<div class="text-blue-500" transition:fade={{ duration: 200 }}>
-					<Edit2Icon class="h-5 w-5" />
-				</div>
-			{:else}
-				<Edit2Icon class="h-5 w-5" />
-			{/if}
-			{#if hoverText === 'Edit'}
-				<div
-					class="absolute top-full mt-2 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white text-xs px-2 py-1 rounded shadow-md"
-					transition:fade={{ duration: 200 }}
-				>
-					Edit
-				</div>
-			{/if}
-		</button>
-	{/if}
-	{#if controls.includes('delete')}
-		<button
-			type="button"
-			class="{hasBalance
-				? 'text-red-500 hover:text-red-600'
-				: 'text-gray-400 hover:text-gray-500'} focus:outline-none relative"
-			onclick={handleDelete}
-			onmouseenter={() => showHoverText('Delete')}
-			onmouseleave={() => (hoverText = '')}
-		>
-			{#if deleted}
-				<div class="text-red-500" transition:fade={{ duration: 200 }}>
-					<TrashIcon class="h-5 w-5" />
-				</div>
-			{:else}
-				<TrashIcon class="h-5 w-5" />
-			{/if}
-			{#if hoverText === 'Delete'}
-				<div
-					class="absolute top-full mt-2 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white text-xs px-2 py-1 rounded shadow-md"
-					transition:fade={{ duration: 200 }}
-				>
-					Delete
-				</div>
-			{/if}
-		</button>
-	{/if}
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/EditWatchAccount.svelte b/packages/yakkl-wallet/src/lib/components/v1/EditWatchAccount.svelte
deleted file mode 100644
index 1b232e2..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/EditWatchAccount.svelte
+++ /dev/null
@@ -1,372 +0,0 @@
-<!-- EditWatchAccount.svelte -->
-<script lang="ts">
-	import { onMount } from 'svelte';
-	import { createForm } from 'svelte-forms-lib';
-	import * as yup from 'yup';
-	import Modal from './Modal.svelte';
-	import ErrorNoAction from './ErrorNoAction.svelte';
-	import {
-		setProfileStorage,
-		getYakklWatchList,
-		setYakklWatchListStorage,
-		setYakklCurrentlySelectedStorage,
-		getYakklCurrentlySelected,
-		getMiscStore,
-		getSettings
-	} from '$lib/common/stores';
-	import { encryptData, decryptData } from '$lib/common/encryption';
-	import { deepCopy } from '$lib/utilities/utilities';
-	import {
-		isEncryptedData,
-		type CurrentlySelectedData,
-		type Profile,
-		type ProfileData,
-		type Settings,
-		type YakklCurrentlySelected,
-		type YakklWatch
-	} from '$lib/common';
-	import { log } from '$lib/common/logger-wrapper';
-
-	interface Props {
-		show?: boolean;
-		watchAccount?: YakklWatch | null;
-		className?: string;
-		onCancel?: () => void;
-		onComplete?: (watch: YakklWatch) => void;
-	}
-
-	let {
-		show = $bindable(false),
-		watchAccount = null,
-		className = 'z-[999]',
-		onCancel = () => {},
-		onComplete = () => {}
-	}: Props = $props();
-
-	let currentlySelected: YakklCurrentlySelected;
-	let yakklMiscStore: string;
-	let yakklWatchListStore: YakklWatch[];
-	let yakklSettingsStore: Settings | null;
-	let error = $state('');
-	let isSaving = $state(false);
-	let showError = $state(false);
-	let errorValue = $state('');
-
-	onMount(async () => {
-		currentlySelected = await getYakklCurrentlySelected();
-		yakklMiscStore = getMiscStore();
-		yakklWatchListStore = await getYakklWatchList();
-		yakklSettingsStore = await getSettings();
-	});
-
-	const validationSchema = yup.object().shape({
-		blockchain: yup.string().required('Please enter the crypto account network (watch-only)'),
-		address: yup.string().required('Please enter the crypto account (watch-only)'),
-		addressName: yup.string().required('Please enter the account name (e.g., address alias)'),
-		includeInPortfolio: yup
-			.boolean()
-			.required('Please select if you want to include this account in your portfolio totals'),
-		addressAlias: yup.string().optional(),
-		url: yup.string().optional()
-	});
-
-	const { form, errors, isValid, touched, updateField } = createForm({
-		initialValues: {
-			blockchain: 'Ethereum',
-			address: '',
-			addressName: '',
-			includeInPortfolio: false,
-			addressAlias: '',
-			url: ''
-		},
-		validationSchema,
-		onSubmit: async (data) => {
-			await handleUpdateWatch(data);
-		}
-	});
-
-	// Custom submit handler for Svelte 5
-	async function handleFormSubmit(event: Event) {
-		event.preventDefault();
-		
-		// Validate the form
-		if (!$isValid) {
-			return;
-		}
-		
-		// Call handleUpdateWatch directly with form values
-		await handleUpdateWatch($form);
-	}
-
-	// Load watch account data when modal opens
-	$effect(() => {
-		if (show && watchAccount) {
-			loadWatchAccountData();
-		}
-	});
-
-	function loadWatchAccountData() {
-		if (!watchAccount) return;
-
-		// Update form with watch account data
-		updateField('blockchain', watchAccount.blockchain || 'Ethereum');
-		updateField('address', watchAccount.address || '');
-		updateField('addressName', watchAccount.name || '');
-		updateField('includeInPortfolio', watchAccount.includeInPortfolio || false);
-		updateField('addressAlias', watchAccount.addressAlias || '');
-		updateField('url', watchAccount.explorer || '');
-	}
-
-	async function handleUpdateWatch(data: any) {
-		if (!watchAccount) {
-			error = 'No watch account selected for editing';
-			return;
-		}
-
-		isSaving = true;
-		error = '';
-
-		try {
-			let watchList: YakklWatch[] = [];
-
-			if (isEncryptedData(currentlySelected.data)) {
-				await decryptData(currentlySelected.data, yakklMiscStore).then((result) => {
-					currentlySelected.data = result as CurrentlySelectedData;
-				});
-			}
-
-			let profile: Profile = deepCopy((currentlySelected.data as CurrentlySelectedData).profile);
-			if (isEncryptedData(profile.data)) {
-				await decryptData(profile.data, yakklMiscStore).then((result) => {
-					profile.data = result as ProfileData;
-				});
-			}
-
-			// Update the watch account in profile data
-			const profileWatchList = (profile.data as ProfileData).watchList || [];
-			const watchIndex = profileWatchList.findIndex(
-				(watch: YakklWatch) => 
-					watch.address === watchAccount!.address && 
-					watch.blockchain === watchAccount!.blockchain
-			);
-
-			if (watchIndex !== -1) {
-				// Update existing watch account
-				const updatedWatch: YakklWatch = {
-					...profileWatchList[watchIndex],
-					name: data.addressName,
-					blockchain: data.blockchain,
-					address: data.address,
-					includeInPortfolio: data.includeInPortfolio,
-					addressAlias: data.addressAlias,
-					explorer: data.url,
-					updateDate: new Date().toISOString()
-				};
-
-				profileWatchList[watchIndex] = updatedWatch;
-			}
-
-			// Encrypt and save profile
-			await encryptData(profile.data, yakklMiscStore).then(async (result) => {
-				profile.data = result;
-				await setProfileStorage(profile);
-			});
-
-			(currentlySelected.data as CurrentlySelectedData).profile = deepCopy(profile);
-			await setYakklCurrentlySelectedStorage(currentlySelected);
-
-			// Update watch list storage
-			watchList = await getYakklWatchList();
-			if (watchList?.length > 0) {
-				const storageWatchIndex = watchList.findIndex(
-					(account) => 
-						account.address === watchAccount!.address && 
-						account.blockchain === watchAccount!.blockchain
-				);
-
-				if (storageWatchIndex !== -1) {
-					watchList[storageWatchIndex] = {
-						...watchList[storageWatchIndex],
-						name: data.addressName,
-						blockchain: data.blockchain,
-						address: data.address,
-						includeInPortfolio: data.includeInPortfolio,
-						addressAlias: data.addressAlias,
-						explorer: data.url,
-						updateDate: new Date().toISOString()
-					};
-
-					await setYakklWatchListStorage(watchList);
-				}
-			}
-
-			// Call completion callback
-			onComplete(watchAccount);
-
-			// Close modal with a small delay to ensure state updates complete
-			setTimeout(() => {
-				show = false;
-				isSaving = false;
-			}, 100);
-
-		} catch (e: any) {
-			const errorMsg = 'Error updating watch account: ' + e.message;
-			log.error('Error updating watch account:', false, e);
-			error = errorMsg;
-			errorValue = errorMsg;
-			showError = true;
-			isSaving = false;
-		}
-	}
-
-	function closeModal() {
-		onCancel();
-		resetForm();
-		show = false;
-	}
-
-	function resetForm() {
-		if (watchAccount) {
-			loadWatchAccountData();
-		}
-	}
-
-	function handleErrorClose() {
-		showError = false;
-		error = '';
-		errorValue = '';
-	}
-</script>
-
-<div class="relative {className}">
-	<Modal bind:show title="Edit Watch Account" onClose={closeModal}>
-		<div class="p-6">
-			<p class="text-sm text-blue-500 mb-4">
-				Edit your <strong>WATCH-ONLY address</strong> details. This address allows you to monitor
-				balances and transactions without the ability to spend funds.
-			</p>
-			<form onsubmit={handleFormSubmit} class="space-y-4">
-				<div>
-					<label for="blockchain" class="block text-sm font-medium text-gray-700 dark:text-gray-200">
-						Blockchain
-					</label>
-					<select
-						id="blockchain"
-						class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"
-						bind:value={$form.blockchain}
-					>
-						<option value="Ethereum">Ethereum</option>
-						<option value="Polygon">Polygon</option>
-						<option value="Solana">Solana</option>
-						<option value="Bitcoin">Bitcoin</option>
-					</select>
-				</div>
-				<div>
-					<label for="address" class="block text-sm font-medium text-gray-700 dark:text-gray-200">
-						Address
-					</label>
-					<input
-						type="text"
-						id="address"
-						class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"
-						bind:value={$form.address}
-					/>
-					{#if $errors.address}
-						<p class="mt-2 text-sm text-red-600">{$errors.address}</p>
-					{/if}
-				</div>
-				<div>
-					<label for="addressName" class="block text-sm font-medium text-gray-700 dark:text-gray-200">
-						Address Name
-					</label>
-					<input
-						type="text"
-						id="addressName"
-						class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"
-						bind:value={$form.addressName}
-					/>
-					{#if $errors.addressName}
-						<p class="mt-2 text-sm text-red-600">{$errors.addressName}</p>
-					{/if}
-				</div>
-				<div class="flex items-center">
-					<input
-						type="checkbox"
-						id="includeInPortfolio"
-						class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"
-						bind:checked={$form.includeInPortfolio}
-					/>
-					<label for="includeInPortfolio" class="ml-2 block text-sm text-gray-700 dark:text-gray-200">
-						Include this account in your portfolio totals?
-					</label>
-				</div>
-				<div>
-					<label for="addressAlias" class="block text-sm font-medium text-gray-700 dark:text-gray-200">
-						Address Alias (optional)
-					</label>
-					<input
-						type="text"
-						id="addressAlias"
-						class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"
-						bind:value={$form.addressAlias}
-					/>
-				</div>
-				<div>
-					<label for="url" class="block text-sm font-medium text-gray-700 dark:text-gray-200">
-						Explorer URL - checking address data (optional)
-					</label>
-					<input
-						type="text"
-						id="url"
-						class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"
-						bind:value={$form.url}
-					/>
-				</div>
-				<div class="pt-5">
-					<div class="flex justify-end space-x-4">
-						<button
-							type="button"
-							class="rounded-md border border-gray-300 bg-white py-2 px-4 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"
-							onclick={closeModal}
-							disabled={isSaving}
-						>
-							Cancel
-						</button>
-						<button
-							type="button"
-							class="rounded-md border border-gray-300 bg-white py-2 px-4 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"
-							onclick={resetForm}
-							disabled={isSaving}
-						>
-							Reset
-						</button>
-						<button
-							type="submit"
-							class="rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"
-							disabled={!$isValid || isSaving}
-						>
-							{#if isSaving}
-								<span class="flex items-center">
-									<div class="animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"></div>
-									Saving...
-								</span>
-							{:else}
-								Save Changes
-							{/if}
-						</button>
-					</div>
-				</div>
-			</form>
-			{#if error}
-				<p class="mt-4 text-sm text-red-600">{error}</p>
-			{/if}
-		</div>
-	</Modal>
-</div>
-
-<ErrorNoAction
-	bind:show={showError}
-	value={errorValue}
-	title="Edit Watch Account Error"
-	onClose={handleErrorClose}
-/>
\ No newline at end of file
diff --git a/packages/yakkl-wallet/src/lib/components/v1/EmergencyKit.svelte b/packages/yakkl-wallet/src/lib/components/v1/EmergencyKit.svelte
deleted file mode 100644
index 08f5592..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/EmergencyKit.svelte
+++ /dev/null
@@ -1,390 +0,0 @@
-<script lang="ts">
-	//
-	// NOTE: This for the Bulk Emergency Kit. The single EmergencyKit is only for YakklAccount or yakklPrimaryAccount.
-	//
-
-	import { EmergencyKitManager } from '$lib/managers/EmergencyKitManager';
-	import {
-		getProfile,
-		getPreferences,
-		getSettings,
-		getYakklCurrentlySelected,
-		getYakklContacts,
-		getYakklChats,
-		getYakklAccounts,
-		getYakklPrimaryAccounts,
-		getYakklWatchList,
-		getYakklBlockedList,
-		getYakklConnectedDomains,
-		getMiscStore,
-		setProfileStorage,
-		setPreferencesStorage,
-		setSettingsStorage,
-		setYakklCurrentlySelectedStorage,
-		setYakklContactsStorage,
-		setYakklChatsStorage,
-		setYakklAccountsStorage,
-		setYakklPrimaryAccountsStorage,
-		setYakklWatchListStorage,
-		setYakklBlockedListStorage,
-		setYakklConnectedDomainsStorage,
-		profileStore,
-		yakklPreferencesStore,
-		yakklSettingsStore,
-		yakklCurrentlySelectedStore,
-		yakklContactsStore,
-		yakklChatsStore,
-		yakklAccountsStore,
-		yakklPrimaryAccountsStore,
-		yakklWatchListStore,
-		yakklBlockedListStore,
-		yakklConnectedDomainsStore,
-		getYakklTokenData,
-		getYakklTokenDataCustom,
-		setYakklTokenDataStorage,
-		yakklTokenDataStore,
-		setYakklTokenDataCustomStorage,
-		yakklTokenDataCustomStore,
-		setYakklCombinedTokenStorage,
-		yakklCombinedTokenStore,
-		setYakklWalletProvidersStorage,
-		setYakklWalletBlockchainsStorage,
-		yakklWalletBlockchainsStore,
-		yakklWalletProvidersStore,
-		getYakklCombinedToken,
-		getYakklWalletProviders,
-		getYakklWalletBlockchains
-	} from '$lib/common/stores';
-	import {
-		VERSION,
-		type EmergencyKitMetaData,
-		isEncryptedData,
-		type CurrentlySelectedData
-	} from '$lib/common';
-	import { browserSvelte, browser_ext } from '$lib/common/environment';
-	import { decryptData } from '$lib/common/encryption';
-	import Confirmation from './Confirmation.svelte';
-	import { log } from '$lib/managers/Logger';
-	import { safeLogout } from '$lib/common/safeNavigate';
-
-	interface Props {
-		mode?: 'import' | 'export' | 'restore';
-		onComplete: (success: boolean, message: string) => void;
-		onCancel?: () => void;
-	}
-
-	let { mode = 'export', onComplete, onCancel = () => {} }: Props = $props();
-
-	let file: File | null = $state(null); // File name to export to or import from
-	let metadata: EmergencyKitMetaData | null = $state(null);
-	let loading = $state(false);
-	let error = $state('');
-	let showConfirmation = $state(false);
-
-	async function handleFileSelect(event: Event) {
-		const target = event.target as HTMLInputElement;
-		if (target.files && target.files.length > 0) {
-			file = target.files[0];
-			try {
-				metadata = await EmergencyKitManager.readBulkEmergencyKitMetadata(file);
-			} catch (err) {
-				error = 'Failed to read emergency kit metadata';
-				log.error(err);
-			}
-		}
-	}
-
-	async function handleExport() {
-		loading = true;
-		error = '';
-		try {
-			const preferences = await getPreferences();
-			const settings = await getSettings();
-			const profile = await getProfile();
-			const currentlySelected = await getYakklCurrentlySelected();
-			const contacts = await getYakklContacts();
-			const chats = await getYakklChats();
-			const accounts = await getYakklAccounts();
-			const primaryAccounts = await getYakklPrimaryAccounts();
-			const watchList = await getYakklWatchList();
-			const blockedList = await getYakklBlockedList();
-			const connectedDomains = await getYakklConnectedDomains();
-			const passwordOrSaltedKey = getMiscStore();
-			const tokenData = await getYakklTokenData();
-			const tokenDataCustom = await getYakklTokenDataCustom();
-			const combinedTokenStore = await getYakklCombinedToken();
-			const walletProviders = await getYakklWalletProviders();
-			const walletBlockchains = await getYakklWalletBlockchains();
-
-			if (!preferences || !settings || !profile || !currentlySelected || !passwordOrSaltedKey) {
-				throw new Error('Missing required data for export');
-			}
-
-			const bulkEmergencyKit = await EmergencyKitManager.createBulkEmergencyKit(
-				preferences,
-				settings,
-				profile,
-				currentlySelected,
-				contacts ?? [],
-				chats ?? [],
-				accounts ?? [],
-				primaryAccounts ?? [],
-				watchList ?? [],
-				blockedList ?? [],
-				connectedDomains ?? [],
-				passwordOrSaltedKey,
-				tokenData ?? [],
-				tokenDataCustom ?? [],
-				combinedTokenStore ?? [],
-				walletProviders ?? [],
-				walletBlockchains ?? []
-			);
-
-			const fileName = await EmergencyKitManager.downloadBulkEmergencyKit(bulkEmergencyKit);
-			onComplete(true, 'Emergency kit exported successfully as ' + fileName);
-		} catch (err) {
-			error = err instanceof Error ? err.message : 'Failed to export emergency kit';
-			log.error(err);
-			onComplete(false, error);
-		} finally {
-			loading = false;
-		}
-	}
-
-	async function handleImport() {
-		if (!file) {
-			error = 'Please select a file to import';
-			return;
-		}
-		showConfirmation = true;
-	}
-
-	async function confirmImport() {
-		showConfirmation = false;
-		loading = true;
-		error = '';
-		try {
-			const passwordOrSaltedKey = getMiscStore();
-			const { newData, existingData } = await EmergencyKitManager.importBulkEmergencyKit(
-				file!,
-				passwordOrSaltedKey
-			);
-
-			// Update local storage and Svelte stores
-			await updateStorageAndStores(newData, existingData);
-
-			// After successful import, send YAKKL_ACCOUNT message with the currently selected account
-			// Come back to this later - this is more cosmetic and not needed for now.
-			// if (browserSvelte) {
-			//   const currentlySelected = await getYakklCurrentlySelected();
-			//   if (currentlySelected && currentlySelected.data) {
-			//     let accountData = currentlySelected.data;
-			//     if (isEncryptedData(accountData)) {
-			//       accountData = await decryptData(accountData, passwordOrSaltedKey) as CurrentlySelectedData;
-			//     }
-			//     const account = (accountData as CurrentlySelectedData).account;
-
-			//     browser_ext.runtime.sendMessage({
-			//       type: 'YAKKL_ACCOUNT',
-			//       data: account
-			//     }).catch((error: Error) => {
-			//       log.error('Error sending account message', true, error);
-			//     });
-			//   }
-			// }
-
-			onComplete(true, `Emergency kit imported successfully for: ${file!.name}`);
-			safeLogout();
-		} catch (err) {
-			error = `Failed to import emergency kit for: ${file!.name}`;
-			log.error(err);
-			onComplete(false, `Failed to import emergency kit for: ${file!.name}`);
-		} finally {
-			loading = false;
-		}
-	}
-
-	async function updateStorageAndStores(newData: any, existingData: any) {
-		// Update this when new data stores are added to the wallet UNLESS it's not important to restore the given data store.
-		// Compare with EmergencyKitManager.ts for the list of data stores that are updated.
-		const updateFunctions = [
-			{
-				key: 'yakklPreferencesStore',
-				setStorage: setPreferencesStorage,
-				store: yakklPreferencesStore
-			},
-			{ key: 'yakklSettingsStore', setStorage: setSettingsStorage, store: yakklSettingsStore },
-			{ key: 'profileStore', setStorage: setProfileStorage, store: profileStore },
-			{
-				key: 'yakklCurrentlySelectedStore',
-				setStorage: setYakklCurrentlySelectedStorage,
-				store: yakklCurrentlySelectedStore
-			},
-			{ key: 'yakklContactsStore', setStorage: setYakklContactsStorage, store: yakklContactsStore },
-			{ key: 'yakklChatsStore', setStorage: setYakklChatsStorage, store: yakklChatsStore },
-			{ key: 'yakklAccountsStore', setStorage: setYakklAccountsStorage, store: yakklAccountsStore },
-			{
-				key: 'yakklPrimaryAccountsStore',
-				setStorage: setYakklPrimaryAccountsStorage,
-				store: yakklPrimaryAccountsStore
-			},
-			{
-				key: 'yakklWatchListStore',
-				setStorage: setYakklWatchListStorage,
-				store: yakklWatchListStore
-			},
-			{
-				key: 'yakklBlockedListStore',
-				setStorage: setYakklBlockedListStorage,
-				store: yakklBlockedListStore
-			},
-			{
-				key: 'yakklConnectedDomainsStore',
-				setStorage: setYakklConnectedDomainsStorage,
-				store: yakklConnectedDomainsStore
-			},
-			{
-				key: 'yakklTokenDataStore',
-				setStorage: setYakklTokenDataStorage,
-				store: yakklTokenDataStore
-			},
-			{
-				key: 'yakklTokenDataCustomStore',
-				setStorage: setYakklTokenDataCustomStorage,
-				store: yakklTokenDataCustomStore
-			},
-			{
-				key: 'yakklCombinedTokenStore',
-				setStorage: setYakklCombinedTokenStorage,
-				store: yakklCombinedTokenStore
-			},
-			{
-				key: 'yakklWalletProvidersStore',
-				setStorage: setYakklWalletProvidersStorage,
-				store: yakklWalletProvidersStore
-			},
-			{
-				key: 'yakklWalletBlockchainsStore',
-				setStorage: setYakklWalletBlockchainsStorage,
-				store: yakklWalletBlockchainsStore
-			}
-		];
-
-		// Validate VERSION once before the loop
-		if (typeof VERSION === 'undefined' || typeof VERSION !== 'string' || VERSION.trim() === '') {
-			log.error('VERSION is not properly defined.');
-			return;
-		}
-
-		// This version now updates the version of all of the data stores that have a version property.
-		for (const { key, setStorage, store } of updateFunctions) {
-			const data = newData[key] || existingData[key]; // Currently a placeholder for future use and existingData is not used! This is for future use if using something like a backend database.
-			if (data) {
-				// Check if data is a valid object and has a version property
-				if (data && typeof data === 'object' && !Array.isArray(data)) {
-					// Update version if it exists (either as 'version' or 'VERSION')
-					if ('version' in data || 'VERSION' in data) {
-						data['version'] = VERSION;
-						log.info(`Updated version for ${key} to ${VERSION}`);
-					}
-				} else if (data && typeof data === 'object' && Array.isArray(data)) {
-					log.warn(`${key} contains array data - version not updated`);
-				} else {
-					log.error(`Invalid data object for ${key}. Cannot assign version.`);
-					continue; // Skip this iteration
-				}
-
-				try {
-					await setStorage(data);
-					store.set(data);
-				} catch (error: any) {
-					log.error(`Failed to update ${key}:`, false, error);
-				}
-			}
-		}
-
-		// Previous version of the code that only updated the version of preferences
-		// for (const { key, setStorage, store } of updateFunctions) {
-		//   const data = newData[key] || existingData[key];
-		//   if (data) {
-		//     if ( key === 'yakklPreferencesStore') {
-		//       if (data && typeof data === 'object' && !Array.isArray(data)) {
-		//         // Keep the metadata version of the latest version
-		//         if (typeof VERSION !== 'undefined' && typeof VERSION === 'string' && VERSION.trim() !== '') {
-		//           data['version'] = VERSION;
-		//         } else {
-		//           log.error("VERSION is not properly defined.");
-		//         }
-		//       } else {
-		//         log.error("Invalid 'data' object. Cannot assign 'version'.");
-		//       }
-		//     }
-
-		//     await setStorage(data);
-		//     store.set(data);
-		//   }
-		// }
-	}
-</script>
-
-<div class="p-4">
-	<h2 class="text-2xl font-bold mb-4">{mode === 'export' ? 'Export' : 'Import'} Emergency Kit</h2>
-
-	{#if mode === 'export'}
-		<button
-			onclick={handleExport}
-			class="bg-blue-500 text-white px-4 py-2 rounded"
-			disabled={loading}
-		>
-			{loading ? 'Exporting...' : 'Export Emergency Kit'}
-		</button>
-	{:else}
-		<div class="mb-4">
-			<label for="importFile" class="block mb-2">Select File to Import:</label>
-			<input
-				type="file"
-				id="importFile"
-				onchange={handleFileSelect}
-				accept=".json"
-				class="w-full p-2 border rounded"
-			/>
-		</div>
-		{#if metadata}
-			<div class="mb-4">
-				<h3 class="text-lg font-semibold">Emergency Kit Metadata:</h3>
-				<p>ID: {metadata.id}</p>
-				<p>Created: {new Date(metadata.createDate).toLocaleString()}</p>
-				<p>Version: {metadata.version}</p>
-				<p>Type: {metadata.type}</p>
-				<p>Files: {metadata.files}</p>
-			</div>
-			<div class="mb-4">
-				<h4 class="text-lg font-bold">
-					YAKKL will <span class="text-red-500 underline">auto logout</span> once the import is complete!
-					Simply login again to continue.
-				</h4>
-			</div>
-		{/if}
-		<button
-			onclick={handleImport}
-			class="bg-green-500 text-white px-4 py-2 rounded"
-			disabled={loading || !file}
-		>
-			{loading ? 'Importing...' : 'Import'}
-		</button>
-		<button onclick={onCancel} class="bg-red-400 text-white px-4 py-2 rounded"> Cancel </button>
-	{/if}
-
-	{#if error}
-		<p class="text-red-500 mt-4">{error}</p>
-	{/if}
-</div>
-
-<Confirmation
-	bind:show={showConfirmation}
-	title="Confirm Import"
-	message="Are you sure you want to continue? Doing so will override your current Smart Wallet data!"
-	confirmText="Yes, Import"
-	rejectText="Cancel"
-	onConfirm={confirmImport}
-/>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/EmergencyKitModal.svelte b/packages/yakkl-wallet/src/lib/components/v1/EmergencyKitModal.svelte
deleted file mode 100644
index c873a26..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/EmergencyKitModal.svelte
+++ /dev/null
@@ -1,33 +0,0 @@
-<script lang="ts">
-	import Modal from './Modal.svelte';
-	import EmergencyKit from './EmergencyKit.svelte';
-
-	interface Props {
-		show?: boolean;
-		mode?: 'import' | 'export';
-		onComplete?: (success: boolean, message: string) => void;
-		onCancel?: () => void;
-		onClose?: () => void;
-	}
-
-	let {
-		show = $bindable(false),
-		mode = 'import',
-		onComplete = handleEmergencyKitComplete,
-		onCancel = $bindable(() => {
-			show = false;
-		}),
-		onClose = $bindable(() => {
-			show = false;
-		})
-	}: Props = $props();
-
-	function handleEmergencyKitComplete(success: boolean, message: string) {
-		show = false;
-		onComplete?.(success, message);
-	}
-</script>
-
-<Modal bind:show {onCancel} {onClose} title="Emergency Kit">
-	<EmergencyKit {mode} {onComplete} {onCancel} />
-</Modal>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/EnhancedDeleteConfirmation.svelte b/packages/yakkl-wallet/src/lib/components/v1/EnhancedDeleteConfirmation.svelte
deleted file mode 100644
index 48aeca8..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/EnhancedDeleteConfirmation.svelte
+++ /dev/null
@@ -1,390 +0,0 @@
-<!-- EnhancedDeleteConfirmation.svelte - Enhanced delete confirmation with account hierarchy -->
-<script lang="ts">
-	import type { YakklAccount } from '$lib/common';
-	import { AccountTypeCategory } from '$lib/common/types';
-	import Modal from './Modal.svelte';
-	import SkeletonBalance from './SkeletonBalance.svelte';
-
-	interface AccountWithBalance {
-		account: YakklAccount;
-		balance: bigint;
-		balanceFormatted: string;
-		valueFormatted: string;
-		isLoading: boolean;
-		error: string | null;
-	}
-
-	interface Props {
-		show?: boolean;
-		account?: YakklAccount | null;
-		allAccounts?: YakklAccount[];
-		onConfirm?: () => void;
-		onCancel?: () => void;
-		onLoadBalance?: (address: string) => Promise<bigint>;
-	}
-
-	let {
-		show = $bindable(false),
-		account = null,
-		allAccounts = [],
-		onConfirm = () => {},
-		onCancel = () => {},
-		onLoadBalance = async () => 0n
-	}: Props = $props();
-
-	let accountsWithBalances: AccountWithBalance[] = $state([]);
-	let totalValue = $state(0);
-	let loading = $state(false);
-
-	// Currency formatter
-	const currency = new Intl.NumberFormat('en-US', {
-		style: 'currency',
-		currency: 'USD',
-		minimumFractionDigits: 2,
-		maximumFractionDigits: 2
-	});
-
-	// Get affected accounts (primary + its sub-accounts)
-	function getAffectedAccounts(): YakklAccount[] {
-		if (!account) return [];
-
-		if (account.accountType === AccountTypeCategory.PRIMARY) {
-			const subAccounts = allAccounts.filter(
-				(a) =>
-					a.accountType === AccountTypeCategory.SUB && a.primaryAccount?.address === account.address
-			);
-			return [account, ...subAccounts];
-		}
-
-		return [account];
-	}
-
-	// Helper function to determine if an error should be shown to the user
-	function shouldShowErrorToUser(error: any): boolean {
-		const errorMessage = error?.message || error?.toString() || '';
-
-		// Network/API errors that should be handled silently
-		const networkErrors = [
-			'missing response',
-			'timeout',
-			'TIMEOUT',
-			'SERVER_ERROR',
-			'NETWORK_ERROR',
-			'Failed to fetch',
-			'fetch',
-			'Connection failed',
-			'Request timeout',
-			'eth_getBalance',
-			'call revert exception',
-			'alchemy.com',
-			'infura.io',
-			'requestBody',
-			'serverError',
-			'code=SERVER_ERROR',
-			'version=web/',
-			'JsonRpcError',
-			'RPC Error',
-			'getBalance',
-			'Balance fetch',
-			'Balance loading timeout'
-		];
-
-		return !networkErrors.some((pattern) =>
-			errorMessage.toLowerCase().includes(pattern.toLowerCase())
-		);
-	}
-
-	// Load balances for all affected accounts
-	async function loadBalances(): Promise<void> {
-		const affectedAccounts = getAffectedAccounts();
-		if (affectedAccounts.length === 0) {
-			loading = false;
-			return;
-		}
-
-		loading = true;
-
-		// Initialize accounts with loading state
-		accountsWithBalances = affectedAccounts.map((acc) => ({
-			account: acc,
-			balance: 0n,
-			balanceFormatted: '0.000000',
-			valueFormatted: currency.format(0),
-			isLoading: true,
-			error: null as string | null
-		}));
-
-		// Load balances progressively with timeout
-		const balancePromises = accountsWithBalances.map(async (item, index) => {
-			try {
-				// Add timeout to balance loading
-				const balancePromise = onLoadBalance(item.account.address);
-				const timeoutPromise = new Promise<bigint>((_, reject) => {
-					setTimeout(() => reject(new Error('Balance loading timeout')), 3000);
-				});
-
-				const balance = await Promise.race([balancePromise, timeoutPromise]);
-				const balanceNum = Number(balance) / 1e18;
-				const balanceFormatted = balanceNum.toFixed(6);
-				// Assuming ETH price around $3000 for demo - in real app, get from price store
-				const value = balanceNum * 3000;
-				const valueFormatted = currency.format(value);
-
-				accountsWithBalances[index] = {
-					...item,
-					balance,
-					balanceFormatted,
-					valueFormatted,
-					isLoading: false,
-					error: null
-				};
-
-				// Trigger reactivity
-				accountsWithBalances = [...accountsWithBalances];
-			} catch (error) {
-				// Only log non-network errors, suppress network timeouts
-				if (shouldShowErrorToUser(error)) {
-					console.error('[EnhancedDeleteConfirmation] Balance loading error:', error);
-				}
-
-				accountsWithBalances[index] = {
-					...item,
-					isLoading: false,
-					error: 'Unable to load'
-				};
-				accountsWithBalances = [...accountsWithBalances];
-			}
-		});
-
-		// Wait for all promises with shorter overall timeout
-		try {
-			await Promise.race([
-				Promise.all(balancePromises),
-				new Promise<void>((_, reject) => {
-					setTimeout(() => reject(new Error('Overall timeout')), 5000);
-				})
-			]);
-		} catch (error) {
-			console.warn(
-				'[EnhancedDeleteConfirmation] Balance loading timed out, proceeding with available data'
-			);
-		}
-
-		// Calculate total value
-		totalValue = accountsWithBalances.reduce((sum, item) => {
-			if (!item.error && !item.isLoading) {
-				const value = (Number(item.balance) / 1e18) * 3000; // ETH price
-				return sum + value;
-			}
-			return sum;
-		}, 0);
-
-		// Always set loading to false at the end
-		loading = false;
-	}
-
-	// Reset state when modal closes
-	function resetState(): void {
-		accountsWithBalances = [];
-		totalValue = 0;
-		loading = false;
-	}
-
-	// Effect to load balances when modal shows
-	$effect(() => {
-		if (show && account) {
-			loadBalances();
-		} else if (!show) {
-			// Reset state when modal is closed
-			resetState();
-		}
-	});
-
-	function handleConfirm(): void {
-		onConfirm();
-		show = false;
-	}
-
-	function handleCancel(): void {
-		onCancel();
-		show = false;
-	}
-
-	function getAccountIcon(accountType: AccountTypeCategory): string {
-		switch (accountType) {
-			case AccountTypeCategory.PRIMARY:
-				return 'M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10';
-			case AccountTypeCategory.SUB:
-				return 'M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2';
-			default:
-				return 'M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 0 118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-2.266.99-4.659.99-7.132A8 8 0 008 4.07M3 15.364c.64-1.319 1-2.8 1-4.364 0-1.457.39-2.823 1.07-4';
-		}
-	}
-
-	const isPrimaryAccountWithSubs = $derived(() => {
-		return account?.accountType === AccountTypeCategory.PRIMARY && accountsWithBalances.length > 1;
-	});
-</script>
-
-<Modal bind:show title="Delete Account Confirmation" className="z-[900]">
-	<div class="p-6 space-y-4">
-		<!-- Warning header -->
-		<div class="flex items-center space-x-3 p-4 bg-red-50 border border-red-200 rounded-lg">
-			<div class="flex-shrink-0">
-				<svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
-					<path
-						stroke-linecap="round"
-						stroke-linejoin="round"
-						stroke-width="2"
-						d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"
-					/>
-				</svg>
-			</div>
-			<div>
-				<h3 class="text-lg font-semibold text-red-800">
-					{isPrimaryAccountWithSubs ? 'Delete Primary Account & Sub-Accounts' : 'Delete Account'}
-				</h3>
-				<p class="text-sm text-red-600">
-					This action cannot be undone and will permanently delete the account{isPrimaryAccountWithSubs
-						? 's'
-						: ''}.
-				</p>
-			</div>
-		</div>
-
-		<!-- Account hierarchy display -->
-		<div class="space-y-3">
-			<h4 class="font-medium text-gray-900">
-				{isPrimaryAccountWithSubs ? 'Accounts to be deleted:' : 'Account to be deleted:'}
-			</h4>
-
-			<div class="bg-gray-50 rounded-lg p-4 space-y-3">
-				{#each accountsWithBalances as item, index}
-					<div
-						class="flex items-start space-x-3 {item.account.accountType === AccountTypeCategory.SUB
-							? 'ml-6 border-l-2 border-blue-200 pl-4'
-							: ''}"
-					>
-						<!-- Account icon -->
-						<div
-							class="flex-shrink-0 w-8 h-8 rounded-full {item.account.accountType ===
-							AccountTypeCategory.PRIMARY
-								? 'bg-purple-100'
-								: 'bg-blue-100'} flex items-center justify-center"
-						>
-							<svg
-								class="w-4 h-4 {item.account.accountType === AccountTypeCategory.PRIMARY
-									? 'text-purple-600'
-									: 'text-blue-600'}"
-								fill="none"
-								stroke="currentColor"
-								viewBox="0 0 24 24"
-							>
-								<path
-									stroke-linecap="round"
-									stroke-linejoin="round"
-									stroke-width="2"
-									d={getAccountIcon(item.account.accountType)}
-								/>
-							</svg>
-						</div>
-
-						<!-- Account details -->
-						<div class="flex-1 min-w-0">
-							<div class="flex items-center justify-between">
-								<div>
-									<p class="text-sm font-medium text-gray-900">
-										{item.account.name}
-										{#if item.account.accountType === AccountTypeCategory.SUB}
-											<span class="text-xs text-gray-500">(Sub-account)</span>
-										{/if}
-									</p>
-									<p class="text-xs text-gray-500 font-mono">
-										{item.account.address.slice(0, 6)}...{item.account.address.slice(-4)}
-									</p>
-								</div>
-
-								<!-- Balance display -->
-								<div class="text-right">
-									{#if item.isLoading}
-										<SkeletonBalance showLabel={false} className="w-16" />
-									{:else if item.error}
-										<div class="text-xs text-red-500">Error loading</div>
-									{:else}
-										<div class="text-sm font-semibold text-gray-900">
-											{item.balanceFormatted} ETH
-										</div>
-										<div class="text-xs text-gray-600">
-											{item.valueFormatted}
-										</div>
-									{/if}
-								</div>
-							</div>
-						</div>
-					</div>
-				{/each}
-			</div>
-
-			<!-- Total value -->
-			{#if !loading && totalValue > 0}
-				<div class="border-t border-gray-200 pt-3">
-					<div class="flex justify-between items-center">
-						<span class="font-medium text-gray-900">Total Value:</span>
-						<span class="text-lg font-bold text-red-600">
-							{currency.format(totalValue)}
-						</span>
-					</div>
-				</div>
-			{/if}
-		</div>
-
-		<!-- Warning message for accounts with balances -->
-		{#if totalValue > 0 && !loading}
-			<div class="p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
-				<div class="flex items-start space-x-2">
-					<svg
-						class="w-5 h-5 text-yellow-600 mt-0.5"
-						fill="none"
-						stroke="currentColor"
-						viewBox="0 0 24 24"
-					>
-						<path
-							stroke-linecap="round"
-							stroke-linejoin="round"
-							stroke-width="2"
-							d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"
-						/>
-					</svg>
-					<div>
-						<p class="text-sm font-medium text-yellow-800">
-							Warning: Accounts contain cryptocurrency
-						</p>
-						<p class="text-sm text-yellow-700 mt-1">
-							Please transfer all funds to another account before deleting. You will lose access to
-							these funds permanently.
-						</p>
-					</div>
-				</div>
-			</div>
-		{/if}
-
-		<!-- Action buttons -->
-		<div class="flex justify-end space-x-3 pt-4 border-t border-gray-200">
-			<button
-				type="button"
-				class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
-				onclick={handleCancel}
-			>
-				Cancel
-			</button>
-			<button
-				type="button"
-				class="px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed"
-				onclick={handleConfirm}
-				disabled={loading}
-			>
-				{loading ? 'Loading...' : `Delete Account${isPrimaryAccountWithSubs ? 's' : ''}`}
-			</button>
-		</div>
-	</div>
-</Modal>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/ErrorNoAction.svelte b/packages/yakkl-wallet/src/lib/components/v1/ErrorNoAction.svelte
deleted file mode 100644
index 9663f43..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/ErrorNoAction.svelte
+++ /dev/null
@@ -1,35 +0,0 @@
-<script lang="ts">
-	import Modal from './Modal.svelte';
-
-	interface Props {
-		show: boolean;
-		value: string;
-		title?: string;
-		className?: string;
-		onClose?: () => void;
-	}
-
-	// Destructure props correctly
-	let {
-		show = $bindable(false),
-		title = 'ERROR!',
-		value = 'An error occurred',
-		className = 'z-[999]',
-		onClose = $bindable(() => {
-			show = false;
-		})
-	}: Props = $props();
-</script>
-
-<Modal bind:show {title} {className}>
-	<div class="p-6">
-		<p class="text-sm text-gray-500">{value}</p>
-		<div class="mt-4 flex justify-end">
-			<button
-				type="button"
-				class="rounded-md border border-gray-300 bg-white py-2 px-4 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"
-				onclick={onClose}>Close</button
-			>
-		</div>
-	</div>
-</Modal>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/ErrorWithAction.svelte b/packages/yakkl-wallet/src/lib/components/v1/ErrorWithAction.svelte
deleted file mode 100644
index 02d9c33..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/ErrorWithAction.svelte
+++ /dev/null
@@ -1,33 +0,0 @@
-<script lang="ts">
-	interface Props {
-		show?: boolean;
-		title?: string;
-		value?: string;
-		handle?: any;
-	}
-
-	let {
-		show = $bindable(false),
-		title = 'ERROR!',
-		value = '',
-		handle = () => {
-			show = false;
-		}
-	}: Props = $props();
-</script>
-
-<div class="modal" class:modal-open={show}>
-	<div class="modal-box relative">
-		<h3 class="text-lg font-bold">{title}</h3>
-		<p class="py-4">{value}</p>
-		<div class="modal-action">
-			<button
-				class="btn"
-				onclick={() => {
-					show = false;
-					handle;
-				}}>Close</button
-			>
-		</div>
-	</div>
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/EthUnitConverter.svelte b/packages/yakkl-wallet/src/lib/components/v1/EthUnitConverter.svelte
deleted file mode 100644
index 75d46b1..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/EthUnitConverter.svelte
+++ /dev/null
@@ -1,422 +0,0 @@
-<!-- src/lib/components/EthUnitConverter.svelte -->
-<script lang="ts">
-	import Modal from './Modal.svelte';
-	import { onMount } from 'svelte';
-	import { PriceManager } from '$lib/managers/PriceManager';
-	import { CoinbasePriceProvider } from '$lib/managers/providers/price/coinbase/CoinbasePriceProvider';
-	import { CoingeckoPriceProvider } from '$lib/managers/providers/price/coingecko/CoingeckoPriceProvider';
-	import { KrakenPriceProvider } from '$lib/managers/providers/price/kraken/KrakenPriceProvider';
-	import { log } from '$lib/managers/Logger';
-
-	let {
-		show = $bindable(false),
-		initialValue = '',
-		initialUnit = 'ether' as 'wei' | 'gwei' | 'ether',
-		onComplete = null as ((value: string, unit: 'wei' | 'gwei' | 'ether') => void) | null,
-		compact = false,
-		showUsdValue = true,
-		onClose = () => {
-			show = false;
-		}
-	} = $props<{
-		show?: boolean;
-		initialValue?: string;
-		initialUnit?: 'wei' | 'gwei' | 'ether';
-		onComplete?: ((value: string, unit: 'wei' | 'gwei' | 'ether') => void) | null;
-		compact?: boolean;
-		showUsdValue?: boolean;
-		onClose?: () => void;
-	}>();
-
-	// ETH unit conversion state
-	let wei = $state('');
-	let gwei = $state('');
-	let ether = $state('');
-	let ethPrice = $state(0);
-	let selectedUnit = $state<'wei' | 'gwei' | 'ether'>(initialUnit);
-
-	// USD calculation
-	let ethUnitUsd = $derived.by(() => {
-		if (ether && ethPrice && showUsdValue) {
-			const etherNum = parseFloat(ether);
-			if (!isNaN(etherNum) && etherNum > 0) {
-				const usdValue = etherNum * ethPrice;
-				return `$${usdValue.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
-			}
-		}
-		return '';
-	});
-
-	const priceManager = new PriceManager([
-		{ provider: new CoinbasePriceProvider(), weight: 5 },
-		{ provider: new CoingeckoPriceProvider(), weight: 3 },
-		{ provider: new KrakenPriceProvider(), weight: 2 }
-	]);
-
-	// ETH conversion functions
-	function weiToGwei(wei: string): string {
-		try {
-			if (!wei || wei === '0') return '';
-			const weiNum = BigInt(wei);
-			const gweiWhole = weiNum / 1_000_000_000n;
-			const remainder = weiNum % 1_000_000_000n;
-
-			if (remainder === 0n) {
-				return gweiWhole.toString();
-			}
-
-			const remainderStr = remainder.toString().padStart(9, '0');
-			const trimmed = remainderStr.replace(/0+$/, '');
-
-			if (trimmed) {
-				return `${gweiWhole}.${trimmed}`;
-			}
-			return gweiWhole.toString();
-		} catch {
-			return '';
-		}
-	}
-
-	function weiToEther(wei: string): string {
-		try {
-			if (!wei || wei === '0') return '';
-			const weiNum = BigInt(wei);
-			const etherWhole = weiNum / 1_000_000_000_000_000_000n;
-			const remainder = weiNum % 1_000_000_000_000_000_000n;
-
-			if (remainder === 0n) {
-				return etherWhole.toString();
-			}
-
-			const remainderStr = remainder.toString().padStart(18, '0');
-			const trimmed = remainderStr.replace(/0+$/, '');
-
-			if (trimmed) {
-				return `${etherWhole}.${trimmed}`;
-			}
-			return etherWhole.toString();
-		} catch {
-			return '';
-		}
-	}
-
-	function gweiToWei(gwei: string): string {
-		try {
-			if (!gwei) return '';
-			const parts = gwei.split('.');
-			const wholePart = parts[0] || '0';
-			const decimalPart = parts[1] || '';
-
-			const paddedDecimal = decimalPart.padEnd(9, '0').slice(0, 9);
-			const gweiInWei = BigInt(wholePart) * 1_000_000_000n;
-			const decimalInWei = BigInt(paddedDecimal);
-
-			return (gweiInWei + decimalInWei).toString();
-		} catch {
-			return '';
-		}
-	}
-
-	function gweiToEther(gwei: string): string {
-		try {
-			if (!gwei) return '';
-			const weiValue = gweiToWei(gwei);
-			return weiToEther(weiValue);
-		} catch {
-			return '';
-		}
-	}
-
-	function etherToWei(ether: string): string {
-		try {
-			if (!ether) return '';
-			const parts = ether.split('.');
-			const wholePart = parts[0] || '0';
-			const decimalPart = parts[1] || '';
-
-			const paddedDecimal = decimalPart.padEnd(18, '0').slice(0, 18);
-			const combined = wholePart + paddedDecimal;
-
-			return BigInt(combined).toString();
-		} catch {
-			return '';
-		}
-	}
-
-	function etherToGwei(ether: string): string {
-		try {
-			if (!ether) return '';
-			const weiValue = etherToWei(ether);
-			return weiToGwei(weiValue);
-		} catch {
-			return '';
-		}
-	}
-
-	// Fetch ETH price
-	async function fetchEthPrice() {
-		try {
-			const result = await priceManager.getMarketPrice('ETH-USD');
-			ethPrice = result && typeof result === 'object' && 'price' in result ? result.price : 0;
-		} catch (error) {
-			log.error('Failed to fetch ETH price:', false, error);
-			ethPrice = 0;
-		}
-	}
-
-	// Input handlers
-	function handleWeiInput(e: Event) {
-		const target = e.target as HTMLInputElement;
-		const value = target.value;
-
-		if (!/^\d*$/.test(value)) {
-			target.value = wei;
-			return;
-		}
-
-		wei = value;
-		selectedUnit = 'wei';
-		if (value) {
-			gwei = weiToGwei(value);
-			ether = weiToEther(value);
-		} else {
-			gwei = '';
-			ether = '';
-		}
-	}
-
-	function handleGweiInput(e: Event) {
-		const target = e.target as HTMLInputElement;
-		const value = target.value;
-
-		if (!/^\d*\.?\d{0,9}$/.test(value)) {
-			target.value = gwei;
-			return;
-		}
-
-		gwei = value;
-		selectedUnit = 'gwei';
-		if (value) {
-			wei = gweiToWei(value);
-			ether = gweiToEther(value);
-		} else {
-			wei = '';
-			ether = '';
-		}
-	}
-
-	function handleEtherInput(e: Event) {
-		const target = e.target as HTMLInputElement;
-		const value = target.value;
-
-		if (!/^\d*\.?\d{0,18}$/.test(value)) {
-			target.value = ether;
-			return;
-		}
-
-		ether = value;
-		selectedUnit = 'ether';
-		if (value) {
-			wei = etherToWei(value);
-			gwei = etherToGwei(value);
-		} else {
-			wei = '';
-			gwei = '';
-		}
-	}
-
-	function applyValue() {
-		if (onComplete) {
-			const value = selectedUnit === 'wei' ? wei : selectedUnit === 'gwei' ? gwei : ether;
-			onComplete(value, selectedUnit);
-			if (!compact) show = false;
-		}
-	}
-
-	function clearFields() {
-		wei = '';
-		gwei = '';
-		ether = '';
-	}
-
-	onMount(async () => {
-		if (showUsdValue) {
-			await fetchEthPrice();
-		}
-
-		if (initialValue) {
-			switch (initialUnit) {
-				case 'wei':
-					wei = initialValue;
-					handleWeiInput({ target: { value: initialValue } } as any);
-					break;
-				case 'gwei':
-					gwei = initialValue;
-					handleGweiInput({ target: { value: initialValue } } as any);
-					break;
-				case 'ether':
-					ether = initialValue;
-					handleEtherInput({ target: { value: initialValue } } as any);
-					break;
-			}
-		}
-	});
-</script>
-
-{#if compact}
-	<!-- Inline version for embedding -->
-	<div class="eth-converter-compact space-y-2 p-3 border rounded-lg">
-		<div class="flex items-center justify-between mb-2">
-			<h3 class="text-sm font-medium">ETH Unit Converter</h3>
-			<button type="button" class="text-xs text-gray-500 hover:text-gray-700" onclick={clearFields}>
-				Clear
-			</button>
-		</div>
-
-		<div class="space-y-2">
-			<div class="flex gap-2 items-center">
-				<!-- svelte-ignore a11y_label_has_associated_control -->
-				<label class="w-12 text-xs">Wei</label>
-				<input
-					type="text"
-					pattern="[0-9]*"
-					inputmode="numeric"
-					placeholder="0"
-					class="rounded border px-2 py-1 flex-1 font-mono text-xs"
-					bind:value={wei}
-					oninput={handleWeiInput}
-				/>
-			</div>
-			<div class="flex gap-2 items-center">
-				<!-- svelte-ignore a11y_label_has_associated_control -->
-				<label class="w-12 text-xs">Gwei (gas)</label>
-				<input
-					type="text"
-					inputmode="decimal"
-					placeholder="0.0"
-					class="rounded border px-2 py-1 flex-1 font-mono text-xs"
-					bind:value={gwei}
-					oninput={handleGweiInput}
-				/>
-			</div>
-			<div class="flex gap-2 items-center">
-				<!-- svelte-ignore a11y_label_has_associated_control -->
-				<label class="w-12 text-xs">ETH</label>
-				<input
-					type="text"
-					inputmode="decimal"
-					placeholder="0.0"
-					class="rounded border px-2 py-1 flex-1 font-mono text-xs"
-					bind:value={ether}
-					oninput={handleEtherInput}
-				/>
-			</div>
-		</div>
-
-		{#if showUsdValue && ethUnitUsd}
-			<div class="text-xs text-green-600 dark:text-green-400 font-semibold mt-2">
-				{ethUnitUsd}
-			</div>
-		{/if}
-
-		{#if onComplete}
-			<div class="flex justify-end mt-2">
-				<button type="button" class="btn btn-sm btn-primary" onclick={applyValue}> Apply </button>
-			</div>
-		{/if}
-	</div>
-{:else}
-	<!-- Modal version -->
-	<Modal bind:show title="ETH Unit Converter" {onClose}>
-		<div class="space-y-4 p-4 mt-4">
-			<div class="relative">
-				<button
-					type="button"
-					class="absolute -top-8 right-0 text-xs text-gray-600 hover:text-gray-900 dark:hover:text-gray-200 px-2 py-1"
-					onclick={clearFields}
-					aria-label="Clear"
-				>
-					<svg
-						xmlns="http://www.w3.org/2000/svg"
-						fill="none"
-						viewBox="0 0 24 24"
-						stroke-width="1.5"
-						stroke="currentColor"
-						class="size-6"
-					>
-						<path
-							stroke-linecap="round"
-							stroke-linejoin="round"
-							d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"
-						/>
-					</svg>
-				</button>
-
-				<div class="flex flex-col gap-3">
-					<div class="flex gap-2 items-center">
-						<!-- svelte-ignore a11y_label_has_associated_control -->
-						<label class="w-16 text-sm">Wei</label>
-						<input
-							type="text"
-							pattern="[0-9]*"
-							inputmode="numeric"
-							placeholder="0"
-							class="rounded border px-3 py-2 flex-1 font-mono text-sm"
-							bind:value={wei}
-							oninput={handleWeiInput}
-						/>
-					</div>
-					<div class="flex gap-2 items-center">
-						<!-- svelte-ignore a11y_label_has_associated_control -->
-						<label class="w-16 text-sm">Gwei (gas)</label>
-						<input
-							type="text"
-							inputmode="decimal"
-							placeholder="0.0"
-							class="rounded border px-3 py-2 flex-1 font-mono text-sm"
-							bind:value={gwei}
-							oninput={handleGweiInput}
-						/>
-					</div>
-					<div class="flex gap-2 items-center">
-						<!-- svelte-ignore a11y_label_has_associated_control -->
-						<label class="w-16 text-sm">Ether</label>
-						<input
-							type="text"
-							inputmode="decimal"
-							placeholder="0.0"
-							class="rounded border px-3 py-2 flex-1 font-mono text-sm"
-							bind:value={ether}
-							oninput={handleEtherInput}
-						/>
-					</div>
-
-					{#if showUsdValue}
-						<div class="pt-2 space-y-1">
-							<div class="text-xs text-gray-500">
-								1 ETH  ${ethPrice
-									? ethPrice.toLocaleString(undefined, {
-											minimumFractionDigits: 2,
-											maximumFractionDigits: 2
-										})
-									: '--'} USD
-							</div>
-							{#if ethUnitUsd}
-								<div class="text-sm text-green-600 dark:text-green-400 font-semibold">
-									{ethUnitUsd}
-								</div>
-							{/if}
-						</div>
-					{/if}
-				</div>
-			</div>
-
-			<div class="flex justify-end gap-2 mt-6">
-				{#if onComplete}
-					<button type="button" class="btn btn-primary" onclick={applyValue}> Apply </button>
-				{/if}
-				<button type="button" class="btn btn-secondary" onclick={onClose}> Close </button>
-			</div>
-		</div>
-	</Modal>
-{/if}
diff --git a/packages/yakkl-wallet/src/lib/components/v1/ExportPrivateKey.svelte b/packages/yakkl-wallet/src/lib/components/v1/ExportPrivateKey.svelte
deleted file mode 100644
index d0162ea..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/ExportPrivateKey.svelte
+++ /dev/null
@@ -1,180 +0,0 @@
-<!-- ExportPrivateKey.svelte -->
-<script lang="ts">
-	import { browserSvelte } from '$lib/utilities/browserSvelte';
-	import { getYakklCurrentlySelected, yakklMiscStore } from '$lib/common/stores';
-	import { onMount } from 'svelte';
-	import { decryptData } from '$lib/common/encryption';
-	import {
-		isEncryptedData,
-		type AccountData,
-		type CurrentlySelectedData,
-		type EncryptedData,
-		type YakklCurrentlySelected
-	} from '$lib/common';
-	import PincodeVerify from './PincodeVerify.svelte';
-	import Modal from './Modal.svelte';
-	import { log } from '$lib/managers/Logger';
-	import Copy from './Copy.svelte';
-
-	interface Props {
-		show?: boolean;
-		className?: string;
-		onVerify?: () => void;
-	}
-
-	let { show = $bindable(false), className = 'z-[999]', onVerify = () => {} }: Props = $props();
-
-	let privateKey = $state('');
-	let address: string = $state();
-	let showPincodeModal = $state(false);
-	let showPrivateKeyModal = $state(false);
-	let currentlySelected: YakklCurrentlySelected;
-
-	onMount(async () => {
-		if (browserSvelte) {
-			currentlySelected = await getYakklCurrentlySelected();
-			address = currentlySelected.shortcuts.address;
-		}
-	});
-
-	async function verifyPincode(pincode: string) {
-		try {
-			let account;
-
-			if (isEncryptedData(currentlySelected.data)) {
-				await decryptData(currentlySelected.data, $yakklMiscStore).then((result) => {
-					currentlySelected.data = result as CurrentlySelectedData;
-				});
-			}
-			account = (currentlySelected.data as CurrentlySelectedData).account;
-
-			if (isEncryptedData(account && account.data)) {
-				await decryptData(account!.data as EncryptedData, $yakklMiscStore).then((result) => {
-					account!.data = result as AccountData;
-				});
-			}
-
-			privateKey = (account!.data as AccountData).privateKey;
-			showPincodeModal = false;
-			showPrivateKeyModal = true;
-			show = false;
-
-			onVerify(); // Call the onVerify callback - currently does not do anything except set the modal to false
-		} catch (e) {
-			log.error('Error verifying pincode:', false, e);
-		}
-	}
-
-	function closeModal() {
-		show = false;
-	}
-</script>
-
-<div class="relative {className}">
-	<PincodeVerify bind:show={showPincodeModal} onVerified={verifyPincode} />
-
-	<Modal
-		bind:show={showPrivateKeyModal}
-		title="Private Key Export"
-		onClose={() => (showPrivateKeyModal = false)}
-	>
-		<div class="p-6">
-			<div class="mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg">
-				<p class="text-sm text-red-800 dark:text-red-200">
-					<strong> Security Warning:</strong> Your PRIVATE KEY should remain PRIVATE. Anyone with access to this key can steal all your funds. Only export if absolutely necessary and store it securely offline.
-				</p>
-			</div>
-
-			<div class="space-y-4">
-				<div>
-					<!-- svelte-ignore a11y_label_has_associated_control -->
-					<label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Account Address</label>
-					<div class="p-3 bg-gray-50 dark:bg-gray-800 rounded-lg font-mono text-sm text-gray-700 dark:text-gray-300">
-						{address}
-					</div>
-				</div>
-
-				<div>
-					<!-- svelte-ignore a11y_label_has_associated_control -->
-					<label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Private Key</label>
-					<div class="relative">
-						<input
-							type="password"
-							class="w-full p-3 pr-12 bg-gray-50 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg font-mono text-sm text-gray-700 dark:text-gray-300"
-							value={privateKey}
-							readonly
-						/>
-						<Copy
-							className="absolute right-2 top-1/2 -translate-y-1/2 p-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors"
-							target={{
-								value: privateKey,
-								timeout: 10000,
-								redactText: 'Private key copied!'
-							}}
-						/>
-					</div>
-					<p class="mt-2 text-xs text-gray-500 dark:text-gray-400">
-						Click the copy button to copy your private key. It will be cleared from clipboard after 10 seconds for security.
-					</p>
-				</div>
-			</div>
-
-			<div class="mt-6 flex justify-end gap-3">
-				<button
-					type="button"
-					class="px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg shadow-sm transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"
-					onclick={() => {
-						showPrivateKeyModal = false;
-						privateKey = ''; // Clear from memory
-					}}>
-					Done
-				</button>
-			</div>
-		</div>
-	</Modal>
-
-	<Modal bind:show title="Export Private Key" onClose={closeModal}>
-		<div class="p-6">
-			<div class="mb-6 flex justify-center">
-				<div class="p-4 bg-purple-100 dark:bg-purple-900/20 rounded-full">
-					<svg class="w-12 h-12 text-purple-600 dark:text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
-						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
-					</svg>
-				</div>
-			</div>
-
-			<div class="text-center mb-6">
-				<h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2">
-					Verification Required
-				</h3>
-				<p class="text-sm text-gray-600 dark:text-gray-400">
-					To export your private key, please verify your identity with your PIN code.
-				</p>
-			</div>
-
-			<div class="bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4 mb-6">
-				<p class="text-sm text-amber-800 dark:text-amber-200">
-					<strong>Note:</strong> Your private key provides full access to your account. Only export it if you need to import this account into another wallet.
-				</p>
-			</div>
-
-			<div class="flex justify-end gap-3">
-				<button
-					type="button"
-					class="px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500"
-					onclick={closeModal}>
-					Cancel
-				</button>
-				<button
-					type="button"
-					class="px-4 py-2 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 rounded-lg shadow-sm transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
-					onclick={() => {
-						show = false;
-						showPincodeModal = true;
-					}}>
-					Continue
-				</button>
-			</div>
-		</div>
-	</Modal>
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/ExtensionRSSNewsFeed.svelte b/packages/yakkl-wallet/src/lib/components/v1/ExtensionRSSNewsFeed.svelte
deleted file mode 100644
index 5a9665d..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/ExtensionRSSNewsFeed.svelte
+++ /dev/null
@@ -1,187 +0,0 @@
-<!-- src/lib/components/ExtensionRSSNewsFeed.svelte -->
-<script lang="ts">
-	import { onMount, onDestroy } from 'svelte';
-	import {
-		ExtensionRSSFeedService,
-		type RSSItem,
-		type RSSFeed
-	} from '$lib/managers/ExtensionRSSFeedService';
-	import NewsFeed from './NewsFeed.svelte';
-	import { log } from '$lib/managers/Logger';
-	import RefreshIcon from './icons/RefreshIcon.svelte';
-	import { browser_ext } from '$lib/common/environment';
-	import { UnifiedTimerManager } from '$lib/managers/UnifiedTimerManager';
-
-	const FIVE_MINUTES = 5 * 60 * 1000; // 5 minutes in milliseconds
-	const THIRTY_MINUTES = 30 * 60 * 1000; // 30 minutes in milliseconds
-
-	interface Props {
-		show?: boolean;
-		feedUrls: string[];
-		maxItemsPerFeed?: number;
-		maxVisibleItems?: number;
-		className?: string;
-		locked?: boolean;
-		title?: string;
-		interval?: number;
-	}
-
-	let {
-		show = $bindable(true),
-		feedUrls,
-		maxVisibleItems = 3,
-		className = '',
-		locked = true,
-		maxItemsPerFeed = locked ? 3 : 0,
-		title = 'Crypto News',
-		interval = FIVE_MINUTES
-	}: Props = $props();
-
-	// Override interval if locked
-	const effectiveInterval = locked ? THIRTY_MINUTES : interval;
-
-	let newsItems = $state<RSSItem[]>([]);
-	let isLoading = $state(true);
-	let error = $state<string | null>(null);
-
-	const rssService = ExtensionRSSFeedService.getInstance();
-	const timerManager = UnifiedTimerManager.getInstance();
-	const timerId = 'rss-feed-refresh';
-
-	onMount(() => {
-		loadFeeds();
-
-		// Set up refresh interval using UnifiedTimerManager
-		timerManager.addInterval(timerId, loadFeeds, effectiveInterval);
-		timerManager.startInterval(timerId);
-
-		// Listen for updates from background script
-		const messageListener = (message: any, sender: any, sendResponse: any) => {
-			if (message.type === 'RSS_FEED_UPDATE') {
-				loadFeeds();
-			}
-			return false; // Not handling async
-		};
-
-		browser_ext.runtime.onMessage.addListener(messageListener);
-
-		return () => {
-			timerManager.stopInterval(timerId);
-			timerManager.removeInterval(timerId);
-			browser_ext.runtime.onMessage.removeListener(messageListener);
-		};
-	});
-
-	async function loadFeeds() {
-		isLoading = true;
-		error = null;
-
-		try {
-			const allItems: RSSItem[] = [];
-
-			// Try to fetch fresh data
-			const feedPromises = feedUrls.map(
-				(url: string): Promise<RSSFeed | null> =>
-					rssService.fetchFeed(url).catch((err: unknown): null => {
-						log.warn(`Failed to fetch feed ${url}:`, false, err);
-						return null;
-					})
-			);
-
-			const feeds = await Promise.all(feedPromises);
-
-			// Combine and sort items from all feeds
-			feeds.forEach((feed) => {
-				if (feed) {
-					allItems.push(...feed.items.slice(0, maxItemsPerFeed));
-				}
-			});
-
-			// Sort by date (assuming the date strings can be parsed)
-			allItems.sort((a, b) => {
-				const dateA = parseRelativeDate(a.date);
-				const dateB = parseRelativeDate(b.date);
-				return dateB.getTime() - dateA.getTime();
-			});
-
-			newsItems = allItems;
-		} catch (err) {
-			error = err instanceof Error ? err.message : 'Failed to load RSS feeds';
-			log.warn('RSS feed error:', false, err);
-		} finally {
-			isLoading = false;
-		}
-	}
-
-	async function refreshFeeds() {
-		// Send message to background script to refresh feeds
-		// chrome.runtime.sendMessage({ action: 'fetchRSSFeeds' }, (response) => {
-		//   if (response.success) {
-		loadFeeds();
-		//   }
-		// });
-	}
-
-	function parseRelativeDate(dateStr: string): Date {
-		const now = new Date();
-
-		if (dateStr === 'Just now') {
-			return now;
-		}
-
-		const match = dateStr.match(/(\d+)\s+(minute|hour|day)s?\s+ago/);
-		if (match) {
-			const value = parseInt(match[1]);
-			const unit = match[2];
-
-			switch (unit) {
-				case 'minute':
-					return new Date(now.getTime() - value * 60 * 1000);
-				case 'hour':
-					return new Date(now.getTime() - value * 60 * 60 * 1000);
-				case 'day':
-					return new Date(now.getTime() - value * 24 * 60 * 60 * 1000);
-			}
-		}
-
-		if (dateStr === 'Yesterday') {
-			return new Date(now.getTime() - 24 * 60 * 60 * 1000);
-		}
-
-		// Default to now if we can't parse
-		return now;
-	}
-</script>
-
-{#if show}
-	<div class={className}>
-		{#if isLoading}
-			<div class="flex items-center justify-center p-8">
-				<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"></div>
-			</div>
-		{:else if error}
-			<div class="flex flex-col items-center justify-center p-8 text-red-500">
-				<p class="text-sm font-medium">Error loading news</p>
-				<p class="text-xs mt-1">{error}</p>
-				<button
-					onclick={refreshFeeds}
-					class="mt-4 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 text-sm"
-				>
-					Retry
-				</button>
-			</div>
-		{:else}
-			<div class="flex items-center justify-between mb-0">
-				<h2 class="text-lg font-semibold">{title}</h2>
-				<button
-					onclick={refreshFeeds}
-					class="p-1 text-blue-500 hover:text-blue-600 transition-colors"
-					aria-label="Refresh feeds"
-				>
-					<RefreshIcon className="w-4 h-4" />
-				</button>
-			</div>
-			<NewsFeed {newsItems} {maxVisibleItems} {className} {locked} {maxItemsPerFeed} />
-		{/if}
-	</div>
-{/if}
diff --git a/packages/yakkl-wallet/src/lib/components/v1/Failed.svelte b/packages/yakkl-wallet/src/lib/components/v1/Failed.svelte
deleted file mode 100644
index b068562..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/Failed.svelte
+++ /dev/null
@@ -1,36 +0,0 @@
-<script lang="ts">
-	import Modal from './Modal.svelte';
-
-	interface Props {
-		show: boolean;
-		title?: string;
-		content?: string;
-		rejectText?: string;
-		className?: string;
-		onReject?: () => void;
-	}
-
-	let {
-		show = $bindable(false),
-		title = 'Failed!',
-		content = 'An error has occurred.',
-		rejectText = 'Close',
-		className = 'z-[999]',
-		onReject = () => {
-			show = false;
-		}
-	}: Props = $props();
-</script>
-
-<Modal bind:show {title} {className}>
-	<div class="p-6">
-		<p class="text-sm text-gray-500">{content}</p>
-		<div class="mt-4 flex justify-end">
-			<button
-				type="button"
-				class="ml-2 rounded-md border border-transparent bg-red-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2"
-				onclick={onReject}>{rejectText}</button
-			>
-		</div>
-	</div>
-</Modal>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/Footer.svelte b/packages/yakkl-wallet/src/lib/components/v1/Footer.svelte
deleted file mode 100644
index 36e9178..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/Footer.svelte
+++ /dev/null
@@ -1,361 +0,0 @@
-<script lang="ts">
-	import { goto } from '$app/navigation';
-	import {
-		PATH_WELCOME,
-		PATH_LOGIN,
-		YEAR,
-		VERSION,
-		PATH_ETHEREUM_TRANSACTIONS_SEND,
-		RegisteredType,
-		type Settings,
-		type SwapPriceProvider,
-		type ActiveTab,
-		PlanType
-	} from '$lib/common';
-	import { getYakklCurrentlySelected } from '$lib/common/stores';
-	import ChatbotModal from './ChatbotModal.svelte';
-	import Buy from '$lib/components/Buy.svelte';
-	import { onMount } from 'svelte';
-	import { getMiscStore, getSettings } from '$lib/common/stores';
-	import Swap from './Swap.svelte';
-	import type { Provider } from '$lib/managers/Provider';
-	import type { Ethereum } from '$lib/managers/blockchains/evm/ethereum/Ethereum';
-	import { UniswapSwapManager } from '$lib/managers/UniswapSwapManager';
-	import { TokenService } from '$lib/managers/blockchains/evm/TokenService';
-	import type { Wallet } from '$lib/managers/Wallet';
-	import WalletManager from '$lib/managers/WalletManager';
-	import { getYakklCurrentlySelectedAccountKey } from '$lib/common/security';
-	import { log } from '$lib/managers/Logger';
-	import { openSidePanelOnActiveTab } from '$lib/common/sidepanel';
-
-	interface Props {
-		// Defaults for properties. Can be changed when calling component
-		id?: string;
-		containerWidth?: string; //"394"; // iPhone pro size
-		classParam?: string;
-	}
-
-	let { id = 'footer', containerWidth = '428', classParam = 'text-center' }: Props = $props();
-
-	let showChat = $state(false);
-	let showBuy = $state(false);
-	let showSwap = $state(false);
-
-	let w = 6;
-	let h = 6;
-	let planType = $state(PlanType.BASIC_MEMBER.toUpperCase()); // Default to Standard
-
-	let yakklMiscStore: string;
-	let yakklSettingsStore: Settings | null;
-
-	let fundingAddress: string = $state(''); //| null | undefined = $yakklCurrentlySelectedStore?.shortcuts.address || null;
-	let swapPriceProvider: SwapPriceProvider | null = null; // Don't have to set it to null
-	let provider: Provider = $state();
-	let chainId = 1;
-	let blockchain: Ethereum = $state();
-	let swapManager: UniswapSwapManager = $state();
-	let tokenService: TokenService<any> = $state();
-
-	onMount(async () => {
-		try {
-			yakklMiscStore = getMiscStore();
-			if (!yakklMiscStore) {
-				return; // Don't do anything if not logged in
-			}
-
-			// Get the settings
-			yakklSettingsStore = await getSettings();
-			if (yakklSettingsStore) {
-				planType = yakklSettingsStore.plan.type.toUpperCase();
-			}
-
-			const currentlySelected = await getYakklCurrentlySelected();
-			if (currentlySelected) {
-				fundingAddress = currentlySelected.shortcuts.address;
-			}
-
-			if (swapPriceProvider === null) {
-				let wallet: Wallet | null = null;
-				wallet = WalletManager.getInstance(
-					['Alchemy'],
-					['Ethereum'],
-					chainId ?? 1,
-					import.meta.env.VITE_ALCHEMY_API_KEY_PROD
-				);
-				if (wallet) {
-					if (!wallet.getSigner()) {
-						const accountKey = await getYakklCurrentlySelectedAccountKey();
-						if (accountKey && accountKey.privateKey) await wallet.setSigner(accountKey.privateKey); // Could have sent this to getInstance as well
-					}
-
-					provider = wallet.getProvider()!; // Only for testing
-					if (provider) {
-						const signer = wallet.getSigner();
-						if (signer) {
-							provider.setSigner(signer);
-						}
-						blockchain = wallet.getBlockchain() as Ethereum;
-
-						swapManager = new UniswapSwapManager(blockchain as Ethereum, provider!);
-						tokenService = new TokenService(blockchain as Ethereum);
-					}
-				}
-			}
-		} catch (e) {
-			log.error(`Footer: onMount - ${e}`);
-		}
-	});
-
-	async function home() {
-		let path;
-
-		if (!yakklMiscStore) {
-			path = PATH_LOGIN;
-		} else {
-			path = PATH_WELCOME;
-		}
-
-		goto(path);
-	}
-
-	async function send() {
-		let path;
-
-		if (!yakklMiscStore) {
-			path = PATH_LOGIN;
-		} else {
-			path = PATH_ETHEREUM_TRANSACTIONS_SEND;
-		}
-
-		goto(path);
-	}
-
-	// Used for testing side panel version
-	async function handleAI() {
-		try {
-			openSidePanelOnActiveTab();
-		} catch (error) {
-			log.error('Error opening side panel:', false, error);
-		}
-	}
-
-	async function buy() {
-		let path;
-
-		if (!yakklMiscStore) {
-			path = PATH_LOGIN;
-			goto(path);
-		} else {
-			showBuy = true;
-		}
-	}
-
-	async function swap() {
-		let path;
-
-		if (!yakklMiscStore) {
-			path = PATH_LOGIN;
-			goto(path);
-		} else {
-			showSwap = true;
-		}
-	}
-</script>
-
-<ChatbotModal bind:show={showChat} />
-
-<Buy bind:show={showBuy} />
-
-<!-- <SwapModal bind:show={showSwap} {fundingAddress} /> -->
-<Swap bind:show={showSwap} {fundingAddress} {provider} {blockchain} {swapManager} {tokenService} />
-<!-- max-w-[{containerWidth}px] -->
-<!-- bg-base-100 -->
-<footer
-	{id}
-	class="visible fixed mb-0 inset-x-0 bottom-0 mx-4 mt-0 bg-gradient-to-br from-gray-900 via-gray-800 to-black {classParam}"
->
-	<div
-		class="relative flex items-center justify-between my-2 mb-0 bg-primary/80 text-base-content rounded-lg shadow-lg"
-	>
-		<span class="flex flex-1 justify-evenly max-w-[40%]">
-			<!-- HOME -->
-			<!-- svelte-ignore a11y_click_events_have_key_events -->
-			<!-- svelte-ignore a11y_interactive_supports_focus -->
-			<div
-				role="button"
-				onclick={home}
-				class="m-1 flex flex-col fill-base-content hover:fill-base-300 hover:text-base-300 items-center justify-center"
-				data-bs-toggle="tooltip"
-				data-bs-placement="top"
-				title="Welcome Page"
-				aria-label="home"
-			>
-				<svg
-					xmlns="http://www.w3.org/2000/svg"
-					viewBox="0 0 24 24"
-					class="w-{w} h-{h} stroke-primary/5 stroke-[1px]"
-				>
-					<path
-						d="M11.47 3.84a.75.75 0 011.06 0l8.69 8.69a.75.75 0 101.06-1.06l-8.689-8.69a2.25 2.25 0 00-3.182 0l-8.69 8.69a.75.75 0 001.061 1.06l8.69-8.69z"
-					/>
-					<path
-						d="M12 5.432l8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 01-.75-.75v-4.5a.75.75 0 00-.75-.75h-3a.75.75 0 00-.75.75V21a.75.75 0 01-.75.75H5.625a1.875 1.875 0 01-1.875-1.875v-6.198a2.29 2.29 0 00.091-.086L12 5.43z"
-					/>
-				</svg>
-				<span class="xs:text-xs sm:text-sm md:text-base">Home</span>
-			</div>
-			<!-- w-[60px] h-[40px] -->
-			<!-- Send -->
-			<!-- svelte-ignore a11y_click_events_have_key_events -->
-			<!-- svelte-ignore a11y_interactive_supports_focus -->
-			<div
-				role="button"
-				onclick={send}
-				class="m-1 flex flex-col fill-base-content hover:fill-base-300 hover:text-base-300 items-center justify-center"
-				data-bs-toggle="tooltip"
-				data-bs-placement="top"
-				title="Send"
-				aria-label="wallet send"
-			>
-				<svg
-					xmlns="http://www.w3.org/2000/svg"
-					fill="none"
-					viewBox="0 0 24 24"
-					stroke-width="1.5"
-					stroke="currentColor"
-					class="w-6 h-6 font-bold"
-				>
-					<path
-						stroke-linecap="round"
-						stroke-linejoin="round"
-						d="M4.5 19.5l15-15m0 0H8.25m11.25 0v11.25"
-					/>
-				</svg>
-
-				<span class="xs:text-xs sm:text-sm md:text-base">Send</span>
-			</div>
-		</span>
-
-		<!-- Help Bot -->
-		<!-- svelte-ignore a11y_click_events_have_key_events -->
-		<div class="static bg-gray-100 rounded-full w-[50px] h-[50px] shadow-lg z-50">
-			<div
-				class="relative bg-gray-300/75 rounded-full m-1 h-[39px] drop-shadow-lg hover:drop-shadow-xl"
-			>
-				<!-- fill-indigo-700 hover:fill-indigo-400 text-purple-900 hover:text-purple-700 -->
-				<!-- svelte-ignore a11y_interactive_supports_focus -->
-				<!-- <div role="button" onclick={handleAI} -->
-				<div
-					role="button"
-					onclick={() => {
-						showChat = true;
-					}}
-					class="relative m-1 w-[40px] h-[40px] fill-primary hover:fill-primary/50 text-primary hover:text-primary/50"
-					data-bs-toggle="tooltip"
-					data-bs-placement="top"
-					title="Ring for Help"
-					aria-label="help"
-				>
-					<svg
-						xmlns="http://www.w3.org/2000/svg"
-						viewBox="0 0 24 24"
-						fill="currentColor"
-						class="w-8 h-8 mt-0.5 -ml-[.05rem]"
-					>
-						<path
-							fill-rule="evenodd"
-							d="M9 4.5a.75.75 0 01.721.544l.813 2.846a3.75 3.75 0 002.576 2.576l2.846.813a.75.75 0 010 1.442l-2.846.813a3.75 3.75 0 00-2.576 2.576l-.813 2.846a.75.75 0 01-1.442 0l-.813-2.846a3.75 3.75 0 00-2.576-2.576l-2.846-.813a.75.75 0 010-1.442l2.846-.813A3.75 3.75 0 007.466 7.89l.813-2.846A.75.75 0 019 4.5zM18 1.5a.75.75 0 01.728.568l.258 1.036c.236.94.97 1.674 1.91 1.91l1.036.258a.75.75 0 010 1.456l-1.036.258c-.94.236-1.674.97-1.91 1.91l-.258 1.036a.75.75 0 01-1.456 0l-.258-1.036a2.625 2.625 0 00-1.91-1.91l-1.036-.258a.75.75 0 010-1.456l1.036-.258a2.625 2.625 0 001.91-1.91l.258-1.036A.75.75 0 0118 1.5zM16.5 15a.75.75 0 01.712.513l.394 1.183c.15.447.5.799.948.948l1.183.395a.75.75 0 010 1.422l-1.183.395c-.447.15-.799.5-.948.948l-.395 1.183a.75.75 0 01-1.422 0l-.395-1.183a1.5 1.5 0 00-.948-.948l-1.183-.395a.75.75 0 010-1.422l1.183-.395c.447-.15.799-.5.948-.948l.395-1.183A.75.75 0 0116.5 15z"
-							clip-rule="evenodd"
-						/>
-					</svg>
-
-					<!-- <i class="fa-solid fa-bell-concierge" style="font-size: 2rem; margin-left: 1px; margin-top: -3px; margin-bottom: -1.5rem;"></i> -->
-					<p
-						class="text-xs ml-[.3rem] -mt-[.25rem]"
-						style="line-height: .75rem; font-size: smaller"
-					>
-						Help
-					</p>
-				</div>
-			</div>
-		</div>
-		<!-- xs:ml-2 sm:ml-5 md:ml-10 lg:ml-15 xl:ml-20  -->
-		<span class="flex flex-1 justify-evenly max-w-[40%]">
-			<!-- Buy -->
-			<!-- svelte-ignore a11y_interactive_supports_focus -->
-			<!-- svelte-ignore a11y_click_events_have_key_events -->
-			<div
-				role="button"
-				onclick={buy}
-				class="m-1 flex flex-col fill-base-content hover:fill-base-300 hover:text-base-300 items-center justify-center"
-				data-bs-toggle="tooltip"
-				data-bs-placement="top"
-				title="Buy"
-				aria-label="Buy"
-			>
-				<svg
-					xmlns="http://www.w3.org/2000/svg"
-					fill="none"
-					viewBox="0 0 24 24"
-					stroke-width="1.5"
-					stroke="currentColor"
-					class="w-6 h-6"
-				>
-					<path
-						stroke-linecap="round"
-						stroke-linejoin="round"
-						d="M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"
-					/>
-				</svg>
-				<span class="xs:text-xs sm:text-sm md:text-base">Buy</span>
-			</div>
-
-			<!-- Swap -->
-			<!-- svelte-ignore a11y_click_events_have_key_events -->
-			<!-- svelte-ignore a11y_interactive_supports_focus -->
-			<div
-				role="button"
-				onclick={swap}
-				class="flex flex-col fill-base-content hover:fill-base-300 hover:text-base-300 items-center justify-center"
-				data-bs-toggle="tooltip"
-				data-bs-placement="top"
-				title="Swap"
-				aria-label="swap"
-			>
-				<svg
-					xmlns="http://www.w3.org/2000/svg"
-					fill="none"
-					viewBox="0 0 24 24"
-					stroke-width="1.5"
-					stroke="currentColor"
-					class="w-6 h-6 font-bold"
-				>
-					<path
-						stroke-linecap="round"
-						stroke-linejoin="round"
-						d="M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 00-3.7-3.7 48.678 48.678 0 00-7.324 0 4.006 4.006 0 00-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3l-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 003.7 3.7 48.656 48.656 0 007.324 0 4.006 4.006 0 003.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3l-3 3"
-					/>
-				</svg>
-				<span class="xs:text-xs sm:text-sm md:text-base">Swap</span>
-			</div>
-		</span>
-	</div>
-
-	<!-- Don't use copyright component here - Needs different formatting here in footer -->
-	<div class="inline-block mx-auto w-full text-center label-text">
-		<!-- <a href="https://yakkl.com?utm_source=yakkl"
-       class="text-xs hover:text-opacity-75 hover:cursor-pointer"
-       style="color: inherit; text-decoration: none; transition: color 0.3s ease, opacity 0.3s ease;"> -->
-		<span style="font-size: 10px;"
-			>YAKKL Copyright {new Date().getFullYear().toString()}, Version: {VERSION}
-			{planType}</span
-		>
-		<!-- </a> -->
-	</div>
-
-	<!-- <div class="inline-block mx-auto w-full text-center label-text">
-    <a href="https://yakkl.com?utm_source=yakkl" class="text-xs text-primary/50 hover:text-primary/75">
-      <span style="font-size: 10px;">YAKKL Copyright {YEAR}, Version: {VERSION} {planType}</span>
-    </a>
-  </div> -->
-</footer>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/FormattedText.svelte b/packages/yakkl-wallet/src/lib/components/v1/FormattedText.svelte
deleted file mode 100644
index 98c7a4d..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/FormattedText.svelte
+++ /dev/null
@@ -1,18 +0,0 @@
-<script lang="ts">
-	interface Props {
-		text?: string;
-	}
-
-	let { text = '' }: Props = $props();
-
-	function formatText(inputText: string) {
-		return inputText
-			.split('\r\n')
-			.map((line) => `<p>${line}</p>`)
-			.join('');
-	}
-
-	let formattedText = $derived(formatText(text));
-</script>
-
-<div class="formatted-text">{formattedText}</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/Forward.svelte b/packages/yakkl-wallet/src/lib/components/v1/Forward.svelte
deleted file mode 100644
index 3af11ef..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/Forward.svelte
+++ /dev/null
@@ -1,40 +0,0 @@
-<script lang="ts">
-	interface Props {
-		// import { Button } from "flowbite-svelte";
-		defaultClass?: string;
-	}
-
-	let { defaultClass = 'right-0 top-0' }: Props = $props();
-</script>
-
-<!-- svelte-ignore a11y_click_events_have_key_events -->
-<!-- svelte-ignore a11y_interactive_supports_focus -->
-<!-- <div role="button" class="absolute z-10 {defaultClass}" on:click={() => {history.forward()}}>
-  <Button pill={true} outline={true} btnClass="btn btn-primary font-medium focus:ring-4 focus:outline-none inline-flex items-center justify-center px-5 py-2.5 text-sm hover:text-white border border-gray-100 hover:bg-primary-400 focus:ring-primary-300 rounded-full !p-1"  size="md">
-  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" class="stroke-gray-100 w-5 h-5">
-    <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3" />
-  </svg>
-  </Button>
-</div> -->
-
-<!-- svelte-ignore a11y_consider_explicit_label -->
-<button
-	class="btn btn-sm btn-circle btn-outline absolute z-10 {defaultClass}"
-	onclick={() => {
-		history.forward();
-	}}
->
-	<svg
-		xmlns="http://www.w3.org/2000/svg"
-		class="h-5 w-5"
-		fill="none"
-		viewBox="0 0 24 24"
-		stroke="currentColor"
-		><path
-			stroke-linecap="round"
-			stroke-linejoin="round"
-			stroke-width="2"
-			d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"
-		/></svg
-	>
-</button>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/FoundingUser.svelte b/packages/yakkl-wallet/src/lib/components/v1/FoundingUser.svelte
deleted file mode 100644
index 982e3dd..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/FoundingUser.svelte
+++ /dev/null
@@ -1,2 +0,0 @@
- You're a Founding User! Pro stays unlocked for you  no action needed. Thank you for being part
-of the launch crew.
diff --git a/packages/yakkl-wallet/src/lib/components/v1/GasFeeManager.svelte b/packages/yakkl-wallet/src/lib/components/v1/GasFeeManager.svelte
deleted file mode 100644
index 5d31034..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/GasFeeManager.svelte
+++ /dev/null
@@ -1,93 +0,0 @@
-<!-- GasFeeManager.svelte -->
-<script lang="ts">
-	import { onMount } from 'svelte';
-	import { wallet } from '$lib/common/stores';
-	import { BigNumber } from '$lib/common/bignumber';
-	import type { GasEstimate, HistoricalGasData, GasPrediction } from '$lib/common/gas-types';
-	import { Line } from 'svelte-chartjs';
-
-	// TODO: Implement the GasFeeManager component to pick from ranges of gas fees
-
-	let gasEstimate: GasEstimate = $state();
-	let historicalData: HistoricalGasData[] = $state();
-	let predictions: GasPrediction[] = $state();
-	let customGasPrice: bigint = $state();
-	let customPriorityFee: bigint = $state();
-
-	onMount(async () => {
-		await updateGasEstimate();
-		await updateHistoricalData();
-		await updatePredictions();
-	});
-
-	async function updateGasEstimate() {
-		gasEstimate =
-			(await $wallet!.getGasEstimate({
-				to: '0x0000000000000000000000000000000000000000',
-				from: '0x0000000000000000000000000000000000000000',
-				value: '0',
-				chainId: $wallet?.getChainId() ?? 1
-			})) ?? null;
-	}
-
-	async function updateHistoricalData() {
-		historicalData = (await $wallet?.getHistoricalGasData(24 * 60 * 60)) ?? [];
-	}
-
-	async function updatePredictions() {
-		predictions = (await $wallet?.predictFutureFees(24 * 60 * 60)) ?? [];
-	}
-
-	function applyCustomGasFees() {
-		if (gasEstimate) {
-			gasEstimate.feeEstimate.totalFee = customGasPrice.toString();
-			gasEstimate.feeEstimate.priorityFee = customPriorityFee.toString();
-			// Update the wallet or transaction with the new gas fees
-		}
-	}
-
-	let chartData = $derived({
-		labels: [...historicalData, ...predictions].map((d) =>
-			new Date(d.timestamp * 1000).toLocaleString()
-		),
-		datasets: [
-			{
-				label: 'Base Fee',
-				data: [
-					...historicalData.map((d) => BigNumber.from(d.baseFee).toNumber() || 0),
-					...predictions.map((d) => BigNumber.from(d.estimatedBaseFee).toNumber() || 0)
-				],
-				borderColor: 'rgb(75, 192, 192)',
-				tension: 0.1
-			},
-			{
-				label: 'Priority Fee',
-				data: [
-					...historicalData.map((d) => BigNumber.from(d.priorityFee).toNumber() || 0),
-					...predictions.map((d) => BigNumber.from(d.estimatedPriorityFee).toNumber() || 0)
-				],
-				borderColor: 'rgb(255, 99, 132)',
-				tension: 0.1
-			}
-		]
-	});
-</script>
-
-<div>
-	<h2>Gas Fee Manager</h2>
-	<button onclick={updateGasEstimate}>Refresh Gas Estimate</button>
-
-	{#if gasEstimate}
-		<p>Estimated Gas Limit: {BigNumber.from(gasEstimate.gasLimit).toString()}</p>
-		<p>Base Fee: {BigNumber.from(gasEstimate.feeEstimate.baseFee).toString()}</p>
-		<p>Priority Fee: {BigNumber.from(gasEstimate.feeEstimate.priorityFee).toString()}</p>
-		<p>Total Fee: {BigNumber.from(gasEstimate.feeEstimate.totalFee).toString()}</p>
-
-		<input type="number" bind:value={customGasPrice} placeholder="Custom Gas Price" />
-		<input type="number" bind:value={customPriorityFee} placeholder="Custom Priority Fee" />
-		<button onclick={applyCustomGasFees}>Apply Custom Fees</button>
-	{/if}
-
-	<h3>Historical and Predicted Gas Fees</h3>
-	<Line data={chartData} options={{ responsive: true }} />
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/GasFees.svelte b/packages/yakkl-wallet/src/lib/components/v1/GasFees.svelte
deleted file mode 100644
index 34df2e9..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/GasFees.svelte
+++ /dev/null
@@ -1,8 +0,0 @@
-<!-- GasFees.svelte -->
-<script lang="ts">
-	// ... gas fees related script ...
-</script>
-
-<div class="border rounded-lg border-gray-200 p-2 mt-4">
-	<!-- ... gas fees content ... -->
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/GenericFooter.svelte b/packages/yakkl-wallet/src/lib/components/v1/GenericFooter.svelte
deleted file mode 100644
index bf33204..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/GenericFooter.svelte
+++ /dev/null
@@ -1,54 +0,0 @@
-<!-- GenericFooter.svelte -->
-<script lang="ts">
-	type FooterVariant = 'default' | 'warning' | 'success' | 'info';
-
-	let {
-		text = '',
-		buttonText = '',
-		onAction = () => {},
-		variant = 'default' as FooterVariant,
-		className = ''
-	} = $props<{
-		text?: string;
-		buttonText?: string;
-		onAction?: () => void;
-		variant?: FooterVariant;
-		className?: string;
-	}>();
-
-	const variantClasses: Record<FooterVariant, string> = {
-		default: 'bg-zinc-50 dark:bg-zinc-800/50 text-zinc-700 dark:text-zinc-300',
-		warning: 'bg-yellow-50 dark:bg-yellow-900/20 text-yellow-700 dark:text-yellow-300',
-		success: 'bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300',
-		info: 'bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300'
-	};
-
-	$effect(() => {
-		// Ensure variant is always a valid FooterVariant
-		if (!Object.keys(variantClasses).includes(variant)) {
-			variant = 'default';
-		}
-	});
-</script>
-
-<div
-	class="flex items-center justify-between {variantClasses[variant as FooterVariant]} {className}"
->
-	<p class="text-sm">{text}</p>
-	{#if buttonText}
-		<button
-			class="px-4 py-2 text-sm font-medium rounded-lg transition-colors
-        {variant === 'default' &&
-				'bg-zinc-200 hover:bg-zinc-300 dark:bg-zinc-700 dark:hover:bg-zinc-600 text-zinc-900 dark:text-zinc-100'}
-        {variant === 'warning' &&
-				'bg-yellow-200 hover:bg-yellow-300 dark:bg-yellow-800 dark:hover:bg-yellow-700 text-yellow-900 dark:text-yellow-100'}
-        {variant === 'success' &&
-				'bg-green-200 hover:bg-green-300 dark:bg-green-800 dark:hover:bg-green-700 text-green-900 dark:text-green-100'}
-        {variant === 'info' &&
-				'bg-blue-200 hover:bg-blue-300 dark:bg-blue-800 dark:hover:bg-blue-700 text-blue-900 dark:text-blue-100'}"
-			onclick={onAction}
-		>
-			{buttonText}
-		</button>
-	{/if}
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/GrowingIndicator.svelte b/packages/yakkl-wallet/src/lib/components/v1/GrowingIndicator.svelte
deleted file mode 100644
index 0148d7a..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/GrowingIndicator.svelte
+++ /dev/null
@@ -1,18 +0,0 @@
-<script lang="ts">
-	interface Props {
-		text?: string;
-		background?: string;
-	}
-
-	let { text = 'Loading...', background = 'bg-current' }: Props = $props();
-</script>
-
-<div
-	class="inline-block h-8 w-8 animate-[spinner-grow_0.75s_linear_infinite] rounded-full {background} align-[-0.125em] opacity-0 motion-reduce:animate-[spinner-grow_1.5s_linear_infinite]"
-	role="status"
->
-	<span
-		class="!absolute !-m-px !h-px !w-px !overflow-hidden !whitespace-nowrap !border-0 !p-0 ![clip:rect(0,0,0,0)]"
-		>{text}
-	</span>
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/Header.svelte b/packages/yakkl-wallet/src/lib/components/v1/Header.svelte
deleted file mode 100644
index 25165d7..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/Header.svelte
+++ /dev/null
@@ -1,234 +0,0 @@
-<script lang="ts">
-	import { onMount } from 'svelte';
-	import { identicon } from '$lib/utilities';
-	import { getYakklCurrentlySelected, getProfile, getSettings } from '$lib/common/stores';
-	import { safeLogout } from '$lib/common/safeNavigate';
-	import { ExtensionContext } from '$lib/common/shared/BrowserAccessor';
-	import { browser_ext, browserSvelte } from '$lib/common/environment';
-	import { BrowserAccessor } from '$lib/common/shared/BrowserAccessor';
-	import Share from '$lib/components/Share.svelte';
-	import ImageBar from '$lib/components/ImageBar.svelte';
-	import PlanBadge from '$lib/components/PlanBadge.svelte';
-	import OffcanvasMainMenu from './OffcanvasMainMenu.svelte';
-	import GraduationCapButton from './icons/GraduationCapButton.svelte';
-	import { log } from '$lib/managers/Logger';
-	import SimpleTooltip from './SimpleTooltip.svelte';
-	import OffcanvasProfileMenu from './OffcanvasProfileMenu.svelte';
-	import Avatar from './Avatar.svelte';
-	import { goto } from '$app/navigation';
-	import type { Profile, Settings, ProfileData } from '$lib/common/interfaces';
-	import { decryptData } from '$lib/common/encryption';
-	import { isEncryptedData } from '$lib/common/misc';
-	import { yakklMiscStore } from '$lib/common/stores';
-	import { get } from 'svelte/store';
-
-	let browserContext: ExtensionContext;
-	let address = '';
-	let imageSRC = '';
-	let userName = '';
-	let avatarUrl = '';
-	let browserAccessor = BrowserAccessor.getInstance();
-
-	let hoverTimeoutMain: number | null = null;
-	let hoverTimeoutProfile: number | null = null;
-
-	onMount(async () => {
-		try {
-			browserContext = await browserAccessor.getContext();
-			const current = await getYakklCurrentlySelected();
-			address = current.shortcuts.address;
-			imageSRC = identicon(address || 'default');
-
-			// Get profile data for username and avatar
-			const profile = await getProfile();
-			if (profile) {
-				userName = profile.userName || 'Anonymous Yakker';
-
-				// Check if profile data is encrypted and decrypt if needed
-				let profileData: ProfileData;
-				if (isEncryptedData(profile.data)) {
-					const miscStore = get(yakklMiscStore);
-					if (miscStore) {
-						profileData = await decryptData(profile.data, miscStore) as ProfileData;
-					} else {
-						profileData = { name: { first: '', last: '' }, email: '', registered: {} } as ProfileData;
-					}
-				} else {
-					profileData = profile.data as ProfileData;
-				}
-
-				// Set avatar URL - could be from profile data or fallback to identicon
-				avatarUrl = (profileData.meta as any)?.avatarUrl || imageSRC;
-			}
-		} catch (e) {
-			log.warn('Error loading profile data in Header:', false, e);
-			userName = 'Anonymous Yakker';
-			avatarUrl = imageSRC;
-		}
-	});
-
-	function handlePopout() {
-		if (browserSvelte) {
-			browser_ext.runtime.sendMessage({ type: 'popout' });
-			safeLogout();
-		}
-	}
-
-	function showOffcanvasMain() {
-		if (typeof window !== 'undefined' && (window as any).bootstrap) {
-			const element = document.getElementById('offcanvasMainMenu');
-			if (element) {
-				const offcanvasInstance = (window as any).bootstrap.Offcanvas.getOrCreateInstance(element);
-				offcanvasInstance.show();
-			}
-		}
-	}
-
-	function hideOffcanvasMain() {
-		if (typeof window !== 'undefined' && (window as any).bootstrap) {
-			const element = document.getElementById('offcanvasMainMenu');
-			if (element) {
-				const offcanvasInstance = (window as any).bootstrap.Offcanvas.getInstance(element);
-				if (offcanvasInstance) {
-					offcanvasInstance.hide();
-				}
-			}
-		}
-	}
-
-	function showOffcanvasProfile() {
-		if (typeof window !== 'undefined' && (window as any).bootstrap) {
-			const element = document.getElementById('offcanvasProfileMenu');
-			if (element) {
-				const offcanvasInstance = (window as any).bootstrap.Offcanvas.getOrCreateInstance(element);
-				offcanvasInstance.show();
-			}
-		}
-	}
-
-	function hideOffcanvasProfile() {
-		if (typeof window !== 'undefined' && (window as any).bootstrap) {
-			const element = document.getElementById('offcanvasProfileMenu');
-			if (element) {
-				const offcanvasInstance = (window as any).bootstrap.Offcanvas.getInstance(element);
-				if (offcanvasInstance) {
-					offcanvasInstance.hide();
-				}
-			}
-		}
-	}
-
-	function handleMainMenuHover() {
-		if (hoverTimeoutMain) {
-			clearTimeout(hoverTimeoutMain);
-			hoverTimeoutMain = null;
-		}
-		// Small delay to prevent immediate showing on quick mouse movements
-		setTimeout(() => {
-			showOffcanvasMain();
-		}, 100);
-	}
-
-	function handleMainMenuLeave() {
-		// Don't set timeout here, let the menu handle its own timeout
-	}
-
-	function handleProfileMenuHover() {
-		if (hoverTimeoutProfile) {
-			clearTimeout(hoverTimeoutProfile);
-			hoverTimeoutProfile = null;
-		}
-		// Small delay to prevent immediate showing on quick mouse movements
-		setTimeout(() => {
-			showOffcanvasProfile();
-		}, 100);
-	}
-
-	function handleProfileMenuLeave() {
-		// Don't set timeout here, let the menu handle its own timeout
-	}
-</script>
-
-<ImageBar>
-	<nav class="grid grid-cols-[1fr,2fr,1fr] items-center w-full py-2 px-2 gap-0">
-		<!-- Left Icon -->
-		<div class="flex items-center justify-start gap-4">
-			<SimpleTooltip content="Open the main menu" position="right">
-				<a
-					data-bs-toggle="offcanvas"
-					href="#offcanvasMainMenu"
-					aria-controls="offcanvasMainMenu"
-					role="button"
-					aria-label="Menu"
-					onmouseenter={handleMainMenuHover}
-					onmouseleave={handleMainMenuLeave}
-				>
-					<svg
-						xmlns="http://www.w3.org/2000/svg"
-						viewBox="0 0 24 24"
-						class="w-7 h-7 fill-gray-100 hover:fill-gray-400"
-					>
-						<path
-							fill-rule="evenodd"
-							d="M3 5.25a.75.75 0 01.75-.75h16.5a.75.75 0 010 1.5H3.75A.75.75 0 013 5.25zm0 4.5A.75.75 0 013.75 9h16.5a.75.75 0 010 1.5H3.75A.75.75 0 013 9.75zm0 4.5a.75.75 0 01.75-.75h16.5a.75.75 0 010 1.5H3.75a.75.75 0 01-.75-.75zm0 4.5a.75.75 0 01.75-.75h16.5a.75.75 0 010 1.5H3.75a.75.75 0 01-.75-.75z"
-							clip-rule="evenodd"
-						/>
-					</svg>
-				</a>
-			</SimpleTooltip>
-			<SimpleTooltip content="YAKKL University" position="bottom">
-				<GraduationCapButton />
-			</SimpleTooltip>
-			<!-- New Wallet Demo Button -->
-			<SimpleTooltip content="Preview new wallet design" position="bottom">
-				<button
-					onclick={() => goto('/preview2')}
-					class="flex items-center justify-center w-8 h-8 bg-gradient-to-r from-purple-500 to-indigo-600 rounded-full shadow-md hover:from-purple-600 hover:to-indigo-700 transition-all"
-					aria-label="Preview new design"
-				>
-					<svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
-						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
-					</svg>
-				</button>
-			</SimpleTooltip>
-		</div>
-
-		<!-- Center Badge -->
-		<div class="flex items-center justify-center">
-			<PlanBadge />
-		</div>
-
-		<!-- Right Icons -->
-		<div class="flex items-center justify-end gap-4">
-			<Share />
-			{#if browserContext === ExtensionContext.SIDEPANEL}
-				<button onclick={handlePopout} aria-label="Popout">
-					<!-- popout icon -->
-				</button>
-			{:else}
-				<SimpleTooltip content="Open the profile menu" position="bottom">
-					<a
-						data-bs-toggle="offcanvas"
-						href="#offcanvasProfileMenu"
-						aria-controls="offcanvasProfileMenu"
-						role="button"
-						aria-label="Menu"
-						onmouseenter={handleProfileMenuHover}
-						onmouseleave={handleProfileMenuLeave}
-					>
-						<Avatar
-							url={avatarUrl}
-							userName={userName}
-							ariaLabel="Profile"
-							className="w-8 h-8 rounded-full ring-2 ring-offset-1"
-						/>
-					</a>
-				</SimpleTooltip>
-			{/if}
-		</div>
-	</nav>
-</ImageBar>
-
-<OffcanvasMainMenu />
-
-<OffcanvasProfileMenu {userName} {avatarUrl} />
diff --git a/packages/yakkl-wallet/src/lib/components/v1/ImageBar.svelte b/packages/yakkl-wallet/src/lib/components/v1/ImageBar.svelte
deleted file mode 100644
index 97f3daa..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/ImageBar.svelte
+++ /dev/null
@@ -1,16 +0,0 @@
-<script lang="ts">
-	interface Props {
-		children?: import('svelte').Snippet;
-	}
-
-	let { children }: Props = $props();
-</script>
-
-<!-- inset-x-0 -->
-<!-- 40px is small bar and 100px is for larger view -->
-<div
-	id="imgHeader"
-	class="visible print:hidden relative top-0 h-[65px] bg-cover bg-[url('/images/background_gradient_2.png')] mx-2 mt-2 rounded-lg"
->
-	{@render children?.()}
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/Import.svelte b/packages/yakkl-wallet/src/lib/components/v1/Import.svelte
deleted file mode 100644
index dee79b6..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/Import.svelte
+++ /dev/null
@@ -1,134 +0,0 @@
-<script lang="ts">
-	import EmergencyKitModal from './EmergencyKitModal.svelte';
-	import ImportOptionModal from './ImportOptionModal.svelte';
-	import ImportPhrase from './ImportPhrase.svelte';
-	import ImportPrivateKey from './ImportPrivateKey.svelte';
-	import ImportWatchAccount from './ImportWatchAccount.svelte';
-
-	interface Props {
-		show?: boolean;
-		showImportWatch?: boolean;
-		onCancel?: () => void;
-		onClose?: () => void;
-		onComplete?: (imported: string) => void;
-		onImportKey?: () => void;
-		onImportPhrase?: () => void;
-		onImportWatch?: () => void;
-		onRestore?: () => void;
-	}
-
-	let {
-		show = $bindable(false),
-		showImportWatch = false,
-		onCancel = () => {
-			show = false;
-		},
-		onClose = () => {
-			show = false;
-		},
-		onComplete = (imported: string) => {
-			show = false;
-		},
-		onImportKey = () => {
-			show = false;
-			showImportAccount = true;
-		},
-		onImportPhrase = () => {
-			show = false;
-			showImportPhrase = true;
-		},
-		onImportWatch = () => {
-			show = false;
-			showImportWatchAccount = true;
-		},
-		onRestore = () => {
-			show = false;
-			showEmergencyKit = true;
-		}
-	}: Props = $props();
-
-	let showImportWatchAccount = $state(false);
-	let showImportAccount = $state(false);
-	let showImportPhrase = $state(false);
-	let showEmergencyKit = $state(false);
-
-	function onCompleteImportPrivateKey() {
-		showImportAccount = false;
-		show = false;
-		onComplete('Private Key');
-	}
-
-	function onCancelImportPrivateKey() {
-		showImportAccount = false;
-		show = false;
-	}
-
-	function onCompleteImportPhrase() {
-		showImportPhrase = false;
-		show = false;
-		onComplete('Secret Phrase');
-	}
-
-	function onCancelImportPhrase() {
-		showImportPhrase = false;
-		show = false;
-	}
-
-	function onCompleteImportWatch() {
-		showImportPhrase = false;
-		show = false;
-		onComplete('Secret Phrase');
-	}
-
-	function onCancelImportWatch() {
-		showImportPhrase = false;
-		show = false;
-	}
-
-	function onCompleteEmergenyKit() {
-		showEmergencyKit = false;
-		show = false;
-		onComplete('Emergency Kit');
-	}
-
-	function onCancelEmergencyKit() {
-		showEmergencyKit = false;
-		show = false;
-	}
-</script>
-
-<ImportOptionModal
-	{show}
-	{showImportWatch}
-	{onCancel}
-	{onClose}
-	{onImportKey}
-	{onImportPhrase}
-	{onImportWatch}
-	{onRestore}
-/>
-
-<ImportPrivateKey
-	bind:show={showImportAccount}
-	onComplete={onCompleteImportPrivateKey}
-	onCancel={onCancelImportPrivateKey}
-/>
-
-<ImportPhrase
-	bind:show={showImportPhrase}
-	onComplete={onCompleteImportPhrase}
-	onCancel={onCancelImportPhrase}
-/>
-
-<ImportWatchAccount
-	bind:show={showImportWatchAccount}
-	onComplete={onCompleteImportWatch}
-	onCancel={onCancelImportWatch}
-/>
-
-<EmergencyKitModal
-	bind:show={showEmergencyKit}
-	mode="import"
-	onComplete={onCompleteEmergenyKit}
-	onCancel={onCancelEmergencyKit}
-/>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/ImportOption.svelte b/packages/yakkl-wallet/src/lib/components/v1/ImportOption.svelte
deleted file mode 100644
index c66c028..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/ImportOption.svelte
+++ /dev/null
@@ -1,120 +0,0 @@
-<script lang="ts">
-	import { onMount } from 'svelte';
-	import { getSettings } from '$lib/common/stores';
-	import { shouldShowProFeatures } from '$lib/common/token-analytics';
-	import { PlanType } from '$lib/common/types';
-	import type { Settings } from '$lib/common/interfaces';
-	import SimpleTooltip from './SimpleTooltip.svelte';
-
-	interface Props {
-		/// <reference types="svelte" />
-		showImportWatch?: boolean;
-		title?: string;
-		onImportKey: () => void;
-		onImportPhrase: () => void;
-		onImportWatch: () => void;
-		onRestore: () => void;
-	}
-
-	let {
-		showImportWatch = false,
-		title = 'Importing/Restoring Options',
-		onImportKey,
-		onImportPhrase,
-		onImportWatch,
-		onRestore
-	}: Props = $props();
-
-	let settings: Settings | null = $state(null);
-	let isProUser = $state(false);
-
-	onMount(async () => {
-		settings = await getSettings();
-		isProUser = shouldShowProFeatures(settings?.plan?.type || PlanType.BASIC_MEMBER);
-	});
-
-	function handleRestore() {
-		if (!isProUser) return;
-		onRestore();
-	}
-</script>
-
-<div
-	class="bg-surface-light dark:bg-surface-dark text-primary-light dark:text-primary-dark rounded-lg p-6 shadow-md"
->
-	<h1 class="text-2xl font-bold text-center text-primary-light dark:text-primary-dark mb-4">
-		{title}
-	</h1>
-
-	<div class="space-y-4 mb-6">
-		<p class="text-secondary-light dark:text-secondary-dark text-center">
-			Choose an option to import or restore your wallet:
-		</p>
-		<ul class="list-disc list-inside text-secondary-light dark:text-secondary-dark space-y-2">
-			<li>Import a single account using a private key</li>
-			<li>Import a single account using a secret phrase (12-24 words)</li>
-			{#if showImportWatch}
-				<li>Import a single watch-only address</li>
-			{/if}
-			<li>Restore everything from a YAKKL Emergency Kit (recover your whole wallet)</li>
-		</ul>
-	</div>
-
-	<div class="space-y-3">
-		<!-- Import using Private Key -->
-		<button
-			onclick={onImportKey}
-			class="w-full py-2 px-4 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-opacity-75 transition duration-200 ease-in-out"
-		>
-			Import using Private Key
-		</button>
-
-		<!-- Import Watch-Only Address (if applicable) -->
-		{#if showImportWatch}
-			<button
-				onclick={onImportWatch}
-				class="w-full py-2 px-4 bg-amber-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-opacity-75 transition duration-200 ease-in-out"
-			>
-				Import Watch-Only Address
-			</button>
-		{/if}
-
-		<!-- Import using Secret Phrase -->
-		<button
-			onclick={onImportPhrase}
-			class="w-full py-2 px-4 bg-green-600 text-white font-semibold rounded-lg shadow-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-400 focus:ring-opacity-75 transition duration-200 ease-in-out"
-		>
-			Import using Secret Phrase
-		</button>
-
-		<!-- Restore from Emergency Kit -->
-		{#if isProUser}
-			<button
-				onclick={handleRestore}
-				class="w-full py-2 px-4 bg-red-600 text-white font-semibold rounded-lg shadow-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-400 focus:ring-opacity-75 transition duration-200 ease-in-out flex items-center justify-center gap-2"
-			>
-				<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
-					<path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4M12,6A6,6 0 0,0 6,12A6,6 0 0,0 12,18A6,6 0 0,0 18,12A6,6 0 0,0 12,6M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8Z"/>
-				</svg>
-				Restore all from Emergency Kit
-			</button>
-		{:else}
-			<SimpleTooltip content="Upgrade to Pro for full Emergency Kit features">
-				<button
-					disabled
-					class="w-full py-2 px-4 bg-gray-400 text-gray-200 font-semibold rounded-lg shadow-md cursor-not-allowed transition duration-200 ease-in-out flex items-center justify-center gap-2 relative"
-				>
-					<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
-						<path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4M12,6A6,6 0 0,0 6,12A6,6 0 0,0 12,18A6,6 0 0,0 18,12A6,6 0 0,0 12,6M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8Z"/>
-					</svg>
-					Restore all from Emergency Kit
-					<div class="absolute -top-1 -right-1 w-4 h-4 bg-gradient-to-r from-indigo-400 to-purple-400 rounded-full flex items-center justify-center">
-						<svg class="w-2.5 h-2.5 text-white" fill="currentColor" viewBox="0 0 20 20">
-							<path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
-						</svg>
-					</div>
-				</button>
-			</SimpleTooltip>
-		{/if}
-	</div>
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/ImportOptionModal.svelte b/packages/yakkl-wallet/src/lib/components/v1/ImportOptionModal.svelte
deleted file mode 100644
index da8add8..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/ImportOptionModal.svelte
+++ /dev/null
@@ -1,42 +0,0 @@
-<script lang="ts">
-	import Modal from '$lib/components/Modal.svelte';
-	import ImportOption from '$lib/components/ImportOption.svelte';
-
-	interface Props {
-		show?: boolean;
-		showImportWatch?: boolean;
-		onCancel?: () => void;
-		onClose?: () => void;
-		onImportKey?: () => void;
-		onImportPhrase?: () => void;
-		onImportWatch?: () => void;
-		onRestore?: () => void;
-	}
-
-	let {
-		show = $bindable(false),
-		showImportWatch = false,
-		onCancel = $bindable(() => {
-			show = false;
-		}),
-		onClose = $bindable(() => {
-			show = false;
-		}),
-		onImportKey = () => {
-			show = false;
-		},
-		onImportPhrase = () => {
-			show = false;
-		},
-		onImportWatch = () => {
-			show = false;
-		},
-		onRestore = () => {
-			show = false;
-		}
-	}: Props = $props();
-</script>
-
-<Modal bind:show {onCancel} {onClose} title="Import or Restore Wallet">
-	<ImportOption {showImportWatch} {onImportKey} {onImportPhrase} {onImportWatch} {onRestore} />
-</Modal>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/ImportPhrase.svelte b/packages/yakkl-wallet/src/lib/components/v1/ImportPhrase.svelte
deleted file mode 100644
index f0adb21..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/ImportPhrase.svelte
+++ /dev/null
@@ -1,622 +0,0 @@
-<!-- ImportPhrase.svelte -->
-<script lang="ts">
-	import { browserSvelte } from '$lib/common/environment';
-	import { ethers as ethersv6 } from 'ethers-v6';
-	import { createForm } from 'svelte-forms-lib';
-	import * as yup from 'yup';
-	import { onMount } from 'svelte';
-	import { incrementProperty } from '$lib/utilities';
-	import { getWallet } from '$lib/utilities/ethereum';
-	import { deepCopy, getSymbol } from '$lib/utilities';
-	import {
-		setSettingsStorage,
-		getSettings,
-		yakklMiscStore,
-		setProfileStorage,
-		setYakklCurrentlySelectedStorage,
-		setYakklPrimaryAccountsStorage,
-		getYakklPrimaryAccounts,
-		getYakklAccounts,
-		setYakklAccountsStorage,
-		getProfile
-	} from '$lib/common/stores';
-	import { encryptData, decryptData } from '$lib/common/encryption';
-	import { DEFAULT_DERIVED_PATH_ETH, DEFAULT_PERSONA, VERSION } from '$lib/common/constants';
-	import {
-		AccountTypeCategory,
-		addressExist,
-		isEncryptedData,
-		type CurrentlySelectedData,
-		type PrimaryAccountData,
-		type Profile,
-		type ProfileData,
-		type YakklAccount,
-		type YakklCurrentlySelected,
-		type YakklPrimaryAccount
-	} from '$lib/common';
-	import { dateString } from '$lib/common/datetime';
-	import PincodeVerify from './PincodeVerify.svelte';
-	import Modal from './Modal.svelte';
-	import { log } from '$lib/managers/Logger';
-
-	interface Props {
-		show?: boolean;
-		className?: string;
-		onComplete?: () => void; // May want to add parameters to show what imported but not currently needed
-		onCancel?: () => void;
-	}
-
-	let {
-		show = $bindable(false),
-		className = 'text-gray-600 z-[999]',
-		onComplete = () => {
-			showPincodeModal = false;
-			show = false;
-		},
-		onCancel = $bindable(() => {
-			showPincodeModal = false;
-			show = false;
-		})
-	}: Props = $props();
-
-	let currentlySelected: YakklCurrentlySelected;
-	let error = $state('');
-	let elements: NodeListOf<HTMLInputElement>;
-	let selected = $state('24');
-	let subAccounts = $state(true);
-	let showPincodeModal = $state(false);
-	let index = 0;
-
-	async function processSecretPhraseRecovery(secretPhrase: string) {
-		if (browserSvelte) {
-			try {
-				const selectedWords = secretPhrase.split(' ').slice(0, parseInt(selected));
-				const yakklPrimaryAccount = await createPortfolioAccount(selectedWords.join(' '));
-				onComplete();
-
-				// Create subAccounts if enabled
-				if (subAccounts) {
-					let derivedIndex = 0;
-
-					while (true) {
-						const dPath = `${DEFAULT_DERIVED_PATH_ETH}${index}'/0/${derivedIndex}`;
-
-						const randomMnemonic = (yakklPrimaryAccount.data as PrimaryAccountData)
-							.mnemonic as string;
-						const ethWallet = ethersv6.HDNodeWallet.fromPhrase(randomMnemonic, dPath);
-						const wallet = getWallet(ethWallet.privateKey);
-
-						const balance = await wallet.getBalance();
-
-						if (balance.isZero()) {
-							break;
-						}
-
-						let addressDerived = wallet.address;
-						incrementProperty(yakklPrimaryAccount, 'subIndex');
-
-						let yakklAccount: YakklAccount = {
-							id: yakklPrimaryAccount.id,
-							index:
-								(yakklPrimaryAccount.subIndex ?? 0 > 0)
-									? (yakklPrimaryAccount.subIndex ?? 1) - 1
-									: 0,
-							blockchain: currentlySelected!.shortcuts.network.blockchain,
-							smartContract: false,
-							address: addressDerived,
-							alias: '',
-							accountType: AccountTypeCategory.SUB,
-							name: `Account ${yakklPrimaryAccount.subIndex}`,
-							description: '',
-							primaryAccount: yakklPrimaryAccount,
-							data: {
-								extendedKey: ethWallet.extendedKey,
-								privateKey: ethWallet.privateKey,
-								publicKey: ethWallet.publicKey,
-								publicKeyUncompressed: ethWallet.publicKey,
-								path: dPath,
-								pathIndex: ethWallet.index,
-								fingerPrint: ethWallet.fingerprint,
-								parentFingerPrint: ethWallet.parentFingerprint,
-								chainCode: ethWallet.chainCode,
-								assignedTo: []
-							},
-							quantity: balance,
-							class: 'Default',
-							level: 'L1',
-							isSigner: true,
-							avatar: '',
-							tags: [currentlySelected!.shortcuts.network.blockchain, 'sub'],
-							includeInPortfolio: true,
-							connectedDomains: [],
-							createDate: dateString(),
-							updateDate: dateString(),
-							version: VERSION
-						};
-
-						let yakklAccountEnc = deepCopy(yakklAccount) as YakklAccount;
-						await encryptData(yakklAccount.data, $yakklMiscStore).then((result) => {
-							yakklAccountEnc.data = result;
-						});
-						if (yakklPrimaryAccount.subAccounts) {
-							yakklPrimaryAccount.subAccounts.push(yakklAccountEnc);
-						}
-
-						let profile = await getProfile();
-						if (profile) {
-							(profile.data as ProfileData).primaryAccounts =
-								(profile.data as ProfileData).primaryAccounts || [];
-							(profile.data as ProfileData).primaryAccounts[yakklPrimaryAccount.index] =
-								yakklPrimaryAccount;
-							await setYakklPrimaryAccountsStorage((profile.data as ProfileData).primaryAccounts);
-
-							let profileEnc = deepCopy(profile);
-							await encryptData(profile.data, $yakklMiscStore).then((result) => {
-								profileEnc.data = result;
-							});
-							await setProfileStorage(profileEnc);
-						}
-
-						derivedIndex++;
-					}
-				}
-
-				show = false;
-			} catch (e) {
-				error = `Your Wallet did not initialize for the following reason: ${e}`;
-			}
-		}
-	}
-
-	async function createPortfolioAccount(mnemonic: string): Promise<YakklPrimaryAccount> {
-		try {
-			if (browserSvelte) {
-				let yakklSettings = await getSettings();
-				if (!yakklSettings) {
-					throw 'The settings data has not been initialized. This could be due to not yet registered or data could be incomplete which requires registering again. If unable to re-register then uninstall and reinstall. No Ethereum data will be impacted.';
-				}
-
-				let profile = await getProfile();
-				if (!profile) {
-					throw 'Profile was not found.';
-				}
-
-				if (!profile.data || !$yakklMiscStore) {
-					throw 'Profile data does not appear to be encrypted. Please register or re-register. Thank you.';
-				}
-
-				if (isEncryptedData(profile.data)) {
-					await decryptData(profile.data, $yakklMiscStore).then((result) => {
-						profile.data = result as ProfileData;
-					});
-				}
-
-				(profile.data as ProfileData).meta = {};
-				let preferences = profile.preferences;
-
-				index = (profile.data as ProfileData).accountIndex ?? 0;
-				let derivedPath = `${DEFAULT_DERIVED_PATH_ETH}${index}'/0/0`;
-
-				const mnemonicObject = ethersv6.Mnemonic.fromPhrase(mnemonic);
-				const ethWallet = ethersv6.HDNodeWallet.fromMnemonic(mnemonicObject, derivedPath);
-
-				// Check if address already exists in accounts or primary accounts
-				const { exists, table } = await addressExist(ethWallet.address);
-				if (exists) {
-					throw `The Ethereum Wallet (Portfolio Account) was not able to be created. Address already exists in ${table}. Please try again.`;
-				}
-
-				if (!ethWallet) {
-					throw 'The Ethereum Wallet (Portfolio Account) was not able to be created. Please try again.';
-				}
-
-				let currentDate = dateString();
-
-				(profile.data as ProfileData).accountIndex = index + 1;
-
-				let yakklAccount: YakklAccount = {
-					id: profile.id,
-					index: index,
-					blockchain: currentlySelected!.shortcuts.network.blockchain,
-					smartContract: false,
-					address: ethWallet.address,
-					alias: '',
-					accountType: AccountTypeCategory.PRIMARY,
-					name: `Top Level Account ${index + 1}`,
-					description: '',
-					primaryAccount: null,
-					data: {
-						extendedKey: ethWallet.extendedKey,
-						privateKey: ethWallet.privateKey,
-						publicKey: ethWallet.publicKey,
-						publicKeyUncompressed: ethWallet.publicKey,
-						path: ethWallet.path ? ethWallet.path : derivedPath,
-						pathIndex: index,
-						fingerPrint: ethWallet.fingerprint,
-						parentFingerPrint: ethWallet.parentFingerprint,
-						chainCode: ethWallet.chainCode,
-						assignedTo: []
-					},
-					quantity: 0n,
-					class: 'Default',
-					level: 'L1',
-					isSigner: true,
-					avatar: '',
-					tags: [currentlySelected!.shortcuts.network.blockchain, 'primary'],
-					includeInPortfolio: true,
-					connectedDomains: [],
-					createDate: currentDate,
-					updateDate: currentDate,
-					version: VERSION
-				};
-
-				let yakklPrimaryAccount: YakklPrimaryAccount = {
-					id: yakklAccount.id,
-					name: yakklAccount.name,
-					address: yakklAccount.address,
-					quantity: yakklAccount.quantity,
-					index: index,
-					data: {
-						privateKey: ethWallet.privateKey,
-						publicKey: ethWallet.publicKey,
-						path: ethWallet.path ? ethWallet.path : derivedPath,
-						pathIndex: index,
-						fingerPrint: ethWallet.fingerprint,
-						parentFingerPrint: ethWallet.parentFingerprint,
-						chainCode: ethWallet.chainCode,
-						extendedKey: ethWallet.extendedKey,
-						mnemonic: ethWallet.mnemonic?.phrase,
-						entropy: undefined,
-						password: ethWallet.mnemonic?.password,
-						publicKeyUncompressed: ethWallet.publicKey,
-						wordCount: ethWallet.mnemonic?.phrase.split(' ').length,
-						wordListLocale: ethWallet.mnemonic?.wordlist.locale
-					},
-					account: yakklAccount,
-					subIndex: 0,
-					subAccounts: [],
-					createDate: yakklAccount.createDate,
-					updateDate: yakklAccount.updateDate,
-					version: VERSION
-				};
-
-				let yakklPrimaryAccountEnc = deepCopy(yakklPrimaryAccount) as YakklPrimaryAccount;
-
-				await encryptData(yakklPrimaryAccount.data, $yakklMiscStore).then((result) => {
-					yakklPrimaryAccountEnc.data = result;
-				});
-
-				yakklPrimaryAccountEnc.account = yakklAccount;
-
-				await encryptData(yakklAccount.data, $yakklMiscStore).then((result) => {
-					yakklPrimaryAccountEnc.account.data = result;
-				});
-
-				let yakklPrimaryAccounts: YakklPrimaryAccount[] = [];
-				let primaryAccountsStorage = await getYakklPrimaryAccounts();
-
-				if (primaryAccountsStorage?.length > 0) {
-					yakklPrimaryAccounts = primaryAccountsStorage;
-				}
-
-				if (yakklPrimaryAccountEnc) {
-					yakklPrimaryAccounts.push(yakklPrimaryAccountEnc);
-					await setYakklPrimaryAccountsStorage(yakklPrimaryAccounts);
-				}
-
-				let yakklAccounts: any[] = [];
-				let accountsStorage = await getYakklAccounts();
-
-				if (accountsStorage?.length > 0) {
-					yakklAccounts = accountsStorage;
-				}
-
-				yakklPrimaryAccountEnc.account.primaryAccount = null;
-
-				yakklAccounts.push(yakklPrimaryAccountEnc.account);
-				await setYakklAccountsStorage(yakklAccounts);
-
-				await ethWallet.signMessage($yakklMiscStore).then((result) => {
-					(profile.data as ProfileData).sig = result;
-				});
-
-				let profileEnc: Profile = deepCopy(profile);
-
-				await encryptData(profileEnc.data, $yakklMiscStore).then((result) => {
-					profileEnc.data = result;
-				});
-
-				if (profileEnc) {
-					await setProfileStorage(profileEnc);
-					yakklSettings.init = currentlySelected!.shortcuts.init = true;
-					yakklSettings.isLocked = currentlySelected!.shortcuts.isLocked = false;
-					await setSettingsStorage(yakklSettings);
-
-					let accountName = yakklAccount.name;
-
-					let yakklCurrentlySelected = currentlySelected;
-
-					yakklCurrentlySelected!.version = VERSION;
-					yakklCurrentlySelected!.id = profile.id;
-					yakklCurrentlySelected!.persona = profile?.persona || DEFAULT_PERSONA;
-					yakklCurrentlySelected!.preferences.locale = preferences.locale;
-					yakklCurrentlySelected!.preferences.currency = preferences.currency;
-
-					yakklCurrentlySelected!.shortcuts.blockchain = yakklAccount.blockchain;
-					yakklCurrentlySelected!.shortcuts.symbol = getSymbol(yakklAccount.blockchain);
-					yakklCurrentlySelected!.shortcuts.isLocked = false;
-					yakklCurrentlySelected!.shortcuts.showTestNetworks =
-						preferences.showTestNetworks as boolean;
-					yakklCurrentlySelected!.shortcuts.profile.name = (profile.data as ProfileData).name;
-					yakklCurrentlySelected!.shortcuts.profile.email = (profile.data as ProfileData).email;
-					yakklCurrentlySelected!.shortcuts.primary = yakklPrimaryAccountEnc;
-					yakklCurrentlySelected!.shortcuts.address = yakklAccount.address;
-					yakklCurrentlySelected!.shortcuts.accountName = accountName;
-					yakklCurrentlySelected!.shortcuts.accountType = AccountTypeCategory.PRIMARY;
-					yakklCurrentlySelected!.shortcuts.alias = yakklAccount.alias;
-					yakklCurrentlySelected!.shortcuts.smartContract = false;
-
-					(yakklCurrentlySelected!.data as CurrentlySelectedData).primaryAccount =
-						yakklPrimaryAccountEnc;
-					(yakklCurrentlySelected!.data as CurrentlySelectedData).account = yakklAccount;
-
-					yakklCurrentlySelected!.createDate = yakklAccount.createDate;
-					yakklCurrentlySelected!.updateDate = yakklAccount.updateDate;
-
-					let currentDeepCopy = deepCopy(yakklCurrentlySelected);
-					await setYakklCurrentlySelectedStorage(yakklCurrentlySelected!);
-					currentlySelected = currentDeepCopy;
-
-					return yakklPrimaryAccountEnc;
-				} else {
-					throw new Error('Failed to create profile encryption');
-				}
-			} else {
-				throw new Error('Browser environment not available');
-			}
-		} catch (e) {
-			log.error(`Your Wallet did not initialize for the following reason: ${e}`);
-			throw e;
-		}
-	}
-
-	const { form, errors, handleChange, handleSubmit, updateInitialValues } = createForm({
-		initialValues: {
-			secretPhrase: ''
-		},
-		validationSchema: yup.object().shape({
-			secretPhrase: yup.string().required('Please enter your secret recovery phrase')
-		}),
-		onSubmit: (data) => {
-			try {
-				const elements = document.querySelectorAll<HTMLInputElement>('[data-id]');
-				let secretPhrase = '';
-				if (elements) {
-					elements.forEach((el) => {
-						secretPhrase += el.value + ' ';
-					});
-					secretPhrase = secretPhrase.trim();
-					const selectedWords = secretPhrase.split(' ').slice(0, parseInt(selected));
-					processSecretPhraseRecovery(selectedWords.join(' '));
-				} else {
-					throw new Error(
-						'Your Secret Phrase does not seem to be correct. Check the formatting. You can enter each word and it MUST BE IN ORDER -OR- paste the whole phrase after copying from your backup into any field.'
-					);
-				}
-			} catch (e) {
-				log.error(e);
-				error = String(e);
-				resetForm();
-			}
-		}
-	});
-
-	function resetForm() {
-		updateInitialValues({
-			secretPhrase: ''
-		});
-		const elements = document.querySelectorAll<HTMLInputElement>('[data-id]');
-		elements.forEach((el) => {
-			el.value = '';
-		});
-	}
-
-	function hideShowWords() {
-		let count = parseInt(selected);
-
-		let element: HTMLElement | null;
-		let element_text: HTMLElement | null;
-
-		for (let wordCount = 13; wordCount <= 24; wordCount++) {
-			element_text = document.getElementById(`word_text_${wordCount}`);
-			element = document.getElementById(`word_${wordCount}`);
-
-			if (element_text && element) {
-				// Show and then toggle - this covers fringe cases
-				element_text.style.display = 'block';
-				element.style.display = 'block';
-			}
-		}
-
-		for (let wordCount = 24; wordCount > count; wordCount--) {
-			element_text = document.getElementById(`word_text_${wordCount}`);
-			element = document.getElementById(`word_${wordCount}`);
-
-			if (element_text && element) {
-				if (element_text.style.display === 'none') {
-					element_text.style.display = 'block';
-				} else {
-					element_text.style.display = 'none';
-				}
-
-				if (element.style.display === 'none') {
-					element.style.display = 'block';
-				} else {
-					element.style.display = 'none';
-				}
-			}
-		}
-
-		let mtop: string;
-		switch (count) {
-			case 12:
-				mtop = '-mt-[9rem]';
-				break;
-			case 15:
-				mtop = '-mt-[6.5rem]';
-				break;
-			case 18:
-				mtop = '-mt-[4.25rem]';
-				break;
-			case 21:
-				mtop = '-mt-[2.5rem]';
-				break;
-			case 24: // Our default
-				mtop = '';
-				break;
-			default:
-				mtop = '';
-				break;
-		}
-	}
-
-	function toggleWordsVisibility() {
-		elements = document.querySelectorAll('[data-id]') as NodeListOf<HTMLInputElement>;
-		elements.forEach((el) => {
-			if (el.type === 'password') {
-				el.type = 'text';
-			} else {
-				el.type = 'password';
-			}
-		});
-	}
-
-	// Custom paste logic - Always becareful with custom paste logic and make sure not to do it on global basis unless that is desired.
-	function handlePaste(e: ClipboardEvent) {
-		const data = e.clipboardData?.getData('Text');
-		const words = data?.split(' ');
-
-		if (words && words.length > 1) {
-			// If multiple words are being pasted, prevent default and handle custom logic
-			e.preventDefault();
-			const nodes = document.querySelectorAll<HTMLInputElement>('[data-id]');
-			nodes.forEach((node, index) => {
-				node.value = words[index] || '';
-			});
-		}
-		// Otherwise, let the default paste behavior happen
-	}
-
-	onMount(() => {
-		hideShowWords();
-		// document.addEventListener('paste', handlePaste);
-	});
-
-	function handleSubaccounts() {
-		subAccounts = !subAccounts;
-	}
-
-	async function verifyPincode(pincode: string) {
-		showPincodeModal = false;
-		show = true;
-	}
-</script>
-
-<PincodeVerify bind:show={showPincodeModal} onVerified={verifyPincode} />
-
-<div class="relative {className}">
-	<Modal bind:show {onCancel} title="Import - Secret Recovery Phrase" {className}>
-		<div class="p-6 text-gray-700 dark:text-gray-200">
-			<p class="text-sm text-red-500 mb-4">
-				Please be careful! <strong>This Secret Recovery Phrase is important!</strong>
-				A bad actor could take the content of your wallet if they have access to your Private Key or
-				Secret Recovery Phrase! This process will restore all of the accounts that were created by YAKKL
-				only! If you imported existing private keys from another wallet then you will need to do so again.
-			</p>
-			<form onsubmit={handleSubmit} class="space-y-4">
-				<div>
-					<label for="words" class="block text-sm font-medium text-gray-700 dark:text-gray-200"
-						>Secret Recovery Phrase Length</label
-					>
-					<select
-						id="words"
-						class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"
-						bind:value={selected}
-						onchange={hideShowWords}
-					>
-						<option value="12">12 Word Secret Phrase</option>
-						<option value="15">15 Word Secret Phrase</option>
-						<option value="18">18 Word Secret Phrase</option>
-						<option value="21">21 Word Secret Phrase</option>
-						<option value="24" selected>24 Word Secret Phrase</option>
-					</select>
-				</div>
-				<div>
-					<!-- svelte-ignore a11y_label_has_associated_control -->
-					<label class="block text-sm font-medium text-gray-700 dark:text-gray-200"
-						>Secret Recovery Phrase Words</label
-					>
-					<div class="mt-1 grid grid-cols-2 gap-2">
-						{#each Array(parseInt(selected)) as _, index (index)}
-							<div class="flex items-center">
-								<span class="w-8 text-sm text-gray-700 dark:text-gray-200">{index + 1}.</span>
-								<input
-									type="password"
-									class="flex-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"
-									data-id={index + 1}
-									aria-label={`Word ${index + 1}`}
-									onpaste={handlePaste}
-								/>
-							</div>
-						{/each}
-					</div>
-				</div>
-				<div class="flex items-center">
-					<input
-						type="checkbox"
-						id="showWords"
-						class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"
-						onclick={toggleWordsVisibility}
-					/>
-					<label for="showWords" class="ml-2 block text-sm text-gray-700 dark:text-gray-200"
-						>Show Secret Recovery Phrase Words</label
-					>
-				</div>
-				<div class="flex items-center">
-					<input
-						type="checkbox"
-						id="subaccounts"
-						class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"
-						bind:checked={subAccounts}
-						onchange={handleSubaccounts}
-					/>
-					<label for="subaccounts" class="ml-2 block text-sm text-gray-700 dark:text-gray-200"
-						>Recover Subportfolio Accounts</label
-					>
-				</div>
-				<div class="pt-5">
-					<div class="flex justify-end space-x-4">
-						<button
-							type="button"
-							class="rounded-md border border-gray-300 bg-white py-2 px-4 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"
-							onclick={onCancel}>Cancel</button
-						>
-						<button
-							type="button"
-							class="rounded-md border border-gray-300 bg-white py-2 px-4 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"
-							onclick={resetForm}>Reset</button
-						>
-						<button
-							type="submit"
-							class="rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"
-							>Import</button
-						>
-					</div>
-				</div>
-			</form>
-			{#if error}
-				<p class="mt-4 text-sm text-red-600">{error}</p>
-			{/if}
-		</div>
-	</Modal>
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/ImportPrivateKey.svelte b/packages/yakkl-wallet/src/lib/components/v1/ImportPrivateKey.svelte
deleted file mode 100644
index a20bc66..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/ImportPrivateKey.svelte
+++ /dev/null
@@ -1,364 +0,0 @@
-<!-- ImportPrivateKey.svelte -->
-<script lang="ts">
-	import { browserSvelte } from '$lib/common/environment';
-	import {
-		setYakklAccountsStorage,
-		setYakklCurrentlySelectedStorage,
-		setProfileStorage,
-		getYakklAccounts,
-		getProfile,
-		getYakklCurrentlySelected,
-		getMiscStore
-	} from '$lib/common/stores';
-	import { yakklAccount as yakklAccountDefault } from '$lib/models/dataModels';
-	import { getWallet } from '$lib/utilities/ethereum';
-	import { encryptData, decryptData } from '$lib/common/encryption';
-	import { deepCopy, getSymbol } from '$lib/utilities/utilities';
-	import { DEFAULT_PERSONA, VERSION } from '$lib/common/constants';
-	import { createForm } from 'svelte-forms-lib';
-	import * as yup from 'yup';
-	// import { Confetti } from 'svelte-confetti';
-	// import { confetti } from '@neoconfetti/svelte';
-	import {
-		AccountTypeCategory,
-		addressExist,
-		isEncryptedData,
-		NetworkType,
-		type AccountData,
-		type CurrentlySelectedData,
-		type Profile,
-		type ProfileData,
-		type YakklAccount,
-		type YakklCurrentlySelected
-	} from '$lib/common';
-	import WalletManager from '$lib/managers/WalletManager';
-	import type { Wallet } from '$lib/managers/Wallet';
-	import { onMount } from 'svelte';
-	import { dateString } from '$lib/common/datetime';
-	import Modal from './Modal.svelte';
-	import { log } from '$lib/managers/Logger';
-
-	let wallet: Wallet;
-	let currentlySelected: YakklCurrentlySelected;
-	let yakklMiscStore: string;
-	let chainId: number = 1;
-	let error = $state('');
-	let showConfetti = $state(false);
-
-	interface Props {
-		show?: boolean;
-		className?: string;
-		onComplete?: (account: YakklAccount) => void;
-		onCancel?: () => void;
-	}
-
-	let {
-		show = $bindable(false),
-		className = 'text-gray-600 z-[999]',
-		onComplete = () => {
-			show = false;
-		},
-		onCancel = $bindable(() => {
-			show = false;
-		})
-	}: Props = $props();
-
-	onMount(async () => {
-		try {
-			yakklMiscStore = getMiscStore();
-			if (yakklMiscStore) {
-				currentlySelected = await getYakklCurrentlySelected();
-				wallet = WalletManager.getInstance(
-					['Alchemy'],
-					['Ethereum'],
-					currentlySelected.shortcuts.chainId ?? 1,
-					import.meta.env.VITE_ALCHEMY_API_KEY_PROD
-				);
-			}
-		} catch (e) {
-			log.error(`Error decrypting data: ${e}`);
-		}
-	});
-
-	const { form, errors, handleChange, handleSubmit, updateInitialValues } = createForm({
-		initialValues: { accountName: '', alias: '', prvKey: '' },
-		validationSchema: yup.object().shape({
-			accountName: yup.string().required('Please enter your account name for the address'),
-			alias: yup.string(),
-			prvKey: yup
-				.string()
-				.required('Please paste or enter your Private Key for the address you are importing')
-		}),
-		onSubmit: async (data) => {
-			try {
-				await handleImport(data.accountName, data.alias, data.prvKey);
-			} catch (e) {
-				error = `Following error occurred: ${e}`;
-				log.error(error);
-			}
-		}
-	});
-
-	async function checkIfAccountExists(name: string, address: string, alias: string) {
-		const yakklAccounts = await getYakklAccounts();
-		// Check if the address exists in the accounts table along with the name and alias
-		const result = yakklAccounts.find((x) => {
-			if (x.address === address || x.name === name || (alias && x.alias === alias)) return true;
-		});
-		if (result) {
-			return true;
-		}
-		// Double check if the address exists in the accounts or primary accounts tables
-		const { exists, table } = await addressExist(address);
-		return exists;
-	}
-
-	async function handleImport(accountName: string, alias: string, prvKey: string) {
-		if (browserSvelte) {
-			if (!prvKey.trim()) {
-				error = 'Please enter a valid private key.';
-				return;
-			}
-
-			if (!accountName.trim()) {
-				error = 'Please enter a valid account name.';
-				return;
-			}
-
-			// EVM private key
-			if (prvKey.startsWith('0x')) {
-				prvKey = prvKey.substring(2);
-			}
-
-			if (await checkIfAccountExists(accountName, await getWallet(prvKey).getAddress(), alias)) {
-				error =
-					'Account already exists. Please enter a different account name, alias, or private key.';
-				return;
-			}
-
-			showConfetti = true;
-
-			if (!currentlySelected) currentlySelected = await getYakklCurrentlySelected();
-			if (isEncryptedData(currentlySelected.data)) {
-				await decryptData(currentlySelected.data, yakklMiscStore).then((result) => {
-					currentlySelected.data = result as CurrentlySelectedData;
-				});
-			}
-
-			let profile: Profile = (currentlySelected.data as CurrentlySelectedData).profile as Profile;
-			const yakklAccount = yakklAccountDefault;
-
-			if (profile) {
-				profile = deepCopy((currentlySelected.data as CurrentlySelectedData).profile);
-			} else {
-				profile = (await getProfile()) as Profile;
-				(currentlySelected.data as CurrentlySelectedData).profile = profile;
-			}
-
-			if (isEncryptedData(profile.data)) {
-				await decryptData(profile.data, yakklMiscStore).then((result) => {
-					profile.data = result as ProfileData;
-				});
-			}
-
-			if (profile.data !== undefined && (profile.data as ProfileData).meta) {
-				(profile.data as ProfileData).meta = {}; // Clear meta data
-			}
-
-			currentlySelected.shortcuts.type = 'Mainnet'; // Force mainnet for provider
-			currentlySelected.shortcuts.chainId = chainId; // Force mainnet for provider
-
-			// Alchemy wallet
-			const walletNew = getWallet(prvKey);
-
-			yakklAccount.id = currentlySelected.id;
-			yakklAccount.persona = currentlySelected?.persona || DEFAULT_PERSONA;
-			yakklAccount.blockchain = currentlySelected.shortcuts.network.blockchain;
-
-			(yakklAccount.data as AccountData).privateKey = prvKey;
-			(yakklAccount.data as AccountData).path = ''; // Imported accounts are not derived
-			yakklAccount.quantity = 0n; // Default
-			yakklAccount.address = await walletNew.getAddress();
-			yakklAccount.name = accountName;
-			yakklAccount.alias = alias;
-			yakklAccount.description = 'Imported account using private key';
-
-			await wallet
-				.getBalance(yakklAccount.address)
-				.then((result) => {
-					if (result) yakklAccount.quantity = result;
-				})
-				.catch((e) => {
-					log.error(`Import: error getting balance: ${e}`);
-				});
-
-			yakklAccount.index = -1;
-			yakklAccount.accountType = AccountTypeCategory.IMPORTED;
-			yakklAccount.primaryAccount = null; // Imported accounts do not have primary accounts
-			yakklAccount.class = 'Default';
-			yakklAccount.includeInPortfolio = true;
-			yakklAccount.createDate = dateString();
-			yakklAccount.updateDate = dateString();
-			yakklAccount.version = VERSION;
-
-			if (!isEncryptedData(yakklAccount.data)) {
-				await encryptData(yakklAccount.data, yakklMiscStore)
-					.then((result) => {
-						yakklAccount.data = result;
-					})
-					.catch((e) => {
-						log.error(`Import: error encrypting account data: ${e}`);
-					});
-			}
-
-			(currentlySelected.data as CurrentlySelectedData).account = yakklAccount;
-			(currentlySelected.data as CurrentlySelectedData).primaryAccount = null; // Imported accounts do not have a primary account
-
-			let yakklAccounts: YakklAccount[] = await getYakklAccounts();
-
-			if (!Array.isArray(yakklAccounts)) {
-				yakklAccounts = [];
-			}
-
-			if (profile.data) {
-				if (
-					(profile.data as ProfileData).importedAccounts === undefined ||
-					(profile.data as ProfileData).importedAccounts === null ||
-					!Array.isArray((profile.data as ProfileData).importedAccounts)
-				) {
-					(profile.data as ProfileData).importedAccounts = [];
-				}
-			}
-
-			(profile.data as ProfileData).importedAccounts.push(yakklAccount);
-
-			if (!isEncryptedData(profile.data)) {
-				await encryptData(profile.data, yakklMiscStore).then((result) => {
-					profile.data = result;
-				});
-			}
-
-			(currentlySelected.data as CurrentlySelectedData).profile = profile;
-
-			currentlySelected.shortcuts.quantity = !yakklAccount.quantity ? '0.0' : yakklAccount.quantity;
-			currentlySelected.shortcuts.address = yakklAccount.address;
-			currentlySelected.shortcuts.accountName = accountName;
-			currentlySelected.shortcuts.alias = alias;
-			currentlySelected.shortcuts.accountType = AccountTypeCategory.IMPORTED;
-			currentlySelected.shortcuts.primary = null;
-
-			currentlySelected.shortcuts.network.blockchain = yakklAccount.blockchain;
-			currentlySelected.shortcuts.network.chainId = chainId; // Defaults to mainnet
-			currentlySelected.shortcuts.network.name = 'Mainnet'; // Defaults to mainnet - should change to read from getNetworkName(chainId)
-			currentlySelected.shortcuts.network.explorer = 'https://etherscan.io'; // Defaults to etherscan
-			currentlySelected.shortcuts.network.type = NetworkType.MAINNET; // Defaults to mainnet
-			currentlySelected.shortcuts.network.decimals = 18; // Defaults to 18
-			currentlySelected.shortcuts.network.symbol = getSymbol(yakklAccount.blockchain);
-
-			yakklAccounts.push(yakklAccount);
-
-			await setProfileStorage(profile);
-			await setYakklAccountsStorage(yakklAccounts);
-			await setYakklCurrentlySelectedStorage(currentlySelected);
-
-			onComplete(yakklAccount);
-
-			show = false;
-		}
-	}
-
-	function closeModal() {
-		show = false;
-	}
-
-	function resetForm() {
-		updateInitialValues({
-			accountName: '',
-			alias: '',
-			prvKey: ''
-		});
-	}
-</script>
-
-<!-- {#if showConfetti} -->
-<!-- <Confetti /> -->
-<!-- <div use:confetti></div> -->
-<!-- {/if} -->
-
-<div class="relative {className}">
-	<Modal bind:show title="Import Account" onClose={closeModal} {onCancel} {className}>
-		<div class="p-6 border-t border-gray-500 dark:border-gray-300">
-			<p class="text-sm text-red-500 dark:text-red-300 mb-4">
-				Please be careful! <strong>This private key is important!</strong>
-				A bad actor could take the content of your wallet if they have access to your private key!
-			</p>
-			<form onsubmit={handleSubmit} class="space-y-4">
-				<div>
-					<label
-						for="accountName"
-						class="block text-sm font-medium text-gray-700 dark:text-gray-200">Account Name</label
-					>
-					<input
-						type="text"
-						id="accountName"
-						class="mt-1 block w-full rounded-md border-gray-500 dark:border-gray-50 shadow-sm focus:border-indigo-500 focus:ring-indigo-700 sm:text-sm"
-						bind:value={$form.accountName}
-						onchange={handleChange}
-					/>
-					{#if $errors.accountName}
-						<p class="mt-2 text-sm text-red-600">{$errors.accountName}</p>
-					{/if}
-				</div>
-				<div>
-					<label for="alias" class="block text-sm font-medium text-gray-700 dark:text-gray-200"
-						>Alias (Optional)</label
-					>
-					<input
-						type="text"
-						id="alias"
-						class="mt-1 block w-full rounded-md border-gray-500 dark:border-gray-50 shadow-sm focus:border-indigo-500 focus:ring-indigo-700 sm:text-sm"
-						bind:value={$form.alias}
-						onchange={handleChange}
-					/>
-				</div>
-				<div>
-					<label for="prvKey" class="block text-sm font-medium text-gray-700 dark:text-gray-200"
-						>Private Key</label
-					>
-					<textarea
-						id="prvKey"
-						rows="3"
-						class="mt-1 block w-full rounded-md border-gray-500 dark:border-gray-50 shadow-sm focus:border-indigo-500 focus:ring-indigo-700 sm:text-sm"
-						bind:value={$form.prvKey}
-						onchange={handleChange}
-					></textarea>
-					{#if $errors.prvKey}
-						<p class="mt-2 text-sm text-red-600">{$errors.prvKey}</p>
-					{/if}
-				</div>
-				<div class="pt-5">
-					<div class="flex justify-end space-x-4">
-						<button
-							type="button"
-							class="rounded-md border border-gray-300 bg-white py-2 px-4 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"
-							onclick={onCancel}>Cancel</button
-						>
-						<button
-							type="button"
-							class="rounded-md border border-gray-300 bg-white py-2 px-4 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"
-							onclick={resetForm}>Reset</button
-						>
-						<button
-							type="submit"
-							class="rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"
-							>Import</button
-						>
-					</div>
-				</div>
-			</form>
-			{#if error}
-				<p class="mt-4 text-sm text-red-600">{error}</p>
-			{/if}
-		</div>
-	</Modal>
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/ImportWatchAccount.svelte b/packages/yakkl-wallet/src/lib/components/v1/ImportWatchAccount.svelte
deleted file mode 100644
index dca013e..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/ImportWatchAccount.svelte
+++ /dev/null
@@ -1,320 +0,0 @@
-<!-- ImportWatch.svelte -->
-<script lang="ts">
-	import { onMount } from 'svelte';
-	import { VERSION } from '$lib/common/constants';
-	import { createForm } from 'svelte-forms-lib';
-	import * as yup from 'yup';
-	import {
-		setProfileStorage,
-		getYakklWatchList,
-		setYakklWatchListStorage,
-		setYakklCurrentlySelectedStorage,
-		getYakklCurrentlySelected,
-		getMiscStore,
-		getSettings
-	} from '$lib/common/stores';
-	import { encryptData, decryptData } from '$lib/common/encryption';
-	import { deepCopy } from '$lib/utilities/utilities';
-	import {
-		isEncryptedData,
-		type CurrentlySelectedData,
-		type Profile,
-		type ProfileData,
-		type Settings,
-		type YakklCurrentlySelected,
-		type YakklWatch
-	} from '$lib/common';
-	import { dateString } from '$lib/common/datetime';
-	import Modal from '$components/Modal.svelte';
-
-	interface Props {
-		show?: boolean;
-		className?: string;
-		onCancel?: () => void;
-		onComplete?: (watch: YakklWatch) => void;
-	}
-
-	let {
-		show = $bindable(false),
-		className = 'z-[999]',
-		onCancel = () => {},
-		onComplete = () => {}
-	}: Props = $props();
-
-	let currentlySelected: YakklCurrentlySelected;
-	let yakklMiscStore: string;
-	let yakklWatchListStore: YakklWatch[];
-	let yakklSettingsStore: Settings | null;
-	let error = $state('');
-
-	onMount(async () => {
-		currentlySelected = await getYakklCurrentlySelected();
-		yakklMiscStore = getMiscStore();
-		yakklWatchListStore = await getYakklWatchList();
-		yakklSettingsStore = await getSettings();
-	});
-
-	const { form, errors, handleChange, handleSubmit, updateInitialValues } = createForm({
-		initialValues: {
-			blockchain: 'Ethereum',
-			address: '',
-			addressName: '',
-			includeInPortfolio: false,
-			addressAlias: '',
-			url: ''
-		},
-		validationSchema: yup.object().shape({
-			blockchain: yup.string().required('Please enter the crypto account network (watch-only)'),
-			address: yup.string().required('Please enter the crypto account (watch-only)'),
-			addressName: yup.string().required('Please enter the account name (e.g., address alias)'),
-			includeInPortfolio: yup
-				.boolean()
-				.required('Please select if you want to include this account in your portfolio totals'),
-			addressAlias: yup.string().optional(),
-			url: yup.string().optional()
-		}),
-		onSubmit: async (data) => {
-			try {
-				await handleAddWatch(data);
-			} catch (e) {
-				error = `Error adding watch-only account: ${e}`;
-			}
-		}
-	});
-
-	async function handleAddWatch(data: any) {
-		let watchList: YakklWatch[] = [];
-
-		if (isEncryptedData(currentlySelected.data)) {
-			await decryptData(currentlySelected.data, yakklMiscStore).then((result) => {
-				currentlySelected.data = result as CurrentlySelectedData;
-			});
-		}
-
-		let profile: Profile = deepCopy((currentlySelected.data as CurrentlySelectedData).profile);
-		if (isEncryptedData(profile.data)) {
-			await decryptData(profile.data, yakklMiscStore).then((result) => {
-				profile.data = result as ProfileData;
-			});
-		}
-
-		if ((profile.data as ProfileData).watchList.length > 0) {
-			if (
-				(profile.data as ProfileData).watchList.find(
-					(watch: YakklWatch) =>
-						watch.address === data.address && watch.blockchain === data.blockchain
-				)
-			) {
-				error = 'This account already exists for the given profile.';
-				return;
-			}
-		}
-
-		const currentDate: string = dateString();
-
-		const watch: YakklWatch = {
-			id: profile.id,
-			blockchain: data.blockchain,
-			name: data.addressName,
-			tags: [],
-			quantity: 0n,
-			includeInPortfolio: data.includeInPortfolio,
-			explorer: data.url,
-			address: data.address,
-			addressAlias: data.addressAlias,
-			version: VERSION,
-			createDate: currentDate,
-			updateDate: currentDate
-		};
-
-		(profile.data as ProfileData).watchList.push(watch);
-
-		await encryptData(profile.data, yakklMiscStore).then(async (result) => {
-			profile.data = result;
-			await setProfileStorage(profile);
-		});
-
-		(currentlySelected.data as CurrentlySelectedData).profile = deepCopy(profile);
-
-		await setYakklCurrentlySelectedStorage(currentlySelected);
-
-		watchList = await getYakklWatchList();
-
-		if (watchList?.length > 0) {
-			if (
-				watchList.find(
-					(account) => account.address === data.address && account.blockchain === data.blockchain
-				)
-			) {
-				error = 'This account already exists.';
-				return;
-			}
-		}
-
-		watchList.push({
-			id: profile.id,
-			name: data.addressName,
-			tags: [],
-			quantity: '0.0',
-			includeInPortfolio: data.includeInPortfolio,
-			explorer: data.url,
-			address: data.address,
-			addressAlias: data.addressAlias,
-			blockchain: data.blockchain,
-			version: yakklSettingsStore !== null ? yakklSettingsStore.version : VERSION,
-			createDate: currentDate,
-			updateDate: currentDate
-		});
-
-		await setYakklWatchListStorage(watchList);
-
-		onComplete(watch);
-
-		resetForm();
-		show = false;
-	}
-
-	function closeModal() {
-		onCancel();
-		resetForm();
-		show = false;
-	}
-
-	function resetForm() {
-		updateInitialValues({
-			blockchain: 'Ethereum',
-			address: '',
-			addressName: '',
-			includeInPortfolio: false,
-			addressAlias: '',
-			url: ''
-		});
-	}
-</script>
-
-<div class="relative {className}">
-	<Modal bind:show title="Add Watch-Only Address" onClose={closeModal}>
-		<div class="p-6">
-			<p class="text-sm text-green-500 mb-4">
-				This is a <strong>WATCH - ONLY address</strong>. This means that you will not be able to
-				perform any transactions with this specific address in YAKKL. You can
-				<strong>Import</strong>
-				this address if you have your private key using the Import option. This `watch-only` address
-				allows you to keep track of <strong>ALL</strong> of your crypto in one wallet and have a complete
-				portfolio view. For example, if you have an account with a centralized exchange like Coinbase,
-				Kraken, Binance, etc. You can also use this feature to keep track of addresses belonging to others
-				(e.g, `whales`, `market makers`) and be alerted on activities (useful for staying aware of potential
-				market moves).
-			</p>
-			<form onsubmit={handleSubmit} class="space-y-4">
-				<div>
-					<label for="blockchain" class="block text-sm font-medium text-gray-700 dark:text-gray-200"
-						>Blockchain</label
-					>
-					<select
-						id="blockchain"
-						class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"
-						bind:value={$form.blockchain}
-						onchange={handleChange}
-					>
-						<option value="Ethereum">Ethereum</option>
-						<option value="Polygon">Polygon</option>
-					</select>
-				</div>
-				<div>
-					<label for="address" class="block text-sm font-medium text-gray-700 dark:text-gray-200"
-						>Address</label
-					>
-					<input
-						type="text"
-						id="address"
-						class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"
-						bind:value={$form.address}
-						onchange={handleChange}
-					/>
-					{#if $errors.address}
-						<p class="mt-2 text-sm text-red-600">{$errors.address}</p>
-					{/if}
-				</div>
-				<div>
-					<label
-						for="addressName"
-						class="block text-sm font-medium text-gray-700 dark:text-gray-200">Address Name</label
-					>
-					<input
-						type="text"
-						id="addressName"
-						class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"
-						bind:value={$form.addressName}
-						onchange={handleChange}
-					/>
-					{#if $errors.addressName}
-						<p class="mt-2 text-sm text-red-600">{$errors.addressName}</p>
-					{/if}
-				</div>
-				<div class="flex items-center">
-					<input
-						type="checkbox"
-						id="includeInPortfolio"
-						class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"
-						bind:checked={$form.includeInPortfolio}
-						onchange={handleChange}
-					/>
-					<label
-						for="includeInPortfolio"
-						class="ml-2 block text-sm text-gray-700 dark:text-gray-200"
-						>Include this account in your portfolio totals?</label
-					>
-				</div>
-				<div>
-					<label
-						for="addressAlias"
-						class="block text-sm font-medium text-gray-700 dark:text-gray-200"
-						>Address Alias (optional)</label
-					>
-					<input
-						type="text"
-						id="addressAlias"
-						class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"
-						bind:value={$form.addressAlias}
-						onchange={handleChange}
-					/>
-				</div>
-				<div>
-					<label for="url" class="block text-sm font-medium text-gray-700 dark:text-gray-200"
-						>Explorer URL - checking address data (optional)</label
-					>
-					<input
-						type="text"
-						id="url"
-						class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"
-						bind:value={$form.url}
-						onchange={handleChange}
-					/>
-				</div>
-				<div class="pt-5">
-					<div class="flex justify-end space-x-4">
-						<button
-							type="button"
-							class="rounded-md border border-gray-300 bg-white py-2 px-4 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"
-							onclick={closeModal}>Cancel</button
-						>
-						<button
-							type="button"
-							class="rounded-md border border-gray-300 bg-white py-2 px-4 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"
-							onclick={resetForm}>Reset</button
-						>
-						<button
-							type="submit"
-							class="rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"
-							>Save</button
-						>
-					</div>
-				</div>
-			</form>
-			{#if error}
-				<p class="mt-4 text-sm text-red-600">{error}</p>
-			{/if}
-		</div>
-	</Modal>
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/InAppNotifications.svelte b/packages/yakkl-wallet/src/lib/components/v1/InAppNotifications.svelte
deleted file mode 100644
index 614223c..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/InAppNotifications.svelte
+++ /dev/null
@@ -1,544 +0,0 @@
-<script lang="ts">
-	import { onMount, onDestroy } from 'svelte';
-	import { browser as isBrowser } from '$app/environment';
-	import { browser_ext } from '$lib/common/environment';
-	import { fade, fly, scale } from 'svelte/transition';
-	import { NotificationService } from '$lib/common/notifications';
-	import { UnifiedTimerManager } from '$lib/managers/UnifiedTimerManager';
-
-	// State
-	let notifications = $state<
-		Array<{
-			id: string;
-			type: string;
-			title: string;
-			message: string;
-			timestamp: number;
-			countdown?: number;
-			countdownInterval?: string; // Now stores timer ID
-			delayMs?: number;
-		}>
-	>([]);
-
-	// Enhanced state for lockdown notifications
-	let isLockdownActive = $state(false);
-	let lockdownTimeLeft = $state(0);
-	let isUrgent = $state(false);
-
-	const timerManager = UnifiedTimerManager.getInstance();
-
-	// Initialize listener
-	onMount(() => {
-		if (!isBrowser || !browser_ext) return;
-
-		const messageListener = (message: any, sender: any, sendResponse: any): true => {
-			if (!message || typeof message !== 'object') return true;
-
-			// Handle security alerts
-			if (message.type === 'SECURITY_ALERT' || message.type === 'IMPORTANT_NOTIFICATION') {
-				addNotification({
-					id: message.id || `notification-${Date.now()}`,
-					type: 'security',
-					title: message.title || ' Security Alert',
-					message: message.message,
-					timestamp: message.timestamp || Date.now()
-				});
-			}
-
-			// Handle lockdown warnings specifically
-			else if (message.type === 'LOCKDOWN_WARNING') {
-				const id = `lockdown-${Date.now()}`;
-				const delayMs = message.delayMs || 30000;
-				const countdown = Math.ceil(delayMs / 1000);
-
-				// Set lockdown state
-				isLockdownActive = true;
-				lockdownTimeLeft = countdown;
-				isUrgent = countdown <= 10;
-
-				addNotification({
-					id,
-					type: 'lockdown',
-					title: ' Security Alert',
-					message: message.message || 'YAKKL will be locked soon due to inactivity.',
-					timestamp: message.timestamp || Date.now(),
-					countdown,
-					delayMs
-				});
-
-				// Start countdown using UnifiedTimerManager
-				const intervalId = `countdown-${id}`;
-				timerManager.addInterval(
-					intervalId,
-					() => {
-						updateCountdown(id);
-					},
-					1000
-				);
-				timerManager.startInterval(intervalId);
-
-				// Store the interval ID
-				notifications = notifications.map((n) =>
-					n.id === id ? { ...n, countdownInterval: intervalId } : n
-				);
-
-				if (browser_ext.runtime && browser_ext.runtime.onMessage) {
-					browser_ext.runtime.sendMessage({
-						type: 'lockdownImminent',
-						delayMs,
-						timestamp: Date.now()
-					});
-				}
-			}
-
-			// Handle clear notifications
-			else if (message.type === 'CLEAR_NOTIFICATION') {
-				removeNotification(message.notificationId);
-			}
-
-			return true;
-		};
-
-		// Listen for idle state changes to clear lockdown state
-		const handleIdleStateChange = (event: CustomEvent) => {
-			if (event.detail.state === 'active') {
-				isLockdownActive = false;
-				lockdownTimeLeft = 0;
-				isUrgent = false;
-				// Clear lockdown notifications
-				notifications = notifications.filter((n) => n.type !== 'lockdown');
-				clearAllIntervals();
-			}
-		};
-
-		// Listen for user activity
-		const handleUserActivity = () => {
-			if (isLockdownActive) {
-				isLockdownActive = false;
-				lockdownTimeLeft = 0;
-				isUrgent = false;
-				notifications = notifications.filter((n) => n.type !== 'lockdown');
-				clearAllIntervals();
-			}
-		};
-
-		// Add listeners
-		if (browser_ext.runtime && browser_ext.runtime.onMessage) {
-			browser_ext.runtime.onMessage.addListener(messageListener);
-		}
-
-		window.addEventListener('yakklIdleStateChanged', handleIdleStateChange as EventListener);
-		window.addEventListener('yakklUserActivityDetected', handleUserActivity as EventListener);
-
-		return () => {
-			// Clean up listeners
-			if (browser_ext.runtime && browser_ext.runtime.onMessage) {
-				browser_ext.runtime.onMessage.removeListener(messageListener);
-			}
-
-			window.removeEventListener('yakklIdleStateChanged', handleIdleStateChange as EventListener);
-			window.removeEventListener('yakklUserActivityDetected', handleUserActivity as EventListener);
-
-			// Clear all intervals
-			clearAllIntervals();
-		};
-	});
-
-	onDestroy(() => {
-		clearAllIntervals();
-	});
-
-	// Add a notification to the list
-	function addNotification(notification: any) {
-		// Check if we already have this notification
-		const existing = notifications.find((n) => n.id === notification.id);
-
-		if (existing) {
-			// Update existing notification
-			notifications = notifications.map((n) =>
-				n.id === notification.id ? { ...n, ...notification } : n
-			);
-		} else {
-			// Add new notification
-			notifications = [...notifications, notification];
-		}
-	}
-
-	// Remove a notification
-	function removeNotification(id: string) {
-		// Clear any countdown interval
-		const notification = notifications.find((n) => n.id === id);
-		if (notification && notification.countdownInterval) {
-			timerManager.stopInterval(notification.countdownInterval);
-			timerManager.removeInterval(notification.countdownInterval);
-		}
-
-		// If removing lockdown notification, clear lockdown state
-		if (notification?.type === 'lockdown') {
-			isLockdownActive = false;
-			lockdownTimeLeft = 0;
-			isUrgent = false;
-		}
-
-		// Remove from list
-		notifications = notifications.filter((n) => n.id !== id);
-	}
-
-	// Update countdown for a notification
-	function updateCountdown(id: string) {
-		const notification = notifications.find((n) => n.id === id);
-
-		if (notification && notification.countdown) {
-			// Decrement countdown
-			const newCountdown = notification.countdown - 1;
-			lockdownTimeLeft = newCountdown;
-			isUrgent = newCountdown <= 10;
-
-			if (newCountdown <= 0) {
-				// Remove notification when countdown reaches zero
-				removeNotification(id);
-			} else {
-				// Update countdown
-				notifications = notifications.map((n) =>
-					n.id === id ? { ...n, countdown: newCountdown } : n
-				);
-			}
-		}
-	}
-
-	// Clear all intervals
-	function clearAllIntervals() {
-		notifications.forEach((notification) => {
-			if (notification.countdownInterval) {
-				timerManager.stopInterval(notification.countdownInterval);
-				timerManager.removeInterval(notification.countdownInterval);
-			}
-		});
-	}
-
-	// Track user activity for analytics - only for significant interactions
-	function trackUserActivity(action: string) {
-		// Only track specific actions that are meaningful for analytics
-		const trackableActions = [
-			'dismiss_notification',
-			'interact_with_notification',
-			'view_notification'
-		];
-
-		if (trackableActions.includes(action) && browser_ext) {
-			try {
-				browser_ext.runtime
-					.sendMessage({
-						type: 'USER_ACTIVITY',
-						timestamp: Date.now(),
-						context: 'analytics',
-						action
-					})
-					.catch(() => {
-						// Ignore errors
-					});
-			} catch (e) {
-				// Ignore errors
-			}
-		}
-	}
-
-	// Handle user interaction with a notification
-	function handleUserActivity(notificationId: string) {
-		// Only track significant interactions
-		trackUserActivity('interact_with_notification');
-		removeNotification(notificationId);
-	}
-
-	// Dismiss a single notification
-	function dismiss(id: string) {
-		// Only send security activity message for lockdown warnings
-		const notification = notifications.find((n) => n.id === id);
-		if (notification?.type === 'lockdown' && browser_ext) {
-			try {
-				browser_ext.runtime
-					.sendMessage({
-						type: 'USER_ACTIVITY',
-						timestamp: Date.now(),
-						context: 'security',
-						action: 'dismiss_lockdown_warning'
-					})
-					.catch(() => {
-						// Ignore errors
-					});
-			} catch (e) {
-				// Ignore errors
-			}
-		}
-
-		// Remove the notification
-		removeNotification(id);
-	}
-
-	// Dismiss all notifications
-	async function dismissAll() {
-		// Only send security activity message if we have a lockdown warning
-		const hasLockdownWarning = notifications.some((n) => n.type === 'lockdown');
-		if (hasLockdownWarning && browser_ext) {
-			try {
-				await browser_ext.runtime.sendMessage({
-					type: 'USER_ACTIVITY',
-					timestamp: Date.now(),
-					context: 'security',
-					action: 'dismiss_all_lockdown_warnings'
-				});
-			} catch (e) {
-				// Ignore errors
-			}
-		}
-
-		// Use centralized clearing
-		await NotificationService.clearAllAlertsEnhanced();
-
-		// Clear local state
-		clearAllIntervals();
-		notifications = [];
-		isLockdownActive = false;
-		lockdownTimeLeft = 0;
-		isUrgent = false;
-	}
-</script>
-
-<!-- Enhanced Lockdown Bar (Full Width at Top) -->
-{#if isLockdownActive}
-	<div
-		class="fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-red-600 to-red-700 text-white shadow-lg border-b-2 border-red-500"
-		class:animate-pulse={isUrgent}
-		transition:fly={{ y: -100, duration: 400 }}
-	>
-		<div class="max-w-7xl mx-auto px-4 py-3">
-			<div class="flex items-center justify-between">
-				<!-- Left side - Icon and main message -->
-				<div class="flex items-center space-x-3">
-					<div class="relative">
-						<svg
-							xmlns="http://www.w3.org/2000/svg"
-							class="h-6 w-6 text-yellow-300"
-							class:animate-spin={isUrgent}
-							viewBox="0 0 20 20"
-							fill="currentColor"
-						>
-							<path
-								fill-rule="evenodd"
-								d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"
-								clip-rule="evenodd"
-							/>
-						</svg>
-						{#if isUrgent}
-							<div
-								class="absolute -top-1 -right-1 w-3 h-3 bg-yellow-400 rounded-full animate-ping"
-							></div>
-						{/if}
-					</div>
-
-					<div class="flex-1">
-						<div class="font-semibold text-lg"> YAKKL Security Alert</div>
-						<div class="text-red-100 text-sm">
-							Wallet will lock due to inactivity - take any action to stay active
-						</div>
-					</div>
-				</div>
-
-				<!-- Center - Large countdown timer -->
-				<div class="flex items-center space-x-4">
-					<div class="text-center">
-						<div class="text-xs text-red-200 uppercase tracking-wide">Time Remaining</div>
-						<div
-							class="text-3xl font-mono font-bold text-yellow-300 transition-all duration-300"
-							class:text-yellow-100={isUrgent}
-							class:animate-pulse={isUrgent}
-							class:scale-110={isUrgent}
-						>
-							{lockdownTimeLeft}
-						</div>
-						<div class="text-xs text-red-200">seconds</div>
-					</div>
-
-					<!-- Progress ring -->
-					<div class="relative w-16 h-16">
-						<svg class="w-16 h-16 transform -rotate-90" viewBox="0 0 32 32">
-							<!-- Background circle -->
-							<circle
-								cx="16"
-								cy="16"
-								r="14"
-								stroke="currentColor"
-								stroke-width="2"
-								fill="none"
-								class="text-red-800"
-							/>
-							<!-- Progress circle -->
-							<circle
-								cx="16"
-								cy="16"
-								r="14"
-								stroke="currentColor"
-								stroke-width="2"
-								fill="none"
-								stroke-linecap="round"
-								class="text-yellow-300 transition-all duration-1000"
-								class:text-yellow-100={isUrgent}
-								style="stroke-dasharray: {2 * Math.PI * 14}; stroke-dashoffset: {2 *
-									Math.PI *
-									14 *
-									(1 - lockdownTimeLeft / 30)}"
-							/>
-						</svg>
-						<div class="absolute inset-0 flex items-center justify-center">
-							<div class="text-xs font-bold text-white">
-								{Math.round((lockdownTimeLeft / 30) * 100)}%
-							</div>
-						</div>
-					</div>
-				</div>
-
-				<!-- Right side - Action buttons -->
-				<div class="flex items-center space-x-3">
-					<button
-						class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-semibold transition-all duration-200 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 focus:ring-offset-red-600"
-						onclick={() => dismissAll()}
-					>
-						 I'm Active
-					</button>
-
-					<!-- svelte-ignore a11y_consider_explicit_label -->
-					<button
-						class="text-red-200 hover:text-white transition-colors duration-200"
-						onclick={() => dismissAll()}
-					>
-						<svg
-							xmlns="http://www.w3.org/2000/svg"
-							class="h-5 w-5"
-							viewBox="0 0 20 20"
-							fill="currentColor"
-						>
-							<path
-								fill-rule="evenodd"
-								d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
-								clip-rule="evenodd"
-							/>
-						</svg>
-					</button>
-				</div>
-			</div>
-		</div>
-	</div>
-{/if}
-
-<!-- Regular Notification Container (positioned lower when lockdown bar is active) -->
-{#if notifications.length > 0}
-	<div
-		class="fixed right-4 z-40 flex flex-col gap-4 max-w-md transition-all duration-300"
-		class:top-24={isLockdownActive}
-		class:top-4={!isLockdownActive}
-	>
-		{#each notifications as notification (notification.id)}
-			<!-- Skip lockdown notifications since they're shown in the top bar -->
-			{#if notification.type !== 'lockdown'}
-				<!-- Regular security alert -->
-				{#if notification.type === 'security'}
-					<div
-						class="p-4 bg-yellow-600 text-white rounded-lg shadow-lg"
-						in:fly={{ x: 20, duration: 300 }}
-						out:fade={{ duration: 200 }}
-					>
-						<div class="flex justify-between items-start">
-							<div class="flex items-center">
-								<svg
-									xmlns="http://www.w3.org/2000/svg"
-									class="h-6 w-6 mr-2"
-									fill="none"
-									viewBox="0 0 24 24"
-									stroke="currentColor"
-								>
-									<path
-										stroke-linecap="round"
-										stroke-linejoin="round"
-										stroke-width="2"
-										d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"
-									/>
-								</svg>
-								<h3 class="font-bold text-lg">{notification.title}</h3>
-							</div>
-							<!-- svelte-ignore a11y_consider_explicit_label -->
-							<button
-								class="text-white hover:text-gray-200"
-								onclick={() => dismiss(notification.id)}
-							>
-								<svg
-									xmlns="http://www.w3.org/2000/svg"
-									class="h-5 w-5"
-									viewBox="0 0 20 20"
-									fill="currentColor"
-								>
-									<path
-										fill-rule="evenodd"
-										d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
-										clip-rule="evenodd"
-									/>
-								</svg>
-							</button>
-						</div>
-
-						<p class="mt-2">{notification.message}</p>
-
-						<div class="mt-3 flex justify-end">
-							<button
-								class="bg-white text-yellow-600 px-3 py-1 rounded hover:bg-gray-100"
-								onclick={() => dismiss(notification.id)}
-							>
-								Dismiss
-							</button>
-						</div>
-					</div>
-				{:else}
-					<!-- Generic notification -->
-					<div
-						class="p-4 bg-blue-600 text-white rounded-lg shadow-lg"
-						in:fly={{ x: 20, duration: 300 }}
-						out:fade={{ duration: 200 }}
-					>
-						<div class="flex justify-between items-start">
-							<h3 class="font-bold">{notification.title}</h3>
-							<!-- svelte-ignore a11y_consider_explicit_label -->
-							<button
-								class="text-white hover:text-gray-200"
-								onclick={() => dismiss(notification.id)}
-							>
-								<svg
-									xmlns="http://www.w3.org/2000/svg"
-									class="h-5 w-5"
-									viewBox="0 0 20 20"
-									fill="currentColor"
-								>
-									<path
-										fill-rule="evenodd"
-										d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
-										clip-rule="evenodd"
-									/>
-								</svg>
-							</button>
-						</div>
-
-						<p class="mt-2">{notification.message}</p>
-					</div>
-				{/if}
-			{/if}
-		{/each}
-
-		<!-- Dismiss all button (only show if multiple non-lockdown notifications) -->
-		{#if notifications.filter((n) => n.type !== 'lockdown').length > 1}
-			<button
-				class="self-end bg-gray-700 text-white px-3 py-1 rounded hover:bg-gray-600 text-sm"
-				onclick={dismissAll}
-			>
-				Dismiss All
-			</button>
-		{/if}
-	</div>
-{/if}
diff --git a/packages/yakkl-wallet/src/lib/components/v1/LineChart.svelte b/packages/yakkl-wallet/src/lib/components/v1/LineChart.svelte
deleted file mode 100644
index 714f935..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/LineChart.svelte
+++ /dev/null
@@ -1,81 +0,0 @@
-<!-- @migration-task Error while migrating Svelte code: Can't migrate code with afterUpdate. Please migrate by hand. -->
-<script lang="ts">
-	import { onMount, afterUpdate } from 'svelte';
-	import Chart from 'chart.js/auto';
-
-	export let data: { x: Date; y: number }[];
-
-	let chartRef: HTMLCanvasElement;
-	let chart: Chart;
-
-	$: chartData = {
-		labels: data.map((d) => d.x.toLocaleString()),
-		datasets: [
-			{
-				data: data.map((d) => d.y),
-				fill: false,
-				borderColor: getTrendColor(data),
-				borderWidth: 2,
-				tension: 0.1
-			}
-		]
-	};
-
-	const options = {
-		responsive: true,
-		maintainAspectRatio: false,
-		scales: {
-			x: {
-				display: false
-			},
-			y: {
-				display: false
-			}
-		},
-		plugins: {
-			legend: {
-				display: false
-			}
-		},
-		elements: {
-			point: {
-				radius: 0
-			}
-		}
-	};
-
-	function getTrendColor(data: { x: Date; y: number }[]) {
-		if (data.length < 2) {
-			return 'rgb(34, 197, 94)'; // Green color for upward trend
-		}
-
-		const lastIndex = data.length - 1;
-		const lastPrice = data[lastIndex].y;
-		const previousPrice = data[lastIndex - 1]?.y;
-
-		if (previousPrice && lastPrice < previousPrice) {
-			return 'rgb(220, 38, 38)'; // Red color for downward trend
-		} else {
-			return 'rgb(34, 197, 94)'; // Green color for upward trend
-		}
-	}
-
-	onMount(() => {
-		chart = new Chart(chartRef, {
-			type: 'line',
-			data: chartData,
-			options
-		});
-	});
-
-	afterUpdate(() => {
-		if (chart) {
-			chart.data = chartData;
-			chart.update();
-		}
-	});
-</script>
-
-<div class="w-full h-full">
-	<canvas bind:this={chartRef} class="w-full h-full"></canvas>
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/Live.svelte b/packages/yakkl-wallet/src/lib/components/v1/Live.svelte
deleted file mode 100644
index 1873d9b..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/Live.svelte
+++ /dev/null
@@ -1,25 +0,0 @@
-<script lang="ts">
-	import { handleOpenInTab } from '$lib/utilities';
-
-	interface Props {
-		defaultClass?: string;
-		name?: string;
-	}
-
-	let { defaultClass = '', name = 'LIVE' }: Props = $props();
-
-	function handleLive(_e: any) {
-		// DO SOMETHING ELSE HERE...
-		handleOpenInTab(
-			'https://yakkl.com/university/support?utm_source=yakkl&utm_medium=extension&utm_campaign=live&utm_content=extension&utm_term=extension'
-		);
-	}
-</script>
-
-<button class="btn btn-primary bg-red-700 btn-xs {defaultClass}" onclick={handleLive}>
-	<div class="justify-center">
-		<div class="text-center">
-			<p class="font-extrabold text-md text-white">{name}</p>
-		</div>
-	</div>
-</button>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/LoadingState.svelte b/packages/yakkl-wallet/src/lib/components/v1/LoadingState.svelte
deleted file mode 100644
index 1adcb67..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/LoadingState.svelte
+++ /dev/null
@@ -1,51 +0,0 @@
-<!-- LoadingState.svelte -->
-<script lang="ts">
-	interface Props {
-		type?: 'overlay' | 'inline';
-		message?: string;
-		showSpinner?: boolean;
-		showProgress?: boolean;
-		progress?: number;
-	}
-
-	let {
-		type = 'overlay',
-		message = 'Loading...',
-		showSpinner = true,
-		showProgress = false,
-		progress = 0
-	}: Props = $props();
-</script>
-
-{#if type === 'overlay'}
-	<!-- absolute inset-0 bg-black/50 -->
-	<div class="flex mt-10 items-center justify-center">
-		<div class="flex flex-col items-center gap-3 p-4 bg-gray-800/80 rounded-xl">
-			{#if showSpinner}
-				<div
-					class="w-8 h-8 border-4 border-blue-400 border-t-transparent rounded-full animate-spin"
-				></div>
-			{/if}
-
-			<span class="text-sm text-blue-400">{message}</span>
-
-			{#if showProgress}
-				<div class="w-full h-2 bg-gray-700 rounded-full overflow-hidden">
-					<div
-						class="h-full bg-blue-400 transition-all duration-300"
-						style="width: {progress}%"
-					></div>
-				</div>
-			{/if}
-		</div>
-	</div>
-{:else}
-	<div class="inline-flex items-center gap-2">
-		{#if showSpinner}
-			<div
-				class="w-4 h-4 border-2 border-blue-400 border-t-transparent rounded-full animate-spin"
-			></div>
-		{/if}
-		<span class="text-sm text-blue-400">{message}</span>
-	</div>
-{/if}
diff --git a/packages/yakkl-wallet/src/lib/components/v1/LockedSectionCard.svelte b/packages/yakkl-wallet/src/lib/components/v1/LockedSectionCard.svelte
deleted file mode 100644
index a0a6c77..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/LockedSectionCard.svelte
+++ /dev/null
@@ -1,106 +0,0 @@
-<script lang="ts">
-	import SectionCard from './SectionCard.svelte';
-	import LockIcon from './icons/LockIcon.svelte';
-	import Tooltip from './Tooltip.svelte';
-	import { cn } from '$lib/utils';
-
-	let {
-		show = $bindable(true),
-		locked = false,
-		lockMessage = 'Upgrade to unlock this feature',
-		showButton = true,
-		onComplete = () => {},
-		title,
-		icon,
-		isPinned,
-		eye,
-		eyeTooltip,
-		className,
-		minHeight,
-		maxHeight,
-		footer,
-		footerProps = {},
-		lockedFooter,
-		lockedFooterProps = {},
-		children
-	} = $props<{
-		show?: boolean;
-		locked?: boolean;
-		lockMessage?: string | (() => string);
-		showButton?: boolean;
-		onComplete?: () => void;
-		title: string;
-		icon?: any;
-		className?: string;
-		isPinned?: boolean;
-		eye?: boolean;
-		eyeTooltip?: string;
-		minHeight?: string;
-		maxHeight?: string;
-		footer?: any;
-		footerProps?: Record<string, any>;
-		lockedFooter?: any;
-		lockedFooterProps?: Record<string, any>;
-		children: () => any;
-	}>();
-</script>
-
-{#if show}
-	<SectionCard
-		bind:show
-		{title}
-		{icon}
-		{isPinned}
-		{eye}
-		{eyeTooltip}
-		{className}
-		{minHeight}
-		{maxHeight}
-		{footer}
-		{footerProps}
-		{lockedFooter}
-		{lockedFooterProps}
-		{locked}
-	>
-		<div class="relative">
-			<!-- The actual content -->
-			<div
-				class={cn(
-					'transition-all duration-300',
-					locked && 'blur-sm select-none pointer-events-none'
-				)}
-			>
-				{@render children()}
-			</div>
-
-			{#if locked}
-				<!-- Overlay with lock icon, message, and optional button -->
-				<div
-					class="absolute inset-0 flex flex-col items-center bg-white/80 dark:bg-zinc-900/70 text-center py-4 rounded-xl z-10"
-				>
-					<div
-						class="sticky top-0 w-full flex flex-col items-center bg-white/80 dark:bg-zinc-900/70 backdrop-blur-sm py-1"
-					>
-						<LockIcon className="w-6 h-6 text-zinc-500 mb-2" />
-						<div class="text-zinc-800 dark:text-zinc-200 text-sm mb-2">
-							{typeof lockMessage === 'function' ? lockMessage() : lockMessage}
-						</div>
-						{#if showButton}
-							<button
-								class="mt-1 px-4 py-2 rounded-lg bg-blue-600 text-white text-sm hover:bg-blue-700 transition"
-								onclick={() => onComplete()}
-							>
-								Upgrade Now
-							</button>
-						{/if}
-						<Tooltip content="Available with YAKKL Pro">
-							<span class="text-xs text-zinc-500 mt-2 cursor-help underline"
-								>Why is this locked?</span
-							>
-						</Tooltip>
-					</div>
-				</div>
-			{/if}
-		</div>
-	</SectionCard>
-{/if}
diff --git a/packages/yakkl-wallet/src/lib/components/v1/Login.svelte b/packages/yakkl-wallet/src/lib/components/v1/Login.svelte
deleted file mode 100644
index ed29aab..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/Login.svelte
+++ /dev/null
@@ -1,370 +0,0 @@
-<!-- Login.svelte -->
-<script lang="ts">
-	import { createForm } from 'svelte-forms-lib';
-	import { verify } from '$lib/common/security';
-	import { getContextTypeStore } from '$lib/common/stores';
-	import { log } from '$lib/common/logger-wrapper';
-	import { authStore } from '$lib/stores/auth-store';
-	import AuthError from './AuthError.svelte';
-	import AuthLoading from './AuthLoading.svelte';
-	import { sessionManager } from '$lib/managers/SessionManager';
-	import { jwtManager } from '$lib/utilities/jwt';
-
-	// Props using runes syntax
-	const props = $props<{
-		onSuccess: (profile: any, digest: string, isMinimal: boolean, jwtToken?: string) => void;
-		onError: (error: any) => void;
-		onCancel: () => void;
-		loginButtonText?: string;
-		cancelButtonText?: string;
-		minimumAuth?: boolean;
-		requestId?: string;
-		method?: string;
-		useAuthStore?: boolean; // Optional flag to update auth store on login
-		generateJWT?: boolean; // Optional flag to generate JWT token on login
-		inputTextClass?: string; // Custom text color class for inputs
-		inputBgClass?: string; // Custom background class for inputs
-	}>();
-
-	const loginButtonText = $derived(props.loginButtonText ?? 'Unlock');
-	const cancelButtonText = $derived(props.cancelButtonText ?? 'Exit/Logout');
-
-	// Default to DaisyUI default colors (no explicit text/bg colors)
-	const inputTextClass = $derived(props.inputTextClass ?? 'text-base-content');
-	const inputBgClass = $derived(props.inputBgClass ?? '');
-
-	// Local state
-	const contextType = $state(getContextTypeStore());
-	const isDappContext = $derived(
-		contextType === 'popup-dapp' || (contextType?.includes?.('dapp') ?? false)
-	);
-	const minimumAuth = $derived(props.minimumAuth !== undefined ? props.minimumAuth : isDappContext);
-
-	// Form state
-	let showError = $state(false);
-	let errorMessage = $state('');
-	let pweyeOpen = $state(false);
-	let isLoggingIn = $state(false);
-	let retryCount = $state(0);
-	const maxRetries = 3;
-
-	// Form setup with svelte-forms-lib
-	const { form, errors, handleSubmit } = createForm({
-		initialValues: { userName: '', password: '' },
-		onSubmit: async (data) => {
-			isLoggingIn = true;
-			try {
-				await verifyUser(data.userName, data.password);
-			} finally {
-				// Clear form data for security regardless of outcome
-				$form.userName = '';
-				$form.password = '';
-				isLoggingIn = false;
-			}
-		}
-	});
-
-	async function verifyUser(userName: string, password: string) {
-		try {
-			let jwtToken: string | undefined;
-
-			// If useAuthStore is enabled, use the auth store login method
-			if (props.useAuthStore) {
-				const profile = await authStore.login(userName, password);
-				const digest = await import('$lib/common/stores').then((module) => module.getMiscStore());
-
-				if (!digest) {
-					throw 'Authentication succeeded but failed to retrieve security digest';
-				}
-
-				// Get JWT token from auth store if available
-				jwtToken = authStore.getCurrentJWTToken() || undefined;
-
-				props.onSuccess(profile, digest, minimumAuth, jwtToken);
-				return;
-			}
-
-			// Original verification method
-			// Format the username properly (removing .nfs.id if already present, then adding it)
-			const normalizedUsername = userName.toLowerCase().trim().replace('.nfs.id', '');
-			const loginString = normalizedUsername + '.nfs.id' + password;
-
-			// Call the existing verify function - this is your core authentication
-			const profile = await verify(loginString);
-
-			if (!profile) {
-				throw 'Invalid credentials or profile not found';
-			}
-
-			// Get the digest that was set during verification
-			// This is important as it's used for decryption throughout the app
-			const digest = await import('$lib/common/stores').then((module) => module.getMiscStore());
-
-			if (!digest) {
-				throw 'Authentication succeeded but failed to retrieve security digest';
-			}
-
-			// Generate JWT token if requested
-			if (props.generateJWT) {
-				try {
-					// Get user's plan level for JWT
-					const { getSettings } = await import('$lib/common/stores');
-					const settings = await getSettings();
-					const planLevel = settings?.plan?.type || 'basic';
-
-					// Generate JWT token
-					jwtToken = await jwtManager.generateToken(
-						profile.id || profile.userName,
-						profile.userName,
-						profile.id || profile.userName,
-						planLevel
-					);
-
-					// Also start session management if not using auth store
-					if (!props.useAuthStore) {
-						await sessionManager.startSession(
-							profile.id || profile.userName,
-							profile.userName,
-							profile.id || profile.userName,
-							planLevel
-						);
-					}
-
-					log.debug('JWT token generated for login', false, {
-						username: normalizedUsername,
-						hasToken: !!jwtToken
-					});
-				} catch (jwtError) {
-					log.warn('Failed to generate JWT token:', false, jwtError);
-					// Continue without JWT - don't fail the login
-				}
-			}
-
-			// Call success handler with profile, digest, minimal flag, and optional JWT
-			props.onSuccess(profile, digest, minimumAuth, jwtToken);
-		} catch (e) {
-			// Increment retry count
-			retryCount++;
-
-			// Format error for display with more specific messages
-			if (typeof e === 'string') {
-				errorMessage = e;
-			} else if (e instanceof Error) {
-				errorMessage = e.message;
-			} else {
-				errorMessage = 'Authentication failed';
-			}
-
-			// Add retry guidance if max retries not reached
-			if (retryCount < maxRetries) {
-				errorMessage += ` (Attempt ${retryCount}/${maxRetries})`;
-			} else {
-				errorMessage += ' - Maximum retry attempts reached.';
-			}
-
-			showError = true;
-			log.error('Login verification failed', false, { error: e, retryCount, maxRetries });
-			props.onError(e);
-		}
-	}
-
-	function togglePasswordVisibility() {
-		if (!document) return;
-
-		const pwField = document.getElementById('password') as HTMLInputElement;
-		const pwEyeOpen = document.getElementById('pweye-open');
-		const pwEyeClosed = document.getElementById('pweye-closed');
-
-		if (!pwField || !pwEyeOpen || !pwEyeClosed) return;
-
-		if (pwField.type === 'password') {
-			pwField.type = 'text';
-			pwEyeOpen.removeAttribute('hidden');
-			pwEyeClosed.setAttribute('hidden', 'hidden');
-			pweyeOpen = true;
-		} else {
-			pwField.type = 'password';
-			pwEyeOpen.setAttribute('hidden', 'hidden');
-			pwEyeClosed.removeAttribute('hidden');
-			pweyeOpen = false;
-		}
-	}
-
-	// Retry function
-	async function handleRetry() {
-		if (retryCount < maxRetries) {
-			showError = false;
-			errorMessage = '';
-			// Re-enable form and try again with current form values
-			await verifyUser($form.userName, $form.password);
-		}
-	}
-
-	// Dismiss error
-	function handleDismiss() {
-		showError = false;
-		errorMessage = '';
-		retryCount = 0; // Reset retry count on manual dismiss
-	}
-
-	// Initialize eye icons on component mount
-	$effect(() => {
-		if (!document) return;
-		const pwEyeOpen = document.getElementById('pweye-open');
-		const pwEyeClosed = document.getElementById('pweye-closed');
-
-		if (pwEyeOpen && pwEyeClosed) {
-			pwEyeOpen.setAttribute('tabindex', '-1');
-			pwEyeClosed.setAttribute('tabindex', '-1');
-			pwEyeOpen.setAttribute('hidden', 'hidden');
-		}
-	});
-</script>
-
-<div class="login-container">
-	<form
-		onsubmit={(e) => {
-			e.preventDefault();
-			handleSubmit(e);
-		}}
-	>
-		<div class="mt-5 flex flex-row justify-center">
-			<div class="form-control w-[22rem]">
-				<div class="join">
-					<input
-						id="userName"
-						type="text"
-						class="input input-bordered input-primary w-full join-item {inputTextClass} {inputBgClass}"
-						placeholder="Username"
-						autocomplete="off"
-						bind:value={$form.userName}
-						required
-					/>
-					<span class="label-text bg-slate-900 join-item w-[60px]">
-						<div class="mt-[.9rem]">.nfs.id</div>
-					</span>
-				</div>
-			</div>
-		</div>
-
-		<div class="mt-5 flex flex-row justify-center">
-			<div class="form-control w-[22rem]">
-				<input
-					id="password"
-					type="password"
-					class="input input-bordered input-primary w-full mt-2 {inputTextClass} {inputBgClass}"
-					placeholder="Password"
-					autocomplete="off"
-					bind:value={$form.password}
-					required
-				/>
-
-				<!-- Password visibility toggle icons -->
-				<!-- svelte-ignore a11y_click_events_have_key_events -->
-				<!-- svelte-ignore a11y_no_static_element_interactions -->
-				<svg
-					id="pweye-closed"
-					onclick={togglePasswordVisibility}
-					xmlns="http://www.w3.org/2000/svg"
-					viewBox="0 0 24 24"
-					fill="currentColor"
-					class="w-6 h-6 ml-1 fill-gray-200 absolute right-12 z-10 mt-5 cursor-pointer"
-				>
-					<path
-						d="M3.53 2.47a.75.75 0 00-1.06 1.06l18 18a.75.75 0 101.06-1.06l-18-18zM22.676 12.553a11.249 11.249 0 01-2.631 4.31l-3.099-3.099a5.25 5.25 0 00-6.71-6.71L7.759 4.577a11.217 11.217 0 014.242-.827c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113z"
-					/>
-					<path
-						d="M15.75 12c0 .18-.013.357-.037.53l-4.244-4.243A3.75 3.75 0 0115.75 12zM12.53 15.713l-4.243-4.244a3.75 3.75 0 004.243 4.243z"
-					/>
-					<path
-						d="M6.75 12c0-.619.107-1.213.304-1.764l-3.1-3.1a11.25 11.25 0 00-2.63 4.31c-.12.362-.12.752 0 1.114 1.489 4.467 5.704 7.69 10.675 7.69 1.5 0 2.933-.294 4.242-.827l-2.477-2.477A5.25 5.25 0 016.75 12z"
-					/>
-				</svg>
-
-				<!-- svelte-ignore a11y_click_events_have_key_events -->
-				<!-- svelte-ignore a11y_no_static_element_interactions -->
-				<svg
-					id="pweye-open"
-					onclick={togglePasswordVisibility}
-					xmlns="http://www.w3.org/2000/svg"
-					viewBox="0 0 24 24"
-					fill="currentColor"
-					class="w-6 h-6 ml-1 fill-gray-200 absolute right-12 z-10 mt-5 cursor-pointer"
-				>
-					<path d="M12 15a3 3 0 100-6 3 3 0 000 6z" />
-					<path
-						fill-rule="evenodd"
-						d="M1.323 11.447C2.811 6.976 7.028 3.75 12.001 3.75c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113-1.487 4.471-5.705 7.697-10.677 7.697-4.97 0-9.186-3.223-10.675-7.69a1.762 1.762 0 010-1.113zM17.25 12a5.25 5.25 0 11-10.5 0 5.25 5.25 0 0110.5 0z"
-						clip-rule="evenodd"
-					/>
-				</svg>
-			</div>
-		</div>
-
-		<div class="inline-block text-center">
-			<button
-				type="submit"
-				class="bg-emerald-400 hover:bg-emerald-500 text-white font-bold py-2 px-4 rounded-full mt-3 w-64"
-				disabled={isLoggingIn}
-			>
-				<div class="inline-flex items-center align-middle">
-					<svg
-						xmlns="http://www.w3.org/2000/svg"
-						class="h-6 w-6 mr-2 ml-2"
-						fill="none"
-						viewBox="0 0 24 24"
-						stroke="currentColor"
-						stroke-width="2"
-					>
-						<path
-							stroke-linecap="round"
-							stroke-linejoin="round"
-							d="M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"
-						/>
-					</svg>
-					<span>{isLoggingIn ? 'Unlocking...' : loginButtonText}</span>
-				</div>
-			</button>
-
-			<button
-				type="button"
-				onclick={props.onCancel}
-				class="bg-slate-400 hover:bg-slate-500 w-64 rounded-full py-2 px-4 mt-3 font-bold text-white"
-			>
-				<div class="inline-flex items-center align-middle">
-					<svg
-						aria-hidden="true"
-						xmlns="http://www.w3.org/2000/svg"
-						viewBox="0 0 20 20"
-						stroke="currentColor"
-						class="w-6 h-6 mx-2"
-					>
-						<path
-							fill-rule="evenodd"
-							d="M3 4.25A2.25 2.25 0 015.25 2h5.5A2.25 2.25 0 0113 4.25v2a.75.75 0 01-1.5 0v-2a.75.75 0 00-.75-.75h-5.5a.75.75 0 00-.75.75v11.5c0 .414.336.75.75.75h5.5a.75.75 0 00.75-.75v-2a.75.75 0 011.5 0v2A2.25 2.25 0 0110.75 18h-5.5A2.25 2.25 0 013 15.75V4.25z"
-							clip-rule="evenodd"
-						/>
-						<path
-							fill-rule="evenodd"
-							d="M19 10a.75.75 0 00-.75-.75H8.704l1.048-.943a.75.75 0 10-1.004-1.114l-2.5 2.25a.75.75 0 000 1.114l2.5 2.25a.75.75 0 101.004-1.114l-1.048-.943h9.546A.75.75 0 0019 10z"
-							clip-rule="evenodd"
-						/>
-					</svg>
-					<span>{cancelButtonText}</span>
-				</div>
-			</button>
-		</div>
-	</form>
-
-	<!-- Loading state -->
-	{#if isLoggingIn}
-		<AuthLoading message="Authenticating..." variant="spinner" size="md" className="mt-4" />
-	{/if}
-
-	<!-- Error handling with retry -->
-	<AuthError
-		error={showError ? errorMessage : null}
-		onRetry={retryCount < maxRetries && !isLoggingIn ? handleRetry : undefined}
-		onDismiss={!isLoggingIn ? handleDismiss : undefined}
-	/>
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/Message.svelte b/packages/yakkl-wallet/src/lib/components/v1/Message.svelte
deleted file mode 100644
index 526cb61..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/Message.svelte
+++ /dev/null
@@ -1,95 +0,0 @@
-<script lang="ts">
-	import { Avatar } from 'flowbite-svelte';
-	import { createEventDispatcher } from 'svelte';
-	import type { YakklChat } from '$lib/common/interfaces';
-	import { formatTimestamp } from '$lib/common/datetime';
-
-	interface Props {
-		message: YakklChat;
-		by: 'human' | 'bot';
-		i: number;
-	}
-
-	let { message, by, i }: Props = $props();
-
-	const dispatch = createEventDispatcher();
-
-	function handleCopy() {
-		dispatch('copy');
-	}
-
-	function handlePrint() {
-		dispatch('print');
-	}
-</script>
-
-<div class="mb-4 flex items-start {by === 'human' ? 'flex-row-reverse' : 'flex-row'}">
-	<!-- svelte-ignore a11y_click_events_have_key_events -->
-	<div class="flex flex-col">
-		{#if by === 'human'}
-			<Avatar border size="sm" />
-		{:else}
-			<img
-				src="/images/bot-avatar.png"
-				alt="Bot avatar"
-				class="w-8 h-8 object-cover rounded-full"
-			/>
-		{/if}
-		<!-- svelte-ignore a11y_consider_explicit_label -->
-		<button onclick={handleCopy} class="clip w-6 h-6 ml-1 mt-0.5 hover:text-gray-800">
-			<svg
-				xmlns="http://www.w3.org/2000/svg"
-				class="h-6 w-6 dark:text-white hover:stroke-gray-200"
-				fill="none"
-				viewBox="0 0 24 24"
-				stroke="currentColor"
-				stroke-width="2"
-			>
-				<path
-					stroke-linecap="round"
-					stroke-linejoin="round"
-					d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"
-				/>
-			</svg>
-		</button>
-		<!-- svelte-ignore a11y_interactive_supports_focus -->
-		<div role="button" class="ml-1 mt-1 flex flex-col" onclick={handlePrint}>
-			<svg
-				xmlns="http://www.w3.org/2000/svg"
-				fill="none"
-				viewBox="0 0 24 24"
-				stroke-width="1.5"
-				stroke="currentColor"
-				class="w-6 h-6"
-			>
-				<path
-					stroke-linecap="round"
-					stroke-linejoin="round"
-					d="M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0110.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0l.229 2.523a1.125 1.125 0 01-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0021 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 00-1.913-.247M6.34 18H5.25A2.25 2.25 0 013 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 011.913-.247m10.5 0a48.536 48.536 0 00-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5zm-3 0h.008v.008H15V10.5z"
-				/>
-			</svg>
-		</div>
-	</div>
-
-	<div
-		class="mx-2 max-w-[calc(100%-3rem)] {by === 'human'
-			? 'text-right text-white bg-primary border border-purple-800'
-			: 'text-gray-900 bg-white border border-primary'} rounded-xl p-1 break-word"
-		style="width: max-content; float: {by === 'human' ? 'right' : 'left'}; clear: both;"
-	>
-		<input
-			id="{by === 'human' ? 'question' : 'response'}{i}"
-			name="{by === 'human' ? 'question' : 'response'}{i}"
-			value=":yakkl:{message.text}"
-			type="hidden"
-		/>
-		{@html message.text}
-		<small class="text-small {by === 'human' ? 'text-blue-500' : 'text-gray-500'}"
-			>{formatTimestamp(message.timestamp)}</small
-		>
-		<small class="text-small {by === 'human' ? 'text-blue-500' : 'text-gray-500'}"
-			>Tokens: {message?.usage?.[by === 'human' ? 'prompt_tokens' : 'completion_tokens'] ??
-				'N/A'}</small
-		>
-	</div>
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/Modal.svelte b/packages/yakkl-wallet/src/lib/components/v1/Modal.svelte
deleted file mode 100644
index f5267bf..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/Modal.svelte
+++ /dev/null
@@ -1,92 +0,0 @@
-<script lang="ts">
-	interface Props {
-		show?: boolean;
-		title?: string;
-		description?: string;
-		className?: string;
-		children?: import('svelte').Snippet;
-		footer?: import('svelte').Snippet;
-		onCancel?: () => void;
-		onClose?: () => void;
-		preventClose?: boolean; // Prevents closing via background click or X button
-	}
-
-	// Use `let` for props that are mutable
-	let {
-		show = $bindable(false), // Two-way binding
-		title = '',
-		description = '',
-		className = '',
-		children,
-		footer,
-		onCancel = () => {
-			show = false;
-		}, // Default handlers
-		onClose = () => {
-			show = false;
-		},
-		preventClose = false
-	}: Props = $props();
-
-	// Handle close with preventClose check
-	function handleClose() {
-		if (!preventClose) {
-			onClose();
-		}
-	}
-</script>
-
-{#if show}
-	<div class="fixed inset-0 flex items-center justify-center z-[699] {className}" aria-modal="true">
-		<!-- svelte-ignore a11y_click_events_have_key_events -->
-		<!-- svelte-ignore a11y_no_static_element_interactions -->
-		<div class="absolute inset-0 bg-black opacity-50" onclick={handleClose}></div>
-
-		<!-- Modal container -->
-		<div
-			class="bg-surface-light dark:bg-surface-dark text-primary-light dark:text-primary-dark rounded-lg shadow-lg w-full max-w-md mx-4 z-10 max-h-[80%] flex flex-col overflow-hidden"
-		>
-			<!-- Modal header -->
-			<div class="p-4 relative overflow-hidden">
-				{#if !preventClose}
-					<button
-						class="absolute top-4 right-4 text-2xl font-bold hover:text-primary-light dark:hover:text-primary-dark focus:outline-none"
-						onclick={handleClose}
-					>
-						&times;
-					</button>
-				{/if}
-				{#if description}
-					<h2
-						class="text-2xl font-bold mb-4 text-primary-light dark:text-primary-dark truncate pr-8"
-						{title}
-					>
-						{title}
-					</h2>
-					<p class="text-sm mb-2 text-secondary-light dark:text-secondary-dark">
-						{description}
-					</p>
-				{:else}
-					<h2
-						class="text-2xl font-bold mb-2 text-primary-light dark:text-primary-dark truncate pr-8"
-						{title}
-					>
-						{title}
-					</h2>
-				{/if}
-			</div>
-
-			<!-- Modal body content -->
-			<div class="flex-1 overflow-y-auto overflow-x-hidden px-4">
-				{@render children?.()}
-			</div>
-
-			<!-- Modal footer -->
-			<div
-				class="px-6 py-3 rounded-b-lg border-t border-neutral-light dark:border-neutral-dark bg-surface-light dark:bg-surface-dark text-primary-light dark:text-primary-dark overflow-hidden"
-			>
-				{@render footer?.()}
-			</div>
-		</div>
-	</div>
-{/if}
diff --git a/packages/yakkl-wallet/src/lib/components/v1/NavigationControls.svelte b/packages/yakkl-wallet/src/lib/components/v1/NavigationControls.svelte
deleted file mode 100644
index 25facb7..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/NavigationControls.svelte
+++ /dev/null
@@ -1,26 +0,0 @@
-<script lang="ts">
-	interface Props {
-		onPrevious: () => void;
-		onNext: () => void;
-	}
-
-	export let onPrevious: Props['onPrevious'];
-	export let onNext: Props['onNext'];
-</script>
-
-<div class="flex justify-between items-center w-full h-full">
-	<button
-		class="absolute left-0 top-1/2 transform -translate-y-1/2 bg-gray-300 p-2 rounded-full shadow-lg hover:bg-gray-400"
-		onclick={onPrevious}
-		aria-label="Previous"
-	>
-		&#x2190;
-	</button>
-	<button
-		class="absolute right-0 top-1/2 transform -translate-y-1/2 bg-gray-300 p-2 rounded-full shadow-lg hover:bg-gray-400"
-		onclick={onNext}
-		aria-label="Next"
-	>
-		&#x2192;
-	</button>
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/NetworkForm.svelte b/packages/yakkl-wallet/src/lib/components/v1/NetworkForm.svelte
deleted file mode 100644
index 10b8a55..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/NetworkForm.svelte
+++ /dev/null
@@ -1,143 +0,0 @@
-<script lang="ts">
-	import { log } from '$lib/common/logger-wrapper';
-
-	// NOTE: WIP - Adding a network form to the wallet
-
-	const props = $props<{
-		network?: any;
-		onSave?: (network: any) => void;
-		onCancel?: () => void;
-	}>();
-
-	let chainId = $state(props.network?.chainId || '');
-	let name = $state(props.network?.name || '');
-	let symbol = $state(props.network?.symbol || '');
-	let decimals = $state(props.network?.decimals || 18);
-	let blockchain = $state(props.network?.blockchain || '');
-	let type = $state(props.network?.type || 'mainnet');
-	let explorer = $state(props.network?.explorer || '');
-
-	const isEdit = $derived(!!props.network);
-
-	function handleSubmit() {
-		try {
-			const newNetwork = {
-				chainId,
-				name,
-				symbol,
-				decimals,
-				blockchain,
-				type,
-				explorer
-			};
-			props.onSave?.(newNetwork);
-		} catch (error) {
-			log.error('Error saving network', false, error);
-		}
-	}
-</script>
-
-<div class="flex flex-col space-y-4">
-	<div class="text-center">
-		<h2 class="text-xl font-semibold">{isEdit ? 'Edit Network' : 'Add Network'}</h2>
-	</div>
-
-	<form
-		onsubmit={(e) => {
-			e.preventDefault();
-			handleSubmit();
-		}}
-		class="space-y-4"
-	>
-		<div class="space-y-2">
-			<!-- svelte-ignore a11y_label_has_associated_control -->
-			<label class="block text-sm font-medium text-gray-700">Chain ID</label>
-			<input
-				type="text"
-				bind:value={chainId}
-				class="w-full px-3 py-2 border border-gray-300 rounded-md"
-				required
-			/>
-		</div>
-
-		<div class="space-y-2">
-			<!-- svelte-ignore a11y_label_has_associated_control -->
-			<label class="block text-sm font-medium text-gray-700">Network Name</label>
-			<input
-				type="text"
-				bind:value={name}
-				class="w-full px-3 py-2 border border-gray-300 rounded-md"
-				required
-			/>
-		</div>
-
-		<div class="space-y-2">
-			<!-- svelte-ignore a11y_label_has_associated_control -->
-			<label class="block text-sm font-medium text-gray-700">Symbol</label>
-			<input
-				type="text"
-				bind:value={symbol}
-				class="w-full px-3 py-2 border border-gray-300 rounded-md"
-				required
-			/>
-		</div>
-
-		<div class="space-y-2">
-			<!-- svelte-ignore a11y_label_has_associated_control -->
-			<label class="block text-sm font-medium text-gray-700">Decimals</label>
-			<input
-				type="number"
-				bind:value={decimals}
-				class="w-full px-3 py-2 border border-gray-300 rounded-md"
-				required
-			/>
-		</div>
-
-		<div class="space-y-2">
-			<!-- svelte-ignore a11y_label_has_associated_control -->
-			<label class="block text-sm font-medium text-gray-700">Blockchain</label>
-			<input
-				type="text"
-				bind:value={blockchain}
-				class="w-full px-3 py-2 border border-gray-300 rounded-md"
-				required
-			/>
-		</div>
-
-		<div class="space-y-2">
-			<!-- svelte-ignore a11y_label_has_associated_control -->
-			<label class="block text-sm font-medium text-gray-700">Type</label>
-			<select bind:value={type} class="w-full px-3 py-2 border border-gray-300 rounded-md" required>
-				<option value="mainnet">Mainnet</option>
-				<option value="test">Testnet</option>
-			</select>
-		</div>
-
-		<div class="space-y-2">
-			<!-- svelte-ignore a11y_label_has_associated_control -->
-			<label class="block text-sm font-medium text-gray-700">Explorer URL</label>
-			<input
-				type="url"
-				bind:value={explorer}
-				class="w-full px-3 py-2 border border-gray-300 rounded-md"
-				required
-			/>
-		</div>
-
-		<div class="flex justify-end space-x-2">
-			<button
-				type="button"
-				class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200"
-				onclick={props.onCancel}
-			>
-				Cancel
-			</button>
-			<button
-				type="submit"
-				class="px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700"
-			>
-				{isEdit ? 'Save Changes' : 'Add Network'}
-			</button>
-		</div>
-	</form>
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/NewsFeed.svelte b/packages/yakkl-wallet/src/lib/components/v1/NewsFeed.svelte
deleted file mode 100644
index d359227..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/NewsFeed.svelte
+++ /dev/null
@@ -1,124 +0,0 @@
-<!-- src/lib/components/NewsFeed.svelte -->
-<script lang="ts">
-	import ChevronDownIcon from '$lib/components/icons/ChevronDownIcon.svelte';
-	import ChevronUpIcon from '$lib/components/icons/ChevronUpIcon.svelte';
-	import NewsFeedLineView from './NewsFeedLineView.svelte';
-	import ArticleControls from './ArticleControls.svelte';
-
-	interface NewsItem {
-		title: string;
-		subtitle: string;
-		description: string;
-		content?: string;
-		imageUrl: string;
-		source: string;
-		date: string;
-		url: string;
-		guid?: string;
-		categories?: string[];
-		author?: string;
-		publishedAt?: string;
-	}
-
-	interface Props {
-		newsItems?: NewsItem[];
-		maxVisibleItems?: number;
-		className?: string;
-		locked?: boolean;
-		maxItemsPerFeed?: number;
-	}
-
-	let {
-		newsItems = [],
-		maxVisibleItems = 3,
-		className = '',
-		locked = true,
-		maxItemsPerFeed = locked ? 3 : 0
-	}: Props = $props();
-
-	// Apply maxItemsPerFeed limit if locked
-	const effectiveMaxItems = locked ? (maxItemsPerFeed === 0 ? 3 : maxItemsPerFeed) : 0;
-	const limitedItems = effectiveMaxItems > 0 ? newsItems.slice(0, effectiveMaxItems) : newsItems;
-	let visibleItems = $state(limitedItems.slice(0, maxVisibleItems));
-	let remainingItems = $state(limitedItems.slice(maxVisibleItems));
-	let isRemainingSectionCollapsed = $state(true);
-
-	// Update when newsItems prop changes
-	$effect(() => {
-		const effectiveMaxItems = locked ? (maxItemsPerFeed === 0 ? 3 : maxItemsPerFeed) : 0;
-		const limitedItems = effectiveMaxItems > 0 ? newsItems.slice(0, effectiveMaxItems) : newsItems;
-		visibleItems = limitedItems.slice(0, maxVisibleItems);
-		remainingItems = limitedItems.slice(maxVisibleItems);
-	});
-
-	// Check if we have any valid news items
-	const hasValidItems = limitedItems.length > 0;
-</script>
-
-<div class={className}>
-	{#if hasValidItems}
-		<!-- Visible Items Section -->
-		<div class="space-y-0">
-			{#each visibleItems as item, index}
-				<div class="relative group">
-					<div
-						class="group-hover:bg-gray-50 dark:group-hover:bg-zinc-800/50 transition-colors duration-200"
-					>
-						<NewsFeedLineView newsItem={item} {locked} />
-					</div>
-					<ArticleControls article={item} />
-					{#if index < visibleItems.length - 1}
-						<div class="flex justify-center">
-							<div class="w-[80%] h-[1px] bg-gray-200 dark:bg-gray-700"></div>
-						</div>
-					{/if}
-				</div>
-			{/each}
-		</div>
-
-		<!-- Remaining Items Section -->
-		{#if remainingItems.length > 0}
-			<div class="space-y-0">
-				<button
-					class="flex items-center justify-between w-full py-2 cursor-pointer"
-					onclick={() => (isRemainingSectionCollapsed = !isRemainingSectionCollapsed)}
-				>
-					<h3 class="text-sm font-medium text-gray-700 dark:text-gray-300">
-						{remainingItems.length} More Stories
-					</h3>
-					<div class="text-gray-500 dark:text-gray-400">
-						{#if isRemainingSectionCollapsed}
-							<ChevronDownIcon className="w-4 h-4" />
-						{:else}
-							<ChevronUpIcon className="w-4 h-4" />
-						{/if}
-					</div>
-				</button>
-
-				{#if !isRemainingSectionCollapsed}
-					<div class="space-y-0">
-						{#each remainingItems as item, index}
-							<div class="relative group">
-								<div
-									class="group-hover:bg-gray-50 dark:group-hover:bg-zinc-800/50 transition-colors duration-200"
-								>
-									<NewsFeedLineView newsItem={item} />
-								</div>
-								<ArticleControls article={item} />
-								{#if index < remainingItems.length - 1}
-									<div class="flex justify-center">
-										<div class="w-[80%] h-[1px] bg-gray-200 dark:bg-gray-700"></div>
-									</div>
-								{/if}
-							</div>
-						{/each}
-					</div>
-				{/if}
-			</div>
-		{/if}
-	{:else}
-		<div class="flex items-center justify-center p-4 text-gray-500 dark:text-gray-400">
-			<p class="text-sm">No news items available at this time</p>
-		</div>
-	{/if}
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/NewsFeedLineView.svelte b/packages/yakkl-wallet/src/lib/components/v1/NewsFeedLineView.svelte
deleted file mode 100644
index 332bd73..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/NewsFeedLineView.svelte
+++ /dev/null
@@ -1,70 +0,0 @@
-<script lang="ts">
-	interface Props {
-		newsItem: {
-			title: string;
-			subtitle: string;
-			description: string;
-			content?: string;
-			imageUrl: string;
-			source: string;
-			date: string;
-			url: string;
-			guid?: string;
-			categories?: string[];
-			author?: string;
-			publishedAt?: string;
-		};
-		className?: string;
-		locked?: boolean;
-	}
-
-	let { newsItem, className = '', locked = true }: Props = $props();
-
-	// Check if the news item has all required properties
-	const isValidNewsItem =
-		newsItem &&
-		newsItem.title &&
-		newsItem.description &&
-		newsItem.imageUrl &&
-		newsItem.source &&
-		newsItem.date &&
-		newsItem.url;
-</script>
-
-<div class={className}>
-	{#if isValidNewsItem}
-		<a
-			href={newsItem.url}
-			target="_blank"
-			rel="noopener noreferrer"
-			class="block hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors"
-		>
-			<div class="flex gap-4 p-3 item">
-				<div class="flex-shrink-0">
-					<img
-						src={newsItem.imageUrl}
-						alt={newsItem.title}
-						class="w-16 h-16 object-cover rounded-md"
-					/>
-				</div>
-				<div class="flex-1 min-w-0 pr-0">
-					<h3 class="text-sm font-semibold text-gray-900 dark:text-gray-100 truncate">
-						{newsItem.title}
-					</h3>
-					<div class="flex items-center gap-1 text-[10px] text-gray-500 dark:text-gray-400 mt-1">
-						<span>{newsItem.source}</span>
-						<span></span>
-						<span>{newsItem.date}</span>
-					</div>
-					<p class="text-xs text-gray-600 dark:text-gray-300 mt-1 line-clamp-2">
-						{newsItem.description}
-					</p>
-				</div>
-			</div>
-		</a>
-	{:else}
-		<div class="flex items-center justify-center p-4 text-gray-500 dark:text-gray-400">
-			<p class="text-sm">Unable to display news content</p>
-		</div>
-	{/if}
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/NotEnabled.svelte b/packages/yakkl-wallet/src/lib/components/v1/NotEnabled.svelte
deleted file mode 100644
index d93cf2c..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/NotEnabled.svelte
+++ /dev/null
@@ -1,41 +0,0 @@
-<script lang="ts">
-	import { handleOpenInTab } from '$lib/utilities';
-
-	interface Props {
-		show?: boolean;
-		value?: string;
-	}
-
-	let {
-		show = $bindable(false),
-		value = 'This feature is not yet available. We are working on it!'
-	}: Props = $props();
-
-	// Shim for login page - needs a better way
-	function handleLearnMore(_e: any) {
-		handleOpenInTab(
-			'https://yakkl.com/university/support?utm_source=yakkl&utm_medium=extension&utm_campaign=learn_more&utm_content=knowledge_base&utm_term=extension'
-		);
-		show = false;
-	}
-</script>
-
-<div class="modal" class:modal-open={show}>
-	<div class="modal-box relative">
-		<!-- <label for="my-modal-3" class="btn btn-sm btn-circle absolute right-2 top-2"></label> -->
-		<div class="border border-base-content rounded-md m-2 text-center p-1">
-			<h1 class="font-bold"><span class="font-bold text-white">INFO</span></h1>
-			<p class="pt-4 text-white">{value}</p>
-			<!-- <p class="mt-1">Do you wish to continue?</p> -->
-		</div>
-		<div class="modal-action">
-			<button class="btn" onclick={handleLearnMore}>Learn More...</button>
-			<button
-				class="btn"
-				onclick={() => {
-					show = false;
-				}}>OK</button
-			>
-		</div>
-	</div>
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/Notification.svelte b/packages/yakkl-wallet/src/lib/components/v1/Notification.svelte
deleted file mode 100644
index bb79a2c..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/Notification.svelte
+++ /dev/null
@@ -1,58 +0,0 @@
-<script lang="ts">
-	import Modal from './Modal.svelte';
-	import { safeLogout } from '$lib/common/safeNavigate';
-
-	interface Props {
-		show?: boolean;
-		title?: string;
-		message?: string;
-		onClose?: () => void;
-	}
-
-	let {
-		show = $bindable(false),
-		title = 'Notification',
-		message = '',
-		onClose = () => safeLogout()
-	}: Props = $props();
-
-	function handleClose() {
-		show = false; // Ensure modal closes
-		// Force a small delay to ensure proper cleanup before calling onClose
-		setTimeout(() => {
-			onClose(); // Call the provided close handler
-		}, 10);
-	}
-</script>
-
-<Modal bind:show {title}>
-	<div class="p-6">
-		<div class="flex items-center mb-4">
-			<div class="flex-shrink-0">
-				<svg
-					class="w-6 h-6 text-gray-400"
-					aria-hidden="true"
-					fill="currentColor"
-					viewBox="0 0 20 20"
-					xmlns="http://www.w3.org/2000/svg"
-				>
-					<path
-						d="M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"
-					></path>
-				</svg>
-			</div>
-			<div class="ml-3">
-				<p class="text-sm text-gray-500">{message}</p>
-			</div>
-		</div>
-		<div class="mt-4 flex justify-end">
-			<button
-				type="button"
-				class="rounded-md border border-gray-300 bg-white py-2 px-4 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"
-				onclick={handleClose}
-			>
-				Close
-			</button>
-		</div>
-	</div>
-</Modal>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/NumericInput.svelte b/packages/yakkl-wallet/src/lib/components/v1/NumericInput.svelte
deleted file mode 100644
index 5ac2ae6..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/NumericInput.svelte
+++ /dev/null
@@ -1,50 +0,0 @@
-<!-- NumericInput.svelte -->
-<script lang="ts">
-	const {
-		value = '',
-		placeholder = '0',
-		disabled = false,
-		errorClass = '',
-		className = '',
-		onChange = (value: string) => {},
-		onBlur = (value: string) => {}
-	} = $props<{
-		value?: string;
-		placeholder?: string;
-		disabled?: boolean;
-		errorClass?: string;
-		className?: string;
-		onChange?: (value: string) => void;
-		onBlur?: (value: string) => void;
-	}>();
-
-	let inputValue = $state(value || '');
-
-	$effect(() => {
-		if (value !== inputValue) {
-			inputValue = value;
-		}
-	});
-
-	function handleInput(e: Event) {
-		const value = (e.currentTarget as HTMLInputElement).value;
-
-		// Only basic validation for numbers and decimal
-		if (!/^[0-9]*\.?[0-9]*$/.test(value)) {
-			return;
-		}
-
-		inputValue = value;
-		onChange(value);
-	}
-</script>
-
-<input
-	type="text"
-	{placeholder}
-	{disabled}
-	value={inputValue}
-	oninput={handleInput}
-	onblur={onBlur}
-	class="{className} {errorClass}"
-/>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/OffcanvasMainMenu.svelte b/packages/yakkl-wallet/src/lib/components/v1/OffcanvasMainMenu.svelte
deleted file mode 100644
index 07cd77b..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/OffcanvasMainMenu.svelte
+++ /dev/null
@@ -1,245 +0,0 @@
-<script lang="ts">
-	import { goto } from '$app/navigation';
-	import { PATH_LOGOUT } from '$lib/common';
-	import {
-		showEmergencyKit,
-		showEmergencyKitExport,
-		showEmergencyKitImport
-	} from '$lib/common/stores/ui';
-	import { onMount, onDestroy } from 'svelte';
-	import { getSettings } from '$lib/common/stores';
-	import { shouldShowProFeatures } from '$lib/common/token-analytics';
-	import { PlanType } from '$lib/common/types';
-	import type { Settings } from '$lib/common/interfaces';
-	import SimpleTooltip from './SimpleTooltip.svelte';
-
-	let settings: Settings | null = $state(null);
-	let isProUser = $state(false);
-	let offcanvasElement: HTMLElement;
-	let isHoveringMenu = $state(false);
-	let hoverTimeout: number | null = null;
-
-	onMount(async () => {
-		settings = await getSettings();
-		isProUser = shouldShowProFeatures(settings?.plan?.type || PlanType.BASIC_MEMBER);
-		
-		// Add click outside listener (browser only)
-		if (typeof window !== 'undefined') {
-			setupClickOutsideListener();
-		}
-	});
-
-	onDestroy(() => {
-		// Cleanup event listeners (browser only)
-		if (typeof window !== 'undefined' && typeof document !== 'undefined') {
-			document.removeEventListener('click', handleClickOutside);
-		}
-		// Cleanup hover timeout
-		if (hoverTimeout) {
-			clearTimeout(hoverTimeout);
-		}
-	});
-
-	function setupClickOutsideListener() {
-		if (typeof document !== 'undefined') {
-			document.addEventListener('click', handleClickOutside);
-		}
-	}
-
-	function handleClickOutside(event: MouseEvent) {
-		if (!offcanvasElement) return;
-		
-		const target = event.target as HTMLElement;
-		const isOffcanvasVisible = offcanvasElement.classList.contains('show');
-		
-		// Check if click is outside the offcanvas and not on a trigger button
-		const isClickOutside = !offcanvasElement.contains(target);
-		const isNotTrigger = !target.closest('[data-bs-toggle="offcanvas"][data-bs-target="#offcanvasMainMenu"]');
-		
-		if (isOffcanvasVisible && isClickOutside && isNotTrigger) {
-			closeOffcanvas();
-		}
-	}
-
-	function closeOffcanvas() {
-		if (typeof window !== 'undefined' && window.bootstrap) {
-			const offcanvasInstance = window.bootstrap.Offcanvas.getInstance(offcanvasElement);
-			if (offcanvasInstance) {
-				offcanvasInstance.hide();
-			}
-		}
-	}
-
-	function handleMenuMouseEnter() {
-		isHoveringMenu = true;
-		if (hoverTimeout) {
-			clearTimeout(hoverTimeout);
-			hoverTimeout = null;
-		}
-	}
-
-	function handleMenuMouseLeave() {
-		isHoveringMenu = false;
-		// Start timeout to close menu when mouse leaves
-		hoverTimeout = setTimeout(() => {
-			closeOffcanvas();
-		}, 500) as unknown as number; // 500ms delay when leaving menu
-	}
-
-	function handleLogout() {
-		goto(PATH_LOGOUT);
-	}
-
-	function openExportKit() {
-		if (!isProUser) return;
-		showEmergencyKitExport.set(true);
-		showEmergencyKitImport.set(false);
-		showEmergencyKit.set(true);
-	}
-
-	function openImportKit() {
-		if (!isProUser) return;
-		showEmergencyKitExport.set(false);
-		showEmergencyKitImport.set(true);
-		showEmergencyKit.set(true);
-	}
-</script>
-
-<div
-	bind:this={offcanvasElement}
-	class="z-100 offcanvas offcanvas-start top-0 left-0 fixed bottom-auto flex flex-col min-w-[200px] max-w-[280px] font-sans antialiased invisible bg-clip-padding shadow-sm outline-none transition duration-300 ease-in-out border-none rounded-r-md bg-primary text-base-content"
-	tabindex="-1"
-	id="offcanvasMainMenu"
-	aria-labelledby="offcanvasMainMenuLabel"
-	role="dialog"
-	aria-modal="true"
-	onmouseenter={handleMenuMouseEnter}
-	onmouseleave={handleMenuMouseLeave}
->
-	<!-- Header -->
-	<div class="offcanvas-header flex items-center justify-between px-4 pt-2 pb-2 bg-primary-200">
-		<h5 class="offcanvas-title font-semibold" id="offcanvasMainMenuLabel">Menu</h5>
-		<button
-			type="button"
-			class="text-base-content opacity-60 hover:opacity-100"
-			data-bs-dismiss="offcanvas"
-			aria-label="Close"
-		>
-			<svg
-				xmlns="http://www.w3.org/2000/svg"
-				class="w-5 h-5"
-				fill="none"
-				viewBox="0 0 24 24"
-				stroke="currentColor"
-				stroke-width="2"
-			>
-				<path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
-			</svg>
-		</button>
-	</div>
-
-	<hr class="my-1 border-base-content/20" />
-
-	<!-- Menu Items -->
-	<ul class="px-2 space-y-1">
-		<li data-bs-dismiss={isProUser ? "offcanvas" : ""}>
-			{#if isProUser}
-				<button
-					onclick={openExportKit}
-					class="w-full text-left px-4 py-2 rounded-md text-sm hover:bg-primary-100 transition flex items-center gap-2"
-				>
-					<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
-						<path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4M12,6A6,6 0 0,0 6,12A6,6 0 0,0 12,18A6,6 0 0,0 18,12A6,6 0 0,0 12,6M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8Z"/>
-					</svg>
-					Export Emergency Kit
-				</button>
-			{:else}
-				<SimpleTooltip content="Upgrade to Pro for full Emergency Kit features">
-					<button
-						disabled
-						class="w-full text-left px-4 py-2 rounded-md text-sm text-gray-400 cursor-not-allowed flex items-center gap-2"
-					>
-						<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
-							<path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
-						</svg>
-						Export Emergency Kit
-						<div class="w-3 h-3 bg-gradient-to-r from-indigo-400 to-purple-400 rounded-full flex items-center justify-center ml-auto">
-							<svg class="w-2 h-2 text-white" fill="currentColor" viewBox="0 0 20 20">
-								<path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
-							</svg>
-						</div>
-					</button>
-				</SimpleTooltip>
-			{/if}
-		</li>
-		<li data-bs-dismiss={isProUser ? "offcanvas" : ""}>
-			{#if isProUser}
-				<button
-					onclick={openImportKit}
-					class="w-full text-left px-4 py-2 rounded-md text-sm hover:bg-primary-100 transition flex items-center gap-2"
-				>
-					<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
-						<path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4M12,6A6,6 0 0,0 6,12A6,6 0 0,0 12,18A6,6 0 0,0 18,12A6,6 0 0,0 12,6M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8Z"/>
-					</svg>
-					Import Emergency Kit
-				</button>
-			{:else}
-				<SimpleTooltip content="Upgrade to Pro for full Emergency Kit features">
-					<button
-						disabled
-						class="w-full text-left px-4 py-2 rounded-md text-sm text-gray-400 cursor-not-allowed flex items-center gap-2"
-					>
-						<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
-							<path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
-						</svg>
-						Import Emergency Kit
-						<div class="w-3 h-3 bg-gradient-to-r from-indigo-400 to-purple-400 rounded-full flex items-center justify-center ml-auto">
-							<svg class="w-2 h-2 text-white" fill="currentColor" viewBox="0 0 20 20">
-								<path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
-							</svg>
-						</div>
-					</button>
-				</SimpleTooltip>
-			{/if}
-		</li>
-		<li data-bs-dismiss="offcanvas">
-			<a
-				href="https://yakkl.com/university/support?utm_source=yakkl&utm_medium=extension&utm_campaign=extension&utm_content=menu&utm_term=help"
-				class="block px-4 py-2 rounded-md text-sm hover:bg-primary-100 transition"
-				target="_blank"
-				rel="noreferrer"
-			>
-				 Help Center
-			</a>
-		</li>
-		<li data-bs-dismiss="offcanvas">
-			<button
-				onclick={handleLogout}
-				class="w-full text-left px-4 py-2 rounded-md text-sm text-red-600 hover:text-red-800 hover:bg-primary-100 transition"
-			>
-				 Lock & Logout
-			</button>
-		</li>
-		<li data-bs-dismiss="offcanvas">
-			<button
-				onclick={handleLogout}
-				class="w-full text-left px-4 py-2 rounded-md text-sm hover:bg-primary-100 transition"
-			>
-				 Exit YAKKL
-			</button>
-		</li>
-	</ul>
-
-	<hr class="my-1 border-base-content/20" />
-
-	<div class="text-center py-2 bg-primary">
-		<a
-			class="text-sm font-semibold text-base-content hover:underline"
-			href="https://yakkl.com/?utm_source=yakkl&utm_medium=extension&utm_campaign=extension&utm_content=menu&utm_term=extension"
-			target="_blank"
-			rel="noreferrer"
-		>
-			yakkl.com
-		</a>
-	</div>
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/OffcanvasProfileMenu.svelte b/packages/yakkl-wallet/src/lib/components/v1/OffcanvasProfileMenu.svelte
deleted file mode 100644
index 44ca4f1..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/OffcanvasProfileMenu.svelte
+++ /dev/null
@@ -1,267 +0,0 @@
-<script lang="ts">
-	import { goto } from '$app/navigation';
-	import { PATH_LOGOUT } from '$lib/common';
-	import { showProfileSettingsModal } from '$lib/common/stores/ui';
-	import Avatar from './Avatar.svelte';
-	import Profile from './Profile.svelte';
-	import Settings from './Settings.svelte';
-	import WatchList from './WatchList.svelte';
-	import SimpleTooltip from './SimpleTooltip.svelte';
-	import { onMount, onDestroy } from 'svelte';
-	import { getSettings } from '$lib/common/stores';
-	import { shouldShowProFeatures } from '$lib/common/token-analytics';
-	import { PlanType } from '$lib/common/types';
-	import type { Settings } from '$lib/common/interfaces';
-
-	const props = $props<{
-		userName?: string;
-		avatarUrl?: string;
-	}>();
-
-	let showProfileModal = $state(false);
-	let showSettingsModal = $state(false);
-	let showWatchListModal = $state(false);
-	let offcanvasElement: HTMLElement;
-	let isHoveringMenu = $state(false);
-	let hoverTimeout: number | null = null;
-	let settings: Settings | null = null;
-	let isProUser = $state(false);
-
-	onMount(async () => {
-		// Load settings to check membership
-		settings = await getSettings();
-		isProUser = shouldShowProFeatures(settings?.plan?.type || PlanType.BASIC_MEMBER);
-
-		// Add click outside listener (browser only)
-		if (typeof window !== 'undefined') {
-			setupClickOutsideListener();
-		}
-	});
-
-	onDestroy(() => {
-		// Cleanup event listeners (browser only)
-		if (typeof window !== 'undefined' && typeof document !== 'undefined') {
-			document.removeEventListener('click', handleClickOutside);
-		}
-		// Cleanup hover timeout
-		if (hoverTimeout) {
-			clearTimeout(hoverTimeout);
-		}
-	});
-
-	function setupClickOutsideListener() {
-		if (typeof document !== 'undefined') {
-			document.addEventListener('click', handleClickOutside);
-		}
-	}
-
-	function handleClickOutside(event: MouseEvent) {
-		if (!offcanvasElement) return;
-		
-		const target = event.target as HTMLElement;
-		const isOffcanvasVisible = offcanvasElement.classList.contains('show');
-		
-		// Check if click is outside the offcanvas and not on a trigger button
-		const isClickOutside = !offcanvasElement.contains(target);
-		const isNotTrigger = !target.closest('[data-bs-toggle="offcanvas"][data-bs-target="#offcanvasProfileMenu"]');
-		
-		if (isOffcanvasVisible && isClickOutside && isNotTrigger) {
-			closeOffcanvas();
-		}
-	}
-
-	function closeOffcanvas() {
-		if (typeof window !== 'undefined' && window.bootstrap) {
-			const offcanvasInstance = window.bootstrap.Offcanvas.getInstance(offcanvasElement);
-			if (offcanvasInstance) {
-				offcanvasInstance.hide();
-			}
-		}
-	}
-
-	function handleMenuMouseEnter() {
-		isHoveringMenu = true;
-		if (hoverTimeout) {
-			clearTimeout(hoverTimeout);
-			hoverTimeout = null;
-		}
-	}
-
-	function handleMenuMouseLeave() {
-		isHoveringMenu = false;
-		// Start timeout to close menu when mouse leaves
-		hoverTimeout = setTimeout(() => {
-			closeOffcanvas();
-		}, 500) as unknown as number; // 500ms delay when leaving menu
-	}
-
-	function handleLogout() {
-		goto(PATH_LOGOUT);
-	}
-
-	function openProfile() {
-		showProfileModal = true;
-	}
-
-	function openSettings() {
-		showSettingsModal = true;
-	}
-
-	function openWatchList() {
-		if (!isProUser) return;
-		showWatchListModal = true;
-	}
-
-	function handleProfileComplete() {
-		// Refresh page or update stores as needed
-		showProfileModal = false;
-	}
-
-	function handleSettingsComplete() {
-		// Refresh page or update stores as needed
-		showSettingsModal = false;
-	}
-
-	function handleWatchListComplete() {
-		// Refresh page or update stores as needed
-		showWatchListModal = false;
-	}
-</script>
-
-<div
-	bind:this={offcanvasElement}
-	class="z-100 offcanvas offcanvas-end top-0 right-0 fixed bottom-auto flex flex-col min-w-[200px] max-w-[280px] font-sans antialiased invisible bg-clip-padding shadow-sm outline-none transition duration-300 ease-in-out border-none rounded-l-md bg-primary text-base-content"
-	tabindex="-1"
-	id="offcanvasProfileMenu"
-	aria-labelledby="offcanvasProfileMenuLabel"
-	role="dialog"
-	aria-modal="true"
-	onmouseenter={handleMenuMouseEnter}
-	onmouseleave={handleMenuMouseLeave}
->
-	<!-- Header -->
-	<div class="offcanvas-header flex items-center justify-between px-4 pt-2 pb-2 bg-primary-200">
-		<h5 class="offcanvas-title font-semibold" id="offcanvasProfileMenuLabel">Profile</h5>
-		<button
-			type="button"
-			class="text-base-content opacity-60 hover:opacity-100"
-			data-bs-dismiss="offcanvas"
-			aria-label="Close"
-		>
-			<svg
-				xmlns="http://www.w3.org/2000/svg"
-				class="w-5 h-5"
-				fill="none"
-				viewBox="0 0 24 24"
-				stroke="currentColor"
-				stroke-width="2"
-			>
-				<path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
-			</svg>
-		</button>
-	</div>
-
-	<hr class="my-1 border-base-content/20" />
-
-	<!-- User Info -->
-	<div class="flex items-center gap-3 px-4 py-3">
-		<Avatar
-			url={props.avatarUrl}
-			ariaLabel="Profile"
-			className="w-10 h-10 rounded-full ring-2 ring-offset-1"
-		/>
-		<div class="text-sm font-semibold">{props.userName ?? 'Anonymous Yakker'}</div>
-	</div>
-
-	<hr class="my-1 border-base-content/20" />
-
-	<!-- Menu Items -->
-	<ul class="px-2 space-y-1">
-		<li data-bs-dismiss="offcanvas">
-			<button
-				onclick={openProfile}
-				class="w-full text-left px-4 py-2 rounded-md text-sm hover:bg-primary-100 transition"
-			>
-				 Profile
-			</button>
-		</li>
-		<li data-bs-dismiss="offcanvas">
-			<button
-				onclick={openSettings}
-				class="w-full text-left px-4 py-2 rounded-md text-sm hover:bg-primary-100 transition"
-			>
-				 Account Settings
-			</button>
-		</li>
-		<li data-bs-dismiss={isProUser ? "offcanvas" : ""}>
-			{#if isProUser}
-				<button
-					onclick={openWatchList}
-					class="w-full text-left px-4 py-2 rounded-md text-sm hover:bg-primary-100 transition flex items-center gap-2"
-				>
-					<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
-						<path d="M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9M12,4.5C17,4.5 21.27,7.61 23,12C21.27,16.39 17,19.5 12,19.5C7,19.5 2.73,16.39 1,12C2.73,7.61 7,4.5 12,4.5M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7Z"/>
-					</svg>
-					Watch Accounts
-				</button>
-			{:else}
-				<SimpleTooltip content="Upgrade to Pro for portfolio tracking, whale watching, and social trading intelligence">
-					<button
-						disabled
-						class="w-full text-left px-4 py-2 rounded-md text-sm text-gray-400 cursor-not-allowed flex items-center gap-2"
-					>
-						<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
-							<path d="M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9M12,4.5C17,4.5 21.27,7.61 23,12C21.27,16.39 17,19.5 12,19.5C7,19.5 2.73,16.39 1,12C2.73,7.61 7,4.5 12,4.5M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7Z"/>
-						</svg>
-						Watch Accounts
-						<div class="w-3 h-3 bg-gradient-to-r from-indigo-400 to-purple-400 rounded-full flex items-center justify-center ml-auto">
-							<svg class="w-2 h-2 text-white" fill="currentColor" viewBox="0 0 20 20">
-								<path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
-							</svg>
-						</div>
-					</button>
-				</SimpleTooltip>
-			{/if}
-		</li>
-		<li data-bs-dismiss="offcanvas">
-			<button
-				onclick={handleLogout}
-				class="w-full text-left px-4 py-2 rounded-md text-sm text-red-600 hover:text-red-800 hover:bg-primary-100 transition"
-			>
-				 Logout
-			</button>
-		</li>
-	</ul>
-
-	<hr class="my-1 border-base-content/20" />
-
-	<div class="text-center py-2 bg-primary">
-		<a
-			class="text-sm font-semibold text-base-content hover:underline"
-			href="https://yakkl.com/?utm_source=yakkl&utm_medium=extension&utm_campaign=extension&utm_content=profile&utm_term=extension"
-			target="_blank"
-			rel="noreferrer"
-		>
-			yakkl.com
-		</a>
-	</div>
-</div>
-
-<!-- Profile and Settings Modals -->
-<Profile
-	bind:show={showProfileModal}
-	onComplete={handleProfileComplete}
-	onClose={() => (showProfileModal = false)}
-/>
-
-<Settings
-	bind:show={showSettingsModal}
-	onComplete={handleSettingsComplete}
-	onClose={() => (showSettingsModal = false)}
-/>
-
-<WatchList
-	bind:show={showWatchListModal}
-	onComplete={handleWatchListComplete}
-	onClose={() => (showWatchListModal = false)}
-/>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/Pincode.svelte b/packages/yakkl-wallet/src/lib/components/v1/Pincode.svelte
deleted file mode 100644
index 1f2b908..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/Pincode.svelte
+++ /dev/null
@@ -1,273 +0,0 @@
-<script lang="ts">
-	// Pincode change
-	import { onMount } from 'svelte';
-	import {
-		getProfile,
-		setProfileStorage,
-		yakklMiscStore,
-		profileStore,
-		yakklCurrentlySelectedStore,
-		setYakklCurrentlySelectedStorage,
-		getYakklCurrentlySelected
-	} from '$lib/common/stores';
-	import { encryptData, decryptData, digestMessage } from '$lib/common/encryption';
-	import { deepCopy } from '$lib/utilities/utilities';
-	import {
-		isEncryptedData,
-		isProfileData,
-		type CurrentlySelectedData,
-		type EncryptedData,
-		type Profile,
-		type ProfileData,
-		type YakklCurrentlySelected
-	} from '$lib/common';
-	import Modal from './Modal.svelte';
-	import { log } from '$lib/managers/Logger';
-
-	interface Props {
-		show?: boolean;
-		className?: string;
-		onVerified?: (pincodeOld: string, pincodeNew: string) => void;
-	}
-
-	let { show = $bindable(false), className = 'z-[999]', onVerified = () => {} }: Props = $props();
-
-	let pincodeOriginal = $state('');
-	let pincodeNew = $state('');
-	let eyeOpenOriginal = $state(false);
-	let eyeOpenNew = $state(false);
-	let currentlySelected: YakklCurrentlySelected;
-
-	onMount(async () => {
-		currentlySelected = await getYakklCurrentlySelected();
-		pincodeOriginal = '';
-		pincodeNew = '';
-		show = false;
-	});
-
-	async function handleChange() {
-		try {
-			if (pincodeOriginal.length < 8 || pincodeNew.length < 8) {
-				alert(
-					"Please enter a valid pincode. 8 numbers. Don't enter the same number in all 8 digits."
-				);
-				return;
-			}
-
-			if (pincodeOriginal === pincodeNew) {
-				alert('Please enter a different pincode to update.');
-				return;
-			}
-
-			let profile: Profile | null = await getProfile();
-			if (!profile) {
-				throw 'No profile found';
-			}
-
-			if (isEncryptedData(profile.data)) {
-				await decryptData(profile.data as unknown as EncryptedData, $yakklMiscStore).then(
-					(result) => {
-						profile.data = result as ProfileData;
-					}
-				);
-			}
-
-			const digestedOriginalPincode = await digestMessage(pincodeOriginal);
-			if (
-				isProfileData(profile.data) &&
-				(profile.data as ProfileData)?.pincode !== digestedOriginalPincode
-			) {
-				alert('Invalid current pincode');
-				return;
-			}
-
-			if (isProfileData(profile.data)) {
-				profile.data.pincode = await digestMessage(pincodeNew);
-				await encryptData(profile.data, $yakklMiscStore).then((result) => {
-					profile.data = result;
-				});
-			}
-
-			(currentlySelected.data as CurrentlySelectedData).profile = await deepCopy(profile);
-
-			await setYakklCurrentlySelectedStorage(currentlySelected);
-
-			$profileStore = await deepCopy(profile);
-			setProfileStorage(profile);
-
-			onVerified(pincodeOriginal, pincodeNew);
-
-			pincodeOriginal = '';
-			pincodeNew = '';
-
-			show = false;
-		} catch (e) {
-			log.error(e);
-		}
-	}
-
-	function closeModal() {
-		pincodeOriginal = '';
-		pincodeNew = '';
-		show = false;
-	}
-
-	function resetForm() {
-		pincodeOriginal = '';
-		pincodeNew = '';
-	}
-
-	function togglePinVisibilityOriginal() {
-		eyeOpenOriginal = !eyeOpenOriginal;
-		toggleVisibility('pincodeOriginal', 'number');
-	}
-
-	function togglePinVisibilityNew() {
-		eyeOpenNew = !eyeOpenNew;
-		toggleVisibility('pincodeNew', 'number');
-	}
-
-	function toggleVisibility(id: string, type: string) {
-		try {
-			const element = document.getElementById(id) as HTMLInputElement;
-			if (element.type === 'password') {
-				element.type = type;
-			} else {
-				element.type = 'password';
-			}
-		} catch (e) {
-			log.error(e);
-		}
-	}
-</script>
-
-<div class="relative {className}">
-	<Modal bind:show title="Pincode Change" onClose={closeModal}>
-		<div class="p-6 text-primary-light dark:text-primary-dark">
-			<p class="mb-4 text-secondary-light dark:text-secondary-dark">
-				Please verify your current pincode and then enter your new pincode. Thank you.
-			</p>
-			<div class="relative mb-4">
-				<input
-					id="pincodeOriginal"
-					type="password"
-					inputmode="numeric"
-					minlength="8"
-					maxlength="8"
-					class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
-					placeholder="CURRENT - 8 Digit Pin Code"
-					autocomplete="off"
-					bind:value={pincodeOriginal}
-					required
-				/>
-				<button
-					type="button"
-					class="absolute top-1/2 right-3 transform -translate-y-1/2 focus:outline-none"
-					onclick={togglePinVisibilityOriginal}
-				>
-					{#if eyeOpenOriginal}
-						<svg
-							xmlns="http://www.w3.org/2000/svg"
-							viewBox="0 0 24 24"
-							fill="currentColor"
-							class="w-6 h-6 text-gray-500"
-						>
-							<path d="M12 15a3 3 0 100-6 3 3 0 000 6z" />
-							<path
-								fill-rule="evenodd"
-								d="M1.323 11.447C2.811 6.976 7.028 3.75 12.001 3.75c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113-1.487 4.471-5.705 7.697-10.677 7.697-4.97 0-9.186-3.223-10.675-7.69a1.762 1.762 0 010-1.113zM17.25 12a5.25 5.25 0 11-10.5 0 5.25 5.25 0 0110.5 0z"
-								clip-rule="evenodd"
-							/>
-						</svg>
-					{:else}
-						<svg
-							xmlns="http://www.w3.org/2000/svg"
-							viewBox="0 0 24 24"
-							fill="currentColor"
-							class="w-6 h-6 text-gray-500"
-						>
-							<path
-								d="M3.53 2.47a.75.75 0 00-1.06 1.06l18 18a.75.75 0 101.06-1.06l-18-18zM22.676 12.553a11.249 11.249 0 01-2.631 4.31l-3.099-3.099a5.25 5.25 0 00-6.71-6.71L7.759 4.577a11.217 11.217 0 014.242-.827c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113z"
-							/>
-							<path
-								d="M15.75 12c0 .18-.013.357-.037.53l-4.244-4.243A3.75 3.75 0 0115.75 12zM12.53 15.713l-4.243-4.244a3.75 3.75 0 004.243 4.243z"
-							/>
-							<path
-								d="M6.75 12c0-.619.107-1.213.304-1.764l-3.1-3.1a11.25 11.25 0 00-2.63 4.31c-.12.362-.12.752 0 1.114 1.489 4.467 5.704 7.69 10.675 7.69 1.5 0 2.933-.294 4.242-.827l-2.477-2.477A5.25 5.25 0 016.75 12z"
-							/>
-						</svg>
-					{/if}
-				</button>
-			</div>
-			<div class="relative">
-				<input
-					id="pincodeNew"
-					type="password"
-					inputmode="numeric"
-					minlength="8"
-					maxlength="8"
-					class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
-					placeholder="NEW - 8 Digit Pin Code"
-					autocomplete="off"
-					bind:value={pincodeNew}
-					required
-				/>
-				<button
-					type="button"
-					class="absolute top-1/2 right-3 transform -translate-y-1/2 focus:outline-none"
-					onclick={togglePinVisibilityNew}
-				>
-					{#if eyeOpenNew}
-						<svg
-							xmlns="http://www.w3.org/2000/svg"
-							viewBox="0 0 24 24"
-							fill="currentColor"
-							class="w-6 h-6 text-gray-500"
-						>
-							<path d="M12 15a3 3 0 100-6 3 3 0 000 6z" />
-							<path
-								fill-rule="evenodd"
-								d="M1.323 11.447C2.811 6.976 7.028 3.75 12.001 3.75c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113-1.487 4.471-5.705 7.697-10.677 7.697-4.97 0-9.186-3.223-10.675-7.69a1.762 1.762 0 010-1.113zM17.25 12a5.25 5.25 0 11-10.5 0 5.25 5.25 0 0110.5 0z"
-								clip-rule="evenodd"
-							/>
-						</svg>
-					{:else}
-						<svg
-							xmlns="http://www.w3.org/2000/svg"
-							viewBox="0 0 24 24"
-							fill="currentColor"
-							class="w-6 h-6 text-gray-500"
-						>
-							<path
-								d="M3.53 2.47a.75.75 0 00-1.06 1.06l18 18a.75.75 0 101.06-1.06l-18-18zM22.676 12.553a11.249 11.249 0 01-2.631 4.31l-3.099-3.099a5.25 5.25 0 00-6.71-6.71L7.759 4.577a11.217 11.217 0 014.242-.827c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113z"
-							/>
-							<path
-								d="M15.75 12c0 .18-.013.357-.037.53l-4.244-4.243A3.75 3.75 0 0115.75 12zM12.53 15.713l-4.243-4.244a3.75 3.75 0 004.243 4.243z"
-							/>
-							<path
-								d="M6.75 12c0-.619.107-1.213.304-1.764l-3.1-3.1a11.25 11.25 0 00-2.63 4.31c-.12.362-.12.752 0 1.114 1.489 4.467 5.704 7.69 10.675 7.69 1.5 0 2.933-.294 4.242-.827l-2.477-2.477A5.25 5.25 0 016.75 12z"
-							/>
-						</svg>
-					{/if}
-				</button>
-			</div>
-			<div class="mt-6 flex justify-end space-x-4">
-				<button
-					type="button"
-					class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
-					onclick={closeModal}>Cancel</button
-				>
-				<button
-					type="button"
-					class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
-					onclick={resetForm}>Reset</button
-				>
-				<button
-					type="button"
-					class="px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
-					onclick={handleChange}>Change</button
-				>
-			</div>
-		</div>
-	</Modal>
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/PincodeVerify.svelte b/packages/yakkl-wallet/src/lib/components/v1/PincodeVerify.svelte
deleted file mode 100644
index 09d0116..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/PincodeVerify.svelte
+++ /dev/null
@@ -1,259 +0,0 @@
-<script lang="ts">
-	import { onMount } from 'svelte';
-	import { getProfile, yakklMiscStore } from '$lib/common/stores';
-	import { decryptData, digestMessage, isEncryptedData, isProfileData } from '$lib/common';
-	import type { EncryptedData, ProfileData, Profile } from '$lib/common';
-	import Modal from '../Modal.svelte';
-	import { log } from '$lib/managers/Logger';
-
-	interface Props {
-		show?: boolean;
-		className?: string;
-		onRejected?: (rejection: string) => void;
-		onVerified?: (pincode: string) => void;
-	}
-
-	let {
-		show = $bindable(false),
-		className = 'z-[899]',
-		onRejected = () => {},
-		onVerified = () => {}
-	}: Props = $props();
-
-	let pincode = $state('');
-	let eyeOpen = $state(false);
-	let pincodeDigits = $state(['', '', '', '', '', '', '', '']);
-	let inputRefs: HTMLInputElement[] = $state<HTMLInputElement[]>([]);
-
-	onMount(() => {
-		pincode = '';
-		pincodeDigits = ['', '', '', '', '', '', '', ''];
-		show = false;
-		// Focus first input when modal opens
-		if (show && inputRefs[0]) {
-			setTimeout(() => inputRefs[0]?.focus(), 100);
-		}
-	});
-
-	// Watch for show changes to focus first input
-	$effect(() => {
-		if (show && inputRefs[0]) {
-			setTimeout(() => inputRefs[0]?.focus(), 100);
-		}
-	});
-
-	async function handleVerify() {
-		try {
-			// Combine all digits into pincode
-			pincode = pincodeDigits.join('');
-
-			if (pincode.length < 8) {
-				alert('Please enter a valid pincode');
-				return;
-			}
-
-			const profile: Profile | null = await getProfile();
-
-			if (!profile) {
-				show = false;
-				onRejected('No profile found');
-			}
-
-			if (isEncryptedData(profile.data)) {
-				await decryptData(profile.data as unknown as EncryptedData, $yakklMiscStore).then(
-					(result) => {
-						profile.data = result as ProfileData;
-					}
-				);
-			}
-
-			const digestedPincode = await digestMessage(pincode);
-			if (
-				isProfileData(profile.data) &&
-				(profile.data as ProfileData)?.pincode === digestedPincode
-			) {
-				onVerified(digestedPincode); // Send the verified digested pincode and not the actual pincode
-			} else {
-				log.debug(
-					'Invalid pincode(s):',
-					false,
-					(profile.data as ProfileData)?.pincode,
-					digestedPincode
-				);
-				alert('Invalid pincode');
-			}
-
-			pincode = '';
-			pincodeDigits = ['', '', '', '', '', '', '', ''];
-			show = false;
-		} catch (e) {
-			log.error(e);
-			onRejected('Pincode verification failed');
-		}
-		// finally {
-		//   show = false;
-		//   onRejected("Pincode verification failed");
-		// }
-	}
-
-	function closeModal() {
-		pincode = '';
-		pincodeDigits = ['', '', '', '', '', '', '', ''];
-		show = false;
-		onRejected('Pincode verification failed');
-	}
-
-	function resetForm() {
-		pincode = '';
-		pincodeDigits = ['', '', '', '', '', '', '', ''];
-		if (inputRefs[0]) {
-			inputRefs[0].focus();
-		}
-	}
-
-	function togglePinVisibility() {
-		eyeOpen = !eyeOpen;
-	}
-
-	function handleInput(index: number, event: Event) {
-		const input = event.target as HTMLInputElement;
-		const value = input.value;
-
-		// Only allow single digit
-		if (value.length > 1) {
-			input.value = value.slice(-1);
-		}
-
-		// Update the digit
-		pincodeDigits[index] = input.value;
-
-		// Auto-advance to next input
-		if (input.value && index < 7) {
-			inputRefs[index + 1]?.focus();
-		}
-	}
-
-	function handleKeydown(index: number, event: KeyboardEvent) {
-		// Handle backspace to go to previous input
-		if (event.key === 'Backspace' && !pincodeDigits[index] && index > 0) {
-			event.preventDefault();
-			inputRefs[index - 1]?.focus();
-		}
-
-		// Handle arrow keys
-		if (event.key === 'ArrowLeft' && index > 0) {
-			event.preventDefault();
-			inputRefs[index - 1]?.focus();
-		}
-		if (event.key === 'ArrowRight' && index < 7) {
-			event.preventDefault();
-			inputRefs[index + 1]?.focus();
-		}
-
-		// Handle Enter to submit
-		if (event.key === 'Enter' && pincodeDigits.every(d => d)) {
-			handleVerify();
-		}
-	}
-
-	function handlePaste(event: ClipboardEvent) {
-		event.preventDefault();
-		const paste = event.clipboardData?.getData('text');
-		if (paste && /^\d{8}$/.test(paste)) {
-			pincodeDigits = paste.split('');
-			// Focus last input
-			inputRefs[7]?.focus();
-		}
-	}
-</script>
-
-<!-- <div class="relative {className}"> -->
-<Modal bind:show title="Pincode Authorization" onClose={closeModal} {className}>
-	<div class="p-6 text-primary-light dark:text-primary-dark">
-		<p class="mb-4 text-secondary-light dark:text-secondary-dark">
-			Please verify your pincode to move forward. Thank you.
-		</p>
-		<div class="space-y-4">
-			<!-- 8 digit input boxes -->
-			<div class="flex justify-center gap-1">
-				{#each pincodeDigits as digit, i}
-					<input
-						bind:this={inputRefs[i]}
-						type={eyeOpen ? 'text' : 'password'}
-						inputmode="numeric"
-						maxlength="1"
-						class="w-10 h-10 text-center text-lg font-bold border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-800 transition-all"
-						value={digit}
-						oninput={(e) => handleInput(i, e)}
-						onkeydown={(e) => handleKeydown(i, e)}
-						onpaste={i === 0 ? handlePaste : undefined}
-						autocomplete="off"
-						aria-label={`Pin digit ${i + 1}`}
-					/>
-				{/each}
-			</div>
-
-			<!-- Eye toggle button -->
-			<div class="flex justify-center">
-				<button
-					type="button"
-					class="flex items-center gap-2 px-3 py-1.5 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors"
-					onclick={togglePinVisibility}
-				>
-					{#if eyeOpen}
-						<svg
-							xmlns="http://www.w3.org/2000/svg"
-							viewBox="0 0 24 24"
-							fill="currentColor"
-							class="w-5 h-5"
-						>
-							<path d="M12 15a3 3 0 100-6 3 3 0 000 6z" />
-							<path
-								fill-rule="evenodd"
-								d="M1.323 11.447C2.811 6.976 7.028 3.75 12.001 3.75c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113-1.487 4.471-5.705 7.697-10.677 7.697-4.97 0-9.186-3.223-10.675-7.69a1.762 1.762 0 010-1.113zM17.25 12a5.25 5.25 0 11-10.5 0 5.25 5.25 0 0110.5 0z"
-								clip-rule="evenodd"
-							/>
-						</svg>
-						<span>Hide PIN</span>
-					{:else}
-						<svg
-							xmlns="http://www.w3.org/2000/svg"
-							viewBox="0 0 24 24"
-							fill="currentColor"
-							class="w-5 h-5"
-						>
-							<path
-								d="M3.53 2.47a.75.75 0 00-1.06 1.06l18 18a.75.75 0 101.06-1.06l-18-18zM22.676 12.553a11.249 11.249 0 01-2.631 4.31l-3.099-3.099a5.25 5.25 0 00-6.71-6.71L7.759 4.577a11.217 11.217 0 014.242-.827c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113z"
-							/>
-							<path
-								d="M15.75 12c0 .18-.013.357-.037.53l-4.244-4.243A3.75 3.75 0 0115.75 12zM12.53 15.713l-4.243-4.244a3.75 3.75 0 004.243 4.243z"
-							/>
-							<path
-								d="M6.75 12c0-.619.107-1.213.304-1.764l-3.1-3.1a11.25 11.25 0 00-2.63 4.31c-.12.362-.12.752 0 1.114 1.489 4.467 5.704 7.69 10.675 7.69 1.5 0 2.933-.294 4.242-.827l-2.477-2.477A5.25 5.25 0 016.75 12z"
-							/>
-						</svg>
-						<span>Show PIN</span>
-					{/if}
-				</button>
-			</div>
-		</div>
-		<div class="mt-6 flex justify-end space-x-4">
-			<button
-				type="button"
-				class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
-				onclick={closeModal}>Cancel/Reject</button
-			>
-			<button
-				type="button"
-				class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
-				onclick={resetForm}>Reset</button
-			>
-			<button
-				type="button"
-				class="px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
-				onclick={handleVerify}>Verify</button
-			>
-		</div>
-	</div>
-</Modal>
-<!-- </div> -->
diff --git a/packages/yakkl-wallet/src/lib/components/v1/Placeholder.svelte b/packages/yakkl-wallet/src/lib/components/v1/Placeholder.svelte
deleted file mode 100644
index a85103e..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/Placeholder.svelte
+++ /dev/null
@@ -1,37 +0,0 @@
-<!-- Placeholder.svelte -->
-<script lang="ts">
-	let {
-		text = '',
-		anchorTop = false,
-		centerHorizontal = true,
-		centerVertical = false,
-		className = '',
-		showBorderTop = true
-	} = $props<{
-		text?: string;
-		anchorTop?: boolean;
-		centerHorizontal?: boolean;
-		centerVertical?: boolean;
-		className?: string;
-		showBorderTop?: boolean;
-	}>();
-</script>
-
-<div
-	class="
-    {anchorTop ? 'sticky top-0' : ''}
-    {centerHorizontal ? 'flex justify-center' : ''}
-    {centerVertical ? 'flex items-center min-h-full' : ''}
-    w-full
-    px-4
-    py-3
-    text-center
-    text-sm
-    text-zinc-600
-    dark:text-zinc-400
-    {showBorderTop ? 'border-t border-zinc-200 dark:border-zinc-700' : ''}
-    {className}
-  "
->
-	<p>{text}</p>
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/PlanBadge.svelte b/packages/yakkl-wallet/src/lib/components/v1/PlanBadge.svelte
deleted file mode 100644
index 8b95712..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/PlanBadge.svelte
+++ /dev/null
@@ -1,98 +0,0 @@
-<script lang="ts">
-	import { derived, type Readable } from 'svelte/store';
-	import { AccessSourceType, PlanType } from '$lib/common/types';
-	import { openModal } from '$lib/common/stores/modal';
-	import { yakklSettingsStore as settingsStore, setSettingsStorage } from '$lib/common/stores';
-	import { normalizeUserPlan } from '$lib/common/utils';
-	import SimpleTooltip from './SimpleTooltip.svelte';
-
-	interface Badge {
-		label: string;
-		color: string;
-		tooltip: string;
-		upgradeable: boolean;
-	}
-
-	const settings = settingsStore;
-
-	const badge: Readable<Badge | null> = derived(settings, ($s, set) => {
-		if (!$s) return set(null);
-
-		const trialEndUTC = $s.plan.trialEndDate ? new Date($s.plan.trialEndDate).getTime() : null;
-		const nowUTC = Date.now();
-
-		if ($s.plan.source === AccessSourceType.TRIAL && trialEndUTC) {
-			const daysLeft = Math.floor((trialEndUTC - nowUTC) / (1000 * 60 * 60 * 24));
-
-			if (daysLeft > 0) {
-				return set({
-					label: ` YAKKL Pro Level Trial: ${daysLeft} day${daysLeft > 1 ? 's' : ''} left`,
-					color: 'bg-yellow-200 text-yellow-900 dark:bg-yellow-800 dark:text-yellow-100',
-					tooltip: 'On the path to greatness!',
-					upgradeable: true
-				});
-			}
-
-			// Trial expired  normalize and update settings
-			const normalized = normalizeUserPlan($s);
-			void setSettingsStorage(normalized);
-			return set(null);
-		}
-
-		if ($s.plan.type === PlanType.BASIC_MEMBER) {
-			return set({
-				label: ' Basic Member Plan (upgrade)',
-				color: 'bg-red-200 text-red-900 dark:bg-red-800 dark:text-red-100',
-				tooltip: 'Upgrade to PRO to unlock it all!',
-				upgradeable: true
-			});
-		}
-
-		if ($s.plan.type === PlanType.YAKKL_PRO) {
-			return set({
-				label: ' YAKKL PRO',
-				color: 'bg-green-200 text-green-900 dark:bg-green-800 dark:text-green-100',
-				tooltip: 'You are already on your way to the moon with the YAKKL PRO plan!',
-				upgradeable: false
-			});
-		}
-
-		if ($s.plan.type === PlanType.FOUNDING_MEMBER) {
-			return set({
-				label: ' FOUNDING MEMBER',
-				color: 'bg-amber-200 text-amber-900 dark:bg-amber-800 dark:text-amber-100',
-				tooltip: "Founding Member - You hold the keys to YAKKL's origins and perks.",
-				upgradeable: false
-			});
-		}
-
-		if ($s.plan.type === PlanType.EARLY_ADOPTER) {
-			return set({
-				label: ' EARLY ADOPTER',
-				color: 'bg-blue-200 text-blue-900 dark:bg-blue-800 dark:text-blue-100',
-				tooltip: 'Early Adopter - You saw the vision early and joined the movement!',
-				upgradeable: false
-			});
-		}
-
-		return set(null);
-	});
-
-	function handleClick() {
-		const badgeVal = $badge;
-		if (badgeVal && badgeVal.upgradeable) {
-			openModal('upgrade');
-		}
-	}
-</script>
-
-{#if $badge}
-	<SimpleTooltip content={$badge.tooltip} position="bottom">
-		<button
-			class={`inline-flex items-center px-2 py-1 rounded-lg text-xs font-bold transition hover:opacity-90 ${$badge.color}`}
-			on:click={handleClick}
-		>
-			{$badge.label}
-		</button>
-	</SimpleTooltip>
-{/if}
diff --git a/packages/yakkl-wallet/src/lib/components/v1/PodcastLineView.svelte b/packages/yakkl-wallet/src/lib/components/v1/PodcastLineView.svelte
deleted file mode 100644
index 9b85c00..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/PodcastLineView.svelte
+++ /dev/null
@@ -1,41 +0,0 @@
-<!-- File: src/lib/components/PodcastLineView.svelte -->
-<script lang="ts">
-	interface Props {
-		title: string;
-		host: string;
-		duration: string;
-		date: string;
-		imageUrl: string;
-		url: string;
-		className?: string;
-	}
-
-	let { title, host, duration, date, imageUrl, url, className = '' }: Props = $props();
-</script>
-
-<a href={url} class="block hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors">
-	<div class="flex items-start space-x-4 p-4 item">
-		<!-- Podcast Cover Image -->
-		<div class="flex-shrink-0">
-			<img src={imageUrl} alt={title} class="w-16 h-16 rounded-lg object-cover shadow-sm" />
-		</div>
-
-		<!-- Podcast Content -->
-		<div class="flex-1 min-w-0">
-			<div class="flex items-center justify-between">
-				<h3 class="text-sm font-medium text-gray-900 dark:text-gray-100 truncate">
-					{title}
-				</h3>
-				<span class="text-xs text-gray-500 dark:text-gray-400">
-					{duration}
-				</span>
-			</div>
-			<p class="text-sm text-gray-600 dark:text-gray-300 mt-1">
-				{host}
-			</p>
-			<p class="text-xs text-gray-500 dark:text-gray-400 mt-1">
-				{date}
-			</p>
-		</div>
-	</div>
-</a>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/Podcasts.svelte b/packages/yakkl-wallet/src/lib/components/v1/Podcasts.svelte
deleted file mode 100644
index 1c18132..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/Podcasts.svelte
+++ /dev/null
@@ -1,131 +0,0 @@
-<!-- File: src/lib/components/Podcasts.svelte -->
-<script lang="ts">
-	import { onMount } from 'svelte';
-	import { log } from '$lib/managers/Logger';
-	import PodcastLineView from './PodcastLineView.svelte';
-	import ChevronDownIcon from '$lib/components/icons/ChevronDownIcon.svelte';
-	import ChevronUpIcon from '$lib/components/icons/ChevronUpIcon.svelte';
-
-	interface Props {
-		maxVisibleItems?: number;
-		className?: string;
-	}
-
-	let { maxVisibleItems = 3, className = '' }: Props = $props();
-
-	let podcasts = $state([
-		{
-			title: 'The Future of DeFi',
-			host: 'Crypto Insights',
-			duration: '45 min',
-			date: '2 days ago',
-			imageUrl: 'https://images.unsplash.com/photo-1639762681485-074b7f938ba0?w=200',
-			url: 'https://example.com/podcast/1'
-		},
-		{
-			title: 'Understanding Layer 2 Solutions',
-			host: 'Blockchain Weekly',
-			duration: '38 min',
-			date: '3 days ago',
-			imageUrl: 'https://images.unsplash.com/photo-1639762681485-074b7f938ba0?w=200',
-			url: 'https://example.com/podcast/2'
-		},
-		{
-			title: 'NFT Market Analysis',
-			host: 'Digital Assets Today',
-			duration: '52 min',
-			date: '4 days ago',
-			imageUrl: 'https://images.unsplash.com/photo-1639762681485-074b7f938ba0?w=200',
-			url: 'https://example.com/podcast/3'
-		},
-		{
-			title: 'Crypto Security Best Practices',
-			host: 'Security First',
-			duration: '41 min',
-			date: '5 days ago',
-			imageUrl: 'https://images.unsplash.com/photo-1639762681485-074b7f938ba0?w=200',
-			url: 'https://example.com/podcast/4'
-		}
-	]);
-
-	let visibleItems = $state(podcasts.slice(0, maxVisibleItems));
-	let remainingItems = $state(podcasts.slice(maxVisibleItems));
-	let isRemainingSectionCollapsed = $state(true);
-
-	// Check if we have any valid podcast items
-	const hasValidItems = podcasts.length > 0;
-
-	// Function to handle RSS feed parsing (to be implemented)
-	async function fetchPodcastFeed() {
-		try {
-			// TODO: Implement RSS feed fetching and parsing
-			// const response = await fetch('RSS_FEED_URL');
-			// const data = await response.text();
-			// Parse RSS feed and update podcastItems
-		} catch (error) {
-			console.error('Error fetching podcast feed:', error);
-		}
-	}
-
-	onMount(() => {
-		fetchPodcastFeed();
-	});
-</script>
-
-<div class={className}>
-	{#if hasValidItems}
-		<!-- Visible Items Section -->
-		<div class="space-y-0">
-			{#each visibleItems as item, index}
-				<div class="relative">
-					<PodcastLineView {...item} />
-					{#if index < visibleItems.length - 1}
-						<div class="flex justify-center">
-							<div class="w-[80%] h-[1px] bg-gray-200 dark:bg-gray-700"></div>
-						</div>
-					{/if}
-				</div>
-			{/each}
-		</div>
-
-		<!-- Remaining Items Section -->
-		{#if remainingItems.length > 0}
-			<div class="space-y-0">
-				<button
-					class="flex items-center justify-between w-full py-2 cursor-pointer"
-					onclick={() => (isRemainingSectionCollapsed = !isRemainingSectionCollapsed)}
-				>
-					<h3 class="text-sm font-medium text-gray-700 dark:text-gray-300">
-						{remainingItems.length} More Episodes
-					</h3>
-					<div class="text-gray-500 dark:text-gray-400">
-						{#if isRemainingSectionCollapsed}
-							<ChevronDownIcon className="w-4 h-4" />
-						{:else}
-							<ChevronUpIcon className="w-4 h-4" />
-						{/if}
-					</div>
-				</button>
-
-				{#if !isRemainingSectionCollapsed}
-					<div class="space-y-0">
-						{#each remainingItems as item, index}
-							<div class="relative">
-								<PodcastLineView {...item} />
-								{#if index < remainingItems.length - 1}
-									<div class="flex justify-center">
-										<div class="w-[80%] h-[1px] bg-gray-200 dark:bg-gray-700"></div>
-									</div>
-								{/if}
-							</div>
-						{/each}
-					</div>
-				{/if}
-			</div>
-		{/if}
-	{:else}
-		<div class="flex items-center justify-center p-4 text-gray-500 dark:text-gray-400">
-			<p class="text-sm">No podcast episodes available at this time</p>
-		</div>
-	{/if}
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/PortfolioTotal.svelte b/packages/yakkl-wallet/src/lib/components/v1/PortfolioTotal.svelte
deleted file mode 100644
index 3f64d77..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/PortfolioTotal.svelte
+++ /dev/null
@@ -1,506 +0,0 @@
-<!-- PortfolioTotal.svelte -->
-<script lang="ts">
-	import { onMount, onDestroy } from 'svelte';
-	import { yakklCombinedTokenStore, yakklCurrentlySelectedStore, yakklPricingStore, getSettings } from '$lib/common/stores';
-	import { shouldShowProFeatures } from '$lib/common/token-analytics';
-	import { tokenTotals } from '$lib/common/stores/tokenTotals';
-	import type { TokenData, Settings } from '$lib/common/interfaces';
-	import { PlanType } from '$lib/common/types';
-	import { formatEther } from '$lib/utilities/utilities';
-	import { log } from '$lib/managers/Logger';
-	import ProtectedValue from './ProtectedValue.svelte';
-	import SimpleTooltip from './SimpleTooltip.svelte';
-
-	interface Props {
-		className?: string;
-		showDetails?: boolean;
-		currency?: string;
-	}
-
-	let {
-		className = '',
-		showDetails = false,
-		currency = 'USD'
-	}: Props = $props();
-
-	// Ensure currency is always a valid code
-	let validCurrency = $derived(currency && currency.length === 3 ? currency : 'USD');
-
-	let totalPortfolioValue = $state(0);
-	let portfolioBreakdown = $state<Array<{token: TokenData, value: number, percentage: number}>>([]);
-	let isCalculating = $state(false);
-	let showTooltip = $state(false);
-	let error = $state('');
-	let lastUpdated = $state('');
-	let settings: Settings | null = null;
-	let isBasicMember = $state(true);
-	let hasInitialLoad = $state(false);
-
-	// Currency formatter - use reactive statement to handle currency changes
-	let currencyFormatter = $state<Intl.NumberFormat>();
-
-	$effect(() => {
-		try {
-			currencyFormatter = new Intl.NumberFormat('en-US', {
-				style: 'currency',
-				currency: validCurrency,
-				minimumFractionDigits: 2,
-				maximumFractionDigits: 2
-			});
-		} catch (error) {
-			log.warn('[PortfolioTotal] Invalid currency code, falling back to USD:', false, { currency: validCurrency, error });
-			currencyFormatter = new Intl.NumberFormat('en-US', {
-				style: 'currency',
-				currency: 'USD',
-				minimumFractionDigits: 2,
-				maximumFractionDigits: 2
-			});
-		}
-	});
-
-	// Percentage formatter
-	const percentFormatter = new Intl.NumberFormat('en-US', {
-		style: 'percent',
-		minimumFractionDigits: 1,
-		maximumFractionDigits: 1
-	});
-
-	// Auto-refresh interval
-	let refreshInterval: number | null = null;
-
-	// Use the same reactive tokenTotals store as Card.svelte
-	$effect(() => {
-		const totals = $tokenTotals;
-		totalPortfolioValue = totals.portfolioTotal;
-		
-		// Create breakdown from current tokens for tooltip
-		const tokens = $yakklCombinedTokenStore;
-		if (tokens && tokens.length > 0) {
-			const breakdown: Array<{token: TokenData, value: number, percentage: number}> = [];
-			let totalValue = totals.portfolioTotal;
-
-			tokens.forEach(token => {
-				if (token.balance && token.price?.price) {
-					let balanceNum: number;
-					if (typeof token.balance === 'bigint') {
-						balanceNum = Number(token.balance) / Math.pow(10, token.decimals || 18);
-					} else {
-						balanceNum = Number(token.balance);
-					}
-					
-					const tokenValue = balanceNum * token.price.price;
-					if (tokenValue > 0) {
-						breakdown.push({
-							token,
-							value: tokenValue,
-							percentage: totalValue > 0 ? tokenValue / totalValue : 0
-						});
-					}
-				}
-			});
-
-			// Add native ETH if exists
-			const currentlySelected = $yakklCurrentlySelectedStore;
-			const ethPrice = $yakklPricingStore?.price || 0;
-			if (currentlySelected?.shortcuts?.quantity && ethPrice > 0) {
-				const ethBalance = parseFloat(formatEther(currentlySelected.shortcuts.quantity));
-				const ethValue = ethBalance * ethPrice;
-				if (ethValue > 0) {
-					breakdown.push({
-						token: {
-							name: 'Ethereum',
-							symbol: 'ETH',
-							address: '0x0000000000000000000000000000000000000000',
-							decimals: 18,
-							chainId: 1,
-							balance: currentlySelected.shortcuts.quantity,
-							price: { price: ethPrice, provider: 'pricing-store', lastUpdated: new Date(), chainId: 1 },
-							portfolioIncluded: true,
-							blockchain: 'ethereum',
-							isNative: true
-						} as TokenData,
-						value: ethValue,
-						percentage: totalValue > 0 ? ethValue / totalValue : 0
-					});
-				}
-			}
-
-			breakdown.sort((a, b) => b.value - a.value);
-			portfolioBreakdown = breakdown;
-		}
-		
-		lastUpdated = new Date().toLocaleTimeString();
-		hasInitialLoad = true;
-	});
-
-	onMount(async () => {
-		// Load settings to check membership
-		settings = await getSettings();
-		isBasicMember = !shouldShowProFeatures(settings?.plan?.type || PlanType.BASIC_MEMBER);
-	});
-
-	onDestroy(() => {
-		if (refreshInterval) {
-			clearInterval(refreshInterval);
-		}
-		if (tooltipTimeout) {
-			clearTimeout(tooltipTimeout);
-		}
-	});
-
-	// Portfolio now updates reactively via tokenTotals store
-
-	let tooltipTimeout: number | null = null;
-	let isHoveringTooltip = $state(false);
-	let isHoveringTrigger = $state(false);
-	let isManualRefreshing = $state(false);
-	let lastManualRefresh = $state(0);
-	let refreshCooldown = $state(0);
-
-	// Show tooltip when hovering over trigger
-	$effect(() => {
-		if (isHoveringTrigger) {
-			showTooltip = true;
-		}
-	});
-
-	// Hide tooltip when not hovering over either trigger or tooltip
-	$effect(() => {
-		if (!isHoveringTrigger && !isHoveringTooltip) {
-			// Small delay to allow smooth transition between elements
-			if (tooltipTimeout) clearTimeout(tooltipTimeout);
-			tooltipTimeout = setTimeout(() => {
-				showTooltip = false;
-			}, 50) as unknown as number;
-		} else if (tooltipTimeout) {
-			clearTimeout(tooltipTimeout);
-			tooltipTimeout = null;
-		}
-	});
-
-	function handleMouseEnter() {
-		isHoveringTrigger = true;
-	}
-
-	function handleMouseLeave() {
-		isHoveringTrigger = false;
-	}
-
-	function handleTooltipMouseEnter() {
-		isHoveringTooltip = true;
-	}
-
-	function handleTooltipMouseLeave() {
-		isHoveringTooltip = false;
-	}
-
-	function getTokenDisplayName(token: TokenData): string {
-		if (token.isNative) {
-			return token.name;
-		}
-		return token.alias || token.name;
-	}
-
-	// Manual refresh with debouncing (Pro users only)
-	async function handleManualRefresh() {
-		if (!isBasicMember && !isManualRefreshing) {
-			const now = Date.now();
-			const timeSinceLastRefresh = now - lastManualRefresh;
-			const minInterval = 15000; // 15 seconds minimum between manual refreshes
-
-			if (timeSinceLastRefresh < minInterval) {
-				refreshCooldown = Math.ceil((minInterval - timeSinceLastRefresh) / 1000);
-				const cooldownInterval = setInterval(() => {
-					refreshCooldown--;
-					if (refreshCooldown <= 0) {
-						clearInterval(cooldownInterval);
-					}
-				}, 1000);
-				return;
-			}
-
-			isManualRefreshing = true;
-			lastManualRefresh = now;
-			
-			try {
-				// Force refresh of token data
-				// This would trigger a refresh of yakklCombinedTokenStore and pricing data
-				log.debug('Manual portfolio refresh triggered', false);
-				
-				// Simulate refresh time
-				await new Promise(resolve => setTimeout(resolve, 1000));
-				
-				// The reactive tokenTotals store will automatically update
-				lastUpdated = new Date().toLocaleTimeString();
-				
-			} catch (error) {
-				log.error('Manual refresh failed:', false, error);
-			} finally {
-				isManualRefreshing = false;
-			}
-		}
-	}
-
-	// Check if manual refresh is available
-	const canManualRefresh = $derived(() => {
-		if (isBasicMember || isManualRefreshing) return false;
-		const timeSinceLastRefresh = Date.now() - lastManualRefresh;
-		return timeSinceLastRefresh >= 15000; // 15 seconds cooldown
-	});
-</script>
-
-<div class="relative inline-block {className}">
-	<!-- Main Portfolio Display -->
-	<div
-		class="group cursor-pointer"
-		role="button"
-		tabindex="0"
-		onmouseenter={handleMouseEnter}
-		onmouseleave={handleMouseLeave}
-		onfocus={handleMouseEnter}
-		onblur={handleMouseLeave}
-	>
-		<div class="flex items-center gap-2 p-3 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105">
-			<!-- Portfolio Icon -->
-			<div class="flex-shrink-0">
-				<svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
-					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"></path>
-				</svg>
-			</div>
-
-			<!-- Portfolio Value -->
-			<div class="flex-1 min-w-0">
-				<div class="text-white text-sm font-medium opacity-90">Total Portfolio</div>
-				<div class="text-white text-lg font-bold">
-					{#if isCalculating}
-						<div class="flex items-center gap-2">
-							<div class="animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"></div>
-							<span class="text-sm">Calculating...</span>
-						</div>
-					{:else if error}
-						<span class="text-red-200 text-sm">Error</span>
-					{:else}
-						<ProtectedValue
-							value={currencyFormatter ? currencyFormatter.format(totalPortfolioValue) : `$${totalPortfolioValue.toFixed(2)}`}
-							placeholder="*****"
-						/>
-					{/if}
-				</div>
-			</div>
-
-			<!-- Auto-refresh indicator -->
-			{#if hasInitialLoad && !isCalculating}
-				<div class="flex-shrink-0">
-					<SimpleTooltip content={isBasicMember ? "Auto-refreshes every 5 minutes" : "Auto-refreshes every minute"}>
-						<div class="text-white/80 p-1 flex items-center gap-1">
-							<div class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
-							<span class="text-xs">Auto</span>
-						</div>
-					</SimpleTooltip>
-				</div>
-			{/if}
-
-			<!-- Last Updated Indicator -->
-			{#if lastUpdated && !isCalculating}
-				<div class="flex-shrink-0 text-white text-xs opacity-75">
-					{lastUpdated}
-				</div>
-			{/if}
-
-			<!-- Manual Refresh Button (Pro users only) -->
-			{#if !isBasicMember}
-				<div class="flex-shrink-0">
-					<SimpleTooltip content={refreshCooldown > 0 ? `Wait ${refreshCooldown}s before next refresh` : canManualRefresh ? "Manual refresh (Pro feature)" : "Refreshing..."}>
-						<button
-							onclick={handleManualRefresh}
-							disabled={!canManualRefresh}
-							class="p-1 text-white/80 hover:text-white hover:bg-white/10 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
-						>
-							{#if isManualRefreshing}
-								<div class="animate-spin w-3 h-3 border border-white border-t-transparent rounded-full"></div>
-							{:else if refreshCooldown > 0}
-								<span class="text-xs font-medium">{refreshCooldown}</span>
-							{:else}
-								<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
-									<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
-								</svg>
-							{/if}
-						</button>
-					</SimpleTooltip>
-				</div>
-			{/if}
-		</div>
-	</div>
-
-	<!-- Detailed Tooltip -->
-	{#if showTooltip && portfolioBreakdown.length > 0}
-		<div 
-			class="absolute z-50 w-80 p-4 mt-2 bg-white rounded-lg shadow-xl border border-gray-200 left-0 top-full"
-			role="tooltip"
-			aria-label="Portfolio breakdown details"
-			onmouseenter={handleTooltipMouseEnter}
-			onmouseleave={handleTooltipMouseLeave}
-		>
-			<div class="space-y-3">
-				<div class="flex items-center justify-between">
-					<h3 class="text-lg font-semibold text-gray-900">Portfolio Breakdown</h3>
-					<span class="text-sm text-gray-500">Updated: {lastUpdated}</span>
-				</div>
-
-				{#if error}
-					<div class="text-red-600 text-sm">{error}</div>
-				{:else if isBasicMember}
-					<!-- Basic Member: Show all tokens with values only (no percentages or analytics) -->
-					<div class="space-y-2 max-h-60 overflow-y-auto">
-						{#each portfolioBreakdown as item}
-							<div class="flex items-center justify-between p-2 bg-gray-50 rounded">
-								<div class="flex items-center gap-3">
-									{#if item.token.logoURI}
-										<img src={item.token.logoURI} alt={item.token.symbol} class="w-6 h-6 rounded-full" />
-									{:else}
-										<div class="w-6 h-6 bg-gray-300 rounded-full flex items-center justify-center text-xs font-bold text-gray-600">
-											{item.token.symbol.charAt(0)}
-										</div>
-									{/if}
-									<div>
-										<div class="font-medium text-gray-900">{item.token.symbol}</div>
-										<div class="text-sm text-gray-500">{getTokenDisplayName(item.token)}</div>
-									</div>
-								</div>
-								<div class="text-right">
-									<div class="font-medium text-gray-900">
-										<ProtectedValue
-											value={currencyFormatter ? currencyFormatter.format(item.value) : `$${item.value.toFixed(2)}`}
-											placeholder="*****"
-										/>
-									</div>
-									<div class="text-sm text-gray-500">
-										<!-- Skeleton with question mark for Basic users -->
-										<SimpleTooltip content="Upgrade to Pro to see portfolio percentages, yield opportunities, and advanced analytics">
-											<div class="flex items-center gap-1 cursor-help">
-												<div class="w-8 h-3 bg-gray-200 rounded animate-pulse"></div>
-												<div class="w-3 h-3 bg-gradient-to-r from-indigo-400 to-purple-400 rounded-full flex items-center justify-center hover:from-indigo-500 hover:to-purple-500 transition-colors">
-													<svg class="w-2 h-2 text-white" fill="currentColor" viewBox="0 0 20 20">
-														<path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
-													</svg>
-												</div>
-											</div>
-										</SimpleTooltip>
-									</div>
-								</div>
-							</div>
-						{/each}
-					</div>
-
-					<!-- Total for Basic users -->
-					<div class="pt-2 border-t border-gray-200">
-						<div class="flex justify-between items-center mb-2">
-							<span class="font-semibold text-gray-900">Total</span>
-							<span class="font-bold text-lg text-gray-900">
-								<ProtectedValue
-									value={currencyFormatter ? currencyFormatter.format(totalPortfolioValue) : `$${totalPortfolioValue.toFixed(2)}`}
-									placeholder="*****"
-								/>
-							</span>
-						</div>
-						
-						<div class="p-3 bg-gradient-to-r from-indigo-50 to-purple-50 border border-indigo-200 rounded-lg">
-							<div class="flex items-center gap-2">
-								<svg class="w-4 h-4 text-indigo-600" fill="currentColor" viewBox="0 0 20 20">
-									<path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
-								</svg>
-								<div class="text-xs">
-									<div class="font-medium text-indigo-900">Upgrade for full analytics</div>
-									<div class="text-indigo-700">Portfolio percentages, yield opportunities, risk analysis & more</div>
-								</div>
-							</div>
-						</div>
-					</div>
-				{:else}
-					<!-- Pro Member: Show full breakdown -->
-					<div class="space-y-2 max-h-60 overflow-y-auto">
-						{#each portfolioBreakdown as item}
-							<div class="flex items-center justify-between p-2 bg-gray-50 rounded">
-								<div class="flex items-center gap-3">
-									{#if item.token.logoURI}
-										<img src={item.token.logoURI} alt={item.token.symbol} class="w-6 h-6 rounded-full" />
-									{:else}
-										<div class="w-6 h-6 bg-gray-300 rounded-full flex items-center justify-center text-xs font-bold text-gray-600">
-											{item.token.symbol.charAt(0)}
-										</div>
-									{/if}
-									<div>
-										<div class="font-medium text-gray-900">{item.token.symbol}</div>
-										<div class="text-sm text-gray-500">{getTokenDisplayName(item.token)}</div>
-									</div>
-								</div>
-								<div class="text-right">
-									<div class="font-medium text-gray-900">
-										<ProtectedValue
-											value={currencyFormatter ? currencyFormatter.format(item.value) : `$${item.value.toFixed(2)}`}
-											placeholder="*****"
-										/>
-									</div>
-									<div class="text-sm text-gray-500">
-										<ProtectedValue
-											value={percentFormatter.format(item.percentage)}
-											placeholder="****"
-										/>
-									</div>
-								</div>
-							</div>
-						{/each}
-					</div>
-
-					<div class="pt-2 border-t border-gray-200">
-						<div class="flex justify-between items-center">
-							<span class="font-semibold text-gray-900">Total</span>
-							<span class="font-bold text-lg text-gray-900">
-								<ProtectedValue
-									value={currencyFormatter ? currencyFormatter.format(totalPortfolioValue) : `$${totalPortfolioValue.toFixed(2)}`}
-									placeholder="*****"
-								/>
-							</span>
-						</div>
-						<div class="text-sm text-gray-500 mt-1">
-							{portfolioBreakdown.length} asset{portfolioBreakdown.length === 1 ? '' : 's'} included
-						</div>
-					</div>
-				{/if}
-			</div>
-		</div>
-	{/if}
-
-	<!-- Optional detailed view -->
-	{#if showDetails}
-		<div class="mt-4 space-y-2">
-			{#each portfolioBreakdown as item}
-				<div class="flex items-center justify-between p-2 bg-gray-100 rounded">
-					<span class="font-medium">{item.token.symbol}</span>
-					<span>
-						<ProtectedValue
-							value={currencyFormatter ? currencyFormatter.format(item.value) : `$${item.value.toFixed(2)}`}
-							placeholder="*****"
-						/>
-					</span>
-				</div>
-			{/each}
-		</div>
-	{/if}
-</div>
-
-<style>
-	/* Custom animations */
-	@keyframes pulse-glow {
-		0%, 100% {
-			box-shadow: 0 0 5px rgba(99, 102, 241, 0.3);
-		}
-		50% {
-			box-shadow: 0 0 20px rgba(99, 102, 241, 0.6), 0 0 30px rgba(99, 102, 241, 0.3);
-		}
-	}
-
-	.group:hover {
-		animation: pulse-glow 2s infinite;
-	}
-</style>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/PriceTracker.svelte b/packages/yakkl-wallet/src/lib/components/v1/PriceTracker.svelte
deleted file mode 100644
index 0f26b65..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/PriceTracker.svelte
+++ /dev/null
@@ -1,73 +0,0 @@
-<script lang="ts">
-	import { onMount, onDestroy } from 'svelte';
-	import type { PriceProvider } from '$lib/common/interfaces';
-	import { CoinbasePriceProvider } from '$lib/managers/providers/price/coinbase/CoinbasePriceProvider';
-	import { getTimerManager } from '$lib/managers/TimerManager';
-	import { priceStore } from '$lib/common/stores';
-	import { log } from '$lib/managers/Logger';
-	import { TIMER_PRICE_INTERVAL_TIME } from '$lib/common';
-
-	interface Props {
-		symbol: string; // In a swap this would be the fromToken
-		currency: string; // In a swap this would be the toToken
-		providers?: PriceProvider[];
-		updateInterval?: number;
-		children?: import('svelte').Snippet<[any]>;
-	}
-
-	let {
-		symbol,
-		currency,
-		providers = $bindable([new CoinbasePriceProvider()]), // Defaults to Coinbase but the passed in providers should have priority with more than one
-		updateInterval = TIMER_PRICE_INTERVAL_TIME, // milliseconds
-		children
-	}: Props = $props();
-
-	// priceStore is passed to the children layout below - export is not needed but adding it for clarity and possible clean up
-	// export const priceStore = writable<MarketPriceData | null>(null);
-	// let interval: NodeJS.Timeout;
-
-	async function updatePrice() {
-		try {
-			for (const provider of providers) {
-				try {
-					const priceData = await provider.getMarketPrice(`${symbol}-${currency}`);
-					if (priceData === null) {
-						log.info(
-							`PriceTracker - fetched no price from ${provider.getName()}: ${symbol}-${currency}`
-						);
-						continue;
-					}
-					priceStore.set(priceData);
-					break;
-				} catch (error) {
-					log.error(`Error fetching price from ${provider.getName()}:`, false, error);
-				}
-			}
-		} catch (error) {
-			log.error('PriceTracker:', false, error);
-		}
-	}
-
-	onMount(() => {
-		try {
-			if (providers.length === 0) {
-				providers = [new CoinbasePriceProvider()]; // Fallback to Coinbase if no providers are passed
-			}
-
-			updatePrice();
-			// Add and start timer
-			getTimerManager().addTimer('priceTracker_updatePrice', updatePrice, updateInterval);
-			getTimerManager().startTimer('priceTracker_updatePrice');
-		} catch (error) {
-			log.error(error);
-		}
-	});
-
-	onDestroy(() => {
-		getTimerManager().stopTimer('priceTracker_updatePrice');
-		priceStore.set(null);
-	});
-</script>
-
-{@render children?.({ price: $priceStore })}
diff --git a/packages/yakkl-wallet/src/lib/components/v1/Profile.svelte b/packages/yakkl-wallet/src/lib/components/v1/Profile.svelte
deleted file mode 100644
index 9e5a4b7..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/Profile.svelte
+++ /dev/null
@@ -1,569 +0,0 @@
-<!-- Profile.svelte -->
-<script lang="ts">
-	import { createForm } from 'svelte-forms-lib';
-	import * as yup from 'yup';
-	import Modal from './Modal.svelte';
-	import Avatar from './Avatar.svelte';
-	import ErrorNoAction from './ErrorNoAction.svelte';
-	import { getProfile, setProfileStorage, yakklMiscStore } from '$lib/common/stores';
-	import { log } from '$lib/common/logger-wrapper';
-	import type { Profile, ProfileData } from '$lib/common/interfaces';
-	import { decryptData, encryptData } from '$lib/common/encryption';
-	import { isEncryptedData } from '$lib/common/misc';
-	import { identicon } from '$lib/utilities';
-
-	interface Props {
-		show?: boolean;
-		onClose?: () => void;
-		onComplete?: () => void;
-	}
-
-	let {
-		show = $bindable(false),
-		onClose = () => (show = false),
-		onComplete = () => {}
-	}: Props = $props();
-
-	let profile: Profile | null = $state(null);
-	let profileData: ProfileData | null = $state(null);
-	let isLoading = $state(false);
-	let isSaving = $state(false);
-	let error = $state('');
-	let success = $state('');
-	let previewAvatarUrl = $state('');
-	let hasChanges = $state(false);
-	let showError = $state(false);
-	let errorValue = $state('');
-
-	// Form validation schema
-	const validationSchema = yup.object().shape({
-		userName: yup
-			.string()
-			.required('Username is required')
-			.min(3, 'Username must be at least 3 characters')
-			.max(30, 'Username must be less than 30 characters')
-			.matches(/^[a-zA-Z0-9_-]+$/, 'Username can only contain letters, numbers, underscores, and dashes'),
-		firstName: yup
-			.string()
-			.required('First name is required')
-			.min(1, 'First name is required')
-			.max(50, 'First name must be less than 50 characters'),
-		lastName: yup
-			.string()
-			.required('Last name is required')
-			.min(1, 'Last name is required')
-			.max(50, 'Last name must be less than 50 characters'),
-		email: yup
-			.string()
-			.email('Must be a valid email address')
-			.required('Email address is required'),
-		bio: yup
-			.string()
-			.max(500, 'Bio must be less than 500 characters')
-			.optional(),
-		website: yup
-			.string()
-			.url('Must be a valid URL')
-			.optional()
-			.nullable()
-			.transform((value) => (value === '' ? null : value)),
-		avatarUrl: yup
-			.string()
-			.url('Must be a valid URL')
-			.optional()
-			.nullable()
-			.transform((value) => (value === '' ? null : value))
-	});
-
-	// Initialize form
-	const { form, errors, isValid, touched, updateField } = createForm({
-		initialValues: {
-			userName: '',
-			firstName: '',
-			lastName: '',
-			email: '',
-			bio: '',
-			website: '',
-			avatarUrl: ''
-		},
-		validationSchema,
-		onSubmit: async (values) => {
-			await saveProfile(values);
-		}
-	});
-
-	// Custom submit handler for Svelte 5
-	async function handleFormSubmit(event: Event) {
-		event.preventDefault();
-		
-		// Validate the form
-		if (!$isValid) {
-			return;
-		}
-		
-		// Call saveProfile directly with form values
-		await saveProfile($form);
-	}
-
-	// Load profile data on mount and when modal opens
-	$effect(() => {
-		if (show) {
-			loadProfileData();
-		}
-	});
-
-	// Track form changes
-	$effect(() => {
-		if (profile && profileData && !isLoading) {
-			const currentValues = $form;
-			// Only track changes if form has been properly initialized
-			const originalValues = {
-				userName: profile.userName || '',
-				firstName: profileData.name?.first || '',
-				lastName: profileData.name?.last || '',
-				email: profileData.email || '',
-				bio: profileData?.bio as string || '',
-				website: profileData?.website as string || '',
-				avatarUrl: profileData?.avatarUrl as string || ''
-			};
-
-			hasChanges =
-				currentValues.userName !== originalValues.userName ||
-				currentValues.firstName !== originalValues.firstName ||
-				currentValues.lastName !== originalValues.lastName ||
-				currentValues.email !== originalValues.email ||
-				currentValues.bio !== originalValues.bio ||
-				currentValues.website !== originalValues.website ||
-				currentValues.avatarUrl !== originalValues.avatarUrl;
-
-		} else {
-			hasChanges = false;
-		}
-	});
-
-	// Update preview avatar when URL changes
-	$effect(() => {
-		const avatarUrl = $form.avatarUrl;
-		if (avatarUrl && avatarUrl.trim() !== '') {
-			previewAvatarUrl = avatarUrl;
-		} else {
-			previewAvatarUrl = profileData?.avatarUrl as string || identicon(profile?.userName || 'default');
-		}
-	});
-
-	async function loadProfileData() {
-		isLoading = true;
-		error = '';
-
-		try {
-			profile = await getProfile();
-			if (!profile) {
-				error = 'Profile not found';
-				return;
-			}
-
-			// Decrypt profile data if encrypted
-			if (isEncryptedData(profile.data)) {
-				const miscStore = $yakklMiscStore;
-				if (!miscStore) {
-					error = 'Unable to decrypt profile data';
-					return;
-				}
-				profileData = await decryptData(profile.data, miscStore) as ProfileData;
-			} else {
-				profileData = profile.data as ProfileData;
-			}
-
-			// Update form with profile data
-			updateField('userName', profile.userName || '');
-			updateField('firstName', profileData.name?.first || '');
-			updateField('lastName', profileData.name?.last || '');
-			updateField('email', profileData.email || '');
-			updateField('bio', profileData?.bio as string || '');
-			updateField('website', profileData?.website as string || '');
-			updateField('avatarUrl', profileData?.avatarUrl as string || '');
-
-		} catch (e) {
-			log.error('Error loading profile data:', false, e);
-			error = 'Failed to load profile data';
-		} finally {
-			isLoading = false;
-		}
-	}
-
-	async function saveProfile(values: any) {
-
-		if (!profile || !profileData) {
-			error = 'Profile data not loaded';
-			return;
-		}
-
-		isSaving = true;
-		error = '';
-		success = '';
-
-		try {
-			log.info('[Profile] Starting save with values:', false, values);
-			log.info('[Profile] Current state:', false, {
-				profile: !!profile,
-				profileData: !!profileData,
-				miscStore: !!$yakklMiscStore
-			});
-
-			// Check if we can encrypt before proceeding
-			const miscStore = $yakklMiscStore;
-			if (!miscStore) {
-				const errorMsg = 'Unable to encrypt profile data - missing encryption key';
-				log.error('[Profile] ' + errorMsg, false);
-				error = errorMsg;
-				errorValue = errorMsg;
-				showError = true;
-				isSaving = false;
-				return;
-			}
-
-			// Update profile data
-			const updatedProfileData: ProfileData = {
-				...profileData,
-				name: {
-					id: profile.id,
-					persona: profile.persona,
-					first: values.firstName || '',
-					last: values.lastName || ''
-				},
-				email: values.email || '',
-				bio: values.bio || '',
-				website: values.website || '',
-				avatarUrl: values.avatarUrl || ''
-			};
-
-			log.info('[Profile] Created updated profile data:', false, updatedProfileData);
-
-			// Update profile
-			const updatedProfile: Profile = {
-				...profile,
-				userName: values.userName,
-				data: updatedProfileData,
-				updateDate: new Date().toISOString()
-			};
-
-			log.info('[Profile] Created updated profile:', false, {
-				userName: updatedProfile.userName,
-				updateDate: updatedProfile.updateDate
-			});
-
-			// Encrypt the data
-			log.info('[Profile] Starting encryption...');
-			try {
-				updatedProfile.data = await encryptData(updatedProfileData, miscStore);
-				log.info('[Profile] Encryption successful');
-			} catch (encryptError: any) {
-				const errorMsg = 'Failed to encrypt profile data: ' + encryptError.message;
-				log.error('[Profile] Encryption failed:', false, encryptError);
-				error = errorMsg;
-				errorValue = errorMsg;
-				showError = true;
-				isSaving = false;
-				return;
-			}
-
-			// Save to storage
-			log.info('[Profile] Starting storage save...');
-			try {
-				await setProfileStorage(updatedProfile);
-				log.info('[Profile] Storage save successful');
-			} catch (saveError: any) {
-				const errorMsg = 'Failed to save profile to storage: ' + saveError.message;
-				log.error('[Profile] Storage failed:', false, saveError);
-				error = errorMsg;
-				errorValue = errorMsg;
-				showError = true;
-				isSaving = false;
-				return;
-			}
-
-			// Update the local profile and profileData references to reflect saved state
-			// Keep profile.data unencrypted for local comparison purposes
-			profile = {
-				...updatedProfile,
-				data: updatedProfileData
-			};
-			profileData = updatedProfileData;
-
-			success = 'Profile updated successfully!';
-			hasChanges = false;
-
-			log.info('[Profile] Profile saved successfully, state updated:', false, {
-				hasChanges,
-				profile: profile.userName,
-				profileData: profileData.name
-			});
-
-			// Call completion callback
-			onComplete();
-
-			// Close modal with a small delay to ensure state updates complete
-			log.info('[Profile] Preparing to close modal after successful save');
-			
-			// Use setTimeout to ensure state updates are complete
-			setTimeout(() => {
-				show = false;
-				isSaving = false;
-			}, 100);
-
-		} catch (e: any) {
-			const errorMsg = 'Failed to save profile changes: ' + e.message;
-			log.error('[Profile] Unexpected error saving profile:', false, e);
-			error = errorMsg;
-			errorValue = errorMsg;
-			showError = true;
-			isSaving = false;
-		}
-	}
-
-	function handleClose() {
-		if (hasChanges) {
-			if (confirm('You have unsaved changes. Are you sure you want to close?')) {
-				show = false;
-				onClose();
-			}
-		} else {
-			show = false;
-			onClose();
-		}
-	}
-
-	function resetForm() {
-		if (profile && profileData) {
-			updateField('userName', profile.userName || '');
-			updateField('firstName', profileData.name?.first || '');
-			updateField('lastName', profileData.name?.last || '');
-			updateField('email', profileData.email || '');
-			updateField('bio', profileData?.bio as string || '');
-			updateField('website', profileData?.website as string || '');
-			updateField('avatarUrl', profileData?.avatarUrl as string || '');
-		}
-	}
-
-	function handleErrorClose() {
-		showError = false;
-		error = '';
-		errorValue = '';
-	}
-</script>
-
-<Modal bind:show title="Profile" onClose={handleClose} className="max-w-2xl">
-	<div class="space-y-6 p-6">
-		{#if isLoading}
-			<div class="flex items-center justify-center py-8">
-				<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"></div>
-				<span class="ml-2 text-gray-600">Loading profile...</span>
-			</div>
-		{:else}
-			<form onsubmit={handleFormSubmit} class="space-y-6">
-				<!-- Avatar Section -->
-				<div class="flex flex-col items-center space-y-4">
-					<div class="text-center">
-						<Avatar
-							url={previewAvatarUrl}
-							userName={$form.firstName || $form.userName}
-							className="w-24 h-24 rounded-full ring-4 ring-offset-2 ring-indigo-500"
-							ariaLabel="Profile Avatar"
-						/>
-					</div>
-
-					<div class="w-full">
-						<label for="avatarUrl" class="block text-sm font-medium text-gray-700 mb-1">
-							Avatar URL (optional)
-						</label>
-						<input
-							id="avatarUrl"
-							type="url"
-							bind:value={$form.avatarUrl}
-							placeholder="https://example.com/your-avatar.jpg"
-							class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
-							class:border-red-500={$errors.avatarUrl && $touched.avatarUrl}
-						/>
-						{#if $errors.avatarUrl && $touched.avatarUrl}
-							<p class="mt-1 text-sm text-red-600">{$errors.avatarUrl}</p>
-						{/if}
-					</div>
-				</div>
-
-				<!-- Basic Information -->
-				<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
-					<div>
-						<label for="userName" class="block text-sm font-medium text-gray-700 mb-1">
-							Username <span class="text-red-500">*</span>
-						</label>
-						<input
-							id="userName"
-							type="text"
-							bind:value={$form.userName}
-							placeholder="your_username"
-							class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
-							class:border-red-500={$errors.userName && $touched.userName}
-						/>
-						{#if $errors.userName && $touched.userName}
-							<p class="mt-1 text-sm text-red-600">{$errors.userName}</p>
-						{/if}
-					</div>
-
-					<div>
-						<label for="email" class="block text-sm font-medium text-gray-700 mb-1">
-							Email <span class="text-red-500">*</span>
-						</label>
-						<input
-							id="email"
-							type="email"
-							bind:value={$form.email}
-							placeholder="your@email.com"
-							class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
-							class:border-red-500={$errors.email && $touched.email}
-						/>
-						{#if $errors.email && $touched.email}
-							<p class="mt-1 text-sm text-red-600">{$errors.email}</p>
-						{/if}
-					</div>
-				</div>
-
-				<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
-					<div>
-						<label for="firstName" class="block text-sm font-medium text-gray-700 mb-1">
-							First Name <span class="text-red-500">*</span>
-						</label>
-						<input
-							id="firstName"
-							type="text"
-							bind:value={$form.firstName}
-							placeholder="John"
-							class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
-							class:border-red-500={$errors.firstName && $touched.firstName}
-						/>
-						{#if $errors.firstName && $touched.firstName}
-							<p class="mt-1 text-sm text-red-600">{$errors.firstName}</p>
-						{/if}
-					</div>
-
-					<div>
-						<label for="lastName" class="block text-sm font-medium text-gray-700 mb-1">
-							Last Name <span class="text-red-500">*</span>
-						</label>
-						<input
-							id="lastName"
-							type="text"
-							bind:value={$form.lastName}
-							placeholder="Doe"
-							class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
-							class:border-red-500={$errors.lastName && $touched.lastName}
-						/>
-						{#if $errors.lastName && $touched.lastName}
-							<p class="mt-1 text-sm text-red-600">{$errors.lastName}</p>
-						{/if}
-					</div>
-				</div>
-
-				<!-- Optional Fields -->
-				<div>
-					<label for="website" class="block text-sm font-medium text-gray-700 mb-1">
-						Website (optional)
-					</label>
-					<input
-						id="website"
-						type="url"
-						bind:value={$form.website}
-						placeholder="https://your-website.com"
-						class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
-						class:border-red-500={$errors.website && $touched.website}
-					/>
-					{#if $errors.website && $touched.website}
-						<p class="mt-1 text-sm text-red-600">{$errors.website}</p>
-					{/if}
-				</div>
-
-				<div>
-					<label for="bio" class="block text-sm font-medium text-gray-700 mb-1">
-						Bio (optional)
-					</label>
-					<textarea
-						id="bio"
-						bind:value={$form.bio}
-						rows="3"
-						placeholder="Tell us about yourself..."
-						class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
-						class:border-red-500={$errors.bio && $touched.bio}
-					></textarea>
-					{#if $errors.bio && $touched.bio}
-						<p class="mt-1 text-sm text-red-600">{$errors.bio}</p>
-					{/if}
-					<p class="mt-1 text-sm text-gray-500">{($form.bio || '').length}/500 characters</p>
-				</div>
-
-				<!-- Status Messages -->
-				{#if error}
-					<div class="rounded-md bg-red-50 p-4">
-						<p class="text-sm font-medium text-red-800">{error}</p>
-					</div>
-				{/if}
-
-				{#if success}
-					<div class="rounded-md bg-green-50 p-4">
-						<p class="text-sm font-medium text-green-800">{success}</p>
-					</div>
-				{/if}
-
-				<!-- Form Actions -->
-				<div class="flex justify-between pt-5">
-					<button
-						type="button"
-						onclick={resetForm}
-						class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
-						disabled={!hasChanges || isSaving}
-					>
-						Reset
-					</button>
-
-					<div class="flex space-x-3">
-						<button
-							type="button"
-							onclick={handleClose}
-							class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
-							disabled={isSaving}
-						>
-							Cancel
-						</button>
-
-						<button
-							type="submit"
-							class="px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"
-							disabled={!$isValid || !hasChanges || isSaving}
-						>
-							{#if isSaving}
-								<span class="flex items-center">
-									<div class="animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"></div>
-									Saving...
-								</span>
-							{:else}
-								Save Changes
-							{/if}
-						</button>
-					</div>
-				</div>
-
-				<!-- Last Updated Info -->
-				{#if profile?.updateDate}
-					<div class="text-xs text-gray-500 text-center pt-2 border-t">
-						Last updated: {new Date(profile.updateDate).toLocaleString()}
-					</div>
-				{/if}
-			</form>
-		{/if}
-	</div>
-</Modal>
-
-<ErrorNoAction
-	bind:show={showError}
-	value={errorValue}
-	title="Profile Save Error"
-	onClose={handleErrorClose}
-/>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/Profile.sveltetmp b/packages/yakkl-wallet/src/lib/components/v1/Profile.sveltetmp
deleted file mode 100644
index a175f10..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/Profile.sveltetmp
+++ /dev/null
@@ -1,127 +0,0 @@
-<script lang="ts">
-  import { onMount } from 'svelte';
-  import * as yup from 'yup';
-  //import * as Sheet from "$lib/components/ui/sheet";
-  //import { Button } from "$lib/components/ui/button";
-  //import { Input } from "$lib/components/ui/input";
-  //import { Label } from "$lib/components/ui/label";
-  import { profileStore, yakklPreferencesStore } from '$lib/common/stores';
-  import type { Profile, ProfileData } from '$lib/common/interfaces';
-  // import type { BuilderReturn } from '@melt-ui/svelte';
-
-  let profile: Profile = $state();
-  let profileData: ProfileData = $state();
-
-  onMount(() => {
-    const unsubscribe = profileStore.subscribe(value => {
-      profile = value;
-      if (profile.data instanceof Promise) {
-        profile.data.then(data => {
-          profileData = data;
-        });
-      } else if (typeof profile.data === 'object' && !('data' in profile.data)) {
-        profileData = profile.data as ProfileData;
-      }
-    });
-
-    return unsubscribe;
-  });
-
-  const profileSchema = yup.object().shape({
-    userName: yup.string().required('Username is required').min(3, 'Username must be at least 3 characters'),
-    name: yup.object().shape({
-      prefix: yup.string(),
-      first: yup.string().required('First name is required'),
-      middle: yup.string(),
-      last: yup.string().required('Last name is required'),
-      suffix: yup.string(),
-    }),
-    email: yup.string().email('Invalid email address').required('Email is required'),
-  });
-
-  let errors: { [key: string]: string } = $state({});
-
-  async function validateForm() {
-    try {
-      await profileSchema.validate({
-        userName: profile.userName,
-        name: profileData.name,
-        email: profileData.email,
-      }, { abortEarly: false });
-      errors = {};
-      return true;
-    } catch (error) {
-      if (error instanceof yup.ValidationError) {
-        errors = error.inner.reduce((acc, err) => {
-          if (err.path) {
-            acc[err.path] = err.message;
-          }
-          return acc;
-        }, {} as { [key: string]: string });
-      }
-      return false;
-    }
-  }
-
-  async function handleSubmit() {
-    if (await validateForm()) {
-      profile.preferences = $yakklPreferencesStore;
-      profileStore.set(profile);
-      console.log('Profile saved:', profile);
-    }
-  }
-
-  let open = $state(false);
-
-  export function openProfile() {
-    open = true;
-  }
-</script>
-
-<Sheet.Root bind:open>
-  <Sheet.Content side="right" class="w-[400px] sm:w-[540px] bg-white dark:bg-gray-800">
-    <Sheet.Header>
-      <Sheet.Title>Edit Profile</Sheet.Title>
-      <Sheet.Description>
-        Make changes to your profile here. Click save when you're done.
-      </Sheet.Description>
-    </Sheet.Header>
-    <div class="grid gap-4 py-4">
-      <div class="grid grid-cols-4 items-center gap-4">
-        <Label for="userName" class="text-right">Username</Label>
-        <Input id="userName" bind:value={profile.userName} class="col-span-3" />
-        {#if errors.userName}
-          <p class="text-red-500 text-sm col-start-2 col-span-3">{errors.userName}</p>
-        {/if}
-      </div>
-      <div class="grid grid-cols-4 items-center gap-4">
-        <Label for="firstName" class="text-right">First Name</Label>
-        <Input id="firstName" bind:value={profileData.name.first} class="col-span-3" />
-        {#if errors['name.first']}
-          <p class="text-red-500 text-sm col-start-2 col-span-3">{errors['name.first']}</p>
-        {/if}
-      </div>
-      <div class="grid grid-cols-4 items-center gap-4">
-        <Label for="lastName" class="text-right">Last Name</Label>
-        <Input id="lastName" bind:value={profileData.name.last} class="col-span-3" />
-        {#if errors['name.last']}
-          <p class="text-red-500 text-sm col-start-2 col-span-3">{errors['name.last']}</p>
-        {/if}
-      </div>
-      <div class="grid grid-cols-4 items-center gap-4">
-        <Label for="email" class="text-right">Email</Label>
-        <Input id="email" type="email" bind:value={profileData.email} class="col-span-3" />
-        {#if errors.email}
-          <p class="text-red-500 text-sm col-start-2 col-span-3">{errors.email}</p>
-        {/if}
-      </div>
-    </div>
-    <Sheet.Footer>
-      <Sheet.Close let:builder>
-        <Button {builder} type="submit" on:click={handleSubmit}>
-          Save changes
-        </Button>
-      </Sheet.Close>
-    </Sheet.Footer>
-  </Sheet.Content>
-</Sheet.Root>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/ProgressWaiting.svelte b/packages/yakkl-wallet/src/lib/components/v1/ProgressWaiting.svelte
deleted file mode 100644
index f8f5d7b..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/ProgressWaiting.svelte
+++ /dev/null
@@ -1,23 +0,0 @@
-<script lang="ts">
-	interface Props {
-		show?: boolean;
-		title?: string;
-		value?: string; // Calling this function will cause the modal to be shown and the caller should bind:show to a variable and pass it in.
-	}
-
-	let {
-		show = $bindable(false),
-		title = 'Verifying',
-		value = 'Credentials and Loading...'
-	}: Props = $props();
-</script>
-
-<div class="modal" class:modal-open={show}>
-	<div class="modal-box relative justify-center">
-		<h3 class="text-lg font-bold">{title}</h3>
-		<p class="py-4">{value}</p>
-		<div class="mt-8">
-			<progress class="progress progress-success"></progress>
-		</div>
-	</div>
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/ProtectedValue.svelte b/packages/yakkl-wallet/src/lib/components/v1/ProtectedValue.svelte
deleted file mode 100644
index f8d5800..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/ProtectedValue.svelte
+++ /dev/null
@@ -1,26 +0,0 @@
-<script lang="ts">
-	import { visibilityStore } from '$lib/common/stores/visibilityStore';
-
-	const { value, placeholder = '**********' } = $props<{
-		value: string;
-		placeholder?: string;
-	}>();
-
-	let visible = $state(true);
-
-	$effect(() => {
-		const unsubscribe = visibilityStore.subscribe((value) => {
-			visible = value;
-		});
-
-		return unsubscribe;
-	});
-</script>
-
-<span>
-	{#if visible}
-		{value}
-	{:else}
-		{placeholder}
-	{/if}
-</span>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/QR.svelte b/packages/yakkl-wallet/src/lib/components/v1/QR.svelte
deleted file mode 100644
index 75bf7c8..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/QR.svelte
+++ /dev/null
@@ -1,40 +0,0 @@
-<script lang="ts">
-	import { onMount } from 'svelte';
-	import QRCode from 'easyqrcodejs';
-
-	let { qrText } = $props();
-	export const width = 220;
-	export const height = 220;
-	// export const radius = 1;
-	let node: HTMLDivElement = $state();
-
-	onMount(() => {
-		const options = {
-			text: qrText,
-			// ... other options
-			width: 220,
-			height: 220,
-			quietZone: 20,
-			logo: '/images/logoBullFav48x48.png',
-			logoBackgroundTransparent: true
-		};
-		new QRCode(node, options);
-	});
-</script>
-
-<div class="flex mx-auto justify-center w-full h-full" bind:this={node}></div>
-
-<style>
-	/* make QR-wrapper squared */
-	/* div {
-     width: 100%;
-     position: relative;
-     padding: 50%;
-     z-index: 1;
-   } */
-
-	/* fit QR to wrapper */
-	div :global(canvas) {
-		border-radius: 1rem;
-	}
-</style>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/README.md b/packages/yakkl-wallet/src/lib/components/v1/README.md
deleted file mode 100644
index 41b02de..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/README.md
+++ /dev/null
@@ -1,22 +0,0 @@
-## Components
-
-This directory contains all the components used in the wallet application.
-
-### on... Callbacks
-
-- onComplete: Called when the user has completed the action and sending back the result. NOTE: This will have different parameters due to the different actions.
-- onCancel: Called when the user has canceled the action. This is optional and a default action will be taken if not provided. Use this to handle the cancel action in a custom way. We use this for registration since if the user does not complete the registration, we need to handle it differently.
-- onError: Called when an error occurs. This is optional and a default action will be taken if not provided. Use this to handle the error in a custom way. We use for registration since if the user does not complete the registration, we need to handle it differently.
-- onSubmit: Called when the user has submitted the form. This is optional and a default action will be taken if not provided. Use this to handle the submit action in a custom way.
-
-### Events
-
-We use events to communicate between components or when we need to trigger some action where a callback would not easily work.
-
-### Props
-
-- on:close - This is used to trigger an action such as changing 'show' to false in a modal so that it passes the show binding to the parent of the component because another action may have occurred in the child and not pass an onCancel or onComplete callback. This is used in the `Modal` component.
-
-#### Disclaimer
-
-This is a work in progress and will be updated as we go along. Also, there are a number of components are not yet documented and may not conform to the above standards. We are working on it.
diff --git a/packages/yakkl-wallet/src/lib/components/v1/RSSNewsFeed.svelte b/packages/yakkl-wallet/src/lib/components/v1/RSSNewsFeed.svelte
deleted file mode 100644
index c86a332..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/RSSNewsFeed.svelte
+++ /dev/null
@@ -1,141 +0,0 @@
-<!-- src/lib/components/RSSNewsFeed.svelte -->
-<script lang="ts">
-	// For non-extension builds, we use the RSSFeedService
-	import { onMount, onDestroy } from 'svelte';
-	import { RSSFeedService, type RSSItem, type RSSFeed } from '$lib/managers/RSSFeedService';
-	import NewsFeed from './NewsFeed.svelte';
-	import { UnifiedTimerManager } from '$lib/managers/UnifiedTimerManager';
-
-	interface Props {
-		feedUrls: string[];
-		corsProxy?: string;
-		refreshInterval?: number;
-		maxItemsPerFeed?: number;
-		maxVisibleItems?: number;
-		className?: string;
-	}
-
-	let {
-		feedUrls,
-		corsProxy = 'https://cors-anywhere.herokuapp.com/',
-		refreshInterval = 300000, // 5 minutes
-		maxItemsPerFeed = 10,
-		maxVisibleItems = 3,
-		className = ''
-	}: Props = $props();
-
-	let newsItems = $state<RSSItem[]>([]);
-	let isLoading = $state(true);
-	let error = $state<string | null>(null);
-
-	const rssService = RSSFeedService.getInstance();
-	const timerManager = UnifiedTimerManager.getInstance();
-	const timerId = 'rss-news-feed-refresh';
-
-	onMount(() => {
-		loadFeeds();
-
-		// Set up refresh interval using UnifiedTimerManager
-		if (refreshInterval > 0) {
-			timerManager.addInterval(timerId, loadFeeds, refreshInterval);
-			timerManager.startInterval(timerId);
-		}
-
-		return () => {
-			timerManager.stopInterval(timerId);
-			timerManager.removeInterval(timerId);
-		};
-	});
-
-	async function loadFeeds() {
-		isLoading = true;
-		error = null;
-
-		try {
-			const allItems: RSSItem[] = [];
-
-			// Fetch all feeds in parallel
-			const feedPromises = feedUrls.map(
-				(url: string): Promise<RSSFeed | null> =>
-					rssService.fetchFeed(url, corsProxy).catch((err: unknown): null => {
-						console.error(`Failed to fetch feed ${url}:`, err);
-						return null;
-					})
-			);
-
-			const feeds = await Promise.all(feedPromises);
-
-			// Combine and sort items from all feeds
-			feeds.forEach((feed) => {
-				if (feed) {
-					allItems.push(...feed.items.slice(0, maxItemsPerFeed));
-				}
-			});
-
-			// Sort by date (assuming the date strings can be parsed)
-			allItems.sort((a, b) => {
-				const dateA = parseRelativeDate(a.date);
-				const dateB = parseRelativeDate(b.date);
-				return dateB.getTime() - dateA.getTime();
-			});
-
-			newsItems = allItems;
-		} catch (err) {
-			error = err instanceof Error ? err.message : 'Failed to load RSS feeds';
-			console.error('RSS feed error:', err);
-		} finally {
-			isLoading = false;
-		}
-	}
-
-	function parseRelativeDate(dateStr: string): Date {
-		const now = new Date();
-
-		if (dateStr === 'Just now') {
-			return now;
-		}
-
-		const match = dateStr.match(/(\d+)\s+(minute|hour|day)s?\s+ago/);
-		if (match) {
-			const value = parseInt(match[1]);
-			const unit = match[2];
-
-			switch (unit) {
-				case 'minute':
-					return new Date(now.getTime() - value * 60 * 1000);
-				case 'hour':
-					return new Date(now.getTime() - value * 60 * 60 * 1000);
-				case 'day':
-					return new Date(now.getTime() - value * 24 * 60 * 60 * 1000);
-			}
-		}
-
-		if (dateStr === 'Yesterday') {
-			return new Date(now.getTime() - 24 * 60 * 60 * 1000);
-		}
-
-		// Default to now if we can't parse
-		return now;
-	}
-</script>
-
-<div class={className}>
-	{#if isLoading}
-		<div class="flex items-center justify-center p-8">
-			<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"></div>
-		</div>
-	{:else if error}
-		<div class="flex flex-col items-center justify-center p-8 text-red-500">
-			<p class="text-sm font-medium">Error loading news</p>
-			<p class="text-xs mt-1">{error}</p>
-			<button
-				onclick={loadFeeds}
-				class="mt-4 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 text-sm"
-			>
-				Retry
-			</button>
-		</div>
-	{:else}
-		<NewsFeed {newsItems} {maxVisibleItems} {className} />
-	{/if}
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/Receive.svelte b/packages/yakkl-wallet/src/lib/components/v1/Receive.svelte
deleted file mode 100644
index 1f61753..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/Receive.svelte
+++ /dev/null
@@ -1,90 +0,0 @@
-<!-- Receive.svelte -->
-<script lang="ts">
-	import { onMount } from 'svelte';
-	import QR from './QR.svelte';
-	import { YAKKL_ZERO_ADDRESS } from '$lib/common/constants';
-	import { yakklCurrentlySelectedStore } from '$lib/common/stores';
-	import Modal from './Modal.svelte';
-	import Copy from './Copy.svelte';
-
-	interface Props {
-		show?: boolean;
-		address?: string;
-		title?: string;
-	}
-
-	let { show = $bindable(false), address = $bindable(''), title = 'Receive' }: Props = $props();
-
-	onMount(() => {
-		if (
-			$yakklCurrentlySelectedStore &&
-			$yakklCurrentlySelectedStore.shortcuts.address !== YAKKL_ZERO_ADDRESS
-		) {
-			address = $yakklCurrentlySelectedStore.shortcuts.address;
-		}
-	});
-
-	// function copyAddress() {
-	//   navigator.clipboard.writeText(address);
-	// }
-</script>
-
-<Modal bind:show {title}>
-	<div class="p-6">
-		{#if $yakklCurrentlySelectedStore && $yakklCurrentlySelectedStore.shortcuts.address !== YAKKL_ZERO_ADDRESS}
-			<!-- Modern card layout with QR code -->
-			<div class="bg-gradient-to-br from-purple-50 to-indigo-50 rounded-xl p-6 mb-6 text-center">
-				<div class="mb-6">
-					<QR qrText={address} />
-				</div>
-				<h3 class="text-lg font-semibold text-gray-800 mb-2">Your Wallet Address</h3>
-				<p class="text-sm text-gray-600 mb-4">Share this address to receive payments</p>
-			</div>
-
-			<!-- Address display with copy button on same line -->
-			<div class="bg-white rounded-lg border border-gray-200 shadow-sm">
-				<div class="flex items-center justify-between p-4">
-					<div class="flex-1 min-w-0 mr-3">
-						<div class="text-xs font-medium text-gray-500 uppercase tracking-wide mb-1">
-							Ethereum Address
-						</div>
-						<p class="text-sm font-mono text-gray-900 truncate" title={address} id="eth-address">
-							{address}
-						</p>
-					</div>
-					<div class="flex-shrink-0">
-						<Copy target={{ value: address }} className="p-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors" />
-					</div>
-				</div>
-			</div>
-
-			<!-- Info card -->
-			<div class="mt-4 p-4 bg-blue-50 rounded-lg border border-blue-200">
-				<div class="flex items-center">
-					<div class="flex-shrink-0">
-						<svg class="w-5 h-5 text-blue-600" fill="currentColor" viewBox="0 0 20 20">
-							<path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
-						</svg>
-					</div>
-					<div class="ml-3">
-						<p class="text-sm text-blue-800">
-							<span class="font-medium">Scan the QR code</span> with your mobile wallet or 
-							<span class="font-medium">copy the address</span> to receive payments
-						</p>
-					</div>
-				</div>
-			</div>
-		{:else}
-			<!-- Empty state -->
-			<div class="text-center py-12">
-				<div class="w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center">
-					<svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
-						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z" />
-					</svg>
-				</div>
-				<h3 class="text-lg font-semibold text-gray-700 mb-2">No Portfolio Accounts</h3>
-				<p class="text-gray-500">Create at least one Portfolio account to receive payments</p>
-			</div>
-		{/if}
-	</div>
-</Modal>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/RegistrationOption.svelte b/packages/yakkl-wallet/src/lib/components/v1/RegistrationOption.svelte
deleted file mode 100644
index 88d7f60..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/RegistrationOption.svelte
+++ /dev/null
@@ -1,107 +0,0 @@
-<script lang="ts">
-	// NOTE: This is for the RegistrationOption component. The RegistrationOptionModal is only for the RegistrationOption component. Restore requires a valid account to be created first. So, removed restore from here for now.
-	import { onMount } from 'svelte';
-	import { getSettings } from '$lib/common/stores';
-	import { shouldShowProFeatures } from '$lib/common/token-analytics';
-	import { PlanType } from '$lib/common/types';
-	import type { Settings } from '$lib/common/interfaces';
-	import SimpleTooltip from './SimpleTooltip.svelte';
-
-	interface Props {
-		/// <reference types="svelte" />
-		title?: string;
-		onCreate: () => void;
-		onImport: () => void; // NOTE: import and restore will not work if there is no account created first. Need to either create a tmp account and restore or move this to another component.
-		onRestore: () => void;
-	}
-
-	let {
-		title = 'Registration/Restoration Options',
-		onCreate,
-		onImport = () => void {},
-		onRestore = () => void {}
-	}: Props = $props();
-
-	let settings: Settings | null = $state(null);
-	let isProUser = $state(false);
-
-	onMount(async () => {
-		settings = await getSettings();
-		isProUser = shouldShowProFeatures(settings?.plan?.type || PlanType.BASIC_MEMBER);
-	});
-
-	function handleRestore() {
-		if (!isProUser) return;
-		onRestore();
-	}
-</script>
-
-<div class="bg-surface-light dark:bg-surface-dark rounded-lg p-6 shadow-md">
-	<h1 class="text-2xl font-bold text-center text-primary-light dark:text-primary-dark mb-4">
-		{title}
-	</h1>
-
-	<div class="space-y-4 mb-6">
-		<p class="text-secondary-light dark:text-secondary-dark text-center">
-			Choose an option to get started with your wallet:
-		</p>
-		<ul class="list-disc list-inside text-secondary-light dark:text-secondary-dark space-y-2">
-			<li>Create a new account if this is your first time</li>
-			<!-- <li>Import an existing account if you have one</li> -->
-			<li>
-				Restore from a YAKKL Emergency Kit if you're recovering your wallet (AFTER creating the
-				initial account!)
-			</li>
-		</ul>
-	</div>
-
-	<div class="space-y-3">
-		<!-- Create New Account Button -->
-		<button
-			onclick={onCreate}
-			class="w-full py-2 px-4 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-opacity-75 transition duration-200 ease-in-out"
-		>
-			Create New Account
-		</button>
-
-		<div class="my-4 border-t border-neutral-dark dark:border-neutral-light"></div>
-
-		<!-- Import Existing Account Button -->
-		<button
-			onclick={onImport}
-			class="w-full py-2 px-4 bg-green-600 text-white font-semibold rounded-lg shadow-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-400 focus:ring-opacity-75 transition duration-200 ease-in-out"
-		>
-			Import Existing Account(s)
-		</button>
-
-		<!-- Restore from Emergency Kit Button -->
-		{#if isProUser}
-			<button
-				onclick={handleRestore}
-				class="w-full py-2 px-4 bg-red-600 text-white font-semibold rounded-lg shadow-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-400 focus:ring-opacity-75 transition duration-200 ease-in-out flex items-center justify-center gap-2"
-			>
-				<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
-					<path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4M12,6A6,6 0 0,0 6,12A6,6 0 0,0 12,18A6,6 0 0,0 18,12A6,6 0 0,0 12,6M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8Z"/>
-				</svg>
-				Restore from Emergency Kit
-			</button>
-		{:else}
-			<SimpleTooltip content="Upgrade to Pro for full Emergency Kit features">
-				<button
-					disabled
-					class="w-full py-2 px-4 bg-gray-400 text-gray-200 font-semibold rounded-lg shadow-md cursor-not-allowed transition duration-200 ease-in-out flex items-center justify-center gap-2 relative"
-				>
-					<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
-						<path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4M12,6A6,6 0 0,0 6,12A6,6 0 0,0 12,18A6,6 0 0,0 18,12A6,6 0 0,0 12,6M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8Z"/>
-					</svg>
-					Restore from Emergency Kit
-					<div class="absolute -top-1 -right-1 w-4 h-4 bg-gradient-to-r from-indigo-400 to-purple-400 rounded-full flex items-center justify-center">
-						<svg class="w-2.5 h-2.5 text-white" fill="currentColor" viewBox="0 0 20 20">
-							<path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
-						</svg>
-					</div>
-				</button>
-			</SimpleTooltip>
-		{/if}
-	</div>
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/RegistrationOptionModal.svelte b/packages/yakkl-wallet/src/lib/components/v1/RegistrationOptionModal.svelte
deleted file mode 100644
index 4c9c6c0..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/RegistrationOptionModal.svelte
+++ /dev/null
@@ -1,32 +0,0 @@
-<script lang="ts">
-	import Modal from '$lib/components/Modal.svelte';
-	import RegistrationOption from '$lib/components/RegistrationOption.svelte';
-
-	interface Props {
-		show?: boolean;
-		onCancel?: () => void;
-		onClose?: () => void;
-		onCreate: () => void;
-		onImport?: () => void; // NOTE: This is for the RegistrationOptionModal component. The RegistrationOption is only for the RegistrationOptionModal component. Restore requires a valid account to be created first. So, removed restore from here for now.
-		onRestore?: () => void; // NOTE: RegistrationOption below does not have onImport nor onRestore.
-	}
-
-	let {
-		show = $bindable(false),
-		onCancel = $bindable(() => {
-			show = false;
-		}),
-		onClose = $bindable(() => {
-			show = false;
-		}),
-		onCreate,
-		onImport,
-		onRestore
-	}: Props = $props();
-
-	// NOTE: This is for the RegistrationOptionModal component. The RegistrationOption is only for the RegistrationOptionModal component. Restore requires a valid account to be created first. So, removed restore from here for now.
-</script>
-
-<Modal bind:show {onCancel} {onClose} title="Registration/Restoration Options">
-	<RegistrationOption {onCreate} {onImport} {onRestore} title="Options" />
-</Modal>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/RegistrationPrompt.svelte b/packages/yakkl-wallet/src/lib/components/v1/RegistrationPrompt.svelte
deleted file mode 100644
index 4e98522..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/RegistrationPrompt.svelte
+++ /dev/null
@@ -1,68 +0,0 @@
-<script lang="ts">
-	import Modal from './Modal.svelte';
-	import { browser_ext } from '$lib/common/environment';
-
-	interface Props {
-		show: boolean;
-		title?: string;
-		message?: string;
-		context?: 'sidepanel' | 'wallet' | 'popup';
-		openWallet?: () => void;
-		onConfirm?: () => void;
-		onCancel?: () => void;
-	}
-
-	let {
-		show = $bindable(false),
-		title = 'Registration Required',
-		message = 'You need to register your YAKKL wallet before proceeding.',
-		context = 'wallet',
-		openWallet,
-		onConfirm,
-		onCancel
-	}: Props = $props();
-
-	function handleConfirm() {
-		if (onConfirm) {
-			onConfirm();
-		} else if (context === 'sidepanel' && openWallet) {
-			openWallet();
-		} else if (context === 'sidepanel') {
-			browser_ext.runtime.sendMessage({ type: 'popout' });
-		}
-		show = false;
-	}
-
-	function handleCancel() {
-		if (onCancel) onCancel();
-		show = false;
-	}
-</script>
-
-<Modal bind:show {title} className="z-[700]">
-	<div class="p-6 space-y-4">
-		<p class="text-base">{message}</p>
-		<p class="text-sm text-gray-600">
-			{#if context === 'sidepanel'}
-				Would you like to open the wallet to complete registration?
-			{:else}
-				Please complete the registration process to continue.
-			{/if}
-		</p>
-
-		<div class="flex justify-end gap-4 mt-6">
-			<button
-				onclick={handleCancel}
-				class="px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300"
-			>
-				Cancel
-			</button>
-			<button
-				onclick={handleConfirm}
-				class="px-6 py-2 text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 transition-colors"
-			>
-				{context === 'sidepanel' ? 'Open Wallet' : 'Continue'}
-			</button>
-		</div>
-	</div>
-</Modal>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/RestrictedAccountDisplay.svelte b/packages/yakkl-wallet/src/lib/components/v1/RestrictedAccountDisplay.svelte
deleted file mode 100644
index d1bc5bd..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/RestrictedAccountDisplay.svelte
+++ /dev/null
@@ -1,103 +0,0 @@
-<!-- RestrictedAccountDisplay.svelte - Shows blurred restricted accounts with upgrade prompt -->
-<script lang="ts">
-	import type { YakklAccount } from '$lib/common';
-	import { AccountTypeCategory } from '$lib/common/types';
-
-	interface Props {
-		accounts: YakklAccount[];
-		onUpgrade?: () => void;
-	}
-
-	let { accounts, onUpgrade = () => {} }: Props = $props();
-</script>
-
-{#if accounts.length > 0}
-	<div class="mt-4 border-t border-gray-200 pt-4">
-		<div class="text-center mb-3">
-			<h4 class="text-sm font-medium text-gray-600 mb-1">
-				{accounts.length} More Account{accounts.length > 1 ? 's' : ''} Available
-			</h4>
-			<p class="text-xs text-gray-500">Upgrade to view all your accounts</p>
-		</div>
-
-		<!-- Blurred account preview -->
-		<div class="space-y-2 filter blur-sm opacity-50 pointer-events-none overflow-hidden">
-			{#each accounts.slice(0, 2) as account}
-				<div
-					class="flex items-start rounded-lg p-3 bg-gray-50 border border-gray-200 overflow-hidden"
-				>
-					<div
-						class="w-6 h-6 flex items-center justify-center rounded-full {account.accountType ===
-						AccountTypeCategory.PRIMARY
-							? 'bg-purple-400'
-							: account.accountType === AccountTypeCategory.SUB
-								? 'bg-blue-400'
-								: 'bg-green-400'} text-white mr-3 shrink-0"
-					>
-						<svg
-							xmlns="http://www.w3.org/2000/svg"
-							class="w-3 h-3"
-							viewBox="0 0 20 20"
-							fill="currentColor"
-						>
-							<path
-								fill-rule="evenodd"
-								d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
-								clip-rule="evenodd"
-							/>
-						</svg>
-					</div>
-					<div class="flex-1 min-w-0 overflow-hidden">
-						<div class="flex items-center justify-between mb-1">
-							<h5 class="text-sm font-medium text-gray-700 truncate">
-								{account.accountType === AccountTypeCategory.PRIMARY
-									? 'PORTFOLIO'
-									: account.accountType === AccountTypeCategory.SUB
-										? 'SUB-PORTFOLIO'
-										: 'IMPORTED'}
-							</h5>
-						</div>
-						<p class="text-xs text-gray-600 truncate" title={account.name}>{account.name}</p>
-						<p class="text-xs text-gray-400 mt-1 font-mono truncate" title={account.address}>
-							{account.address.slice(0, 6)}...{account.address.slice(-4)}
-						</p>
-						<div class="flex items-center justify-between mt-2">
-							<div class="text-xs text-gray-500">
-								<span class="bg-gray-200 rounded px-2 py-1"> ETH</span>
-							</div>
-							<div class="text-xs text-gray-500">
-								<span class="bg-gray-200 rounded px-2 py-1">$</span>
-							</div>
-						</div>
-					</div>
-				</div>
-			{/each}
-
-			{#if accounts.length > 2}
-				<div class="text-center py-2 text-xs text-gray-400">
-					... and {accounts.length - 2} more
-				</div>
-			{/if}
-		</div>
-
-		<!-- Upgrade button -->
-		<div class="mt-4 text-center">
-			<button
-				class="inline-flex items-center px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white text-sm font-medium rounded-lg hover:from-purple-700 hover:to-blue-700 transition-all duration-200 transform hover:scale-105 shadow-lg"
-				onclick={onUpgrade}
-			>
-				<svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
-					<path
-						stroke-linecap="round"
-						stroke-linejoin="round"
-						stroke-width="2"
-						d="M5 10l7-7m0 0l7 7m-7-7v18"
-					/>
-				</svg>
-				Upgrade to View All Accounts
-			</button>
-
-			<p class="text-xs text-gray-500 mt-2">Basic members can view up to 3 accounts</p>
-		</div>
-	</div>
-{/if}
diff --git a/packages/yakkl-wallet/src/lib/components/v1/RotatingBanner.svelte b/packages/yakkl-wallet/src/lib/components/v1/RotatingBanner.svelte
deleted file mode 100644
index 8a23289..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/RotatingBanner.svelte
+++ /dev/null
@@ -1,158 +0,0 @@
-<!-- File: src/lib/components/RotatingBanner.svelte -->
-<script lang="ts">
-	import { onDestroy } from 'svelte';
-	import Banner from './Banner.svelte';
-	import Ad from './Ad.svelte';
-	import { UnifiedTimerManager } from '$lib/managers/UnifiedTimerManager';
-
-	type BannerItem = {
-		type: 'banner';
-		title?: string;
-		message?: string;
-		ctaText?: string;
-		onCallToAction?: ((index: number) => void) | null;
-	};
-
-	type AdItem = {
-		type: 'ad';
-		useGoogleAd?: boolean;
-		customContent?: (index: number) => string;
-		onCallToAction?: ((index: number) => void) | null;
-	};
-
-	type CustomItem = {
-		type: 'custom';
-		html: string;
-	};
-
-	type RotatingItem = BannerItem | AdItem | CustomItem;
-
-	let {
-		show = $bindable(true),
-		items = [],
-		interval = 0,
-		autoRotate = true,
-		showControls = true
-	} = $props<{
-		show?: boolean;
-		items: RotatingItem[];
-		interval?: number;
-		autoRotate?: boolean;
-		showControls?: boolean;
-	}>();
-
-	let currentIndex = $state(0);
-	const timerManager = UnifiedTimerManager.getInstance();
-	const timerId = 'rotating-banner';
-	let current = $derived(items[currentIndex]);
-
-	function next() {
-		currentIndex = (currentIndex + 1) % items.length;
-	}
-
-	function previous() {
-		currentIndex = (currentIndex - 1 + items.length) % items.length;
-	}
-
-	$effect(() => {
-		if (autoRotate && interval > 0 && items.length > 1) {
-			timerManager.stopInterval(timerId);
-			timerManager.removeInterval(timerId);
-			timerManager.addInterval(timerId, next, interval);
-			timerManager.startInterval(timerId);
-		} else {
-			timerManager.stopInterval(timerId);
-			timerManager.removeInterval(timerId);
-		}
-	});
-
-	onDestroy(() => {
-		timerManager.stopInterval(timerId);
-		timerManager.removeInterval(timerId);
-	});
-</script>
-
-{#if show}
-	<div class="relative">
-		{#if showControls && items.length > 1}
-			<div class="absolute inset-y-0 left-0 flex items-center z-10">
-				<button
-					class="p-0.5 rounded-full bg-black/10 hover:bg-black/20 transition-colors"
-					onclick={previous}
-					aria-label="Previous"
-				>
-					<svg
-						xmlns="http://www.w3.org/2000/svg"
-						class="h-3 w-3"
-						viewBox="0 0 20 20"
-						fill="currentColor"
-					>
-						<path
-							fill-rule="evenodd"
-							d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z"
-							clip-rule="evenodd"
-						/>
-					</svg>
-				</button>
-			</div>
-			<div class="absolute inset-y-0 right-0 flex items-center z-10">
-				<button
-					class="p-0.5 rounded-full bg-black/10 hover:bg-black/20 transition-colors"
-					onclick={next}
-					aria-label="Next"
-				>
-					<svg
-						xmlns="http://www.w3.org/2000/svg"
-						class="h-3 w-3"
-						viewBox="0 0 20 20"
-						fill="currentColor"
-					>
-						<path
-							fill-rule="evenodd"
-							d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"
-							clip-rule="evenodd"
-						/>
-					</svg>
-				</button>
-			</div>
-		{/if}
-
-		<div class={showControls && items.length > 1 ? 'px-4' : ''}>
-			{#if current.type === 'banner'}
-				<Banner
-					{...current}
-					onCallToAction={current.onCallToAction
-						? () => current.onCallToAction?.(currentIndex)
-						: null}
-				/>
-			{:else if current.type === 'ad'}
-				<Ad
-					{...current}
-					customContent={current.customContent
-						? () => current.customContent?.(currentIndex)
-						: undefined}
-					onCallToAction={current.onCallToAction
-						? () => current.onCallToAction?.(currentIndex)
-						: null}
-				/>
-			{:else if current.type === 'custom'}
-				{@html current.html}
-			{/if}
-		</div>
-
-		{#if showControls && items.length > 1}
-			<div class="absolute bottom-2 left-1/2 transform -translate-x-1/2 flex gap-1 z-10">
-				{#each items as _, i}
-					<button
-						class="w-1.5 h-1.5 rounded-full transition-colors {i === currentIndex
-							? 'bg-primary'
-							: 'bg-gray-300'}"
-						onclick={() => (currentIndex = i)}
-						aria-label="Go to slide {i + 1}"
-					>
-					</button>
-				{/each}
-			</div>
-		{/if}
-	</div>
-{/if}
diff --git a/packages/yakkl-wallet/src/lib/components/v1/ScrollIndicator.svelte b/packages/yakkl-wallet/src/lib/components/v1/ScrollIndicator.svelte
deleted file mode 100644
index 770a068..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/ScrollIndicator.svelte
+++ /dev/null
@@ -1,96 +0,0 @@
-<!-- File: src/lib/components/ScrollIndicator.svelte -->
-<script lang="ts">
-	import { onMount, onDestroy } from 'svelte';
-	import { fade, fly } from 'svelte/transition';
-	import ChevronDownIcon from './icons/ChevronDownIcon.svelte';
-	import ChevronUpIcon from './icons/ChevronUpIcon.svelte';
-	import { cn } from '$lib/utils';
-
-	interface Props {
-		children?: import('svelte').Snippet;
-	}
-
-	let { children }: Props = $props();
-
-	let show = $state(false);
-	let isAtBottom = $state(false);
-	let container = $state<HTMLElement | null>(null);
-	let button = $state<HTMLElement | null>(null);
-
-	function handleScroll() {
-		if (!container) return;
-
-		const { scrollTop, scrollHeight, clientHeight } = container;
-		const scrollBottom = scrollHeight - scrollTop - clientHeight;
-
-		// Show button if not at bottom and scrolled down at least 75px
-		show = scrollTop > 75;
-
-		// Check if we're at the bottom (within 10px threshold)
-		isAtBottom = scrollBottom < 10;
-	}
-
-	function scrollToPosition() {
-		if (!container) return;
-
-		const targetPosition = isAtBottom ? 0 : container.scrollHeight;
-		container.scrollTo({
-			top: targetPosition,
-			behavior: 'smooth'
-		});
-	}
-
-	onMount(() => {
-		if (container) {
-			container.addEventListener('scroll', handleScroll);
-			// Initial check
-			handleScroll();
-		}
-	});
-
-	onDestroy(() => {
-		if (container) {
-			container.removeEventListener('scroll', handleScroll);
-		}
-	});
-</script>
-
-<div bind:this={container} class="relative h-full overflow-y-auto overflow-x-hidden">
-	<div class="w-full">
-		{@render children?.()}
-	</div>
-
-	{#if show}
-		<button
-			bind:this={button}
-			class={cn(
-				'fixed bottom-4 right-4 z-50',
-				'w-10 h-10 rounded-full',
-				'bg-blue-500 dark:bg-blue-600',
-				'shadow-lg hover:shadow-xl',
-				'flex items-center justify-center',
-				'transition-all duration-300',
-				'hover:scale-110 active:scale-95',
-				'hover:bg-blue-600 dark:hover:bg-blue-700',
-				'focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2 dark:focus:ring-offset-zinc-900'
-			)}
-			onclick={scrollToPosition}
-			aria-label={isAtBottom ? 'Scroll to top' : 'Scroll to bottom'}
-			transition:fly={{ y: 20, duration: 300 }}
-		>
-			{#if isAtBottom}
-				<ChevronUpIcon className="w-5 h-5 text-white" />
-			{:else}
-				<ChevronDownIcon className="w-5 h-5 text-white" />
-			{/if}
-		</button>
-	{/if}
-</div>
-
-<style>
-	/* Hide scrollbar but keep functionality */
-	div::-webkit-scrollbar {
-		width: 0px;
-		background: transparent;
-	}
-</style>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/SearchSortControls.svelte b/packages/yakkl-wallet/src/lib/components/v1/SearchSortControls.svelte
deleted file mode 100644
index 782ec6d..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/SearchSortControls.svelte
+++ /dev/null
@@ -1,86 +0,0 @@
-<!-- SearchSortControls.svelte -->
-<script lang="ts">
-	import SearchIcon from './icons/SearchIcon.svelte';
-	import SortIcon from './icons/SortIcon.svelte';
-	import { UnifiedTimerManager } from '$lib/managers/UnifiedTimerManager';
-
-	let {
-		searchQuery = '',
-		sortOrder = 'date',
-		sortDirection = 'desc',
-		onSearch,
-		onSortOrderChange,
-		onSortDirectionChange
-	} = $props<{
-		searchQuery?: string;
-		sortOrder?: 'date' | 'title';
-		sortDirection?: 'asc' | 'desc';
-		onSearch: (query: string) => void;
-		onSortOrderChange: (order: 'date' | 'title') => void;
-		onSortDirectionChange: () => void;
-	}>();
-
-	// Handle search input with debounce using UnifiedTimerManager
-	const debouncedSearch = UnifiedTimerManager.createDebounce((value: string) => {
-		onSearch(value);
-	}, 300);
-
-	function handleSearch(e: Event) {
-		const value = (e.target as HTMLInputElement).value;
-		debouncedSearch(value);
-	}
-
-	// Handle sort order change
-	function handleSortOrderChange(e: Event) {
-		const value = (e.target as HTMLSelectElement).value as 'date' | 'title';
-		onSortOrderChange(value);
-	}
-
-	// Handle sort direction change
-	function handleSortDirectionChange() {
-		onSortDirectionChange();
-	}
-</script>
-
-<div class="flex items-center justify-end mb-2">
-	<div
-		class="flex items-center space-x-2 bg-white/90 dark:bg-zinc-800/90 backdrop-blur-sm rounded-full p-1.5 shadow-lg"
-	>
-		<!-- Search Field -->
-		<div class="relative flex-1 max-w-xs">
-			<div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
-				<SearchIcon className="w-4 h-4 text-gray-400" />
-			</div>
-			<input
-				type="text"
-				class="block w-full pl-10 pr-3 py-1.5 text-sm bg-transparent border border-gray-200 dark:border-zinc-700 rounded-full focus:ring-1 focus:ring-gray-300 dark:focus:ring-zinc-700 dark:text-gray-200"
-				placeholder="Search articles..."
-				value={searchQuery}
-				oninput={handleSearch}
-			/>
-		</div>
-
-		<!-- Sort Controls -->
-		<div class="flex items-center space-x-1">
-			<select
-				class="text-sm bg-transparent border-0 focus:ring-0 focus:outline-none dark:text-gray-200"
-				value={sortOrder}
-				onchange={handleSortOrderChange}
-			>
-				<option value="date">Date</option>
-				<option value="title">Title</option>
-			</select>
-
-			<button
-				class="p-1 rounded-full hover:bg-gray-200 dark:hover:bg-zinc-700 transition-colors duration-200"
-				onclick={handleSortDirectionChange}
-			>
-				<SortIcon
-					className="w-4 h-4 text-gray-500 dark:text-gray-400 {sortDirection === 'asc'
-						? 'rotate-180'
-						: ''}"
-				/>
-			</button>
-		</div>
-	</div>
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/SectionCard.svelte b/packages/yakkl-wallet/src/lib/components/v1/SectionCard.svelte
deleted file mode 100644
index f24a70f..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/SectionCard.svelte
+++ /dev/null
@@ -1,216 +0,0 @@
-<!-- svelte-ignore non_reactive_update -->
-<!-- svelte-ignore non_reactive_update -->
-<!-- File: src/lib/components/SectionCard.svelte -->
-<script lang="ts">
-	import { onMount } from 'svelte';
-	import ChevronDownIcon from './icons/ChevronDownIcon.svelte';
-	import ChevronUpIcon from './icons/ChevronUpIcon.svelte';
-	import ResizeIcon from './icons/ResizeIcon.svelte';
-	import EyeIcon from './icons/EyeIcon.svelte';
-	import { cn } from '$lib/utils';
-	import Tooltip from './Tooltip.svelte';
-
-	let {
-		show = $bindable(true),
-		title,
-		icon: Icon = null,
-		className = '',
-		isPinned = false,
-		eye = false,
-		eyeTooltip = 'Toggle visibility of values',
-		minHeight = '200px',
-		maxHeight = '400px',
-		locked = true,
-		footer: Footer = null,
-		footerProps = {},
-		lockedFooter: LockedFooter = null,
-		lockedFooterProps = {},
-		children
-	} = $props<{
-		show?: boolean;
-		title: string;
-		icon?: any;
-		className?: string;
-		isPinned?: boolean;
-		eye?: boolean;
-		eyeTooltip?: string;
-		minHeight?: string;
-		maxHeight?: string;
-		locked?: boolean;
-		footer?: any;
-		footerProps?: Record<string, any>;
-		lockedFooter?: any;
-		lockedFooterProps?: Record<string, any>;
-		children: () => any;
-	}>();
-
-	let isCollapsed = $state(false);
-	let isResizing = $state(false);
-	let cardHeight = $state(minHeight);
-	let startY = $state(0);
-	let startHeight = $state(0);
-	let cardElement = $state<HTMLElement | null>(null);
-	let contentElement = $state<HTMLElement | null>(null);
-	let hasItems = $state(false);
-	let calculatedMinHeight = $state('');
-
-	function calculateMinHeight() {
-		if (!cardElement || !contentElement) return;
-
-		const headerHeight =
-			(cardElement.querySelector('header') as HTMLElement | null)?.offsetHeight || 0;
-		const firstItemHeight =
-			(contentElement.querySelector('.item') as HTMLElement | null)?.offsetHeight || 0;
-
-		// If there are items, min height is header + one item
-		// If no items, min height is just the header
-		const newMinHeight = hasItems ? headerHeight + firstItemHeight : headerHeight;
-		calculatedMinHeight = `${newMinHeight}px`;
-
-		// Update card height if it's currently smaller than the new minimum
-		if (parseInt(cardHeight) < newMinHeight) {
-			cardHeight = calculatedMinHeight;
-		}
-	}
-
-	function handleResizeStart(e: MouseEvent) {
-		e.preventDefault();
-		isResizing = true;
-		startY = e.clientY;
-		startHeight = cardElement.offsetHeight;
-		document.addEventListener('mousemove', handleResizeMove);
-		document.addEventListener('mouseup', handleResizeEnd);
-	}
-
-	function handleResizeMove(e: MouseEvent) {
-		if (!isResizing) return;
-
-		const deltaY = e.clientY - startY;
-		const newHeight = Math.max(
-			parseInt(calculatedMinHeight || minHeight),
-			Math.min(parseInt(maxHeight), startHeight + deltaY)
-		);
-		cardHeight = `${newHeight}px`;
-	}
-
-	function handleResizeEnd() {
-		isResizing = false;
-		document.removeEventListener('mousemove', handleResizeMove);
-		document.removeEventListener('mouseup', handleResizeEnd);
-	}
-
-	function toggleCollapse() {
-		isCollapsed = !isCollapsed;
-	}
-
-	onMount(() => {
-		// Initial calculation
-		calculateMinHeight();
-
-		// Observe content changes to recalculate minimum height
-		const observer = new MutationObserver(() => {
-			hasItems = contentElement.querySelector('.item') !== null;
-			calculateMinHeight();
-		});
-
-		if (contentElement) {
-			observer.observe(contentElement, {
-				childList: true,
-				subtree: true
-			});
-		}
-
-		return () => {
-			document.removeEventListener('mousemove', handleResizeMove);
-			document.removeEventListener('mouseup', handleResizeEnd);
-			observer.disconnect();
-		};
-	});
-</script>
-
-{#if show}
-	<div
-		bind:this={cardElement}
-		class={cn(
-			'bg-white dark:bg-zinc-800 rounded-xl shadow-sm border border-zinc-200 dark:border-zinc-700',
-			'transition-all duration-200 ease-in-out',
-			'hover:shadow-md',
-			'flex flex-col',
-			'relative',
-			isPinned && 'sticky top-0 z-10 scroll-mt-4',
-			className
-		)}
-		style="height: {isCollapsed ? 'auto' : cardHeight}"
-	>
-		<!-- Header -->
-		<header
-			class="flex items-center justify-between p-4 border-b border-zinc-200 dark:border-zinc-700"
-		>
-			<div class="flex items-center gap-2">
-				{#if Icon}
-					<Icon className="w-5 h-5 text-zinc-600 dark:text-zinc-400" />
-				{/if}
-				<h2 class="text-md font-semibold text-zinc-900 dark:text-zinc-100">{title}</h2>
-				{#if eye}
-					<Tooltip content={eyeTooltip}>
-						<EyeIcon className="w-4 h-4 text-zinc-600 dark:text-zinc-400" />
-					</Tooltip>
-				{/if}
-			</div>
-			<div class="flex items-center gap-2">
-				<button
-					class="p-1 rounded-lg hover:bg-zinc-100 dark:hover:bg-zinc-700 transition-colors"
-					onclick={toggleCollapse}
-					aria-label={isCollapsed ? 'Expand section' : 'Collapse section'}
-				>
-					{#if isCollapsed}
-						<ChevronDownIcon className="w-4 h-4 text-zinc-600 dark:text-zinc-400" />
-					{:else}
-						<ChevronUpIcon className="w-4 h-4 text-zinc-600 dark:text-zinc-400" />
-					{/if}
-				</button>
-			</div>
-		</header>
-
-		<!-- Content -->
-		<div
-			bind:this={contentElement}
-			class="flex-1 overflow-y-auto transition-all duration-200"
-			style="height: {isCollapsed ? '0' : 'auto'}"
-		>
-			<div class="px-4 pb-4 pt-2">
-				{@render children()}
-			</div>
-		</div>
-
-		<!-- Footer -->
-		{#if !isCollapsed}
-			{#if locked && LockedFooter}
-				<div
-					class="border-t border-zinc-200 dark:border-zinc-700 p-4 bg-zinc-50 dark:bg-zinc-800/50"
-				>
-					<LockedFooter {...lockedFooterProps} />
-				</div>
-			{:else if Footer}
-				<div
-					class="border-t border-zinc-200 dark:border-zinc-700 p-4 bg-zinc-50 dark:bg-zinc-800/50"
-				>
-					<Footer {...footerProps} />
-				</div>
-			{/if}
-		{/if}
-
-		<!-- Resize Handle -->
-		{#if !isCollapsed}
-			<div
-				role="button"
-				tabindex="0"
-				aria-label="Resize section"
-				class="absolute bottom-0 left-0 right-0 h-4 cursor-ns-resize flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity bg-gradient-to-t from-zinc-100 dark:from-zinc-700 to-transparent"
-				onmousedown={handleResizeStart}
-			>
-				<ResizeIcon className="w-4 h-4 text-zinc-400 rotate-90" />
-			</div>
-		{/if}
-	</div>
-{/if}
diff --git a/packages/yakkl-wallet/src/lib/components/v1/SecurityWarning.svelte b/packages/yakkl-wallet/src/lib/components/v1/SecurityWarning.svelte
deleted file mode 100644
index 049fe82..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/SecurityWarning.svelte
+++ /dev/null
@@ -1,73 +0,0 @@
-<script lang="ts">
-	import { onMount, onDestroy } from 'svelte';
-	import { fade } from 'svelte/transition';
-	import messagingService from '$lib/common/messaging';
-	import { NotificationService } from '$lib/common/notifications';
-	import { browser_ext } from '$lib/common/environment';
-	import { createCountdownTimer, type CountdownTimer } from '$lib/managers/CountdownTimer';
-
-	interface Props {
-		warningTime?: number;
-		onComplete?: () => void;
-	}
-
-	let { warningTime = 30, onComplete = () => {} } = $props();
-
-	let timeLeft = $state(warningTime);
-	let countdownTimer: CountdownTimer | null = null;
-
-	async function triggerLockdown() {
-		try {
-			// Send lockdown message
-			if (browser_ext) {
-				await browser_ext.runtime.sendMessage({
-					type: 'lockdown',
-					reason: 'idle-timeout'
-				});
-			}
-
-			// Clear any existing notifications
-			NotificationService.clear('lockdown-warning');
-
-			// Call the completion handler
-			onComplete();
-		} catch (error) {
-			console.error('Failed to trigger lockdown:', error);
-		}
-	}
-
-	onMount(() => {
-		countdownTimer = createCountdownTimer(
-			'security-warning',
-			warningTime,
-			(remaining) => {
-				timeLeft = remaining;
-			},
-			triggerLockdown
-		);
-		countdownTimer.start();
-	});
-
-	onDestroy(() => {
-		if (countdownTimer) {
-			countdownTimer.destroy();
-			countdownTimer = null;
-		}
-	});
-</script>
-
-<div
-	class="fixed top-0 left-0 right-0 bg-red-900/90 text-white p-2 text-center z-50"
-	transition:fade
->
-	<div class="flex items-center justify-center space-x-2">
-		<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
-			<path
-				fill-rule="evenodd"
-				d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z"
-				clip-rule="evenodd"
-			/>
-		</svg>
-		<span>Security Warning: Wallet will lock in {timeLeft} seconds</span>
-	</div>
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/SecurityWarningEnhanced.svelte b/packages/yakkl-wallet/src/lib/components/v1/SecurityWarningEnhanced.svelte
deleted file mode 100644
index d17e48a..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/SecurityWarningEnhanced.svelte
+++ /dev/null
@@ -1,424 +0,0 @@
-<script lang="ts">
-	import { onMount, onDestroy } from 'svelte';
-	import { fade, scale } from 'svelte/transition';
-	import { bounceIn } from 'svelte/easing';
-	import { NotificationService } from '$lib/common/notifications';
-	import { browser_ext } from '$lib/common/environment';
-	import { securityWarningStore, hideSecurityWarning } from '$lib/common/stores/securityWarning';
-	import { log } from '$lib/common/logger-wrapper';
-	import { UnifiedTimerManager } from '$lib/managers/UnifiedTimerManager';
-	import { createCountdownTimer, type CountdownTimer } from '$lib/managers/CountdownTimer';
-
-	interface Props {
-		warningTime?: number;
-		onComplete?: () => void;
-	}
-
-	let { warningTime = 30, onComplete = () => {} } = $props();
-
-	let timeLeft = $state(warningTime);
-	let countdownTimer: CountdownTimer | null = null;
-	let show = $state(false);
-	let isUrgent = $state(false);
-	let originalTitle = '';
-	let isCleaningUp = $state(false);
-	let timerManager = UnifiedTimerManager.getInstance();
-
-	// Subscribe to the security warning store
-	let unsubscribe: (() => void) | undefined;
-
-	async function triggerLockdown() {
-		if (isCleaningUp) return;
-
-		try {
-			log.info(' [SecurityWarningEnhanced] Triggering lockdown');
-			isCleaningUp = true;
-
-			// Clean up our own timers first
-			cleanup();
-
-			// Send lockdown message
-			if (browser_ext) {
-				await browser_ext.runtime.sendMessage({
-					type: 'lockdown',
-					reason: 'idle-timeout'
-				});
-			}
-
-			// Clear enhanced alerts
-			await NotificationService.clearAllAlertsEnhanced();
-
-			// Hide the warning
-			hideSecurityWarning();
-
-			// Call the completion handler
-			onComplete();
-		} catch (error) {
-			console.error('Failed to trigger lockdown:', error);
-		} finally {
-			isCleaningUp = false;
-		}
-	}
-
-	function cleanup() {
-		// Clear main countdown timer
-		if (countdownTimer) {
-			countdownTimer.destroy();
-			countdownTimer = null;
-		}
-
-		// Clear title flash timer
-		timerManager.stopTimeout('title-flash');
-		timerManager.removeTimeout('title-flash');
-
-		// Close audio context
-		if (typeof window !== 'undefined') {
-			const audioContext = (window as any).__yakklAudioContext;
-			if (audioContext && audioContext.state !== 'closed') {
-				audioContext.close().catch(() => {});
-				(window as any).__yakklAudioContext = null;
-			}
-		}
-
-		// Restore document title
-		if (originalTitle && document.title.includes(' URGENT')) {
-			document.title = originalTitle;
-			originalTitle = '';
-		}
-
-		removeListeners();
-	}
-
-	function startCountdown() {
-		log.info(' [SecurityWarningEnhanced] Starting countdown from', false, timeLeft);
-
-		// Clean up any existing timer first
-		cleanup();
-
-		// Store original title for restoration
-		originalTitle = document.title;
-
-		countdownTimer = createCountdownTimer(
-			'security-warning-enhanced',
-			timeLeft,
-			(remaining) => {
-				timeLeft = remaining;
-				log.debug(' [SecurityWarningEnhanced] Time left:', false, timeLeft);
-
-				// Update urgency state
-				isUrgent = timeLeft <= 10;
-
-				// Start title flashing at 15 seconds if not already started
-				if (
-					timeLeft <= 15 &&
-					!timerManager.isTimeoutRunning('title-flash') &&
-					!document.title.includes(' URGENT')
-				) {
-					startTitleFlash();
-				}
-
-				// Play final warning sound at 5 seconds
-				if (timeLeft === 5) {
-					playFinalWarningSound();
-				}
-			},
-			triggerLockdown
-		);
-
-		countdownTimer.start();
-		log.info(' [SecurityWarningEnhanced] Countdown started');
-	}
-
-	function startTitleFlash() {
-		if (timerManager.isTimeoutRunning('title-flash') || !originalTitle) return;
-
-		log.info(' [SecurityWarningEnhanced] Starting title flash');
-
-		let flashCount = 0;
-		const flashFunction = () => {
-			if (flashCount >= 20) {
-				// Flash 10 times total
-				timerManager.stopTimeout('title-flash');
-				timerManager.removeTimeout('title-flash');
-				if (originalTitle) {
-					document.title = originalTitle;
-				}
-				return;
-			}
-
-			const flashTitle = flashCount % 2 === 0 ? ' URGENT: Security Warning!' : originalTitle;
-			document.title = flashTitle;
-			flashCount++;
-
-			// Schedule next flash
-			timerManager.addTimeout('title-flash', flashFunction, 500);
-			timerManager.startTimeout('title-flash');
-		};
-
-		// Start the first flash
-		timerManager.addTimeout('title-flash', flashFunction, 500);
-		timerManager.startTimeout('title-flash');
-	}
-
-	function stopCountdown() {
-		log.info(' [SecurityWarningEnhanced] Stopping countdown');
-		cleanup();
-	}
-
-	function playFinalWarningSound() {
-		try {
-			if (typeof window !== 'undefined' && window.AudioContext) {
-				const audioContext = new (window.AudioContext || (window as any).webkitAudioContext)();
-
-				// Create urgent final warning sound sequence
-				for (let i = 0; i < 3; i++) {
-					setTimeout(() => {
-						try {
-							const oscillator = audioContext.createOscillator();
-							const gainNode = audioContext.createGain();
-
-							oscillator.connect(gainNode);
-							gainNode.connect(audioContext.destination);
-
-							oscillator.frequency.setValueAtTime(1200, audioContext.currentTime);
-							gainNode.gain.setValueAtTime(0.4, audioContext.currentTime);
-							gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
-
-							oscillator.start(audioContext.currentTime);
-							oscillator.stop(audioContext.currentTime + 0.3);
-						} catch (e) {
-							log.debug('Audio beep failed in final warning:', false, e);
-						}
-					}, i * 400);
-				}
-
-				// Close audio context after sounds complete
-				setTimeout(() => {
-					audioContext.close().catch(() => {});
-				}, 2000);
-			}
-		} catch (error) {
-			console.warn('Failed to play final warning sound:', error);
-		}
-	}
-
-	function handleUserActivity() {
-		if (isCleaningUp) return;
-
-		log.info(' [SecurityWarningEnhanced] User activity detected - canceling warning');
-		isCleaningUp = true;
-
-		try {
-			// Clean up our own state first
-			cleanup();
-
-			// Hide the security warning
-			hideSecurityWarning();
-
-			// Send activity message to background
-			if (browser_ext) {
-				browser_ext.runtime
-					.sendMessage({
-						type: 'USER_ACTIVITY',
-						timestamp: Date.now(),
-						context: 'security',
-						action: 'security_warning_interaction'
-					})
-					.catch(() => {
-						// Ignore errors
-					});
-			}
-
-			// Clear all enhanced alerts through the notification service
-			NotificationService.clearAllAlertsEnhanced().catch((error) => {
-				log.warn('Error clearing enhanced alerts from SecurityWarning:', false, error);
-			});
-		} catch (error) {
-			log.error('Error in handleUserActivity:', false, error);
-		} finally {
-			isCleaningUp = false;
-		}
-	}
-
-	function addListeners() {
-		if (typeof window === 'undefined') return;
-
-		// Use passive listeners and single-use listeners for better performance
-		window.addEventListener('mousemove', handleUserActivity, { once: true, passive: true });
-		window.addEventListener('keydown', handleUserActivity, { once: true, passive: true });
-		window.addEventListener('click', handleUserActivity, { once: true, passive: true });
-		window.addEventListener('focus', handleUserActivity, { once: true, passive: true });
-
-		log.debug(' [SecurityWarningEnhanced] Activity listeners added');
-	}
-
-	function removeListeners() {
-		if (typeof window === 'undefined') return;
-
-		// Remove all listeners (in case they weren't used yet)
-		window.removeEventListener('mousemove', handleUserActivity);
-		window.removeEventListener('keydown', handleUserActivity);
-		window.removeEventListener('click', handleUserActivity);
-		window.removeEventListener('focus', handleUserActivity);
-
-		log.debug(' [SecurityWarningEnhanced] Activity listeners removed');
-	}
-
-	$effect(() => {
-		if (show && !isCleaningUp) {
-			addListeners();
-		} else {
-			removeListeners();
-		}
-	});
-
-	onMount(() => {
-		log.info(' [SecurityWarningEnhanced] Component mounted');
-
-		// Subscribe to the security warning store
-		unsubscribe = securityWarningStore.subscribe((state) => {
-			log.info(' [SecurityWarningEnhanced] Store state changed:', false, state);
-
-			if (state.show && !show && !isCleaningUp) {
-				// Show warning
-				show = true;
-				timeLeft = state.warningTime;
-				if (state.onComplete) {
-					onComplete = state.onComplete;
-				}
-				startCountdown();
-			} else if (!state.show && show) {
-				// Hide warning
-				show = false;
-				stopCountdown();
-			}
-		});
-
-		// Focus window when component mounts during warning
-		if (show && typeof window !== 'undefined') {
-			window.focus();
-		}
-	});
-
-	onDestroy(() => {
-		log.info(' [SecurityWarningEnhanced] Component destroyed - performing cleanup');
-
-		// Ensure complete cleanup
-		cleanup();
-
-		if (unsubscribe) {
-			unsubscribe();
-		}
-	});
-</script>
-
-{#if show}
-	<div
-		class="fixed inset-0 z-[100] flex items-start justify-center pt-4"
-		transition:fade={{ duration: 300 }}
-	>
-		<!-- Backdrop with enhanced pulsing effect -->
-		<div
-			class="fixed inset-0 bg-red-900/70 backdrop-blur-md"
-			class:animate-pulse={isUrgent}
-			style="animation-duration: {isUrgent ? '0.5s' : '2s'}"
-		></div>
-
-		<!-- Enhanced warning panel -->
-		<div
-			class="relative bg-gradient-to-br from-red-900 to-red-800 border-2 border-red-400 text-white p-6 rounded-xl shadow-2xl max-w-lg mx-4 {isUrgent
-				? 'animate-bounce shadow-red-500/50'
-				: ''}"
-			transition:scale={{ duration: 400, easing: bounceIn }}
-			role="alert"
-			aria-live="assertive"
-			style="box-shadow: {isUrgent ? '0 0 30px rgba(239, 68, 68, 0.5)' : ''}"
-		>
-			<!-- Urgent indicator with enhanced visibility -->
-			{#if isUrgent}
-				<div
-					class="absolute -top-3 -right-3 bg-yellow-400 text-red-900 px-3 py-1 rounded-full text-sm font-bold animate-ping shadow-lg"
-				>
-					URGENT!
-				</div>
-			{/if}
-
-			<!-- Enhanced header -->
-			<div class="flex items-center justify-center space-x-4 mb-6">
-				<svg
-					xmlns="http://www.w3.org/2000/svg"
-					class="h-10 w-10 text-yellow-300"
-					class:animate-pulse={true}
-					viewBox="0 0 20 20"
-					fill="currentColor"
-				>
-					<path
-						fill-rule="evenodd"
-						d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z"
-						clip-rule="evenodd"
-					/>
-				</svg>
-				<div class="text-center">
-					<h2 class="text-2xl font-bold"> SECURITY WARNING</h2>
-					<p class="text-red-200 text-sm mt-1">Immediate attention required</p>
-				</div>
-			</div>
-
-			<!-- Enhanced countdown display -->
-			<div class="text-center mb-6">
-				<div class="text-sm text-red-200 mb-3">Wallet will lock due to inactivity in:</div>
-				<div
-					class="text-6xl font-mono font-bold text-yellow-300 mb-3 transition-all duration-300"
-					class:text-red-300={isUrgent}
-					class:animate-pulse={isUrgent}
-					class:scale-110={isUrgent}
-				>
-					{timeLeft}
-				</div>
-				<div class="text-base text-red-200 font-semibold">seconds</div>
-			</div>
-
-			<!-- Enhanced progress bar -->
-			<div class="w-full bg-red-800 rounded-full h-3 mb-6 shadow-inner">
-				<div
-					class="h-3 rounded-full transition-all duration-1000 shadow-sm"
-					class:bg-gradient-to-r={!isUrgent}
-					class:from-yellow-400={!isUrgent}
-					class:to-yellow-300={!isUrgent}
-					class:bg-red-400={isUrgent}
-					class:animate-pulse={isUrgent}
-					style="width: {(timeLeft / warningTime) * 100}%"
-				></div>
-			</div>
-
-			<!-- Enhanced action buttons -->
-			<div class="flex space-x-4 mb-4">
-				<button
-					class="flex-1 bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white px-6 py-4 rounded-lg font-bold text-lg transition-all duration-200 transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-green-500/50 shadow-lg"
-					onclick={handleUserActivity}
-					disabled={isCleaningUp}
-				>
-					 I'm Here - Stay Active
-				</button>
-
-				<button
-					class="bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white px-6 py-4 rounded-lg font-bold transition-all duration-200 transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-red-500/50 shadow-lg"
-					onclick={triggerLockdown}
-					disabled={isCleaningUp}
-				>
-					 Lock Now
-				</button>
-			</div>
-
-			<!-- Enhanced additional info -->
-			<div class="text-center">
-				<div class="text-xs text-red-200 mb-2">
-					Click anywhere on this warning or press any key to stay active
-				</div>
-				<div class="text-xs text-red-300 opacity-75">
-					Your extension badge is also showing the countdown
-				</div>
-			</div>
-		</div>
-	</div>
-{/if}
diff --git a/packages/yakkl-wallet/src/lib/components/v1/SellTokenPanel.svelte b/packages/yakkl-wallet/src/lib/components/v1/SellTokenPanel.svelte
deleted file mode 100644
index 8ea992d..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/SellTokenPanel.svelte
+++ /dev/null
@@ -1,446 +0,0 @@
-<!-- SellTokenPanel.svelte -->
-<script lang="ts">
-	import type { Writable } from 'svelte/store';
-	import TokenDropdown from './TokenDropdown.svelte';
-	import SwapTokenPrice from './SwapTokenPrice.svelte';
-	import type { SwapToken, SwapPriceData } from '$lib/common/interfaces';
-	import { debounce } from 'lodash-es';
-	import { ethers as ethersv6 } from 'ethers-v6';
-	import { convertTokenToUsd, convertUsdToTokenAmount, toBigInt } from '$lib/common';
-	import ToggleSwitch from './ToggleSwitch.svelte';
-	import { isUsdModeStore } from '$lib/common/stores/uiStateStore';
-	import NumericInput from './NumericInput.svelte';
-	import { log } from '$lib/common/logger-wrapper';
-
-	interface Props {
-		disabled?: boolean;
-		resetValues?: boolean;
-		insufficientBalance?: boolean;
-		balance?: string;
-		swapPriceDataStore: Writable<SwapPriceData>;
-		onTokenSelect: (token: SwapToken) => void;
-		onAmountChange: (amount: string) => void;
-		lastModifiedPanel?: string;
-	}
-
-	let {
-		disabled = false,
-		resetValues = $bindable(false),
-		insufficientBalance = false,
-		balance = '0',
-		swapPriceDataStore,
-		onTokenSelect,
-		onAmountChange,
-		lastModifiedPanel = $bindable('sell')
-	}: Props = $props();
-
-	let tokenValue = $state('');
-	let usdValue = $state('');
-	let displayValue = $state('');
-
-	// Reset handling
-	$effect(() => {
-		if (resetValues) {
-			tokenValue = '';
-			usdValue = '';
-			displayValue = '';
-			resetValues = false;
-		}
-	});
-
-	// Update display value based on mode
-	$effect(() => {
-		displayValue = $isUsdModeStore ? usdValue : tokenValue;
-	});
-
-	// Update values when quote changes from buy panel
-	$effect(() => {
-		if (lastModifiedPanel === 'buy') {
-			const tokenAmount = ethersv6.formatUnits(
-				toBigInt($swapPriceDataStore.amountIn),
-				$swapPriceDataStore.tokenIn.decimals
-			);
-			if ($isUsdModeStore) {
-				try {
-					const calculatedUsdAmount = convertTokenToUsd(
-						Number(tokenAmount),
-						$swapPriceDataStore.marketPriceIn
-					);
-					usdValue = calculatedUsdAmount.toString();
-					tokenValue = tokenAmount;
-					displayValue = usdValue;
-				} catch (error) {
-					log.error('Token to USD conversion error:', false, error);
-				}
-			} else {
-				tokenValue = tokenAmount;
-				displayValue = tokenValue;
-				if ($swapPriceDataStore.marketPriceIn > 0) {
-					try {
-						const calculatedUsdAmount = convertTokenToUsd(
-							Number(tokenAmount),
-							$swapPriceDataStore.marketPriceIn
-						);
-						usdValue = calculatedUsdAmount.toString();
-					} catch (error) {
-						log.error('Token to USD conversion error:', false, error);
-					}
-				}
-			}
-		}
-	});
-
-	const debouncedAmountChange = debounce((value: string) => {
-		onAmountChange(value);
-	}, 300);
-
-	function handleAmountInput(value: string) {
-		lastModifiedPanel = 'sell';
-		const marketPrice = $swapPriceDataStore.marketPriceIn || 0;
-
-		if (!value) {
-			tokenValue = '';
-			usdValue = '';
-			displayValue = '';
-			debouncedAmountChange('');
-			return;
-		}
-
-		if ($isUsdModeStore) {
-			// User is entering USD amount
-			usdValue = value;
-			if (marketPrice > 0) {
-				try {
-					const calculatedTokenAmount = convertUsdToTokenAmount(
-						Number(value),
-						marketPrice,
-						$swapPriceDataStore.tokenIn.decimals
-					);
-					tokenValue = calculatedTokenAmount.toString();
-					debouncedAmountChange(tokenValue);
-				} catch (error) {
-					log.error('USD to Token conversion error:', false, error);
-					debouncedAmountChange('');
-				}
-			}
-		} else {
-			// User is entering token amount
-			tokenValue = value;
-			if (marketPrice > 0) {
-				try {
-					const calculatedUsdAmount = convertTokenToUsd(Number(value), marketPrice);
-					usdValue = calculatedUsdAmount.toString();
-				} catch (error) {
-					log.error('Token to USD conversion error:', false, error);
-				}
-			}
-			debouncedAmountChange(value);
-		}
-	}
-
-	function handleTokenSelection(token: SwapToken) {
-		tokenValue = '';
-		usdValue = '';
-		displayValue = '';
-		onTokenSelect(token);
-	}
-
-	function handleBlur(value: string) {
-		// No formatting on blur, maintain exact input values
-	}
-</script>
-
-<div
-	class="border border-gray-300 shadow-md p-4 rounded-lg bg-gray-50 dark:bg-gray-800
-  {disabled ? ' opacity-50 pointer-events-none' : ''}"
->
-	<div class="flex justify-between items-center">
-		<NumericInput
-			value={displayValue}
-			onChange={handleAmountInput}
-			onBlur={handleBlur}
-			{disabled}
-			className="
-        bg-transparent
-        text-3xl
-        font-bold
-        w-1/2
-        mr-4
-        focus:outline-none
-        focus:border-b-2
-        focus:border-blue-500
-        {insufficientBalance ? 'text-red-500 dark:text-red-400 ' : 'text-black dark:text-white '}
-        {disabled ? 'cursor-not-allowed' : ''}
-      "
-		/>
-		<TokenDropdown
-			{disabled}
-			selectedToken={$swapPriceDataStore.tokenIn}
-			onTokenSelect={handleTokenSelection}
-		/>
-	</div>
-	<div class="flex justify-between items-center mt-2 text-sm">
-		<div class="flex items-center">
-			<ToggleSwitch
-				value={$isUsdModeStore}
-				labelOn="USD"
-				labelOff="Token"
-				className="bg-purple-300"
-				onChange={(value) => isUsdModeStore.set(value)}
-			/>
-		</div>
-		<div class="flex flex-col items-end text-right">
-			<SwapTokenPrice {swapPriceDataStore} type="sell" />
-			<span>Balance: {balance}</span>
-		</div>
-	</div>
-	{#if insufficientBalance}
-		<div class="text-red-500 dark:text-red-400 text-sm mt-1">
-			Insufficient balance for this swap
-		</div>
-	{/if}
-</div>
-
-<!-- <script lang="ts">
-  import type { Writable } from 'svelte/store';
-  import TokenDropdown from './TokenDropdown.svelte';
-  import SwapTokenPrice from './SwapTokenPrice.svelte';
-  import type { SwapToken, SwapPriceData } from '$lib/common/interfaces';
-  import { debounce } from 'lodash-es';
-  import { ethers as ethersv6 } from 'ethers-v6';
-  import { convertTokenToUsd, convertUsdToTokenAmount, toBigInt } from '$lib/common';
-  import ToggleSwitch from './ToggleSwitch.svelte';
-  import { isUsdModeStore } from '$lib/common/stores/uiStateStore';
-	import NumericInput from './NumericInput.svelte';
-
-  interface Props {
-    disabled?: boolean;
-    resetValues?: boolean;
-    insufficientBalance?: boolean;
-    balance?: string;
-    swapPriceDataStore: Writable<SwapPriceData>;
-    onTokenSelect: (token: SwapToken) => void;
-    onAmountChange: (amount: string) => void;
-  }
-
-  let {
-    disabled = false,
-    resetValues = $bindable(false),
-    insufficientBalance = false,
-    balance = '0',
-    swapPriceDataStore,
-    onTokenSelect,
-    onAmountChange,
-  }: Props = $props();
-
-  let userInput = $state('');
-  let formattedAmount = $state('');
-
-  // Ensure resetValues resets inputs
-  $effect(() => {
-    if (resetValues) {
-      userInput = '';
-      formattedAmount = '';
-      resetValues = false;
-    }
-  });
-
-  // Calculate formattedAmount dynamically
-  $effect(() => {
-    const tokenAmount = ethersv6.formatUnits(toBigInt($swapPriceDataStore.amountIn), $swapPriceDataStore.tokenIn.decimals);
-    const usdAmount = $swapPriceDataStore.marketPriceIn > 0
-      ? convertTokenToUsd(Number(tokenAmount), $swapPriceDataStore.marketPriceIn)
-      : 0;
-
-    formattedAmount = $isUsdModeStore ? usdAmount.toFixed(2) : tokenAmount;
-    userInput = '';
-  });
-
-  // Debounced amount change handler
-  const debouncedAmountChange = debounce((value: string) => {
-    onAmountChange(value);
-  }, 300);
-
-  // Handle user input changes
-  function handleAmountInputEvent(event: Event) {
-    const input = event.target as HTMLInputElement;
-    let value = input.value;
-
-    // Allow only valid numbers
-    value = value.replace(/[^0-9.]/g, '');
-
-    // Handle decimals
-    const parts = value.split('.');
-    if (parts.length > 2) value = `${parts[0]}.${parts.slice(1).join('')}`;
-
-    // Limit decimal precision
-    if ($isUsdModeStore && parts[1]?.length > 2) {
-      value = `${parts[0]}.${parts[1].slice(0, 2)}`;
-    } else if (!$isUsdModeStore) {
-      const tokenDecimals = $swapPriceDataStore.tokenIn.decimals || 18;
-      if (parts[1]?.length > tokenDecimals) {
-        value = `${parts[0]}.${parts[1].slice(0, tokenDecimals)}`;
-      }
-    }
-
-    userInput = value;
-    if (value === '' || value === '.') {
-      formattedAmount = '';
-      debouncedAmountChange('');
-    } else {
-      formattedAmount = value;
-
-      if ($isUsdModeStore) {
-        const marketPrice = $swapPriceDataStore.marketPriceIn || 0;
-        if (marketPrice > 0) {
-          const tokenAmount = convertUsdToTokenAmount(Number(value), marketPrice, $swapPriceDataStore.tokenIn.decimals);
-          debouncedAmountChange(tokenAmount.toString());
-        } else {
-          debouncedAmountChange('');
-        }
-      } else {
-        debouncedAmountChange(value);
-      }
-    }
-  }
-
-  function handleAmountInput(value: string) {
-    // No need to get value from event.target anymore
-    if (value === '') { // || value === '.') {
-      formattedAmount = '';
-      debouncedAmountChange('');
-    } else {
-      formattedAmount = value;
-
-      if ($isUsdModeStore) {
-        const marketPrice = $swapPriceDataStore.marketPriceIn || 0;
-        if (marketPrice > 0) {
-          const tokenAmount = convertUsdToTokenAmount(Number(value), marketPrice, $swapPriceDataStore.tokenIn.decimals);
-          debouncedAmountChange(tokenAmount.toString());
-        } else {
-          debouncedAmountChange('');
-        }
-      } else {
-        debouncedAmountChange(value);
-      }
-    }
-  }
-
-  //   function handleAmountInputEvent(e: Event) {
-  //   const value = (e.currentTarget as HTMLInputElement).value;
-  //   // No need to get value from event.target anymore
-  //   if (value === '' || value === '.') {
-  //     formattedAmount = '';
-  //     debouncedAmountChange('');
-  //   } else {
-  //     formattedAmount = value;
-
-  //     if ($isUsdModeStore) {
-  //       const marketPrice = $swapPriceDataStore.marketPriceIn || 0;
-  //       if (marketPrice > 0) {
-  //         const tokenAmount = convertUsdToTokenAmount(Number(value), marketPrice, $swapPriceDataStore.tokenIn.decimals);
-  //         debouncedAmountChange(tokenAmount.toString());
-  //       } else {
-  //         debouncedAmountChange('');
-  //       }
-  //     } else {
-  //       debouncedAmountChange(value);
-  //     }
-  //   }
-  // }
-
-  // Two versions for testing... (same for input and blur)
-  function handleBlurEvent() {
-    if (!userInput || userInput === '.') {
-      userInput = '';
-      formattedAmount = '';
-    } else {
-      formattedAmount = userInput;
-    }
-  }
-
-  function handleBlur(value: string) {
-    // if (!value || value === '.') {
-    //   userInput = '';
-    //   formattedAmount = '';
-    // } else {
-      formattedAmount = value;
-    // }
-  }
-</script>
-
-<div class="border border-gray-300 shadow-md p-4 rounded-lg bg-gray-50 dark:bg-gray-800
-  {disabled ? ' opacity-50 pointer-events-none' : ''}">
-  <div class="flex justify-between items-center">
-    <NumericInput
-      value={userInput}
-      onChange={handleAmountInput}
-      onBlur={handleBlur}
-      disabled={disabled}
-      className="
-        bg-transparent
-        text-3xl
-        font-bold
-        w-1/2
-        mr-4
-        focus:outline-none
-        focus:border-b-2
-        focus:border-blue-500
-        text-black dark:text-white
-        {disabled ? 'cursor-not-allowed' : ''}
-      "
-    />
-
-          oninput={handleAmountInput}
-      onblur={handleBlur}
-
-    <input
-      type="text"
-      placeholder="0"
-      value={userInput || formattedAmount}
-      disabled={disabled}
-      oninput={handleAmountInputEvent}
-      onblur={handleBlurEvent}
-      class="
-        bg-transparent
-        text-3xl
-        font-bold
-        w-1/2
-        mr-4
-        focus:outline-none
-        focus:border-b-2
-        focus:border-blue-500
-        {insufficientBalance
-          ? 'text-red-500 dark:text-red-400 '
-          : 'text-black dark:text-white '}
-        {disabled ? 'cursor-not-allowed' : ''}
-      "
-    />
-
-    <TokenDropdown
-      disabled={disabled}
-      selectedToken={$swapPriceDataStore.tokenIn}
-      onTokenSelect={onTokenSelect}
-    />
-  </div>
-  <div class="flex justify-between items-center mt-2 text-sm">
-    <div class="flex items-center">
-      <ToggleSwitch
-        value={$isUsdModeStore}
-        labelOn="USD"
-        labelOff="Token"
-        className="bg-purple-300"
-        onChange={(value) => isUsdModeStore.set(value)} />
-    </div>
-    <div class="flex flex-col items-end text-right">
-      <SwapTokenPrice {swapPriceDataStore} type="sell" />
-      <span>Balance: {balance}</span>
-    </div>
-  </div>
-  {#if insufficientBalance}
-    <div class="text-red-500 dark:text-red-400 text-sm mt-1">
-      Insufficient balance for this swap
-    </div>
-  {/if}
-</div>
- -->
diff --git a/packages/yakkl-wallet/src/lib/components/v1/SendToken.svelte b/packages/yakkl-wallet/src/lib/components/v1/SendToken.svelte
deleted file mode 100644
index e69de29..0000000
diff --git a/packages/yakkl-wallet/src/lib/components/v1/SessionProvider.svelte b/packages/yakkl-wallet/src/lib/components/v1/SessionProvider.svelte
deleted file mode 100644
index 8ebd67f..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/SessionProvider.svelte
+++ /dev/null
@@ -1,95 +0,0 @@
-<!-- SessionProvider.svelte -->
-<script lang="ts">
-	import { onMount } from 'svelte';
-	import { goto } from '$app/navigation';
-	import { authStore, showSessionWarning, sessionTimeRemaining } from '$lib/stores/auth-store';
-	import SessionWarning from './SessionWarning.svelte';
-	import { log } from '$lib/common/logger-wrapper';
-	import { protectedContexts } from '$lib/common/globals';
-	import { PATH_LOGOUT } from '$lib/common';
-
-	interface Props {
-		children: any;
-	}
-
-	let { children }: Props = $props();
-	let shouldShowSessionWarning = $state(false);
-
-	// Check if current context needs session warnings
-	function getCurrentContextType(): string {
-		try {
-			if (typeof window === 'undefined') return 'unknown';
-
-			const pathname = window.location.pathname;
-			const href = window.location.href;
-
-			if (pathname.includes('sidepanel') || href.includes('sidepanel')) {
-				return 'sidepanel';
-			} else if (
-				pathname.includes('index.html') ||
-				href.includes('index.html') ||
-				pathname === '/' ||
-				pathname === ''
-			) {
-				return 'popup-wallet';
-			} else if (pathname.includes('dapp/popups') || href.includes('dapp/popups')) {
-				return 'popup-dapp';
-			} else {
-				return 'popup-wallet'; // Default to popup-wallet for main extension
-			}
-		} catch (error) {
-			return 'unknown';
-		}
-	}
-
-	function currentContextNeedsSessionWarning(): boolean {
-		const contextType = getCurrentContextType();
-		return protectedContexts.includes(contextType);
-	}
-
-	onMount(() => {
-		shouldShowSessionWarning = currentContextNeedsSessionWarning();
-		log.debug('SessionProvider context check:', false, { 
-			contextType: getCurrentContextType(), 
-			shouldShowSessionWarning 
-		});
-	});
-
-	// Handle session extension
-	async function handleExtendSession() {
-		try {
-			await authStore.extendSession(30); // Extend by 30 minutes
-			log.debug('Session extended via session provider', false);
-		} catch (error) {
-			log.error('Failed to extend session:', false, error);
-		}
-	}
-
-	// Handle logout
-	async function handleLogoutNow() {
-		try {
-			await authStore.logout();
-			log.debug('User logged out via session provider', false);
-			// Navigate to logout page
-			goto(PATH_LOGOUT);
-		} catch (error) {
-			log.error('Failed to logout:', false, error);
-			// Still try to navigate even if logout fails
-			goto(PATH_LOGOUT);
-		}
-	}
-</script>
-
-<!-- Render children -->
-{@render children()}
-
-<!-- Global session warning modal - only show in protected contexts -->
-{#if shouldShowSessionWarning}
-	<SessionWarning
-		bind:show={$showSessionWarning}
-		timeRemaining={$sessionTimeRemaining}
-		onExtendSession={handleExtendSession}
-		onLogoutNow={handleLogoutNow}
-		autoLogoutEnabled={true}
-	/>
-{/if}
diff --git a/packages/yakkl-wallet/src/lib/components/v1/SessionWarning.svelte b/packages/yakkl-wallet/src/lib/components/v1/SessionWarning.svelte
deleted file mode 100644
index 1821fec..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/SessionWarning.svelte
+++ /dev/null
@@ -1,210 +0,0 @@
-<!-- SessionWarning.svelte -->
-<script lang="ts">
-	import Modal from './Modal.svelte';
-	import { log } from '$lib/common/logger-wrapper';
-
-	interface Props {
-		show: boolean;
-		timeRemaining: number; // in seconds
-		onExtendSession: () => void;
-		onLogoutNow: () => void;
-		autoLogoutEnabled?: boolean;
-	}
-
-	let {
-		show = $bindable(false),
-		timeRemaining,
-		onExtendSession,
-		onLogoutNow,
-		autoLogoutEnabled = true
-	}: Props = $props();
-
-	let countdownInterval: ReturnType<typeof setInterval> | null = null;
-	let localTimeRemaining = $state(timeRemaining);
-
-	// Format time as MM:SS with input validation
-	const formattedTime = $derived(() => {
-		try {
-			// Validate and sanitize input
-			const timeValue = localTimeRemaining || 0;
-			const validTimeRemaining = Math.max(0, Math.floor(timeValue));
-			const minutes = Math.floor(validTimeRemaining / 60);
-			const seconds = validTimeRemaining % 60;
-			return `${minutes}:${seconds.toString().padStart(2, '0')}`;
-		} catch (error) {
-			log.error('Error formatting time:', false, error);
-			return '0:00';
-		}
-	});
-
-	const isUrgent = $derived(localTimeRemaining <= 30); // Last 30 seconds
-	const isCritical = $derived(localTimeRemaining <= 10); // Last 10 seconds
-
-	// Update local countdown
-	$effect(() => {
-		localTimeRemaining = timeRemaining;
-	});
-
-	// Handle countdown and auto-logout
-	$effect(() => {
-		if (show && autoLogoutEnabled) {
-			countdownInterval = setInterval(() => {
-				localTimeRemaining--;
-
-				if (localTimeRemaining <= 0) {
-					log.warn('Session expired - auto logout', false);
-					handleLogoutNow();
-				}
-			}, 1000);
-
-			return () => {
-				if (countdownInterval) {
-					clearInterval(countdownInterval);
-					countdownInterval = null;
-				}
-			};
-		}
-	});
-
-	// Cleanup on component destruction
-	$effect(() => {
-		return () => {
-			if (countdownInterval) {
-				clearInterval(countdownInterval);
-			}
-		};
-	});
-
-	function handleExtendSession() {
-		try {
-			onExtendSession();
-			show = false;
-			log.debug('Session extended by user', false);
-		} catch (error) {
-			log.error('Failed to extend session:', false, error);
-		}
-	}
-
-	function handleLogoutNow() {
-		try {
-			if (countdownInterval) {
-				clearInterval(countdownInterval);
-				countdownInterval = null;
-			}
-			onLogoutNow();
-			show = false;
-			log.debug('User logged out via session warning', false);
-		} catch (error) {
-			log.error('Failed to logout:', false, error);
-		}
-	}
-
-	// Keyboard shortcuts
-	function handleKeydown(event: KeyboardEvent) {
-		if (!show) return;
-
-		if (event.key === 'Enter') {
-			event.preventDefault();
-			event.stopPropagation();
-			handleExtendSession();
-		} else if (event.key === 'Escape') {
-			event.preventDefault();
-			event.stopPropagation();
-			handleLogoutNow();
-		}
-	}
-</script>
-
-<svelte:window on:keydown={handleKeydown} />
-
-<Modal bind:show title="Session Expiring" className="z-[800]" preventClose={false} onClose={handleLogoutNow}>
-	<div class="p-6 text-center space-y-6">
-		<!-- Warning icon and countdown -->
-		<div class="flex flex-col items-center space-y-4">
-			<div class="relative">
-				<svg
-					class="w-16 h-16 {isCritical
-						? 'text-red-500 animate-pulse'
-						: isUrgent
-							? 'text-orange-500 animate-bounce'
-							: 'text-yellow-500'}"
-					fill="none"
-					stroke="currentColor"
-					viewBox="0 0 24 24"
-					aria-hidden="true"
-				>
-					<path
-						stroke-linecap="round"
-						stroke-linejoin="round"
-						stroke-width="2"
-						d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"
-					/>
-				</svg>
-				{#if isCritical}
-					<div class="absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full animate-ping"></div>
-				{/if}
-			</div>
-
-			<div class="text-center">
-				<h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2">
-					Your session is about to expire
-				</h3>
-				<div
-					class="text-3xl font-mono font-bold {isCritical
-						? 'text-red-500'
-						: isUrgent
-							? 'text-orange-500'
-							: 'text-yellow-600'}"
-				>
-					{formattedTime}
-				</div>
-				<p class="text-sm text-gray-600 dark:text-gray-400 mt-2">
-					{isCritical
-						? 'Logging out in seconds!'
-						: isUrgent
-							? 'Time is running out!'
-							: 'You will be automatically logged out for security.'}
-				</p>
-			</div>
-		</div>
-
-		<!-- Session info -->
-		<div class="bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg">
-			<p class="text-sm text-blue-800 dark:text-blue-200">
-				For your security, we automatically log you out after periods of inactivity. You can extend
-				your session to continue working.
-			</p>
-		</div>
-
-		<!-- Action buttons -->
-		<div class="flex gap-4 justify-center">
-			<button
-				onclick={handleLogoutNow}
-				class="px-6 py-3 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-200 dark:bg-gray-700 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors"
-				title="Logout Now (Esc)"
-			>
-				Logout Now
-			</button>
-			<button
-				onclick={handleExtendSession}
-				class="px-6 py-3 text-sm font-medium text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 transition-colors shadow-md {isCritical
-					? 'animate-pulse'
-					: ''}"
-				title="Extend Session (Enter)"
-			>
-				Extend Session (+30 min)
-			</button>
-		</div>
-
-		<!-- Keyboard shortcuts hint -->
-		<div class="text-xs text-gray-500 dark:text-gray-400 border-t pt-4">
-			<p>
-				Keyboard shortcuts: <kbd class="px-1 py-0.5 bg-gray-200 dark:bg-gray-700 rounded text-xs"
-					>Enter</kbd
-				>
-				to extend, <kbd class="px-1 py-0.5 bg-gray-200 dark:bg-gray-700 rounded text-xs">Esc</kbd> to
-				logout
-			</p>
-		</div>
-	</div>
-</Modal>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/Settings.svelte b/packages/yakkl-wallet/src/lib/components/v1/Settings.svelte
deleted file mode 100644
index 8c9f373..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/Settings.svelte
+++ /dev/null
@@ -1,571 +0,0 @@
-<!-- Settings.svelte -->
-<script lang="ts">
-	import { createForm } from 'svelte-forms-lib';
-	import * as yup from 'yup';
-	import Modal from './Modal.svelte';
-	import { getSettings, setSettings, getProfile, setProfileStorage } from '$lib/common/stores';
-	import { log } from '$lib/managers/Logger';
-	import { onMount } from 'svelte';
-	import type { Settings, Profile } from '$lib/common/interfaces';
-	import { SystemTheme, PlanType } from '$lib/common/types';
-
-	interface Props {
-		show?: boolean;
-		onClose?: () => void;
-		onComplete?: () => void;
-	}
-
-	let {
-		show = $bindable(false),
-		onClose = () => (show = false),
-		onComplete = () => {}
-	}: Props = $props();
-
-	let settings: Settings | null = $state(null);
-	let profile: Profile | null = $state(null);
-	let isLoading = $state(false);
-	let isSaving = $state(false);
-	let error = $state('');
-	let success = $state('');
-	let hasChanges = $state(false);
-
-	// Available options
-	const themeOptions = [
-		{ value: SystemTheme.SYSTEM, label: 'System' },
-		{ value: SystemTheme.LIGHT, label: 'Light' },
-		{ value: SystemTheme.DARK, label: 'Dark' }
-	];
-
-	const currencyOptions = [
-		{ value: 'USD', label: 'US Dollar (USD)' },
-		{ value: 'EUR', label: 'Euro (EUR)' },
-		{ value: 'GBP', label: 'British Pound (GBP)' },
-		{ value: 'JPY', label: 'Japanese Yen (JPY)' },
-		{ value: 'CAD', label: 'Canadian Dollar (CAD)' },
-		{ value: 'AUD', label: 'Australian Dollar (AUD)' },
-		{ value: 'CHF', label: 'Swiss Franc (CHF)' },
-		{ value: 'CNY', label: 'Chinese Yuan (CNY)' }
-	];
-
-	const localeOptions = [
-		{ value: 'en-US', label: 'English (US)' },
-		{ value: 'en-GB', label: 'English (UK)' },
-		{ value: 'es-ES', label: 'Spanish' },
-		{ value: 'fr-FR', label: 'French' },
-		{ value: 'de-DE', label: 'German' },
-		{ value: 'it-IT', label: 'Italian' },
-		{ value: 'pt-PT', label: 'Portuguese' },
-		{ value: 'ja-JP', label: 'Japanese' },
-		{ value: 'ko-KR', label: 'Korean' },
-		{ value: 'zh-CN', label: 'Chinese (Simplified)' },
-		{ value: 'zh-TW', label: 'Chinese (Traditional)' }
-	];
-
-	const idleDelayOptions = [
-		{ value: 60, label: '1 minute' },
-		{ value: 300, label: '5 minutes' },
-		{ value: 600, label: '10 minutes' },
-		{ value: 900, label: '15 minutes' },
-		{ value: 1800, label: '30 minutes' },
-		{ value: 3600, label: '1 hour' },
-		{ value: 0, label: 'Never' }
-	];
-
-	// Form validation schema
-	const validationSchema = yup.object().shape({
-		showTestNetworks: yup.boolean(),
-		theme: yup.string().oneOf(Object.values(SystemTheme)),
-		locale: yup.string().required('Locale is required'),
-		currency: yup.string().required('Currency is required'),
-		idleDelayInterval: yup.number().min(0, 'Idle delay must be 0 or positive'),
-		idleAutoLock: yup.boolean(),
-		idleAutoLockCycle: yup.number().min(60, 'Auto-lock cycle must be at least 1 minute'),
-		showHints: yup.boolean(),
-		trialCountdownPinned: yup.boolean()
-	});
-
-	// Initialize form
-	const { form, errors, isValid, touched, updateField } = createForm({
-		initialValues: {
-			showTestNetworks: false,
-			theme: SystemTheme.SYSTEM,
-			locale: 'en-US',
-			currency: 'USD',
-			idleDelayInterval: 300,
-			idleAutoLock: true,
-			idleAutoLockCycle: 180,
-			showHints: true,
-			trialCountdownPinned: false
-		},
-		validationSchema,
-		onSubmit: async (values) => {
-			await saveSettings(values);
-		}
-	});
-
-	// Custom submit handler for Svelte 5
-	async function handleFormSubmit(event: Event) {
-		event.preventDefault();
-		
-		// Validate the form
-		if (!$isValid) {
-			return;
-		}
-		
-		// Call saveSettings directly with form values
-		await saveSettings($form);
-	}
-
-	// Load settings data on mount and when modal opens
-	$effect(() => {
-		if (show) {
-			loadSettingsData();
-		}
-	});
-
-	// Track form changes
-	$effect(() => {
-		if (settings && profile && !isLoading) {
-			const currentValues = $form;
-			// Only track changes if form has been properly initialized
-			const originalValues = {
-				showTestNetworks: profile.preferences?.showTestNetworks ?? false,
-				theme: profile.preferences?.dark ?? SystemTheme.SYSTEM,
-				locale: profile.preferences?.locale ?? 'en-US',
-				currency: profile.preferences?.currency?.code ?? 'USD',
-				idleDelayInterval: profile.preferences?.idleDelayInterval ?? 300,
-				idleAutoLock: profile.preferences?.idleAutoLock ?? true,
-				idleAutoLockCycle: profile.preferences?.idleAutoLockCycle ?? 180,
-				showHints: settings.showHints ?? true,
-				trialCountdownPinned: settings.trialCountdownPinned ?? false
-			};
-
-			hasChanges = 
-				currentValues.showTestNetworks !== originalValues.showTestNetworks ||
-				currentValues.theme !== originalValues.theme ||
-				currentValues.locale !== originalValues.locale ||
-				currentValues.currency !== originalValues.currency ||
-				currentValues.idleDelayInterval !== originalValues.idleDelayInterval ||
-				currentValues.idleAutoLock !== originalValues.idleAutoLock ||
-				currentValues.idleAutoLockCycle !== originalValues.idleAutoLockCycle ||
-				currentValues.showHints !== originalValues.showHints ||
-				currentValues.trialCountdownPinned !== originalValues.trialCountdownPinned;
-		} else {
-			hasChanges = false;
-		}
-	});
-
-	async function loadSettingsData() {
-		isLoading = true;
-		error = '';
-		
-		try {
-			// Load both settings and profile (for preferences)
-			[settings, profile] = await Promise.all([
-				getSettings(),
-				getProfile()
-			]);
-
-			if (!settings) {
-				error = 'Settings not found';
-				return;
-			}
-
-			if (!profile) {
-				error = 'Profile not found';
-				return;
-			}
-
-			// Update form with current settings and preferences
-			updateField('showTestNetworks', profile.preferences?.showTestNetworks ?? false);
-			updateField('theme', profile.preferences?.dark ?? SystemTheme.SYSTEM);
-			updateField('locale', profile.preferences?.locale ?? 'en-US');
-			updateField('currency', profile.preferences?.currency?.code ?? 'USD');
-			updateField('idleDelayInterval', profile.preferences?.idleDelayInterval ?? 300);
-			updateField('idleAutoLock', profile.preferences?.idleAutoLock ?? true);
-			updateField('idleAutoLockCycle', profile.preferences?.idleAutoLockCycle ?? 180);
-			updateField('showHints', settings.showHints ?? true);
-			updateField('trialCountdownPinned', settings.trialCountdownPinned ?? false);
-
-		} catch (e) {
-			log.error('Error loading settings data:', false, e);
-			error = 'Failed to load settings data';
-		} finally {
-			isLoading = false;
-		}
-	}
-
-	async function saveSettings(values: any) {
-		if (!settings || !profile) {
-			error = 'Settings data not loaded';
-			return;
-		}
-
-		isSaving = true;
-		error = '';
-		success = '';
-
-		try {
-			// Update settings
-			const updatedSettings: Settings = {
-				...settings,
-				showHints: values.showHints,
-				trialCountdownPinned: values.trialCountdownPinned,
-				updateDate: new Date().toISOString()
-			};
-
-			// Update preferences in profile
-			const updatedProfile: Profile = {
-				...profile,
-				preferences: {
-					...profile.preferences,
-					showTestNetworks: values.showTestNetworks,
-					dark: values.theme,
-					locale: values.locale,
-					currency: {
-						...profile.preferences.currency,
-						code: values.currency
-					},
-					idleDelayInterval: values.idleDelayInterval,
-					idleAutoLock: values.idleAutoLock,
-					idleAutoLockCycle: values.idleAutoLockCycle,
-					updateDate: new Date().toISOString()
-				},
-				updateDate: new Date().toISOString()
-			};
-
-			// Save both settings and profile
-			await Promise.all([
-				setSettings(updatedSettings),
-				setProfileStorage(updatedProfile)
-			]);
-
-			// Update local references to reflect saved state
-			settings = updatedSettings;
-			profile = updatedProfile;
-
-			success = 'Settings updated successfully!';
-			hasChanges = false;
-			
-			// Call completion callback
-			onComplete();
-
-			// Call completion callback
-			onComplete();
-
-			// Close modal with a small delay to ensure state updates complete
-			setTimeout(() => {
-				show = false;
-				isSaving = false;
-			}, 100);
-
-		} catch (e: any) {
-			const errorMsg = 'Failed to save settings changes: ' + e.message;
-			log.error('Error saving settings:', false, e);
-			error = errorMsg;
-			isSaving = false;
-		}
-	}
-
-	function handleClose() {
-		if (hasChanges) {
-			if (confirm('You have unsaved changes. Are you sure you want to close?')) {
-				show = false;
-				onClose();
-			}
-		} else {
-			show = false;
-			onClose();
-		}
-	}
-
-	function resetForm() {
-		if (settings && profile) {
-			updateField('showTestNetworks', profile.preferences?.showTestNetworks ?? false);
-			updateField('theme', profile.preferences?.dark ?? SystemTheme.SYSTEM);
-			updateField('locale', profile.preferences?.locale ?? 'en-US');
-			updateField('currency', profile.preferences?.currency?.code ?? 'USD');
-			updateField('idleDelayInterval', profile.preferences?.idleDelayInterval ?? 300);
-			updateField('idleAutoLock', profile.preferences?.idleAutoLock ?? true);
-			updateField('idleAutoLockCycle', profile.preferences?.idleAutoLockCycle ?? 180);
-			updateField('showHints', settings.showHints ?? true);
-			updateField('trialCountdownPinned', settings.trialCountdownPinned ?? false);
-		}
-	}
-
-	function getPlanLabel(planType: PlanType): string {
-		switch (planType) {
-			case PlanType.BASIC_MEMBER:
-				return 'Basic Member';
-			case PlanType.YAKKL_PRO:
-				return 'YAKKL Pro';
-			case PlanType.YAKKL_PREMIUM:
-				return 'YAKKL Premium';
-			default:
-				return 'Unknown';
-		}
-	}
-</script>
-
-<Modal bind:show title="Account Settings" onClose={handleClose} className="max-w-2xl">
-	<div class="space-y-6 p-6">
-		{#if isLoading}
-			<div class="flex items-center justify-center py-8">
-				<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"></div>
-				<span class="ml-2 text-gray-600">Loading settings...</span>
-			</div>
-		{:else}
-			<form onsubmit={handleFormSubmit} class="space-y-6">
-				<!-- Account Information (Read-only) -->
-				{#if settings && profile}
-					<div class="bg-gray-50 p-4 rounded-lg">
-						<h3 class="text-lg font-medium text-gray-900 mb-3">Account Information</h3>
-						<div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
-							<div>
-								<span class="font-medium text-gray-700">Plan:</span>
-								<span class="ml-2 text-gray-600">{getPlanLabel(settings.plan.type)}</span>
-							</div>
-							<div>
-								<span class="font-medium text-gray-700">Member since:</span>
-								<span class="ml-2 text-gray-600">{new Date(settings.createDate).toLocaleDateString()}</span>
-							</div>
-							<div>
-								<span class="font-medium text-gray-700">Profile ID:</span>
-								<span class="ml-2 text-gray-600 font-mono text-xs">{settings.id.substring(0, 8)}...</span>
-							</div>
-							<div>
-								<span class="font-medium text-gray-700">Version:</span>
-								<span class="ml-2 text-gray-600">{settings.version}</span>
-							</div>
-						</div>
-					</div>
-				{/if}
-
-				<!-- Display & Theme Settings -->
-				<div>
-					<h3 class="text-lg font-medium text-gray-900 mb-4">Display & Theme</h3>
-					<div class="space-y-4">
-						<div>
-							<label for="theme" class="block text-sm font-medium text-gray-700 mb-1">
-								Theme
-							</label>
-							<select
-								id="theme"
-								bind:value={$form.theme}
-								class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
-							>
-								{#each themeOptions as option}
-									<option value={option.value}>{option.label}</option>
-								{/each}
-							</select>
-						</div>
-
-						<div class="flex items-center">
-							<input
-								id="showTestNetworks"
-								type="checkbox"
-								bind:checked={$form.showTestNetworks}
-								class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"
-							/>
-							<label for="showTestNetworks" class="ml-2 block text-sm text-gray-900">
-								Show test networks
-							</label>
-						</div>
-
-						<div class="flex items-center">
-							<input
-								id="showHints"
-								type="checkbox"
-								bind:checked={$form.showHints}
-								class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"
-							/>
-							<label for="showHints" class="ml-2 block text-sm text-gray-900">
-								Show helpful hints and tips
-							</label>
-						</div>
-					</div>
-				</div>
-
-				<!-- Localization Settings -->
-				<div>
-					<h3 class="text-lg font-medium text-gray-900 mb-4">Localization</h3>
-					<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
-						<div>
-							<label for="locale" class="block text-sm font-medium text-gray-700 mb-1">
-								Language <span class="text-red-500">*</span>
-							</label>
-							<select
-								id="locale"
-								bind:value={$form.locale}
-								class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
-								class:border-red-500={$errors.locale && $touched.locale}
-							>
-								{#each localeOptions as option}
-									<option value={option.value}>{option.label}</option>
-								{/each}
-							</select>
-							{#if $errors.locale && $touched.locale}
-								<p class="mt-1 text-sm text-red-600">{$errors.locale}</p>
-							{/if}
-						</div>
-
-						<div>
-							<label for="currency" class="block text-sm font-medium text-gray-700 mb-1">
-								Currency <span class="text-red-500">*</span>
-							</label>
-							<select
-								id="currency"
-								bind:value={$form.currency}
-								class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
-								class:border-red-500={$errors.currency && $touched.currency}
-							>
-								{#each currencyOptions as option}
-									<option value={option.value}>{option.label}</option>
-								{/each}
-							</select>
-							{#if $errors.currency && $touched.currency}
-								<p class="mt-1 text-sm text-red-600">{$errors.currency}</p>
-							{/if}
-						</div>
-					</div>
-				</div>
-
-				<!-- Security Settings -->
-				<div>
-					<h3 class="text-lg font-medium text-gray-900 mb-4">Security & Privacy</h3>
-					<div class="space-y-4">
-						<div>
-							<label for="idleDelayInterval" class="block text-sm font-medium text-gray-700 mb-1">
-								Auto-lock after idle time
-							</label>
-							<select
-								id="idleDelayInterval"
-								bind:value={$form.idleDelayInterval}
-								class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
-							>
-								{#each idleDelayOptions as option}
-									<option value={option.value}>{option.label}</option>
-								{/each}
-							</select>
-							<p class="mt-1 text-sm text-gray-500">
-								Automatically lock the wallet after the specified time of inactivity
-							</p>
-						</div>
-
-						<div class="flex items-center">
-							<input
-								id="idleAutoLock"
-								type="checkbox"
-								bind:checked={$form.idleAutoLock}
-								class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"
-							/>
-							<label for="idleAutoLock" class="ml-2 block text-sm text-gray-900">
-								Enable automatic idle lock
-							</label>
-						</div>
-
-						{#if $form.idleAutoLock}
-							<div>
-								<label for="idleAutoLockCycle" class="block text-sm font-medium text-gray-700 mb-1">
-									Auto-lock cycle (seconds)
-								</label>
-								<input
-									id="idleAutoLockCycle"
-									type="number"
-									bind:value={$form.idleAutoLockCycle}
-									min="60"
-									max="3600"
-									step="60"
-									class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
-									class:border-red-500={$errors.idleAutoLockCycle && $touched.idleAutoLockCycle}
-								/>
-								{#if $errors.idleAutoLockCycle && $touched.idleAutoLockCycle}
-									<p class="mt-1 text-sm text-red-600">{$errors.idleAutoLockCycle}</p>
-								{/if}
-								<p class="mt-1 text-sm text-gray-500">
-									How often to check for idle activity (minimum 60 seconds)
-								</p>
-							</div>
-						{/if}
-					</div>
-				</div>
-
-				<!-- Trial Settings (if applicable) -->
-				{#if settings?.plan?.trialEndDate}
-					<div>
-						<h3 class="text-lg font-medium text-gray-900 mb-4">Trial Settings</h3>
-						<div class="flex items-center">
-							<input
-								id="trialCountdownPinned"
-								type="checkbox"
-								bind:checked={$form.trialCountdownPinned}
-								class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"
-							/>
-							<label for="trialCountdownPinned" class="ml-2 block text-sm text-gray-900">
-								Pin trial countdown to top of interface
-							</label>
-						</div>
-					</div>
-				{/if}
-
-				<!-- Status Messages -->
-				{#if error}
-					<div class="rounded-md bg-red-50 p-4">
-						<p class="text-sm font-medium text-red-800">{error}</p>
-					</div>
-				{/if}
-
-				{#if success}
-					<div class="rounded-md bg-green-50 p-4">
-						<p class="text-sm font-medium text-green-800">{success}</p>
-					</div>
-				{/if}
-
-				<!-- Form Actions -->
-				<div class="flex justify-between pt-5">
-					<button
-						type="button"
-						onclick={resetForm}
-						class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
-						disabled={!hasChanges || isSaving}
-					>
-						Reset
-					</button>
-					
-					<div class="flex space-x-3">
-						<button
-							type="button"
-							onclick={handleClose}
-							class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
-							disabled={isSaving}
-						>
-							Cancel
-						</button>
-						
-						<button
-							type="submit"
-							class="px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"
-							disabled={!$isValid || !hasChanges || isSaving}
-						>
-							{#if isSaving}
-								<span class="flex items-center">
-									<div class="animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"></div>
-									Saving...
-								</span>
-							{:else}
-								Save Changes
-							{/if}
-						</button>
-					</div>
-				</div>
-
-				<!-- Last Updated Info -->
-				{#if settings?.updateDate}
-					<div class="text-xs text-gray-500 text-center pt-2 border-t">
-						Last updated: {new Date(settings.updateDate).toLocaleString()}
-					</div>
-				{/if}
-			</form>
-		{/if}
-	</div>
-</Modal>
\ No newline at end of file
diff --git a/packages/yakkl-wallet/src/lib/components/v1/Share.svelte b/packages/yakkl-wallet/src/lib/components/v1/Share.svelte
deleted file mode 100644
index 3bd4f84..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/Share.svelte
+++ /dev/null
@@ -1,130 +0,0 @@
-<script lang="ts">
-	import { log } from '$lib/managers/Logger';
-	import { handleOpenInTab } from '$lib/utilities';
-	import { Popover } from 'flowbite-svelte';
-
-	interface Props {
-		[key: string]: any;
-	}
-
-	let { ...rest }: Props = $props();
-
-	async function handleShare(event: MouseEvent): Promise<void> {
-		event.preventDefault(); // Modern way to prevent default
-
-		const target = event.currentTarget as HTMLElement;
-		const id = target?.dataset?.id;
-
-		if (!id) {
-			log.error('No ID found');
-			return;
-		}
-
-		let message: string;
-		let url: string = '';
-
-		if (id === 'twitter') {
-			message =
-				'Spreading the love! @yakklcrypto YAKKL Smart Wallet is awesome! Their website is: https://yakkl.com and you can download the Smart Wallet at the Chrome Browser Extension store: ';
-			url = encodeURI(
-				`https://twitter.com/intent/tweet?hashtags=crypto,yakkl,bitcoin,ethereum&via=yakklcrypto&original_referer=https://yakkl.com&ref_src=YAKKL&url=https://chrome.google.com/webstore/detail/dpmfhilhjlhhakpbieclcghochdofeao/&text=${message}`
-			);
-		} else if (id === 'linkedin') {
-			message =
-				"Can't wait to share the love of YAKKL Smart Wallet! Download the best Crypto Smart Wallet at (Google Chrome Store) https://chrome.google.com/webstore/detail/dpmfhilhjlhhakpbieclcghochdofeao/. The website is: https://yakkl.com.";
-			url = encodeURI(
-				`https://www.linkedin.com/sharing/share-offsite?url=https://yakkl.com/?utm_source=linkedin&utm_medium=share&title=${message}`
-			);
-		}
-
-		if (url) {
-			handleOpenInTab(url);
-		}
-	}
-</script>
-
-<Popover
-	triggeredBy="#share"
-	placement="bottom-start"
-	class="w-[200px] text-sm font-normal text-gray-900 bg-white dark:text-gray-400 dark:border-gray-600 dark:bg-gray-800 z-100"
->
-	<div class="p-1 block">
-		<div class="flex text-center justify-center m-2 ml-0 w-full">
-			<svg
-				xmlns="http://www.w3.org/2000/svg"
-				viewBox="0 0 24 24"
-				class="w-6 h-6 fill-red-700 animate-pulse"
-			>
-				<path
-					d="M11.645 20.91l-.007-.003-.022-.012a15.247 15.247 0 01-.383-.218 25.18 25.18 0 01-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0112 5.052 5.5 5.5 0 0116.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 01-4.244 3.17 15.247 15.247 0 01-.383.219l-.022.012-.007.004-.003.001a.752.752 0 01-.704 0l-.003-.001z"
-				/>
-			</svg>
-			<p class="ml-1 text-sm font-bold text-center text-purple-600">SHARE THE LOVE!</p>
-		</div>
-
-		<!-- Social Media Buttons -->
-		<button
-			id="twitter"
-			data-id="twitter"
-			onclick={handleShare}
-			class="flex flex-row rounded-md ml-6 text-base font-semibold text-gray-900 dark:text-wwhite hover:bg-gray-200 w-full text-left"
-		>
-			<svg
-				viewBox="0 0 1200 1227"
-				xmlns="http://www.w3.org/2000/svg"
-				class="flex flex-col w-5 h-5 mt-[.1rem] mr-1 bg-black"
-			>
-				<path
-					d="M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z"
-					fill="white"
-				/>
-			</svg>
-			<span
-				class="ml-3 flex flex-col text-base font-semibold text-gray-900 dark:text-base-content hover:text-slate-600 dark:hover:text-gray-900"
-				>X (twitter)</span
-			>
-		</button>
-
-		<button
-			id="linkedin"
-			data-id="linkedin"
-			onclick={handleShare}
-			class="my-1 flex flex-row rounded-md ml-6 text-base font-semibold text-gray-900 dark:text-white hover:bg-gray-200 w-full text-left"
-		>
-			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="flex flex-col w-6 h-6">
-				<path
-					d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"
-				/>
-			</svg>
-			<span
-				class="ml-3 flex flex-col text-base font-semibold text-gray-900 dark:text-base-content hover:text-slate-600 dark:hover:text-gray-900"
-				>LinkedIn</span
-			>
-		</button>
-	</div>
-</Popover>
-
-<!-- Share Button -->
-<!-- svelte-ignore a11y_consider_explicit_label -->
-<button
-	id="share"
-	onclick={handleShare}
-	{...rest}
-	class="bg-transparent border-none p-0 cursor-pointer"
->
-	<svg
-		xmlns="http://www.w3.org/2000/svg"
-		viewBox="0 0 24 24"
-		fill="currentColor"
-		class="w-7 h-7 fill-gray-100 hover:fill-gray-400"
-	>
-		<path
-			fill-rule="evenodd"
-			d="M15.75 4.5a3 3 0 11.825 2.066l-8.421 4.679a3.002 3.002 0 010 1.51l8.421 4.679a3 3 0 11-.729 1.31l-8.421-4.678a3 3 0 110-4.132l8.421-4.679a3 3 0 01-.096-.755z"
-			clip-rule="evenodd"
-		/>
-	</svg>
-	<!-- <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-7 h-7 fill-gray-100 hover:fill-gray-400">
-    <path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5" />
-  </svg> -->
-</button>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/SimpleTooltip.svelte b/packages/yakkl-wallet/src/lib/components/v1/SimpleTooltip.svelte
deleted file mode 100644
index 9066554..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/SimpleTooltip.svelte
+++ /dev/null
@@ -1,26 +0,0 @@
-<script lang="ts">
-	const {
-		content = '',
-		position = 'top',
-		children
-	} = $props<{
-		content: string;
-		position?: 'top' | 'bottom' | 'left' | 'right';
-		children?: any;
-	}>();
-</script>
-
-<span class="relative group inline-block">
-	{@render children()}
-
-	<span
-		class={`absolute z-10 px-2 py-1 rounded bg-zinc-900 text-zinc-100 text-xs opacity-0 group-hover:opacity-100 transition pointer-events-none whitespace-nowrap
-      ${position === 'top' ? 'bottom-full left-1/2 -translate-x-1/2 mb-2' : ''}
-      ${position === 'bottom' ? 'top-full left-1/2 -translate-x-1/2 mt-2' : ''}
-      ${position === 'left' ? 'right-full top-1/2 -translate-y-1/2 mr-2' : ''}
-      ${position === 'right' ? 'left-full top-1/2 -translate-y-1/2 ml-2' : ''}
-    `}
-	>
-		{content}
-	</span>
-</span>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/SimpleTooltipWrapper.svelte b/packages/yakkl-wallet/src/lib/components/v1/SimpleTooltipWrapper.svelte
deleted file mode 100644
index 1555a71..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/SimpleTooltipWrapper.svelte
+++ /dev/null
@@ -1,34 +0,0 @@
-<script lang="ts">
-  import SimpleTooltip from '../SimpleTooltip.svelte';
-  
-  interface Props {
-    content: string;
-    side?: 'top' | 'right' | 'bottom' | 'left';
-    align?: 'start' | 'center' | 'end';
-    sideOffset?: number;
-    alignOffset?: number;
-    triggerClass?: string;
-    contentClass?: string;
-    children?: any;
-  }
-
-  let {
-    content,
-    side = 'top',
-    align = 'center',
-    sideOffset = 4,
-    alignOffset = 0,
-    triggerClass = '',
-    contentClass = '',
-    children
-  }: Props = $props();
-
-  // Map side prop to position for SimpleTooltip
-  let position = $derived(side as 'top' | 'bottom' | 'left' | 'right');
-</script>
-
-<SimpleTooltip content={content} position={position}>
-  <span class={triggerClass}>
-    {@render children?.()}
-  </span>
-</SimpleTooltip>
\ No newline at end of file
diff --git a/packages/yakkl-wallet/src/lib/components/v1/SkeletonBalance.svelte b/packages/yakkl-wallet/src/lib/components/v1/SkeletonBalance.svelte
deleted file mode 100644
index 405fa12..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/SkeletonBalance.svelte
+++ /dev/null
@@ -1,32 +0,0 @@
-<!-- SkeletonBalance.svelte - Loading placeholder for balance data -->
-<script lang="ts">
-	interface Props {
-		className?: string;
-		showLabel?: boolean;
-	}
-
-	let { className = '', showLabel = true }: Props = $props();
-</script>
-
-<div class="animate-pulse {className}">
-	{#if showLabel}
-		<div class="h-3 bg-gray-200 rounded w-16 mb-1"></div>
-	{/if}
-	<div class="h-4 bg-gray-300 rounded w-20"></div>
-</div>
-
-<style>
-	@keyframes pulse {
-		0%,
-		100% {
-			opacity: 1;
-		}
-		50% {
-			opacity: 0.5;
-		}
-	}
-
-	.animate-pulse {
-		animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
-	}
-</style>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/Sponsorship.svelte b/packages/yakkl-wallet/src/lib/components/v1/Sponsorship.svelte
deleted file mode 100644
index a9be4de..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/Sponsorship.svelte
+++ /dev/null
@@ -1,229 +0,0 @@
-<!-- File: src/lib/components/Sponsorship.svelte -->
-<script lang="ts">
-	import { onMount, onDestroy } from 'svelte';
-	import { fade } from 'svelte/transition';
-	import { cn } from '$lib/utils';
-
-	export interface Sponsor {
-		id: string;
-		name: string;
-		url?: string;
-		content: string | HTMLElement;
-		weight: number;
-		maxImpressions?: number;
-		duration: number;
-		startDate?: Date;
-		endDate?: Date;
-		targetAudience?: string[];
-		category?: string;
-		analytics?: {
-			clicks: number;
-			impressions: number;
-			lastShown?: Date;
-		};
-	}
-
-	interface Props {
-		sponsors: Sponsor[];
-		show?: boolean;
-		autoRotate?: boolean;
-		className?: string;
-		onSponsorClick?: (sponsor: Sponsor) => void;
-		onSponsorImpression?: (sponsor: Sponsor) => void;
-		analyticsEnabled?: boolean;
-		overrideHeight?: string;
-	}
-
-	let {
-		sponsors = [],
-		show = $bindable(true),
-		autoRotate = true,
-		className = '',
-		onSponsorClick = () => {},
-		onSponsorImpression = () => {},
-		analyticsEnabled = true,
-		overrideHeight = ''
-	}: Props = $props();
-
-	let currentIndex = $state(0);
-	let isTransitioning = $state(false);
-	let currentSponsor = $state<Sponsor | null>(null);
-	let rotationInterval: number | null = null;
-	let containerElement: HTMLElement;
-
-	// Calculate weighted random selection
-	function getNextSponsor(): Sponsor {
-		const validSponsors = sponsors.filter((sponsor) => {
-			const now = new Date();
-			const hasValidDates =
-				(!sponsor.startDate || now >= sponsor.startDate) &&
-				(!sponsor.endDate || now <= sponsor.endDate);
-			const hasValidImpressions =
-				!sponsor.maxImpressions || (sponsor.analytics?.impressions || 0) < sponsor.maxImpressions;
-			return hasValidDates && hasValidImpressions;
-		});
-
-		if (validSponsors.length === 0) return null;
-
-		const totalWeight = validSponsors.reduce((sum, sponsor) => sum + sponsor.weight, 0);
-		let random = Math.random() * totalWeight;
-
-		for (const sponsor of validSponsors) {
-			random -= sponsor.weight;
-			if (random <= 0) return sponsor;
-		}
-
-		return validSponsors[0];
-	}
-
-	function rotateSponsor() {
-		if (isTransitioning || sponsors.length <= 1) return;
-
-		isTransitioning = true;
-		const nextSponsor = getNextSponsor();
-
-		if (nextSponsor) {
-			setTimeout(() => {
-				currentSponsor = nextSponsor;
-				if (analyticsEnabled) {
-					trackImpression(nextSponsor);
-				}
-				isTransitioning = false;
-			}, 300);
-		}
-	}
-
-	function trackImpression(sponsor: Sponsor) {
-		if (!sponsor.analytics) {
-			sponsor.analytics = { clicks: 0, impressions: 0 };
-		}
-
-		// Only count as impression if it's been at least 30 seconds since last shown
-		const now = new Date();
-		const lastShown = sponsor.analytics.lastShown;
-		const timeSinceLastImpression = lastShown ? now.getTime() - lastShown.getTime() : Infinity;
-
-		if (timeSinceLastImpression >= 30000) {
-			// 30 seconds
-			sponsor.analytics.impressions++;
-			sponsor.analytics.lastShown = now;
-			onSponsorImpression(sponsor);
-		}
-	}
-
-	function handleClick() {
-		if (currentSponsor?.url) {
-			if (analyticsEnabled && currentSponsor.analytics) {
-				currentSponsor.analytics.clicks++;
-			}
-			onSponsorClick(currentSponsor);
-			window.open(currentSponsor.url, '_blank');
-		}
-	}
-
-	function startRotation() {
-		if (!autoRotate || !currentSponsor || sponsors.length <= 1) return;
-
-		rotationInterval = window.setInterval(() => {
-			rotateSponsor();
-		}, currentSponsor.duration);
-	}
-
-	function stopRotation() {
-		if (rotationInterval) {
-			clearInterval(rotationInterval);
-			rotationInterval = null;
-		}
-	}
-
-	onMount(() => {
-		currentSponsor = getNextSponsor();
-		if (currentSponsor && analyticsEnabled) {
-			trackImpression(currentSponsor);
-		}
-		startRotation();
-	});
-
-	onDestroy(() => {
-		stopRotation();
-	});
-
-	// Watch for changes in the show prop
-	$effect(() => {
-		if (show) {
-			startRotation();
-		} else {
-			stopRotation();
-		}
-	});
-
-	// Watch for changes in sponsors array
-	$effect(() => {
-		if (sponsors.length > 0 && !currentSponsor) {
-			currentSponsor = getNextSponsor();
-			if (currentSponsor && analyticsEnabled) {
-				trackImpression(currentSponsor);
-			}
-		}
-	});
-</script>
-
-<div
-	bind:this={containerElement}
-	class={cn(
-		'relative w-full overflow-hidden rounded-lg',
-		'transition-all duration-300 ease-in-out',
-		className
-	)}
-	style={overrideHeight ? `height: ${overrideHeight}` : ''}
->
-	{#if show && currentSponsor}
-		<div
-			class="w-full h-full cursor-pointer"
-			onclick={handleClick}
-			onkeydown={(e) => e.key === 'Enter' && handleClick()}
-			role="button"
-			tabindex="0"
-			transition:fade={{ duration: 300 }}
-		>
-			{@html currentSponsor.content}
-		</div>
-	{/if}
-</div>
-
-<!-- Example usage -->
-<!--
-<script>
-  import SectionCard from '$lib/components/SectionCard.svelte';
-  import Sponsorship from '$lib/components/Sponsorship.svelte';
-
-  const sponsors = [
-    {
-      id: 'sponsor1',
-      name: 'Example Sponsor',
-      url: 'https://example.com',
-      content: '<img src="sponsor1.png" alt="Sponsor 1" class="w-full h-auto" />',
-      weight: 1,
-      duration: 5000,
-      category: 'premium'
-    },
-    // Add more sponsors...
-  ];
-
-  function handleSponsorClick(sponsor) {
-    console.log('Sponsor clicked:', sponsor.name);
-  }
-
-  function handleSponsorImpression(sponsor) {
-    console.log('Sponsor impression:', sponsor.name);
-  }
-</script>
-
-<SectionCard title="Sponsors" icon={SponsorIcon}>
-  <Sponsorship
-    {sponsors}
-    onSponsorClick={handleSponsorClick}
-    onSponsorImpression={handleSponsorImpression}
-    className="min-h-[200px]"
-  />
-</SectionCard> -->
diff --git a/packages/yakkl-wallet/src/lib/components/v1/StarRating.svelte b/packages/yakkl-wallet/src/lib/components/v1/StarRating.svelte
deleted file mode 100644
index 741ad7c..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/StarRating.svelte
+++ /dev/null
@@ -1,79 +0,0 @@
-<script lang="ts">
-	import { log } from '$lib/managers/Logger';
-	import { handleOpenInTab } from '$lib/utilities/utilities';
-	import { Popover } from 'flowbite-svelte';
-	interface Props {
-		[key: string]: any;
-	}
-
-	let { ...rest }: Props = $props();
-
-	async function handleShare(event: MouseEvent): Promise<any> {
-		const id = (event.currentTarget as HTMLElement).dataset.id;
-		if (!id) {
-			log.error('No ID found');
-			return;
-		}
-		// Popup share button for twitter, fb, linkedin, reddit
-		let message;
-		let url: string = '';
-
-		if (id === 'twitter') {
-			message =
-				'Spreading the love! @yakklcrypto YAKKL Smart Wallet is awesome! Their website is: https://yakkl.com and you can download the Wallet at the Chrome Browser Extension store: ';
-			url = encodeURI(
-				`https://twitter.com/intent/tweet?hashtags=crypto,yakkl,bitcoin,ethereum&via=yakklcrypto&original_referer=https://yakkl.com&ref_src=YAKKL&url=https://chrome.google.com/webstore/detail/nlhmgobjaicpkegfdklfgmmdehkmmonl/&text=${message}`
-			);
-		} else if (id === 'linkedin') {
-			// This will popup the linked window for the user to submit or edit and then submit
-			//https://www.linkedin.com/sharing/share-offsite?url=https://yakkl.com/share/<something that we may change on different days or picks randomly>&title=<whatever>
-			message =
-				"Can't wait to share the love of YAKKL Smart Wallet! Their website is: https://yakkl.com and you can download the Wallet at the Chrome Browser Extension store: ";
-			url = encodeURI(
-				`https://www.linkedin.com/sharing/share-offsite?url=https://yakkl.com/share/linkedin&title=${message}`
-			);
-		}
-
-		handleOpenInTab(url);
-	}
-</script>
-
-<Popover
-	triggeredBy="#share"
-	placement="bottom-start"
-	class="w-40 text-sm font-normal text-gray-900 bg-white dark:text-gray-400 dark:border-gray-600 dark:bg-gray-800 z-100"
->
-	<div class="p-1">
-		<p class="text-sm font-bold text-center text-purple-600">RATE US</p>
-		<p class="mb-2 text-sm font-normal text-center">Let us know how we can improve!</p>
-
-		<p class="text-sm font-bold text-center text-purple-600">Love lever :)</p>
-		<div class="rating rating-sm">
-			<input type="radio" name="rating-6" class="mask mask-star-2 bg-orange-400" />
-			<input type="radio" name="rating-6" class="mask mask-star-2 bg-orange-400" />
-			<input type="radio" name="rating-6" class="mask mask-star-2 bg-orange-400" />
-			<input type="radio" name="rating-6" class="mask mask-star-2 bg-orange-400" />
-			<input type="radio" name="rating-6" class="mask mask-star-2 bg-orange-400" checked />
-		</div>
-	</div>
-</Popover>
-
-<!-- Share -->
-<!-- svelte-ignore a11y_click_events_have_key_events -->
-<!-- svelte-ignore a11y_interactive_supports_focus -->
-<div id="share" role="button" onclick={handleShare} {...rest}>
-	<svg
-		xmlns="http://www.w3.org/2000/svg"
-		viewBox="0 0 24 24"
-		fill="currentColor"
-		class="w-7 h-7 fill-gray-100 hover:fill-gray-400"
-	>
-		<path
-			fill-rule="evenodd"
-			d="M15.75 4.5a3 3 0 11.825 2.066l-8.421 4.679a3.002 3.002 0 010 1.51l8.421 4.679a3 3 0 11-.729 1.31l-8.421-4.678a3 3 0 110-4.132l8.421-4.679a3 3 0 01-.096-.755z"
-			clip-rule="evenodd"
-		/>
-	</svg>
-
-	<!-- Add comment box and maybe put this in a dialog box -->
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/SubAccountIndicator.svelte b/packages/yakkl-wallet/src/lib/components/v1/SubAccountIndicator.svelte
deleted file mode 100644
index a68141a..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/SubAccountIndicator.svelte
+++ /dev/null
@@ -1,56 +0,0 @@
-<!-- SubAccountIndicator.svelte - Shows sub-account count for primary accounts -->
-<script lang="ts">
-	import type { YakklAccount } from '$lib/common';
-	import { AccountTypeCategory } from '$lib/common/types';
-
-	interface Props {
-		primaryAccount: YakklAccount;
-		allAccounts: YakklAccount[];
-		className?: string;
-	}
-
-	let { primaryAccount, allAccounts, className = '' }: Props = $props();
-
-	// Calculate sub-accounts for this primary account
-	const subAccounts = $derived(() => {
-		if (primaryAccount.accountType !== AccountTypeCategory.PRIMARY) {
-			return [];
-		}
-
-		return allAccounts.filter(
-			(account) =>
-				account.accountType === AccountTypeCategory.SUB &&
-				account.primaryAccount?.address === primaryAccount.address
-		);
-	});
-
-	const subAccountCount = $derived(subAccounts().length);
-</script>
-
-{#if subAccountCount > 0}
-	<div class="flex items-center space-x-1 {className}">
-		<!-- Sub-account icon -->
-		<div class="relative">
-			<svg class="w-4 h-4 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
-				<path
-					stroke-linecap="round"
-					stroke-linejoin="round"
-					stroke-width="2"
-					d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"
-				/>
-			</svg>
-
-			<!-- Count badge -->
-			<div
-				class="absolute -top-1 -right-1 bg-blue-500 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center font-bold"
-			>
-				{subAccountCount}
-			</div>
-		</div>
-
-		<!-- Text indicator -->
-		<span class="text-xs text-blue-600 font-medium">
-			{subAccountCount} sub-account{subAccountCount > 1 ? 's' : ''}
-		</span>
-	</div>
-{/if}
diff --git a/packages/yakkl-wallet/src/lib/components/v1/Success.svelte b/packages/yakkl-wallet/src/lib/components/v1/Success.svelte
deleted file mode 100644
index 13eeb23..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/Success.svelte
+++ /dev/null
@@ -1,35 +0,0 @@
-<script lang="ts">
-	interface Props {
-		show?: boolean;
-		title?: string;
-		content?: string;
-		handleConfirm?: any;
-		confirmText?: string;
-	}
-
-	let {
-		show = $bindable(false),
-		title = 'SUCCESS!',
-		content = 'Great News - Success.',
-		handleConfirm = () => {
-			show = false;
-		},
-		confirmText = 'Close'
-	}: Props = $props();
-</script>
-
-<div class="modal" class:modal-open={show}>
-	<div class="modal-box relative">
-		<h3 class="text-lg font-bold">{title}</h3>
-		<p class="py-4">{content}</p>
-		<div class="modal-action">
-			<button
-				class="btn"
-				onclick={() => {
-					show = false;
-					handleConfirm;
-				}}>{confirmText}</button
-			>
-		</div>
-	</div>
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/Swap.svelte b/packages/yakkl-wallet/src/lib/components/v1/Swap.svelte
deleted file mode 100644
index 6ec9aea..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/Swap.svelte
+++ /dev/null
@@ -1,1194 +0,0 @@
-<script lang="ts">
-	import { log } from '$lib/common/logger-wrapper';
-	import { onDestroy, onMount } from 'svelte';
-	import type {
-		Profile,
-		ProfileData,
-		SwapParams,
-		SwapPriceData,
-		SwapToken
-	} from '$lib/common/interfaces';
-	import SellTokenPanel from './SellTokenPanel.svelte';
-	import BuyTokenPanel from './BuyTokenPanel.svelte';
-	import SwapSettings from './SwapSettings.svelte';
-	import SwapSummary from './SwapSummary.svelte';
-	import Modal from './Modal.svelte';
-	import {
-		BigNumber,
-		decryptData,
-		ETH_BASE_SWAP_GAS_UNITS,
-		isEncryptedData,
-		parseAmount,
-		TIMER_SWAP_FETCH_PRICES_TIME,
-		YAKKL_FEE_BASIS_POINTS,
-		type BigNumberish
-	} from '$lib/common';
-	import { ethers as ethersv6 } from 'ethers-v6';
-	import { UniswapSwapManager } from '$lib/managers/UniswapSwapManager';
-	import { TokenService } from '$lib/managers/blockchains/evm/TokenService';
-	import { Ethereum } from '$lib/managers/blockchains/evm/ethereum/Ethereum';
-	import { Token } from '$lib/managers/Token';
-	import type { Provider } from '$lib/managers/Provider';
-	import { derived, writable } from 'svelte/store';
-	import { getTokenBalance } from '$lib/utilities/balanceUtils';
-	import debounce from 'lodash/debounce';
-	import { toBigInt } from '$lib/common/math';
-	import { GasToken } from '$lib/managers/GasToken';
-	import { validateSwapQuote, type ValidationResult } from '$lib/common/validation';
-	import { getMiscStore, getProfile } from '$lib/common/stores';
-	import { deepCopy } from '$lib/utilities';
-	import ErrorNoAction from './ErrorNoAction.svelte';
-	import Warning from './Warning.svelte';
-	import PincodeVerify from './PincodeVerify.svelte';
-	import Confirmation from './Confirmation.svelte';
-	import { sendNotificationMessage } from '$lib/common/notifications';
-	import { getTimerManager } from '$lib/managers/TimerManager';
-
-	// import { browserSvelte } from '$lib/utilities/browserSvelte';
-	// import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
-	// import type { Browser } from 'webextension-polyfill';
-
-	// import { multiHopQuoteAlphaRouter } from '$lib/managers/alphaRouter';
-	// Add back to package.json - 		"@yakkl/uniswap-alpha-router-service": "workspace:*",
-
-	///////////////////////
-	// NOTE: The swap pricing process was done by the calling routine before calling this component. However, this caused unnecessary calls to the API. So, this now requires anything using it to set up the
-	// swapPriceDataStore and then remove it when done with this component.
-	// NOTE: To use a turnkey swap solution, use SwapModal.svelte which is a thin wrapper that implments the price checks and this component.
-	///////////////////////
-
-	interface Props {
-		// Props
-		fundingAddress: string;
-		provider: Provider; // Provider must have Signer set before calling Swap!
-		blockchain: Ethereum;
-		swapManager: UniswapSwapManager;
-		tokenService: TokenService<any>;
-		show?: boolean;
-		className?: string;
-		onSwap?: (
-			fundingAddress: string,
-			tokenIn: SwapToken,
-			tokenOut: SwapToken,
-			fromAmount: BigNumberish,
-			toAmount: BigNumberish
-		) => void;
-	}
-
-	let {
-		fundingAddress,
-		provider,
-		blockchain,
-		swapManager,
-		tokenService,
-		show = $bindable(false),
-		className = 'text-gray-600 z-[699]',
-		onSwap = () => {}
-	}: Props = $props();
-
-	const SUPPORTED_STABLECOINS = ['USDC', 'USDT', 'DAI', 'BUSD'];
-
-	// May could have passed this in as a prop
-	let gasToken: GasToken = $state();
-
-	// Initial token values
-	let initialToken: SwapToken = {
-		chainId: 1,
-		address: '',
-		name: '',
-		symbol: '',
-		decimals: 0,
-		balance: 0n,
-		logoURI: '',
-		isNative: false,
-		isStablecoin: false
-	};
-
-	// Central store for swap price data
-	const initialSwapPriceData: SwapPriceData = {
-		provider: 'Uniswap V3',
-		lastUpdated: new Date(),
-		chainId: 1,
-		tokenIn: initialToken,
-		tokenOut: initialToken,
-		quoteAmount: 0n,
-		fundingAddress: '',
-		feeAmount: 0n,
-		amountAfterFee: 0n,
-		amountIn: 0n,
-		amountOut: 0n,
-		exchangeRate: 0n,
-		marketPriceIn: 0,
-		marketPriceOut: 0,
-		marketPriceGas: 0,
-		priceImpactRatio: 0,
-		path: [],
-		fee: 0,
-		feeBasisPoints: YAKKL_FEE_BASIS_POINTS,
-		feeAmountPrice: 0,
-		feeAmountInUSD: '',
-		gasEstimate: 0n,
-		gasEstimateInUSD: '',
-		tokenOutPriceInUSD: '',
-		multiHop: false,
-		slippageTolerance: 0.5,
-		deadline: 10,
-		error: null,
-		isLoading: false
-	};
-
-	// Create stores
-	interface SwapStateStore {
-		tokenIn: SwapToken;
-		tokenOut: SwapToken;
-		fromAmount: string;
-		toAmount: string;
-		fromBalance: string;
-		error: string;
-		deadline: number; // Default value for deadline
-		slippageTolerance: number; // Default slippage tolerance in percentage
-		poolFee: number; // Default pool fee in basis points (e.g., 0.3%)
-		multiHop: boolean;
-	}
-
-	interface UIStateStore {
-		resetValues: boolean;
-		isLoading: boolean;
-		isSwapping: boolean;
-	}
-
-	const swapPriceDataStore = writable<SwapPriceData>(initialSwapPriceData);
-	const insufficientBalanceStore = writable(false);
-
-	let swapStateStore = writable<SwapStateStore>({
-		tokenIn: initialToken,
-		tokenOut: initialToken,
-		fromAmount: '',
-		toAmount: '',
-		fromBalance: '0',
-		error: '',
-		deadline: 10, // Default value for deadline
-		slippageTolerance: 0.5, // Default slippage tolerance in percentage
-		poolFee: 3000, // Default pool fee in basis points (e.g., 0.3%)
-		multiHop: false
-	});
-
-	let uiStateStore = writable<UIStateStore>({
-		resetValues: false,
-		isLoading: false,
-		isSwapping: false
-	});
-
-	// State
-	// let tokenIn: SwapToken = $state(initialToken);
-	// let tokenOut: SwapToken = $state(initialToken);
-	// let fromAmount = $state('');
-	// let toAmount = $state('');
-	// let fromBalance = $state('0');
-	// let slippageTolerance = $state(0.5);  // 0.5% default - amount in percentage of acceptable slippage from quoted price
-	// let deadline = $state(10);  // 10 minutes default
-	// let poolFee = $state(3000); // 0.3% fee default
-	// let error: string | null = $state(null);
-	// let isLoading = $state(false);
-	// let isSwapping = $state(false);
-	// let resetValues = $state(false);
-	// let multiHop = $state(false);
-
-	// eslint-disable-next-line svelte/non-reactive-declaration
-	// let tokens: SwapToken[] = [];
-
-	// svelte-ignore non_reactive_update
-	// let preferredTokens: SwapToken[] = [];
-
-	let lastModifiedPanel: 'sell' | 'buy' = $state('sell');
-	let swapManagerName = '';
-	let isEthWethSwap = $state(false);
-	let showVerify = $state(false);
-	let showError = $state(false);
-	let errorValue = $state('');
-	let showWarning = $state(false);
-	let warningValue = $state('');
-	let showConfirmation = $state(false);
-	let pincodeVerified = false;
-
-	// Initialize
-	onMount(async () => {
-		try {
-			reset();
-			const yakklMiscStore = getMiscStore();
-			if (!yakklMiscStore) {
-				log.info('User is not logged in yet, so no swap is possible.');
-				return;
-			}
-
-			// Provider must have Signer set before calling Swap!
-			gasToken = new GasToken('YAKKL GasToken', 'ETH', blockchain, provider, fundingAddress); // Native token for now
-
-			// Defaulting gas price check as last thing in onMount
-			if (gasToken) {
-				const price = await gasToken.getMarketPrice(); //.then(price => {
-				updateSwapPriceData({ marketPriceGas: price.price });
-			}
-			// Add and start timer
-			getTimerManager().addTimer('swap_fetchPrices', fetchPrices, TIMER_SWAP_FETCH_PRICES_TIME);
-			getTimerManager().startTimer('swap_fetchPrices');
-		} catch (error) {
-			log.error('Error initializing swap:', false, error);
-			$swapStateStore.error = 'Failed to initialize swap. Please try again.';
-		}
-	});
-
-	onDestroy(() => {
-		const yakklMiscStore = getMiscStore();
-		if (yakklMiscStore) {
-			getTimerManager().stopTimer('swap_fetchPrices');
-			debouncedGetQuote.cancel();
-			debouncedCheckBalance.cancel();
-			debouncedGetMarketPrice.cancel();
-			reset();
-		}
-	});
-
-	const quoteTrigger = derived([swapStateStore], ([$swapStateStore]) => {
-		const { deadline, slippageTolerance, poolFee } = $swapStateStore;
-		return { deadline, slippageTolerance, poolFee };
-	});
-
-	$effect(() => {
-		if (quoteTrigger) {
-			debouncedGetQuote();
-		}
-	});
-
-	$effect(() => {
-		$swapStateStore.multiHop = $swapPriceDataStore.multiHop;
-	});
-
-	$effect(() => {
-		const { tokenIn, tokenOut } = $swapPriceDataStore;
-		if (
-			(tokenIn.symbol === 'ETH' && tokenOut.symbol === 'WETH') ||
-			(tokenIn.symbol === 'WETH' && tokenOut.symbol === 'ETH') ||
-			(tokenIn.symbol === 'ETH' && tokenOut.symbol === 'ETH') ||
-			(tokenIn.symbol === 'WETH' && tokenOut.symbol === 'WETH')
-		) {
-			isEthWethSwap = true;
-		} else {
-			isEthWethSwap = false;
-		}
-	});
-
-	$effect(() => {
-		(async () => {
-			const { tokenIn, fromAmount } = $swapStateStore;
-			if (tokenIn && fromAmount) {
-				await debouncedCheckBalance(tokenIn, fromAmount, fundingAddress);
-
-				if (gasToken && $swapPriceDataStore.marketPriceGas === 0) {
-					await debouncedGetGasTokenPrice();
-					// gasToken.getMarketPrice().then(price => {
-					//   if ($swapPriceDataStore.marketPriceGas === 0) {
-					//       updateSwapPriceData({ marketPriceGas: price.price });
-					//   }
-					// });
-				}
-
-				if (tokenIn.symbol && swapManager && $swapPriceDataStore.marketPriceIn === 0) {
-					await debouncedGetMarketPrice(tokenIn);
-				}
-			}
-		})();
-	});
-
-	$effect(() => {
-		(async () => {
-			if ($swapStateStore.tokenOut && $swapStateStore.toAmount) {
-				// Only need to update if we have a tokenOut and the market price is 0
-				if ($swapStateStore.tokenOut.symbol && $swapPriceDataStore.marketPriceOut === 0) {
-					await debouncedGetMarketPrice($swapStateStore.tokenOut);
-				}
-			}
-		})();
-	});
-
-	// Debounced quote handler, check balance, and market price
-	const debouncedGetQuote = debounce(async () => {
-		await getQuote();
-	}, 300);
-
-	const debouncedCheckBalance = debounce(checkBalance, 300);
-
-	const debouncedGetGasTokenPrice = debounce(async () => {
-		const price = await gasToken.getMarketPrice();
-		if ($swapPriceDataStore.marketPriceGas === 0) {
-			updateSwapPriceData({ marketPriceGas: price.price });
-		}
-	}, 500);
-
-	const debouncedGetMarketPrice = debounce(async (token) => {
-		const price = await swapManager.getMarketPrice(`${token.symbol}-USD`);
-		if (price.price > 0) {
-			updateSwapPriceData({ marketPriceIn: price.price });
-		}
-	}, 500);
-
-	// Function to fetch the gas price
-	async function fetchPrices() {
-		if (gasToken) {
-			try {
-				// Always the native token except where we sponsor the gas
-				const price = await gasToken.getMarketPrice();
-				updateSwapPriceData({ marketPriceGas: price.price });
-			} catch (error) {
-				log.error('Error fetching gas price:', false, error);
-			}
-		}
-
-		if ($swapStateStore.tokenIn && $swapStateStore.tokenIn.symbol && swapManager) {
-			try {
-				const price = await swapManager.getMarketPrice(`${$swapStateStore.tokenIn.symbol}-USD`);
-				updateSwapPriceData({ marketPriceIn: price.price });
-			} catch (error) {
-				log.error('Error fetching market price:', false, error);
-			}
-		}
-
-		if ($swapStateStore.tokenOut && $swapStateStore.tokenOut.symbol && swapManager) {
-			try {
-				const price = await swapManager.getMarketPrice(`${$swapStateStore.tokenOut.symbol}-USD`);
-				updateSwapPriceData({ marketPriceOut: price.price });
-			} catch (error) {
-				log.error('Error fetching market price:', false, error);
-			}
-		}
-	}
-
-	// Handler functions
-	async function handleSellAmountChange(amount: string) {
-		$swapStateStore.error = '';
-		$swapStateStore.fromAmount = amount;
-		lastModifiedPanel = 'sell';
-
-		if (amount !== '.' && isNaN(parseFloat(amount))) {
-			log.info('Swap - Invalid sell amount:', false, amount);
-
-			$swapStateStore.fromAmount = '';
-			updateSwapPriceData({
-				amountIn: 0n,
-				amountOut: 0n
-			});
-			return;
-		}
-
-		try {
-			const parsedAmount = parseAmount(amount, $swapStateStore.tokenIn.decimals);
-			updateSwapPriceData({
-				amountIn: parsedAmount
-			});
-			if ($swapStateStore.tokenIn && $swapStateStore.tokenOut) {
-				await getQuote(true);
-			}
-		} catch (error) {
-			log.error('Error handling sell amount change:', false, error);
-			$swapStateStore.error = 'Failed to process sell amount';
-		}
-	}
-
-	async function handleBuyAmountChange(amount: string) {
-		$swapStateStore.error = '';
-		$swapStateStore.toAmount = amount;
-		lastModifiedPanel = 'buy';
-
-		if (amount !== '.' && isNaN(parseFloat(amount))) {
-			$swapStateStore.toAmount = '';
-			updateSwapPriceData({
-				amountOut: 0n
-			});
-			return;
-		}
-
-		try {
-			const parsedAmount = parseAmount(amount, $swapStateStore.tokenOut.decimals);
-			updateSwapPriceData({
-				amountOut: parsedAmount
-			});
-			if ($swapStateStore.tokenIn && $swapStateStore.tokenOut) await getQuote(false);
-		} catch (error) {
-			log.error('Error handling buy amount change:', false, error);
-			$swapStateStore.error = 'Failed to process buy amount';
-		}
-	}
-
-	async function handleTokenSelect(token: SwapToken, type: 'sell' | 'buy') {
-		$swapStateStore.error = '';
-
-		// Check if selecting the same token
-		const otherToken = type === 'sell' ? $swapStateStore.tokenOut : $swapStateStore.tokenIn;
-		if (otherToken.symbol && areTokensEqual(token, otherToken)) {
-			$swapStateStore.error = `Cannot swap ${token.symbol} for itself`;
-			return;
-		}
-
-		// This is a helper function to set the pool fee for stablecoins
-		if (token.isStablecoin || SUPPORTED_STABLECOINS.includes(token.symbol)) {
-			$swapStateStore.poolFee = 500;
-			token.isStablecoin = true;
-			updateSwapPriceData({ fee: $swapStateStore.poolFee });
-		}
-
-		if (!token.balance || toBigInt(token.balance) <= 0n) {
-			token.balance = await getTokenBalance(token, fundingAddress, provider, tokenService);
-		}
-		const formattedBalance = ethersv6.formatUnits(toBigInt(token.balance), token.decimals); // NOTE: This and all ethers specific code should be moved to the TokenService - maybe
-
-		if (type === 'sell') {
-			$swapStateStore.tokenIn = token;
-			updateSwapPriceData({ tokenIn: token });
-			$swapStateStore.fromBalance = formattedBalance;
-		} else {
-			$swapStateStore.tokenOut = token;
-			updateSwapPriceData({ tokenOut: token });
-		}
-
-		if ($swapStateStore.tokenIn && $swapStateStore.tokenOut) {
-			if (lastModifiedPanel === 'sell' && $swapStateStore.fromAmount) {
-				await handleSellAmountChange($swapStateStore.fromAmount);
-			} else if (lastModifiedPanel === 'buy' && $swapStateStore.toAmount) {
-				await handleBuyAmountChange($swapStateStore.toAmount);
-			}
-		}
-	}
-
-	async function switchTokens() {
-		[$swapStateStore.tokenIn, $swapStateStore.tokenOut] = [
-			$swapStateStore.tokenOut,
-			$swapStateStore.tokenIn
-		];
-		[$swapStateStore.fromAmount, $swapStateStore.toAmount] = [
-			$swapStateStore.toAmount,
-			$swapStateStore.fromAmount
-		];
-
-		updateSwapPriceData({
-			tokenIn: $swapStateStore.tokenIn,
-			tokenOut: $swapStateStore.tokenOut,
-			amountIn: $swapStateStore.toAmount
-				? parseAmount($swapStateStore.toAmount, $swapStateStore.tokenIn.decimals)
-				: 0n,
-			amountOut: $swapStateStore.fromAmount
-				? parseAmount($swapStateStore.fromAmount, $swapStateStore.tokenOut.decimals)
-				: 0n
-		});
-
-		if ($swapStateStore.tokenIn && $swapStateStore.tokenOut) {
-			if ($swapStateStore.fromAmount) await handleSellAmountChange($swapStateStore.fromAmount);
-			else if ($swapStateStore.toAmount) await handleBuyAmountChange($swapStateStore.toAmount);
-		}
-	}
-
-	// Helper functions
-	function updateSwapPriceData(newData: Partial<SwapPriceData>) {
-		swapPriceDataStore.update((currentData) => ({ ...currentData, ...newData }));
-	}
-
-	async function checkBalance(token: SwapToken, amount: string, fundingAddress: string) {
-		try {
-			if (!token || !amount || !fundingAddress) {
-				insufficientBalanceStore.set(false);
-				return false;
-			}
-
-			const balance = await getTokenBalance(token, fundingAddress, provider, tokenService);
-			const formattedBalance = ethersv6.formatUnits(balance, token.decimals);
-
-			// Only update if the balance actually changes
-			if (formattedBalance !== $swapStateStore.fromBalance) {
-				$swapStateStore.fromBalance = formattedBalance;
-				token.balance = balance;
-			}
-
-			const requiredAmount = parseAmount(amount, token.decimals);
-			const isInsufficient = balance < requiredAmount;
-			insufficientBalanceStore.set(isInsufficient);
-
-			return isInsufficient;
-		} catch (error) {
-			insufficientBalanceStore.set(false);
-			log.error('Error checking balance:', false, error);
-			return false;
-		}
-	}
-
-	// async function fetchTokenList(): Promise<SwapToken[]> {
-	//   try {
-	//     if ( browserSvelte ) {
-	//       const response = await fetch(browser_ext.runtime.getURL('/data/uniswap.json')); // 'https://tokens.uniswap.org' );
-	//       const data = await response.json();
-	//       data.tokens
-	//         .filter( ( token: SwapToken ) => token.chainId === (blockchain ? blockchain.getChainId() || 1 : 1))
-	//         .map( ( token: SwapToken ) => {
-	//           if ( SUPPORTED_STABLECOINS.includes( token.symbol ) ) {
-	//             token.isStablecoin = true;
-	//           }
-	//           return token;
-	//         } );
-	//       return data.tokens.filter((token: SwapToken) => token.chainId === 1); // blockchain.getChainId() || 1);
-	//     }
-	//     return [];
-	//   } catch (error) {
-	//     log.error('Error fetching token list:', false, error);
-	//     return [];
-	//   }
-	// }
-
-	// function getPreferredTokens(tokens: SwapToken[]): SwapToken[] {
-	//   const preferredTokenSymbols = ["ETH", "WETH", "USDC", "USDT", "WBTC"];
-	//   return preferredTokenSymbols
-	//     .map(symbol => tokens.find(token => token.symbol === symbol))
-	//     .filter((token): token is SwapToken => token !== undefined);
-	// }
-
-	async function validateBalance(): Promise<boolean> {
-		try {
-			if (!$swapStateStore.tokenIn || !$swapStateStore.fromAmount || !fundingAddress) return false;
-			// Get token or native balance
-			const balance = await getTokenBalance(
-				$swapStateStore.tokenIn,
-				fundingAddress,
-				provider,
-				tokenService
-			);
-			// Parse amounts
-			const swapAmount = ethersv6.parseUnits(
-				$swapStateStore.fromAmount,
-				$swapStateStore.tokenIn.decimals
-			);
-
-			// If native token (ETH), account for gas
-			if ($swapStateStore.tokenIn.isNative) {
-				const gasEstimate = $swapPriceDataStore.gasEstimate || 0n;
-				const totalRequiredAmount = swapAmount + (BigNumber.toBigInt(gasEstimate) || 0n);
-				if (balance < totalRequiredAmount) {
-					$swapStateStore.error = `Insufficient ${$swapStateStore.tokenIn.symbol} balance. Need ${ethersv6.formatUnits(totalRequiredAmount, $swapStateStore.tokenIn.decimals)} ${$swapStateStore.tokenIn.symbol}, but have ${ethersv6.formatUnits(balance, $swapStateStore.tokenIn.decimals)} ${$swapStateStore.tokenIn.symbol}`;
-					return false;
-				}
-			} else {
-				// For ERC20 tokens, check swap amount
-				const totalRequiredAmount = swapAmount;
-				if (balance < totalRequiredAmount) {
-					$swapStateStore.error = `Insufficient ${$swapStateStore.tokenIn.symbol} balance. Need ${ethersv6.formatUnits(totalRequiredAmount, $swapStateStore.tokenIn.decimals)} ${$swapStateStore.tokenIn.symbol}, but have ${ethersv6.formatUnits(balance, $swapStateStore.tokenIn.decimals)} ${$swapStateStore.tokenIn.symbol}`;
-					return false;
-				}
-			}
-			return true;
-		} catch (error) {
-			log.error('Error validating balance:', false, error);
-			$swapStateStore.error = 'Failed to validate balance. Please try again.';
-			return false;
-		}
-	}
-
-	// Fix for the quote formatting issue
-	async function getQuote(isExactIn: boolean = true) {
-		if (
-			!$swapStateStore.tokenIn.symbol ||
-			!$swapStateStore.tokenOut.symbol ||
-			(!$swapStateStore.fromAmount && !$swapStateStore.toAmount)
-		)
-			return;
-
-		// Add token equality check
-		if (areTokensEqual($swapStateStore.tokenIn, $swapStateStore.tokenOut)) {
-			$swapStateStore.error = `Cannot swap ${$swapStateStore.tokenIn.symbol} for itself`;
-			return;
-		}
-
-		if (isEthWethSwap) {
-			updateSwapPriceData({ feeAmount: 0n }); // May want to force fees, slippage, etc. to 0 here
-			return; // Do nothing here for now
-		}
-
-		try {
-			$uiStateStore.isLoading = true;
-			const amount = isExactIn
-				? parseAmount($swapStateStore.fromAmount, $swapStateStore.tokenIn.decimals)
-				: parseAmount($swapStateStore.toAmount, $swapStateStore.tokenOut.decimals);
-
-			$swapStateStore.slippageTolerance = $swapPriceDataStore.slippageTolerance || 0.5;
-			$swapStateStore.deadline = $swapPriceDataStore.deadline || 10;
-			$swapStateStore.poolFee = $swapPriceDataStore.fee || 3000;
-
-			const quote = await swapManager.getQuote(
-				Token.fromSwapToken($swapStateStore.tokenIn, blockchain, provider),
-				Token.fromSwapToken($swapStateStore.tokenOut, blockchain, provider),
-				amount,
-				fundingAddress,
-				isExactIn,
-				$swapStateStore.poolFee
-			);
-
-			// const { multiHopQuoteAlphaRouter } = await import('../plugins/alphaRouter');
-
-			// multiHopQuoteAlphaRouter(
-			//   Token.fromSwapToken($swapStateStore.tokenIn, blockchain, provider),
-			//   Token.fromSwapToken($swapStateStore.tokenOut, blockchain, provider),
-			//   amount,
-			//   fundingAddress,
-			//   isExactIn );
-
-			if (!quote || quote.error) {
-				$swapStateStore.error =
-					'No valid pool found for this token pair. Try a different combination.';
-				return;
-			}
-
-			// Reset the slippage and deadline to correct values
-			if (quote) {
-				quote.slippageTolerance = $swapStateStore.slippageTolerance;
-				quote.deadline = $swapStateStore.deadline;
-			}
-
-			// Handle the BigNumberish type safely
-			if (isExactIn) {
-				const amountOut = quote.amountOut ?? 0n;
-				$swapStateStore.toAmount = ethersv6.formatUnits(
-					toBigInt(amountOut),
-					$swapStateStore.tokenOut.decimals
-				);
-			} else {
-				const amountIn = quote.amountIn ?? 0n;
-				$swapStateStore.fromAmount = ethersv6.formatUnits(
-					toBigInt(amountIn),
-					$swapStateStore.tokenIn.decimals
-				);
-			}
-			updateSwapPriceData(quote);
-		} catch (error) {
-			log.error('Quote Error:', false, error);
-			$swapStateStore.error = `Failed to get quote: ${error}`;
-			$swapStateStore.toAmount = '';
-		} finally {
-			$uiStateStore.isLoading = false;
-		}
-	}
-
-	// May want to make this a little less dependent on the store and move to a more generic function
-	async function validateQuote() {
-		let returnCode: boolean = false;
-
-		if (
-			!$swapStateStore.tokenIn ||
-			!$swapStateStore.tokenOut ||
-			!$swapStateStore.fromAmount ||
-			!$swapStateStore.toAmount ||
-			!fundingAddress ||
-			!swapManager
-		) {
-			$swapStateStore.error = 'Invalid swap parameters';
-			return returnCode;
-		}
-
-		// Add token equality check
-		if (areTokensEqual($swapStateStore.tokenIn, $swapStateStore.tokenOut)) {
-			$swapStateStore.error = `Cannot swap ${$swapStateStore.tokenIn.symbol} for itself`;
-			return returnCode;
-		}
-
-		if (!$swapPriceDataStore) {
-			$swapStateStore.error = 'Failed to get quote';
-			return returnCode;
-		}
-		if ($swapPriceDataStore.error) {
-			$swapStateStore.error = $swapPriceDataStore.error;
-			return returnCode;
-		}
-		if ($insufficientBalanceStore) {
-			$swapStateStore.error = `Insufficient balance for the given swap. You need ETH for gas fees and enough ${$swapStateStore.tokenIn.symbol} to sell/swap.`;
-			return returnCode;
-		}
-
-		if (!(await validateBalance())) {
-			// Redundant check for now
-			$swapStateStore.error = 'Insufficient balance for the given swap';
-			return;
-		}
-
-		const results: ValidationResult = validateSwapQuote($swapPriceDataStore);
-
-		if (results.error) {
-			$swapStateStore.error = results.error;
-			log.error('Validation error:', false, $swapStateStore.error);
-			return returnCode;
-		}
-
-		return true;
-	}
-
-	function areTokensEqual(token1: SwapToken, token2: SwapToken): boolean {
-		// Check for native token variants (ETH/WETH)
-		const isEthVariant = (symbol: string) => ['ETH', 'WETH'].includes(symbol);
-
-		if (token1.address && token2.address) {
-			// Compare addresses if both tokens have them
-			return token1.address.toLowerCase() === token2.address.toLowerCase();
-		} else if (token1.symbol && token2.symbol) {
-			// If one is ETH and other is WETH, they're considered different
-			if (isEthVariant(token1.symbol) && isEthVariant(token2.symbol)) {
-				return token1.symbol === token2.symbol;
-			}
-			// Compare symbols as fallback
-			return token1.symbol === token2.symbol;
-		}
-		return false;
-	}
-
-	async function swapTokens() {
-		try {
-			// Verify pin for one more security check before calling this function!
-
-			if (!pincodeVerified) {
-				showVerify = true;
-				return;
-			}
-
-			if (isEthWethSwap) {
-				updateSwapPriceData({ feeAmount: 0n }); // May want to force fees, slippage, etc. to 0 here
-				// May want to do something with receipts later...
-				if (
-					$swapStateStore.tokenIn.symbol === 'ETH' &&
-					$swapStateStore.tokenOut.symbol === 'WETH'
-				) {
-					// Wrap ETH to WETH
-					const receipt = await swapManager.wrapETH(
-						ethersv6.parseUnits($swapStateStore.fromAmount, $swapStateStore.tokenIn.decimals),
-						fundingAddress
-					);
-				} else if (
-					$swapStateStore.tokenIn.symbol === 'WETH' &&
-					$swapStateStore.tokenOut.symbol === 'ETH'
-				) {
-					// Unwrap WETH to ETH
-					const receipt = await swapManager.unwrapWETH(
-						ethersv6.parseUnits($swapStateStore.fromAmount, $swapStateStore.tokenIn.decimals),
-						fundingAddress
-					);
-				}
-				return;
-			}
-			$uiStateStore.isSwapping = true;
-			$swapStateStore.error = '';
-			// Make sure getQuote has been called successfully
-			if (!(await validateQuote())) {
-				$uiStateStore.isSwapping = false;
-				return; // Error message is set in validateQuote
-			}
-
-			const tokenInInstance = Token.fromSwapToken(
-				$swapPriceDataStore.tokenIn,
-				blockchain,
-				provider
-			);
-			const tokenOutInstance = Token.fromSwapToken(
-				$swapPriceDataStore.tokenOut,
-				blockchain,
-				provider
-			);
-
-			if (!$swapPriceDataStore.tokenIn.isNative) {
-				const allowance = await swapManager.checkAllowance(tokenInInstance, fundingAddress);
-				const requiredAmount = ethersv6.parseUnits(
-					$swapStateStore.fromAmount,
-					tokenInInstance.decimals
-				);
-
-				if (allowance < requiredAmount) {
-					const receipt = await swapManager.approveToken(
-						tokenInInstance,
-						$swapStateStore.fromAmount
-					);
-				}
-			}
-
-			const { maxFeePerGas, maxPriorityFeePerGas } = await getCurrentGasPrices();
-
-			const params: SwapParams = {
-				tokenIn: tokenInInstance,
-				tokenOut: tokenOutInstance,
-				amount: ethersv6.parseUnits(
-					$swapStateStore.fromAmount,
-					$swapPriceDataStore.tokenIn.decimals
-				),
-				fee: $swapPriceDataStore.fee || $swapStateStore.poolFee, // Basis points - not used here for multihops
-				slippage: $swapPriceDataStore.slippageTolerance || $swapStateStore.slippageTolerance,
-				deadline: $swapPriceDataStore.deadline || $swapStateStore.deadline,
-				recipient: $swapPriceDataStore.fundingAddress,
-				feeRecipient: import.meta.env.VITE_YAKKL_FEE_RECIPIENT || 'aifees.eth', // Fee recipient address
-				feeAmount: $swapPriceDataStore.feeAmount || 0n,
-				gasLimit: toBigInt($swapPriceDataStore.gasEstimate) || ETH_BASE_SWAP_GAS_UNITS,
-				maxFeePerGas: maxFeePerGas,
-				maxPriorityFeePerGas: maxPriorityFeePerGas
-			};
-
-			const [receiptTrans, receiptFee] = await swapManager.executeFullSwap(params); // May want to do something with receipts later...
-
-			onSwap(
-				fundingAddress,
-				$swapStateStore.tokenIn,
-				$swapStateStore.tokenOut,
-				ethersv6.parseUnits($swapStateStore.fromAmount, $swapStateStore.tokenIn.decimals),
-				ethersv6.parseUnits($swapStateStore.toAmount, $swapStateStore.tokenOut.decimals)
-			); // Notify parent component - could add more data here such as fee, feeAmount, etc.
-
-			$swapStateStore.error = '';
-
-			// Add more details to the notification in the future
-			await sendNotificationMessage(
-				'Swap completed successfully',
-				'Your swap has been completed successfully.'
-			);
-
-			reset();
-			show = false;
-		} catch (err: any) {
-			$uiStateStore.isSwapping = false;
-			log.error('Error executing swap:', err);
-			$swapStateStore.error = `Failed to execute swap: ${err.message}`;
-		}
-	}
-
-	async function getCurrentGasPrices(): Promise<{
-		maxFeePerGas: bigint;
-		maxPriorityFeePerGas: bigint;
-	}> {
-		try {
-			// Use a gas price API or provider method
-			const feeData = await provider.getFeeData();
-
-			return {
-				maxFeePerGas: toBigInt(feeData.maxFeePerGas),
-				maxPriorityFeePerGas: toBigInt(feeData.maxPriorityFeePerGas)
-			};
-		} catch (error) {
-			// Fallback to manual rates
-			return {
-				maxFeePerGas: ethersv6.parseUnits('30', 'gwei'),
-				maxPriorityFeePerGas: ethersv6.parseUnits('1', 'gwei')
-			};
-		}
-	}
-
-	function reset() {
-		showConfirmation = false;
-		showError = false;
-		errorValue = '';
-		showWarning = false;
-		warningValue = '';
-		pincodeVerified = false;
-		showVerify = false;
-
-		$swapStateStore.tokenIn = initialToken;
-		$swapStateStore.tokenOut = initialToken;
-		$swapStateStore.fromAmount = '';
-		$swapStateStore.toAmount = '';
-		$swapStateStore.fromBalance = '0';
-		$swapStateStore.poolFee = 3000;
-		$swapStateStore.error = '';
-		lastModifiedPanel = 'sell';
-		insufficientBalanceStore.set(false);
-		swapPriceDataStore.set(initialSwapPriceData);
-		$uiStateStore.resetValues = true;
-	}
-
-	function handleConfirmSwap() {
-		showWarning = false;
-		warningValue = '';
-		showConfirmation = true;
-	}
-
-	function handleCancelSwap() {
-		showConfirmation = false;
-	}
-
-	function handleConfirm() {
-		showConfirmation = false;
-		showWarning = false;
-		warningValue = '';
-		handleSwap();
-	}
-
-	function handleSwap() {
-		pincodeVerified = false;
-		showWarning = false;
-		warningValue = '';
-		showVerify = true;
-	}
-
-	function handleClose() {
-		showConfirmation = false;
-		showError = false;
-		errorValue = '';
-		showWarning = false;
-		warningValue = '';
-		pincodeVerified = false;
-		showVerify = false;
-	}
-
-	// Pincode verification
-	function handleReject(
-		rejection: string = 'You have rejected or Pincode was not validated. No swap transaction was sent.'
-	) {
-		try {
-			showConfirmation = false;
-			showVerify = false;
-			showError = false;
-			pincodeVerified = false;
-			showWarning = true;
-			warningValue = rejection;
-		} catch (e: any) {
-			log.error(e);
-		}
-	}
-
-	async function handleVerified(pincode: string) {
-		try {
-			let profile: Profile | null = await verifyWithPin(pincode, pincodeVerified);
-			if (profile === null) {
-				throw 'Profile was not found.';
-			}
-
-			pincodeVerified = true;
-			showVerify = false;
-
-			await swapTokens();
-		} catch (e) {
-			log.error(e);
-		}
-	}
-
-	// One more internal check to verify the pincode
-	async function verifyWithPin(pincode: string, pincodeVerified: boolean): Promise<Profile | null> {
-		try {
-			const yakklMiscStore = getMiscStore();
-			let profile: Profile | null = await getProfile();
-			if (profile === null) {
-				pincodeVerified = false;
-				throw 'Profile was not found.';
-			}
-
-			let profileEncrypted = null;
-
-			if (isEncryptedData(profile.data)) {
-				profileEncrypted = deepCopy(profile);
-				await decryptData(profile?.data, yakklMiscStore).then((result) => {
-					(profile as Profile).data = result as ProfileData;
-				});
-			}
-
-			if ((profile.data as ProfileData).pincode !== pincode && pincodeVerified === false) {
-				pincodeVerified = false;
-				throw 'PINCODE was not verified.';
-			}
-
-			if (pincode === (profile.data as ProfileData).pincode) {
-				profile = null;
-				return profileEncrypted;
-			} else {
-				pincodeVerified = false;
-				throw 'PINCODE did not match.';
-			}
-		} catch (e: any) {
-			log.error(e);
-			pincodeVerified = false;
-			return null;
-		}
-	}
-
-	function handleCloseModal() {
-		reset();
-		show = false;
-	}
-</script>
-
-<!-- TODO: Maybe - Move these two to a SecurityBaseLayout.svelte and wrap the content in them -->
-<Confirmation
-	bind:show={showConfirmation}
-	className="z-[990]"
-	onConfirm={handleConfirm}
-	onReject={handleCancelSwap}
-/>
-<PincodeVerify
-	bind:show={showVerify}
-	className="text-gray-600 z-[990]"
-	onRejected={handleReject}
-	onVerified={handleVerified}
-/>
-
-<!-- TODO: Maybe - Move these two to layout and use stores -->
-<ErrorNoAction bind:show={showError} className="z-[999]" value={errorValue} handle={handleClose} />
-<Warning bind:show={showWarning} className="z-[999]" value={warningValue} handle={handleClose} />
-
-<Modal bind:show title="Swap" {className} onClose={handleCloseModal}>
-	<div class="p-6 space-y-4">
-		<!-- Sell Section -->
-		<span>Sell</span>
-		<SellTokenPanel
-			{swapPriceDataStore}
-			disabled={false}
-			insufficientBalance={$insufficientBalanceStore}
-			balance={$swapStateStore.fromBalance}
-			bind:resetValues={$uiStateStore.resetValues}
-			bind:lastModifiedPanel
-			onTokenSelect={(token) => handleTokenSelect(token, 'sell')}
-			onAmountChange={handleSellAmountChange}
-		/>
-
-		<!-- Switch Button -->
-		<!-- svelte-ignore a11y_consider_explicit_label -->
-		<button
-			onclick={switchTokens}
-			class="mx-auto block bg-gray-200 p-2 rounded-full transform transition-transform hover:rotate-180"
-		>
-			<svg
-				xmlns="http://www.w3.org/2000/svg"
-				class="h-6 w-6 text-gray-600"
-				fill="none"
-				viewBox="0 0 24 24"
-				stroke="currentColor"
-			>
-				<path
-					stroke-linecap="round"
-					stroke-linejoin="round"
-					stroke-width="2"
-					d="M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"
-				/>
-			</svg>
-		</button>
-
-		<!-- Buy Section -->
-		<span>Buy</span>
-		<BuyTokenPanel
-			{swapPriceDataStore}
-			disabled={false}
-			bind:resetValues={$uiStateStore.resetValues}
-			bind:lastModifiedPanel
-			onTokenSelect={(token) => handleTokenSelect(token, 'buy')}
-			onAmountChange={handleBuyAmountChange}
-		/>
-
-		<!-- Error Message (need to look at wrap blocking)-->
-		{#if $swapStateStore.error && !isEthWethSwap}
-			<div class="w-full bg-red-50 border border-red-200 rounded-lg p-3">
-				<div class="flex items-center justify-center">
-					<svg
-						xmlns="http://www.w3.org/2000/svg"
-						class="h-5 w-5 text-red-500 mr-2"
-						viewBox="0 0 20 20"
-						fill="currentColor"
-					>
-						<path
-							fill-rule="evenodd"
-							d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"
-							clip-rule="evenodd"
-						/>
-					</svg>
-					<div class="text-red-500 text-center overflow-x-auto max-w-full">
-						<span class="whitespace-nowrap">{$swapStateStore.error}</span>
-					</div>
-				</div>
-			</div>
-		{/if}
-
-		<div class="w-full bg-blue-400 border border-blue-800 rounded-lg p-3">
-			<div class="flex items-center justify-center">
-				<div class="text-blue-700 text-center overflow-x-auto max-w-full">
-					{#if $swapStateStore.multiHop}
-						<span class="whitespace-nowrap">This swap requires multiple hops to complete.</span>
-					{:else}
-						<span class="whitespace-nowrap">This swap requires a single hop to complete.</span>
-					{/if}
-				</div>
-			</div>
-		</div>
-
-		<!-- Settings -->
-		{#if isEthWethSwap === false}
-			<SwapSettings
-				{swapPriceDataStore}
-				onSlippageChange={(value) => ($swapStateStore.slippageTolerance = value)}
-				onDeadlineChange={(value) => ($swapStateStore.deadline = value)}
-				onPoolFeeChange={(value) => {
-					$swapStateStore.poolFee = value;
-					if (
-						($swapStateStore.tokenIn?.isStablecoin || $swapStateStore.tokenOut?.isStablecoin) &&
-						swapManagerName.includes('uniswap')
-					) {
-						$swapStateStore.poolFee = 500;
-					}
-					updateSwapPriceData({ fee: $swapStateStore.poolFee });
-				}}
-			/>
-		{:else}
-			<div class="w-full bg-blue-400 border border-blue-800 rounded-lg p-3">
-				<div class="flex items-center justify-center">
-					<div class="text-blue-700 text-center overflow-x-auto max-w-full">
-						<span class="whitespace-nowrap"
-							>ETH-WETH swap is a simple wrap so no additional information needed.</span
-						>
-					</div>
-				</div>
-			</div>
-		{/if}
-
-		<!-- Summary -->
-		<SwapSummary {swapPriceDataStore} disabled={isEthWethSwap} />
-
-		<!-- Reset Button -->
-		<button
-			onclick={reset}
-			class="w-full px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors flex items-center justify-center"
-		>
-			<svg
-				xmlns="http://www.w3.org/2000/svg"
-				class="h-5 w-5 mr-2"
-				fill="none"
-				viewBox="0 0 24 24"
-				stroke="currentColor"
-			>
-				<path
-					stroke-linecap="round"
-					stroke-linejoin="round"
-					stroke-width="2"
-					d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"
-				/>
-			</svg>
-			Reset Swap
-		</button>
-
-		<!-- Swap Button -->
-		<button
-			onclick={handleConfirmSwap}
-			class="w-full px-4 py-3 text-lg font-medium text-white bg-blue-600 rounded-lg shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
-			disabled={!$swapStateStore.tokenIn ||
-				!$swapStateStore.tokenOut ||
-				!$swapStateStore.fromAmount ||
-				!$swapStateStore.toAmount}
-		>
-			{#if !isEthWethSwap}
-				{$uiStateStore.isLoading ? 'Loading...' : $uiStateStore.isSwapping ? 'Swapping...' : 'Swap'}
-			{:else}
-				{$uiStateStore.isLoading
-					? 'Loading...'
-					: $swapStateStore.tokenIn.symbol === 'WETH'
-						? 'Unwrap'
-						: 'Wrap'}
-			{/if}
-		</button>
-		<!-- Cancel Button -->
-		<button
-			onclick={handleCloseModal}
-			class="w-full px-4 py-3 text-lg font-medium text-white bg-red-500 rounded-lg shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-400"
-		>
-			Cancel
-		</button>
-	</div>
-</Modal>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/SwapModal.svelte b/packages/yakkl-wallet/src/lib/components/v1/SwapModal.svelte
deleted file mode 100644
index e86f0f0..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/SwapModal.svelte
+++ /dev/null
@@ -1,150 +0,0 @@
-<script lang="ts">
-	import type { Profile, ProfileData, SwapToken } from '$lib/common/interfaces';
-	import { decryptData, isEncryptedData, type BigNumberish } from '$lib/common';
-	import type { Provider } from '$lib/managers/Provider';
-	import type { Ethereum } from '$lib/managers/blockchains/evm/ethereum/Ethereum';
-	import type { UniswapSwapManager } from '$lib/managers/UniswapSwapManager';
-	import type { TokenService } from '$lib/managers/blockchains/evm/TokenService';
-	import Swap from './Swap.svelte';
-	import { getMiscStore, getProfile } from '$lib/common/stores';
-	import { deepCopy } from '$lib/utilities';
-	import ErrorNoAction from './ErrorNoAction.svelte';
-	import Warning from './Warning.svelte';
-	import PincodeVerify from './PincodeVerify.svelte';
-	import { log } from '$lib/common/logger-wrapper';
-
-	interface Props {
-		show?: boolean;
-		fundingAddress: string;
-		provider: Provider;
-		blockchain: Ethereum;
-		swapManager: UniswapSwapManager;
-		tokenService: TokenService<any>;
-		// export let gasProvider: EthereumGasProvider;
-		className?: string;
-	}
-
-	let {
-		show = $bindable(true),
-		fundingAddress,
-		provider,
-		blockchain,
-		swapManager,
-		tokenService,
-		className = 'text-gray-600 z-[999]'
-	}: Props = $props();
-
-	let showVerify = $state(false);
-	let showError = $state(false);
-	let errorValue = $state('');
-	let showWarning = $state(false);
-	let warningValue = $state('');
-	let pincode = '';
-	let pincodeVerified = false;
-
-	// Note: This calls the actual Swap component but handles the onSwap function. If you want to handle the onSwap function then do not use this but call Swap itself.
-
-	function onSwap(
-		fundingAddress: string,
-		fromToken: SwapToken,
-		toToken: SwapToken,
-		fromAmount: BigNumberish,
-		toAmount: BigNumberish
-	) {
-		log.info(
-			`onSwap: fundingAddress=${fundingAddress}, fromToken=${fromToken}, toToken=${toToken}, fromAmount=${fromAmount}, toAmount=${toAmount}`
-		);
-	}
-
-	function handleClose() {
-		showError = false;
-		errorValue = '';
-		showWarning = false;
-		warningValue = '';
-		pincodeVerified = false;
-	}
-
-	// Pincode verification
-	function handleReject(
-		rejection: string = 'You have rejected or Pincode was not validated. No swap transaction was sent.'
-	) {
-		try {
-			showVerify = false;
-			showWarning = true;
-			warningValue = rejection;
-		} catch (e: any) {
-			log.error(e);
-		}
-	}
-
-	// One more internal check to verify the pincode
-	async function verifyWithPin(pin: string, pincodeVerified: boolean): Promise<Profile | null> {
-		try {
-			const yakklMiscStore = getMiscStore();
-			let profile: Profile | null = await getProfile();
-			if (profile === null) {
-				pincodeVerified = false;
-				throw 'Profile was not found.';
-			}
-
-			let profileEncrypted = null;
-
-			if (isEncryptedData(profile.data)) {
-				profileEncrypted = deepCopy(profile);
-				await decryptData(profile?.data, yakklMiscStore).then((result) => {
-					(profile as Profile).data = result as ProfileData;
-				});
-			}
-
-			if ((profile.data as ProfileData).pincode !== pincode && pincodeVerified === false) {
-				pincodeVerified = false;
-				throw 'PINCODE was not verified.';
-			}
-
-			if (pincode === (profile.data as ProfileData).pincode) {
-				profile = null;
-				return profileEncrypted;
-			} else {
-				pincodeVerified = false;
-				throw 'PINCODE did not match.';
-			}
-		} catch (e: any) {
-			log.error(e);
-			pincodeVerified = false;
-			return null;
-		}
-	}
-
-	async function handleVerified(pincode: string) {
-		try {
-			let profile: Profile | null = await verifyWithPin(pincode, pincodeVerified);
-			if (profile === null) {
-				throw 'Profile was not found.';
-			}
-		} catch (e) {
-			log.error(e);
-		}
-	}
-</script>
-
-<PincodeVerify
-	bind:show={showVerify}
-	onRejected={handleReject}
-	onVerified={handleVerified}
-	className="text-gray-600"
-/>
-<ErrorNoAction bind:show={showError} value={errorValue} onClose={handleClose} />
-<Warning bind:show={showWarning} value={warningValue} onClose={handleClose} />
-
-<!-- Just shows you how to set it up but it is not plugged into Swap itself -->
-
-<Swap
-	bind:show
-	{fundingAddress}
-	{provider}
-	{blockchain}
-	{swapManager}
-	{tokenService}
-	{className}
-	{onSwap}
-/>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/SwapSettings.svelte b/packages/yakkl-wallet/src/lib/components/v1/SwapSettings.svelte
deleted file mode 100644
index 2a0d795..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/SwapSettings.svelte
+++ /dev/null
@@ -1,120 +0,0 @@
-<script lang="ts">
-	import { type SwapPriceData } from '$lib/common';
-	import type { Writable } from 'svelte/store';
-
-	interface Props {
-		swapPriceDataStore: Writable<SwapPriceData>;
-		onSlippageChange: (value: number) => void;
-		onDeadlineChange: (value: number) => void;
-		onPoolFeeChange: (value: number) => void;
-		className?: string;
-	}
-
-	let {
-		swapPriceDataStore,
-		onSlippageChange,
-		onDeadlineChange,
-		onPoolFeeChange,
-		className = 'text-gray-700'
-	}: Props = $props();
-
-	const slippageOptions = [0.1, 0.5, 1, 3];
-	const deadlineOptions = [10, 20, 30, 60];
-	const poolFeeOptions = [500, 3000, 10000];
-
-	// Reactive store value
-	let swapPriceData = $derived($swapPriceDataStore);
-
-	let slippageTolerance = $state(0.5);
-	let deadline = $state(10);
-	let poolFee = $state($swapPriceDataStore.fee || 3000);
-
-	// Replace first run with $effect
-	$effect(() => {
-		if (swapPriceData) {
-			if (swapPriceData.slippageTolerance !== undefined) {
-				slippageTolerance = swapPriceData.slippageTolerance;
-			}
-			if (swapPriceData.deadline !== undefined) {
-				deadline = swapPriceData.deadline;
-			}
-			if (swapPriceData.fee !== undefined) {
-				const newFee = poolFeeOptions.includes(swapPriceData.fee)
-					? swapPriceData.fee
-					: findClosestPoolFee(swapPriceData.fee);
-				poolFee = newFee;
-			}
-		}
-	});
-
-	function findClosestPoolFee(fee: number): number {
-		if (poolFeeOptions.includes(fee)) {
-			return fee;
-		}
-		return poolFeeOptions.reduce((prev, curr) =>
-			Math.abs(curr - fee) < Math.abs(prev - fee) ? curr : prev
-		);
-	}
-
-	function handleSlippageChange(event: Event) {
-		const value = Number((event.target as HTMLSelectElement).value);
-		slippageTolerance = value;
-		onSlippageChange(value);
-	}
-
-	function handleDeadlineChange(event: Event) {
-		const value = Number((event.target as HTMLSelectElement).value);
-		deadline = value;
-		onDeadlineChange(value);
-	}
-
-	function handlePoolFeeChange(event: Event) {
-		const value = Number((event.target as HTMLSelectElement).value);
-		poolFee = value;
-		onPoolFeeChange(value);
-	}
-</script>
-
-<div class="flex justify-between items-center space-x-4 {className}">
-	<div>
-		<label for="slippage" class="block text-sm font-medium"> Slippage </label>
-		<select
-			id="slippage"
-			value={slippageTolerance}
-			onchange={handleSlippageChange}
-			class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"
-		>
-			{#each slippageOptions as option}
-				<option value={option}>{option}%</option>
-			{/each}
-		</select>
-	</div>
-
-	<div>
-		<label for="deadline" class="block text-sm font-medium"> Deadline </label>
-		<select
-			id="deadline"
-			value={deadline}
-			onchange={handleDeadlineChange}
-			class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"
-		>
-			{#each deadlineOptions as option}
-				<option value={option}>{option} minutes</option>
-			{/each}
-		</select>
-	</div>
-
-	<div>
-		<label for="poolFee" class="block text-sm font-medium"> Pool Fee </label>
-		<select
-			id="poolFee"
-			value={poolFee}
-			onchange={handlePoolFeeChange}
-			class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"
-		>
-			{#each poolFeeOptions as option}
-				<option value={option}>{option / 10000}%</option>
-			{/each}
-		</select>
-	</div>
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/SwapSummary.svelte b/packages/yakkl-wallet/src/lib/components/v1/SwapSummary.svelte
deleted file mode 100644
index 157863a..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/SwapSummary.svelte
+++ /dev/null
@@ -1,133 +0,0 @@
-<script lang="ts">
-	import { type Writable } from 'svelte/store';
-	import type { SwapPriceData } from '$lib/common/interfaces';
-	import { ethers as ethersv6 } from 'ethers-v6';
-	import {
-		calculateFeeAmount,
-		calculateFeeBasisPointsPercent,
-		formatFeeToUSD
-	} from '$lib/utilities/utilities';
-	import { toBigInt } from '$lib/common/math';
-	import { YAKKL_FEE_BASIS_POINTS_DIVISOR } from '$lib/common';
-
-	interface Props {
-		swapPriceDataStore: Writable<SwapPriceData>;
-		disabled?: boolean; // This assumes for wrapping and unwrapping of ETH WETH
-	}
-
-	let { swapPriceDataStore, disabled = false }: Props = $props();
-
-	let exchangeRate = $state(0);
-	let feeBasisPointsToPercent = $state('0.0000%');
-
-	// Declare reactive variables
-	let swapPriceData = $derived($swapPriceDataStore);
-	let tokenOutPriceInUSD = $derived(swapPriceData.tokenOutPriceInUSD || '--');
-	let gasEstimateInUSD = $derived(swapPriceData.gasEstimateInUSD || '--');
-
-	// Replace first run with $effect
-	$effect(() => {
-		feeBasisPointsToPercent = swapPriceData
-			? calculateFeeBasisPointsPercent(swapPriceData.feeBasisPoints)
-			: '0.0000%';
-	});
-
-	// Replace second run with $effect
-	$effect(() => {
-		if (
-			swapPriceData &&
-			toBigInt(swapPriceData.amountIn) > 0n &&
-			toBigInt(swapPriceData.amountOut) > 0n
-		) {
-			const tokenIn = swapPriceData.tokenIn;
-			const tokenOut = swapPriceData.tokenOut;
-
-			// More precise exchange rate calculation
-			const amountInFormatted = parseFloat(
-				ethersv6.formatUnits(toBigInt(swapPriceData.amountIn) || 0n, tokenIn.decimals)
-			);
-			const amountOutFormatted = parseFloat(
-				ethersv6.formatUnits(toBigInt(swapPriceData.amountOut) || 0n, tokenOut.decimals)
-			);
-
-			if (amountInFormatted > 0 && amountOutFormatted > 0) {
-				exchangeRate = amountOutFormatted / amountInFormatted;
-			} else {
-				exchangeRate = 0;
-			}
-		} else {
-			exchangeRate = 0;
-		}
-	});
-
-	let feeAmountInUSD = $derived(
-		(() => {
-			if (
-				swapPriceData &&
-				toBigInt(swapPriceData.amountIn) > 0n &&
-				swapPriceData.marketPriceIn > 0 &&
-				swapPriceData.tokenIn &&
-				swapPriceData.tokenIn.decimals &&
-				swapPriceData.feeBasisPoints &&
-				disabled === false
-			) {
-				// Convert basis points to precise decimal
-				const feeDecimal = swapPriceData.feeBasisPoints / YAKKL_FEE_BASIS_POINTS_DIVISOR;
-
-				// Calculate fee amount in token units without rounding
-				const feeAmount = calculateFeeAmount(
-					toBigInt(swapPriceData.amountIn),
-					swapPriceData.feeBasisPoints
-				);
-				return formatFeeToUSD(
-					feeAmount,
-					swapPriceData.tokenIn.decimals,
-					swapPriceData.marketPriceIn
-				);
-			} else {
-				// Fallback value until all data is available or valid
-				return disabled ? '' : 'Calculating...';
-			}
-		})()
-	);
-</script>
-
-<div class="space-y-2 text-sm text-gray-500">
-	<!-- Exchange Rate Display -->
-	{#if !disabled}
-		<div class="flex justify-between w-full">
-			<span class="text-left truncate">
-				{#if exchangeRate && exchangeRate > 0}
-					Exchange Rate: 1 {swapPriceData.tokenOut.symbol}  {(1 / exchangeRate).toFixed(6)}
-					{swapPriceData.tokenIn.symbol}
-				{:else}
-					Exchange Rate: ~N/A~
-				{/if}
-			</span>
-		</div>
-
-		<!-- Token Out Price in USD -->
-		<div class="flex justify-between w-full">
-			<span class="text-left truncate">
-				Token Price (USD): {tokenOutPriceInUSD}
-			</span>
-		</div>
-	{/if}
-
-	<!-- Gas Fee Estimate -->
-	<div class="flex justify-between items-center w-full">
-		<div class="flex items-center space-x-2">
-			<img src="/images/gas.svg" alt="Gas Estimate" class="w-3 h-3" />
-			<span>Gas Fee  {gasEstimateInUSD}</span>
-		</div>
-	</div>
-
-	<!-- Fee Estimate -->
-	{#if !disabled}
-		<div class="flex justify-between w-full">
-			<span class="text-left truncate">
-				Fee ({feeBasisPointsToPercent}):  {feeAmountInUSD}
-			</span>
-		</div>
-	{/if}
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/SwapTokenPanel.svelte b/packages/yakkl-wallet/src/lib/components/v1/SwapTokenPanel.svelte
deleted file mode 100644
index fa4764d..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/SwapTokenPanel.svelte
+++ /dev/null
@@ -1,173 +0,0 @@
-<script lang="ts">
-	import type { Writable } from 'svelte/store';
-	import TokenDropdown from './TokenDropdown.svelte';
-	import SwapTokenPrice from './SwapTokenPrice.svelte';
-	import type { SwapToken, SwapPriceData } from '$lib/common/interfaces';
-	import { ethers as ethersv6 } from 'ethers-v6';
-	import { debounce } from 'lodash-es';
-	import { toBigInt } from '$lib/common';
-
-	interface Props {
-		type?: 'sell' | 'buy';
-		tokens?: SwapToken[];
-		disabled?: boolean;
-		readOnly?: boolean;
-		insufficientBalance?: boolean;
-		balance?: string;
-		resetValues?: boolean;
-		swapPriceDataStore: Writable<SwapPriceData>;
-		onTokenSelect: (token: SwapToken) => void;
-		onAmountChange: (amount: string) => void;
-	}
-
-	let {
-		type = 'sell',
-		tokens = [],
-		disabled = false,
-		readOnly = false,
-		insufficientBalance = $bindable(false),
-		balance = $bindable('0'),
-		resetValues = $bindable(false),
-		swapPriceDataStore,
-		onTokenSelect,
-		onAmountChange
-	}: Props = $props();
-
-	// Reactive store value
-	let swapPriceData = $state($swapPriceDataStore);
-
-	// Input state management
-	let userInput = $state('');
-	let formattedAmount = $state('');
-
-	function formatAmount(amount: bigint, decimals: number): string {
-		if (amount === 0n) return '';
-
-		const formattedValue = ethersv6.formatUnits(amount, decimals);
-		const [integerPart, decimalPart] = formattedValue.split('.');
-		if (!decimalPart) return integerPart;
-
-		const trimmedDecimal = decimalPart.replace(/0+$/, '');
-		return trimmedDecimal ? `${integerPart}.${trimmedDecimal}` : integerPart;
-	}
-
-	const debouncedAmountChange = debounce((value: string) => {
-		onAmountChange(value);
-	}, 300);
-
-	function handleAmountInput(event: Event) {
-		const input = event.target as HTMLInputElement;
-		let value = input.value;
-
-		value = value.replace(/[^0-9.]/g, '');
-
-		const parts = value.split('.');
-		if (parts.length > 2) {
-			value = `${parts[0]}.${parts.slice(1).join('')}`;
-		}
-
-		if (parts[1] && parts[1].length > 6) {
-			value = `${parts[0]}.${parts[1].slice(0, 6)}`;
-		}
-
-		userInput = value;
-
-		if (value !== '' && value !== '.') {
-			debouncedAmountChange(value);
-		}
-	}
-
-	function handleBlur(event: FocusEvent) {
-		const value = (event.target as HTMLInputElement).value;
-
-		if (value !== '' && value !== '.') {
-			onAmountChange(value);
-		}
-	}
-
-	// Replace run with $effect for store subscription
-	$effect(() => {
-		swapPriceData = $swapPriceDataStore;
-	});
-
-	// Replace run with $effect for reset values
-	$effect(() => {
-		if (resetValues) {
-			userInput = '';
-			formattedAmount = '';
-			balance = '0';
-			insufficientBalance = false;
-			swapPriceData.amountIn = 0n;
-			swapPriceData.amountOut = 0n;
-			resetValues = false;
-		}
-	});
-
-	// Replace run with $effect for amount formatting
-	$effect(() => {
-		if (type === 'sell') {
-			if (toBigInt(swapPriceData.amountIn) > 0n) {
-				formattedAmount = formatAmount(
-					toBigInt(swapPriceData.amountIn) || 0n,
-					swapPriceData.tokenIn.decimals
-				);
-			} else {
-				formattedAmount = '';
-			}
-		} else {
-			if (toBigInt(swapPriceData.amountOut) > 0n) {
-				formattedAmount = formatAmount(
-					toBigInt(swapPriceData.amountOut) || 0n,
-					swapPriceData.tokenOut.decimals
-				);
-			} else {
-				formattedAmount = '';
-			}
-		}
-	});
-</script>
-
-<div
-	class="border border-gray-300 shadow-md p-4 rounded-lg bg-gray-50 dark:bg-gray-800
-  {disabled ? ' opacity-50 pointer-events-none' : ''}"
->
-	<div class="flex justify-between items-center">
-		<input
-			type="text"
-			placeholder="0"
-			value={userInput || formattedAmount}
-			oninput={handleAmountInput}
-			onblur={handleBlur}
-			{disabled}
-			readonly={readOnly}
-			class="
-        bg-transparent
-        text-3xl
-        font-bold
-        w-1/2
-        mr-4
-        focus:outline-none
-        focus:border-b-2
-        focus:border-blue-500
-        {insufficientBalance ? 'text-red-500 dark:text-red-400 ' : 'text-black dark:text-white '}
-        {disabled ? 'cursor-not-allowed' : ''}
-      "
-		/>
-		<TokenDropdown
-			{disabled}
-			selectedToken={type === 'sell' ? swapPriceData.tokenIn : swapPriceData.tokenOut}
-			{onTokenSelect}
-		/>
-	</div>
-	<div class="flex justify-between items-center mt-2 text-sm">
-		<SwapTokenPrice {swapPriceDataStore} {type} />
-		{#if type === 'sell'}
-			Balance: {balance}
-		{/if}
-	</div>
-	{#if insufficientBalance}
-		<div class="text-red-500 dark:text-red-400 text-sm mt-1">
-			Insufficient balance for this swap
-		</div>
-	{/if}
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/SwapTokenPrice.svelte b/packages/yakkl-wallet/src/lib/components/v1/SwapTokenPrice.svelte
deleted file mode 100644
index 76b3268..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/SwapTokenPrice.svelte
+++ /dev/null
@@ -1,98 +0,0 @@
-<script lang="ts">
-	import { formatDate } from '$lib/common/datetime';
-	import type { SwapPriceData } from '$lib/common/interfaces';
-	import { toBigInt } from '$lib/common/math';
-	import { formatPrice, formatQuantity } from '$lib/utilities';
-	import { ethers as ethersv6 } from 'ethers-v6';
-	import { onMount } from 'svelte';
-	import type { Writable } from 'svelte/store';
-	import { isUsdModeStore } from '$lib/common/stores/uiStateStore';
-
-	let isUsdMode = $state(isUsdModeStore);
-
-	interface Props {
-		swapPriceDataStore: Writable<SwapPriceData>;
-		type?: 'sell' | 'buy';
-		showLastUpdated?: boolean;
-		className?: string;
-	}
-
-	let {
-		swapPriceDataStore,
-		type = 'sell',
-		showLastUpdated = false,
-		className = ''
-	}: Props = $props();
-
-	// Display the price based on the type (sell/buy)
-	let price = $state(0);
-	let amount = $state(0n);
-	let decimals = $state(0);
-
-	onMount(async () => {
-		swapPriceDataUpdated();
-	});
-
-	function swapPriceDataUpdated() {
-		if (swapPriceData) {
-			const tokenIn = swapPriceData.tokenIn;
-			const tokenOut = swapPriceData.tokenOut;
-			const amountIn = toBigInt(swapPriceData.amountIn);
-			const amountOut = toBigInt(swapPriceData.amountOut);
-			const marketPriceIn = swapPriceData.marketPriceIn;
-			const marketPriceOut = swapPriceData.marketPriceOut;
-
-			price = 0;
-
-			if (type === 'sell') {
-				decimals = tokenIn?.decimals || 0;
-				amount = amountIn;
-				if (amountIn > 0n && marketPriceIn > 0) {
-					price = parseFloat(ethersv6.formatUnits(amountIn, tokenIn.decimals)) * marketPriceIn;
-				} else {
-					price = Math.abs(marketPriceIn);
-				}
-			} else if (type === 'buy') {
-				decimals = tokenOut?.decimals || 0;
-				amount = amountOut;
-				if (amountOut > 0n && marketPriceOut > 0) {
-					price = parseFloat(ethersv6.formatUnits(amountOut, tokenOut.decimals)) * marketPriceOut;
-				} else {
-					price = Math.abs(marketPriceOut);
-				}
-			}
-		}
-	}
-
-	function getSymbolPair() {
-		const inSymbol = swapPriceData.tokenIn?.symbol || '';
-		const outSymbol = swapPriceData.tokenOut?.symbol || '';
-		return inSymbol && outSymbol ? `${inSymbol}/${outSymbol}` : '';
-	}
-
-	let swapPriceData = $derived($swapPriceDataStore);
-
-	// Replace run with $effect
-	$effect(() => {
-		if (swapPriceData) {
-			swapPriceDataUpdated();
-		}
-	});
-</script>
-
-<div class="flex flex-col w-full gap-1 {className}">
-	<div class="flex justify-between items-center w-full">
-		<div class="flex items-center gap-2">
-			<span class="text-sm text-gray-600">{getSymbolPair()}</span>
-			<span class="text-sm font-semibold"
-				>{isUsdMode ? `${formatPrice(price)}` : `${formatQuantity(amount, decimals)}`}</span
-			>
-		</div>
-	</div>
-
-	<div class="flex justify-between items-center w-full text-xs text-gray-500">
-		{#if price > 0 && showLastUpdated && swapPriceData && swapPriceData.lastUpdated}
-			<span>Last updated: {formatDate(swapPriceData.lastUpdated)}</span>
-		{/if}
-	</div>
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/SwitchChain.svelte b/packages/yakkl-wallet/src/lib/components/v1/SwitchChain.svelte
deleted file mode 100644
index 2367c75..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/SwitchChain.svelte
+++ /dev/null
@@ -1,76 +0,0 @@
-<script lang="ts">
-	import type { YakklCurrentlySelected } from '$lib/common/interfaces';
-	import { getYakklCurrentlySelected, setYakklCurrentlySelectedStorage } from '$lib/common/stores';
-	import { log } from '$lib/common/logger-wrapper';
-	import { onMount } from 'svelte';
-
-	export let chainId: string; // 'hex'
-	export let onApprove: () => void;
-	export let onReject: () => void;
-
-	// NOTE: WIP - Adding a switch chain component to the wallet
-
-	const chainLabels: Record<string, string> = {
-		'0x1': 'Mainnet',
-		'0xaa36a7': 'Sepolia',
-		'0x89': 'Polygon',
-		'0x13881': 'Mumbai'
-	};
-
-	let currentChain: YakklCurrentlySelected | null = null;
-	let currentChainId: string;
-	let currentChainLabel: string | null = null;
-
-	onMount(async () => {
-		try {
-			const chain = await getYakklCurrentlySelected();
-			if (chain) {
-				currentChain = chain;
-				currentChainId = chain.shortcuts.chainId.toString(16);
-				currentChainLabel = chainLabels[currentChainId] || 'Unknown Network';
-			} else {
-				throw new Error('No chain found');
-			}
-		} catch (error) {
-			log.error('Error switching chain', false, error);
-			onReject();
-		}
-	});
-
-	function handleSwitch() {
-		try {
-			currentChain.shortcuts.chainId = parseInt(chainId, 16);
-			setYakklCurrentlySelectedStorage(currentChain);
-			onApprove();
-		} catch (error) {
-			log.error('Error switching chain', false, error);
-			onReject();
-		}
-	}
-</script>
-
-<div class="flex flex-col space-y-4">
-	<div class="text-center">
-		<h2 class="text-xl font-semibold">Switch Network</h2>
-		<p class="text-gray-600">Current Network: {currentChainLabel}</p>
-	</div>
-
-	<div class="flex flex-col space-y-2">
-		<p class="text-sm text-gray-600">Switch to: {chainLabels[chainId] || 'Unknown Network'}</p>
-	</div>
-
-	<div class="flex justify-end space-x-2">
-		<button
-			class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200"
-			on:click={onReject}
-		>
-			Reject
-		</button>
-		<button
-			class="px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700"
-			on:click={handleSwitch}
-		>
-			Switch Network
-		</button>
-	</div>
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/Toast.svelte b/packages/yakkl-wallet/src/lib/components/v1/Toast.svelte
deleted file mode 100644
index 8d3f0a1..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/Toast.svelte
+++ /dev/null
@@ -1,44 +0,0 @@
-<script lang="ts">
-	import { Toast } from 'flowbite-svelte';
-	import { slide } from 'svelte/transition';
-
-	interface Props {
-		toastStatus?: boolean;
-		counter?: number;
-		message?: string;
-	}
-
-	let {
-		toastStatus = $bindable(false),
-		counter = $bindable(2),
-		message = 'Success'
-	}: Props = $props();
-
-	export function toastTrigger(count = 2, msg = 'Success') {
-		toastStatus = true;
-		counter = count;
-		timeout();
-	}
-
-	export function timeout(): any {
-		if (--counter > 0) return setTimeout(timeout, 1000);
-		toastStatus = false;
-	}
-</script>
-
-<Toast color="indigo" transition={slide} bind:toastStatus>
-	<svg
-		xmlns="http://www.w3.org/2000/svg"
-		fill="none"
-		viewBox="0 0 24 24"
-		stroke-width="1.5"
-		stroke="currentColor"
-		class="w-6 h-6"
-		><path
-			stroke-linecap="round"
-			stroke-linejoin="round"
-			d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
-		/></svg
-	>
-	{message}
-</Toast>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/ToggleSwitch.svelte b/packages/yakkl-wallet/src/lib/components/v1/ToggleSwitch.svelte
deleted file mode 100644
index 9fefc28..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/ToggleSwitch.svelte
+++ /dev/null
@@ -1,43 +0,0 @@
-<script lang="ts">
-	import Switch from './ui.tmp/switch/switch.svelte';
-
-	interface Props {
-		value: boolean;
-		labelOn: string;
-		labelOff: string;
-		disabled?: boolean;
-		onChange: (value: boolean) => void; // Callback for value change
-		[key: string]: any;
-	}
-
-	let {
-		value,
-		labelOn = 'USD',
-		labelOff = 'Token',
-		disabled = false,
-		onChange,
-		...rest
-	}: Props = $props();
-
-	// Create a reactive state for `value`
-	let checked = $state(value);
-
-	// Watch for changes in `checked` and call onChange
-	$effect(() => {
-		if (!disabled) {
-			onChange(checked);
-		}
-	});
-</script>
-
-<div class="flex items-center">
-	<span class="mr-2 text-sm w-10">{checked ? labelOn : labelOff}</span>
-	<Switch
-		class="peer inline-flex h-6 w-10 cursor-pointer items-center rounded-full border-2 border-purple-600 shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"
-		bind:checked
-		{disabled}
-	/>
-</div>
-
-<!-- The default values for the thumb control is: "bg-background pointer-events-none block size-5 rounded-full shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0" -->
-<!-- We changed it to: bg-slate-500 pointer-events-none block h-4 w-4 rounded-full shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0 -->
diff --git a/packages/yakkl-wallet/src/lib/components/v1/TokenBalance.svelte b/packages/yakkl-wallet/src/lib/components/v1/TokenBalance.svelte
deleted file mode 100644
index 502fcfc..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/TokenBalance.svelte
+++ /dev/null
@@ -1,95 +0,0 @@
-<script lang="ts">
-	import { onMount } from 'svelte';
-	import type { SwapToken } from '$lib/common/interfaces';
-	import { ethers as ethersv6 } from 'ethers-v6';
-	import { getTokenBalance } from '$lib/utilities/balanceUtils';
-	import type { TokenService } from '$lib/managers/blockchains/evm/TokenService';
-	import type { Provider } from '$lib/managers/Provider';
-
-	interface Props {
-		token: SwapToken;
-		address?: string | null;
-		provider?: Provider | null;
-		tokenService?: TokenService<any> | null;
-		className?: string;
-		balanceText?: string;
-	}
-
-	let {
-		token,
-		address = null,
-		provider = null,
-		tokenService = null,
-		className = $bindable('text-gray-500 '),
-		balanceText = 'Balance: '
-	}: Props = $props();
-
-	let balance: bigint = $state(0n);
-
-	onMount(async () => {
-		await getBalance();
-	});
-
-	// Helper function to determine if an error should be shown to the user
-	function shouldShowErrorToUser(error: any): boolean {
-		const errorMessage = error?.message || error?.toString() || '';
-
-		// Network/API errors that should be handled silently
-		const networkErrors = [
-			'missing response',
-			'timeout',
-			'TIMEOUT',
-			'SERVER_ERROR',
-			'NETWORK_ERROR',
-			'Failed to fetch',
-			'fetch',
-			'Connection failed',
-			'Request timeout',
-			'eth_getBalance',
-			'call revert exception',
-			'alchemy.com',
-			'infura.io',
-			'requestBody',
-			'serverError',
-			'code=SERVER_ERROR',
-			'version=web/',
-			'JsonRpcError',
-			'RPC Error',
-			'getBalance',
-			'Balance fetch'
-		];
-
-		return !networkErrors.some((pattern) =>
-			errorMessage.toLowerCase().includes(pattern.toLowerCase())
-		);
-	}
-
-	async function getBalance() {
-		if (!address || !token) {
-			balance = 0n;
-		} else {
-			try {
-				balance = await getTokenBalance(token, address, provider, tokenService);
-				if (balance <= 0n) className += 'text-red-500';
-			} catch (error) {
-				// Only log non-network errors, suppress network timeouts
-				if (shouldShowErrorToUser(error)) {
-					console.error('[TokenBalance] Balance fetch error:', error);
-				}
-				// Keep existing balance or set to 0
-				balance = balance || 0n;
-			}
-		}
-	}
-
-	$effect(() => {
-		if (token) {
-			getBalance();
-		}
-	});
-</script>
-
-<span class={className}>
-	{balanceText}{ethersv6.formatUnits(balance ? balance.toString() : '0', token.decimals)}
-	{token.symbol}
-</span>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/TokenBox.svelte b/packages/yakkl-wallet/src/lib/components/v1/TokenBox.svelte
deleted file mode 100644
index 0ef3a31..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/TokenBox.svelte
+++ /dev/null
@@ -1,42 +0,0 @@
-<script lang="ts">
-	import { onMount } from 'svelte';
-	import type { TokenData } from '$lib/common/interfaces';
-	import LineChart from '$lib/components/LineChart.svelte';
-
-	interface Props {
-		token: TokenData;
-		show?: boolean;
-	}
-
-	let { token, show = true }: Props = $props();
-
-	let chartData: { x: Date; y: number }[] = $state([]);
-
-	onMount(async () => {
-		// Fetch historical price data based on the token and timeline
-		// For simplicity, we'll mock the data here
-		chartData = [
-			{ x: new Date('2023-05-01'), y: token.price.price - 100 },
-			{ x: new Date('2023-05-02'), y: token.price.price - 50 },
-			{ x: new Date('2023-05-03'), y: token.price.price }
-		];
-	});
-</script>
-
-{#if show}
-	<div
-		class="flex flex-col items-center p-4 border border-gray-300 rounded-lg cursor-pointer text-gray-700 dark:text-gray-200 bg-gray-50 dark:bg-gray-900"
-	>
-		<div class="flex items-center mb-4">
-			<img src={token.logoURI} alt={token.name} class="w-8 h-8 mr-2" />
-			<div class="flex flex-col">
-				<div class="font-bold">{token.symbol}</div>
-				<div>{token.name}</div>
-			</div>
-		</div>
-		<div class="w-full h-24 mb-4">
-			<LineChart data={chartData} />
-		</div>
-		<div class="text-lg font-bold">{token.price.price}</div>
-	</div>
-{/if}
diff --git a/packages/yakkl-wallet/src/lib/components/v1/TokenCarouselView.svelte b/packages/yakkl-wallet/src/lib/components/v1/TokenCarouselView.svelte
deleted file mode 100644
index 5166208..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/TokenCarouselView.svelte
+++ /dev/null
@@ -1,54 +0,0 @@
-<script lang="ts">
-	import TokenGridItem from './TokenGridItem.svelte';
-	import type { TokenData } from '$lib/common/interfaces';
-
-	interface Props {
-		tokens: TokenData[];
-		onTokenClick: (token: TokenData) => void;
-	}
-
-	let { tokens = [], onTokenClick }: Props = $props();
-	let activeIndex = $state(0);
-
-	function nextToken() {
-		if (activeIndex < tokens.length - 1) activeIndex += 1;
-	}
-
-	function prevToken() {
-		if (activeIndex > 0) activeIndex -= 1;
-	}
-</script>
-
-<div
-	class="relative w-full h-full flex items-center justify-center bg-gray-50 dark:bg-gray-800 rounded-lg shadow-lg"
->
-	<!-- Previous Button top-1/2 transform -translate-y-1/2-->
-	<button
-		class="absolute w-10 h-10 left-2 bg-gray-600/80 text-white rounded-full p-3 hover:bg-gray-800"
-		onclick={prevToken}
-	>
-		&#x25C0;
-	</button>
-
-	<!-- Active Token -->
-	<!-- svelte-ignore a11y_click_events_have_key_events -->
-	<!-- svelte-ignore a11y_no_static_element_interactions -->
-	<div class="w-full h-full flex items-center justify-center p-4">
-		<div class="border rounded-lg shadow-lg bg-white p-6 text-center w-[80%] h-[90%]">
-			<TokenGridItem
-				token={tokens[activeIndex]}
-				onClick={onTokenClick}
-				isLarge={true}
-				className={'bg-purple-500/50'}
-			/>
-		</div>
-	</div>
-
-	<!-- Next Button top-1/2 transform -translate-y-1/2-->
-	<button
-		class="absolute w-10 h-10 right-2 bg-gray-600/80 text-white rounded-full p-3 hover:bg-gray-800"
-		onclick={nextToken}
-	>
-		&#x25B6;
-	</button>
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/TokenChartsTradingView.svelte b/packages/yakkl-wallet/src/lib/components/v1/TokenChartsTradingView.svelte
deleted file mode 100644
index 86b7cfa..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/TokenChartsTradingView.svelte
+++ /dev/null
@@ -1,69 +0,0 @@
-<script lang="ts">
-	import { onMount, onDestroy } from 'svelte';
-
-	let { symbol = 'COINBASE:ETHUSD' } = $props();
-	let widgetContainer: HTMLDivElement | null = null;
-
-	const initializeWidget = () => {
-		if (!widgetContainer) return;
-
-		// Clear any existing widget
-		widgetContainer.innerHTML = '';
-
-		// Dynamically add the TradingView script
-		const script = document.createElement('script');
-		script.type = 'text/javascript';
-		script.async = true;
-		script.src = '../../js/embed-widget-mini-symbol-overview.js'; // Correct widget file
-		script.innerHTML = JSON.stringify({
-			symbol, // Dynamically set the symbol
-			width: '100%',
-			height: '100%',
-			locale: 'en',
-			dateRange: '1D',
-			colorTheme: 'light',
-			trendLineColor: 'rgba(152, 0, 255, 1)',
-			underLineColor: 'rgba(152, 0, 255, 1)',
-			underLineBottomColor: 'rgba(0, 255, 255, 0)',
-			isTransparent: false,
-			autosize: true,
-			largeChartUrl: '',
-			chartOnly: false,
-			noTimeScale: false
-		});
-
-		widgetContainer.appendChild(script);
-	};
-
-	onMount(() => {
-		initializeWidget();
-	});
-
-	onDestroy(() => {
-		if (widgetContainer) {
-			widgetContainer.innerHTML = '';
-		}
-	});
-</script>
-
-<section id="advanced-chart">
-	<div class="tradingview-widget-container">
-		<div
-			bind:this={widgetContainer}
-			class="tradingview-widget-container__widget"
-			style="width: auto; height: 400px; min-height: 400px; max-height: auto;"
-		></div>
-		<div class="tradingview-widget-copyright">
-			<a href={import.meta.env.VITE_TRADING_VIEW_LINK} rel="noopener nofollow" target="_blank">
-				<span class="blue-text">Track all markets on TradingView</span>
-			</a>
-		</div>
-	</div>
-</section>
-
-<style>
-	.tradingview-widget-container {
-		width: 100%;
-		height: 100%;
-	}
-</style>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/TokenChartsView.svelte b/packages/yakkl-wallet/src/lib/components/v1/TokenChartsView.svelte
deleted file mode 100644
index 8361c9e..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/TokenChartsView.svelte
+++ /dev/null
@@ -1,33 +0,0 @@
-<script lang="ts">
-	// import { VisLine, VisScatter, VisXYContainer } from "@unovis/svelte";
-	// import { color, scatterPointColors, scatterPointStrokeColors } from "./helpers.js";
-
-	import TokenChartsTradingView from './TokenChartsTradingView.svelte';
-
-	// const data = [
-	// 	{ id: 1, revenue: 10400 },
-	// 	{ id: 2, revenue: 14405 },
-	// 	{ id: 3, revenue: 9400 },
-	// 	{ id: 4, revenue: 8200 },
-	// 	{ id: 5, revenue: 7000 },
-	// 	{ id: 6, revenue: 9600 },
-	// 	{ id: 7, revenue: 11244 },
-	// 	{ id: 8, revenue: 26475 },
-	// ];
-	// const x = (d: { revenue: number; id: number }) => d.id;
-	// const y = (d: { revenue: number; id: number }) => d.revenue;
-</script>
-
-<!-- <VisXYContainer {data} height="280" class="bg-zinc-700 text-white">
-	<VisLine {x} {y} color={color()} />
-	<VisScatter
-		{x}
-		{y}
-		size={6}
-		color={scatterPointColors}
-		strokeColor={scatterPointStrokeColors}
-		strokeWidth={2}
-	/>
-</VisXYContainer> -->
-
-<TokenChartsTradingView />
diff --git a/packages/yakkl-wallet/src/lib/components/v1/TokenComponentList.svelte b/packages/yakkl-wallet/src/lib/components/v1/TokenComponentList.svelte
deleted file mode 100644
index 00498e5..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/TokenComponentList.svelte
+++ /dev/null
@@ -1,149 +0,0 @@
-<script lang="ts">
-	import { getYakklCombinedToken, yakklCombinedTokenStore, getSettings } from '$lib/common/stores';
-	import type { Settings, TokenData } from '$lib/common';
-	import { onMount } from 'svelte';
-	import { log } from '$lib/managers/Logger';
-	import { browser_ext } from '$lib/common/environment';
-	import { handleOnMessageForPricing } from '$lib/common/listeners/ui/uiListeners';
-	import { startPricingChecks } from '$lib/tokens/prices';
-	import { updateTokenPrices } from '$lib/common/tokenPriceManager';
-	import TokenLineView from './TokenLineView.svelte';
-	import * as Accordion from './ui.tmp/accordion';
-	import { cn } from '$lib/utils';
-
-	interface Props {
-		maxVisibleTokens?: number; // 0 means show all
-		maxTokens?: number;
-		locked?: boolean;
-		className?: string;
-	}
-
-	let {
-		maxVisibleTokens = 0,
-		locked = true,
-		maxTokens = locked ? 3 : 0,
-		className = ''
-	}: Props = $props();
-
-	let tokens: TokenData[] = $state([]);
-	let visibleTokens: TokenData[] = $state([]);
-	let remainingTokens: TokenData[] = $state([]);
-	let isExpanded = $state(false);
-
-	log.info('TokenComponentList', false, 'Mounting');
-
-	onMount(async (): Promise<any> => {
-		log.info('TokenComponentList', false, 'onMount');
-
-		const settings: Settings = await getSettings();
-		if (!settings.init || !settings.legal.termsAgreed) {
-			tokens = [];
-			updateTokenDisplay();
-		} else {
-			getYakklCombinedToken().then((initialTokens) => {
-				console.log('TokenComponentList: combined tokens loaded', initialTokens.length);
-
-				// If no tokens are loaded, try to trigger loading them
-				if (initialTokens.length === 0) {
-					log.warn(
-						'TokenComponentList: No tokens loaded from combined store, attempting to load defaults'
-					);
-					import('$lib/managers/tokens/loadDefaultTokens').then(({ loadDefaultTokens }) => {
-						loadDefaultTokens().then(() => {
-							// After loading defaults, attempt to get combined tokens again
-							getYakklCombinedToken().then((reloadedTokens) => {
-								console.log('TokenComponentList: tokens after reload', reloadedTokens.length);
-								const effectiveMaxTokens = locked ? maxTokens : maxTokens > 0 ? maxTokens : 0;
-								tokens =
-									effectiveMaxTokens > 0
-										? reloadedTokens.slice(0, effectiveMaxTokens)
-										: reloadedTokens;
-								updateTokenDisplay();
-							});
-						});
-					});
-				}
-
-				const effectiveMaxTokens = locked ? maxTokens : maxTokens > 0 ? maxTokens : 0;
-				tokens =
-					effectiveMaxTokens > 0 ? initialTokens.slice(0, effectiveMaxTokens) : initialTokens;
-				updateTokenDisplay();
-			});
-		}
-
-		if (browser_ext) {
-			browser_ext.runtime.onMessage.addListener(handleOnMessageForPricing as any);
-			browser_ext.runtime.sendMessage({ action: 'getTokenData' }).catch(err => {
-				// Expected during startup - token data will be loaded when background is ready
-				console.debug('Background not ready for getTokenData:', err);
-			});
-
-			startPricingChecks();
-			updateTokenPrices(); // Initial token price update
-		}
-
-		// Subscribe to store changes
-		const unsubscribe = yakklCombinedTokenStore.subscribe((newTokens) => {
-			// Apply the same token limit logic when store updates
-			const effectiveMaxTokens = locked ? maxTokens : maxTokens > 0 ? maxTokens : 0;
-			tokens = effectiveMaxTokens > 0 ? newTokens.slice(0, effectiveMaxTokens) : newTokens;
-			updateTokenDisplay();
-		});
-
-		return () => {
-			unsubscribe();
-			if (browser_ext) {
-				browser_ext.runtime.onMessage.removeListener(handleOnMessageForPricing as any);
-			}
-		};
-	});
-
-	function updateTokenDisplay() {
-		// If maxVisibleTokens is 0 or we have fewer tokens than maxVisibleTokens, show all tokens
-		if (maxVisibleTokens === 0 || tokens.length <= maxVisibleTokens) {
-			visibleTokens = tokens;
-			remainingTokens = [];
-		} else {
-			visibleTokens = tokens.slice(0, maxVisibleTokens);
-			remainingTokens = tokens.slice(maxVisibleTokens);
-		}
-		console.log('updateTokenDisplay', {
-			visibleTokens,
-			remainingTokens,
-			maxVisibleTokens,
-			maxTokens,
-			locked
-		});
-	}
-
-	function toggleExpand() {
-		isExpanded = !isExpanded;
-	}
-</script>
-
-<div class={cn('flex flex-col', className)}>
-	<div class="space-y-1">
-		{#each visibleTokens as token}
-			<TokenLineView {token} {locked} />
-		{/each}
-	</div>
-
-	{#if remainingTokens.length > 0}
-		<Accordion.Root type="single">
-			<Accordion.Item value="remaining-tokens">
-				<Accordion.Trigger
-					class="w-full py-2 text-sm text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"
-				>
-					{isExpanded ? 'Show Less' : `Show ${remainingTokens.length} More Tokens`}
-				</Accordion.Trigger>
-				<Accordion.Content>
-					<div class="space-y-1">
-						{#each remainingTokens as token}
-							<TokenLineView {token} {locked} />
-						{/each}
-					</div>
-				</Accordion.Content>
-			</Accordion.Item>
-		</Accordion.Root>
-	{/if}
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/TokenDropdown.svelte b/packages/yakkl-wallet/src/lib/components/v1/TokenDropdown.svelte
deleted file mode 100644
index 65e3316..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/TokenDropdown.svelte
+++ /dev/null
@@ -1,121 +0,0 @@
-<script lang="ts">
-	import { derived } from 'svelte/store';
-	import { sortedTokens } from '$lib/common/stores/tokens';
-	import type { SwapToken } from '$lib/common/interfaces';
-
-	interface Props {
-		selectedToken: SwapToken;
-		disabled?: boolean;
-		onTokenSelect: (token: SwapToken) => void;
-	}
-
-	let { selectedToken, disabled = false, onTokenSelect }: Props = $props();
-
-	// svelte-ignore non_reactive_update
-	let isOpen = $state(false);
-	let searchQuery = $state('');
-
-	// Use derived to filter tokens based on searchQuery
-	const filteredTokens = derived([sortedTokens], ([$sortedTokens]) =>
-		searchQuery.trim()
-			? $sortedTokens.filter(
-					(token) =>
-						token.symbol.toLowerCase().includes(searchQuery.toLowerCase()) ||
-						token.name.toLowerCase().includes(searchQuery.toLowerCase())
-				)
-			: $sortedTokens
-	);
-
-	function toggleDropdown() {
-		if (disabled) return;
-		isOpen = !isOpen;
-		if (isOpen) {
-			searchQuery = '';
-		}
-	}
-
-	function selectToken(token: SwapToken) {
-		if (disabled) return;
-
-		selectedToken = token;
-		onTokenSelect(token);
-		isOpen = false;
-		searchQuery = '';
-	}
-
-	function getLogoURL(logoURI: string | null | undefined): string {
-		if (!logoURI || logoURI.startsWith('http://') || logoURI.startsWith('ipfs://')) {
-			return '/images/logoBullFav32x32.png';
-		}
-		return logoURI!;
-	}
-</script>
-
-<div class="relative w-full max-w-sm mx-auto">
-	<button
-		class="w-full flex items-center px-4 py-3
-      {disabled
-			? 'bg-gray-500 text-gray-200 cursor-not-allowed'
-			: 'bg-purple-600 text-white hover:bg-purple-700'}
-      font-bold rounded-full transition duration-300 ease-in-out focus:outline-none"
-		onclick={toggleDropdown}
-		{disabled}
-	>
-		{#if selectedToken?.symbol && selectedToken?.name}
-			<img
-				src={getLogoURL(selectedToken.logoURI)}
-				alt={selectedToken.name}
-				class="w-8 h-8 rounded-full"
-			/>
-			<div class="flex-1 flex flex-col ml-3">
-				<span class="font-bold text-lg">{selectedToken.symbol}</span>
-				<span class="text-sm text-gray-200 mt-0.5">{selectedToken.name}</span>
-			</div>
-		{:else}
-			<span class="ml-3">Select Token</span>
-		{/if}
-		<svg
-			xmlns="http://www.w3.org/2000/svg"
-			class="ml-auto h-5 w-5 transition-transform duration-300"
-			viewBox="0 0 20 20"
-			fill="currentColor"
-		>
-			<path
-				fill-rule="evenodd"
-				d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
-				clip-rule="evenodd"
-			/>
-		</svg>
-	</button>
-
-	{#if isOpen && !disabled}
-		<div
-			class="absolute z-10 w-full bg-white dark:text-gray-600 rounded-md shadow-lg mt-2 p-2 border border-gray-200"
-		>
-			<input
-				type="text"
-				placeholder="Search..."
-				class="w-full px-4 py-2 mb-2 border border-gray-300 rounded-lg focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 transition duration-200"
-				bind:value={searchQuery}
-			/>
-			<ul class="max-h-60 overflow-y-auto w-full">
-				{#each $filteredTokens as token}
-					<!-- svelte-ignore a11y_click_events_have_key_events -->
-					<!-- svelte-ignore a11y_no_noninteractive_element_interactions -->
-					<li
-						class="px-4 py-2 flex items-center space-x-3 hover:bg-gray-100 cursor-pointer transition duration-200"
-						onclick={() => selectToken(token)}
-					>
-						<img src={getLogoURL(token.logoURI)} alt={token.name} class="w-8 h-8 rounded-full" />
-						<div class="flex-1 flex flex-col">
-							<span class="font-bold text-gray-800">{token.symbol}</span>
-							<span class="text-sm text-gray-600">{token.name}</span>
-						</div>
-					</li>
-				{:else}
-					<li class="px-4 py-2 text-gray-500">No tokens found</li>
-				{/each}
-			</ul>
-		</div>
-	{/if}
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/TokenFiatConverter.svelte b/packages/yakkl-wallet/src/lib/components/v1/TokenFiatConverter.svelte
deleted file mode 100644
index 36edb1e..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/TokenFiatConverter.svelte
+++ /dev/null
@@ -1,316 +0,0 @@
-<!-- src/lib/components/TokenFiatConverter.svelte -->
-<script lang="ts">
-	import Modal from './Modal.svelte';
-	import { onMount } from 'svelte';
-	import type { TokenData } from '$lib/common';
-	import { PriceManager } from '$lib/managers/PriceManager';
-	import { CoinbasePriceProvider } from '$lib/managers/providers/price/coinbase/CoinbasePriceProvider';
-	import { CoingeckoPriceProvider } from '$lib/managers/providers/price/coingecko/CoingeckoPriceProvider';
-	import { KrakenPriceProvider } from '$lib/managers/providers/price/kraken/KrakenPriceProvider';
-
-	let {
-		show = $bindable(false),
-		tokens = [],
-		selectedToken = null,
-		initialTokenAmount = '',
-		initialUsdAmount = '',
-		onComplete = null as ((amount: string, isUsd: boolean, token?: TokenData) => void) | null,
-		compact = false,
-		readOnly = false,
-		onClose = () => {
-			show = false;
-		}
-	} = $props<{
-		show?: boolean;
-		tokens?: TokenData[];
-		selectedToken?: TokenData | null;
-		initialTokenAmount?: string;
-		initialUsdAmount?: string;
-		onComplete?: ((amount: string, isUsd: boolean, token?: TokenData) => void) | null;
-		compact?: boolean;
-		readOnly?: boolean;
-		onClose?: () => void;
-	}>();
-
-	// State
-	let fromToken = $state(selectedToken);
-	let tokenAmount = $state(initialTokenAmount);
-	let usdAmount = $state(initialUsdAmount);
-	let price = $state(0);
-	let isLoading = $state(false);
-
-	const priceManager = new PriceManager([
-		{ provider: new CoinbasePriceProvider(), weight: 5 },
-		{ provider: new CoingeckoPriceProvider(), weight: 3 },
-		{ provider: new KrakenPriceProvider(), weight: 2 }
-	]);
-
-	// Conversion logic
-	async function updatePrice() {
-		if (fromToken) {
-			isLoading = true;
-			try {
-				const result = await priceManager.getMarketPrice(fromToken.symbol);
-				price = result && typeof result === 'object' && 'price' in result ? result.price : 0;
-			} catch (error) {
-				console.error('Failed to fetch price:', error);
-				price = 0;
-			} finally {
-				isLoading = false;
-			}
-		}
-	}
-
-	async function handleTokenChange(e: Event) {
-		const target = e.target as HTMLSelectElement;
-		fromToken = tokens.find((t: TokenData) => t.symbol === target.value) || null;
-		await updatePrice();
-
-		// Update values if one is filled
-		if (tokenAmount && price) {
-			usdAmount = formatNum(parseFloat(tokenAmount) * price);
-		} else if (usdAmount && price) {
-			tokenAmount = formatNum(parseFloat(usdAmount) / price);
-		}
-	}
-
-	async function handleTokenAmountInput(e: Event) {
-		const target = e.target as HTMLInputElement;
-		tokenAmount = target.value;
-
-		if (!price && fromToken) {
-			await updatePrice();
-		}
-
-		if (price && tokenAmount) {
-			const numValue = parseFloat(tokenAmount);
-			if (!isNaN(numValue)) {
-				usdAmount = formatNum(numValue * price);
-			} else {
-				usdAmount = '';
-			}
-		} else {
-			usdAmount = '';
-		}
-	}
-
-	async function handleUsdAmountInput(e: Event) {
-		const target = e.target as HTMLInputElement;
-		usdAmount = target.value;
-
-		if (!price && fromToken) {
-			await updatePrice();
-		}
-
-		if (price && usdAmount) {
-			const numValue = parseFloat(usdAmount);
-			if (!isNaN(numValue)) {
-				tokenAmount = formatNum(numValue / price, 6);
-			} else {
-				tokenAmount = '';
-			}
-		} else {
-			tokenAmount = '';
-		}
-	}
-
-	function formatNum(val: number, decimals = 2): string {
-		return val.toLocaleString(undefined, {
-			minimumFractionDigits: 0,
-			maximumFractionDigits: decimals
-		});
-	}
-
-	function applyTokenValue() {
-		if (onComplete && fromToken) {
-			onComplete(tokenAmount, false, fromToken);
-			if (!compact) show = false;
-		}
-	}
-
-	function applyUsdValue() {
-		if (onComplete && fromToken) {
-			onComplete(usdAmount, true, fromToken);
-			if (!compact) show = false;
-		}
-	}
-
-	function clearFields() {
-		tokenAmount = '';
-		usdAmount = '';
-		price = 0;
-	}
-
-	onMount(async () => {
-		if (!fromToken && tokens.length > 0) {
-			fromToken = tokens[0];
-		}
-		if (fromToken) {
-			await updatePrice();
-		}
-	});
-</script>
-
-{#if compact}
-	<!-- Inline version -->
-	<div class="token-converter-compact space-y-2 p-3 border rounded-lg">
-		<div class="flex items-center justify-between mb-2">
-			<h3 class="text-sm font-medium">Token  USD</h3>
-			<button
-				type="button"
-				class="text-xs text-gray-500 hover:text-gray-700"
-				onclick={clearFields}
-				disabled={readOnly}
-			>
-				Clear
-			</button>
-		</div>
-
-		<div class="space-y-2">
-			<div class="flex gap-2 items-center">
-				<select
-					bind:value={fromToken}
-					class="rounded border px-2 py-1 text-sm"
-					onchange={handleTokenChange}
-					disabled={readOnly || tokens.length <= 1}
-				>
-					{#each tokens as t (t.symbol)}
-						<option value={t}>{t.symbol}</option>
-					{/each}
-				</select>
-				<input
-					type="number"
-					min="0"
-					step="any"
-					placeholder="0.00"
-					class="rounded border px-2 py-1 flex-1 text-sm"
-					bind:value={tokenAmount}
-					oninput={handleTokenAmountInput}
-					disabled={readOnly}
-				/>
-				<span class="text-gray-500 text-sm">{fromToken?.symbol || 'Token'}</span>
-			</div>
-
-			<div class="flex gap-2 items-center">
-				<input
-					type="number"
-					min="0"
-					step="any"
-					placeholder="0.00"
-					class="rounded border px-2 py-1 flex-1 text-sm"
-					bind:value={usdAmount}
-					oninput={handleUsdAmountInput}
-					disabled={readOnly}
-				/>
-				<span class="text-gray-500 text-sm">USD</span>
-			</div>
-		</div>
-
-		<div class="text-xs text-gray-500 mt-2">
-			1 {fromToken?.symbol || 'Token'}  ${price ? formatNum(price, 2) : '--'}
-			{#if isLoading}
-				<span class="ml-1">(loading...)</span>
-			{/if}
-		</div>
-
-		{#if onComplete && !readOnly}
-			<div class="flex justify-end gap-2 mt-2">
-				<button type="button" class="btn btn-sm btn-secondary" onclick={applyTokenValue}>
-					Use Token
-				</button>
-				<button type="button" class="btn btn-sm btn-primary" onclick={applyUsdValue}>
-					Use USD
-				</button>
-			</div>
-		{/if}
-	</div>
-{:else}
-	<!-- Modal version -->
-	<Modal bind:show title="Token  USD Converter" {onClose}>
-		<div class="space-y-4 p-4 mt-4">
-			<div class="relative">
-				<button
-					type="button"
-					class="absolute -top-8 right-0 text-xs text-gray-600 hover:text-gray-900 dark:hover:text-gray-200 px-2 py-1"
-					onclick={clearFields}
-					aria-label="Clear"
-					disabled={readOnly}
-				>
-					<svg
-						xmlns="http://www.w3.org/2000/svg"
-						fill="none"
-						viewBox="0 0 24 24"
-						stroke-width="1.5"
-						stroke="currentColor"
-						class="size-6"
-					>
-						<path
-							stroke-linecap="round"
-							stroke-linejoin="round"
-							d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"
-						/>
-					</svg>
-				</button>
-
-				<div class="flex flex-col gap-3">
-					<div class="flex gap-2 items-center">
-						<select
-							bind:value={fromToken}
-							class="rounded border px-2 py-1"
-							onchange={handleTokenChange}
-							disabled={readOnly || tokens.length <= 1}
-						>
-							{#each tokens as t (t.symbol)}
-								<option value={t}>{t.symbol}</option>
-							{/each}
-						</select>
-						<input
-							type="number"
-							min="0"
-							step="any"
-							placeholder="Token amount"
-							class="rounded border px-2 py-1 flex-1"
-							bind:value={tokenAmount}
-							oninput={handleTokenAmountInput}
-							disabled={readOnly}
-						/>
-						<span class="text-gray-500">{fromToken?.symbol || 'Token'}</span>
-					</div>
-
-					<div class="flex gap-2 items-center">
-						<input
-							type="number"
-							min="0"
-							step="any"
-							placeholder="USD amount"
-							class="rounded border px-2 py-1 flex-1"
-							bind:value={usdAmount}
-							oninput={handleUsdAmountInput}
-							disabled={readOnly}
-						/>
-						<span class="text-gray-500">USD</span>
-					</div>
-
-					<div class="text-xs text-gray-500">
-						1 {fromToken?.symbol || 'Token'}  ${price ? formatNum(price, 2) : '--'}
-						{#if isLoading}
-							<span class="ml-2 text-blue-500">(updating...)</span>
-						{/if}
-					</div>
-				</div>
-			</div>
-
-			<div class="flex justify-end gap-2 mt-6">
-				{#if onComplete && !readOnly}
-					<button type="button" class="btn btn-secondary" onclick={applyTokenValue}>
-						Use Token Amount
-					</button>
-					<button type="button" class="btn btn-primary" onclick={applyUsdValue}>
-						Use USD Amount
-					</button>
-				{/if}
-				<button type="button" class="btn btn-secondary" onclick={onClose}> Close </button>
-			</div>
-		</div>
-	</Modal>
-{/if}
diff --git a/packages/yakkl-wallet/src/lib/components/v1/TokenForm.svelte b/packages/yakkl-wallet/src/lib/components/v1/TokenForm.svelte
deleted file mode 100644
index 6c18a98..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/TokenForm.svelte
+++ /dev/null
@@ -1,693 +0,0 @@
-<script lang="ts">
-	import { createForm } from 'svelte-forms-lib';
-	import * as yup from 'yup';
-	import Modal from './Modal.svelte';
-	import { VERSION, type TokenData } from '$lib/common';
-	import { log } from '$lib/managers/Logger';
-	import Tooltip from './Tooltip.svelte';
-
-	interface Props {
-		show?: boolean;
-		token?: TokenData | null;
-		className?: string;
-		onSubmit?: (token: TokenData) => void;
-	}
-
-	let { show = $bindable(false), token = null, className = 'z-[999]', onSubmit }: Props = $props();
-
-	const { form, errors, handleChange, handleSubmit, updateInitialValues } = createForm({
-		initialValues: {
-			address: '',
-			name: '',
-			alias: '',
-			symbol: '',
-			decimals: 18,
-			chainId: 1,
-			sidepanel: true,
-			evmCompatible: true,
-			logoURI: '',
-			url: '',
-			customDefault: 'custom',
-			isNative: false,
-			isStablecoin: false,
-			description: '',
-			// Enhanced fields for multi-blockchain support
-			blockchain: 'ethereum',
-			network: 'mainnet',
-			standard: 'ERC20',
-			isWatchOnly: false,
-			portfolioIncluded: true,
-			coingeckoId: '',
-			website: '',
-			exchange: '',
-			exchangeSymbol: '',
-			isExchangeBalance: false
-		},
-		validationSchema: yup.object().shape({
-			address: yup.string().required('Please enter a token address'),
-			name: yup.string().required('Please enter a token name'),
-			alias: yup.string().optional(),
-			symbol: yup.string().required('Please enter a token symbol'),
-			decimals: yup.number().required('Please enter the token decimals'),
-			chainId: yup.number().when('blockchain', {
-				is: (val: string) => ['ethereum', 'polygon', 'arbitrum', 'optimism', 'base'].includes(val),
-				then: (schema) => schema.required('Please enter the chain ID'),
-				otherwise: (schema) => schema.optional()
-			}),
-			blockchain: yup.string().required('Please select a blockchain'),
-			network: yup.string().required('Please select a network'),
-			standard: yup.string().required('Please select a token standard'),
-			sidepanel: yup.boolean().optional().default(true),
-			evmCompatible: yup.boolean().optional().default(true),
-			logoURI: yup.string().url('Must be a valid URL').optional().nullable(),
-			url: yup.string().url('Must be a valid URL').optional().nullable(),
-			website: yup.string().url('Must be a valid URL').optional().nullable(),
-			coingeckoId: yup.string().optional(),
-			exchange: yup.string().optional(),
-			exchangeSymbol: yup.string().optional(),
-			isWatchOnly: yup.boolean().optional().default(false),
-			portfolioIncluded: yup.boolean().optional().default(true),
-			isExchangeBalance: yup.boolean().optional().default(false)
-		}),
-		onSubmit: (values) => {
-			try {
-				const updatedToken: TokenData = {
-					...values,
-					sidepanel: values.sidepanel ?? true,
-					evmCompatible: values.evmCompatible ?? (values.blockchain === 'ethereum' || values.standard === 'ERC20'),
-					customDefault: 'custom', // Ensure customDefault is always 'custom'
-					symbol: values.symbol.toUpperCase(), // Ensure symbol is always uppercase
-					balance: token?.balance ?? 0n,
-					quantity: token?.quantity ?? 0,
-					price: {
-						price: 0,
-						isNative: false,
-						provider: '',
-						lastUpdated: new Date(),
-						chainId: token?.chainId ?? values.chainId ?? 1,
-						currency: '',
-						status: token?.price?.status ?? 0,
-						message: token?.price?.message ?? ''
-					},
-					change: token?.change ?? [],
-					value: token?.value ?? 0,
-					tags: token?.tags ?? [],
-					version: token?.version ?? VERSION,
-					// Enhanced multi-blockchain fields
-					blockchain: values.blockchain,
-					network: values.network,
-					standard: values.standard,
-					isWatchOnly: values.isWatchOnly,
-					portfolioIncluded: values.portfolioIncluded,
-					watchedAt: token?.watchedAt ?? new Date().toISOString(),
-					exchangeInfo: values.isExchangeBalance ? {
-						exchange: values.exchange,
-						exchangeSymbol: values.exchangeSymbol || values.symbol,
-						isExchangeBalance: values.isExchangeBalance
-					} : undefined,
-					metadata: {
-						coingeckoId: values.coingeckoId || undefined,
-						website: values.website || undefined,
-						lastUpdated: new Date().toISOString()
-					}
-				};
-
-				onSubmit(updatedToken);
-				resetForm();
-				show = false;
-			} catch (error) {
-				log.error('TokenForm: Error:', false, error);
-			}
-		}
-	});
-
-	function resetForm() {
-		updateInitialValues({
-			address: '',
-			name: '',
-			alias: '',
-			symbol: '',
-			decimals: 18,
-			chainId: 1,
-			sidepanel: true,
-			evmCompatible: true,
-			logoURI: '',
-			url: '',
-			customDefault: 'custom',
-			isNative: false,
-			isStablecoin: false,
-			description: '',
-			// Enhanced fields for multi-blockchain support
-			blockchain: 'ethereum',
-			network: 'mainnet',
-			standard: 'ERC20',
-			isWatchOnly: false,
-			portfolioIncluded: true,
-			coingeckoId: '',
-			website: '',
-			exchange: '',
-			exchangeSymbol: '',
-			isExchangeBalance: false
-		});
-	}
-
-	$effect(() => {
-		if (token) {
-			updateInitialValues({
-				address: token.address,
-				name: token.name,
-				alias: token.alias ?? '',
-				symbol: token.symbol,
-				decimals: token.decimals,
-				chainId: token.chainId ?? 1,
-				sidepanel: token.sidepanel ?? true,
-				evmCompatible: token.evmCompatible ?? true,
-				logoURI: token.logoURI ?? '',
-				url: token.url ?? '',
-				customDefault: 'custom',
-				isNative: token.isNative ?? false,
-				isStablecoin: token.isStablecoin ?? false,
-				description: token.description ?? '',
-				// Enhanced fields
-				blockchain: token.blockchain ?? 'ethereum',
-				network: token.network ?? 'mainnet',
-				standard: token.standard ?? 'ERC20',
-				isWatchOnly: token.isWatchOnly ?? false,
-				portfolioIncluded: token.portfolioIncluded ?? true,
-				coingeckoId: token.metadata?.coingeckoId ?? '',
-				website: token.metadata?.website ?? '',
-				exchange: token.exchangeInfo?.exchange ?? '',
-				exchangeSymbol: token.exchangeInfo?.exchangeSymbol ?? '',
-				isExchangeBalance: token.exchangeInfo?.isExchangeBalance ?? false
-			});
-		}
-	});
-</script>
-
-<Modal bind:show title={token ? 'Edit Token' : 'Add Token'}>
-	<form onsubmit={handleSubmit} class="space-y-4 p-6">
-		<div>
-			<div class="flex items-center gap-2">
-				<label for="name" class="block text-sm font-medium text-gray-700 dark:text-gray-200"
-					>Name <span class="text-red-500">*</span></label
-				>
-				<Tooltip content="The full name of the token (e.g., Ethereum, Bitcoin)">
-					<span class="text-gray-400 hover:text-gray-600 cursor-help"></span>
-				</Tooltip>
-			</div>
-			<input
-				type="text"
-				id="name"
-				required
-				placeholder="Enter the token name"
-				class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm text-gray-800"
-				bind:value={$form.name}
-				onchange={handleChange}
-			/>
-			{#if $errors.name}
-				<p class="mt-2 text-sm text-red-600">{$errors.name}</p>
-			{/if}
-		</div>
-
-		<div>
-			<div class="flex items-center gap-2">
-				<label for="address" class="block text-sm font-medium text-gray-700 dark:text-gray-200"
-					>Address <span class="text-red-500">*</span></label
-				>
-				<Tooltip content="The contract address of the token on the blockchain">
-					<span class="text-gray-400 hover:text-gray-600 cursor-help"></span>
-				</Tooltip>
-			</div>
-			<input
-				type="text"
-				id="address"
-				required
-				placeholder="Enter the token contract address"
-				class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focusring:indigo-500 sm:text-sm text-gray-800"
-				bind:value={$form.address}
-				onchange={handleChange}
-			/>
-			{#if $errors.address}
-				<p class="mt-2 text-sm text-red-600">{$errors.address}</p>
-			{/if}
-		</div>
-
-		<div>
-			<div class="flex items-center gap-2">
-				<label for="alias" class="block text-sm font-medium text-gray-700 dark:text-gray-200"
-					>Alias</label
-				>
-				<Tooltip content="An optional alias for the token (e.g., ENS name)">
-					<span class="text-gray-400 hover:text-gray-600 cursor-help"></span>
-				</Tooltip>
-			</div>
-			<input
-				type="text"
-				id="alias"
-				placeholder="Enter an alias like an ENS (optional)"
-				class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm text-gray-800"
-				bind:value={$form.alias}
-				onchange={handleChange}
-			/>
-			{#if $errors.alias}
-				<p class="mt-2 text-sm text-red-600">{$errors.alias}</p>
-			{/if}
-		</div>
-
-		<div>
-			<div class="flex items-center gap-2">
-				<label for="symbol" class="block text-sm font-medium text-gray-700 dark:text-gray-200"
-					>Symbol <span class="text-red-500">*</span></label
-				>
-				<Tooltip content="The token's ticker symbol (e.g., ETH, BTC)">
-					<span class="text-gray-400 hover:text-gray-600 cursor-help"></span>
-				</Tooltip>
-			</div>
-			<input
-				type="text"
-				id="symbol"
-				required
-				placeholder="Enter the token symbol"
-				class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focusring:indigo-500 sm:text-sm text-gray-800"
-				bind:value={$form.symbol}
-				onchange={handleChange}
-			/>
-			{#if $errors.symbol}
-				<p class="mt-2 text-sm text-red-600">{$errors.symbol}</p>
-			{/if}
-		</div>
-
-		<div>
-			<div class="flex items-center gap-2">
-				<label for="decimals" class="block text-sm font-medium text-gray-700 dark:text-gray-200"
-					>Decimals <span class="text-red-500">*</span></label
-				>
-				<Tooltip
-					content="The number of decimal places the token uses (e.g., 18 for most ERC20 tokens)"
-				>
-					<span class="text-gray-400 hover:text-gray-600 cursor-help"></span>
-				</Tooltip>
-			</div>
-			<input
-				type="number"
-				id="decimals"
-				step="1"
-				required
-				placeholder="Enter the decimals token uses"
-				class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focusring:indigo-500 sm:text-sm text-gray-800"
-				bind:value={$form.decimals}
-				onchange={handleChange}
-			/>
-			{#if $errors.decimals}
-				<p class="mt-2 text-sm text-red-600">{$errors.decimals}</p>
-			{/if}
-		</div>
-
-		<!-- Blockchain and Network Selection -->
-		<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
-			<div>
-				<div class="flex items-center gap-2">
-					<label for="blockchain" class="block text-sm font-medium text-gray-700 dark:text-gray-200"
-						>Blockchain <span class="text-red-500">*</span></label
-					>
-					<Tooltip content="The blockchain network this token exists on">
-						<span class="text-gray-400 hover:text-gray-600 cursor-help"></span>
-					</Tooltip>
-				</div>
-				<select
-					id="blockchain"
-					bind:value={$form.blockchain}
-					onchange={handleChange}
-					class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm text-gray-800"
-				>
-					<option value="ethereum">Ethereum</option>
-					<option value="solana">Solana</option>
-					<option value="bitcoin">Bitcoin</option>
-					<option value="cosmos">Cosmos</option>
-					<option value="polygon">Polygon</option>
-					<option value="arbitrum">Arbitrum</option>
-					<option value="optimism">Optimism</option>
-					<option value="base">Base</option>
-					<option value="avalanche">Avalanche</option>
-					<option value="bsc">Binance Smart Chain</option>
-				</select>
-				{#if $errors.blockchain}
-					<p class="mt-2 text-sm text-red-600">{$errors.blockchain}</p>
-				{/if}
-			</div>
-
-			<div>
-				<div class="flex items-center gap-2">
-					<label for="network" class="block text-sm font-medium text-gray-700 dark:text-gray-200"
-						>Network <span class="text-red-500">*</span></label
-					>
-					<Tooltip content="The specific network (mainnet, testnet, etc.)">
-						<span class="text-gray-400 hover:text-gray-600 cursor-help"></span>
-					</Tooltip>
-				</div>
-				<select
-					id="network"
-					bind:value={$form.network}
-					onchange={handleChange}
-					class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm text-gray-800"
-				>
-					{#if $form.blockchain === 'ethereum'}
-						<option value="mainnet">Mainnet</option>
-						<option value="sepolia">Sepolia Testnet</option>
-						<option value="goerli">Goerli Testnet</option>
-					{:else if $form.blockchain === 'solana'}
-						<option value="mainnet-beta">Mainnet Beta</option>
-						<option value="testnet">Testnet</option>
-						<option value="devnet">Devnet</option>
-					{:else if $form.blockchain === 'bitcoin'}
-						<option value="mainnet">Mainnet</option>
-						<option value="testnet">Testnet</option>
-					{:else}
-						<option value="mainnet">Mainnet</option>
-						<option value="testnet">Testnet</option>
-					{/if}
-				</select>
-				{#if $errors.network}
-					<p class="mt-2 text-sm text-red-600">{$errors.network}</p>
-				{/if}
-			</div>
-		</div>
-
-		<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
-			<div>
-				<div class="flex items-center gap-2">
-					<label for="standard" class="block text-sm font-medium text-gray-700 dark:text-gray-200"
-						>Token Standard <span class="text-red-500">*</span></label
-					>
-					<Tooltip content="The token standard (ERC20, SPL, etc.)">
-						<span class="text-gray-400 hover:text-gray-600 cursor-help"></span>
-					</Tooltip>
-				</div>
-				<select
-					id="standard"
-					bind:value={$form.standard}
-					onchange={handleChange}
-					class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm text-gray-800"
-				>
-					{#if $form.blockchain === 'ethereum' || $form.blockchain === 'polygon' || $form.blockchain === 'arbitrum' || $form.blockchain === 'optimism' || $form.blockchain === 'base'}
-						<option value="ERC20">ERC20</option>
-						<option value="ERC721">ERC721 (NFT)</option>
-						<option value="ERC1155">ERC1155</option>
-					{:else if $form.blockchain === 'solana'}
-						<option value="SPL">SPL Token</option>
-						<option value="NFT">Solana NFT</option>
-					{:else if $form.blockchain === 'bitcoin'}
-						<option value="BRC20">BRC20</option>
-						<option value="RUNES">Runes</option>
-					{:else if $form.blockchain === 'cosmos'}
-						<option value="CW20">CW20</option>
-						<option value="IBC">IBC Token</option>
-					{:else}
-						<option value="NATIVE">Native Token</option>
-						<option value="CUSTOM">Custom</option>
-					{/if}
-				</select>
-				{#if $errors.standard}
-					<p class="mt-2 text-sm text-red-600">{$errors.standard}</p>
-				{/if}
-			</div>
-
-			{#if ['ethereum', 'polygon', 'arbitrum', 'optimism', 'base', 'bsc', 'avalanche'].includes($form.blockchain)}
-				<div>
-					<div class="flex items-center gap-2">
-						<label for="chainid" class="block text-sm font-medium text-gray-700 dark:text-gray-200"
-							>Chain ID <span class="text-red-500">*</span></label
-						>
-						<Tooltip content="The ID of the blockchain network (e.g., 1 for Ethereum Mainnet)">
-							<span class="text-gray-400 hover:text-gray-600 cursor-help"></span>
-						</Tooltip>
-					</div>
-					<input
-						type="number"
-						id="chainid"
-						step="1"
-						required
-						placeholder="Enter the chain ID"
-						class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm text-gray-800"
-						bind:value={$form.chainId}
-						onchange={handleChange}
-					/>
-					{#if $errors.chainId}
-						<p class="mt-2 text-sm text-red-600">{$errors.chainId}</p>
-					{/if}
-				</div>
-			{/if}
-		</div>
-
-		<!-- Watch and Portfolio Options -->
-		<div class="space-y-4 p-4 bg-gray-50 rounded-lg">
-			<h3 class="text-sm font-medium text-gray-900">Token Options</h3>
-			
-			<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
-				<div class="flex items-center">
-					<input
-						type="checkbox"
-						id="isWatchOnly"
-						bind:checked={$form.isWatchOnly}
-						onchange={handleChange}
-						class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"
-					/>
-					<label for="isWatchOnly" class="ml-2 block text-sm text-gray-900">
-						Watch-only (track price but no transactions)
-					</label>
-					<Tooltip content="Enable this for tokens you want to track but can't transact with">
-						<span class="ml-1 text-gray-400 hover:text-gray-600 cursor-help"></span>
-					</Tooltip>
-				</div>
-
-				<div class="flex items-center">
-					<input
-						type="checkbox"
-						id="portfolioIncluded"
-						bind:checked={$form.portfolioIncluded}
-						onchange={handleChange}
-						class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"
-					/>
-					<label for="portfolioIncluded" class="ml-2 block text-sm text-gray-900">
-						Include in portfolio total
-					</label>
-					<Tooltip content="Include this token's value in your total portfolio calculation">
-						<span class="ml-1 text-gray-400 hover:text-gray-600 cursor-help"></span>
-					</Tooltip>
-				</div>
-
-				<div class="flex items-center">
-					<input
-						type="checkbox"
-						id="sidepanel"
-						bind:checked={$form.sidepanel}
-						onchange={handleChange}
-						class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"
-					/>
-					<label for="sidepanel" class="ml-2 block text-sm text-gray-900">
-						Show in sidepanel
-					</label>
-					<Tooltip content="Show this token in the sidepanel view">
-						<span class="ml-1 text-gray-400 hover:text-gray-600 cursor-help"></span>
-					</Tooltip>
-				</div>
-
-				<div class="flex items-center">
-					<input
-						type="checkbox"
-						id="isExchangeBalance"
-						bind:checked={$form.isExchangeBalance}
-						onchange={handleChange}
-						class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"
-					/>
-					<label for="isExchangeBalance" class="ml-2 block text-sm text-gray-900">
-						Exchange balance
-					</label>
-					<Tooltip content="This represents a balance on a centralized exchange">
-						<span class="ml-1 text-gray-400 hover:text-gray-600 cursor-help"></span>
-					</Tooltip>
-				</div>
-			</div>
-		</div>
-
-		<!-- Exchange Information (conditional) -->
-		{#if $form.isExchangeBalance}
-			<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
-				<div>
-					<div class="flex items-center gap-2">
-						<label for="exchange" class="block text-sm font-medium text-gray-700 dark:text-gray-200">
-							Exchange
-						</label>
-						<Tooltip content="Which exchange this balance is on">
-							<span class="text-gray-400 hover:text-gray-600 cursor-help"></span>
-						</Tooltip>
-					</div>
-					<select
-						id="exchange"
-						bind:value={$form.exchange}
-						onchange={handleChange}
-						class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm text-gray-800"
-					>
-						<option value="">Select Exchange</option>
-						<option value="binance">Binance</option>
-						<option value="coinbase">Coinbase</option>
-						<option value="kraken">Kraken</option>
-						<option value="okx">OKX</option>
-						<option value="bybit">Bybit</option>
-						<option value="kucoin">KuCoin</option>
-						<option value="gemini">Gemini</option>
-						<option value="other">Other</option>
-					</select>
-				</div>
-
-				<div>
-					<div class="flex items-center gap-2">
-						<label for="exchangeSymbol" class="block text-sm font-medium text-gray-700 dark:text-gray-200">
-							Exchange Symbol
-						</label>
-						<Tooltip content="Symbol used on the exchange (may differ from token symbol)">
-							<span class="text-gray-400 hover:text-gray-600 cursor-help"></span>
-						</Tooltip>
-					</div>
-					<input
-						type="text"
-						id="exchangeSymbol"
-						placeholder="Exchange-specific symbol"
-						class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm text-gray-800"
-						bind:value={$form.exchangeSymbol}
-						onchange={handleChange}
-					/>
-				</div>
-			</div>
-		{/if}
-
-		<!-- Additional Metadata -->
-		<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
-			<div>
-				<div class="flex items-center gap-2">
-					<label for="coingeckoId" class="block text-sm font-medium text-gray-700 dark:text-gray-200">
-						CoinGecko ID
-					</label>
-					<Tooltip content="CoinGecko API identifier for price tracking">
-						<span class="text-gray-400 hover:text-gray-600 cursor-help"></span>
-					</Tooltip>
-				</div>
-				<input
-					type="text"
-					id="coingeckoId"
-					placeholder="e.g., bitcoin, ethereum"
-					class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm text-gray-800"
-					bind:value={$form.coingeckoId}
-					onchange={handleChange}
-				/>
-			</div>
-
-			<div>
-				<div class="flex items-center gap-2">
-					<label for="website" class="block text-sm font-medium text-gray-700 dark:text-gray-200">
-						Website
-					</label>
-					<Tooltip content="Official website URL">
-						<span class="text-gray-400 hover:text-gray-600 cursor-help"></span>
-					</Tooltip>
-				</div>
-				<input
-					type="url"
-					id="website"
-					placeholder="https://example.com"
-					class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm text-gray-800"
-					bind:value={$form.website}
-					onchange={handleChange}
-				/>
-				{#if $errors.website}
-					<p class="mt-2 text-sm text-red-600">{$errors.website}</p>
-				{/if}
-			</div>
-		</div>
-
-		<div>
-			<div class="flex items-center gap-2">
-				<label
-					for="evmCompatible"
-					class="block text-sm font-medium text-gray-700 dark:text-gray-200">EVM compatible</label
-				>
-				<Tooltip content="Whether this token follows the Ethereum Virtual Machine standard">
-					<span class="text-gray-400 hover:text-gray-600 cursor-help"></span>
-				</Tooltip>
-			</div>
-			<input
-				type="checkbox"
-				id="evmCompatible"
-				bind:checked={$form.evmCompatible}
-				onchange={handleChange}
-			/>
-			{#if $errors.evmCompatible}
-				<p class="mt-2 text-sm text-red-600">{$errors.evmCompatible}</p>
-			{/if}
-		</div>
-
-		<div>
-			<div class="flex items-center gap-2">
-				<label for="logoURI" class="block text-sm font-medium text-gray-700 dark:text-gray-200"
-					>Logo URI</label
-				>
-				<Tooltip content="URL to the token's logo image (should be a direct link to an image)">
-					<span class="text-gray-400 hover:text-gray-600 cursor-help"></span>
-				</Tooltip>
-			</div>
-			<input
-				type="text"
-				id="logoURI"
-				placeholder="Enter the URL (https://...) for the logo"
-				class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm text-gray-800"
-				bind:value={$form.logoURI}
-				onchange={handleChange}
-			/>
-			{#if $errors.logoURI}
-				<p class="mt-2 text-sm text-red-600">{$errors.logoURI}</p>
-			{/if}
-		</div>
-
-		<div>
-			<div class="flex items-center gap-2">
-				<label for="url" class="block text-sm font-medium text-gray-700 dark:text-gray-200"
-					>URL</label
-				>
-				<Tooltip content="URL to the token's explorer or website (optional)">
-					<span class="text-gray-400 hover:text-gray-600 cursor-help"></span>
-				</Tooltip>
-			</div>
-			<input
-				type="text"
-				id="url"
-				placeholder="Optional:Enter the URL (https://...) for the token"
-				class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm text-gray-800"
-				bind:value={$form.url}
-				onchange={handleChange}
-			/>
-			{#if $errors.url}
-				<p class="mt-2 text-sm text-red-600">{$errors.url}</p>
-			{/if}
-		</div>
-
-		<div class="pt-5">
-			<div class="flex justify-end space-x-4">
-				<button
-					type="button"
-					class="rounded-md border border-gray-300 bg-white py-2 px-4 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"
-					onclick={() => (show = false)}>Cancel</button
-				>
-				<button
-					type="button"
-					class="rounded-md border border-gray-300 bg-white py-2 px-4 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"
-					onclick={resetForm}>Reset</button
-				>
-				<button
-					type="submit"
-					class="rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"
-					>Save</button
-				>
-			</div>
-		</div>
-	</form>
-</Modal>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/TokenGridItem.svelte b/packages/yakkl-wallet/src/lib/components/v1/TokenGridItem.svelte
deleted file mode 100644
index ce8123f..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/TokenGridItem.svelte
+++ /dev/null
@@ -1,243 +0,0 @@
-<script lang="ts">
-	import type { TokenData } from '$lib/common/interfaces';
-	import { formatPrice, getTokenChange } from '$lib/utilities/utilities';
-	import ProtectedValue from './ProtectedValue.svelte';
-	import SkeletonBalance from './SkeletonBalance.svelte';
-	import * as HoverCard from './ui.tmp/hover-card';
-	import { accountTokenCacheManager } from '$lib/managers/AccountTokenCacheManager';
-	import { log } from '$lib/managers/Logger';
-
-	interface Props {
-		token: TokenData;
-		isLarge?: boolean;
-		className?: string;
-		onClick?: (token: TokenData) => void;
-		accountAddress?: string;
-	}
-
-	let {
-		token,
-		isLarge = false,
-		className = 'bg-white',
-		onClick = () => {},
-		accountAddress = ''
-	}: Props = $props();
-
-	// Determine the 24h percentChange color
-	const percentChange: number | null = getTokenChange(token.change, '24h');
-	const percentChangeColor =
-		percentChange === null
-			? 'text-slate-900'
-			: percentChange >= 0
-				? 'text-green-500'
-				: 'text-red-500';
-
-	let balance = $state(token?.balance);
-	let price = $state(0);
-	let priceFormatted = $state('');
-	let value = $state(0);
-	let valueFormatted = $state('');
-	let isLoadingBalance = $state(false);
-	let isStale = $state(false);
-
-	$effect(() => {
-		// Check if the token data is stale and needs refreshing
-		if (accountAddress && token.address) {
-			isStale = accountTokenCacheManager.isTokenStale(accountAddress, token.address);
-		}
-
-		balance = token?.balance;
-		price = token?.price?.price ?? 0;
-		priceFormatted = formatPrice(price);
-
-		// Calculate value based on balance and price
-		if (balance && price) {
-			// Handle both number and BigInt balance types
-			const balanceNum =
-				typeof balance === 'bigint'
-					? Number(balance) / Math.pow(10, token.decimals || 18)
-					: Number(balance);
-			value = balanceNum * price;
-		} else {
-			value = 0;
-		}
-
-		valueFormatted = formatPrice(value);
-
-		// Update cache when token data changes
-		if (accountAddress && token.address) {
-			accountTokenCacheManager.updateTokenForAccount(accountAddress, token);
-		}
-	});
-
-	// Format balance for display
-	function formatBalance(balance: any): string {
-		if (!balance) return '0';
-
-		try {
-			let balanceNum: number;
-
-			if (typeof balance === 'bigint') {
-				// Convert from wei to token units
-				balanceNum = Number(balance) / Math.pow(10, token.decimals || 18);
-			} else {
-				balanceNum = Number(balance);
-			}
-
-			// Format based on magnitude
-			if (balanceNum >= 1000000) {
-				return (balanceNum / 1000000).toFixed(2) + 'M';
-			} else if (balanceNum >= 1000) {
-				return (balanceNum / 1000).toFixed(2) + 'K';
-			} else if (balanceNum >= 1) {
-				return balanceNum.toFixed(4);
-			} else {
-				return balanceNum.toFixed(6);
-			}
-		} catch (error) {
-			log.warn('[TokenGridItem] Error formatting balance:', false, error);
-			return '0';
-		}
-	}
-</script>
-
-<HoverCard.Root openDelay={300}>
-	<HoverCard.Trigger>
-		<div
-			class="flex flex-col items-center justify-center p-1 w-full h-full rounded-lg border shadow-md {className} {isStale
-				? 'opacity-75'
-				: ''}"
-		>
-			{#if token.logoURI}
-				<img
-					src={token.logoURI}
-					alt={token.symbol}
-					class="{isLarge ? 'w-14 h-14' : 'w-8 h-8'} rounded-full"
-					onerror={() => {}}
-				/>
-			{:else}
-				<div
-					class="{isLarge
-						? 'w-14 h-14'
-						: 'w-8 h-8'} rounded-full bg-gray-200 flex items-center justify-center"
-				>
-					<span class="text-xs font-bold text-gray-600"
-						>{token.symbol?.slice(0, 2).toUpperCase()}</span
-					>
-				</div>
-			{/if}
-
-			<h3 class="font-bold mt-2 text-md flex items-center gap-1">
-				{token.symbol}
-				{#if isStale}
-					<svg class="w-3 h-3 text-yellow-500" fill="currentColor" viewBox="0 0 20 20">
-						<path
-							fill-rule="evenodd"
-							d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z"
-							clip-rule="evenodd"
-						/>
-					</svg>
-				{/if}
-			</h3>
-
-			{#if isLoadingBalance}
-				<SkeletonBalance className="mt-1" showLabel={false} />
-			{:else}
-				<p class="text-gray-500 mt-1 text-sm">
-					Value:
-					{#if value > 0}
-						<span><ProtectedValue value={valueFormatted} placeholder="*******" /></span>
-					{:else}
-						<span class="text-gray-400">-----</span>
-					{/if}
-				</p>
-			{/if}
-
-			{#if isLarge}
-				{#if isLoadingBalance}
-					<SkeletonBalance className="mt-1" showLabel={false} />
-					<SkeletonBalance className="mt-1" showLabel={false} />
-				{:else}
-					<p class="text-gray-500 mt-1 text-sm">
-						Price:
-						{#if price > 0}
-							<span><ProtectedValue value={priceFormatted} placeholder="*******" /></span>
-						{:else}
-							<span class="text-gray-400">-----</span>
-						{/if}
-					</p>
-					<p class="text-gray-600 mt-1 text-xs">
-						Qty:
-						{#if balance}
-							<span><ProtectedValue value={formatBalance(balance)} placeholder="*******" /></span>
-						{:else}
-							<span class="text-gray-400">0</span>
-						{/if}
-					</p>
-				{/if}
-			{/if}
-		</div>
-	</HoverCard.Trigger>
-	<HoverCard.Content class="w-80 bg-white cursor-pointer p-4" align="end">
-		<!-- svelte-ignore a11y_click_events_have_key_events -->
-		<!-- svelte-ignore a11y_no_static_element_interactions -->
-		<div class="flex justify-between space-x-4" onclick={() => onClick(token)}>
-			<div class="space-y-2 text-slate-900 text-md">
-				<div class="font-bold mb-1 flex items-center gap-2">
-					{#if token.logoURI}
-						<img src={token.logoURI} alt={token.symbol} class="w-8 h-8" onerror={() => {}} />
-					{:else}
-						<div class="w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center">
-							<span class="text-xs font-bold text-gray-600"
-								>{token.symbol?.slice(0, 2).toUpperCase()}</span
-							>
-						</div>
-					{/if}
-					<span class="font-semibold leading-6">{token.name} - {token.symbol}</span>
-					{#if isStale}
-						<span class="text-xs text-yellow-600 bg-yellow-100 px-1 rounded">Stale</span>
-					{/if}
-				</div>
-
-				<p>
-					Price:
-					{#if price > 0}
-						<span><ProtectedValue value={priceFormatted} placeholder="*******" /></span>
-					{:else}
-						<span class="text-gray-400">-----</span>
-					{/if}
-				</p>
-
-				<p>
-					Value:
-					{#if value > 0}
-						<span><ProtectedValue value={valueFormatted} placeholder="*******" /></span>
-					{:else}
-						<span class="text-gray-400">$0.00</span>
-					{/if}
-				</p>
-
-				<p>
-					Quantity:
-					{#if balance}
-						<span><ProtectedValue value={formatBalance(balance)} placeholder="*******" /></span>
-					{:else}
-						<span class="text-gray-400">0</span>
-					{/if}
-				</p>
-
-				<p>
-					Change: <span class={percentChangeColor}
-						>{percentChange ? percentChange.toFixed(2) : '--'}%</span
-					>
-				</p>
-
-				{#if token.address}
-					<p class="text-xs text-gray-500">
-						Address: {token.address.slice(0, 6)}...{token.address.slice(-4)}
-					</p>
-				{/if}
-			</div>
-		</div>
-	</HoverCard.Content>
-</HoverCard.Root>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/TokenGridView.svelte b/packages/yakkl-wallet/src/lib/components/v1/TokenGridView.svelte
deleted file mode 100644
index a9fde71..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/TokenGridView.svelte
+++ /dev/null
@@ -1,132 +0,0 @@
-<script lang="ts">
-	import TokenGridItem from './TokenGridItem.svelte';
-	import SkeletonBalance from './SkeletonBalance.svelte';
-	import type { TokenData } from '$lib/common/interfaces';
-	import { accountTokenCacheManager } from '$lib/managers/AccountTokenCacheManager';
-	import { yakklCurrentlySelectedStore } from '$lib/common/stores';
-	import { onMount } from 'svelte';
-	import { log } from '$lib/managers/Logger';
-
-	// Props using $props()
-	const {
-		tokens = [],
-		onTokenClick,
-		accountAddress = '',
-		showSkeleton = false
-	} = $props<{
-		tokens: TokenData[];
-		onTokenClick: (token: TokenData) => void;
-		accountAddress?: string;
-		showSkeleton?: boolean;
-	}>();
-
-	let accountTokens = $state<TokenData[]>([]);
-	let isLoading = $state(false); // Start with false to show any existing data
-	let currentAccountAddress = $state('');
-
-	// Effect to handle account changes and load cached data
-	$effect(() => {
-		const selectedAccount = $yakklCurrentlySelectedStore;
-		const targetAddress = accountAddress || selectedAccount?.shortcuts?.address;
-
-		if (targetAddress && targetAddress !== currentAccountAddress) {
-			currentAccountAddress = targetAddress;
-			loadAccountTokens(targetAddress);
-		}
-	});
-
-	// Effect to update tokens when props change
-	$effect(() => {
-		if (tokens && tokens.length > 0) {
-			accountTokens = tokens;
-			isLoading = false;
-
-			// Cache the tokens for the current account
-			if (currentAccountAddress) {
-				accountTokenCacheManager.setCachedTokensForAccount(currentAccountAddress, tokens);
-			}
-		}
-	});
-
-	async function loadAccountTokens(address: string) {
-		try {
-			isLoading = true;
-
-			// First, try to load from cache for immediate display
-			const cachedTokens = accountTokenCacheManager.getCachedTokensForAccount(address);
-
-			if (cachedTokens && cachedTokens.length > 0) {
-				accountTokens = cachedTokens;
-				isLoading = false;
-				log.debug('[TokenGridView] Loaded cached tokens for account:', false, {
-					address,
-					tokenCount: cachedTokens.length
-				});
-
-				// Check if cache is stale and needs refresh
-				if (accountTokenCacheManager.isAccountTokensStale(address)) {
-					log.debug('[TokenGridView] Account tokens are stale, background refresh needed');
-					// This would trigger a background refresh in a real implementation
-					// The parent component should handle this via token service updates
-				}
-			} else {
-				// No cached data, show skeleton while waiting for parent to provide tokens
-				accountTokens = [];
-				log.debug('[TokenGridView] No cached tokens found for account:', false, { address });
-			}
-		} catch (error) {
-			log.warn('[TokenGridView] Error loading account tokens:', false, error);
-			isLoading = false;
-		}
-	}
-
-	onMount(() => {
-		// Clean up expired cache entries on mount
-		accountTokenCacheManager.cleanupExpired();
-	});
-</script>
-
-<div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3 p-2 h-full overflow-y-scroll">
-	{#if showSkeleton || isLoading}
-		<!-- Show skeleton placeholders while loading -->
-		{#each Array(6) as _, i}
-			<div class="rounded-md p-1 border border-gray-200 dark:border-gray-700">
-				<div
-					class="flex flex-col items-center justify-center p-1 w-full h-full rounded-lg border shadow-md bg-white"
-				>
-					<div class="w-8 h-8 bg-gray-200 rounded-full animate-pulse mb-2"></div>
-					<SkeletonBalance className="mb-1" showLabel={false} />
-					<SkeletonBalance className="text-sm" showLabel={false} />
-				</div>
-			</div>
-		{/each}
-	{:else if accountTokens && accountTokens.length > 0}
-		<!-- Show actual tokens -->
-		{#each accountTokens as token}
-			<!-- svelte-ignore a11y_click_events_have_key_events -->
-			<div
-				class="cursor-pointer hover:shadow-lg transition-all duration-200 rounded-md p-1 border border-gray-200 dark:border-gray-700"
-				onclick={() => onTokenClick(token)}
-				role="button"
-				tabindex="0"
-				aria-label="Token item for {token.symbol}"
-			>
-				<TokenGridItem {token} accountAddress={currentAccountAddress} />
-			</div>
-		{/each}
-	{:else}
-		<!-- Empty state -->
-		<div class="col-span-full flex flex-col items-center justify-center py-8 text-gray-500">
-			<svg class="w-12 h-12 mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
-				<path
-					stroke-linecap="round"
-					stroke-linejoin="round"
-					stroke-width="2"
-					d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"
-				></path>
-			</svg>
-			<p class="text-center">No tokens found for this account</p>
-			<p class="text-sm text-center mt-1">Tokens will appear here when detected</p>
-		</div>
-	{/if}
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/TokenLineView.svelte b/packages/yakkl-wallet/src/lib/components/v1/TokenLineView.svelte
deleted file mode 100644
index 777a06f..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/TokenLineView.svelte
+++ /dev/null
@@ -1,140 +0,0 @@
-<script lang="ts">
-	import type { TokenData } from '$lib/common/interfaces';
-	import { log } from '$lib/common/logger-wrapper';
-	import { formatPrice, getTokenChange } from '$lib/utilities/utilities';
-	import ProtectedValue from './ProtectedValue.svelte';
-	import Tooltip from './Tooltip.svelte';
-
-	let {
-		token,
-		locked = true,
-		className = ''
-	} = $props<{
-		token: TokenData;
-		locked?: boolean;
-		className?: string;
-	}>();
-
-	// Determine the 24h percentChange color
-	const percentChange: number | null = getTokenChange(token.change, '24h');
-	const percentChangeColor =
-		percentChange === null
-			? 'text-slate-900'
-			: percentChange >= 0
-				? 'text-green-500'
-				: 'text-red-500';
-
-	// Use derived for computed values to avoid reactivity loops
-	let balance = $derived(token?.balance);
-	let price = $derived(token?.price?.price ?? 0);
-	let priceFormatted = $derived(formatPrice(price));
-	let value = $derived(balance ? Number(balance) * price : 0);
-	let valueFormatted = $derived(formatPrice(value));
-
-	log.info('TokenLineView', false, {
-		token,
-		locked,
-		balance: token.balance,
-		quantity: token.quantity,
-		price: token.price?.price
-	});
-
-	// Function to format the tooltip price based on the value
-	function getTooltipPrice(): string {
-		if (price < 0.01) {
-			// Format with token decimals and trim trailing zeros
-			const formatted = price.toFixed(token.decimals);
-			return `$${formatted.replace(/\.?0+$/, '')}`;
-		}
-		return `${formatPrice(price)}`;
-	}
-</script>
-
-{#if token.url}
-	<a
-		href={token.url}
-		target="_blank"
-		rel="noopener noreferrer"
-		class="flex justify-between items-center py-1.5 px-2 border-b border-gray-200 border-solid hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors cursor-pointer {className}"
-	>
-		<div class="flex items-center gap-2 item">
-			{#if token.icon || token.logoURI}
-				{@const iconUrl = token.icon || token.logoURI}
-				{#if iconUrl?.startsWith('/images/')}
-					<!-- Local image files should use img tag -->
-					<img src={iconUrl} alt={token.symbol} class="w-6 h-6 rounded-full" onerror={(e) => { const target = e.currentTarget as HTMLImageElement; target.style.display='none'; const nextElement = target.nextElementSibling as HTMLElement; if (nextElement) nextElement.style.display='flex'; }} />
-					<div class="w-6 h-6 rounded-full items-center justify-center bg-gray-400 text-white font-bold text-xs" style="display:none;">
-						{token.symbol?.[0] || '?'}
-					</div>
-				{:else if iconUrl?.startsWith('http')}
-					<!-- External URLs -->
-					<img src={iconUrl} alt={token.symbol} class="w-6 h-6 rounded-full" onerror={(e) => { const target = e.currentTarget as HTMLImageElement; target.style.display='none'; const nextElement = target.nextElementSibling as HTMLElement; if (nextElement) nextElement.style.display='flex'; }} />
-					<div class="w-6 h-6 rounded-full items-center justify-center bg-gray-400 text-white font-bold text-xs" style="display:none;">
-						{token.symbol?.[0] || '?'}
-					</div>
-				{:else}
-					<!-- Text/emoji icons or missing icons -->
-					<div class="w-6 h-6 rounded-full flex items-center justify-center bg-gray-400 text-white font-bold text-xs">
-						{iconUrl || token.symbol?.[0] || '?'}
-					</div>
-				{/if}
-			{/if}
-			<div>
-				<p class="text-sm font-medium">{token.name} ({token.symbol})</p>
-				<!-- <p class="text-xs text-gray-500">Balance: <ProtectedValue value={token.balance?.toString() ?? '0'} placeholder="*******" /></p> -->
-			</div>
-		</div>
-		<div class="text-right">
-			<Tooltip content={getTooltipPrice()}>
-				<p class="text-sm font-medium">
-					{price < 0.01
-						? '< .01 ~' + formatPrice(token.price?.price ?? 0)
-						: formatPrice(token.price?.price ?? 0)}
-				</p>
-			</Tooltip>
-			<!-- <p class="text-xs {percentChangeColor}">{percentChange ? `${percentChange > 0 ? '+' : ''}${percentChange}%` : '--'}</p> -->
-		</div>
-	</a>
-{:else}
-	<div
-		class="flex justify-between items-center py-1.5 px-2 border-b border-gray-200 border-solid hover:bg-gray-50 dark:hover:bg-zinc-800 item {className}"
-	>
-		<div class="flex items-center gap-2">
-			{#if token.icon || token.logoURI}
-				{@const iconUrl = token.icon || token.logoURI}
-				{#if iconUrl?.startsWith('/images/')}
-					<!-- Local image files should use img tag -->
-					<img src={iconUrl} alt={token.symbol} class="w-6 h-6 rounded-full" onerror={(e) => { const target = e.currentTarget as HTMLImageElement; target.style.display='none'; const nextElement = target.nextElementSibling as HTMLElement; if (nextElement) nextElement.style.display='flex'; }} />
-					<div class="w-6 h-6 rounded-full items-center justify-center bg-gray-400 text-white font-bold text-xs" style="display:none;">
-						{token.symbol?.[0] || '?'}
-					</div>
-				{:else if iconUrl?.startsWith('http')}
-					<!-- External URLs -->
-					<img src={iconUrl} alt={token.symbol} class="w-6 h-6 rounded-full" onerror={(e) => { const target = e.currentTarget as HTMLImageElement; target.style.display='none'; const nextElement = target.nextElementSibling as HTMLElement; if (nextElement) nextElement.style.display='flex'; }} />
-					<div class="w-6 h-6 rounded-full items-center justify-center bg-gray-400 text-white font-bold text-xs" style="display:none;">
-						{token.symbol?.[0] || '?'}
-					</div>
-				{:else}
-					<!-- Text/emoji icons or missing icons -->
-					<div class="w-6 h-6 rounded-full flex items-center justify-center bg-gray-400 text-white font-bold text-xs">
-						{iconUrl || token.symbol?.[0] || '?'}
-					</div>
-				{/if}
-			{/if}
-			<div>
-				<p class="text-sm font-medium">{token.name} ({token.symbol})</p>
-				<!-- <p class="text-xs text-gray-500">Balance: <ProtectedValue value={token.balance?.toString() ?? '0'} placeholder="*******" /></p> -->
-			</div>
-		</div>
-		<div class="text-right">
-			<Tooltip content={getTooltipPrice()}>
-				<p class="text-sm font-medium">
-					{price < 0.01
-						? '< .01 ~' + formatPrice(token.price?.price ?? 0)
-						: formatPrice(token.price?.price ?? 0)}
-				</p>
-			</Tooltip>
-			<!-- <p class="text-xs {percentChangeColor}">{percentChange ? `${percentChange > 0 ? '+' : ''}${percentChange}%` : '--'}</p> -->
-		</div>
-	</div>
-{/if}
diff --git a/packages/yakkl-wallet/src/lib/components/v1/TokenList.svelte b/packages/yakkl-wallet/src/lib/components/v1/TokenList.svelte
deleted file mode 100644
index 206add1..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/TokenList.svelte
+++ /dev/null
@@ -1,198 +0,0 @@
-<script lang="ts">
-	import type { TokenData } from '$lib/common';
-	import TokenForm from './TokenForm.svelte';
-	import Confirmation from './Confirmation.svelte';
-	import EditControls from './EditControls.svelte';
-	import SimpleTooltip from './SimpleTooltip.svelte';
-	import { getTokenChange } from '$lib/utilities/utilities';
-
-	interface Props {
-		tokens?: TokenData[];
-		onTokenSelect?: (token: TokenData) => void;
-		onTokenUpdate?: (token: TokenData) => void;
-		onTokenDelete?: (token: TokenData) => void;
-	}
-
-	let {
-		tokens = [],
-		onTokenSelect = () => {},
-		onTokenUpdate = () => {},
-		onTokenDelete = () => {}
-	}: Props = $props();
-
-	let selectedToken: TokenData | null = $state(null);
-	let showEditModal = $state(false);
-	let showDeleteModal = $state(false);
-
-	// Currency formatter for USD values
-	const currencyFormatter = new Intl.NumberFormat('en-US', {
-		style: 'currency',
-		currency: 'USD',
-		minimumFractionDigits: 2,
-		maximumFractionDigits: 2
-	});
-
-	// Formatter for precise values (shows more decimals)
-	const preciseFormatter = new Intl.NumberFormat('en-US', {
-		style: 'currency',
-		currency: 'USD',
-		minimumFractionDigits: 2,
-		maximumFractionDigits: 8
-	});
-
-	function handleEdit(token: TokenData) {
-		selectedToken = token;
-		showEditModal = true;
-	}
-
-	function handleDelete(token: TokenData) {
-		if (token?.customDefault === 'custom') {
-			selectedToken = token;
-			showDeleteModal = true;
-		}
-	}
-
-	function confirmDelete() {
-		if (selectedToken && selectedToken?.customDefault === 'custom') {
-			onTokenDelete(selectedToken);
-			showDeleteModal = false;
-			selectedToken = null;
-		}
-	}
-</script>
-
-<ul class="space-y-2">
-	{#each tokens as token}
-		<li class="relative group">
-			<button
-				class="w-full flex items-start rounded-2xl p-4 transition-all duration-200 overflow-hidden shadow-sm hover:shadow-lg {token?.customDefault === 'custom'
-					? 'bg-gradient-to-br from-emerald-50 to-emerald-100/50 dark:from-emerald-900/20 dark:to-emerald-800/20 border border-emerald-200 dark:border-emerald-700 hover:from-emerald-100 hover:to-emerald-200/50 dark:hover:from-emerald-900/30 dark:hover:to-emerald-800/30'
-					: token?.sidepanel
-						? 'bg-gradient-to-br from-blue-50 to-blue-100/50 dark:from-blue-900/20 dark:to-blue-800/20 border border-blue-200 dark:border-blue-700 hover:from-blue-100 hover:to-blue-200/50 dark:hover:from-blue-900/30 dark:hover:to-blue-800/30'
-						: 'bg-gradient-to-br from-white to-zinc-50 dark:from-zinc-800/50 dark:to-zinc-900/50 border border-zinc-200 dark:border-zinc-700 hover:from-zinc-50 hover:to-zinc-100 dark:hover:from-zinc-800/70 dark:hover:to-zinc-900/70'}"
-				onclick={() => onTokenSelect(token)}
-			>
-				<div
-					class="w-10 h-10 flex items-center justify-center rounded-xl {token?.customDefault === 'custom'
-						? 'bg-gradient-to-br from-emerald-500 to-emerald-600'
-						: token?.sidepanel
-							? 'bg-gradient-to-br from-blue-500 to-blue-600'
-							: 'bg-gradient-to-br from-zinc-500 to-zinc-600'} text-white mr-4 shrink-0 shadow-md"
-				>
-					{#if token?.customDefault === 'custom'}
-						<svg
-							xmlns="http://www.w3.org/2000/svg"
-							class="w-3 h-3"
-							viewBox="0 0 20 20"
-							fill="currentColor"
-						>
-							<path
-								fill-rule="evenodd"
-								d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z"
-								clip-rule="evenodd"
-							/>
-						</svg>
-					{:else}
-						<svg
-							xmlns="http://www.w3.org/2000/svg"
-							class="w-3 h-3"
-							viewBox="0 0 20 20"
-							fill="currentColor"
-						>
-							<path
-								fill-rule="evenodd"
-								d="M5 2a1 1 0 011 1v1h1a1 1 0 010 2H6v1a1 1 0 01-2 0V6H3a1 1 0 010-2h1V3a1 1 0 011-1zm0 10a1 1 0 011 1v1h1a1 1 0 110 2H6v1a1 1 0 11-2 0v-1H3a1 1 0 110-2h1v-1a1 1 0 011-1zM12 2a1 1 0 01.967.744L14.146 7.2 17.5 9.134a1 1 0 010 1.732L14.146 12.8l-1.179 4.456a1 1 0 01-1.934 0L9.854 12.8 6.5 10.866a1 1 0 010-1.732L9.854 7.2l1.179-4.456A1 1 0 0112 2z"
-								clip-rule="evenodd"
-							/>
-						</svg>
-					{/if}
-				</div>
-				<div class="flex-1 min-w-0 overflow-hidden">
-					<div class="flex items-center justify-between mb-2">
-						<div class="flex items-center gap-2">
-							<h3 class="text-xs font-semibold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider">
-								{token?.customDefault === 'custom' ? 'Custom Token' : 'Common Token'}
-							</h3>
-							{#if token?.sidepanel}
-								<span class="text-[10px] px-2 py-0.5 bg-blue-500/10 text-blue-600 dark:text-blue-400 rounded-full font-medium">
-									Visible
-								</span>
-							{/if}
-							{#if token?.customDefault === 'custom'}
-								<span class="text-[10px] px-2 py-0.5 bg-emerald-500/10 text-emerald-600 dark:text-emerald-400 rounded-full font-medium">
-									Custom
-								</span>
-							{/if}
-						</div>
-					</div>
-					<p class="text-base font-semibold text-zinc-900 dark:text-zinc-100 truncate mb-1" title={token.name}>
-						{token.name}
-					</p>
-					<div class="flex items-center gap-3 mb-2">
-						<span class="text-sm text-zinc-600 dark:text-zinc-400 font-medium" title="Token Symbol">
-							{token.symbol}
-						</span>
-						{#if token.balance !== undefined && token.balance !== null}
-							{@const rawBalance = typeof token.balance === 'bigint' ? Number(token.balance) / Math.pow(10, token.decimals || 18) : Number(token.balance)}
-							{@const balanceNumber = isNaN(rawBalance) ? 0 : rawBalance}
-							{@const balanceValue = balanceNumber * (token.price?.price || 0)}
-							<SimpleTooltip content={`${balanceNumber.toFixed(8)} ${token.symbol}  ${preciseFormatter.format(balanceValue)}`}>
-								<span class="text-sm text-zinc-700 dark:text-zinc-300 font-medium cursor-help" title="Token Balance">
-									{balanceNumber.toFixed(4)} {balanceValue > 0 ? ` ${currencyFormatter.format(balanceValue)}` : ''}
-								</span>
-							</SimpleTooltip>
-						{/if}
-					</div>
-					<p class="text-xs text-zinc-500 dark:text-zinc-400 font-mono truncate mb-3" title={token.address}>
-						{token.address}
-					</p>
-
-					<!-- Token info badges -->
-					<div class="flex items-center gap-2 flex-wrap">
-						{#if token.decimals}
-							<span class="text-[10px] px-2 py-0.5 bg-purple-500/10 text-purple-600 dark:text-purple-400 rounded-full font-medium">
-								{token.decimals} decimals
-							</span>
-						{/if}
-						{#if token.price?.price !== undefined && token.price?.price !== null}
-							{@const priceValue = Number(token.price.price)}
-							{#if !isNaN(priceValue) && priceValue > 0}
-								<SimpleTooltip content={preciseFormatter.format(priceValue)}>
-									<span class="text-[10px] px-2 py-0.5 bg-indigo-500/10 text-indigo-600 dark:text-indigo-400 rounded-full font-medium cursor-help">
-										{priceValue < 0.01 ? '~< $0.01' : currencyFormatter.format(priceValue)}
-									</span>
-								</SimpleTooltip>
-							{/if}
-						{/if}
-						{#if token.change}
-							{@const percentageValue = getTokenChange(token.change, '24h')}
-							{#if percentageValue !== null}
-								<span class="text-[10px] px-2 py-0.5 rounded-full font-medium {percentageValue >= 0
-									? 'bg-green-500/10 text-green-600 dark:text-green-400'
-									: 'bg-red-500/10 text-red-600 dark:text-red-400'}">
-									{percentageValue >= 0 ? '+' : ''}{percentageValue.toFixed(2)}%
-								</span>
-							{/if}
-						{/if}
-					</div>
-				</div>
-			</button>
-			<EditControls
-				onCopy={() => navigator.clipboard.writeText(token.address)}
-				onEdit={() => handleEdit(token)}
-				onDelete={() => handleDelete(token)}
-				controls={token?.customDefault === 'custom' ? ['copy', 'edit', 'delete'] : ['copy', 'edit']}
-				hasBalance={token.balance && Number(token.balance) > 0}
-			/>
-		</li>
-	{/each}
-</ul>
-
-<TokenForm bind:show={showEditModal} token={selectedToken} onSubmit={onTokenUpdate} />
-
-<Confirmation
-	bind:show={showDeleteModal}
-	onConfirm={confirmDelete}
-	title="Delete Token"
-	message="Are you sure you want to delete this token? This action cannot be undone."
-/>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/TokenListEnhanced.svelte b/packages/yakkl-wallet/src/lib/components/v1/TokenListEnhanced.svelte
deleted file mode 100644
index c181e73..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/TokenListEnhanced.svelte
+++ /dev/null
@@ -1,294 +0,0 @@
-<!-- TokenListEnhanced.svelte - Membership-aware token display -->
-<script lang="ts">
-	import type { TokenData, Settings } from '$lib/common';
-	import { PlanType } from '$lib/common/types';
-	import { getSettings } from '$lib/common/stores';
-	import { 
-		toBasicAnalytics, 
-		toProAnalytics, 
-		shouldShowProFeatures,
-		type BasicTokenAnalytics,
-		type ProTokenAnalytics 
-	} from '$lib/common/token-analytics';
-	import TokenForm from './TokenForm.svelte';
-	import Confirmation from './Confirmation.svelte';
-	import EditControls from './EditControls.svelte';
-	import SimpleTooltip from './SimpleTooltip.svelte';
-	import { getTokenChange } from '$lib/utilities/utilities';
-	import { onMount } from 'svelte';
-
-	interface Props {
-		tokens?: TokenData[];
-		onTokenSelect?: (token: TokenData) => void;
-		onTokenUpdate?: (token: TokenData) => void;
-		onTokenDelete?: (token: TokenData) => void;
-	}
-
-	let {
-		tokens = [],
-		onTokenSelect = () => {},
-		onTokenUpdate = () => {},
-		onTokenDelete = () => {}
-	}: Props = $props();
-
-	let selectedToken: TokenData | null = $state(null);
-	let showEditModal = $state(false);
-	let showDeleteModal = $state(false);
-	let settings: Settings | null = $state(null);
-	let isProUser = $state(false);
-
-	// Currency formatter for USD values
-	const currencyFormatter = new Intl.NumberFormat('en-US', {
-		style: 'currency',
-		currency: 'USD',
-		minimumFractionDigits: 2,
-		maximumFractionDigits: 2
-	});
-
-	// Formatter for precise values (shows more decimals)
-	const preciseFormatter = new Intl.NumberFormat('en-US', {
-		style: 'currency',
-		currency: 'USD',
-		minimumFractionDigits: 2,
-		maximumFractionDigits: 8
-	});
-
-	// Percentage formatter
-	const percentFormatter = new Intl.NumberFormat('en-US', {
-		style: 'percent',
-		minimumFractionDigits: 1,
-		maximumFractionDigits: 1
-	});
-
-	onMount(async () => {
-		settings = await getSettings();
-		isProUser = shouldShowProFeatures(settings?.plan?.type || PlanType.BASIC_MEMBER);
-	});
-
-	function handleEdit(token: TokenData) {
-		selectedToken = token;
-		showEditModal = true;
-	}
-
-	function handleDelete(token: TokenData) {
-		if (token?.customDefault === 'custom') {
-			selectedToken = token;
-			showDeleteModal = true;
-		}
-	}
-
-	function confirmDelete() {
-		if (selectedToken && selectedToken?.customDefault === 'custom') {
-			onTokenDelete(selectedToken);
-			showDeleteModal = false;
-			selectedToken = null;
-		}
-	}
-
-	function getAnalyticsData(token: TokenData) {
-		return isProUser ? toProAnalytics(token) : toBasicAnalytics(token);
-	}
-
-	function formatLargeNumber(value: number): string {
-		if (value >= 1e9) return `$${(value / 1e9).toFixed(2)}B`;
-		if (value >= 1e6) return `$${(value / 1e6).toFixed(2)}M`;
-		if (value >= 1e3) return `$${(value / 1e3).toFixed(2)}K`;
-		return currencyFormatter.format(value);
-	}
-
-	function getRiskColor(score: number): string {
-		if (score <= 3) return 'text-green-600 dark:text-green-400 bg-green-500/10';
-		if (score <= 6) return 'text-yellow-600 dark:text-yellow-400 bg-yellow-500/10';
-		return 'text-red-600 dark:text-red-400 bg-red-500/10';
-	}
-
-	function getRiskLevel(score: number): string {
-		if (score <= 3) return 'Low';
-		if (score <= 6) return 'Medium';
-		return 'High';
-	}
-</script>
-
-<ul class="space-y-2">
-	{#each tokens as token}
-		{@const analytics = getAnalyticsData(token)}
-		<li class="relative group">
-			<button
-				class="w-full flex items-start rounded-2xl p-4 transition-all duration-200 overflow-hidden shadow-sm hover:shadow-lg {token?.customDefault === 'custom'
-					? 'bg-gradient-to-br from-emerald-50 to-emerald-100/50 dark:from-emerald-900/20 dark:to-emerald-800/20 border border-emerald-200 dark:border-emerald-700 hover:from-emerald-100 hover:to-emerald-200/50 dark:hover:from-emerald-900/30 dark:hover:to-emerald-800/30'
-					: token?.sidepanel
-						? 'bg-gradient-to-br from-blue-50 to-blue-100/50 dark:from-blue-900/20 dark:to-blue-800/20 border border-blue-200 dark:border-blue-700 hover:from-blue-100 hover:to-blue-200/50 dark:hover:from-blue-900/30 dark:hover:to-blue-800/30'
-						: 'bg-gradient-to-br from-white to-zinc-50 dark:from-zinc-800/50 dark:to-zinc-900/50 border border-zinc-200 dark:border-zinc-700 hover:from-zinc-50 hover:to-zinc-100 dark:hover:from-zinc-800/70 dark:hover:to-zinc-900/70'}"
-				onclick={() => onTokenSelect(token)}
-			>
-				<div
-					class="w-10 h-10 flex items-center justify-center rounded-xl {token?.customDefault === 'custom'
-						? 'bg-gradient-to-br from-emerald-500 to-emerald-600'
-						: token?.sidepanel
-							? 'bg-gradient-to-br from-blue-500 to-blue-600'
-							: 'bg-gradient-to-br from-zinc-500 to-zinc-600'} text-white mr-4 shrink-0 shadow-md"
-				>
-					{#if token?.logoURI}
-						<img src={token.logoURI} alt={token.symbol} class="w-6 h-6 rounded-full" />
-					{:else if token?.customDefault === 'custom'}
-						<svg xmlns="http://www.w3.org/2000/svg" class="w-3 h-3" viewBox="0 0 20 20" fill="currentColor">
-							<path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z" clip-rule="evenodd" />
-						</svg>
-					{:else}
-						<svg xmlns="http://www.w3.org/2000/svg" class="w-3 h-3" viewBox="0 0 20 20" fill="currentColor">
-							<path fill-rule="evenodd" d="M5 2a1 1 0 011 1v1h1a1 1 0 010 2H6v1a1 1 0 01-2 0V6H3a1 1 0 010-2h1V3a1 1 0 011-1zm0 10a1 1 0 011 1v1h1a1 1 0 110 2H6v1a1 1 0 11-2 0v-1H3a1 1 0 110-2h1v-1a1 1 0 011-1zM12 2a1 1 0 01.967.744L14.146 7.2 17.5 9.134a1 1 0 010 1.732L14.146 12.8l-1.179 4.456a1 1 0 01-1.934 0L9.854 12.8 6.5 10.866a1 1 0 010-1.732L9.854 7.2l1.179-4.456A1 1 0 0112 2z" clip-rule="evenodd" />
-						</svg>
-					{/if}
-				</div>
-				
-				<div class="flex-1 min-w-0 overflow-hidden">
-					<div class="flex items-center justify-between mb-2">
-						<div class="flex items-center gap-2">
-							<h3 class="text-xs font-semibold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider">
-								{token?.customDefault === 'custom' ? 'Custom Token' : 'Common Token'}
-							</h3>
-							{#if token?.sidepanel}
-								<span class="text-[10px] px-2 py-0.5 bg-blue-500/10 text-blue-600 dark:text-blue-400 rounded-full font-medium">Visible</span>
-							{/if}
-							{#if token?.customDefault === 'custom'}
-								<span class="text-[10px] px-2 py-0.5 bg-emerald-500/10 text-emerald-600 dark:text-emerald-400 rounded-full font-medium">Custom</span>
-							{/if}
-							{#if !isProUser}
-								<SimpleTooltip content="Upgrade to Pro for advanced analytics">
-									<span class="text-[10px] px-2 py-0.5 bg-zinc-500/10 text-zinc-600 dark:text-zinc-400 rounded-full font-medium cursor-help">Basic</span>
-								</SimpleTooltip>
-							{/if}
-						</div>
-					</div>
-					
-					<!-- Token Name and Symbol -->
-					<p class="text-base font-semibold text-zinc-900 dark:text-zinc-100 truncate mb-1" title={token.name}>
-						{token.name} ({token.symbol})
-					</p>
-					
-					<!-- Basic Info - Shown to all users -->
-					<div class="flex items-center space-x-4 mb-2">
-						{#if analytics.balance}
-							{@const rawBalance = typeof analytics.balance === 'bigint' ? Number(analytics.balance) / Math.pow(10, analytics.decimals || 18) : Number(analytics.balance)}
-							{@const balanceNumber = isNaN(rawBalance) ? 0 : rawBalance}
-							{@const balanceValue = analytics.value}
-							<SimpleTooltip content={`${balanceNumber.toFixed(8)} ${analytics.symbol}  ${preciseFormatter.format(balanceValue)}`}>
-								<span class="text-xs text-gray-600 font-medium cursor-help" title="Token Balance">
-									Balance: {balanceNumber.toFixed(4)} {balanceValue > 0 ? ` ${currencyFormatter.format(balanceValue)}` : ''}
-								</span>
-							</SimpleTooltip>
-						{/if}
-						
-						{#if analytics.currentPrice > 0}
-							<SimpleTooltip content={preciseFormatter.format(analytics.currentPrice)}>
-								<span class="text-xs px-2 py-1 bg-green-100 text-green-700 rounded-full cursor-help">
-									{analytics.currentPrice < 0.01 ? '~< $0.01' : currencyFormatter.format(analytics.currentPrice)}
-								</span>
-							</SimpleTooltip>
-						{/if}
-					</div>
-
-					<!-- Pro Features - Advanced Analytics -->
-					{#if isProUser && 'priceChange24h' in analytics}
-						{@const proData = analytics as ProTokenAnalytics}
-						<div class="space-y-2 mb-2">
-							<!-- Price Changes -->
-							<div class="flex items-center space-x-2">
-								<span class="text-xs px-2 py-1 rounded-full {proData.priceChange24h >= 0 ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'}">
-									24h: {proData.priceChange24h >= 0 ? '+' : ''}{proData.priceChange24h.toFixed(2)}%
-								</span>
-								<span class="text-xs px-2 py-1 rounded-full {proData.priceChange7d >= 0 ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'}">
-									7d: {proData.priceChange7d >= 0 ? '+' : ''}{proData.priceChange7d.toFixed(2)}%
-								</span>
-							</div>
-							
-							<!-- Market Data -->
-							<div class="flex items-center space-x-2 text-xs text-gray-500">
-								<span title="Market Cap">MC: {formatLargeNumber(proData.marketCap)}</span>
-								<span title="24h Volume">Vol: {formatLargeNumber(proData.volume24h)}</span>
-								<span title="Risk Score" class="px-2 py-1 rounded-full {getRiskColor(proData.riskScore)}">
-									Risk: {getRiskLevel(proData.riskScore)}
-								</span>
-							</div>
-
-							<!-- Technical Indicators -->
-							<div class="flex items-center space-x-2 text-xs">
-								<span class="px-2 py-1 bg-purple-100 text-purple-700 rounded-full" title="RSI">
-									RSI: {proData.technicalIndicators.rsi.toFixed(0)}
-								</span>
-								{#if proData.yieldOpportunities.length > 0}
-									<SimpleTooltip content={`${proData.yieldOpportunities.length} yield opportunities available`}>
-										<span class="px-2 py-1 bg-yellow-100 text-yellow-700 rounded-full cursor-help">
-											Max APY: {Math.max(...proData.yieldOpportunities.map(y => y.apy)).toFixed(1)}%
-										</span>
-									</SimpleTooltip>
-								{/if}
-							</div>
-
-							<!-- Social Sentiment -->
-							<div class="flex items-center space-x-2 text-xs">
-								<span class="px-2 py-1 rounded-full {proData.socialSentiment.score > 0 ? 'bg-green-100 text-green-700' : proData.socialSentiment.score < 0 ? 'bg-red-100 text-red-700' : 'bg-gray-100 text-gray-700'}">
-									Sentiment: {proData.socialSentiment.score > 0 ? 'Positive' : proData.socialSentiment.score < 0 ? 'Negative' : 'Neutral'}
-								</span>
-								<span class="text-gray-500" title="Mentions in 24h">
-									{proData.socialSentiment.mentions24h} mentions
-								</span>
-							</div>
-						</div>
-					{:else if token.change}
-						<!-- Basic users still see basic price change -->
-						{@const percentageValue = getTokenChange(token.change, '24h')}
-						{#if percentageValue !== null}
-							<div class="mb-2">
-								<span class="text-xs px-2 py-1 rounded-full {percentageValue >= 0 ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'}">
-									24h: {percentageValue >= 0 ? '+' : ''}{percentageValue.toFixed(2)}%
-								</span>
-							</div>
-						{/if}
-					{/if}
-
-					<!-- Address -->
-					<p class="text-xs text-gray-500 font-mono truncate mb-2" title={token.address}>
-						{token.address}
-					</p>
-
-					<!-- Decimals Badge -->
-					{#if token.decimals}
-						<div class="flex items-center space-x-2">
-							<span class="text-xs px-2 py-1 bg-purple-100 text-purple-700 rounded-full">
-								{token.decimals} decimals
-							</span>
-						</div>
-					{/if}
-
-					<!-- Pro Feature Badges -->
-					{#if !isProUser}
-						<div class="mt-2 p-2 bg-amber-50 border border-amber-200 rounded">
-							<div class="text-xs text-amber-800">
-								<span class="font-medium"> Pro Insights Available:</span>
-								Advanced analytics, yield opportunities, risk analysis, and more
-							</div>
-						</div>
-					{/if}
-				</div>
-			</button>
-			
-			<EditControls
-				onCopy={() => navigator.clipboard.writeText(token.address)}
-				onEdit={() => handleEdit(token)}
-				onDelete={() => handleDelete(token)}
-				controls={token?.customDefault === 'custom' ? ['copy', 'edit', 'delete'] : ['copy', 'edit']}
-				hasBalance={token.balance && Number(token.balance) > 0}
-			/>
-		</li>
-	{/each}
-</ul>
-
-<TokenForm bind:show={showEditModal} token={selectedToken} onSubmit={onTokenUpdate} />
-
-<Confirmation
-	bind:show={showDeleteModal}
-	onConfirm={confirmDelete}
-	title="Delete Token"
-	message="Are you sure you want to delete this token? This action cannot be undone."
-/>
\ No newline at end of file
diff --git a/packages/yakkl-wallet/src/lib/components/v1/TokenNewsTradingView.svelte b/packages/yakkl-wallet/src/lib/components/v1/TokenNewsTradingView.svelte
deleted file mode 100644
index cf6408c..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/TokenNewsTradingView.svelte
+++ /dev/null
@@ -1,30 +0,0 @@
-<script>
-	const URL = import.meta.env.VITE_TRADING_VIEW_LINK;
-</script>
-
-<section id="top-stories">
-	<div class="tradingview-widget-container">
-		<div
-			class="tradingview-widget-container__widget"
-			style="width: auto; height: 400px; min-height: 400px; max-height: auto;"
-		>
-			<script type="text/javascript" src="../../js/embed-widget-timeline.js" async>
-        {
-        "feedMode": "market",
-        "market": "crypto",
-        "isTransparent": false,
-        "displayMode": "adaptive",
-        "width": "100%",
-        "height": "100%",
-        "colorTheme": "light",
-        "locale": "en"
-        }
-			</script>
-		</div>
-	</div>
-	<div class="tradingview-widget-copyright">
-		<a href={URL} rel="noopener nofollow" target="_blank"
-			><span class="blue-text">Track all markets on TradingView</span></a
-		>
-	</div>
-</section>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/TokenPrice.svelte b/packages/yakkl-wallet/src/lib/components/v1/TokenPrice.svelte
deleted file mode 100644
index 7d95230..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/TokenPrice.svelte
+++ /dev/null
@@ -1,69 +0,0 @@
-<script lang="ts">
-	import type { PriceProvider } from '$lib/common/interfaces';
-	import { CoinbasePriceProvider } from '$lib/managers/providers/price/coinbase/CoinbasePriceProvider';
-	import { CoingeckoPriceProvider } from '$lib/managers/providers/price/coingecko/CoingeckoPriceProvider';
-	import { onMount } from 'svelte';
-	import PriceTracker from './PriceTracker.svelte';
-	import { formatPrice } from '$lib/utilities';
-	import { formatDate } from '$lib/common/datetime';
-	import { log } from '$lib/managers/Logger';
-
-	interface Props {
-		// import { getCurrencyCodeForUserLocale } from '$lib/utilities';
-		symbol: string;
-		currency?: string; //getCurrencyCodeForUserLocale() ?? 'USD';
-		showLastUpdated?: boolean;
-		quantity?: number;
-		customClass?: string;
-		useProviders?: string[];
-	}
-
-	let {
-		symbol,
-		currency = 'USD',
-		showLastUpdated = false,
-		quantity = 1,
-		customClass = '',
-		useProviders = ['Coinbase', 'Coingecko']
-	}: Props = $props();
-
-	let providersMap = new Map<string, PriceProvider>();
-	let activeProviders: PriceProvider[] = $state([]);
-
-	onMount(async () => {
-		try {
-			providersMap.set('Coinbase', new CoinbasePriceProvider());
-			providersMap.set('Coingecko', new CoingeckoPriceProvider());
-
-			activeProviders = useProviders
-				.map((name) => providersMap.get(name))
-				.filter((provider): provider is PriceProvider => provider !== undefined);
-		} catch (error) {
-			log.error('TokenPrice:', false, error);
-		}
-	});
-</script>
-
-<PriceTracker {symbol} {currency} providers={activeProviders}>
-	{#snippet children({ price })}
-		<div class={`flex flex-col items-start ${customClass}`}>
-			{#if price !== null}
-				<span class="text-xl font-bold">{formatPrice(price.price * quantity)}</span>
-				<span class="text-xs text-gray-600">{symbol}-{currency}</span>
-				<span class="text-xs text-gray-500">Price: {formatPrice(price.price)}</span>
-				{#if showLastUpdated && price.lastUpdated}
-					<span class="text-xs text-gray-500">Last updated: {formatDate(price.lastUpdated)}</span>
-				{/if}
-			{:else}
-				<span class="text-xl font-bold">{formatPrice(0)}</span>
-				<span class="text-xs text-gray-600"
-					>{symbol ? symbol : ' -- '}-{currency ? currency : ' -- '}</span
-				>
-				<span class="text-xs text-gray-500">Price: -- </span>
-				{#if showLastUpdated}
-					<span class="text-xs text-gray-500">Last updated: -- </span>
-				{/if}
-			{/if}
-		</div>
-	{/snippet}
-</PriceTracker>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/TokenSymbolOverviewView.svelte b/packages/yakkl-wallet/src/lib/components/v1/TokenSymbolOverviewView.svelte
deleted file mode 100644
index 80b8fd4..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/TokenSymbolOverviewView.svelte
+++ /dev/null
@@ -1,95 +0,0 @@
-<script lang="ts">
-	import { log } from '$lib/managers/Logger';
-	import { onMount, onDestroy } from 'svelte';
-
-	let { symbol = 'COINBASE:ETHUSD' } = $props();
-	let widgetContainer: HTMLDivElement | null = null;
-	const URL = import.meta.env.VITE_TRADING_VIEW_LINK;
-
-	const initializeWidget = () => {
-		try {
-			if (!widgetContainer) return;
-
-			// Clear any existing widget
-			widgetContainer.innerHTML = '';
-
-			// Add the widget container for the new TradingView script
-			const script = document.createElement('script');
-			script.type = 'text/javascript';
-			script.async = true;
-			script.src = '../../js/embed-widget-symbol-overview.js';
-			script.innerHTML = JSON.stringify({
-				width: '100%',
-				height: '100%',
-				symbols: [['COINBASE:ETHUSD|1D'], ['COINBASE:BTCUSD|1D']], // Dynamically set the symbol
-				locale: 'en',
-				colorTheme: 'light',
-				autosize: true,
-				showVolume: true,
-				showMA: true,
-				hideDateRanges: false,
-				hideMarketStatus: false,
-				hideSymbolLogo: false,
-				scalePosition: 'right',
-				scaleMode: 'Normal',
-				fontFamily: '-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif',
-				fontSize: '10',
-				noTimeScale: false,
-				valuesTracking: '1',
-				changeMode: 'price-and-percent',
-				chartType: 'area',
-				maLineColor: '#2962FF',
-				maLineWidth: 1,
-				maLength: 9,
-				headerFontSize: 'medium',
-				lineWidth: 2,
-				lineType: 0,
-				dateRanges: ['1d|1', '1m|30', '3m|60', '12m|1D', '60m|1W', 'all|1M']
-			});
-
-			log.info('Script', false, script);
-			log.info('Widget Container', false, widgetContainer);
-
-			widgetContainer.appendChild(script);
-		} catch (error) {
-			log.error('Error initializing TradingView widget', false, error);
-		}
-	};
-
-	// Reactively reinitialize the widget when `symbol` changes
-	// $effect(() => {
-	//   initializeWidget();
-	// });
-
-	onMount(() => {
-		initializeWidget();
-	});
-
-	onDestroy(() => {
-		if (widgetContainer) {
-			widgetContainer.innerHTML = '';
-		}
-	});
-</script>
-
-<section id="symbol-info">
-	<div class="tradingview-widget-container">
-		<div
-			bind:this={widgetContainer}
-			class="tradingview-widget-container__widget"
-			style="width: auto; height: 400px; min-height: 400px; max-height: auto;"
-		></div>
-		<div class="tradingview-widget-copyright">
-			<a href={URL} rel="noopener nofollow" target="_blank">
-				<span class="blue-text">Track all markets on TradingView</span>
-			</a>
-		</div>
-	</div>
-</section>
-
-<style>
-	.tradingview-widget-container {
-		width: 100%;
-		height: 100%;
-	}
-</style>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/TokenSymbolView.svelte b/packages/yakkl-wallet/src/lib/components/v1/TokenSymbolView.svelte
deleted file mode 100644
index a561c55..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/TokenSymbolView.svelte
+++ /dev/null
@@ -1,75 +0,0 @@
-<script lang="ts">
-	import { log } from '$lib/managers/Logger';
-	import { onMount, onDestroy } from 'svelte';
-
-	let { symbol = 'COINBASE:ETHUSD' } = $props();
-	let widgetContainer: HTMLDivElement | null = null;
-	const URL = import.meta.env.VITE_TRADING_VIEW_LINK;
-
-	const initializeWidget = () => {
-		try {
-			if (!widgetContainer) return;
-
-			// Clear any existing widget
-			widgetContainer.innerHTML = '';
-
-			// Add the widget container for the new TradingView script
-			const script = document.createElement('script');
-			script.type = 'text/javascript';
-			script.async = true;
-			script.src = '../../js/embed-widget-symbol-info.js';
-			script.innerHTML = JSON.stringify({
-				width: '100%',
-				height: '100%',
-				isTransparent: false,
-				symbol, // Dynamically set the symbol
-				locale: 'en',
-				colorTheme: 'light'
-			});
-
-			log.info('Script', false, script);
-			log.info('Widget Container', false, widgetContainer);
-
-			widgetContainer.appendChild(script);
-		} catch (error) {
-			log.error('Error initializing TradingView widget', false, error);
-		}
-	};
-
-	// Reactively reinitialize the widget when `symbol` changes
-	// $effect(() => {
-	//   initializeWidget();
-	// });
-
-	onMount(() => {
-		initializeWidget();
-	});
-
-	onDestroy(() => {
-		if (widgetContainer) {
-			widgetContainer.innerHTML = '';
-		}
-	});
-</script>
-
-<section id="symbol-info">
-	<div class="tradingview-widget-container">
-		<div
-			bind:this={widgetContainer}
-			class="tradingview-widget-container__widget"
-			style="width: auto; height: 400px; min-height: 400px; max-height: auto;"
-		></div>
-		<div class="tradingview-widget-copyright">
-			<a href={URL} rel="noopener nofollow" target="_blank">
-				<span class="blue-text">Track all markets on TradingView</span>
-			</a>
-		</div>
-	</div>
-</section>
-
-<style>
-	.tradingview-widget-container {
-		width: 100%;
-		height: 100%;
-	}
-</style>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/TokenTechnicalView.svelte b/packages/yakkl-wallet/src/lib/components/v1/TokenTechnicalView.svelte
deleted file mode 100644
index 088dff5..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/TokenTechnicalView.svelte
+++ /dev/null
@@ -1,74 +0,0 @@
-<script lang="ts">
-	import { log } from '$lib/managers/Logger';
-	import { onMount, onDestroy } from 'svelte';
-
-	let { symbol = 'COINBASE:ETHUSD' } = $props();
-	let widgetContainer: HTMLDivElement | null = null;
-	const URL = import.meta.env.VITE_TRADING_VIEW_LINK;
-
-	const initializeWidget = () => {
-		if (!widgetContainer) return;
-
-		// Clear any existing widget
-		widgetContainer.innerHTML = '';
-
-		// Add the widget container for the new TradingView script
-		const script = document.createElement('script');
-		script.type = 'text/javascript';
-		script.async = true;
-		script.src = '../../js/embed-widget-technical-analysis.js';
-		script.innerHTML = JSON.stringify({
-			interval: '1m',
-			width: '100%',
-			height: '100%',
-			isTransparent: false,
-			symbol, // Dynamically set the symbol
-			showIntervalTabs: true,
-			displayMode: 'multiple',
-			locale: 'en',
-			colorTheme: 'light'
-		});
-
-		log.info('Script', false, script);
-		log.info('Widget Container', false, widgetContainer);
-
-		widgetContainer.appendChild(script);
-	};
-
-	// Reactively reinitialize the widget when `symbol` changes
-	// $effect(() => {
-	//   initializeWidget();
-	// });
-
-	onMount(() => {
-		initializeWidget();
-	});
-
-	onDestroy(() => {
-		if (widgetContainer) {
-			widgetContainer.innerHTML = '';
-		}
-	});
-</script>
-
-<section id="technical-analysis">
-	<div class="tradingview-widget-container">
-		<div
-			bind:this={widgetContainer}
-			class="tradingview-widget-container__widget"
-			style="width: auto; height: 400px; min-height: 400px; max-height: auto;"
-		></div>
-		<div class="tradingview-widget-copyright">
-			<a href={URL} rel="noopener nofollow" target="_blank">
-				<span class="blue-text">Track all markets on TradingView</span>
-			</a>
-		</div>
-	</div>
-</section>
-
-<style>
-	.tradingview-widget-container {
-		width: 100%;
-		height: 100%;
-	}
-</style>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/TokenThumbnailItem.svelte b/packages/yakkl-wallet/src/lib/components/v1/TokenThumbnailItem.svelte
deleted file mode 100644
index 1b473a1..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/TokenThumbnailItem.svelte
+++ /dev/null
@@ -1,88 +0,0 @@
-<script lang="ts">
-	import type { TokenData } from '$lib/common/interfaces';
-	import { getTokenChange } from '$lib/utilities';
-	import * as HoverCard from './ui.tmp/hover-card';
-	import { formatPrice, formatQuantity } from '$lib/utilities';
-
-	export interface Props {
-		token: TokenData;
-		className?: string;
-		onClick?: (token: TokenData) => void;
-	}
-
-	let {
-		token,
-		className = 'w-[169px] h-[68px] border-r border-gray-400',
-		onClick = () => {}
-	}: Props = $props();
-
-	let price = $state(0);
-	// let priceFormatted = $state('');
-	let value = $state(0);
-	let valueFormatted = $state('');
-	let balance = $state(token?.balance);
-
-	// Determine the 24h percentChange color
-	const percentChange: number | null = getTokenChange(token.change, '24h'); // This is all we are getting here
-	const percentChangeColor =
-		percentChange === null
-			? 'text-slate-900'
-			: percentChange >= 0
-				? 'text-green-500'
-				: 'text-red-500';
-
-	$effect(() => {
-		balance = token?.balance;
-		price = token?.price?.price ?? 0;
-		// priceFormatted = formatPrice(price);
-		value = balance ? Number(balance) * price : 0;
-		valueFormatted = formatPrice(value);
-	});
-</script>
-
-<HoverCard.Root openDelay={300}>
-	<HoverCard.Trigger>
-		<!-- svelte-ignore a11y_click_events_have_key_events -->
-		<!-- svelte-ignore a11y_no_static_element_interactions -->
-		<div
-			class="flex flex-col bg-white justify-start items-start cursor-pointer relative {className}"
-			onclick={() => onClick(token)}
-		>
-			<div class="flex items-center gap-2 w-[120px] h-[24px]">
-				<img src={token.logoURI} alt={token.symbol} class="w-6 h-6" />
-				<span class="text-slate-900 font-semibold leading-6">{token.symbol}</span>
-			</div>
-			<div class="w-[120px] h-[28px] text-xl text-slate-900 font-bold leading-7">
-				${price}
-			</div>
-			<div class={`flex items-center gap-1 ${percentChangeColor}`}>
-				{#if percentChange > 0}
-					
-				{:else if percentChange === null || percentChange === 0}
-					--
-				{:else}
-					
-				{/if}
-				{percentChange}%
-			</div>
-		</div>
-	</HoverCard.Trigger>
-	<HoverCard.Content class="w-80 bg-white cursor-pointer p-4" align="end">
-		<!-- svelte-ignore a11y_click_events_have_key_events -->
-		<!-- svelte-ignore a11y_no_static_element_interactions -->
-		<div class="flex justify-between space-x-4" onclick={() => onClick(token)}>
-			<div class="space-y-2 text-slate-900">
-				<p class="font-bold mb-1 flex items-center gap-2">
-					<img src={token.logoURI} alt={token.symbol} class="w-8 h-8" />
-					<span class="font-semibold leading-6">{token.name} - {token.symbol}</span>
-				</p>
-				<p>Price: ${price}</p>
-				<p>Value: {valueFormatted}</p>
-				<p>Quantity: {balance}</p>
-				<p>
-					Change: <span class={percentChangeColor}>{percentChange ? percentChange : '--'}%</span>
-				</p>
-			</div>
-		</div>
-	</HoverCard.Content>
-</HoverCard.Root>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/TokenThumbnailView.svelte b/packages/yakkl-wallet/src/lib/components/v1/TokenThumbnailView.svelte
deleted file mode 100644
index 4105274..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/TokenThumbnailView.svelte
+++ /dev/null
@@ -1,92 +0,0 @@
-<script lang="ts">
-	import TokenThumbnailItem from './TokenThumbnailItem.svelte';
-	import type { TokenData } from '$lib/common/interfaces';
-
-	export interface Props {
-		tokens: TokenData[];
-		onTokenClick?: (token: TokenData) => void;
-	}
-
-	let { tokens = [], onTokenClick = () => {} }: Props = $props();
-
-	// State for controlling scroll position
-	let scrollContainer: HTMLDivElement | null = null;
-
-	// Scroll Navigation
-	const scrollLeft = () => {
-		if (scrollContainer) scrollContainer.scrollBy({ left: -180, behavior: 'smooth' });
-	};
-
-	const scrollRight = () => {
-		if (scrollContainer) scrollContainer.scrollBy({ left: 180, behavior: 'smooth' });
-	};
-
-	function getClassName(index: number): string {
-		if (index === 0) {
-			return 'w-[144px] h-[68px] border-r border-gray-400';
-		} else if (index === tokens.length - 1) {
-			return 'w-[144px] h-[68px]';
-		} else {
-			return 'w-[169px] h-[68px] mx-[25px] border-r border-gray-400';
-		}
-	}
-</script>
-
-<!-- Token Thumbnail View -->
-<div class="relative flex items-center w-[90%] mx-4 h-[72px] overflow-hidden">
-	<!-- Left Fade and Arrow -->
-	<div class="fade-gradient fade-gradient-left"></div>
-	<button
-		class="absolute left-0 bg-gray-600 hover:bg-gray-800 text-white text-lg font-bold rounded-full w-8 h-8 flex items-center justify-center"
-		aria-label="Previous"
-		onclick={scrollLeft}
-	>
-		&#8592;
-	</button>
-
-	<!-- Thumbnail Items -->
-	<div class="flex items-stretch overflow-x-auto no-scrollbar mx-10" bind:this={scrollContainer}>
-		{#each tokens as token, index}
-			<TokenThumbnailItem {token} onClick={onTokenClick} className={getClassName(index)} />
-		{/each}
-	</div>
-
-	<!-- Right Fade and Arrow -->
-	<div class="fade-gradient fade-gradient-right"></div>
-	<button
-		class="absolute right-0 bg-gray-600 hover:bg-gray-800 text-white text-lg font-bold rounded-full w-8 h-8 flex items-center justify-center"
-		aria-label="Next"
-		onclick={scrollRight}
-	>
-		&#8594;
-	</button>
-</div>
-
-<style>
-	.no-scrollbar::-webkit-scrollbar {
-		display: none;
-	}
-
-	.no-scrollbar {
-		-ms-overflow-style: none;
-		scrollbar-width: none;
-	}
-
-	.fade-gradient {
-		position: absolute;
-		top: 0;
-		bottom: 0;
-		width: 25px;
-		pointer-events: none;
-		background: linear-gradient(to right, rgba(255, 255, 255, 0), rgba(255, 255, 255, 1));
-	}
-
-	.fade-gradient-left {
-		left: 0;
-	}
-
-	.fade-gradient-right {
-		right: 0;
-		background: linear-gradient(to left, rgba(255, 255, 255, 0), rgba(255, 255, 255, 1));
-	}
-</style>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/TokenViews.svelte b/packages/yakkl-wallet/src/lib/components/v1/TokenViews.svelte
deleted file mode 100644
index b2a67e2..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/TokenViews.svelte
+++ /dev/null
@@ -1,135 +0,0 @@
-<script lang="ts">
-	// svelte-ignore options_renamed_ssr_dom
-	import ViewControls from './ViewControls.svelte';
-	import TokenGridView from './TokenGridView.svelte';
-	import TokenChartsView from './TokenChartsView.svelte';
-	import TokenNewsTradingView from './TokenNewsTradingView.svelte';
-	import TokenTechnicalView from './TokenTechnicalView.svelte';
-	import TokenSymbolView from './TokenSymbolView.svelte';
-	import type { TokenData } from '$lib/common/interfaces';
-	import { log } from '$lib/common/logger-wrapper';
-	import { yakklCombinedTokenStore } from '$lib/common/stores';
-	import LoadingState from './LoadingState.svelte';
-	import { onMount } from 'svelte';
-	import { sessionInitialized } from '$lib/common/stores';
-	import TokenSymbolOverviewView from './TokenSymbolOverviewView.svelte';
-	import { UnifiedTimerManager } from '$lib/managers/UnifiedTimerManager';
-
-	let tokens = $state<TokenData[]>([]);
-	let sortedTokens = $state<TokenData[]>([]);
-	let currentView = $state('grid');
-	let sortBy = $state('name');
-	let isLoading = $state(false); // This should only be true during initial load
-	let isInitialized = $state(false);
-
-	// Reactive store subscription - immediate to show any available data
-	$effect.root(() => {
-		const unsubscribe = yakklCombinedTokenStore.subscribe((updatedTokens = []) => {
-			tokens = updatedTokens;
-			handleSortChange(sortBy);
-		});
-
-		return () => {
-			unsubscribe();
-		};
-	});
-
-	onMount(() => {
-		// Always start loading when component mounts
-		if (!$sessionInitialized) {
-			isLoading = true;
-			const timerManager = UnifiedTimerManager.getInstance();
-
-			timerManager.addTimeout(
-				'token-views-loading',
-				() => {
-					isLoading = false;
-					sessionInitialized.set(true); // Set to true for current session only
-
-					// Initialize store subscription after loading is complete
-					setTimeout(() => {
-						isInitialized = true;
-					}, 500);
-				},
-				3000
-			);
-			timerManager.startTimeout('token-views-loading');
-
-			return () => {
-				timerManager.stopTimeout('token-views-loading');
-				timerManager.removeTimeout('token-views-loading');
-			};
-		} else {
-			// If session is already initialized, enable subscription immediately
-			setTimeout(() => {
-				isInitialized = true;
-			}, 500);
-		}
-	});
-
-	// Separate effect for sorting - immediate to show any available data
-	$effect(() => {
-		if (tokens.length > 0) {
-			sortedTokens = [...tokens].sort((a, b) => {
-				if (sortBy === 'name') return a.name.localeCompare(b.name);
-				if (sortBy === 'price') return (b.price?.price ?? 0) - (a.price?.price ?? 0);
-				if (sortBy === 'value') return (b.value ?? 0) - (a.value ?? 0);
-				return 0;
-			});
-		}
-	});
-
-	// Simplified sort handler
-	function handleSortChange(criteria: string) {
-		sortBy = criteria;
-	}
-
-	// Change the current view
-	function handleViewChange(view: string) {
-		currentView = view;
-	}
-
-	// Print handler - basic stub for now. Need to format for print within each view.
-	function handlePrint() {
-		alert('Printing is in limited release. Soon to be available to all!');
-	}
-</script>
-
-<div class="w-full h-full mt-1">
-	<!-- Header Section -->
-	<div class="flex justify-between items-center px-2 py-1">
-		<h2 class="text-lg font-bold text-gray-300">Token Portfolio</h2>
-		<ViewControls
-			onSortChange={handleSortChange}
-			onViewChange={handleViewChange}
-			onPrint={handlePrint}
-		/>
-	</div>
-
-	<!-- Dynamic Views -->
-	<div class="relative rounded-lg overflow-hidden bg-gray-50 dark:bg-gray-800 shadow-lg h-[400px]">
-		{#if isLoading && !$sessionInitialized}
-			<LoadingState message="Analyzing Tokens..." />
-		{/if}
-
-		{#if currentView === 'grid'}
-			<TokenGridView
-				tokens={sortedTokens}
-				onTokenClick={(token) => log.info('Clicked:', false, token)}
-			/>
-			<!-- default onTokenClick for future -->
-		{:else if currentView === 'chart'}
-			<TokenChartsView />
-		{:else if currentView === 'chartAdvanced'}
-			<TokenSymbolOverviewView />
-		{:else if currentView === 'news'}
-			<TokenNewsTradingView />
-		{:else if currentView === 'analysis'}
-			<TokenTechnicalView symbol="COINBASE:ETHUSD" />
-		{:else if currentView === 'symbol'}
-			{#each sortedTokens as token}
-				<TokenSymbolView symbol={`COINBASE:${token.symbol.toUpperCase()}USD`} />
-			{/each}
-		{/if}
-	</div>
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/Tokens.svelte b/packages/yakkl-wallet/src/lib/components/v1/Tokens.svelte
deleted file mode 100644
index 1b5f507..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/Tokens.svelte
+++ /dev/null
@@ -1,155 +0,0 @@
-<script lang="ts">
-	import {
-		setYakklTokenDataCustomStorage,
-		yakklCombinedTokenStore,
-		yakklCurrentlySelectedStore,
-		yakklTokenDataCustomStore
-	} from '$lib/common/stores';
-	import { getInstances, type TokenData } from '$lib/common';
-	import Modal from './Modal.svelte';
-	import TokenList from './TokenList.svelte';
-	import TokenForm from './TokenForm.svelte';
-	import { onMount } from 'svelte';
-	import type { TokenService } from '$lib/managers/blockchains/evm/TokenService';
-	import type { Provider } from '$lib/managers/Provider';
-	import { getTokenBalance } from '$lib/utilities/balanceUtils';
-	import { log } from '$lib/managers/Logger';
-
-	interface Props {
-		show?: boolean;
-		onTokenSelect?: (token: TokenData) => void;
-		className?: string;
-	}
-
-	let { show = $bindable(false), onTokenSelect = null, className = 'z-[899]' }: Props = $props();
-
-	let showAddModal = $state(false);
-	let tokens = $state<TokenData[]>([]); // Combined tokens for display
-	let provider: Provider | null = null;
-	let tokenService: TokenService<any> | null = null;
-
-	// Fetch instances and setup provider/tokenService
-	onMount(async () => {
-		const instances = await getInstances();
-		if (instances.length > 0) {
-			provider = instances[1];
-			tokenService = instances[3];
-		}
-	});
-
-	// Subscribe to the combined token store for display
-	$effect(() => {
-		tokens = $yakklCombinedTokenStore; // Reactive combined store
-	});
-
-	function handleTokenSelect(selectedToken: TokenData) {
-		if (onTokenSelect !== null) {
-			onTokenSelect(selectedToken);
-		}
-		show = false;
-	}
-
-	async function handleTokenAdd(token: TokenData) {
-		if (token?.customDefault === 'custom') {
-			const balance = await getTokenBalance(
-				token,
-				$yakklCurrentlySelectedStore.shortcuts.address,
-				provider,
-				tokenService
-			);
-			token.balance = balance;
-			yakklTokenDataCustomStore.update((tokens) => [...tokens, token]);
-			setYakklTokenDataCustomStorage($yakklTokenDataCustomStore);
-		}
-		showAddModal = false;
-	}
-
-	function handleTokenDelete(deletedToken: TokenData) {
-		yakklTokenDataCustomStore.update((tokens) => {
-			const updatedTokens = tokens.filter((t) => t.address !== deletedToken.address);
-			setYakklTokenDataCustomStorage(updatedTokens);
-			return updatedTokens;
-		});
-	}
-
-	function handleTokenUpdate(updatedToken: TokenData) {
-		yakklTokenDataCustomStore.update((tokens) => {
-			const updatedTokens = tokens.map((t) =>
-				t.address === updatedToken.address ? updatedToken : t
-			);
-			log.info('updatedTokens', false, updatedTokens);
-			setYakklTokenDataCustomStorage(updatedTokens);
-			return updatedTokens;
-		});
-	}
-
-	function closeModal() {
-		show = false;
-	}
-</script>
-
-<Modal
-	bind:show
-	title="Token List"
-	description="Manage your tokens"
-	onClose={closeModal}
-	{className}
->
-	<div class="p-4">
-		{#if tokens.length > 0}
-			<!-- Token list with AccountListing-style cards -->
-			<div class="space-y-3 mb-4 max-h-96 overflow-y-auto">
-				<TokenList
-					{tokens}
-					onTokenSelect={handleTokenSelect}
-					onTokenUpdate={handleTokenUpdate}
-					onTokenDelete={handleTokenDelete}
-				/>
-			</div>
-		{:else}
-			<!-- Empty state with modern styling -->
-			<div class="text-center py-12">
-				<div class="w-16 h-16 mx-auto mb-4 bg-gradient-to-br from-green-100 to-emerald-100 rounded-full flex items-center justify-center">
-					<svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
-						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
-					</svg>
-				</div>
-				<h3 class="text-lg font-semibold text-gray-700 mb-2">No Custom Tokens</h3>
-				<p class="text-gray-500 mb-6">Add custom tokens to manage them alongside your default tokens</p>
-			</div>
-		{/if}
-
-		<!-- Action buttons and info -->
-		<div class="border-t border-gray-200 pt-4">
-			<button
-				onclick={() => {
-					showAddModal = true;
-					show = false;
-				}}
-				class="w-full bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-semibold py-3 px-4 rounded-lg transition-all duration-200 shadow-md hover:shadow-lg flex items-center justify-center space-x-2"
-			>
-				<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
-					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
-				</svg>
-				<span>Add Custom Token</span>
-			</button>
-			
-			<div class="mt-3 p-3 bg-green-50 rounded-lg border border-green-200">
-				<div class="flex items-center">
-					<div class="flex-shrink-0">
-						<svg class="w-4 h-4 text-green-600" fill="currentColor" viewBox="0 0 20 20">
-							<path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
-						</svg>
-					</div>
-					<div class="ml-2">
-						<p class="text-xs text-green-800">
-							Add ERC-20 tokens by contract address to track balances and make transfers
-						</p>
-					</div>
-				</div>
-			</div>
-		</div>
-	</div>
-</Modal>
-
-<TokenForm bind:show={showAddModal} onSubmit={handleTokenAdd} />
diff --git a/packages/yakkl-wallet/src/lib/components/v1/TokensEnhanced.svelte b/packages/yakkl-wallet/src/lib/components/v1/TokensEnhanced.svelte
deleted file mode 100644
index 481f58d..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/TokensEnhanced.svelte
+++ /dev/null
@@ -1,278 +0,0 @@
-<!-- TokensEnhanced.svelte -->
-<script lang="ts">
-	import {
-		setYakklTokenDataCustomStorage,
-		yakklCombinedTokenStore,
-		yakklCurrentlySelectedStore,
-		yakklTokenDataCustomStore,
-		getSettings
-	} from '$lib/common/stores';
-	import { getInstances, type TokenData, type Settings } from '$lib/common';
-	import { PlanType } from '$lib/common/types';
-	import Modal from './Modal.svelte';
-	import TokenListEnhanced from './TokenListEnhanced.svelte';
-	import TokenForm from './TokenForm.svelte';
-	import SimpleTooltip from './SimpleTooltip.svelte';
-	import { onMount, onDestroy } from 'svelte';
-	import type { TokenService } from '$lib/managers/blockchains/evm/TokenService';
-	import type { Provider } from '$lib/managers/Provider';
-	import { getTokenBalance } from '$lib/utilities/balanceUtils';
-	import { log } from '$lib/managers/Logger';
-
-	interface Props {
-		show?: boolean;
-		onTokenSelect?: (token: TokenData) => void;
-		className?: string;
-	}
-
-	let { show = $bindable(false), onTokenSelect = null, className = 'z-[899]' }: Props = $props();
-
-	let showAddModal = $state(false);
-	let tokens = $state<TokenData[]>([]); // Combined tokens for display
-	let provider: Provider | null = null;
-	let tokenService: TokenService<any> | null = null;
-	let settings: Settings | null = null;
-	let isBasicMember = $state(true);
-	let isRefreshing = $state(false);
-	let lastRefreshTime = $state<Date | null>(null);
-	let autoRefreshInterval: number | null = null;
-	
-	const BASIC_AUTO_REFRESH_INTERVAL_MS = 300000; // 5 minutes for Basic members
-	const PRO_AUTO_REFRESH_INTERVAL_MS = 30000; // 30 seconds for Pro members
-
-	// Load settings to check membership
-	onMount(async () => {
-		settings = await getSettings();
-		isBasicMember = settings?.plan?.type === PlanType.BASIC_MEMBER;
-		
-		// Setup instances
-		const instances = await getInstances();
-		if (instances.length > 0) {
-			provider = instances[1];
-			tokenService = instances[3];
-		}
-
-		// Setup auto-refresh for all members (different intervals)
-		startAutoRefresh();
-	});
-
-	onDestroy(() => {
-		if (autoRefreshInterval) {
-			clearInterval(autoRefreshInterval);
-		}
-	});
-
-	// Subscribe to the combined token store for display
-	$effect(() => {
-		tokens = $yakklCombinedTokenStore; // Reactive combined store
-	});
-
-	// No cooldown needed since we have automatic refresh for all members
-
-	function startAutoRefresh() {
-		if (autoRefreshInterval) return;
-		
-		const interval = isBasicMember ? BASIC_AUTO_REFRESH_INTERVAL_MS : PRO_AUTO_REFRESH_INTERVAL_MS;
-		
-		autoRefreshInterval = setInterval(async () => {
-			if (!isRefreshing) {
-				await refreshTokenPrices(false);
-			}
-		}, interval) as unknown as number;
-	}
-
-	async function refreshTokenPrices(showLoading = true) {
-		if (isRefreshing) return;
-		
-		if (showLoading) {
-			isRefreshing = true;
-		}
-
-		try {
-			// Here you would call your price update service
-			// For now, we'll simulate the refresh
-			log.info('Refreshing token prices...', false);
-			
-			// Simulate API call delay
-			await new Promise(resolve => setTimeout(resolve, 1000));
-			
-			// In a real implementation, you would:
-			// 1. Fetch updated prices from your price service
-			// 2. Update the token store with new prices
-			// 3. Update balances if needed
-			
-			lastRefreshTime = new Date();
-		} catch (error) {
-			log.error('Error refreshing token prices:', false, error);
-		} finally {
-			isRefreshing = false;
-		}
-	}
-
-	function handleTokenSelect(selectedToken: TokenData) {
-		if (onTokenSelect !== null) {
-			onTokenSelect(selectedToken);
-		}
-		show = false;
-	}
-
-	async function handleTokenAdd(token: TokenData) {
-		if (token?.customDefault === 'custom') {
-			const balance = await getTokenBalance(
-				token,
-				$yakklCurrentlySelectedStore.shortcuts.address,
-				provider,
-				tokenService
-			);
-			token.balance = balance;
-			yakklTokenDataCustomStore.update((tokens) => [...tokens, token]);
-			setYakklTokenDataCustomStorage($yakklTokenDataCustomStore);
-		}
-		showAddModal = false;
-	}
-
-	function handleTokenDelete(deletedToken: TokenData) {
-		yakklTokenDataCustomStore.update((tokens) => {
-			const updatedTokens = tokens.filter((t) => t.address !== deletedToken.address);
-			setYakklTokenDataCustomStorage(updatedTokens);
-			return updatedTokens;
-		});
-	}
-
-	function handleTokenUpdate(updatedToken: TokenData) {
-		yakklTokenDataCustomStore.update((tokens) => {
-			const updatedTokens = tokens.map((t) =>
-				t.address === updatedToken.address ? updatedToken : t
-			);
-			log.info('updatedTokens', false, updatedTokens);
-			setYakklTokenDataCustomStorage(updatedTokens);
-			return updatedTokens;
-		});
-	}
-
-
-	function closeModal() {
-		show = false;
-	}
-</script>
-
-<Modal
-	bind:show
-	title="All Tokens"
-	description="View and manage your tokens"
-	onClose={closeModal}
-	{className}
->
-	<div class="p-4">
-		<!-- Header with auto-refresh status -->
-		<div class="flex items-center justify-between mb-4">
-			<div class="flex items-center gap-2">
-				<h3 class="text-lg font-semibold text-gray-800">Token Portfolio</h3>
-				<div class="flex items-center gap-1">
-					<div class="w-2 h-2 bg-green-600 rounded-full animate-pulse"></div>
-					<span class="text-xs text-gray-500">
-						Auto-refresh {isBasicMember ? '(5min)' : '(live)'}
-					</span>
-				</div>
-			</div>
-			
-			{#if isBasicMember}
-				<SimpleTooltip content="Upgrade for real-time price updates and advanced analytics">
-					<a
-						href="#upgrade"
-						class="text-xs text-indigo-600 hover:text-indigo-700 font-medium flex items-center gap-1"
-					>
-						<svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
-							<path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
-						</svg>
-						Upgrade for live prices
-					</a>
-				</SimpleTooltip>
-			{/if}
-		</div>
-
-		{#if tokens.length > 0}
-			<!-- Enhanced token list with Basic vs Pro features -->
-			<div class="space-y-3 mb-4 max-h-96 overflow-y-auto">
-				<TokenListEnhanced
-					{tokens}
-					onTokenSelect={handleTokenSelect}
-					onTokenUpdate={handleTokenUpdate}
-					onTokenDelete={handleTokenDelete}
-				/>
-			</div>
-			
-			<!-- Token count -->
-			<div class="text-sm text-gray-500 text-center mb-4">
-				Showing all {tokens.length} token{tokens.length === 1 ? '' : 's'}
-			</div>
-		{:else}
-			<!-- Empty state -->
-			<div class="text-center py-12">
-				<div class="w-16 h-16 mx-auto mb-4 bg-gradient-to-br from-green-100 to-emerald-100 rounded-full flex items-center justify-center">
-					<svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
-						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
-					</svg>
-				</div>
-				<h3 class="text-lg font-semibold text-gray-700 mb-2">No Tokens Found</h3>
-				<p class="text-gray-500 mb-6">Add tokens to start tracking your portfolio</p>
-			</div>
-		{/if}
-
-		<!-- Action buttons and info -->
-		<div class="border-t border-gray-200 pt-4">
-			<button
-				onclick={() => {
-					showAddModal = true;
-					show = false;
-				}}
-				class="w-full bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-semibold py-3 px-4 rounded-lg transition-all duration-200 shadow-md hover:shadow-lg flex items-center justify-center space-x-2"
-			>
-				<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
-					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
-				</svg>
-				<span>Add Custom Token</span>
-			</button>
-			
-			{#if isBasicMember}
-				<div class="mt-3 p-3 bg-amber-50 rounded-lg border border-amber-200">
-					<div class="flex items-start">
-						<div class="flex-shrink-0">
-							<svg class="w-4 h-4 text-amber-600 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
-								<path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
-							</svg>
-						</div>
-						<div class="ml-2">
-							<p class="text-xs text-amber-800 font-medium">
-								Manual refresh only - Upgrade to YAKKL Pro for:
-							</p>
-							<ul class="text-xs text-amber-700 mt-1 space-y-0.5">
-								<li> Automatic price updates with full analytics</li>
-								<li> Real-time portfolio tracking</li>
-								<li> Advanced token insights</li>
-								<li> Priority support</li>
-							</ul>
-						</div>
-					</div>
-				</div>
-			{:else}
-				<div class="mt-3 p-3 bg-green-50 rounded-lg border border-green-200">
-					<div class="flex items-center">
-						<div class="flex-shrink-0">
-							<svg class="w-4 h-4 text-green-600" fill="currentColor" viewBox="0 0 20 20">
-								<path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
-							</svg>
-						</div>
-						<div class="ml-2">
-							<p class="text-xs text-green-800">
-								Enjoying automatic price updates and full token analytics
-							</p>
-						</div>
-					</div>
-				</div>
-			{/if}
-		</div>
-	</div>
-</Modal>
-
-<TokenForm bind:show={showAddModal} onSubmit={handleTokenAdd} />
\ No newline at end of file
diff --git a/packages/yakkl-wallet/src/lib/components/v1/Tooltip.svelte b/packages/yakkl-wallet/src/lib/components/v1/Tooltip.svelte
deleted file mode 100644
index c23af10..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/Tooltip.svelte
+++ /dev/null
@@ -1,34 +0,0 @@
-<script lang="ts">
-	import SimpleTooltip from '../SimpleTooltip.svelte';
-
-	interface Props {
-		content: string;
-		side?: 'top' | 'right' | 'bottom' | 'left';
-		align?: 'start' | 'center' | 'end';
-		sideOffset?: number;
-		alignOffset?: number;
-		triggerClass?: string;
-		contentClass?: string;
-		children?: any;
-	}
-
-	let {
-		content,
-		side = 'top',
-		align = 'center',
-		sideOffset = 4,
-		alignOffset = 0,
-		triggerClass = '',
-		contentClass = '',
-		children
-	}: Props = $props();
-
-	// Map side prop to position for SimpleTooltip
-	let position = $derived(side as 'top' | 'bottom' | 'left' | 'right');
-</script>
-
-<SimpleTooltip content={content} position={position}>
-	<span class={triggerClass}>
-		{@render children?.()}
-	</span>
-</SimpleTooltip>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/TrialCountdown.svelte b/packages/yakkl-wallet/src/lib/components/v1/TrialCountdown.svelte
deleted file mode 100644
index fc52364..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/TrialCountdown.svelte
+++ /dev/null
@@ -1,134 +0,0 @@
-<script lang="ts">
-	import { onMount, onDestroy } from 'svelte';
-	import { getSettings, setSettings } from '$lib/common/stores';
-	import { AccessSourceType } from '$lib/common/types';
-	import { openModal } from '$lib/common/stores/modal';
-	import { UnifiedTimerManager } from '$lib/managers/UnifiedTimerManager';
-	import { CountdownTimer } from '$lib/managers/CountdownTimer';
-
-	let remaining = '';
-	let visible = true;
-	let pinned = false;
-	let countdownTimer: CountdownTimer | null = null;
-	let hideTimeoutId = 'trial-hide-timeout';
-	const timerManager = UnifiedTimerManager.getInstance();
-
-	async function updateCountdown() {
-		const settings = await getSettings();
-		if (
-			!settings ||
-			settings.plan.source !== AccessSourceType.TRIAL ||
-			!settings.plan.trialEndDate
-		) {
-			visible = false;
-			return;
-		}
-
-		pinned = settings.trialCountdownPinned ?? false;
-
-		const end = new Date(settings.plan.trialEndDate).getTime();
-		const now = Date.now();
-		const durationMs = end - now;
-
-		if (durationMs <= 0) {
-			visible = false;
-			return;
-		}
-
-		// Create countdown timer
-		countdownTimer = new CountdownTimer(
-			'trial-countdown',
-			durationMs,
-			(remainingSeconds) => {
-				const hours = Math.floor(remainingSeconds / 3600);
-				const minutes = Math.floor((remainingSeconds % 3600) / 60);
-				const seconds = remainingSeconds % 60;
-				remaining = `${hours}h ${minutes}m ${seconds}s`;
-			},
-			() => {
-				visible = false;
-			}
-		);
-
-		countdownTimer.start();
-
-		// Schedule auto-hide if not pinned
-		if (!pinned) {
-			timerManager.addTimeout(
-				hideTimeoutId,
-				() => {
-					visible = false;
-				},
-				30000
-			);
-			timerManager.startTimeout(hideTimeoutId);
-		}
-	}
-
-	function handleUpgrade() {
-		openModal('upgrade');
-	}
-
-	async function togglePin() {
-		pinned = !pinned;
-		const store = await getSettings();
-		const updated = { ...store, trialCountdownPinned: pinned };
-		// Persist back
-		setSettings(updated);
-
-		if (!pinned) {
-			timerManager.addTimeout(
-				hideTimeoutId,
-				() => {
-					visible = false;
-				},
-				30000
-			);
-			timerManager.startTimeout(hideTimeoutId);
-		} else {
-			visible = true;
-			// Cancel the hide timeout if we're pinning
-			timerManager.stopTimeout(hideTimeoutId);
-			timerManager.removeTimeout(hideTimeoutId);
-		}
-	}
-
-	onMount(async () => {
-		await updateCountdown();
-	});
-
-	onDestroy(() => {
-		if (countdownTimer) {
-			countdownTimer.destroy();
-			countdownTimer = null;
-		}
-		timerManager.stopTimeout(hideTimeoutId);
-		timerManager.removeTimeout(hideTimeoutId);
-	});
-</script>
-
-{#if visible}
-	<div
-		class="fixed bottom-0 left-0 right-0 z-50 bg-yellow-300 dark:bg-yellow-800 text-yellow-900 dark:text-yellow-100 px-4 py-2 text-center text-sm font-medium flex items-center justify-between shadow-lg"
-	>
-		<div class="flex items-center space-x-2">
-			<span class="font-bold"> Trial ends in:</span>
-			<span>{remaining}</span>
-		</div>
-		<div class="flex items-center space-x-3">
-			<button
-				on:click={handleUpgrade}
-				class="text-xs font-semibold underline hover:text-yellow-700 dark:hover:text-yellow-300"
-			>
-				Upgrade
-			</button>
-			<button
-				on:click={togglePin}
-				title="Pin or unpin this banner"
-				class="text-xs opacity-60 hover:opacity-100"
-			>
-				
-			</button>
-		</div>
-	</div>
-{/if}
diff --git a/packages/yakkl-wallet/src/lib/components/v1/TypingEffect.svelte b/packages/yakkl-wallet/src/lib/components/v1/TypingEffect.svelte
deleted file mode 100644
index 08e95a7..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/TypingEffect.svelte
+++ /dev/null
@@ -1,53 +0,0 @@
-<script lang="ts">
-	interface Props {
-		text?: string;
-		typingSpeed?: number;
-	}
-
-	let { text = '', typingSpeed = 50 }: Props = $props();
-
-	let visibleText = $state('');
-	let typing = $state(false);
-	let lastText = $state('');
-
-	async function type() {
-		if (!typing) {
-			typing = true;
-			visibleText = '';
-			for (const char of text) {
-				visibleText += char;
-				await new Promise((resolve) => setTimeout(resolve, typingSpeed));
-			}
-			typing = false;
-		}
-	}
-
-	// Only run typing effect when text prop actually changes (prevents infinite loop)
-	$effect(() => {
-		if (text !== lastText && text && text.length > 0) {
-			lastText = text;
-			type();
-		}
-	});
-</script>
-
-<div class="typing-effect">
-	{visibleText}<span class="typing-cursor" class:typing>{typing ? '|' : ''}</span>
-</div>
-
-<style>
-	.typing-effect {
-		display: inline;
-	}
-
-	.typing-cursor {
-		font-weight: bold;
-		animation: blink 1s infinite;
-	}
-
-	@keyframes blink {
-		50% {
-			opacity: 0;
-		}
-	}
-</style>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/Upgrade.svelte b/packages/yakkl-wallet/src/lib/components/v1/Upgrade.svelte
deleted file mode 100644
index 78a0137..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/Upgrade.svelte
+++ /dev/null
@@ -1,703 +0,0 @@
-<!-- Upgrade.svelte -->
-<script lang="ts">
-	import { createForm } from 'svelte-forms-lib';
-	import * as yup from 'yup';
-	import Modal from './Modal.svelte';
-	import Login from './Login.svelte';
-	import RegistrationPrompt from './RegistrationPrompt.svelte';
-	import { getProfile, getSettings, yakklMiscStore } from '$lib/common/stores';
-	import { log } from '$lib/managers/Logger';
-	import { dateString } from '$lib/common/datetime';
-	import ErrorNoAction from './ErrorNoAction.svelte';
-	import Confirmation from './Confirmation.svelte';
-	import { safeLogout } from '$lib/common/safeNavigate';
-	import Notification from './Notification.svelte';
-	import { UpgradeManager, type UpgradeResponseMessage } from '$lib/managers/UpgradeManager';
-	import { canUpgrade } from '$lib/common/utils';
-	import type { ProfileData } from '$lib/common/interfaces';
-	import { decryptData } from '$lib/common/encryption';
-	import { isEncryptedData } from '$lib/common';
-	import { getAvailableMemberUpgradePlanLevel } from '$lib/common/member_pricing';
-	import {
-		checkRegistrationStatus,
-		isUserLoggedIn,
-		type RegistrationStatus
-	} from '$lib/common/auth-utils';
-	import { authStore, isAuthenticated, isRegistered } from '$lib/stores/auth-store';
-	import AuthError from './AuthError.svelte';
-	import AuthLoading from './AuthLoading.svelte';
-	import { closeModal } from '$lib/common/stores/modal';
-	import { getContextTypeStore } from '$lib/common/stores';
-
-	interface Props {
-		show?: boolean;
-		onComplete?: () => void;
-		onClose?: () => void;
-		onCancel?: () => void;
-		openWallet?: () => void;
-		useAuthStore?: boolean; // Optional flag to use auth store for state management
-	}
-
-	let {
-		show = $bindable(false),
-		onComplete = $bindable(() => {}),
-		onClose = $bindable(() => {
-			safeLogout();
-		}),
-		onCancel = $bindable(() => {
-			(show = false), (showConfirmation = false), (showNotification = false), (showError = false);
-		}),
-		openWallet,
-		useAuthStore = false
-	}: Props = $props();
-
-	// Detect if we're in sidepanel context
-	const contextType = $state(getContextTypeStore());
-	const isSidepanel = $derived(
-		contextType === 'sidepanel' || (contextType?.includes?.('sidepanel') ?? false)
-	);
-
-	// Local state
-	let showError = $state(false);
-	let errorMessage = $state('');
-	let isUpgrading = $state(false);
-	let isProUser = $state(false);
-	let showConfirmation = $state(false);
-	let showNotification = $state(false);
-	let showRegistrationPrompt = $state(false);
-	let showLoginModal = $state(false);
-	let progress = $state(0);
-	let statusMessage = $state('');
-	let isInitializing = $state(false);
-	let retryCount = $state(0);
-	const maxRetries = 3;
-	let formValues = {
-		userName: '',
-		password: '',
-		email: ''
-	};
-	let isLoggedIn = $state(false);
-	let registrationStatus = $state<RegistrationStatus | null>(null);
-	let planLevelAvailable = $state(
-		getAvailableMemberUpgradePlanLevel()?.toString()?.toUpperCase()?.replace('_', ' ') ??
-			'YAKKL PRO'
-	);
-
-	const upgradeManager = UpgradeManager.getInstance();
-	let unregisterHandler: (() => void) | null = null;
-
-	// Initialize upgrade flow when modal is shown
-	$effect(() => {
-		if (show) {
-			isInitializing = true;
-			if (useAuthStore) {
-				// Ensure auth store is initialized
-				authStore
-					.initialize()
-					.then(() => {
-						initializeUpgradeFlow();
-					})
-					.catch((error) => {
-						log.error('Failed to initialize auth store:', false, error);
-						initializeUpgradeFlow(); // Continue with fallback
-					})
-					.finally(() => {
-						isInitializing = false;
-					});
-			} else {
-				initializeUpgradeFlow().finally(() => {
-					isInitializing = false;
-				});
-			}
-		}
-	});
-
-	// Sync internal show state with global modal state
-	$effect(() => {
-		if (!show && isSidepanel) {
-			// If internal show becomes false and we're in sidepanel, ensure global modal state is closed
-			closeModal();
-		}
-	});
-
-	// Register message handler when component mounts
-	$effect(() => {
-		unregisterHandler = upgradeManager.registerMessageHandler(handleUpgradeMessage);
-		return () => {
-			if (unregisterHandler) {
-				unregisterHandler();
-			}
-		};
-	});
-
-	function handleUpgradeMessage(message: UpgradeResponseMessage) {
-		switch (message.type) {
-			case 'UPGRADE_STARTED':
-				isUpgrading = true;
-				progress = 0;
-				statusMessage = 'Starting upgrade process...';
-				break;
-			case 'UPGRADE_PROGRESS':
-				progress = message.progress;
-				statusMessage = message.status;
-				break;
-			case 'UPGRADE_COMPLETED':
-				isUpgrading = false;
-				show = false;
-				showNotification = true;
-				break;
-			case 'UPGRADE_ERROR':
-				isUpgrading = false;
-				errorMessage = message.error;
-				showError = true;
-				break;
-		}
-	}
-
-	// Enhanced close handler for sidepanel context
-	function handleSidepanelClose() {
-		show = false; // Ensure internal show state is false
-		closeModal(); // Close the modal
-		if (!isSidepanel) {
-			onClose();
-		}
-		// Don't logout in sidepanel - just close the modal
-	}
-
-	// Enhanced cancel handler for sidepanel context
-	function handleSidepanelCancel() {
-		show = false; // Ensure internal show state is false
-		closeModal(); // Close the modal
-		showConfirmation = false;
-		showNotification = false;
-		showError = false;
-
-		if (!isSidepanel) {
-			onCancel();
-		}
-		// Don't logout in sidepanel - just close the modal
-	}
-
-	// Enhanced notification close for sidepanel context
-	function handleNotificationClose() {
-		showNotification = false;
-		closeModal(); // Close the modal
-
-		// Add delay to ensure proper cleanup
-		setTimeout(() => {
-			if (!isSidepanel) {
-				onClose();
-			}
-			// Don't logout in sidepanel - just close the modal
-		}, 50);
-	}
-
-	async function initializeUpgradeFlow() {
-		try {
-			retryCount = 0; // Reset retry count on new initialization
-
-			// First check registration status
-			registrationStatus = await checkRegistrationStatus();
-
-			if (!registrationStatus.isRegistered) {
-				showRegistrationPrompt = true;
-				return;
-			}
-
-			// Check login status
-			isLoggedIn = useAuthStore ? $isAuthenticated : isUserLoggedIn($yakklMiscStore);
-
-			if (!isLoggedIn) {
-				showLoginModal = true;
-				return;
-			}
-
-			// Continue with pro status check if already logged in
-			await checkProLevelStatus();
-		} catch (error) {
-			retryCount++;
-			log.error('Error initializing upgrade flow:', false, error);
-
-			// More specific error messages
-			if (error instanceof Error) {
-				errorMessage = `Initialization failed: ${error.message}`;
-			} else {
-				errorMessage = 'Failed to initialize upgrade process';
-			}
-
-			if (retryCount < maxRetries) {
-				errorMessage += ` (Attempt ${retryCount}/${maxRetries})`;
-			}
-
-			showError = true;
-		}
-	}
-
-	// Retry initialization
-	async function handleInitRetry() {
-		if (retryCount < maxRetries) {
-			showError = false;
-			errorMessage = '';
-			isInitializing = true;
-			try {
-				await initializeUpgradeFlow();
-			} finally {
-				isInitializing = false;
-			}
-		}
-	}
-
-	// Dismiss initialization error
-	function handleInitDismiss() {
-		showError = false;
-		errorMessage = '';
-		retryCount = 0;
-
-		if (isSidepanel) {
-			closeModal();
-			// Don't logout in sidepanel - just close the modal
-		}
-	}
-
-	async function checkProLevelStatus() {
-		try {
-			const upgradeAllowed = await canUpgrade();
-			isProUser = !upgradeAllowed;
-			if (!upgradeAllowed) {
-				showError = true;
-			}
-		} catch (error) {
-			log.error('Error checking upgrade eligibility:', false, error);
-		}
-	}
-
-	const { form, handleSubmit } = createForm({
-		initialValues: formValues,
-		validationSchema: yup.object().shape({
-			userName: yup.string().required('Member username is required'),
-			password: yup.string().required('Password is required'),
-			email: yup.string().email('Must be a valid email.').required('Email is required.')
-		}),
-		onSubmit: async (values) => {
-			formValues = values;
-			showConfirmation = true;
-		}
-	});
-
-	function handleLoginSuccess(
-		profile: any,
-		digest: string,
-		_isMinimal: boolean,
-		jwtToken?: string
-	) {
-		isLoggedIn = true;
-		showLoginModal = false;
-
-		// Log JWT token availability
-		if (jwtToken) {
-			log.debug('JWT token received in upgrade flow', false, {
-				hasToken: true,
-				username: profile.userName
-			});
-		}
-
-		// Pre-populate form with profile data
-		if (profile) {
-			formValues.userName = profile.userName;
-			if (profile.data?.email) {
-				// Handle encrypted or unencrypted profile data
-				if (isEncryptedData(profile.data)) {
-					// The digest is already set by the Login component's verify function
-					decryptData(profile.data, digest)
-						.then((profileData) => {
-							const data = profileData as ProfileData;
-							formValues.email = data.email;
-						})
-						.catch((error) => {
-							log.warn('Error decrypting profile data:', false, error);
-							formValues.email = '';
-						});
-				} else {
-					formValues.email = profile.data.email;
-				}
-			}
-		}
-
-		// Continue with upgrade flow
-		checkProLevelStatus();
-	}
-
-	function handleLoginError(error: any) {
-		errorMessage = typeof error === 'string' ? error : 'Authentication failed';
-		showError = true;
-
-		if (isSidepanel) {
-			// In sidepanel, just close modal on login error after delay
-			setTimeout(() => {
-				closeModal();
-				// Don't logout - user can try again
-			}, 2000); // Give user time to see error
-		}
-	}
-
-	async function onProcessUpgrade() {
-		try {
-			const profile = await getProfile();
-			if (!profile) {
-				// This should never happen
-				log.warn('Profile not found', false, 'Upgrade');
-				errorMessage = 'Profile not found';
-				showError = true;
-				return;
-			}
-
-			formValues = {
-				userName: '',
-				password: '',
-				email: ''
-			};
-
-			if (isEncryptedData(profile.data)) {
-				const profileData = (await decryptData(profile.data, $yakklMiscStore)) as ProfileData;
-				formValues.userName = profile.userName;
-				formValues.email = profileData.email;
-			} else {
-				formValues.userName = profile.userName;
-				formValues.email = (profile.data as ProfileData).email;
-			}
-
-			showConfirmation = true;
-		} catch (error) {
-			log.warn('Error in onProcessUpgrade:', false, error);
-			errorMessage = error instanceof Error ? error.message : 'An error occurred during upgrade';
-			showError = true;
-		}
-	}
-
-	async function processUpgrade() {
-		try {
-			const analyticsData = {
-				utm_source: 'wallet',
-				utm_campaign: 'yakkl_pro_upgrade',
-				user_location: navigator.language,
-				upgrade_date: dateString(),
-				current_version: (await getSettings())?.version ?? 'unknown',
-				platform: (navigator as any)?.userAgentData?.platform ?? navigator?.platform ?? 'unknown',
-				user_agent: navigator?.userAgent ?? 'unknown'
-			};
-
-			const planLevel = planLevelAvailable?.replace(' ', '_ ')?.toLowerCase() ?? 'yakkl_pro';
-			analyticsData.utm_campaign = planLevel.includes('_upgrade')
-				? planLevel
-				: planLevel + '_upgrade';
-
-			await upgradeManager.processUpgrade({
-				userName: formValues.userName,
-				email: formValues.email,
-				analytics: analyticsData,
-				profileId: (await getSettings())?.id ?? '',
-				encryptionKey: $yakklMiscStore
-			});
-		} catch (error) {
-			log.error('Error in upgrade process:', false, error);
-			errorMessage = error instanceof Error ? error.message : 'An error occurred during upgrade';
-			showError = true;
-		}
-	}
-
-	function onConfirm() {
-		processUpgrade();
-	}
-
-	// Determine current context for registration prompt
-	function getCurrentContext() {
-		if (typeof window !== 'undefined') {
-			const pathIncludes = window.location.pathname.includes('sidepanel');
-			return pathIncludes ? 'sidepanel' : 'wallet';
-		}
-		return 'wallet';
-	}
-
-	// Update login status when miscStore changes or auth store changes
-	$effect(() => {
-		if (useAuthStore) {
-			isLoggedIn = $isAuthenticated;
-		} else {
-			isLoggedIn = isUserLoggedIn($yakklMiscStore);
-		}
-	});
-</script>
-
-<!-- Registration Prompt -->
-<RegistrationPrompt
-	bind:show={showRegistrationPrompt}
-	context={getCurrentContext()}
-	{openWallet}
-	onCancel={() => {
-		showRegistrationPrompt = false;
-		show = false;
-		if (isSidepanel) {
-			closeModal();
-			// Don't logout in sidepanel - just close the modal
-		}
-	}}
-/>
-
-<!-- Login Modal -->
-{#if showLoginModal}
-	<Modal bind:show={showLoginModal} title="Login Required" className="z-[701] text-base-content">
-		<div class="p-6">
-			<p class="text-center mb-4 text-gray-600">Please login to upgrade your account</p>
-			<Login
-				onSuccess={handleLoginSuccess}
-				onError={handleLoginError}
-				onCancel={() => {
-					showLoginModal = false;
-					show = false;
-					if (isSidepanel) {
-						closeModal();
-						// Don't logout in sidepanel - just close the modal
-					}
-				}}
-				loginButtonText="Login to Upgrade"
-				cancelButtonText="Cancel"
-				{useAuthStore}
-				generateJWT={!useAuthStore}
-				inputTextClass="text-base-content"
-				inputBgClass="bg-base-100"
-			/>
-		</div>
-	</Modal>
-{/if}
-
-<ErrorNoAction
-	bind:show={showError}
-	value="You are already using a {planLevelAvailable.toUpperCase()} level plan"
-	title="Congratulations!"
-	onClose={isSidepanel ? handleSidepanelCancel : onCancel}
-/>
-<Confirmation
-	bind:show={showConfirmation}
-	title="Upgrading to {planLevelAvailable.toUpperCase()}!"
-	message="Are you sure you want to upgrade to {planLevelAvailable.toUpperCase()}?"
-	{onConfirm}
-	onCancel={isSidepanel ? handleSidepanelCancel : onCancel}
-/>
-<Notification
-	bind:show={showNotification}
-	title="Upgraded to {planLevelAvailable.toUpperCase()}!"
-	message="You are now using the {planLevelAvailable.toUpperCase()} plan. You can now access all the features of the {planLevelAvailable.toUpperCase()} plan."
-	onClose={isSidepanel ? handleNotificationClose : onClose}
-/>
-
-<Modal
-	bind:show
-	title="Upgrade to {planLevelAvailable.toUpperCase()}"
-	onClose={isSidepanel ? handleSidepanelClose : onClose}
->
-	<div class="space-y-6 p-6">
-		<div class="text-center">
-			<h3 class="text-lg font-medium text-gray-900">
-				YAKKL Smart Wallet - {planLevelAvailable.toUpperCase()}
-			</h3>
-			<p class="mt-2 text-sm text-gray-500">
-				Unlock advanced features and enhanced security for your crypto assets.
-			</p>
-		</div>
-
-		{#if isInitializing}
-			<AuthLoading
-				message="Initializing upgrade process..."
-				variant="spinner"
-				size="md"
-				className="py-8"
-			/>
-		{:else if isUpgrading}
-			<div class="flex flex-col items-center justify-center space-y-4">
-				<div class="w-full max-w-md">
-					<div class="relative pt-1">
-						<div class="flex mb-2 items-center justify-between">
-							<div>
-								<span
-									class="text-xs font-semibold inline-block py-1 px-2 uppercase rounded-full text-indigo-600 bg-indigo-200"
-								>
-									{statusMessage}
-								</span>
-							</div>
-							<div class="text-right">
-								<span class="text-xs font-semibold inline-block text-indigo-600">
-									{progress}%
-								</span>
-							</div>
-						</div>
-						<div class="overflow-hidden h-2 mb-4 text-xs flex rounded bg-indigo-200">
-							<div
-								style="width: {progress}%"
-								class="shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-indigo-500 transition-all duration-500"
-							></div>
-						</div>
-					</div>
-				</div>
-			</div>
-		{:else}
-			<div class="bg-gray-50 p-4 rounded-lg">
-				<h4 class="font-medium text-gray-900">Pro Features</h4>
-				<ul class="mt-2 space-y-2 text-sm text-gray-600">
-					<li class="flex items-center">
-						<svg
-							class="h-5 w-5 text-green-500 mr-2"
-							fill="none"
-							stroke="currentColor"
-							viewBox="0 0 24 24"
-						>
-							<path
-								stroke-linecap="round"
-								stroke-linejoin="round"
-								stroke-width="2"
-								d="M5 13l4 4L19 7"
-							/>
-						</svg>
-						Automatic price updates with full analytics
-					</li>
-					<li class="flex items-center">
-						<svg
-							class="h-5 w-5 text-green-500 mr-2"
-							fill="none"
-							stroke="currentColor"
-							viewBox="0 0 24 24"
-						>
-							<path
-								stroke-linecap="round"
-								stroke-linejoin="round"
-								stroke-width="2"
-								d="M5 13l4 4L19 7"
-							/>
-						</svg>
-						Participate in early access to new features and products
-					</li>
-					<li class="flex items-center">
-						<svg
-							class="h-5 w-5 text-green-500 mr-2"
-							fill="none"
-							stroke="currentColor"
-							viewBox="0 0 24 24"
-						>
-							<path
-								stroke-linecap="round"
-								stroke-linejoin="round"
-								stroke-width="2"
-								d="M5 13l4 4L19 7"
-							/>
-						</svg>
-						Reduced swap fees for DeFi platforms
-					</li>
-					<li class="flex items-center">
-						<svg
-							class="h-5 w-5 text-green-500 mr-2"
-							fill="none"
-							stroke="currentColor"
-							viewBox="0 0 24 24"
-						>
-							<path
-								stroke-linecap="round"
-								stroke-linejoin="round"
-								stroke-width="2"
-								d="M5 13l4 4L19 7"
-							/>
-						</svg>
-						Advanced market analytics and charting
-					</li>
-					<li class="flex items-center">
-						<svg
-							class="h-5 w-5 text-green-500 mr-2"
-							fill="none"
-							stroke="currentColor"
-							viewBox="0 0 24 24"
-						>
-							<path
-								stroke-linecap="round"
-								stroke-linejoin="round"
-								stroke-width="2"
-								d="M5 13l4 4L19 7"
-							/>
-						</svg>
-						Full Emergency Kit for wallet recovery
-					</li>
-					<li class="flex items-center">
-						<svg
-							class="h-5 w-5 text-green-500 mr-2"
-							fill="none"
-							stroke="currentColor"
-							viewBox="0 0 24 24"
-						>
-							<path
-								stroke-linecap="round"
-								stroke-linejoin="round"
-								stroke-width="2"
-								d="M5 13l4 4L19 7"
-							/>
-						</svg>
-						Unlimited accounts
-					</li>
-					<li class="flex items-center">
-						<svg
-							class="h-5 w-5 text-green-500 mr-2"
-							fill="none"
-							stroke="currentColor"
-							viewBox="0 0 24 24"
-						>
-							<path
-								stroke-linecap="round"
-								stroke-linejoin="round"
-								stroke-width="2"
-								d="M5 13l4 4L19 7"
-							/>
-						</svg>
-						Advanced security features and more...
-					</li>
-				</ul>
-			</div>
-
-			{#if !isLoggedIn && !showLoginModal && !showRegistrationPrompt}
-				<div class="text-center py-8">
-					<p class="text-gray-600 mb-4">Please login to upgrade your account</p>
-					<button
-						onclick={() => (showLoginModal = true)}
-						class="px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors"
-					>
-						Login to Continue
-					</button>
-				</div>
-			{:else if isLoggedIn}
-				<div class="pt-5">
-					<div class="flex justify-end space-x-4">
-						<button
-							type="button"
-							class="rounded-md border border-gray-300 bg-white py-2 px-4 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"
-							onclick={isSidepanel ? handleSidepanelCancel : onCancel}
-						>
-							Cancel
-						</button>
-						<button
-							type="button"
-							class="rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"
-							disabled={isUpgrading}
-							onclick={onProcessUpgrade}
-						>
-							{isUpgrading ? 'Upgrading...' : 'Upgrade to Pro Level'}
-						</button>
-					</div>
-				</div>
-			{/if}
-		{/if}
-
-		<!-- Enhanced error handling -->
-		<AuthError
-			error={showError ? errorMessage : null}
-			onRetry={retryCount < maxRetries && !isUpgrading && !isInitializing
-				? handleInitRetry
-				: undefined}
-			onDismiss={!isUpgrading && !isInitializing ? handleInitDismiss : undefined}
-		/>
-	</div>
-</Modal>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/UpgradeFooter.svelte b/packages/yakkl-wallet/src/lib/components/v1/UpgradeFooter.svelte
deleted file mode 100644
index d0a8b8b..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/UpgradeFooter.svelte
+++ /dev/null
@@ -1,19 +0,0 @@
-<!-- File: src/lib/components/UpgradeFooter.svelte -->
-<script lang="ts">
-	let {
-		onUpgrade,
-		text = "Unlock the rest of the world's insightful information by",
-		buttonText = 'Upgrading today!'
-	} = $props<{
-		onUpgrade: () => void;
-		text?: string;
-		buttonText?: string;
-	}>();
-</script>
-
-<div class="text-sm text-zinc-600 dark:text-zinc-400">
-	{text}
-	<button class="text-blue-600 dark:text-blue-400 hover:underline" onclick={onUpgrade}>
-		{buttonText}
-	</button>
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/Verification.svelte b/packages/yakkl-wallet/src/lib/components/v1/Verification.svelte
deleted file mode 100644
index 01e4aa9..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/Verification.svelte
+++ /dev/null
@@ -1,38 +0,0 @@
-<script lang="ts">
-	interface Props {
-		// Popup a username/pwd verification dialog
-		show?: boolean;
-		handleProcess?: any;
-	}
-
-	let { show = $bindable(false), handleProcess = (param1: any, param2: any) => {} }: Props =
-		$props();
-	let userName: string = $state();
-	let password: string = $state();
-
-	// TODO: Need to be able to pass function to handleProcess. Until then simply use the code
-</script>
-
-<div class="modal" class:modal-open={show}>
-	<div class="modal-box relative">
-		<!-- <label for="my-modal-3" class="btn btn-sm btn-circle absolute right-2 top-2"></label> -->
-		<h3 class="text-lg font-bold">Authorization Verification</h3>
-		<p class="py-3">Please verify your Username and Password to move forward. Thank you.</p>
-		<input
-			type="text"
-			placeholder="Username"
-			bind:value={userName}
-			class="input input-bordered input-primary w-full max-w-xs mb-2"
-		/>
-		<input
-			type="password"
-			placeholder="Password"
-			bind:value={password}
-			class="input input-bordered input-primary w-full max-w-xs"
-		/>
-		<div class="modal-action">
-			<button class="btn" onclick={() => (show = false)}>Cancel</button>
-			<button class="btn" onclick={() => handleProcess(userName, password)}>Verify</button>
-		</div>
-	</div>
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/VerifyWarning.svelte b/packages/yakkl-wallet/src/lib/components/v1/VerifyWarning.svelte
deleted file mode 100644
index df307e4..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/VerifyWarning.svelte
+++ /dev/null
@@ -1,48 +0,0 @@
-<script lang="ts">
-	import { Button, Modal } from 'flowbite-svelte';
-
-	interface Props {
-		warning?: boolean;
-		verifyMessage?: string;
-		accept?: any; // export let cancel = () => {};
-	}
-
-	let {
-		warning = $bindable(false),
-		verifyMessage = 'Are you sure?',
-		accept = () => {}
-	}: Props = $props();
-</script>
-
-<Modal id="warning" bind:open={warning}>
-	<div class="text-center break-all">
-		<svg
-			aria-hidden="true"
-			class="mx-auto mb-4 w-14 h-14 text-gray-400 dark:text-gray-200"
-			fill="none"
-			stroke="currentColor"
-			viewBox="0 0 24 24"
-			xmlns="http://www.w3.org/2000/svg"
-		>
-			<path
-				stroke-linecap="round"
-				stroke-linejoin="round"
-				stroke-width="2"
-				d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
-			/>
-		</svg>
-		<h3 class="mb-5 text-lg font-normal text-gray-500 dark:text-gray-400">
-			<span class="font-bold text-red-600">WARNING -</span>
-			{verifyMessage}
-		</h3>
-
-		<!-- TBD - Have tp change so it gets verified sent off-->
-		<Button
-			color="red"
-			on:click={() => {
-				accept;
-			}}>OK</Button
-		>
-		<!-- <Button on:click={() => {cancel}} color="alternative">No, cancel</Button> -->
-	</div>
-</Modal>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/ViewControls.svelte b/packages/yakkl-wallet/src/lib/components/v1/ViewControls.svelte
deleted file mode 100644
index 6f293de..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/ViewControls.svelte
+++ /dev/null
@@ -1,144 +0,0 @@
-<script lang="ts">
-	import ViewToggleMenu from './ViewToggleMenu.svelte';
-
-	export interface Props {
-		onSortChange: (criteria: string) => void;
-		onViewChange: (
-			view:
-				| 'grid'
-				| 'carousel'
-				| 'thumbnail'
-				| 'chart'
-				| 'chartAdvanced'
-				| 'list'
-				| 'table'
-				| 'news'
-				| 'analysis'
-				| 'symbol'
-		) => void;
-		onPrint?: () => void;
-	}
-
-	let {
-		onSortChange,
-		onViewChange,
-		onPrint = () => {
-			alert('Printing is in limited release. Soon to be available to all!');
-		}
-	}: Props = $props();
-
-	const sortOptions = [
-		{ label: 'Name', value: 'name' },
-		{ label: 'Price', value: 'price' },
-		{ label: 'Value', value: 'value' }
-	];
-
-	// Manage cycling views
-	let currentView = $state<
-		| 'grid'
-		| 'carousel'
-		| 'thumbnail'
-		| 'chart'
-		| 'chartAdvanced'
-		| 'list'
-		| 'table'
-		| 'news'
-		| 'analysis'
-		| 'symbol'
-	>('grid');
-
-	function onSelect(value: string) {
-		currentView = value as
-			| 'grid'
-			| 'carousel'
-			| 'thumbnail'
-			| 'chart'
-			| 'chartAdvanced'
-			| 'list'
-			| 'table'
-			| 'news'
-			| 'analysis'
-			| 'symbol';
-		onViewChange(currentView);
-	}
-</script>
-
-<div class="flex items-center space-x-2 text-slate-700 bg-white/90 p-[2px] rounded-full">
-	<!-- Sort Dropdown -->
-	<div class="relative w-fit cursor-pointer">
-		<select
-			id="sortby"
-			class="bg-gray-500 rounded-full px-2 py-1 text-sm cursor-pointer text-white"
-			onchange={(e) => onSortChange((e.target as HTMLSelectElement).value)}
-			title="Sort Tokens"
-		>
-			{#each sortOptions as option}
-				<option value={option.value}>{option.label}</option>
-			{/each}
-		</select>
-		<div class="absolute inset-y-0 right-2 flex items-center pointer-events-none">
-			<!-- Down Chevron -->
-			<svg
-				xmlns="http://www.w3.org/2000/svg"
-				class="w-4 h-4 text-white"
-				fill="none"
-				viewBox="0 0 24 24"
-				stroke="currentColor"
-			>
-				<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
-			</svg>
-		</div>
-	</div>
-
-	<!-- Toggle View -->
-	<ViewToggleMenu {onSelect} />
-	<!-- May want to enable icon changes below or hover show -->
-	<!-- <button
-    class="hover:text-white"
-    onclick={nextView}
-    title="Switch View"
-  >
-    {#if currentView === 'grid'} -->
-	<!-- Grid Icon -->
-	<!-- <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
-        <rect x="3" y="3" width="7" height="7" />
-        <rect x="14" y="3" width="7" height="7" />
-        <rect x="14" y="14" width="7" height="7" />
-        <rect x="3" y="14" width="7" height="7" />
-      </svg>
-    {:else if currentView === 'carousel'} -->
-	<!-- Carousel Icon -->
-	<!-- <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke="currentColor">
-        <circle cx="12" cy="12" r="10"></circle>
-        <line x1="12" y1="8" x2="12" y2="12"></line>
-        <line x1="12" y1="12" x2="16" y2="16"></line>
-      </svg>
-    {:else if currentView === 'thumbnail'} -->
-	<!-- Thumbnail Icon -->
-	<!-- <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke="currentColor">
-        <rect x="3" y="3" width="18" height="18" rx="3" />
-        <line x1="3" y1="12" x2="21" y2="12" />
-        <line x1="12" y1="3" x2="12" y2="21" />
-      </svg>
-    {/if}
-  </button> -->
-
-	<!-- Print Button -->
-	<!-- svelte-ignore a11y_consider_explicit_label -->
-	<button class="hover:text-white" onclick={onPrint} title="Print Portfolio">
-		<svg
-			xmlns="http://www.w3.org/2000/svg"
-			fill="none"
-			viewBox="0 0 24 24"
-			stroke-width="1.5"
-			stroke="currentColor"
-			class="w-6 h-6"
-		>
-			<path
-				stroke-linecap="round"
-				stroke-linejoin="round"
-				d="M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z"
-			/>
-		</svg>
-	</button>
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/ViewToggleMenu.svelte b/packages/yakkl-wallet/src/lib/components/v1/ViewToggleMenu.svelte
deleted file mode 100644
index 5fc2fc0..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/ViewToggleMenu.svelte
+++ /dev/null
@@ -1,58 +0,0 @@
-<script lang="ts">
-	import * as DropdownMenu from '$lib/components/v1/ui.tmp/dropdown-menu/index.js';
-	import { DotsThreeCircle } from 'phosphor-svelte';
-
-	export interface Props {
-		onSelect: (value: string) => void;
-	}
-
-	let { onSelect }: Props = $props();
-</script>
-
-<DropdownMenu.Root>
-	<DropdownMenu.Trigger
-		class="focus-visible border-bordinput bg-backgrounder-lt text-a-foreground inline-flex h-6 w-6 select-none items-center justify-center rounded-full border text-sm font-medium shadow-btn hover:bg-muted focus-visible:ring-2 focus-visible:ring-foreground focus-visible:ring-offset-2 focus-visible:ring-offset-background active:scale-98"
-	>
-		<DotsThreeCircle class="h-6 w-6 text-foreground" />
-	</DropdownMenu.Trigger>
-	<DropdownMenu.Content
-		class="w-56 bg-white/90 dark:bg-slate-900/90 text-slate-900 dark:text-gray-200 data-[highlight-muted]"
-	>
-		<DropdownMenu.Group>
-			<DropdownMenu.GroupHeading>Views</DropdownMenu.GroupHeading>
-			<DropdownMenu.Separator />
-			<!-- <DropdownMenu.Item closeOnSelect={true} onclick={() => onSelect('carousel')} textValue="carousel">
-          Carousel
-        </DropdownMenu.Item> -->
-			<DropdownMenu.Item
-				closeOnSelect={true}
-				onclick={() => onSelect('chartAdvanced')}
-				textValue="chartAdvanced"
-			>
-				Chart Advanced
-			</DropdownMenu.Item>
-			<DropdownMenu.Item closeOnSelect={true} onclick={() => onSelect('chart')} textValue="chart">
-				Chart
-			</DropdownMenu.Item>
-			<DropdownMenu.Item closeOnSelect={true} onclick={() => onSelect('grid')} textValue="grid">
-				Grid
-			</DropdownMenu.Item>
-			<DropdownMenu.Item closeOnSelect={true} onclick={() => onSelect('news')} textValue="news">
-				News
-			</DropdownMenu.Item>
-			<DropdownMenu.Item closeOnSelect={true} onclick={() => onSelect('symbol')} textValue="symbol">
-				Symbol View
-			</DropdownMenu.Item>
-			<DropdownMenu.Item
-				closeOnSelect={true}
-				onclick={() => onSelect('analysis')}
-				textValue="analysis"
-			>
-				Technical Analysis
-			</DropdownMenu.Item>
-			<!-- <DropdownMenu.Item closeOnSelect={true} onclick={() => onSelect('thumbnail')} textValue="thumbnail">
-          Thumbnail
-        </DropdownMenu.Item> -->
-		</DropdownMenu.Group>
-	</DropdownMenu.Content>
-</DropdownMenu.Root>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/WalletDimmingOverlay.svelte b/packages/yakkl-wallet/src/lib/components/v1/WalletDimmingOverlay.svelte
deleted file mode 100644
index b0b9dfc..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/WalletDimmingOverlay.svelte
+++ /dev/null
@@ -1,59 +0,0 @@
-<script lang="ts">
-	import { onMount, onDestroy } from 'svelte';
-	import { fade } from 'svelte/transition';
-
-	// State
-	let showOverlay = $state(false);
-	let idleState = $state<'active' | 'idle' | 'locked'>('active');
-
-	// Cleanup function
-	let cleanup: (() => void) | undefined;
-
-	onMount(() => {
-		// Listen for idle state changes
-		const handleIdleStateChange = (event: CustomEvent) => {
-			const { state } = event.detail;
-			idleState = state;
-			showOverlay = state === 'idle' || state === 'locked';
-		};
-
-		// Listen for user activity detection
-		const handleUserActivity = () => {
-			showOverlay = false;
-			idleState = 'active';
-		};
-
-		// Add event listeners
-		window.addEventListener('yakklIdleStateChanged', handleIdleStateChange as EventListener);
-		window.addEventListener('yakklUserActivityDetected', handleUserActivity as EventListener);
-
-		// Cleanup function
-		cleanup = () => {
-			window.removeEventListener('yakklIdleStateChanged', handleIdleStateChange as EventListener);
-			window.removeEventListener('yakklUserActivityDetected', handleUserActivity as EventListener);
-		};
-	});
-
-	onDestroy(() => {
-		cleanup?.();
-	});
-</script>
-
-<!-- Dimming Overlay -->
-{#if showOverlay}
-	<div
-		class="fixed inset-0 bg-black/30 backdrop-blur-[1px] pointer-events-none z-40"
-		transition:fade={{ duration: 500 }}
-		style="backdrop-filter: blur(1px) brightness(0.7);"
-	>
-		<!-- Optional: Add subtle pattern or texture -->
-		<div class="absolute inset-0 bg-gradient-to-br from-red-900/10 to-orange-900/10"></div>
-	</div>
-{/if}
-
-<style>
-	/* Ensure the overlay doesn't interfere with interactions */
-	.pointer-events-none {
-		pointer-events: none;
-	}
-</style>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/Warning.svelte b/packages/yakkl-wallet/src/lib/components/v1/Warning.svelte
deleted file mode 100644
index 20316ef..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/Warning.svelte
+++ /dev/null
@@ -1,36 +0,0 @@
-<script lang="ts">
-	import Modal from './Modal.svelte';
-
-	interface Props {
-		show: boolean;
-		value: string;
-		title?: string;
-		rejectText?: string;
-		className?: string;
-		handle?: () => void;
-	}
-
-	let {
-		show = $bindable(false),
-		value = '',
-		title = 'WARNING!',
-		rejectText = 'Close',
-		className = 'z-[995]',
-		handle = () => {
-			show = false;
-		}
-	}: Props = $props();
-</script>
-
-<Modal bind:show {title} {className}>
-	<div class="p-6">
-		<p class="text-sm text-gray-500">{value}</p>
-		<div class="mt-4 flex justify-end">
-			<button
-				type="button"
-				class="rounded-md border border-gray-300 bg-white py-2 px-4 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"
-				onclick={handle}>{rejectText}</button
-			>
-		</div>
-	</div>
-</Modal>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/WatchList.svelte b/packages/yakkl-wallet/src/lib/components/v1/WatchList.svelte
deleted file mode 100644
index 5e52ae1..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/WatchList.svelte
+++ /dev/null
@@ -1,23 +0,0 @@
-<!-- WatchList.svelte - Legacy wrapper for new Watcher component -->
-<script lang="ts">
-	import Watcher from './Watcher.svelte';
-
-	interface Props {
-		show?: boolean;
-		onClose?: () => void;
-		onComplete?: () => void;
-	}
-
-	let {
-		show = $bindable(false),
-		onClose = () => (show = false),
-		onComplete = () => {}
-	}: Props = $props();
-</script>
-
-<!-- Use the new advanced Watcher component -->
-<Watcher
-	bind:show={show}
-	onClose={onClose}
-	onComplete={onComplete}
-/>
\ No newline at end of file
diff --git a/packages/yakkl-wallet/src/lib/components/v1/Watcher.svelte b/packages/yakkl-wallet/src/lib/components/v1/Watcher.svelte
deleted file mode 100644
index 7c10bfb..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/Watcher.svelte
+++ /dev/null
@@ -1,654 +0,0 @@
-<!-- Watcher.svelte - Advanced Portfolio Tracking & Social Intelligence -->
-<script lang="ts">
-	import { onMount, onDestroy } from 'svelte';
-	import { log } from '$lib/managers/Logger';
-	import SimpleTooltip from './SimpleTooltip.svelte';
-	import Modal from './Modal.svelte';
-
-	interface Props {
-		show: boolean;
-		onClose: () => void;
-		onComplete?: () => void;
-	}
-
-	let { show = $bindable(), onClose, onComplete }: Props = $props();
-
-	// Watch account data structure
-	interface WatchAccount {
-		id: string;
-		address: string;
-		alias: string;
-		blockchain: string;
-		accountType: 'personal' | 'exchange' | 'whale' | 'institution' | 'contract';
-		category?: string;
-		tags: string[];
-		balance?: number;
-		portfolioValue?: number;
-		lastActivity?: Date;
-		socialScore?: number;
-		isActive: boolean;
-		createdAt: Date;
-		notifications: {
-			largeTransactions: boolean;
-			balanceChanges: boolean;
-			socialActivity: boolean;
-		};
-	}
-
-	// Social intelligence data
-	interface SocialIntelligence {
-		followersCount: number;
-		tradingActivity: 'low' | 'medium' | 'high' | 'whale';
-		reputationScore: number;
-		recentTransactions: {
-			amount: number;
-			direction: 'in' | 'out';
-			timestamp: Date;
-			significance: 'normal' | 'notable' | 'major';
-		}[];
-		influenceMetrics: {
-			copyTraders: number;
-			portfolioMirrors: number;
-			socialMentions: number;
-		};
-	}
-
-	// Component state
-	let watchAccounts = $state<WatchAccount[]>([]);
-	let selectedAccount = $state<WatchAccount | null>(null);
-	let socialData = $state<Map<string, SocialIntelligence>>(new Map());
-	let activeTab = $state<'accounts' | 'analytics' | 'social' | 'alerts'>('accounts');
-	let isLoading = $state(false);
-	let error = $state('');
-
-	// Form state for adding new watch account
-	let newAccountForm = $state({
-		address: '',
-		alias: '',
-		blockchain: 'ethereum',
-		accountType: 'personal' as WatchAccount['accountType'],
-		category: '',
-		tags: [] as string[],
-		notifications: {
-			largeTransactions: true,
-			balanceChanges: false,
-			socialActivity: false
-		}
-	});
-
-	// Available blockchains for watching
-	const supportedBlockchains = [
-		{ id: 'ethereum', name: 'Ethereum', symbol: 'ETH' },
-		{ id: 'bitcoin', name: 'Bitcoin', symbol: 'BTC' },
-		{ id: 'polygon', name: 'Polygon', symbol: 'MATIC' },
-		{ id: 'arbitrum', name: 'Arbitrum', symbol: 'ARB' },
-		{ id: 'optimism', name: 'Optimism', symbol: 'OP' }
-	];
-
-	// Account type definitions with descriptions
-	const accountTypes = [
-		{ 
-			id: 'personal', 
-			name: 'Personal Account', 
-			description: 'Individual wallet addresses you want to track',
-			icon: ''
-		},
-		{ 
-			id: 'exchange', 
-			name: 'Exchange Account', 
-			description: 'Centralized exchange accounts for portfolio tracking',
-			icon: ''
-		},
-		{ 
-			id: 'whale', 
-			name: 'Whale Watching', 
-			description: 'High-value accounts for social trading intelligence',
-			icon: ''
-		},
-		{ 
-			id: 'institution', 
-			name: 'Institutional', 
-			description: 'Corporate or institutional wallet addresses',
-			icon: ''
-		},
-		{ 
-			id: 'contract', 
-			name: 'Smart Contract', 
-			description: 'DeFi protocols and smart contract addresses',
-			icon: ''
-		}
-	];
-
-	onMount(async () => {
-		await loadWatchAccounts();
-	});
-
-	async function loadWatchAccounts() {
-		try {
-			isLoading = true;
-			// TODO: Load from storage/API
-			// For now, using mock data
-			await new Promise(resolve => setTimeout(resolve, 500)); // Simulate loading
-			
-			watchAccounts = [
-				{
-					id: '1',
-					address: '0x742d35cc6129c6532c742fc9d2c1b1e7c15b4c85',
-					alias: 'Vitalik Buterin',
-					blockchain: 'ethereum',
-					accountType: 'whale',
-					category: 'Influencer',
-					tags: ['ethereum', 'founder', 'whale'],
-					balance: 2500000,
-					portfolioValue: 125000000,
-					lastActivity: new Date(Date.now() - 3600000),
-					socialScore: 95,
-					isActive: true,
-					createdAt: new Date(Date.now() - 86400000 * 7),
-					notifications: {
-						largeTransactions: true,
-						balanceChanges: false,
-						socialActivity: true
-					}
-				}
-			];
-
-			// Load social intelligence data
-			socialData.set('1', {
-				followersCount: 5200000,
-				tradingActivity: 'whale',
-				reputationScore: 98,
-				recentTransactions: [
-					{
-						amount: 1500000,
-						direction: 'out',
-						timestamp: new Date(Date.now() - 3600000),
-						significance: 'major'
-					}
-				],
-				influenceMetrics: {
-					copyTraders: 15000,
-					portfolioMirrors: 8500,
-					socialMentions: 125000
-				}
-			});
-
-		} catch (err) {
-			error = 'Failed to load watch accounts';
-			log.error('Error loading watch accounts:', false, err);
-		} finally {
-			isLoading = false;
-		}
-	}
-
-	async function addWatchAccount() {
-		try {
-			if (!newAccountForm.address || !newAccountForm.alias) {
-				error = 'Address and alias are required';
-				return;
-			}
-
-			const newAccount: WatchAccount = {
-				id: Date.now().toString(),
-				...newAccountForm,
-				tags: newAccountForm.tags.filter(tag => tag.trim()),
-				balance: 0,
-				portfolioValue: 0,
-				lastActivity: new Date(),
-				socialScore: 0,
-				isActive: true,
-				createdAt: new Date()
-			};
-
-			watchAccounts = [...watchAccounts, newAccount];
-
-			// Reset form
-			newAccountForm = {
-				address: '',
-				alias: '',
-				blockchain: 'ethereum',
-				accountType: 'personal',
-				category: '',
-				tags: [],
-				notifications: {
-					largeTransactions: true,
-					balanceChanges: false,
-					socialActivity: false
-				}
-			};
-
-			// TODO: Save to storage/API
-			log.info('Added new watch account:', false, newAccount);
-
-		} catch (err) {
-			error = 'Failed to add watch account';
-			log.error('Error adding watch account:', false, err);
-		}
-	}
-
-	function removeWatchAccount(accountId: string) {
-		watchAccounts = watchAccounts.filter(acc => acc.id !== accountId);
-		if (selectedAccount?.id === accountId) {
-			selectedAccount = null;
-		}
-		// TODO: Update storage/API
-	}
-
-	function selectAccount(account: WatchAccount) {
-		selectedAccount = account;
-		activeTab = 'analytics';
-	}
-
-	function addTag(tag: string) {
-		if (tag.trim() && !newAccountForm.tags.includes(tag.trim())) {
-			newAccountForm.tags = [...newAccountForm.tags, tag.trim()];
-		}
-	}
-
-	function removeTag(index: number) {
-		newAccountForm.tags = newAccountForm.tags.filter((_, i) => i !== index);
-	}
-
-	function formatBalance(value: number): string {
-		if (value >= 1000000) {
-			return `$${(value / 1000000).toFixed(2)}M`;
-		}
-		if (value >= 1000) {
-			return `$${(value / 1000).toFixed(1)}K`;
-		}
-		return `$${value.toFixed(2)}`;
-	}
-
-	function getAccountTypeInfo(type: string) {
-		return accountTypes.find(t => t.id === type) || accountTypes[0];
-	}
-
-	function getActivityColor(activity: string): string {
-		switch (activity) {
-			case 'whale': return 'text-purple-600 bg-purple-100';
-			case 'high': return 'text-red-600 bg-red-100';
-			case 'medium': return 'text-orange-600 bg-orange-100';
-			case 'low': return 'text-green-600 bg-green-100';
-			default: return 'text-gray-600 bg-gray-100';
-		}
-	}
-
-	function handleClose() {
-		error = '';
-		selectedAccount = null;
-		activeTab = 'accounts';
-		onClose();
-	}
-
-	function handleComplete() {
-		onComplete?.();
-		handleClose();
-	}
-</script>
-
-{#if show}
-	<Modal 
-		title="Watcher - Portfolio Tracking & Social Intelligence" 
-		show={true} 
-		onClose={handleClose}
-		size="xl"
-	>
-		{#snippet body()}
-			<div class="flex h-[600px]">
-				<!-- Sidebar Navigation -->
-				<div class="w-48 bg-gray-50 border-r border-gray-200 p-4">
-					<nav class="space-y-2">
-						<button
-							onclick={() => activeTab = 'accounts'}
-							class="w-full text-left px-3 py-2 rounded-md text-sm font-medium transition-colors {activeTab === 'accounts' ? 'bg-indigo-100 text-indigo-700' : 'text-gray-600 hover:bg-gray-100'}"
-						>
-							 Watch Accounts
-						</button>
-						<button
-							onclick={() => activeTab = 'analytics'}
-							class="w-full text-left px-3 py-2 rounded-md text-sm font-medium transition-colors {activeTab === 'analytics' ? 'bg-indigo-100 text-indigo-700' : 'text-gray-600 hover:bg-gray-100'}"
-							disabled={!selectedAccount}
-						>
-							 Analytics
-						</button>
-						<button
-							onclick={() => activeTab = 'social'}
-							class="w-full text-left px-3 py-2 rounded-md text-sm font-medium transition-colors {activeTab === 'social' ? 'bg-indigo-100 text-indigo-700' : 'text-gray-600 hover:bg-gray-100'}"
-							disabled={!selectedAccount}
-						>
-							 Social Intel
-						</button>
-						<button
-							onclick={() => activeTab = 'alerts'}
-							class="w-full text-left px-3 py-2 rounded-md text-sm font-medium transition-colors {activeTab === 'alerts' ? 'bg-indigo-100 text-indigo-700' : 'text-gray-600 hover:bg-gray-100'}"
-						>
-							 Alerts
-						</button>
-					</nav>
-				</div>
-
-				<!-- Main Content -->
-				<div class="flex-1 p-6">
-					{#if error}
-						<div class="mb-4 p-3 bg-red-50 border border-red-200 rounded-md">
-							<p class="text-red-700 text-sm">{error}</p>
-							<button 
-								onclick={() => error = ''}
-								class="text-red-600 hover:text-red-800 text-xs underline mt-1"
-							>
-								Dismiss
-							</button>
-						</div>
-					{/if}
-
-					{#if activeTab === 'accounts'}
-						<!-- Watch Accounts Management -->
-						<div class="space-y-6">
-							<div class="flex items-center justify-between">
-								<h3 class="text-lg font-semibold text-gray-900">Watch Accounts</h3>
-								<span class="text-sm text-gray-500">{watchAccounts.length} accounts</span>
-							</div>
-
-							<!-- Add New Account Form -->
-							<div class="bg-gray-50 p-4 rounded-lg">
-								<h4 class="font-medium text-gray-900 mb-3">Add New Watch Account</h4>
-								<div class="grid grid-cols-2 gap-4">
-									<div>
-										<label for="watcher-address" class="block text-sm font-medium text-gray-700 mb-1">Address</label>
-										<input
-											id="watcher-address"
-											bind:value={newAccountForm.address}
-											type="text"
-											placeholder="0x... or wallet address"
-											class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"
-										/>
-									</div>
-									<div>
-										<label for="watcher-alias" class="block text-sm font-medium text-gray-700 mb-1">Alias</label>
-										<input
-											id="watcher-alias"
-											bind:value={newAccountForm.alias}
-											type="text"
-											placeholder="Display name"
-											class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"
-										/>
-									</div>
-									<div>
-										<label for="watcher-blockchain" class="block text-sm font-medium text-gray-700 mb-1">Blockchain</label>
-										<select
-											id="watcher-blockchain"
-											bind:value={newAccountForm.blockchain}
-											class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"
-										>
-											{#each supportedBlockchains as blockchain}
-												<option value={blockchain.id}>{blockchain.name} ({blockchain.symbol})</option>
-											{/each}
-										</select>
-									</div>
-									<div>
-										<label for="watcher-account-type" class="block text-sm font-medium text-gray-700 mb-1">Account Type</label>
-										<select
-											id="watcher-account-type"
-											bind:value={newAccountForm.accountType}
-											class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"
-										>
-											{#each accountTypes as type}
-												<option value={type.id}>{type.icon} {type.name}</option>
-											{/each}
-										</select>
-									</div>
-								</div>
-								<div class="mt-4 flex gap-2">
-									<input
-										id="watcher-tags"
-										type="text"
-										placeholder="Add tags (press Enter)"
-										aria-label="Add tags for the watch account"
-										class="flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"
-										onkeydown={(e) => {
-											if (e.key === 'Enter') {
-												e.preventDefault();
-												addTag(e.currentTarget.value);
-												e.currentTarget.value = '';
-											}
-										}}
-									/>
-									<button
-										onclick={addWatchAccount}
-										class="px-4 py-2 bg-indigo-600 text-white rounded-md text-sm hover:bg-indigo-700 transition-colors"
-									>
-										Add Account
-									</button>
-								</div>
-								{#if newAccountForm.tags.length > 0}
-									<div class="mt-2 flex flex-wrap gap-1">
-										{#each newAccountForm.tags as tag, index}
-											<span class="inline-flex items-center gap-1 px-2 py-1 bg-indigo-100 text-indigo-700 rounded text-xs">
-												{tag}
-												<button onclick={() => removeTag(index)} class="text-indigo-500 hover:text-indigo-700"></button>
-											</span>
-										{/each}
-									</div>
-								{/if}
-							</div>
-
-							<!-- Watch Accounts List -->
-							<div class="space-y-3">
-								{#if isLoading}
-									<div class="flex justify-center py-8">
-										<div class="animate-spin rounded-full h-8 w-8 border-2 border-indigo-500 border-t-transparent"></div>
-									</div>
-								{:else if watchAccounts.length === 0}
-									<div class="text-center py-8 text-gray-500">
-										<p>No watch accounts added yet</p>
-										<p class="text-sm">Add accounts above to start tracking portfolios and social activity</p>
-									</div>
-								{:else}
-									{#each watchAccounts as account}
-										<div class="bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow">
-											<div class="flex items-center justify-between">
-												<div class="flex items-center gap-3">
-													<div class="text-2xl">{getAccountTypeInfo(account.accountType).icon}</div>
-													<div>
-														<div class="font-medium text-gray-900">{account.alias}</div>
-														<div class="text-sm text-gray-500 font-mono">{account.address.slice(0, 10)}...{account.address.slice(-8)}</div>
-														<div class="flex items-center gap-2 mt-1">
-															<span class="px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs">{account.blockchain}</span>
-															<span class="px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs">{getAccountTypeInfo(account.accountType).name}</span>
-															{#each account.tags as tag}
-																<span class="px-2 py-1 bg-indigo-100 text-indigo-700 rounded text-xs">{tag}</span>
-															{/each}
-														</div>
-													</div>
-												</div>
-												<div class="text-right">
-													{#if account.portfolioValue}
-														<div class="font-semibold text-gray-900">{formatBalance(account.portfolioValue)}</div>
-													{/if}
-													{#if account.socialScore}
-														<div class="text-sm text-gray-500">Social: {account.socialScore}/100</div>
-													{/if}
-													<div class="flex gap-2 mt-2">
-														<SimpleTooltip content="View analytics">
-															<button
-																onclick={() => selectAccount(account)}
-																class="px-3 py-1 bg-indigo-100 text-indigo-700 rounded text-xs hover:bg-indigo-200"
-															>
-																Analyze
-															</button>
-														</SimpleTooltip>
-														<SimpleTooltip content="Remove account">
-															<button
-																onclick={() => removeWatchAccount(account.id)}
-																class="px-3 py-1 bg-red-100 text-red-700 rounded text-xs hover:bg-red-200"
-															>
-																Remove
-															</button>
-														</SimpleTooltip>
-													</div>
-												</div>
-											</div>
-										</div>
-									{/each}
-								{/if}
-							</div>
-						</div>
-
-					{:else if activeTab === 'analytics' && selectedAccount}
-						<!-- Analytics View -->
-						<div class="space-y-6">
-							<div class="flex items-center gap-3">
-								<button
-									onclick={() => activeTab = 'accounts'}
-									class="text-indigo-600 hover:text-indigo-800"
-								>
-									 Back
-								</button>
-								<h3 class="text-lg font-semibold text-gray-900">Analytics: {selectedAccount.alias}</h3>
-							</div>
-
-							<div class="grid grid-cols-3 gap-4">
-								<div class="bg-gradient-to-r from-blue-500 to-blue-600 p-4 rounded-lg text-white">
-									<div class="text-sm opacity-90">Portfolio Value</div>
-									<div class="text-2xl font-bold">{formatBalance(selectedAccount.portfolioValue || 0)}</div>
-								</div>
-								<div class="bg-gradient-to-r from-green-500 to-green-600 p-4 rounded-lg text-white">
-									<div class="text-sm opacity-90">Social Score</div>
-									<div class="text-2xl font-bold">{selectedAccount.socialScore || 0}/100</div>
-								</div>
-								<div class="bg-gradient-to-r from-purple-500 to-purple-600 p-4 rounded-lg text-white">
-									<div class="text-sm opacity-90">Account Type</div>
-									<div class="text-lg font-semibold">{getAccountTypeInfo(selectedAccount.accountType).name}</div>
-								</div>
-							</div>
-
-							<div class="text-center py-12 text-gray-500">
-								<p> Advanced portfolio analytics coming soon</p>
-								<p class="text-sm">Balance trends, transaction analysis, and performance metrics</p>
-							</div>
-						</div>
-
-					{:else if activeTab === 'social' && selectedAccount}
-						<!-- Social Intelligence View -->
-						<div class="space-y-6">
-							<div class="flex items-center gap-3">
-								<button
-									onclick={() => activeTab = 'accounts'}
-									class="text-indigo-600 hover:text-indigo-800"
-								>
-									 Back
-								</button>
-								<h3 class="text-lg font-semibold text-gray-900">Social Intelligence: {selectedAccount.alias}</h3>
-							</div>
-
-							{#if socialData.has(selectedAccount.id)}
-								{@const social = socialData.get(selectedAccount.id)}
-								<div class="grid grid-cols-2 gap-6">
-									<div class="space-y-4">
-										<div class="bg-white border border-gray-200 rounded-lg p-4">
-											<h4 class="font-medium text-gray-900 mb-3">Influence Metrics</h4>
-											<div class="space-y-2">
-												<div class="flex justify-between">
-													<span class="text-sm text-gray-600">Copy Traders</span>
-													<span class="font-medium">{social.influenceMetrics.copyTraders.toLocaleString()}</span>
-												</div>
-												<div class="flex justify-between">
-													<span class="text-sm text-gray-600">Portfolio Mirrors</span>
-													<span class="font-medium">{social.influenceMetrics.portfolioMirrors.toLocaleString()}</span>
-												</div>
-												<div class="flex justify-between">
-													<span class="text-sm text-gray-600">Social Mentions</span>
-													<span class="font-medium">{social.influenceMetrics.socialMentions.toLocaleString()}</span>
-												</div>
-											</div>
-										</div>
-
-										<div class="bg-white border border-gray-200 rounded-lg p-4">
-											<h4 class="font-medium text-gray-900 mb-3">Trading Activity</h4>
-											<div class="flex items-center gap-2">
-												<span class="px-2 py-1 rounded text-sm font-medium {getActivityColor(social.tradingActivity)}">
-													{social.tradingActivity.toUpperCase()}
-												</span>
-												<span class="text-sm text-gray-600">activity level</span>
-											</div>
-											<div class="mt-2">
-												<span class="text-sm text-gray-600">Reputation Score: </span>
-												<span class="font-medium">{social.reputationScore}/100</span>
-											</div>
-										</div>
-									</div>
-
-									<div class="space-y-4">
-										<div class="bg-white border border-gray-200 rounded-lg p-4">
-											<h4 class="font-medium text-gray-900 mb-3">Recent Activity</h4>
-											<div class="space-y-3">
-												{#each social.recentTransactions as tx}
-													<div class="flex items-center justify-between p-2 bg-gray-50 rounded">
-														<div class="flex items-center gap-2">
-															<span class="text-lg">{tx.direction === 'in' ? '' : ''}</span>
-															<div>
-																<div class="font-medium text-sm">{formatBalance(tx.amount)}</div>
-																<div class="text-xs text-gray-500">{tx.timestamp.toLocaleTimeString()}</div>
-															</div>
-														</div>
-														<span class="px-2 py-1 bg-orange-100 text-orange-700 rounded text-xs">
-															{tx.significance}
-														</span>
-													</div>
-												{/each}
-											</div>
-										</div>
-									</div>
-								</div>
-							{:else}
-								<div class="text-center py-12 text-gray-500">
-									<p> Social intelligence data not available</p>
-									<p class="text-sm">Connect social data sources to see influence metrics</p>
-								</div>
-							{/if}
-						</div>
-
-					{:else if activeTab === 'alerts'}
-						<!-- Alerts Configuration -->
-						<div class="space-y-6">
-							<h3 class="text-lg font-semibold text-gray-900">Alert Configuration</h3>
-							
-							<div class="text-center py-12 text-gray-500">
-								<p> Smart alerts coming soon</p>
-								<p class="text-sm">Large transactions, social activity, and portfolio changes</p>
-							</div>
-						</div>
-					{/if}
-				</div>
-			</div>
-		{/snippet}
-
-		{#snippet footer()}
-			<div class="flex justify-between">
-				<div class="text-sm text-gray-500">
-					{#if activeTab === 'accounts'}
-						Pro feature: Advanced portfolio tracking & social intelligence
-					{:else if selectedAccount}
-						Analyzing: {selectedAccount.alias}
-					{/if}
-				</div>
-				<div class="flex gap-3">
-					<button
-						onclick={handleClose}
-						class="px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50"
-					>
-						Close
-					</button>
-					{#if activeTab === 'accounts'}
-						<button
-							onclick={handleComplete}
-							class="px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700"
-						>
-							Save Changes
-						</button>
-					{/if}
-				</div>
-			</div>
-		{/snippet}
-	</Modal>
-{/if}
\ No newline at end of file
diff --git a/packages/yakkl-wallet/src/lib/components/v1/Welcome.svelte b/packages/yakkl-wallet/src/lib/components/v1/Welcome.svelte
deleted file mode 100644
index 8b7305f..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/Welcome.svelte
+++ /dev/null
@@ -1,45 +0,0 @@
-<script lang="ts">
-	interface Props {
-		title1?: string;
-		title2?: string;
-		title3?: string;
-		value1?: string;
-		value2?: string; // Calling this function will cause the modal to be shown and the caller should bind:show to a variable and pass it in.
-	}
-
-	let {
-		title1 = 'WELCOME',
-		title2 = 'Back',
-		title3 = 'YAKKL Smart Wallet',
-		value1 = 'A smart wallet how you expect one to be!',
-		value2 = 'Simple, Secure, Fast, and Powerful'
-	}: Props = $props();
-</script>
-
-<div class="relative text-center mb-4">
-	{#if title1 || title2 || title3}
-		<h1 class="text-xl tracking-tight font-extrabold">
-			{#if title1}
-				<span class="3xl:inline">{title1}</span>
-				<br />
-			{/if}
-			{#if title2}
-				<span class="2xl:inline">{title2}</span>
-				<br />
-			{/if}
-			{#if title3}
-				<span class="lg:inline">{title3}</span>
-			{/if}
-		</h1>
-	{/if}
-	{#if value1}
-		<p class="mt-1 max-w-md mx-auto">
-			{value1}
-		</p>
-	{/if}
-	{#if value2}
-		<p class="mt-1 max-w-md mx-auto">
-			{value2}
-		</p>
-	{/if}
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/dirtyExamples.svelte.txt b/packages/yakkl-wallet/src/lib/components/v1/dirtyExamples.svelte.txt
deleted file mode 100644
index f467587..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/dirtyExamples.svelte.txt
+++ /dev/null
@@ -1,169 +0,0 @@
-<script lang="ts">
-  import { trackDirty } from './actions/formActions';
-  import { isDirty, resetDirty } from './stores/formStore';
-  
-  let formData = {
-    name: '',
-    email: ''
-  };
-  
-  function handleSubmit() {
-    // Save form data
-    resetDirty();
-  }
-  </script>
-  
-  <form on:submit|preventDefault={handleSubmit}>
-    <input type="text" bind:value={formData.name} use:trackDirty>
-    <input type="email" bind:value={formData.email} use:trackDirty>
-    <button type="submit">Save</button>
-  </form>
-
-
-
-  <script lang="ts">
-    import { onMount, onDestroy } from 'svelte';
-    import { isDirty } from './stores/formStore';
-    
-    let unsubscribe: () => void;
-    
-    function handleBeforeUnload(event: BeforeUnloadEvent) {
-      if ($isDirty) {
-        event.preventDefault();
-        event.returnValue = '';
-      }
-    }
-    
-    onMount(() => {
-      window.addEventListener('beforeunload', handleBeforeUnload);
-      unsubscribe = isDirty.subscribe(value => {
-        // You can perform additional actions here when the dirty state changes
-      });
-    });
-    
-    onDestroy(() => {
-      window.removeEventListener('beforeunload', handleBeforeUnload);
-      if (unsubscribe) unsubscribe();
-    });
-    </script>
-
-
-
-<script lang="ts">
-  import { beforeNavigate } from '$app/navigation';
-  import { isDirty } from './stores/formStore';
-  
-  beforeNavigate(({ cancel }) => {
-    if ($isDirty && !confirm('You have unsaved changes. Are you sure you want to leave?')) {
-      cancel();
-    }
-  });
-  </script>
-
-
-<script lang="ts">
-  import { isDirty } from './stores/formStore';
-  
-  function handleClose() {
-    if ($isDirty) {
-      if (confirm('You have unsaved changes. Are you sure you want to close?')) {
-        // Close the modal or navigate away
-      }
-    } else {
-      // Close the modal or navigate away
-    }
-  }
-  </script>
-  
-  <button on:click={handleClose}>Close</button>
-
-
-  // For non-formWrapped fields
-
-  <script lang="ts">
-import { trackChanges } from './actions/trackChanges';
-import { isDirty, resetDirty } from './stores/dirtyStore';
-
-let name = '';
-let isSubscribed = false;
-let preference = '';
-
-function handleSave() {
-  // Save the data
-  resetDirty();
-}
-</script>
-
-<input type="text" bind:value={name} use:trackChanges>
-
-<input type="checkbox" bind:checked={isSubscribed} use:trackChanges>
-
-<label>
-  <input type="radio" name="preference" value="option1" bind:group={preference} use:trackChanges>
-  Option 1
-</label>
-<label>
-  <input type="radio" name="preference" value="option2" bind:group={preference} use:trackChanges>
-  Option 2
-</label>
-
-<button on:click={handleSave}>Save</button>
-
-{#if $isDirty}
-  <p>You have unsaved changes!</p>
-{/if}
-
-// Show with alert:
-<script lang="ts">
-import { onMount, onDestroy } from 'svelte';
-import { isDirty } from './stores/dirtyStore';
-
-function handleBeforeUnload(event: BeforeUnloadEvent) {
-  if ($isDirty) {
-    event.preventDefault();
-    event.returnValue = '';
-  }
-}
-
-onMount(() => {
-  window.addEventListener('beforeunload', handleBeforeUnload);
-});
-
-onDestroy(() => {
-  window.removeEventListener('beforeunload', handleBeforeUnload);
-});
-</script>
-
-
-// With sveltekit - show beforeNavigate
-<script lang="ts">
-import { beforeNavigate } from '$app/navigation';
-import { isDirty } from './stores/dirtyStore';
-
-beforeNavigate(({ cancel }) => {
-  if ($isDirty && !confirm('You have unsaved changes. Are you sure you want to leave?')) {
-    cancel();
-  }
-});
-</script>
-
-
-// For closing dialogs or custom navigation
-<script lang="ts">
-import { isDirty, resetDirty } from './stores/dirtyStore';
-
-function handleClose() {
-  if ($isDirty) {
-    if (confirm('You have unsaved changes. Are you sure you want to close?')) {
-      resetDirty();
-      // Close the dialog or navigate away
-    }
-  } else {
-    // Close the dialog or navigate away
-  }
-}
-</script>
-
-<button on:click={handleClose}>Close</button>
-
-
diff --git a/packages/yakkl-wallet/src/lib/components/v1/examples/PluginSystemExample.svelte b/packages/yakkl-wallet/src/lib/components/v1/examples/PluginSystemExample.svelte
deleted file mode 100644
index 44ac78a..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/examples/PluginSystemExample.svelte
+++ /dev/null
@@ -1,321 +0,0 @@
-<!--
-  Example Component: Plugin System Usage
-
-  This component demonstrates how to use the new plugin architecture
-  in place of the old direct manager imports.
-
-  Key features:
-  - Graceful handling of UpgradeRequiredError
-  - Automatic upgrade prompts
-  - Plan-aware feature availability
-  - Error boundary patterns
--->
-<script lang="ts">
-	import { onMount, onDestroy } from 'svelte';
-	import { pluginRegistry, UpgradeRequiredError } from '$lib/plugins';
-	import type { BasicChartData, Account, NewsItem } from '$lib/plugins';
-	import LockedSectionCard from '$lib/components/LockedSectionCard.svelte';
-	import { getSettings } from '$lib/common/stores';
-	import { PlanType } from '$lib/common/types';
-
-	// Component state
-	let chartData: BasicChartData | null = null;
-	let accounts: Account[] = [];
-	let newsItems: NewsItem[] = [];
-	let loading = false;
-	let error: string | null = null;
-	let showUpgradeModal = false;
-
-	// Plugin features availability
-	let features = pluginRegistry.getFeatures();
-	let isInitialized = false;
-
-	onMount(async () => {
-		await initializePlugins();
-		await loadData();
-	});
-
-	/**
-	 * Initialize the plugin system with user's current plan
-	 */
-	async function initializePlugins() {
-		try {
-			const settings = await getSettings();
-			const planType = settings.plan?.type || PlanType.BASIC_MEMBER;
-
-			const result = await pluginRegistry.initialize(planType);
-
-			if (result.success) {
-				features = result.features;
-				isInitialized = true;
-				console.log('Plugin system initialized with plan:', result.planType);
-			} else {
-				console.warn('Plugin initialization failed:', result.errors);
-				error = 'Failed to initialize plugin system';
-			}
-		} catch (err) {
-			console.error('Plugin initialization error:', err);
-			error = 'Plugin system initialization error';
-		}
-	}
-
-	/**
-	 * Load data from all plugin managers
-	 */
-	async function loadData() {
-		if (!isInitialized) return;
-
-		loading = true;
-		error = null;
-
-		try {
-			// Load data from different plugin managers
-			await Promise.all([loadTradingData(), loadAccountData(), loadNewsData()]);
-		} catch (err) {
-			handleError(err);
-		} finally {
-			loading = false;
-		}
-	}
-
-	/**
-	 * Load trading data (basic charts are available to all users)
-	 */
-	async function loadTradingData() {
-		try {
-			chartData = await pluginRegistry.trading.getBasicChartData('ETH');
-		} catch (err) {
-			if (err instanceof UpgradeRequiredError) {
-				// This shouldn't happen for basic chart data, but handle gracefully
-				console.warn('Basic chart data requires upgrade:', err.message);
-			} else {
-				throw err;
-			}
-		}
-	}
-
-	/**
-	 * Load account data
-	 */
-	async function loadAccountData() {
-		try {
-			accounts = await pluginRegistry.accounts.getAccounts();
-		} catch (err) {
-			if (err instanceof UpgradeRequiredError) {
-				console.log('Advanced account features require upgrade');
-				// Fallback to basic account display
-			} else {
-				throw err;
-			}
-		}
-	}
-
-	/**
-	 * Load news data
-	 */
-	async function loadNewsData() {
-		try {
-			newsItems = await pluginRegistry.news.getNews(undefined, 5);
-		} catch (err) {
-			if (err instanceof UpgradeRequiredError) {
-				console.log('Advanced news features require upgrade');
-			} else {
-				throw err;
-			}
-		}
-	}
-
-	/**
-	 * Try to access a Pro feature (will show upgrade prompt if needed)
-	 */
-	async function tryAdvancedFeature() {
-		try {
-			// This will throw UpgradeRequiredError for standard users
-			const advancedData = await pluginRegistry.trading.getAdvancedChartData('ETH');
-			console.log('Advanced chart data:', advancedData);
-		} catch (err) {
-			handleError(err);
-		}
-	}
-
-	/**
-	 * Handle errors with special treatment for upgrade requirements
-	 */
-	function handleError(err: unknown) {
-		if (err instanceof UpgradeRequiredError) {
-			// Show upgrade modal
-			showUpgradeModal = true;
-			error = err.getUserMessage();
-		} else {
-			error = err instanceof Error ? err.message : 'An unknown error occurred';
-		}
-	}
-
-	/**
-	 * Handle successful upgrade (would be called from upgrade modal)
-	 */
-	async function onUpgradeComplete() {
-		showUpgradeModal = false;
-		// Reinitialize with new plan
-		await initializePlugins();
-		await loadData();
-	}
-
-	onDestroy(async () => {
-		// Clean up plugin system if needed
-		// Note: In practice, you might not dispose on every component unmount
-		// as the plugin registry is shared across the app
-	});
-</script>
-
-<div class="p-6 space-y-6">
-	<h1 class="text-2xl font-bold">Plugin System Example</h1>
-
-	{#if loading}
-		<div class="flex items-center justify-center p-8">
-			<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"></div>
-			<span class="ml-2">Loading...</span>
-		</div>
-	{/if}
-
-	{#if error}
-		<div class="bg-red-50 border border-red-200 rounded-lg p-4">
-			<p class="text-red-800">{error}</p>
-			{#if showUpgradeModal}
-				<button
-					onclick={() => (showUpgradeModal = true)}
-					class="mt-2 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"
-				>
-					Upgrade Now
-				</button>
-			{/if}
-		</div>
-	{/if}
-
-	<!-- Feature Availability Display -->
-	<div class="bg-gray-50 rounded-lg p-4">
-		<h2 class="text-lg font-semibold mb-2">Available Features</h2>
-		<div class="grid grid-cols-2 gap-2 text-sm">
-			<div class="flex items-center">
-				<span
-					class="w-3 h-3 rounded-full mr-2 {features.advancedTrading
-						? 'bg-green-500'
-						: 'bg-gray-300'}"
-				></span>
-				Advanced Trading
-			</div>
-			<div class="flex items-center">
-				<span
-					class="w-3 h-3 rounded-full mr-2 {features.unlimitedAccounts
-						? 'bg-green-500'
-						: 'bg-gray-300'}"
-				></span>
-				Unlimited Accounts
-			</div>
-			<div class="flex items-center">
-				<span
-					class="w-3 h-3 rounded-full mr-2 {features.portfolioAnalytics
-						? 'bg-green-500'
-						: 'bg-gray-300'}"
-				></span>
-				Portfolio Analytics
-			</div>
-			<div class="flex items-center">
-				<span
-					class="w-3 h-3 rounded-full mr-2 {features.realTimeNews ? 'bg-green-500' : 'bg-gray-300'}"
-				></span>
-				Real-time News
-			</div>
-		</div>
-	</div>
-
-	<!-- Trading Data Section -->
-	<div class="bg-white border rounded-lg p-4">
-		<h2 class="text-lg font-semibold mb-2">Trading Data</h2>
-		{#if chartData}
-			<div class="space-y-2">
-				<p><strong>Symbol:</strong> {chartData.symbol}</p>
-				<p><strong>Price:</strong> ${chartData.price.toFixed(2)}</p>
-				<p>
-					<strong>24h Change:</strong>
-					{chartData.change24h > 0 ? '+' : ''}{chartData.change24h.toFixed(2)}%
-				</p>
-			</div>
-
-			<!-- Pro Feature Button -->
-			<LockedSectionCard
-				title="Advanced Charts"
-				locked={!features.advancedTrading}
-				onComplete={() => (showUpgradeModal = true)}
-			>
-				<button
-					onclick={tryAdvancedFeature}
-					class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"
-					disabled={!features.advancedTrading}
-				>
-					View Advanced Charts
-				</button>
-			</LockedSectionCard>
-		{/if}
-	</div>
-
-	<!-- Account Data Section -->
-	<div class="bg-white border rounded-lg p-4">
-		<h2 class="text-lg font-semibold mb-2">Accounts ({accounts.length})</h2>
-		{#each accounts as account}
-			<div class="border-b py-2 last:border-b-0">
-				<p class="font-medium">{account.name}</p>
-				<p class="text-sm text-gray-600">{account.address}</p>
-				<p class="text-sm">Balance: {account.balance} ETH</p>
-			</div>
-		{:else}
-			<p class="text-gray-500">No accounts available</p>
-		{/each}
-	</div>
-
-	<!-- News Data Section -->
-	<div class="bg-white border rounded-lg p-4">
-		<h2 class="text-lg font-semibold mb-2">Latest News</h2>
-		{#each newsItems as item}
-			<div class="border-b py-2 last:border-b-0">
-				<h3 class="font-medium">{item.title}</h3>
-				<p class="text-sm text-gray-600">{item.summary}</p>
-				<p class="text-xs text-gray-500">
-					{item.source}  {new Date(item.publishedAt).toLocaleDateString()}
-				</p>
-			</div>
-		{:else}
-			<p class="text-gray-500">No news available</p>
-		{/each}
-	</div>
-
-	<!-- Upgrade Modal Placeholder -->
-	{#if showUpgradeModal}
-		<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[100]">
-			<div class="bg-white rounded-lg p-6 max-w-md">
-				<h2 class="text-xl font-bold mb-4">Upgrade Required</h2>
-				<p class="mb-4">
-					This feature requires a PRO plan. Upgrade now to unlock advanced functionality.
-				</p>
-				<div class="flex space-x-4">
-					<button
-						onclick={onUpgradeComplete}
-						class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"
-					>
-						Upgrade Now
-					</button>
-					<button
-						onclick={() => (showUpgradeModal = false)}
-						class="bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"
-					>
-						Cancel
-					</button>
-				</div>
-			</div>
-		</div>
-	{/if}
-</div>
-
-<style>
-	/* Component-specific styles */
-</style>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/hardware/LedgerConnector.svelte b/packages/yakkl-wallet/src/lib/components/v1/hardware/LedgerConnector.svelte
deleted file mode 100644
index 62013b6..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/hardware/LedgerConnector.svelte
+++ /dev/null
@@ -1,260 +0,0 @@
-<script lang="ts">
-	import { pluginRegistry } from '$lib/plugins/registry/PluginRegistry';
-	import type {
-		HardwareDevice,
-		HardwareAccount
-	} from '$lib/plugins/hardware/common/HardwareWalletTypes';
-	import {
-		DeviceNotConnectedError,
-		UserRejectedError,
-		WrongAppError,
-		HardwareWalletError
-	} from '$lib/plugins/hardware/common/HardwareWalletTypes';
-	import { UpgradeRequiredError } from '$lib/plugins/errors/UpgradeRequiredError';
-
-	// Svelte 5.x event props
-	interface Props {
-		onconnected?: (event: { device: HardwareDevice; accounts: HardwareAccount[] }) => void;
-		onerror?: (event: { error: Error }) => void;
-	}
-
-	let { onconnected, onerror }: Props = $props();
-
-	let isConnecting = $state(false);
-	let isDiscovering = $state(false);
-	let errorMessage = $state('');
-	let connectedDevice = $state<HardwareDevice | null>(null);
-	let discoveredAccounts = $state<HardwareAccount[]>([]);
-	let isSupported = $state(true);
-
-	// Check browser support on component mount
-	$effect(() => {
-		checkSupport();
-	});
-
-	async function checkSupport() {
-		try {
-			isSupported = await pluginRegistry.hardwareWallet.isSupported();
-		} catch (error) {
-			isSupported = false;
-		}
-	}
-
-	async function connectLedger() {
-		if (!isSupported) return;
-
-		isConnecting = true;
-		errorMessage = '';
-
-		try {
-			// Connect to device
-			const device = await pluginRegistry.hardwareWallet.connect();
-			connectedDevice = device;
-
-			// Discover accounts
-			isDiscovering = true;
-			const accounts = await pluginRegistry.hardwareWallet.discoverAccounts(device.id, {
-				count: 3,
-				showOnDevice: false
-			});
-
-			discoveredAccounts = accounts;
-
-			onconnected?.({ device, accounts });
-		} catch (error) {
-			console.error('Ledger connection error:', error);
-
-			if (error instanceof UserRejectedError) {
-				errorMessage =
-					'Connection cancelled. Please try again and approve the connection on your device.';
-			} else if (error instanceof WrongAppError) {
-				errorMessage = 'Please open the Ethereum app on your Ledger device and try again.';
-			} else if (error instanceof HardwareWalletError && error.code === 'BROWSER_NOT_SUPPORTED') {
-				errorMessage =
-					'Your browser does not support hardware wallets. Please use Chrome, Edge, or another Chromium-based browser.';
-			} else if (error instanceof HardwareWalletError && error.code === 'USER_CANCELLED') {
-				errorMessage = 'Connection cancelled. Please try again.';
-			} else if (error instanceof HardwareWalletError && error.code === 'ACCESS_DENIED') {
-				errorMessage = 'Access denied to device. Please try again and grant permission.';
-			} else if (error instanceof UpgradeRequiredError) {
-				errorMessage = error.message;
-			} else {
-				errorMessage = `Connection failed: ${error instanceof Error ? error.message : 'Unknown error'}`;
-			}
-
-			onerror?.({ error: error instanceof Error ? error : new Error(String(error)) });
-		} finally {
-			isConnecting = false;
-			isDiscovering = false;
-		}
-	}
-
-	async function disconnect() {
-		if (connectedDevice) {
-			try {
-				await pluginRegistry.hardwareWallet.disconnect(connectedDevice.id);
-				connectedDevice = null;
-				discoveredAccounts = [];
-				errorMessage = '';
-			} catch (error) {
-				console.error('Disconnect error:', error);
-			}
-		}
-	}
-</script>
-
-<div class="ledger-connector">
-	{#if !isSupported}
-		<div class="alert alert-warning">
-			<svg
-				xmlns="http://www.w3.org/2000/svg"
-				class="stroke-current shrink-0 h-6 w-6"
-				fill="none"
-				viewBox="0 0 24 24"
-			>
-				<path
-					stroke-linecap="round"
-					stroke-linejoin="round"
-					stroke-width="2"
-					d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.98-.833-2.75 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"
-				/>
-			</svg>
-			<span
-				>Hardware wallets are not supported in this browser. Please use Chrome, Edge, or another
-				Chromium-based browser.</span
-			>
-		</div>
-	{:else if !connectedDevice}
-		<div class="card bg-base-100 shadow-lg">
-			<div class="card-body">
-				<h3 class="card-title flex items-center gap-2">
-					<svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
-						<path
-							d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"
-						/>
-					</svg>
-					Connect Ledger Hardware Wallet
-				</h3>
-
-				<p class="text-base-content/70">
-					Connect your Ledger device to securely manage your accounts and sign transactions.
-				</p>
-
-				<div class="alert alert-info mt-4">
-					<svg
-						xmlns="http://www.w3.org/2000/svg"
-						fill="none"
-						viewBox="0 0 24 24"
-						class="stroke-current shrink-0 w-6 h-6"
-					>
-						<path
-							stroke-linecap="round"
-							stroke-linejoin="round"
-							stroke-width="2"
-							d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
-						></path>
-					</svg>
-					<div>
-						<h4 class="font-bold">Before connecting:</h4>
-						<ul class="list-disc list-inside mt-1">
-							<li>Unlock your Ledger device</li>
-							<li>Open the Ethereum app</li>
-							<li>Ensure "Blind signing" is enabled in settings (for advanced features)</li>
-						</ul>
-					</div>
-				</div>
-
-				{#if errorMessage}
-					<div class="alert alert-error mt-4">
-						<svg
-							xmlns="http://www.w3.org/2000/svg"
-							class="stroke-current shrink-0 h-6 w-6"
-							fill="none"
-							viewBox="0 0 24 24"
-						>
-							<path
-								stroke-linecap="round"
-								stroke-linejoin="round"
-								stroke-width="2"
-								d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"
-							/>
-						</svg>
-						<span>{errorMessage}</span>
-					</div>
-				{/if}
-
-				<div class="card-actions justify-end mt-6">
-					<button
-						class="btn btn-primary"
-						class:loading={isConnecting}
-						disabled={isConnecting || !isSupported}
-						onclick={connectLedger}
-					>
-						{#if isConnecting}
-							{isDiscovering ? 'Discovering Accounts...' : 'Connecting...'}
-						{:else}
-							Connect Ledger
-						{/if}
-					</button>
-				</div>
-			</div>
-		</div>
-	{:else}
-		<div class="card bg-base-100 shadow-lg">
-			<div class="card-body">
-				<h3 class="card-title flex items-center gap-2 text-success">
-					<svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
-						<path
-							d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"
-						/>
-					</svg>
-					{connectedDevice.model} Connected
-				</h3>
-
-				<div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
-					<div class="stat bg-base-200 rounded-lg">
-						<div class="stat-title">Device</div>
-						<div class="stat-value text-sm">{connectedDevice.model}</div>
-						<div class="stat-desc">ID: {connectedDevice.id.slice(0, 8)}...</div>
-					</div>
-
-					<div class="stat bg-base-200 rounded-lg">
-						<div class="stat-title">Accounts</div>
-						<div class="stat-value text-sm">{discoveredAccounts.length}</div>
-						<div class="stat-desc">Discovered accounts</div>
-					</div>
-				</div>
-
-				{#if discoveredAccounts.length > 0}
-					<div class="mt-6">
-						<h4 class="font-semibold mb-3">Discovered Accounts:</h4>
-						<div class="space-y-2">
-							{#each discoveredAccounts as account, index}
-								<div class="flex items-center justify-between p-3 bg-base-200 rounded-lg">
-									<div>
-										<div class="font-mono text-sm">{account.address}</div>
-										<div class="text-xs text-base-content/70">
-											Account {index + 1}  {account.derivationPath}
-										</div>
-									</div>
-									<div class="badge badge-outline">Hardware</div>
-								</div>
-							{/each}
-						</div>
-					</div>
-				{/if}
-
-				<div class="card-actions justify-between mt-6">
-					<button class="btn btn-ghost" onclick={disconnect}> Disconnect </button>
-				</div>
-			</div>
-		</div>
-	{/if}
-</div>
-
-<style>
-	.ledger-connector {
-		max-width: 600px;
-		margin: 0 auto;
-	}
-</style>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/helpers.ts b/packages/yakkl-wallet/src/lib/components/v1/helpers.ts
deleted file mode 100644
index cf8b8d6..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/helpers.ts
+++ /dev/null
@@ -1,54 +0,0 @@
-export function color(opacity: string = '1') {
-	return () => `hsl(var(--primary) / ${opacity})`;
-}
-
-export type Data = { average: number; today: number; id: number };
-
-/**
- * If you want to set color for multiple lines at once, you'll have to define a colors array in your component and reference colors by index in the accessor function.
- * For example, in this instance below, we know that we only have 2 lines, so we can hardcode the colors array to return 2 colors for the 2 indexes i.e. 2 lines.
- */
-export function lineColors<T>(_: T, i: number) {
-	return ['hsl(var(--primary))', 'hsl(var(--primary) / 0.25)'][i];
-}
-
-export function scatterPointColors<T>(_: T, i: number) {
-	return ['hsl(0, 0%, 100%)', 'hsl(var(--primary) / 0.25)'][i];
-}
-
-export function scatterPointStrokeColors<T>(_: T, i: number) {
-	return ['hsl(var(--primary))', 'hsl(var(--primary) / 0.25)'][i];
-}
-
-export function crosshairPointColors<T>(_: T, i: number) {
-	return ['hsl(var(--primary))', 'hsl(var(--primary) / 0.25)'][i];
-}
-
-export function crosshairStrokeWidths<T>(_: T, i: number) {
-	return [2, 1][i];
-}
-
-export function tooltipTemplate(d: Data) {
-	return `
-<div class="rounded-lg border bg-background p-2 shadow-sm">
-  <div class="grid grid-cols-2 gap-2">
-    <div class="flex flex-col">
-      <span class="text-[0.70rem] uppercase text-muted-foreground">
-        Average
-      </span>
-      <span class="font-bold text-muted-foreground">
-        ${d.average}
-      </span>
-    </div>
-    <div class="flex flex-col">
-      <span class="text-[0.70rem] uppercase text-muted-foreground">
-        Today
-      </span>
-      <span class="font-bold text-foreground">
-        ${d.today}
-      </span>
-    </div>
-  </div>
-</div>
-`;
-}
diff --git a/packages/yakkl-wallet/src/lib/components/v1/icons/BaseIcon.svelte b/packages/yakkl-wallet/src/lib/components/v1/icons/BaseIcon.svelte
deleted file mode 100644
index d155c69..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/icons/BaseIcon.svelte
+++ /dev/null
@@ -1,17 +0,0 @@
-<script lang="ts">
-	interface Props {
-		className?: string;
-	}
-
-	let { className = 'h-6 w-6 rounded-full' }: Props = $props();
-</script>
-
-<div>
-	<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" class={className}>
-		<circle cx="512" cy="512" r="512" fill="#0052FF" />
-		<path
-			d="M512 704c53 0 96-43 96-96s-43-96-96-96-96 43-96 96 43 96 96 96zm0-192c53 0 96-43 96-96s-43-96-96-96-96 43-96 96 43 96 96 96z"
-			fill="#fff"
-		/>
-	</svg>
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/icons/BitcoinIcon.svelte b/packages/yakkl-wallet/src/lib/components/v1/icons/BitcoinIcon.svelte
deleted file mode 100644
index fbd37bf..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/icons/BitcoinIcon.svelte
+++ /dev/null
@@ -1,17 +0,0 @@
-<script lang="ts">
-	interface Props {
-		className?: string;
-	}
-
-	let { className = 'h-6 w-6 rounded-full' }: Props = $props();
-</script>
-
-<div>
-	<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" class={className}>
-		<circle cx="16" cy="16" r="16" fill="#f7931a" />
-		<path
-			d="M22.26 13.258c.316-2.113-1.292-3.246-3.496-3.998l.714-2.862-1.743-.435-.695 2.786c-.46-.115-.931-.225-1.402-.333l.7-2.808-1.742-.434-.714 2.862a56.346 56.346 0 00-1.12-.272l.002-.011-2.407-.599-.464 1.89s1.292.296 1.263.313c.705.176.832.644.812 1.015l-1.263 5.076c.049.012.111.03.182.059l-.186-.046L8.95 21.42c-.085.215-.3.54-.785.417.017.025-1.263-.313-1.263-.313l-.867 2.011 2.27.566c.422.105.835.216 1.247.324l-.721 2.894 1.742.434.714-2.862c.477.129.943.248 1.402.364l-.712 2.85 1.742.434.721-2.891c2.974.563 5.208.336 6.145-2.359.758-2.17-.038-3.431-1.601-4.253 1.14-.263 2.003-1.01 2.232-2.559zM19.074 20.11c-.514 2.17-3.994.997-5.13.704l.914-3.664c1.136.284 4.77.844 4.216 2.96zm.514-5.28c-.469 1.876-3.354.923-4.29.688l.857-3.43c.937.234 3.923.669 3.433 2.742z"
-			fill="#fff"
-		/>
-	</svg>
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/icons/BlockchainIcon.svelte b/packages/yakkl-wallet/src/lib/components/v1/icons/BlockchainIcon.svelte
deleted file mode 100644
index fde29f8..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/icons/BlockchainIcon.svelte
+++ /dev/null
@@ -1,15 +0,0 @@
-<script lang="ts">
-	import { SvelteComponent } from 'svelte';
-
-	interface Props {
-		icon?: typeof SvelteComponent | null;
-		className?: string;
-	}
-
-	let { icon = null, className = '' }: Props = $props();
-</script>
-
-{#if icon}
-	{@const SvelteComponent_1 = icon}
-	<SvelteComponent_1 class={className} />
-{/if}
diff --git a/packages/yakkl-wallet/src/lib/components/v1/icons/BookmarkIcon.svelte b/packages/yakkl-wallet/src/lib/components/v1/icons/BookmarkIcon.svelte
deleted file mode 100644
index 7ba40b4..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/icons/BookmarkIcon.svelte
+++ /dev/null
@@ -1,16 +0,0 @@
-<!-- File: src/lib/components/icons/BookmarkIcon.svelte -->
-<script lang="ts">
-	interface Props {
-		className?: string;
-	}
-
-	let { className = 'w-6 h-6 fill-none stroke-current text-gray-400' }: Props = $props();
-</script>
-
-<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="1.5" class={className}>
-	<path
-		stroke-linecap="round"
-		stroke-linejoin="round"
-		d="M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0 1 11.186 0Z"
-	/>
-</svg>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/icons/CalcIcon.svelte b/packages/yakkl-wallet/src/lib/components/v1/icons/CalcIcon.svelte
deleted file mode 100644
index d080a3d..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/icons/CalcIcon.svelte
+++ /dev/null
@@ -1,20 +0,0 @@
-<script lang="ts">
-	let { className = 'size-6' } = $props<{
-		className?: string;
-	}>();
-</script>
-
-<svg
-	xmlns="http://www.w3.org/2000/svg"
-	fill="none"
-	viewBox="0 0 24 24"
-	stroke-width="1.5"
-	stroke="currentColor"
-	class={className}
->
-	<path
-		stroke-linecap="round"
-		stroke-linejoin="round"
-		d="M15.75 15.75V18m-7.5-6.75h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V13.5Zm0 2.25h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V18Zm2.498-6.75h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V13.5Zm0 2.25h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V18Zm2.504-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5Zm0 2.25h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V18Zm2.498-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5ZM8.25 6h7.5v2.25h-7.5V6ZM12 2.25c-1.892 0-3.758.11-5.593.322C5.307 2.7 4.5 3.65 4.5 4.757V19.5a2.25 2.25 0 0 0 2.25 2.25h10.5a2.25 2.25 0 0 0 2.25-2.25V4.757c0-1.108-.806-2.057-1.907-2.185A48.507 48.507 0 0 0 12 2.25Z"
-	/>
-</svg>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/icons/ChevronDownIcon.svelte b/packages/yakkl-wallet/src/lib/components/v1/icons/ChevronDownIcon.svelte
deleted file mode 100644
index 60ffd25..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/icons/ChevronDownIcon.svelte
+++ /dev/null
@@ -1,16 +0,0 @@
-<script lang="ts">
-	const { size = 24, stroke = 'currentColor', className = '' } = $props();
-</script>
-
-<svg
-	xmlns="http://www.w3.org/2000/svg"
-	fill="none"
-	viewBox="0 0 24 24"
-	stroke-width="1.5"
-	{stroke}
-	width={size}
-	height={size}
-	class={className}
->
-	<path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
-</svg>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/icons/ChevronUpIcon.svelte b/packages/yakkl-wallet/src/lib/components/v1/icons/ChevronUpIcon.svelte
deleted file mode 100644
index 25618f9..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/icons/ChevronUpIcon.svelte
+++ /dev/null
@@ -1,19 +0,0 @@
-<!-- File: src/lib/components/icons/ChevronUpIcon.svelte -->
-<script lang="ts">
-	interface Props {
-		className?: string;
-	}
-
-	let { className = '' }: Props = $props();
-</script>
-
-<svg
-	xmlns="http://www.w3.org/2000/svg"
-	fill="none"
-	viewBox="0 0 24 24"
-	stroke-width="1.5"
-	stroke="currentColor"
-	class="size-6"
->
-	<path stroke-linecap="round" stroke-linejoin="round" d="m4.5 15.75 7.5-7.5 7.5 7.5" />
-</svg>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/icons/EthereumIcon.svelte b/packages/yakkl-wallet/src/lib/components/v1/icons/EthereumIcon.svelte
deleted file mode 100644
index 5669961..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/icons/EthereumIcon.svelte
+++ /dev/null
@@ -1,20 +0,0 @@
-<script lang="ts">
-	interface Props {
-		className?: string;
-	}
-
-	let { className = 'h-6 w-6 rounded-full' }: Props = $props();
-</script>
-
-<div>
-	<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 417" class={className}>
-		<g fill="none">
-			<polygon fill="#343434" points="127.9,0 127.9,134.6 255.8,209.7" />
-			<polygon fill="#8C8C8C" points="127.9,0 0,209.7 127.9,134.6" />
-			<polygon fill="#3C3C3B" points="127.9,277.4 127.9,416.9 255.9,231.1" />
-			<polygon fill="#8C8C8C" points="127.9,416.9 127.9,277.4 0,231.1" />
-			<polygon fill="#141414" points="127.9,263.1 255.8,209.7 127.9,134.6" />
-			<polygon fill="#393939" points="0,209.7 127.9,263.1 127.9,134.6" />
-		</g>
-	</svg>
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/icons/EyeIcon.svelte b/packages/yakkl-wallet/src/lib/components/v1/icons/EyeIcon.svelte
deleted file mode 100644
index d5ba1c8..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/icons/EyeIcon.svelte
+++ /dev/null
@@ -1,65 +0,0 @@
-<script lang="ts">
-	import { visibilityStore } from '$lib/common/stores/visibilityStore';
-
-	const { className = 'ml-2' } = $props<{
-		className?: string;
-	}>();
-
-	let visible = $state(true); // Showing the value by default
-
-	// Subscribe to the store
-	$effect(() => {
-		const unsubscribe = visibilityStore.subscribe((value) => {
-			visible = value;
-		});
-
-		return unsubscribe;
-	});
-
-	function toggleVisibility() {
-		visible = !visible;
-		visibilityStore.set(visible);
-	}
-</script>
-
-{#if !visible}
-	<!-- svelte-ignore a11y_click_events_have_key_events -->
-	<!-- svelte-ignore a11y_no_static_element_interactions -->
-	<!-- svelte-ignore event_directive_deprecated -->
-	<svg
-		on:click={toggleVisibility}
-		xmlns="http://www.w3.org/2000/svg"
-		viewBox="0 0 24 24"
-		fill="currentColor"
-		class="w-6 h-6 cursor-pointer {className}"
-	>
-		<!-- fill-gray-200 -->
-		<path
-			d="M3.53 2.47a.75.75 0 00-1.06 1.06l18 18a.75.75 0 101.06-1.06l-18-18zM22.676 12.553a11.249 11.249 0 01-2.631 4.31l-3.099-3.099a5.25 5.25 0 00-6.71-6.71L7.759 4.577a11.217 11.217 0 014.242-.827c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113z"
-		/>
-		<path
-			d="M15.75 12c0 .18-.013.357-.037.53l-4.244-4.243A3.75 3.75 0 0115.75 12zM12.53 15.713l-4.243-4.244a3.75 3.75 0 004.243 4.243z"
-		/>
-		<path
-			d="M6.75 12c0-.619.107-1.213.304-1.764l-3.1-3.1a11.25 11.25 0 00-2.63 4.31c-.12.362-.12.752 0 1.114 1.489 4.467 5.704 7.69 10.675 7.69 1.5 0 2.933-.294 4.242-.827l-2.477-2.477A5.25 5.25 0 016.75 12z"
-		/>
-	</svg>
-{:else}
-	<!-- svelte-ignore a11y_click_events_have_key_events -->
-	<!-- svelte-ignore a11y_no_static_element_interactions -->
-	<!-- svelte-ignore event_directive_deprecated -->
-	<svg
-		on:click={toggleVisibility}
-		xmlns="http://www.w3.org/2000/svg"
-		viewBox="0 0 24 24"
-		fill="currentColor"
-		class="w-6 h-6 fill-gray-200 cursor-pointer {className}"
-	>
-		<path d="M12 15a3 3 0 100-6 3 3 0 000 6z" />
-		<path
-			fill-rule="evenodd"
-			d="M1.323 11.447C2.811 6.976 7.028 3.75 12.001 3.75c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113-1.487 4.471-5.705 7.697-10.677 7.697-4.97 0-9.186-3.223-10.675-7.69a1.762 1.762 0 010-1.113zM17.25 12a5.25 5.25 0 11-10.5 0 5.25 5.25 0 0110.5 0z"
-			clip-rule="evenodd"
-		/>
-	</svg>
-{/if}
diff --git a/packages/yakkl-wallet/src/lib/components/v1/icons/FiatIcon.svelte b/packages/yakkl-wallet/src/lib/components/v1/icons/FiatIcon.svelte
deleted file mode 100644
index 558e52a..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/icons/FiatIcon.svelte
+++ /dev/null
@@ -1,20 +0,0 @@
-<script lang="ts">
-	let { className = 'size-6' } = $props<{
-		className?: string;
-	}>();
-</script>
-
-<svg
-	xmlns="http://www.w3.org/2000/svg"
-	fill="none"
-	viewBox="0 0 24 24"
-	stroke-width="1.5"
-	stroke="currentColor"
-	class={className}
->
-	<path
-		stroke-linecap="round"
-		stroke-linejoin="round"
-		d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m3.75 9v7.5m2.25-6.466a9.016 9.016 0 0 0-3.461-.203c-.536.072-.974.478-1.021 1.017a4.559 4.559 0 0 0-.018.402c0 .464.336.844.775.994l2.95 1.012c.44.15.775.53.775.994 0 .136-.006.27-.018.402-.047.539-.485.945-1.021 1.017a9.077 9.077 0 0 1-3.461-.203M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"
-	/>
-</svg>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/icons/GraduationCapButton.svelte b/packages/yakkl-wallet/src/lib/components/v1/icons/GraduationCapButton.svelte
deleted file mode 100644
index 6a7be11..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/icons/GraduationCapButton.svelte
+++ /dev/null
@@ -1,24 +0,0 @@
-<script lang="ts">
-	import { handleOpenInTab } from '$lib/utilities';
-
-	function handleUniversity() {
-		handleOpenInTab(
-			'https://yakkl.com/university/support?utm_source=yakkl&utm_medium=extension&utm_campaign=extension&utm_content=university&utm_term=extension'
-		);
-	}
-</script>
-
-<button
-	class="flex items-center justify-center w-10 h-10 rounded-full backdrop-blur-sm bg-white/20 dark:bg-zinc-800/30 hover:bg-white/30 dark:hover:bg-zinc-700/50 transition"
-	aria-label="YAKKL University"
-	onclick={() => handleUniversity()}
->
-	<svg
-		xmlns="http://www.w3.org/2000/svg"
-		fill="currentColor"
-		viewBox="0 0 24 24"
-		class="w-5 h-5 text-white dark:text-purple-400"
-	>
-		<path d="M12 2L1 7l11 5 9-4.09V17h2V7L12 2zm-1 14.74l-5-2.27v2l5 2.27 5-2.27v-2l-5 2.27z" />
-	</svg>
-</button>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/icons/LockIcon.svelte b/packages/yakkl-wallet/src/lib/components/v1/icons/LockIcon.svelte
deleted file mode 100644
index c3b2a99..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/icons/LockIcon.svelte
+++ /dev/null
@@ -1,20 +0,0 @@
-<script lang="ts">
-	const { size = 24, stroke = 'currentColor', className = '' } = $props();
-</script>
-
-<svg
-	xmlns="http://www.w3.org/2000/svg"
-	fill="none"
-	viewBox="0 0 24 24"
-	stroke-width="1.5"
-	{stroke}
-	width={size}
-	height={size}
-	class={className}
->
-	<path
-		stroke-linecap="round"
-		stroke-linejoin="round"
-		d="M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"
-	/>
-</svg>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/icons/NewsIcon.svelte b/packages/yakkl-wallet/src/lib/components/v1/icons/NewsIcon.svelte
deleted file mode 100644
index 35c7e64..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/icons/NewsIcon.svelte
+++ /dev/null
@@ -1,24 +0,0 @@
-<!-- File: src/lib/components/icons/NewsIcon.svelte -->
-<script lang="ts">
-	let { className = '' } = $props<{
-		className?: string;
-	}>();
-</script>
-
-<svg
-	xmlns="http://www.w3.org/2000/svg"
-	viewBox="0 0 24 24"
-	fill="none"
-	stroke="currentColor"
-	stroke-width="2"
-	stroke-linecap="round"
-	stroke-linejoin="round"
-	class={className}
->
-	<path
-		d="M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2"
-	/>
-	<path d="M18 14h-8" />
-	<path d="M18 18h-8" />
-	<path d="M18 10h-8" />
-</svg>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/icons/OptimismIcon.svelte b/packages/yakkl-wallet/src/lib/components/v1/icons/OptimismIcon.svelte
deleted file mode 100644
index 0d5410f..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/icons/OptimismIcon.svelte
+++ /dev/null
@@ -1,17 +0,0 @@
-<script lang="ts">
-	interface Props {
-		className?: string;
-	}
-
-	let { className = 'h-6 w-6 rounded-full' }: Props = $props();
-</script>
-
-<div>
-	<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 1200" class={className}>
-		<circle cx="600" cy="600" r="600" fill="#FF0420" />
-		<path
-			d="M498 787h105l63-326h-106l-62 326zm7-160c7-38 26-56 59-56h1c31 0 44 19 37 55l-13 70c-7 38-26 57-59 57h-1c-31 0-44-19-37-55l13-71zm286 24c15-75-30-126-116-126h-60l-39 206h61c84 0 138-46 154-123zm-155 60l12-65c9-47 35-61 64-61h2c32 0 55 15 47 61l-11 65c-9 48-35 62-65 62h-1c-32 0-55-15-48-62z"
-			fill="#fff"
-		/>
-	</svg>
-</div>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/icons/PinIcon.svelte b/packages/yakkl-wallet/src/lib/components/v1/icons/PinIcon.svelte
deleted file mode 100644
index c187e87..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/icons/PinIcon.svelte
+++ /dev/null
@@ -1,33 +0,0 @@
-<!-- File: src/lib/components/icons/PinIcon.svelte -->
-<script lang="ts">
-	interface Props {
-		className?: string;
-	}
-
-	let { className = 'w-6 h-6' }: Props = $props();
-</script>
-
-<!-- NOT GOOD! -->
-<!-- <svg
-  xmlns="http://www.w3.org/2000/svg"
-  viewBox="0 0 24 24"
-  fill="currentColor"
-  stroke="currentColor"
-  stroke-width="2"
-  stroke-linecap="round"
-  stroke-linejoin="round"
-  class={className}>
-  <path d="M31.997334 1023.957337a31.698692 31.698692 0 0 1-22.611449-9.385885c-6.058162-6.015499-9.385885-14.078827-9.385885-22.611449s3.327723-16.59595 9.385885-22.611449l318.864094-318.864094-152.520623-152.520624a95.906674 95.906674 0 0 1-25.08591-92.15232A95.309391 95.309391 0 0 1 194.970419 347.192401l0.895925-0.511958A353.463878 353.463878 0 0 1 372.022331 299.281727c20.136989 0 40.359303 1.749188 60.282977 5.204899l165.404883-259.946338A95.224065 95.224065 0 0 1 678.684776 0.085326c25.64053 0 49.745188 9.983168 67.877011 28.072328l249.195233 249.195233a95.224065 95.224065 0 0 1 25.896509 88.739272 95.138738 95.138738 0 0 1-42.151154 60.154987l-259.989001 165.447546a352.226648 352.226648 0 0 1-42.663112 237.292226 95.394717 95.394717 0 0 1-82.851762 47.526706 95.522706 95.522706 0 0 1-67.962336-28.200317l-152.60595-152.605949-318.821431 318.906757a31.912007 31.912007 0 0 1-22.611449 9.343222zM372.022331 363.276394c-50.641113 0-100.684943 13.566869-144.7986 39.207399a31.570702 31.570702 0 0 0-14.67611 19.497042 31.698692 31.698692 0 0 0 8.36197 30.674777l350.434797 350.434797c6.058162 6.058162 14.12149 9.385885 22.696775 9.385885a31.698692 31.698692 0 0 0 27.56037-15.785352 287.421382 287.421382 0 0 0 31.058745-212.67561 31.997334 31.997334 0 0 1 13.908175-34.471794l278.590117-177.265228a31.570702 31.570702 0 0 0 14.036164-20.051662 31.698692 31.698692 0 0 0-8.617949-29.565536L701.296225 73.380552a31.912007 31.912007 0 0 0-49.617198 5.418215l-177.307891 278.590117a31.826681 31.826681 0 0 1-34.471794 13.908175 293.778185 293.778185 0 0 0-67.877011-8.020665z"  />
-</svg> -->
-
-<svg
-	class={className}
-	fill="currentColor"
-	stroke-width="2"
-	viewBox="0 0 1024 1024"
-	version="1.1"
-	xmlns="http://www.w3.org/2000/svg"
-	><path
-		d="M21.290667 1024.042667a21.333333 21.333333 0 0 1-15.104-36.394667l386.56-386.602667-146.730667-146.730666a64.042667 64.042667 0 0 1 0-90.496l21.333333-21.333334a63.573333 63.573333 0 0 1 45.269334-18.730666h135.338666a21.205333 21.205333 0 0 0 15.061334-6.229334l179.498666-179.498666a8.789333 8.789333 0 0 0 0-12.501334 51.626667 51.626667 0 0 1 0-72.832l33.834667-33.834666a63.488 63.488 0 0 1 45.269333-18.688c17.109333 0 33.194667 6.656 45.269334 18.688l238.336 238.336a64.042667 64.042667 0 0 1 0 90.496l-33.834667 33.834666a51.114667 51.114667 0 0 1-36.394667 15.061334c-13.781333 0-26.709333-5.333333-36.437333-15.061334a8.746667 8.746667 0 0 0-6.229333-2.56 8.746667 8.746667 0 0 0-6.229334 2.56l-179.498666 179.498667a21.248 21.248 0 0 0-6.229334 15.104v135.338667c0 17.109333-6.656 33.152-18.730666 45.269333l-21.333334 21.333333c-12.074667 12.074667-28.117333 18.688-45.269333 18.688s-33.194667-6.656-45.269333-18.688l-146.730667-146.730666-386.56 386.602666a22.101333 22.101333 0 0 1-15.189333 6.101334zM312.618667 366.378667a21.376 21.376 0 0 0-15.104 6.229333l-21.333334 21.333333a21.333333 21.333333 0 0 0 0 30.165334l323.669334 323.669333a21.333333 21.333333 0 0 0 30.208 0l21.333333-21.333333a21.504 21.504 0 0 0 6.229333-15.104V576c0-17.109333 6.656-33.152 18.730667-45.269333l179.498667-179.498667a51.2 51.2 0 0 1 36.394666-15.104 51.2 51.2 0 0 1 36.437334 15.104c1.706667 1.706667 3.882667 2.602667 6.272 2.602667a8.533333 8.533333 0 0 0 6.229333-2.602667l33.834667-33.834667a21.333333 21.333333 0 0 0 0-30.165333l-238.336-238.336a21.333333 21.333333 0 0 0-30.208 0l-33.834667 33.834667a8.832 8.832 0 0 0 0 12.501333c20.053333 20.053333 20.096 52.736 0.042667 72.832L493.226667 347.648a63.573333 63.573333 0 0 1-45.226667 18.730667H312.618667z"
-	/></svg
->
diff --git a/packages/yakkl-wallet/src/lib/components/v1/icons/PodcastIcon.svelte b/packages/yakkl-wallet/src/lib/components/v1/icons/PodcastIcon.svelte
deleted file mode 100644
index f8ebaf7..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/icons/PodcastIcon.svelte
+++ /dev/null
@@ -1,22 +0,0 @@
-<!-- File: src/lib/components/icons/PodcastIcon.svelte -->
-<script lang="ts">
-	let { className = '' } = $props<{
-		className?: string;
-	}>();
-</script>
-
-<svg
-	xmlns="http://www.w3.org/2000/svg"
-	viewBox="0 0 24 24"
-	fill="none"
-	stroke="currentColor"
-	stroke-width="2"
-	stroke-linecap="round"
-	stroke-linejoin="round"
-	class={className}
->
-	<circle cx="12" cy="11" r="1" />
-	<path d="M11 17a1 1 0 0 1 2 0c0 .5-.34 3-.5 4.5a.5.5 0 0 1-1 0c-.16-1.5-.5-4-.5-4.5Z" />
-	<path d="M8 14a5 5 0 1 1 8 0" />
-	<path d="M17 18.5a9 9 0 1 0-10 0" />
-</svg>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/icons/PrinterIcon.svelte b/packages/yakkl-wallet/src/lib/components/v1/icons/PrinterIcon.svelte
deleted file mode 100644
index 479c29c..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/icons/PrinterIcon.svelte
+++ /dev/null
@@ -1,23 +0,0 @@
-<!-- File: src/lib/components/icons/PrinterIcon.svelte -->
-<script lang="ts">
-	interface Props {
-		className?: string;
-	}
-
-	let { className = 'w-6 h-6' }: Props = $props();
-</script>
-
-<svg
-	xmlns="http://www.w3.org/2000/svg"
-	fill="none"
-	viewBox="0 0 24 24"
-	stroke-width="1.5"
-	stroke="currentColor"
-	class={className}
->
-	<path
-		stroke-linecap="round"
-		stroke-linejoin="round"
-		d="M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z"
-	/>
-</svg>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/icons/RefreshIcon.svelte b/packages/yakkl-wallet/src/lib/components/v1/icons/RefreshIcon.svelte
deleted file mode 100644
index cc56e3f..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/icons/RefreshIcon.svelte
+++ /dev/null
@@ -1,23 +0,0 @@
-<!-- File: src/lib/components/icons/RefreshIcon.svelte -->
-<script lang="ts">
-	interface Props {
-		className?: string;
-	}
-
-	let { className = 'w-6 h-6' }: Props = $props();
-</script>
-
-<svg
-	xmlns="http://www.w3.org/2000/svg"
-	fill="none"
-	viewBox="0 0 24 24"
-	stroke-width="1.5"
-	stroke="currentColor"
-	class={className}
->
-	<path
-		stroke-linecap="round"
-		stroke-linejoin="round"
-		d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"
-	/>
-</svg>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/icons/ResizeIcon.svelte b/packages/yakkl-wallet/src/lib/components/v1/icons/ResizeIcon.svelte
deleted file mode 100644
index 22e114a..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/icons/ResizeIcon.svelte
+++ /dev/null
@@ -1,24 +0,0 @@
-<!-- File: src/lib/components/icons/ResizeIcon.svelte -->
-<script lang="ts">
-	interface Props {
-		className?: string;
-	}
-
-	let { className = '' }: Props = $props();
-</script>
-
-<svg
-	xmlns="http://www.w3.org/2000/svg"
-	viewBox="0 0 24 24"
-	fill="none"
-	stroke="currentColor"
-	stroke-width="2"
-	stroke-linecap="round"
-	stroke-linejoin="round"
-	class={className}
->
-	<path d="M21 3L3 21" />
-	<path d="M21 21L3 3" />
-	<path d="M21 15L15 21" />
-	<path d="M9 3L3 9" />
-</svg>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/icons/SearchIcon.svelte b/packages/yakkl-wallet/src/lib/components/v1/icons/SearchIcon.svelte
deleted file mode 100644
index 3d81653..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/icons/SearchIcon.svelte
+++ /dev/null
@@ -1,22 +0,0 @@
-<script lang="ts">
-	interface Props {
-		className?: string;
-	}
-
-	let { className = 'w-6 h-6' }: Props = $props();
-</script>
-
-<svg
-	xmlns="http://www.w3.org/2000/svg"
-	fill="none"
-	viewBox="0 0 24 24"
-	stroke-width="1.5"
-	stroke="currentColor"
-	class={className}
->
-	<path
-		stroke-linecap="round"
-		stroke-linejoin="round"
-		d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"
-	/>
-</svg>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/icons/SortIcon.svelte b/packages/yakkl-wallet/src/lib/components/v1/icons/SortIcon.svelte
deleted file mode 100644
index eb12d42..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/icons/SortIcon.svelte
+++ /dev/null
@@ -1,23 +0,0 @@
-<!-- File: src/lib/components/icons/SortIcon.svelte -->
-<script lang="ts">
-	interface Props {
-		className?: string;
-	}
-
-	let { className = 'w-6 h-6' }: Props = $props();
-</script>
-
-<svg
-	xmlns="http://www.w3.org/2000/svg"
-	fill="none"
-	viewBox="0 0 24 24"
-	stroke-width="1.5"
-	stroke="currentColor"
-	class={className}
->
-	<path
-		stroke-linecap="round"
-		stroke-linejoin="round"
-		d="M3 7.5 7.5 3m0 0L12 7.5M7.5 3v13.5m13.5 0L16.5 21m0 0L12 16.5m4.5 4.5V7.5"
-	/>
-</svg>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/icons/SponsorIcon.svelte b/packages/yakkl-wallet/src/lib/components/v1/icons/SponsorIcon.svelte
deleted file mode 100644
index ed63140..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/icons/SponsorIcon.svelte
+++ /dev/null
@@ -1,30 +0,0 @@
-<!-- File: src/lib/components/icons/SponsorIcon.svelte -->
-<script lang="ts">
-	interface Props {
-		className?: string;
-	}
-
-	let { className = 'w-6 h-6' }: Props = $props();
-</script>
-
-<svg
-	xmlns="http://www.w3.org/2000/svg"
-	version="1.1"
-	fill="none"
-	viewBox="0 0 256 256"
-	stroke-width="1.5"
-	stroke="currentColor"
-	class={className}
->
-	<g
-		style="stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: none; fill-rule: nonzero; opacity: 1;"
-		transform="translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)"
-	>
-		<path
-			d="M 89.689 16.621 c -0.198 -0.188 -0.461 -0.284 -0.739 -0.274 c -6.479 0.321 -13.518 1.398 -22.148 3.389 c -0.271 0.063 -0.504 0.235 -0.643 0.476 c -0.139 0.241 -0.17 0.529 -0.088 0.794 l 0.838 2.704 c -6.363 -2.413 -15.313 -3.802 -23.06 -3.497 c -2.84 0 -6.082 1.409 -9.045 3.5 H 23.089 l 0.839 -2.708 c 0.083 -0.266 0.05 -0.553 -0.088 -0.794 c -0.138 -0.241 -0.371 -0.414 -0.642 -0.476 c -8.63 -1.991 -15.668 -3.068 -22.148 -3.389 c -0.269 -0.012 -0.54 0.085 -0.739 0.274 C 0.112 16.81 0 17.072 0 17.346 v 34.342 c 0 0.553 0.448 1 1 1 h 12.378 c 0.438 0 0.826 -0.285 0.955 -0.704 l 0.472 -1.523 c 10.187 11.872 20.546 22.775 28.634 22.775 c 1.557 0 3.029 -0.411 4.401 -1.29 l 0.211 0.214 c 0.944 0.956 2.209 1.487 3.561 1.495 c 0.011 0 0.021 0 0.032 0 c 1.339 0 2.597 -0.515 3.546 -1.451 c 0.834 -0.825 1.299 -1.873 1.436 -2.956 c 0.93 0.771 2.061 1.18 3.206 1.18 c 1.281 -0.001 2.564 -0.484 3.547 -1.454 c 1.109 -1.096 1.58 -2.581 1.456 -4.025 c 0.446 0.11 0.897 0.185 1.35 0.185 c 1.283 0 2.538 -0.443 3.448 -1.342 c 0.956 -0.944 1.487 -2.209 1.495 -3.561 s -0.507 -2.622 -1.387 -3.507 c -0.368 -0.453 -0.748 -0.888 -1.121 -1.334 l 6.816 -4.149 l 0.23 0.742 c 0.13 0.419 0.517 0.704 0.955 0.704 H 89 c 0.553 0 1 -0.447 1 -1 V 17.346 C 90 17.072 89.888 16.81 89.689 16.621 z M 12.641 50.688 H 2 V 18.403 c 5.806 0.359 12.122 1.335 19.699 3.043 L 12.641 50.688 z M 68.227 62.368 c -1.139 1.126 -3.31 1.005 -4.556 -0.258 c -0.017 -0.017 -0.039 -0.023 -0.057 -0.038 c -0.067 -0.077 -0.118 -0.163 -0.191 -0.237 l -10.95 -11.086 c -0.39 -0.392 -1.021 -0.396 -1.415 -0.009 c -0.393 0.389 -0.396 1.021 -0.009 1.415 l 10.95 11.086 c 0.569 0.575 0.88 1.343 0.875 2.16 c -0.005 0.816 -0.325 1.58 -0.901 2.148 c -1.195 1.183 -3.128 1.168 -4.31 -0.026 l -2.425 -2.455 c -0.002 -0.002 -0.003 -0.004 -0.004 -0.005 l -10.95 -11.085 c -0.389 -0.391 -1.022 -0.396 -1.414 -0.009 c -0.393 0.389 -0.397 1.021 -0.009 1.415 L 53.81 66.47 c 1.182 1.195 1.17 3.129 -0.026 4.31 c -1.196 1.182 -3.13 1.168 -4.31 -0.026 l -13.38 -13.545 c -0.389 -0.392 -1.022 -0.398 -1.414 -0.008 c -0.393 0.388 -0.397 1.021 -0.009 1.414 l 11.711 11.855 c -7.435 3.974 -19.75 -9.239 -30.877 -22.268 l 6.965 -22.487 h 9.815 c -2.741 2.432 -5.001 5.336 -6.092 7.983 c -1.396 3.386 -0.487 5.29 0.521 6.291 c 0.026 0.026 0.054 0.051 0.083 0.074 c 3.843 3.047 7.628 3.815 13.523 -2.283 c 2.001 0.122 3.705 -0.225 5.184 -1.064 c 8.306 5.807 15.937 12.961 22.749 21.343 C 69.435 59.254 69.423 61.188 68.227 62.368 z M 67.318 53.842 c -6.406 -7.41 -13.527 -13.843 -21.216 -19.146 c -0.341 -0.236 -0.793 -0.236 -1.134 -0.001 c -1.322 0.907 -2.939 1.251 -4.944 1.055 c -0.311 -0.034 -0.614 0.084 -0.827 0.31 c -5.585 5.943 -8.344 4.656 -11.109 2.473 c -0.996 -1.039 -0.577 -2.784 -0.046 -4.073 c 2.224 -5.398 10.113 -12.246 15.846 -12.247 c 8.172 -0.313 17.649 1.276 23.786 3.967 l 7.152 23.091 L 67.318 53.842 z M 88 50.688 H 77.358 l -9.058 -29.242 c 7.577 -1.708 13.894 -2.684 19.699 -3.043 V 50.688 z"
-			style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(0,0,0); fill-rule: nonzero; opacity: 1;"
-			transform=" matrix(1 0 0 1 0 0) "
-			stroke-linecap="round"
-		/>
-	</g>
-</svg>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/icons/TokenIcon.svelte b/packages/yakkl-wallet/src/lib/components/v1/icons/TokenIcon.svelte
deleted file mode 100644
index 557134a..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/icons/TokenIcon.svelte
+++ /dev/null
@@ -1,27 +0,0 @@
-<!-- File: src/lib/components/icons/TokenIcon.svelte -->
-<script lang="ts">
-	let { className = '' } = $props<{
-		className?: string;
-	}>();
-</script>
-
-<!-- <svg
-  xmlns="http://www.w3.org/2000/svg"
-  viewBox="0 0 24 24"
-  fill="none"
-  stroke="currentColor"
-  stroke-width="2"
-  stroke-linecap="round"
-  stroke-linejoin="round"
-  class={className}
->
-  <circle cx="12" cy="12" r="10" />
-  <path d="M12 2v20" />
-  <path d="M2 12h20" />
-</svg> -->
-
-<img
-	class={className}
-	src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFz0lEQVR4nO2aa4hVVRTHf6NOgc5UTliTUgSJWhYRQUFGWjYalI1BUxJRQWVpRtHD3vqh6KFpUmgfCqI+VCQ0mWRWU9aXLLOI7KFZQ5GTH1IxtUbHYW6s+O9htb3n3HPOvWNC/eEgrrP23mvts95z4X8cgGOBGcASYDWwCdgB7NOzQzR795R4bc0hgSZgDrAOKBV4+oBPtIftddAxSre6xwn1B/AW8JCjDQfq9Qx3dONZpTWBZnstBkYeDAVMoLlOAbvRd4DLgaGOLwgXI6bbmjbgPe1VAnYDd+msAcEY4AsnTDswPoE3qyIepwErHM/nwGhqjMuAXTrgB+DCCvxFFAmYAnSK73eglRrhOmC/Nn4dODLDmmoUMTQAr4i3F7iJKjFTtmvPAznWVatIQAgcdv4NVGFOvdpods61tVIEhebwZVqLOHbwiWU51g2W/wSBtwLderY6+mTxZsUy5zOZA0B9FJ3MP56pkLAagfsiYSs9xnuv/CEJTTp7fxTNMoXmuVpgkWOp22Q7cAswJOKfHinwLfCYbn0sMEzPONEeB75z/L+WMZkhOmu7u8ylLprdmSVj75FztYh2KtDhDt4g8xmk7B7onwITyY7zo9LGsvog7b3B0TskQwjNJZl9c9rmQbA3yrybrhwSDtisf60gvBmoIz9szSygJ9qzpLPszBghaT6ZtOnRrvSYkMBzOHCPhA/mdh7VY6Izo306w84qhwmulCnrt7dGdjszIbJMlen1yDxqhXPdBV2c8PWsLvvZyVk2LQR7/ckxfhZ9nSOcY5s51Rqz3UVaJAw4R7KUIhnXxhs065a7JezVwBaXVa1cOF7ZPTh2Hp84BXgUeFFmMyKBr84JfL/OfNlVxlskm8m4V/R/7DVDjNa9BVjIfETKhX4jJMk80enaKA/Y8xtwpsKuL/8NF7jIFPqVbsliMgW8q3dXONrf7akR53EgTgSWR3kiK07Xre0EpsnnzK+65GNdKt9jbHTnLZcMMea7sN2Pt0W8JEWo58VjyS4Jlgc8rtcay/oB1wDbXKdYDk/o/XMpZ00Tj3Wl/Qj54eSUhWtcnZRk33bwVY7WpjVW+J2gC+tU0rOc8VHCXi1aZ2em+Z3xfO+J4YaOSlkYnN8KynIIgeBZRztOpvW1zGuJs3MT4MOEvcY6505Ck/O3foT4nVaM/SkeHxYDBusyvolyzxiNgfqixHmp9rKisRwa9d7OTMJh4tlbS0VG6d0ip9jdijwhnIbaLfjJ5pRus7GoItWa1lBt+IIKPMszXwJn6EvYuoejNeYzVDCtX/KaVijWzIGKOnu76p9dikbh656ldVaQZkWL1nyQwjO+nLOH8GshrVL4tX4ixtmux1jjlLC+4jXRLSNnxYKi4TdPQjSBY1ijc7sKTeutf1RpEWqir8pk8DRsKpoQQ4liU8MsJcqkFCEu0jy3R6X50xlHSAGTc5Yolqv6cYxC5F4d2hZVwSt1Kw/q/+sKNlKVUAesd0WjRcOXXNHYpa+eWDSiSJOnjLfOrtaYk7OM/zhtk0qN1ZRDqLGalRSXi7S6eUr6JEyqZauLIkBJDX7W4UOPOruiw4c5OYcPb+r9wrSNR0rTkkyo0jhoUeRP1hTliU7BsYNggyqMg6ZmHQehGinPgG6afCocvFH9RIuGcg16xom2IMoTXWX6oCEVBnR3ZLmpeo0l84xMGzSh9ApVerq0Ju/IdH2Zy0zEaA2MiwyxQ0IbiCH2TuAkcqLV/VnBHDIPgsBZ6Wm4zVlGWi2YihtdVk3qrwdSkfni71P/XxX8OKf9IP3prRF4Vby9Ss41QavzmU4XmgdCkamuBAljpJpidBTNViTMpIoqYjOwlVF0yu3YWVGv3mO3s90OTfuGFVDEQu+VwPvOF3cpT2QOsdWgWX+fCAqFQcHqjD/hmKfeJ/Q6oXZa+G/90KZJGXitu9E8T59K8dlS9JDACJnYYv1gZqOmM+FnTttEW6UarS1lKs9/Fn8BkCC+URfVsh0AAAAASUVORK5CYII="
-	alt="chip--v1"
-/>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/icons/TokensIcon.svelte b/packages/yakkl-wallet/src/lib/components/v1/icons/TokensIcon.svelte
deleted file mode 100644
index 7d5133b..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/icons/TokensIcon.svelte
+++ /dev/null
@@ -1,11 +0,0 @@
-<script lang="ts">
-	interface Props {
-		className?: string;
-	}
-
-	let { className = 'w-6 h-6' }: Props = $props();
-</script>
-
-<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class={className}>
-  <path stroke-linecap="round" stroke-linejoin="round" d="M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125" />
-</svg>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/icons/ToolIcon.svelte b/packages/yakkl-wallet/src/lib/components/v1/icons/ToolIcon.svelte
deleted file mode 100644
index f1d7edd..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/icons/ToolIcon.svelte
+++ /dev/null
@@ -1,20 +0,0 @@
-<script lang="ts">
-	let { className = 'size-6' } = $props<{
-		className?: string;
-	}>();
-</script>
-
-<svg
-	xmlns="http://www.w3.org/2000/svg"
-	fill="none"
-	viewBox="0 0 24 24"
-	stroke-width="1.5"
-	stroke="currentColor"
-	class={className}
->
-	<path
-		stroke-linecap="round"
-		stroke-linejoin="round"
-		d="M11.42 15.17 17.25 21A2.652 2.652 0 0 0 21 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655 5.653a2.548 2.548 0 1 1-3.586-3.586l6.837-5.63m5.108-.233c.55-.164 1.163-.188 1.743-.14a4.5 4.5 0 0 0 4.486-6.336l-3.276 3.277a3.004 3.004 0 0 1-2.25-2.25l3.276-3.276a4.5 4.5 0 0 0-6.336 4.486c.091 1.076-.071 2.264-.904 2.95l-.102.085m-1.745 1.437L5.909 7.5H4.5L2.25 3.75l1.5-1.5L7.5 4.5v1.409l4.26 4.26m-1.745 1.437 1.745-1.437m6.615 8.206L15.75 15.75M4.867 19.125h.008v.008h-.008v-.008Z"
-	/>
-</svg>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/icons/TrashIcon.svelte b/packages/yakkl-wallet/src/lib/components/v1/icons/TrashIcon.svelte
deleted file mode 100644
index 2a8ca1d..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/icons/TrashIcon.svelte
+++ /dev/null
@@ -1,23 +0,0 @@
-<!-- File: src/lib/components/icons/TrashIcon.svelte -->
-<script lang="ts">
-	interface Props {
-		className?: string;
-	}
-
-	let { className = 'w-6 h-6' }: Props = $props();
-</script>
-
-<svg
-	xmlns="http://www.w3.org/2000/svg"
-	fill="none"
-	viewBox="0 0 24 24"
-	stroke-width="1.5"
-	stroke="currentColor"
-	class={className}
->
-	<path
-		stroke-linecap="round"
-		stroke-linejoin="round"
-		d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"
-	/>
-</svg>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/icons/WalletIcon.svelte b/packages/yakkl-wallet/src/lib/components/v1/icons/WalletIcon.svelte
deleted file mode 100644
index 6fea721..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/icons/WalletIcon.svelte
+++ /dev/null
@@ -1,20 +0,0 @@
-<script lang="ts">
-	const { size = 24, stroke = 'currentColor', className = '' } = $props();
-</script>
-
-<svg
-	xmlns="http://www.w3.org/2000/svg"
-	fill="none"
-	viewBox="0 0 24 24"
-	stroke-width="1.5"
-	{stroke}
-	width={size}
-	height={size}
-	class={className}
->
-	<path
-		stroke-linecap="round"
-		stroke-linejoin="round"
-		d="M21 12a2.25 2.25 0 0 0-2.25-2.25H15a3 3 0 1 1-6 0H5.25A2.25 2.25 0 0 0 3 12m18 0v6a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 18v-6m18 0V9M3 12V9m18 0a2.25 2.25 0 0 0-2.25-2.25H5.25A2.25 2.25 0 0 0 3 9m18 0V6a2.25 2.25 0 0 0-2.25-2.25H5.25A2.25 2.25 0 0 0 3 6v3"
-	/>
-</svg>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/private/.gitkeep b/packages/yakkl-wallet/src/lib/components/v1/private/.gitkeep
deleted file mode 100644
index e69de29..0000000
diff --git a/packages/yakkl-wallet/src/lib/components/v1/pro/.gitkeep b/packages/yakkl-wallet/src/lib/components/v1/pro/.gitkeep
deleted file mode 100644
index e69de29..0000000
diff --git a/packages/yakkl-wallet/src/lib/components/v1/send/GasSelector.svelte b/packages/yakkl-wallet/src/lib/components/v1/send/GasSelector.svelte
deleted file mode 100644
index b6a8dc4..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/send/GasSelector.svelte
+++ /dev/null
@@ -1,34 +0,0 @@
-<script lang="ts">
-	import { transaction } from './stores';
-	import { gasEstimates } from './services';
-	import { derived } from 'svelte/store';
-
-	const gasFees = derived(transaction, async ($transaction) => {
-		return await gasEstimates($transaction.gasPrice);
-	});
-</script>
-
-<div>
-	<h3>Gas Fee Options</h3>
-	<div>
-		{#await gasFees}
-			<p>Loading gas fees...</p>
-		{:then fees}
-			<ul>
-				<!-- <li>Low: {fees.low} GWEI</li>
-        <li>Market: {fees.market} GWEI</li>
-        <li>Priority: {fees.priority} GWEI</li> -->
-			</ul>
-		{/await}
-	</div>
-</div>
-
-<style>
-	ul {
-		padding: 0;
-		list-style: none;
-	}
-	li {
-		margin: 0.5rem 0;
-	}
-</style>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/send/SendForm.svelte b/packages/yakkl-wallet/src/lib/components/v1/send/SendForm.svelte
deleted file mode 100644
index 5a8d909..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/send/SendForm.svelte
+++ /dev/null
@@ -1,45 +0,0 @@
-<script lang="ts">
-	import { log } from '$lib/managers/Logger';
-	import { formData, formErrors, validateForm } from './validation';
-
-	let data = {
-		toAddress: '',
-		amount: ''
-	};
-
-	let errors: Record<string, string | undefined> = {};
-
-	$: formErrors.subscribe((value) => {
-		errors = value;
-	});
-
-	async function handleSubmit() {
-		const isValid = await validateForm(data);
-		if (isValid) {
-			log.info('Form is valid, submitting:', false, data);
-			// Perform the transaction here
-		} else {
-			log.error('Form validation failed:', false, errors);
-		}
-	}
-</script>
-
-<form on:submit|preventDefault={handleSubmit}>
-	<label>
-		To Address:
-		<input type="text" bind:value={data.toAddress} />
-		{#if errors.toAddress}
-			<small class="text-red-600">{errors.toAddress}</small>
-		{/if}
-	</label>
-
-	<label>
-		Amount:
-		<input type="number" bind:value={data.amount} />
-		{#if errors.amount}
-			<small class="text-red-600">{errors.amount}</small>
-		{/if}
-	</label>
-
-	<button type="submit">Send</button>
-</form>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/send/SendFormModal.svelte b/packages/yakkl-wallet/src/lib/components/v1/send/SendFormModal.svelte
deleted file mode 100644
index 1c85a80..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/send/SendFormModal.svelte
+++ /dev/null
@@ -1,28 +0,0 @@
-<script lang="ts">
-	import Modal from '../Modal.svelte';
-	import SendForm from './SendForm.svelte';
-
-	export let show = false; // To control modal visibility
-	export let title = 'Send Crypto';
-	export let description = 'Fill in the details below to send cryptocurrency.';
-	export let className = ''; // Additional classes for the modal
-	export let onClose = () => (show = false); // Callback for closing the modal
-</script>
-
-<Modal bind:show {title} {description} {className} {onClose}>
-	<!-- <svelte:fragment slot="children"> -->
-	<SendForm />
-	<!-- </svelte:fragment> -->
-
-	<!-- <svelte:fragment slot="footer"> -->
-	<div class="flex justify-end">
-		<button
-			type="button"
-			class="px-4 py-2 bg-gray-300 text-gray-800 rounded-lg hover:bg-gray-400"
-			onclick={onClose}
-		>
-			Cancel
-		</button>
-	</div>
-	<!-- </svelte:fragment> -->
-</Modal>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/send/TransactionModal.svelte b/packages/yakkl-wallet/src/lib/components/v1/send/TransactionModal.svelte
deleted file mode 100644
index 9466216..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/send/TransactionModal.svelte
+++ /dev/null
@@ -1,41 +0,0 @@
-<script lang="ts">
-	import { transaction } from './stores';
-	import { sendTransaction } from './services';
-
-	export let onClose;
-
-	const confirmTransaction = async () => {
-		try {
-			const result = await sendTransaction($transaction);
-			onClose();
-		} catch (error) {
-			console.log('Transaction failed:', false, error);
-		}
-	};
-</script>
-
-<div class="modal">
-	<h2>Confirm Transaction</h2>
-	<p>Recipient: {$transaction.toAddress}</p>
-	<p>Amount: {$transaction.amount}</p>
-	<p>Gas Price: {$transaction.gasPrice}</p>
-	<button on:click={confirmTransaction}>Confirm</button>
-	<button on:click={onClose}>Cancel</button>
-</div>
-
-<style>
-	.modal {
-		position: fixed;
-		top: 50%;
-		left: 50%;
-		transform: translate(-50%, -50%);
-		background: white;
-		padding: 2rem;
-		box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
-		border-radius: 8px;
-		z-index: 1000;
-	}
-	button {
-		margin-right: 1rem;
-	}
-</style>
diff --git a/packages/yakkl-wallet/src/lib/components/v1/send/services.ts b/packages/yakkl-wallet/src/lib/components/v1/send/services.ts
deleted file mode 100644
index 4c69be8..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/send/services.ts
+++ /dev/null
@@ -1,23 +0,0 @@
-// File: services.ts
-export const gasEstimates = async (gasPrice: string) => {
-	// Mock API call to fetch gas estimates
-	const mockEstimates = {
-		low: 10,
-		market: 20,
-		priority: 30
-	};
-	return new Promise((resolve) => setTimeout(() => resolve(mockEstimates), 1000));
-};
-
-export const sendTransaction = async (transaction: any) => {
-	// Mock sending transaction
-	return new Promise((resolve, reject) => {
-		setTimeout(() => {
-			if (Math.random() > 0.5) {
-				resolve({ success: true, transactionHash: '0xabc123' });
-			} else {
-				reject(new Error('Transaction failed'));
-			}
-		}, 2000);
-	});
-};
diff --git a/packages/yakkl-wallet/src/lib/components/v1/send/stores.ts b/packages/yakkl-wallet/src/lib/components/v1/send/stores.ts
deleted file mode 100644
index 9405bf2..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/send/stores.ts
+++ /dev/null
@@ -1,8 +0,0 @@
-// File: stores.ts
-import { writable } from 'svelte/store';
-
-export const transaction = writable({
-	toAddress: '',
-	amount: '',
-	gasPrice: 'market'
-});
diff --git a/packages/yakkl-wallet/src/lib/components/v1/send/validation.ts b/packages/yakkl-wallet/src/lib/components/v1/send/validation.ts
deleted file mode 100644
index dc6ee94..0000000
--- a/packages/yakkl-wallet/src/lib/components/v1/send/validation.ts
+++ /dev/null
@@ -1,42 +0,0 @@
-import * as yup from 'yup';
-import { writable } from 'svelte/store';
-
-// Define the schema
-export const sendFormSchema = yup.object().shape({
-	toAddress: yup
-		.string()
-		.required('Please enter a recipient address.')
-		.matches(/^(0x)?[0-9a-fA-F]{40}$|^.*\.eth$/, 'Must be a valid Ethereum address or ENS name.'),
-	amount: yup
-		.number()
-		.required('Please enter the amount to send.')
-		.moreThan(0, 'Amount must be greater than 0.')
-});
-
-// Stores for data and errors
-export const formData = writable({
-	toAddress: '',
-	amount: ''
-});
-
-export const formErrors = writable<Record<string, string | undefined>>({});
-
-// Validation function
-export async function validateForm(data: Record<string, any>): Promise<boolean> {
-	try {
-		formErrors.set({});
-		await sendFormSchema.validate(data, { abortEarly: false });
-		return true;
-	} catch (error) {
-		if (error instanceof yup.ValidationError) {
-			const errors: Record<string, string | undefined> = {};
-			error.inner.forEach((err) => {
-				if (err.path) {
-					errors[err.path] = err.message;
-				}
-			});
-			formErrors.set(errors);
-		}
-		return false;
-	}
-}
diff --git a/packages/yakkl-wallet/src/lib/config/features.ts b/packages/yakkl-wallet/src/lib/config/features.ts
index 9a41ab2..cbe8fcc 100644
--- a/packages/yakkl-wallet/src/lib/config/features.ts
+++ b/packages/yakkl-wallet/src/lib/config/features.ts
@@ -1,6 +1,8 @@
 // Feature flags for Basic vs Pro tier separation
-import { PlanType } from '../types';
-export { PlanType };
+// import { PlanType } from '../types';
+// export { PlanType };
+
+import { PlanType } from "$lib/common/types";
 
 // Define feature arrays first to avoid circular reference
 const BASIC_FEATURES = [
@@ -58,9 +60,9 @@ const PAYMENT_FEATURES = [
 ] as const;
 
 export const FEATURES = {
-  [PlanType.Basic]: BASIC_FEATURES,
-  [PlanType.Pro]: PRO_FEATURES,
-  [PlanType.Enterprise]: ENTERPRISE_FEATURES,
+  [PlanType.EXPLORER_MEMBER]: BASIC_FEATURES,
+  [PlanType.YAKKL_PRO]: PRO_FEATURES,
+  [PlanType.ENTERPRISE]: ENTERPRISE_FEATURES,
   PAYMENT: PAYMENT_FEATURES
 } as const;
 
@@ -72,9 +74,9 @@ export const PLAN_FEATURES = {
 } as const;
 
 // Type for feature keys
-export type FeatureKey = 
+export type FeatureKey =
   | typeof BASIC_FEATURES[number]
-  | typeof PRO_FEATURES[number] 
+  | typeof PRO_FEATURES[number]
   | typeof ENTERPRISE_FEATURES[number];
 
 // Helper function to check if a feature is available
@@ -85,11 +87,11 @@ export function hasFeature(userPlan: PlanType, feature: string): boolean {
 
 // Get all features for a plan
 export function getFeaturesForPlan(plan: PlanType): readonly string[] {
-  return FEATURES[plan as keyof typeof FEATURES] ?? FEATURES[PlanType.Basic];
+  return FEATURES[plan as keyof typeof FEATURES] ?? FEATURES[PlanType.EXPLORER_MEMBER];
 }
 
 // Check if user is on trial
 export function isTrialUser(trialEndsAt?: string): boolean {
   if (!trialEndsAt) return false;
   return new Date(trialEndsAt) > new Date();
-}
\ No newline at end of file
+}
diff --git a/packages/yakkl-wallet/src/lib/ext/v1/chrome/background.ts b/packages/yakkl-wallet/src/lib/ext/v1/chrome/background.ts
index 11dcc36..43bb9cd 100644
--- a/packages/yakkl-wallet/src/lib/ext/v1/chrome/background.ts
+++ b/packages/yakkl-wallet/src/lib/ext/v1/chrome/background.ts
@@ -1,5 +1,5 @@
 // Export only the types needed by other modules
-import type { Runtime } from 'webextension-polyfill';
+import type { Runtime } from '$lib/types/browser-types';
 import type { PendingRequestData } from '$lib/common/interfaces';
 
 export type RuntimePort = Runtime.Port;
diff --git a/packages/yakkl-wallet/src/lib/ext/v1/chrome/eip-6963.ts b/packages/yakkl-wallet/src/lib/ext/v1/chrome/eip-6963.ts
index d0d74e6..5afbabb 100644
--- a/packages/yakkl-wallet/src/lib/ext/v1/chrome/eip-6963.ts
+++ b/packages/yakkl-wallet/src/lib/ext/v1/chrome/eip-6963.ts
@@ -1,1178 +1,9 @@
 import { log } from '$lib/managers/Logger';
-import type { Runtime } from 'webextension-polyfill';
+import type { Runtime } from '$lib/types/browser-types';
 import { ProviderRpcError } from '$lib/common';
-import browser from 'webextension-polyfill';
+import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
 import { UnifiedTimerManager } from '$lib/managers/UnifiedTimerManager';
 import { initializePermissions } from '$lib/permissions';
 import {
+const browser = getBrowserExt()!;
 	getBlock,
-	getLatestBlock,
-	getGasPrice,
-	getBalance,
-	getCode,
-	getNonce,
-	getTransactionReceipt,
-	getTransaction,
-	getLogs
-} from './legacy';
-import type { Block, BlockTag } from 'alchemy-sdk';
-import type { YakklCurrentlySelected } from '$lib/common/interfaces';
-import { STORAGE_YAKKL_CURRENTLY_SELECTED, YAKKL_PROVIDER_EIP6963 } from '$lib/common/constants';
-// import { KeyManager } from '$lib/managers/KeyManager';
-import { estimateGas as estimateGasLegacy } from './legacy';
-import { requestManager } from './requestManager';
-import type { PendingRequestData } from '$lib/common/interfaces';
-import { activeTabBackgroundStore } from '$lib/common/stores';
-import { get } from 'svelte/store';
-import { extractSecureDomain } from '$lib/common/security';
-import {
-	getAddressesForDomain,
-	getDomainForRequestId,
-	revokeDomainConnection,
-	verifyDomainConnected
-} from '$contexts/background/extensions/chrome/verifyDomainConnectedBackground';
-import type { BackgroundPendingRequest } from './background';
-import { isReadMethod, isWriteMethod, isSimulationMethod } from './methodClassification';
-import { handleReadOnlyRequest } from '$lib/common/listeners/background/readMethodHandler';
-import { handleSimulationRequest } from '$lib/common/listeners/background/simulationMethodHandler';
-import { handleWriteRequest } from '$lib/common/listeners/background/writeMethodHandler';
-import { sendErrorResponse } from '$contexts/background/extensions/chrome/errorResponseHandler';
-import { MessageAnalyzer } from './messageAnalyzer';
-import { showPopupForMethod } from '$lib/managers/DAppPopupManager';
-
-export { requestManager };
-
-type RuntimePort = Runtime.Port;
-
-// Map to track active connections
-const eip6963Ports = new Map<string, RuntimePort>();
-
-// Request timeout (30 seconds)
-const REQUEST_TIMEOUT = 30000;
-
-interface EIP6963Message {
-	action: string;
-	requestId: string;
-	result?: any;
-	error?: {
-		code: number;
-		message: string;
-	};
-}
-const messageAnalyzer = new MessageAnalyzer();
-// Add before the handleEIP6963Request function
-type PermissionlessMethod = () => Promise<unknown> | unknown;
-type PermissionRequiredMethod = () => Promise<unknown>;
-
-interface PermissionlessMethods {
-	[key: string]: PermissionlessMethod;
-}
-
-interface PermissionRequiredMethods {
-	[key: string]: PermissionRequiredMethod;
-}
-
-// Add before handleEIP6963Request
-const EIP1193_ERRORS = {
-	USER_REJECTED: { code: 4001, message: 'User rejected the request' },
-	UNAUTHORIZED: { code: 4100, message: 'Unauthorized' },
-	UNSUPPORTED_METHOD: { code: 4200, message: 'Method not supported' },
-	DISCONNECTED: { code: 4900, message: 'Disconnected' },
-	CHAIN_DISCONNECTED: { code: 4901, message: 'Chain disconnected' },
-	INVALID_PARAMS: { code: -32602, message: 'Invalid parameters' },
-	INTERNAL_ERROR: { code: -32603, message: 'Internal error' }
-};
-
-// Track active requests to prevent duplicates
-const activeRequests = new Map<
-	string,
-	{
-		timestamp: number;
-		promise: Promise<any>;
-	}
->();
-
-// Clean up old requests every 5 minutes using UnifiedTimerManager
-const timerManager = UnifiedTimerManager.getInstance();
-timerManager.addInterval(
-	'eip6963-cleanup',
-	() => {
-		const now = Date.now();
-		for (const [requestId, request] of activeRequests.entries()) {
-			if (now - request.timestamp > 5 * 60 * 1000) {
-				activeRequests.delete(requestId);
-			}
-		}
-	},
-	5 * 60 * 1000
-);
-timerManager.startInterval('eip6963-cleanup');
-
-// Add at the top with other imports
-const processedEIP6963Requests = new Set<string>();
-
-/**
- * Get the origin from a request
- * This needs to be implemented based on how your extension receives requests
- */
-function getRequestOrigin(request?: any, sender?: browser.Runtime.MessageSender): string {
-	try {
-		// If we have a sender with a URL, extract the origin
-		if (sender && sender.url) {
-			return new URL(sender.url).origin;
-		}
-
-		// If request contains origin information
-		if (request && request.origin) {
-			return request.origin;
-		}
-
-		// If request contains metadata with domain
-		if (request && request.metaDataParams && request.metaDataParams.domain) {
-			// Ensure it's a proper origin with protocol
-			const domain = request.metaDataParams.domain;
-			if (domain.startsWith('http://') || domain.startsWith('https://')) {
-				return domain;
-			}
-			return `https://${domain}`;
-		}
-
-		// Default to a placeholder if we can't determine the origin
-		log.warn('Could not determine request origin, using placeholder', false, { request, sender });
-		return 'unknown-origin';
-	} catch (error) {
-		log.error('Error getting request origin', false, error);
-		return 'unknown-origin';
-	}
-}
-
-// Add to existing listeners in backgroundListeners.ts
-export async function onEIP6963MessageListener(
-	message: any,
-	sender: Runtime.MessageSender
-): Promise<any> {
-	try {
-		// Type guard to check for EIP-6963 message
-		const isEIP6963Message = (msg: any): msg is EIP6963Message =>
-			msg &&
-			typeof msg === 'object' &&
-			typeof msg.action === 'string' &&
-			typeof msg.requestId === 'string';
-
-		if (!isEIP6963Message(message)) {
-			// Let other handlers try to process it
-			log.info('EIP6963 - onMessage - not an EIP6963 message so passing through', false, {
-				message
-			});
-			return undefined; // Return undefined to let the message pass through
-		}
-
-		log.info('Received EIP6963 message', false, message);
-
-		if (message.action === 'resolveEIP6963Request') {
-			const success = resolveEIP6963Request(message.requestId, message.result);
-			log.debug('EIP6963: resolveEIP6963Request', false, {
-				success,
-				requestId: message.requestId
-			});
-			return {
-				type: 'YAKKL_RESPONSE:EIP6963',
-				result: success,
-				requestId: message.requestId
-			};
-		}
-
-		if (message.action === 'rejectEIP6963Request') {
-			const success = rejectEIP6963Request(message.requestId, message.error);
-			log.debug('EIP6963: rejectEIP6963Request', false, {
-				success,
-				requestId: message.requestId,
-				error: message.error
-			});
-			return {
-				type: 'YAKKL_RESPONSE:EIP6963',
-				result: success,
-				requestId: message.requestId,
-				error: message.error
-			};
-		}
-
-		// If we got here but message is EIP-6963, still respond with an error
-		throw new Error('Unknown EIP6963 action');
-	} catch (error) {
-		log.error('Error handling EIP-6963 message', false, error);
-		return {
-			type: 'YAKKL_RESPONSE:EIP6963',
-			error: {
-				code: 4200,
-				message: error instanceof Error ? error.message : String(error)
-			}
-		};
-	}
-}
-
-export function initializeEIP6963() {
-	if (!browser) return;
-
-	try {
-		// Initialize the permissions system
-		initializePermissions();
-
-		browser.runtime.onConnect.addListener((port: RuntimePort) => {
-			if (port.name !== YAKKL_PROVIDER_EIP6963) return;
-
-			log.debug('EIP6963: Port connected:', false, {
-				portName: port.name,
-				port: port,
-				timestamp: new Date().toISOString()
-			});
-
-			const portId = `eip6963_${Date.now()}_${Math.random().toString(36).slice(2, 11)}`;
-			eip6963Ports.set(portId, port);
-
-			// Use the exported onEIP6963Listener directly
-			port.onMessage.addListener(async (message: unknown) => {
-				await onEIP6963PortListener(message, port);
-			});
-
-			port.onDisconnect.addListener(() => {
-				eip6963Ports.delete(portId);
-
-				if (browser.runtime.lastError) {
-					log.error('EIP-6963 port error on disconnect', false, browser.runtime.lastError);
-				}
-			});
-		});
-	} catch (error) {
-		log.error('Failed to initialize EIP-6963 handler', true, error);
-	}
-}
-
-// Helper function to handle getBlock
-async function handleGetBlock(
-	chainId: number,
-	block: BlockTag | Promise<BlockTag>
-): Promise<Block | undefined> {
-	return await getBlock(chainId, block, undefined);
-}
-
-// Helper function to handle estimateGas
-async function handleEstimateGas(chainId: any, params: any[]): Promise<unknown | undefined> {
-	return await estimateGasLegacy(chainId, params[0]);
-}
-
-// Define read-only methods that don't require approval
-export const READONLY_METHODS = [
-	// Account and Address Methods
-	'eth_accounts',
-	'eth_coinbase',
-	'eth_getBalance',
-	'eth_getCode',
-	'eth_getStorageAt',
-	'eth_getTransactionCount',
-
-	// Block Methods
-	'eth_blockNumber',
-	'eth_getBlockByHash',
-	'eth_getBlockByNumber',
-	'eth_getBlockTransactionCountByHash',
-	'eth_getBlockTransactionCountByNumber',
-	'eth_getUncleByBlockHashAndIndex',
-	'eth_getUncleByBlockNumberAndIndex',
-	'eth_getUncleCountByBlockHash',
-	'eth_getUncleCountByBlockNumber',
-
-	// Chain and Network Methods
-	'eth_chainId',
-	'net_version',
-	'eth_protocolVersion',
-
-	// Compiler Methods
-	'eth_compileLLL',
-	'eth_compileSerpent',
-	'eth_compileSolidity',
-	'eth_getCompilers',
-
-	// Filter Methods
-	'eth_getFilterChanges',
-	'eth_getFilterLogs',
-	'eth_getLogs',
-	'eth_newBlockFilter',
-	'eth_newFilter',
-	'eth_newPendingTransactionFilter',
-	'eth_uninstallFilter',
-
-	// Gas and Mining Methods
-	'eth_gasPrice',
-	'eth_hashrate',
-	'eth_mining',
-
-	// Transaction Methods
-	'eth_getTransactionByBlockHashAndIndex',
-	'eth_getTransactionByBlockNumberAndIndex',
-	'eth_getTransactionByHash',
-	'eth_getTransactionReceipt',
-
-	// Work Methods
-	'eth_getWork',
-	'eth_submitHashrate',
-	'eth_submitWork',
-
-	// State Methods
-	'eth_syncing'
-];
-
-// Function to handle read-only methods
-export async function handleReadOnlyMethod(
-	method: string,
-	params: any[] = [],
-	requestId?: string
-): Promise<any> {
-	try {
-		switch (method) {
-			case 'eth_chainId':
-				return await getCurrentlySelectedChainId(requestId);
-			case 'eth_accounts':
-				return await getCurrentlySelectedAccounts(requestId);
-			case 'net_version':
-				return await getCurrentlySelectedNetworkVersion(requestId);
-			case 'eth_blockNumber':
-				return await getCurrentlySelectedBlockNumber(requestId);
-			case 'eth_getBalance':
-				return await getCurrentlySelectedBalance(params[0], requestId);
-			case 'eth_getCode':
-				return await getCurrentlySelectedCode(params[0], requestId);
-			case 'eth_getStorageAt':
-				return await getCurrentlySelectedStorageAt(params[0], params[1], requestId);
-			case 'eth_getTransactionCount':
-				return await getCurrentlySelectedTransactionCount(params[0], requestId);
-			case 'eth_gasPrice':
-				return await getCurrentlySelectedGasPrice(requestId);
-			case 'eth_getBlockByHash':
-				return await getCurrentlySelectedBlockByHash(params[0], params[1], requestId);
-			case 'eth_getBlockByNumber':
-				return await getCurrentlySelectedBlockByNumber(params[0], params[1], requestId);
-			case 'eth_getTransactionByHash':
-				return await getCurrentlySelectedTransactionByHash(params[0], requestId);
-			case 'eth_getTransactionReceipt':
-				return await getCurrentlySelectedTransactionReceipt(params[0], requestId);
-			case 'eth_getLogs':
-				return await getCurrentlySelectedLogs(params[0], requestId);
-			default:
-				throw new ProviderRpcError(4200, `Method ${method} not supported`);
-		}
-	} catch (error) {
-		log.error('Error handling read-only method:', false, {
-			method,
-			error,
-			timestamp: new Date().toISOString()
-		});
-		throw error;
-	}
-}
-
-// Helper function to handle getBlockByNumber
-async function getCurrentlySelectedBlockByNumber(
-	blockNumber: string,
-	fullTx: boolean,
-	requestId?: string
-): Promise<any> {
-	try {
-		const shortcuts = await getCurrentlySelectedData(requestId);
-		const block = await getBlock(shortcuts.chainId, blockNumber, fullTx ? true : false);
-		return block;
-	} catch (error) {
-		log.error('Error getting block by number:', false, {
-			error,
-			blockNumber,
-			requestId,
-			timestamp: new Date().toISOString()
-		});
-		throw error;
-	}
-}
-
-// Function to handle write methods that require approval
-export async function handleWriteMethod(
-	method: string,
-	port: Runtime.Port,
-	params: any[] = [],
-	requestId?: string
-): Promise<any> {
-	try {
-		switch (method) {
-			case 'eth_requestAccounts':
-				return await handleRequestAccounts(port, requestId);
-			case 'eth_sendTransaction':
-				return await handleSendTransaction(port, params, requestId);
-			case 'eth_sign':
-				return await handleSign(port, params, requestId);
-			case 'personal_sign':
-				return await handlePersonalSign(port, params, requestId);
-			case 'eth_signTypedData_v4':
-				return await handleSignTypedDataV4(port, params, requestId);
-			case 'wallet_addEthereumChain':
-				return await handleAddEthereumChain(port, params, requestId);
-			case 'wallet_switchEthereumChain':
-				return await handleSwitchEthereumChain(port, params, requestId);
-			case 'wallet_requestPermissions':
-				return await handleRequestPermissions(port, params, requestId);
-			case 'wallet_revokePermissions':
-				return await handleRevokePermissions(port, params, requestId);
-			case 'wallet_getPermissions':
-				return await handleGetPermissions(port, requestId);
-			default:
-				throw new ProviderRpcError(4200, `Method ${method} not supported`);
-		}
-	} catch (error) {
-		log.error('Error handling write method:', false, {
-			method,
-			error,
-			timestamp: new Date().toISOString()
-		});
-		throw error;
-	}
-}
-
-// Primary EIP-6963 Port Listener
-export async function onEIP6963PortListener(message: any, port: Runtime.Port): Promise<void> {
-	try {
-		messageAnalyzer.analyze(message);
-		// First, let's understand what we received
-		log.debug('EIP6963 handler received raw message', false, {
-			message,
-			messageType: typeof message,
-			hasMethod: 'method' in message,
-			hasType: 'type' in message,
-			timestamp: new Date().toISOString()
-		});
-
-		// Try to extract method from various possible locations
-		let method = message.method;
-		let id = message.id;
-
-		// Fallback: Check if method is nested in data or payload
-		if (!method && message.data?.method) {
-			method = message.data.method;
-			log.debug('Found method in message.data', false, { method });
-		}
-
-		// Fallback: Check if this is a wrapped message
-		if (!method && message.payload?.method) {
-			method = message.payload.method;
-			log.debug('Found method in message.payload', false, { method });
-		}
-
-		// Fallback: Check if type contains method information (e.g., "YAKKL_REQUEST:eth_accounts")
-		if (!method && message.type && typeof message.type === 'string') {
-			const typeMatch = message.type.match(/:(eth_[a-zA-Z0-9_]+)/);
-			if (typeMatch) {
-				method = typeMatch[1];
-				log.debug('Extracted method from type', false, { type: message.type, method });
-			}
-		}
-
-		// Fallback: Check for action field (some systems use action instead of method)
-		if (!method && message.action) {
-			method = message.action;
-			log.debug('Using action as method', false, { action: message.action });
-		}
-
-		// Special case: handle non-RPC messages
-		if (!method && message.type) {
-			switch (message.type) {
-				case 'ping':
-				case 'PING':
-				case 'connection_test':
-					// Handle ping/connection test
-					port.postMessage({
-						type: 'pong',
-						id: id || message.id || Date.now().toString(),
-						timestamp: Date.now()
-					});
-					log.debug('Handled ping message', false);
-					return;
-
-				case 'init':
-				case 'INIT':
-				case 'handshake':
-					// Handle initialization
-					port.postMessage({
-						type: 'init_ack',
-						id: id || message.id || Date.now().toString(),
-						status: 'ready'
-					});
-					log.debug('Handled init message', false);
-					return;
-
-				default:
-				// Log unknown message types for debugging
-				// log.warn('Unknown message type without method', false, {
-				//   type: message.type,
-				//   message
-				// });
-			}
-		}
-
-		// After all fallbacks, validate we have a method
-		if (!method) {
-			log.error('No method found in EIP6963 message after all fallbacks', false, {
-				message,
-				checkedLocations: [
-					'message.method',
-					'message.data.method',
-					'message.payload.method',
-					'message.type (extraction)',
-					'message.action'
-				]
-			});
-
-			// If we have an ID, send a proper error response
-			if (id) {
-				sendErrorResponse(port, id, new Error('Method is required'));
-			} else {
-				// Without an ID, we can't send a proper response
-				// Log it and potentially close the connection
-				log.error('Cannot send error response - no request ID', false);
-			}
-			return;
-		}
-
-		// Now we definitely have a method, continue with normal processing
-		log.debug('EIP6963 handler processing message', false, {
-			method,
-			id,
-			timestamp: new Date().toISOString()
-		});
-
-		// Skip duplicate requests check remains the same
-		if (id && processedEIP6963Requests.has(id)) {
-			log.debug('EIP6963: Skipping duplicate request:', false, {
-				requestId: id,
-				method,
-				timestamp: new Date().toISOString()
-			});
-			return;
-		}
-
-		if (id) {
-			processedEIP6963Requests.add(id);
-		}
-
-		// Route based on method type
-		if (isSimulationMethod(method)) {
-			log.debug('Routing to simulation handler:', false, { method });
-			await handleSimulationRequest(message, port);
-		} else if (isWriteMethod(method)) {
-			log.debug('Routing to write handler:', false, { method });
-			await handleWriteRequest(message, port);
-		} else if (isReadMethod(method)) {
-			log.debug('Routing to read handler:', false, { method });
-			await handleReadOnlyRequest(message, port);
-		} else {
-			log.warn('Unknown EIP6963 method:', false, { method });
-			if (id) {
-				sendErrorResponse(port, id, new Error(`Unknown method: ${method}`));
-			}
-		}
-	} catch (error) {
-		log.error('Error in EIP6963 handler:', false, error);
-		if (message?.id) {
-			sendErrorResponse(port, message.id, error);
-		}
-	}
-}
-
-async function switchEthereumChain(params: any, requestId?: string): Promise<null> {
-	try {
-		const newChainId = parseInt(params[0].chainId, 16);
-		// Update chain through appropriate mechanism
-		broadcastToEIP6963Ports('chainChanged', `0x${newChainId.toString(16)}`, requestId);
-		return null;
-	} catch (error) {
-		log.error('Error in wallet_switchEthereumChain', false, error);
-		throw new ProviderRpcError(4901, 'Failed to switch chain');
-	}
-}
-
-async function addEthereumChain(
-	params: any,
-	port: Runtime.Port,
-	requestId?: string
-): Promise<null> {
-	return (await showEIP6963Popup('wallet_addEthereumChain', params, port, requestId)) as null;
-}
-
-async function getBlockByNumber(params: any, port: Runtime.Port, requestId?: string): Promise<any> {
-	const result = await browser.storage.local.get(STORAGE_YAKKL_CURRENTLY_SELECTED);
-	const yakklCurrentlySelected = result[STORAGE_YAKKL_CURRENTLY_SELECTED] as YakklCurrentlySelected;
-	if (!yakklCurrentlySelected?.shortcuts?.chainId) {
-		throw new ProviderRpcError(4100, 'Wallet not initialized');
-	}
-	return await showEIP6963Popup('eth_getBlockByNumber', params, port, requestId);
-}
-
-async function estimateGas(
-	params: any,
-	apiKey: string,
-	port: Runtime.Port,
-	requestId?: string
-): Promise<any> {
-	const result = await browser.storage.local.get(STORAGE_YAKKL_CURRENTLY_SELECTED);
-	const yakklCurrentlySelected = result[STORAGE_YAKKL_CURRENTLY_SELECTED] as YakklCurrentlySelected;
-	if (!yakklCurrentlySelected?.shortcuts?.chainId) {
-		throw new ProviderRpcError(4100, 'Wallet not initialized');
-	}
-	return await showEIP6963Popup('eth_estimateGas', params, port, requestId);
-}
-
-// Add parameter validation
-function validateParams(method: string, params: any[]): boolean {
-	try {
-		switch (method) {
-			case 'eth_sendTransaction':
-				return params.length === 1 && typeof params[0] === 'object';
-			case 'eth_sign':
-				return (
-					params.length === 2 && typeof params[0] === 'string' && typeof params[1] === 'string'
-				);
-			case 'personal_sign':
-				return (
-					params.length === 2 && typeof params[0] === 'string' && typeof params[1] === 'string'
-				);
-			case 'eth_signTypedData_v4':
-				return (
-					params.length === 2 && typeof params[0] === 'string' && typeof params[1] === 'string'
-				);
-			case 'wallet_switchEthereumChain':
-				return (
-					params.length === 1 &&
-					typeof params[0] === 'object' &&
-					typeof params[0].chainId === 'string'
-				);
-			case 'wallet_addEthereumChain':
-				return (
-					params.length === 1 &&
-					typeof params[0] === 'object' &&
-					typeof params[0].chainId === 'string'
-				);
-			case 'wallet_requestPermissions':
-				return (
-					params.length === 1 &&
-					Array.isArray(params[0]) &&
-					params[0].every((p) => typeof p === 'object' && typeof p.eth_accounts === 'object')
-				);
-			case 'wallet_revokePermissions':
-				return (
-					params.length === 1 &&
-					Array.isArray(params[0]) &&
-					params[0].every((p) => typeof p === 'object' && typeof p.eth_accounts === 'object')
-				);
-			case 'wallet_getPermissions':
-				return params.length === 0; // No parameters needed
-			// Add more method validations as needed
-			default:
-				return true; // Default to true for methods without specific validation
-		}
-	} catch (error) {
-		log.error('Parameter validation error', false, { method, params, error });
-		return false;
-	}
-}
-
-// Helper functions to get data from currentlySelected.shortcuts
-export async function getCurrentlySelectedData(requestId?: string) {
-	try {
-		const result = await browser.storage.local.get(STORAGE_YAKKL_CURRENTLY_SELECTED);
-		const yakklCurrentlySelected = result[
-			STORAGE_YAKKL_CURRENTLY_SELECTED
-		] as YakklCurrentlySelected;
-		if (!yakklCurrentlySelected?.shortcuts) {
-			throw new ProviderRpcError(4100, 'Wallet shortcuts not initialized');
-		}
-
-		return yakklCurrentlySelected.shortcuts;
-	} catch (error) {
-		log.error('Error getting currently selected data', false, error);
-		throw new ProviderRpcError(4100, 'Error getting currently selected data');
-	}
-}
-
-// Read-only method handlers
-async function getCurrentlySelectedChainId(requestId?: string): Promise<string> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_chainId');
-	}
-	const shortcuts = await getCurrentlySelectedData(requestId);
-	return `0x${shortcuts.chainId.toString(16)}`;
-}
-
-export async function getCurrentlySelectedAccounts(requestId?: string): Promise<string[]> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_accounts');
-	}
-	const shortcuts = await getCurrentlySelectedData(requestId);
-	const id = shortcuts.id;
-	const persona = shortcuts.persona;
-	const domain = await getDomainForRequestId(requestId);
-	const addresses = await getAddressesForDomain(domain);
-	log.info('getCurrentlySelectedAccounts', false, { id, persona, addresses });
-	return addresses;
-}
-
-async function getCurrentlySelectedNetworkVersion(requestId?: string): Promise<string> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_chainId');
-	}
-	const shortcuts = await getCurrentlySelectedData(requestId);
-	return shortcuts.chainId.toString();
-}
-
-async function getCurrentlySelectedBlockNumber(requestId?: string): Promise<string> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_blockNumber');
-	}
-	const shortcuts = await getCurrentlySelectedData(requestId);
-	const block = await getLatestBlock(shortcuts.chainId);
-	return block.number.toString();
-}
-
-async function getCurrentlySelectedBalance(address: string, requestId?: string): Promise<string> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_getBalance');
-	}
-	const shortcuts = await getCurrentlySelectedData(requestId);
-	const balance = await getBalance(shortcuts.chainId, address);
-	return balance.toString();
-}
-
-async function getCurrentlySelectedCode(address: string, requestId?: string): Promise<string> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_getCode');
-	}
-	const shortcuts = await getCurrentlySelectedData(requestId);
-	return await getCode(shortcuts.chainId, address);
-}
-
-async function getCurrentlySelectedStorageAt(
-	address: string,
-	position: string,
-	requestId?: string
-): Promise<string> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_getStorageAt');
-	}
-	const shortcuts = await getCurrentlySelectedData(requestId);
-	return await getCode(shortcuts.chainId, address); // Implement actual storage getter
-}
-
-async function getCurrentlySelectedTransactionCount(
-	address: string,
-	requestId?: string
-): Promise<string> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_getTransactionCount');
-	}
-	const shortcuts = await getCurrentlySelectedData(requestId);
-	const nonce = await getNonce(shortcuts.chainId, address);
-	return nonce.toString();
-}
-
-async function getCurrentlySelectedGasPrice(requestId?: string): Promise<string> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_gasPrice');
-	}
-	const shortcuts = await getCurrentlySelectedData(requestId);
-	const gasPrice = await getGasPrice(shortcuts.chainId);
-	return gasPrice.toString();
-}
-
-async function getCurrentlySelectedBlockByHash(
-	hash: string,
-	fullTx: boolean,
-	requestId?: string
-): Promise<any> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_getBlockByHash');
-	}
-	const shortcuts = await getCurrentlySelectedData(requestId);
-	return await getBlock(shortcuts.chainId, hash, fullTx ? true : false);
-}
-
-async function getCurrentlySelectedTransactionByHash(
-	hash: string,
-	requestId?: string
-): Promise<any> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_getTransactionByHash');
-	}
-	const shortcuts = await getCurrentlySelectedData(requestId);
-	return await getTransaction(shortcuts.chainId, hash);
-}
-
-async function getCurrentlySelectedTransactionReceipt(
-	hash: string,
-	requestId?: string
-): Promise<any> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_getTransactionReceipt');
-	}
-	const shortcuts = await getCurrentlySelectedData(requestId);
-	return await getTransactionReceipt(shortcuts.chainId, hash);
-}
-
-async function getCurrentlySelectedLogs(params: any, requestId?: string): Promise<any> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_getLogs');
-	}
-	const shortcuts = await getCurrentlySelectedData(requestId);
-	return await getLogs(shortcuts.chainId, params);
-}
-
-// Write method handlers
-export async function handleSendTransaction(
-	port: Runtime.Port,
-	params: any[],
-	requestId?: string
-): Promise<string> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_sendTransaction');
-	}
-	return showEIP6963Popup('eth_sendTransaction', params, port, requestId) as Promise<string>;
-}
-
-export async function handleRequestAccounts(
-	port: Runtime.Port,
-	requestId?: string
-): Promise<string[]> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_requestAccounts');
-	}
-	log.warn('Requesting accounts', false, { method: 'eth_requestAccounts', requestId });
-	return showEIP6963Popup('eth_requestAccounts', [], port, requestId) as Promise<string[]>;
-}
-
-export async function handleSign(
-	port: Runtime.Port,
-	params: any[],
-	requestId?: string
-): Promise<string> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_sign');
-	}
-	return showEIP6963Popup('eth_sign', params, port, requestId) as Promise<string>;
-}
-
-export async function handlePersonalSign(
-	port: Runtime.Port,
-	params: any[],
-	requestId?: string
-): Promise<string> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for personal_sign');
-	}
-	return showEIP6963Popup('personal_sign', params, port, requestId) as Promise<string>;
-}
-
-export async function handleSignTypedDataV4(
-	port: Runtime.Port,
-	params: any[],
-	requestId?: string
-): Promise<string> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_signTypedData_v4');
-	}
-	return showEIP6963Popup('eth_signTypedData_v4', params, port, requestId) as Promise<string>;
-}
-
-export async function handleAddEthereumChain(
-	port: Runtime.Port,
-	params: any[],
-	requestId?: string
-): Promise<null> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for wallet_addEthereumChain');
-	}
-	return showEIP6963Popup('wallet_addEthereumChain', params, port, requestId) as null;
-}
-
-export async function handleSwitchEthereumChain(
-	port: Runtime.Port,
-	params: any[],
-	requestId?: string
-): Promise<null> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for wallet_switchEthereumChain');
-	}
-	return showEIP6963Popup('wallet_switchEthereumChain', params, port, requestId) as null;
-}
-
-// Add new handlers for permission methods
-export async function handleRequestPermissions(
-	port: Runtime.Port,
-	params: any[],
-	requestId?: string
-): Promise<any> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for wallet_requestPermissions');
-	}
-	try {
-		// Validate parameters
-		if (!validateParams('wallet_requestPermissions', params)) {
-			throw new ProviderRpcError(
-				EIP1193_ERRORS.INVALID_PARAMS.code,
-				'Invalid parameters for wallet_requestPermissions'
-			);
-		}
-
-		// Show popup for permission request
-		return await showEIP6963Popup('wallet_requestPermissions', params, port, requestId);
-	} catch (error) {
-		log.error('Error handling wallet_requestPermissions:', false, error);
-		throw error;
-	}
-}
-
-export async function handleRevokePermissions(
-	port: Runtime.Port,
-	params: any[],
-	requestId?: string
-): Promise<any> {
-	try {
-		// Validate parameters
-		if (!validateParams('wallet_revokePermissions', params)) {
-			throw new ProviderRpcError(
-				EIP1193_ERRORS.INVALID_PARAMS.code,
-				'Invalid parameters for wallet_revokePermissions'
-			);
-		}
-
-		// Get the origin from the port
-		const origin = port.sender?.url ? new URL(port.sender.url).origin : null;
-		if (!origin) {
-			throw new ProviderRpcError(
-				EIP1193_ERRORS.INVALID_PARAMS.code,
-				'Could not determine origin for permission revocation'
-			);
-		}
-
-		// Revoke permissions automatically
-		await revokeDomainConnection(origin); // This will remove the domain connection
-
-		// Return success
-		return true;
-	} catch (error) {
-		log.error('Error handling wallet_revokePermissions:', false, error);
-		throw error;
-	}
-}
-
-export async function handleGetPermissions(port: Runtime.Port, requestId?: string): Promise<any> {
-	try {
-		// Validate parameters
-		if (!validateParams('wallet_getPermissions', [])) {
-			throw new ProviderRpcError(
-				EIP1193_ERRORS.INVALID_PARAMS.code,
-				'Invalid parameters for wallet_getPermissions'
-			);
-		}
-
-		// Get the origin from the port
-		const origin = port.sender?.url ? new URL(port.sender.url).origin : null;
-		if (!origin) {
-			throw new ProviderRpcError(
-				EIP1193_ERRORS.INVALID_PARAMS.code,
-				'Could not determine origin for permission check'
-			);
-		}
-
-		// Check if the domain is connected
-		const isConnected = await verifyDomainConnected(origin);
-
-		// If connected, return the standard eth_accounts permission
-		if (isConnected) {
-			return [
-				{
-					parentCapability: 'eth_accounts',
-					caveats: []
-				}
-			];
-		}
-
-		// If not connected, return empty array
-		return [];
-	} catch (error) {
-		log.error('Error handling wallet_getPermissions:', false, error);
-		throw error;
-	}
-}
-
-// Request handling functions
-export function resolveEIP6963Request(requestId: string, result: any): void {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for resolveEIP6963Request');
-	}
-	const request = requestManager.getRequest(requestId);
-	if (!request) {
-		throw new ProviderRpcError(4100, 'Request not found');
-	}
-	request.resolve(result);
-	requestManager.removeRequest(requestId);
-}
-
-export function rejectEIP6963Request(requestId: string, error: any): void {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for rejectEIP6963Request');
-	}
-	const request = requestManager.getRequest(requestId);
-	if (!request) {
-		throw new ProviderRpcError(4100, 'Request not found');
-	}
-	request.reject(error);
-	requestManager.removeRequest(requestId);
-}
-
-// Event broadcasting function
-export function broadcastToEIP6963Ports(event: string, data: any, requestId?: string): void {
-	eip6963Ports.forEach((port) => {
-		try {
-			if (port.sender) {
-				port.postMessage({
-					type: 'YAKKL_EVENT:EIP6963',
-					event,
-					data
-				});
-			}
-		} catch (error) {
-			log.error('Error broadcasting to port', false, error);
-		}
-	});
-}
-
-export async function showEIP6963Popup(
-	method: string,
-	params: any[],
-	port: RuntimePort,
-	requestId?: string,
-	pinnedLocation: string = 'M'
-): Promise<any> {
-	// Use the provided request ID or throw an error if none provided
-	if (!requestId) {
-		throw new Error('Request ID is required for EIP-6963 popup');
-	}
-
-	// Check if we already have a pending request with this ID
-	const existingRequest = requestManager.getRequest(requestId);
-	if (existingRequest) {
-		log.info(`Reusing existing request for ID: ${requestId}`, false, {
-			method,
-			requestManager: requestManager,
-			existingRequest: existingRequest
-		});
-
-		return new Promise<any>((resolve, reject) => {
-			existingRequest.resolve = resolve;
-			existingRequest.reject = reject;
-		});
-	}
-
-	// Check for duplicate requests with the same method and params
-	const activeRequests = requestManager.getActiveRequests();
-	const duplicateRequest = activeRequests.find(
-		(req) =>
-			req.data.method === method &&
-			JSON.stringify(req.data.params) === JSON.stringify(params) &&
-			req.data.timestamp > Date.now() - 5000 // Only consider requests from the last 5 seconds
-	);
-
-	if (duplicateRequest) {
-		log.info(`Found duplicate request for method: ${method}`, false, {
-			originalId: duplicateRequest.data.id,
-			newId: requestId
-		});
-		return new Promise<any>((resolve, reject) => {
-			duplicateRequest.resolve = resolve;
-			duplicateRequest.reject = reject;
-		});
-	}
-
-	// Show popup
-	const activeTab = get(activeTabBackgroundStore);
-	const url = activeTab?.url || '';
-	const domain = url ? extractSecureDomain(url) : 'NO DOMAIN - NOT ALLOWED';
-
-	// Ensure params is an array and contains the correct data
-	const requestParams = Array.isArray(params) ? params : [params];
-
-	log.debug('----------- EIP-6963: Request params: ------------', false, {
-		requestParams: requestParams,
-		method: method,
-		params: params
-	});
-
-	const requestData: PendingRequestData = {
-		id: requestId,
-		method,
-		params: requestParams,
-		timestamp: Date.now(),
-		requiresApproval: true,
-		metaData: {
-			method: method,
-			params: requestParams,
-			metaData: {
-				domain: domain,
-				isConnected: await verifyDomainConnected(domain),
-				icon: activeTab?.favIconUrl || '/images/failIcon48x48.png',
-				title: activeTab?.title || 'Not Available',
-				origin: url,
-				message:
-					requestParams && requestParams.length > 0 ? String(requestParams[0]) : 'Not Available'
-			}
-		}
-	};
-
-	// Create a new request with proper resolve/reject handlers
-	const request: BackgroundPendingRequest = {
-		resolve: (result) => {
-			port.postMessage({
-				type: 'YAKKL_RESPONSE:EIP6963',
-				jsonrpc: '2.0',
-				id: requestId,
-				method,
-				result
-			});
-		},
-		reject: (error) => {
-			port.postMessage({
-				type: 'YAKKL_RESPONSE:EIP6963',
-				jsonrpc: '2.0',
-				id: requestId,
-				method,
-				error: {
-					code: -32603,
-					message: error?.message || 'Internal error'
-				}
-			});
-		},
-		port: port as Runtime.Port,
-		data: requestData
-	};
-
-	// Add request to request manager
-	requestManager.addRequest(requestId, request);
-
-	// Show popup based on method
-	let popupUrl = `/dapp/popups/approve.html?requestId=${requestId}&source=eip6963&method=${method}`;
-
-	// Show the popup
-	showPopupForMethod(method, requestId, 'M');
-
-	// Return a promise that resolves when the user approves or rejects
-	return new Promise<any>((resolve, reject) => {
-		const request = requestManager.getRequest(requestId);
-		if (request) {
-			request.resolve = resolve;
-			request.reject = reject;
-		}
-	});
-}
diff --git a/packages/yakkl-wallet/src/lib/extensions/chrome/background-jwt-example.ts b/packages/yakkl-wallet/src/lib/extensions/chrome/background-jwt-example.ts
index 0fcc91c..3fd87f1 100644
--- a/packages/yakkl-wallet/src/lib/extensions/chrome/background-jwt-example.ts
+++ b/packages/yakkl-wallet/src/lib/extensions/chrome/background-jwt-example.ts
@@ -73,7 +73,7 @@ async function createJWTAfterAuth(userDetails: {
 			userDetails.userId,
 			userDetails.username,
 			userDetails.profileId,
-			userDetails.planLevel || 'basic',
+			userDetails.planLevel || 'explorer_member',
 			userDetails.sessionId
 		);
 
diff --git a/packages/yakkl-wallet/src/lib/extensions/chrome/background.ts b/packages/yakkl-wallet/src/lib/extensions/chrome/background.ts
index 2a6231f..40102e4 100644
--- a/packages/yakkl-wallet/src/lib/extensions/chrome/background.ts
+++ b/packages/yakkl-wallet/src/lib/extensions/chrome/background.ts
@@ -1,727 +1,4 @@
 // background.ts - Complete implementation with unified port handling and message deduplication
 import { ensureProcessPolyfill } from '$lib/common/process';
+const browser = getBrowserExt()!;
 ensureProcessPolyfill();
-
-import { initializeEIP6963 } from './eip-6963';
-import { addBackgroundListeners } from '$lib/common/listeners/background/backgroundListeners';
-import { log } from '$lib/managers/Logger';
-import browser from 'webextension-polyfill';
-import { onAlarmListener } from '$lib/common/listeners/background/alarmListeners';
-import type { Runtime } from 'webextension-polyfill';
-import { type ActiveTab } from '$lib/common';
-import { initializePermissions } from '$lib/permissions';
-import { initializeStorageDefaults, watchLockedState } from '$lib/common/backgroundUtils';
-import { getObjectFromLocalStorage } from '$lib/common/backgroundSecuredStorage';
-import { SecurityLevel } from '$lib/permissions/types';
-import { getAlchemyProvider } from '$lib/managers/providers/network/ethereum_provider/alchemy';
-import type { PendingRequestData } from '$lib/common/interfaces';
-import { extractSecureDomain } from '$lib/common/security';
-import { sendErrorResponse } from '$lib/extensions/chrome/errorResponseHandler';
-import {
-	isSimulationMethod,
-	isWriteMethod,
-	isReadMethod
-} from '$lib/extensions/chrome/methodClassification';
-import { handleReadOnlyRequest } from '$lib/common/listeners/background/readMethodHandler';
-import { handleSimulationRequest } from '$lib/common/listeners/background/simulationMethodHandler';
-import { handleWriteRequest } from '$lib/common/listeners/background/writeMethodHandler';
-import { initContextTracker } from './context';
-
-// Type definitions for our unified architecture
-export type RuntimePort = Runtime.Port;
-
-export interface PortInfo {
-	port: RuntimePort;
-	type: 'unified' | 'legacy';
-	lastActivity: number;
-	metadata: {
-		tabId?: number;
-		url?: string;
-		isContentScript: boolean;
-	};
-}
-
-// Connection manager class to handle all port connections
-class ConnectionManager {
-	private ports: Map<string, PortInfo> = new Map();
-	private portIdCounter = 0;
-	private processedMessages = new Map<string, number>();
-	private MESSAGE_DEDUP_THRESHOLD = 500; // ms
-
-	// Register a new port connection
-	public registerPort(port: RuntimePort, sender?: Runtime.MessageSender): string {
-		const portId = `port-${this.portIdCounter++}`;
-
-		const portInfo: PortInfo = {
-			port,
-			type: this.detectPortType(port.name),
-			lastActivity: Date.now(),
-			metadata: {
-				tabId: sender?.tab?.id,
-				url: sender?.url || sender?.tab?.url,
-				isContentScript: sender?.url?.startsWith('chrome-extension://') === false
-			}
-		};
-
-		this.ports.set(portId, portInfo);
-
-		log.debug('Port registered:', false, {
-			portId,
-			type: portInfo.type,
-			metadata: portInfo.metadata
-		});
-
-		return portId;
-	}
-
-	// Detect the type of port based on its name
-	private detectPortType(portName: string): 'unified' | 'legacy' {
-		if (portName === 'yakkl-unified') {
-			return 'unified';
-		}
-		return 'legacy';
-	}
-
-	// Get port info by ID
-	public getPort(portId: string): PortInfo | undefined {
-		return this.ports.get(portId);
-	}
-
-	// Remove a port
-	public removePort(portId: string): void {
-		this.ports.delete(portId);
-		log.debug('Port removed:', false, { portId });
-	}
-
-	// Update port activity
-	public updateActivity(portId: string): void {
-		const portInfo = this.ports.get(portId);
-		if (portInfo) {
-			portInfo.lastActivity = Date.now();
-		}
-	}
-
-	// Clean up inactive ports
-	public cleanupInactivePorts(maxInactiveTime: number = 300000): void {
-		// 5 minutes
-		const now = Date.now();
-		for (const [portId, portInfo] of this.ports.entries()) {
-			if (now - portInfo.lastActivity > maxInactiveTime) {
-				this.removePort(portId);
-			}
-		}
-	}
-
-	// Check if a message is a duplicate
-	public isDuplicateMessage(message: any): boolean {
-		if (!message || !message.type) return false;
-
-		// Skip deduplication for activity and response messages
-		if (
-			message.type === 'USER_ACTIVITY' ||
-			message.type === 'ui_context_activity' ||
-			message.type.includes('RESPONSE')
-		) {
-			return false;
-		}
-
-		// Create a hash based on message type and id
-		const messageId = `${message.type}:${message.id || ''}:${message.contextId || ''}`;
-		const now = Date.now();
-
-		// Check if we've seen this message recently
-		const lastSeen = this.processedMessages.get(messageId);
-		if (lastSeen && now - lastSeen < this.MESSAGE_DEDUP_THRESHOLD) {
-			return true; // Duplicate message
-		}
-
-		// Track this message
-		this.processedMessages.set(messageId, now);
-		return false;
-	}
-
-	// Clean up old message tracking entries
-	public cleanupProcessedMessages(): void {
-		const now = Date.now();
-		const cutoffTime = now - 60000; // 1 minute
-
-		for (const [messageId, timestamp] of this.processedMessages.entries()) {
-			if (timestamp < cutoffTime) {
-				this.processedMessages.delete(messageId);
-			}
-		}
-
-		// Keep map at reasonable size
-		if (this.processedMessages.size > 5000) {
-			const entriesToDelete = this.processedMessages.size - 4000;
-			const entries = Array.from(this.processedMessages.entries())
-				.sort((a, b) => a[1] - b[1])
-				.slice(0, entriesToDelete)
-				.map((entry) => entry[0]);
-
-			for (const messageId of entries) {
-				this.processedMessages.delete(messageId);
-			}
-		}
-	}
-}
-
-// Create our connection manager instance
-const connectionManager = new ConnectionManager();
-
-// Pending requests tracking
-export type BackgroundPendingRequest = {
-	resolve: (value: any) => void;
-	reject: (reason: any) => void;
-	port: RuntimePort;
-	data: PendingRequestData;
-	error?: {
-		code: number;
-		message: string;
-	};
-	result?: any;
-};
-
-export const pendingRequests = new Map<string, BackgroundPendingRequest>();
-
-// Track processed requests to prevent duplicates
-const processedBackgroundRequests = new Set<string>();
-
-// Debug helper - redirects to context.ts
-export function getIdleManagerStatus() {
-	// Import from context.ts
-	const { getIdleStatus } = require('./context');
-	return getIdleStatus();
-}
-
-// Update global debug object to point to the new implementation
-if (typeof self !== 'undefined' && (self as any).YAKKLDebug) {
-	// If debug API already exists, update it
-	(self as any).YAKKLDebug = {
-		...(self as any).YAKKLDebug,
-		idleManager: {
-			getStatus: getIdleManagerStatus
-		}
-	};
-}
-
-// Main port connection handler
-browser.runtime.onConnect.addListener((port: RuntimePort) => {
-	const sender = port.sender;
-	const portId = connectionManager.registerPort(port, sender);
-
-	log.debug('Background: Port connected:', false, {
-		portId,
-		portName: port.name,
-		sender: sender,
-		timestamp: new Date().toISOString()
-	});
-
-	// Set up message listener for this port
-	port.onMessage.addListener(async (message: any) => {
-		try {
-			connectionManager.updateActivity(portId);
-
-			// Extract actual message content if nested
-			const actualMessage = message.message || message;
-
-			// Check for duplicate messages to prevent handling flood
-			if (connectionManager.isDuplicateMessage(actualMessage)) {
-				log.debug('Background: Dropping duplicate message:', false, {
-					type: actualMessage.type
-				});
-				return;
-			}
-
-			log.debug('Background: Message received on port:', false, {
-				portId,
-				type: actualMessage.type,
-				timestamp: new Date().toISOString()
-			});
-
-			// Handle different message sources
-			if (actualMessage.source === 'content' || actualMessage.source === 'provider') {
-				log.debug('Background: Handling provider message:', false, {
-					portId,
-					type: actualMessage.type,
-					timestamp: new Date().toISOString()
-				});
-				await handleProviderMessage(actualMessage, port, portId);
-			} else {
-				// Handle other message types based on the message itself
-				log.debug('Background: Handling general message:', false, {
-					portId,
-					type: actualMessage.type,
-					timestamp: new Date().toISOString()
-				});
-				await handleGeneralMessage(actualMessage, port, portId);
-			}
-		} catch (error) {
-			log.error('Error handling port message:', false, error);
-			sendErrorResponse(port, message.id, error);
-		}
-	});
-
-	// Handle port disconnection
-	port.onDisconnect.addListener(() => {
-		log.debug('Background: Port disconnected:', false, {
-			portId,
-			timestamp: new Date().toISOString()
-		});
-
-		connectionManager.removePort(portId);
-
-		// Clean up any pending requests for this port
-		cleanupPendingRequestsForPort(port);
-	});
-});
-
-// Handle provider-specific messages
-async function handleProviderMessage(message: any, port: RuntimePort, portId: string) {
-	// Skip duplicate requests
-	if (message.id && processedBackgroundRequests.has(message.id)) {
-		log.debug('Background: Skipping duplicate request:', false, {
-			requestId: message.id,
-			method: message.method
-		});
-		return;
-	}
-
-	if (message.id) {
-		processedBackgroundRequests.add(message.id);
-	}
-
-	// Handle different message types
-	switch (message.type) {
-		case 'YAKKL_REQUEST:EIP6963':
-		case 'YAKKL_REQUEST:EIP1193':
-			// Route to appropriate handler based on method type
-			const method = message.method;
-
-			if (!method) {
-				log.warn('No method specified in provider message:', false, message);
-				sendErrorResponse(port, message.id, new Error('Method is required'));
-				return;
-			}
-
-			try {
-				if (isSimulationMethod(method)) {
-					await handleSimulationRequest(message, port);
-				} else if (isWriteMethod(method)) {
-					await handleWriteRequest(message, port);
-				} else if (isReadMethod(method)) {
-					await handleReadOnlyRequest(message, port);
-				} else {
-					log.warn('Unknown provider method:', false, { method });
-					sendErrorResponse(port, message.id, new Error(`Unknown method: ${method}`));
-				}
-			} catch (error) {
-				log.error('Error handling provider message:', false, error);
-				sendErrorResponse(port, message.id, error);
-			}
-			break;
-
-		case 'CONNECTION_TEST':
-			// Respond to connection test
-			port.postMessage({
-				type: 'CONNECTION_TEST_RESPONSE',
-				id: message.id
-			});
-			break;
-
-		case 'clientReady':
-			// Client is ready, just acknowledge
-			port.postMessage({
-				type: 'clientReady_response',
-				id: message.id,
-				success: true
-			});
-			break;
-
-		default:
-			// Handle through unified message handler
-			await handleUnknownMessage(message, port, portId);
-	}
-}
-
-// Handle general messages (not provider-specific)
-async function handleGeneralMessage(message: any, port: RuntimePort, portId: string) {
-	// Extract actual message if needed
-	const actualMessage = message.message || message;
-
-	// List of one-way messages that should always get immediate responses
-	const oneWayMessages = [
-		'clientReady',
-		'ui_context_initialized',
-		'ui_context_activity',
-		'ui_context_closing',
-		'SET_LOGIN_VERIFIED',
-		'USER_ACTIVITY'
-	];
-
-	// Check if this is a one-way message type
-	if (oneWayMessages.includes(actualMessage.type)) {
-		// Send immediate acknowledgment response
-		try {
-			port.postMessage({
-				type: `${actualMessage.type}_response`,
-				id: actualMessage.id || actualMessage.messageId,
-				success: true
-			});
-		} catch (err) {
-			// If port is closed, ignore the error
-		}
-	}
-
-	// Then proceed with regular message handling
-	switch (actualMessage.type) {
-		case 'SECURITY_CONFIG_REQUEST':
-			// Handle security configuration requests
-			const securityLevel = await getSecurityLevel();
-			port.postMessage({
-				type: 'SECURITY_CONFIG_RESPONSE',
-				securityLevel,
-				injectIframes: shouldInjectIframes(securityLevel)
-			});
-			break;
-
-		case 'YAKKL_RESPONSE:EIP6963':
-		case 'YAKKL_RESPONSE:EIP1193':
-			await handleProviderResponse(actualMessage, port, portId);
-			break;
-
-		case 'clientReady':
-			// Client is ready, already acknowledged above
-			break;
-
-		case 'ui_context_initialized':
-		case 'ui_context_activity':
-		case 'ui_context_closing':
-		case 'SET_LOGIN_VERIFIED':
-		case 'USER_ACTIVITY':
-		case 'IDLE_MANAGER_START':
-		case 'GET_IDLE_STATUS':
-			// These are handled by context tracker, no need to handle again
-			break;
-
-		default:
-			// Try legacy handlers or handle unknown message
-			await handleUnknownMessage(actualMessage, port, portId);
-	}
-}
-
-// New function to handle unknown message types
-async function handleUnknownMessage(message: any, port: RuntimePort, portId: string) {
-	// Log unknown message types, but only once per type to avoid log flooding
-	const seenUnknownMessageTypes = new Map<string, number>();
-	const now = Date.now();
-
-	// Only log unknown message types once per minute
-	if (
-		!seenUnknownMessageTypes.has(message.type) ||
-		now - seenUnknownMessageTypes.get(message.type)! > 60000
-	) {
-		log.debug('Unknown message type received:', false, {
-			type: message.type,
-			portId
-		});
-		seenUnknownMessageTypes.set(message.type, now);
-	}
-
-	// Keep the map size reasonable
-	if (seenUnknownMessageTypes.size > 100) {
-		const oldestTypesToRemove = Array.from(seenUnknownMessageTypes.entries())
-			.sort((a, b) => a[1] - b[1])
-			.slice(0, 50)
-			.map((entry) => entry[0]);
-
-		for (const type of oldestTypesToRemove) {
-			seenUnknownMessageTypes.delete(type);
-		}
-	}
-}
-
-// Add this new function to handle provider responses
-async function handleProviderResponse(response: any, port: RuntimePort, portId: string) {
-	const { id, result, error } = response;
-
-	log.debug('Handling provider response:', false, {
-		id,
-		hasResult: result !== undefined,
-		hasError: error !== undefined,
-		portId,
-		timestamp: new Date().toISOString()
-	});
-
-	// Find the pending request
-	const pendingRequest = pendingRequests.get(id);
-	if (!pendingRequest) {
-		log.warn('No pending request found for response:', false, { id });
-		return;
-	}
-
-	// Forward the response back through the original port that made the request
-	const originalPort = pendingRequest.port;
-
-	try {
-		log.debug('Forwarding response to original port:', false, {
-			id,
-			originalPortName: originalPort.name,
-			currentPortName: port.name,
-			timestamp: new Date().toISOString()
-		});
-
-		originalPort.postMessage(response);
-
-		// Clean up the pending request
-		pendingRequests.delete(id);
-
-		log.debug('Response forwarded successfully', false, { id });
-	} catch (error) {
-		log.error('Failed to forward response:', false, {
-			id,
-			error,
-			originalPortDisconnected: !originalPort.name
-		});
-
-		// If the original port is disconnected, clean up
-		pendingRequests.delete(id);
-	}
-}
-
-// Helper function to get tab information for a port
-async function getTabInfoForPort(portInfo: any): Promise<{
-	domain: string;
-	url: string;
-	title: string;
-	icon: string;
-}> {
-	try {
-		if (portInfo?.metadata?.tabId) {
-			const tab = await browser.tabs.get(portInfo.metadata.tabId);
-			return {
-				domain: extractSecureDomain(tab.url || ''),
-				url: tab.url || '',
-				title: tab.title || 'Unknown',
-				icon: tab.favIconUrl || '/images/failIcon48x48.png'
-			};
-		}
-	} catch (error) {
-		log.error('Error getting tab info:', false, error);
-	}
-
-	// Return defaults if we can't get tab info
-	return {
-		domain: 'Unknown',
-		url: '',
-		title: 'Unknown',
-		icon: '/images/failIcon48x48.png'
-	};
-}
-
-// Helper function to get approval message for different methods
-function getApprovalMessage(method: string, params?: any[]): string {
-	switch (method) {
-		case 'personal_sign':
-			return params?.[0] ? String(params[0]) : 'Sign Message';
-		case 'eth_signTypedData_v4':
-			return 'Sign Typed Data';
-		case 'eth_sendTransaction':
-			return 'Send Transaction';
-		default:
-			return 'Approve Request';
-	}
-}
-
-// Clean up pending requests for a disconnected port
-function cleanupPendingRequestsForPort(port: RuntimePort) {
-	for (const [id, request] of pendingRequests.entries()) {
-		if (request.port === port) {
-			pendingRequests.delete(id);
-			log.debug('Cleaned up pending request:', false, { id });
-		}
-	}
-}
-
-interface SecuritySettings {
-	level: SecurityLevel;
-	lastUpdated?: number;
-	// Add any other security settings properties here
-}
-
-// Create a dedicated function for getting security settings
-async function getSecuritySettings(): Promise<SecuritySettings | null> {
-	try {
-		const data = await getObjectFromLocalStorage('securitySettings');
-
-		// Validate the structure
-		if (!data || typeof data !== 'object') {
-			return null;
-		}
-
-		// Check if 'level' exists and is a valid SecurityLevel
-		if ('level' in data && Object.values(SecurityLevel).includes((data as any).level)) {
-			return data as SecuritySettings;
-		}
-
-		return null;
-	} catch (error) {
-		console.error('Error retrieving security settings:', error);
-		return null;
-	}
-}
-
-// Your main function becomes simpler and more type-safe
-async function getSecurityLevel(): Promise<SecurityLevel> {
-	const settings = await getSecuritySettings();
-	return settings?.level || SecurityLevel.MEDIUM;
-}
-
-// Determine if iframes should be injected based on security level
-function shouldInjectIframes(securityLevel: SecurityLevel): boolean {
-	switch (securityLevel) {
-		case SecurityLevel.HIGH:
-			return false;
-		case SecurityLevel.MEDIUM:
-		case SecurityLevel.STANDARD:
-			return true;
-		default:
-			return true;
-	}
-}
-
-// Setup provider event broadcasting
-function setupProviderEvents() {
-	const provider = getAlchemyProvider();
-
-	// Listen for provider events and broadcast them
-	provider.on('accountsChanged', (accounts: string[]) => {
-		broadcastEvent('accountsChanged', accounts);
-	});
-
-	provider.on('chainChanged', (chainId: string) => {
-		broadcastEvent('chainChanged', chainId);
-	});
-
-	provider.on('connect', (connectInfo: { chainId: string }) => {
-		broadcastEvent('connect', connectInfo);
-	});
-
-	provider.on('disconnect', (error: { code: number; message: string }) => {
-		broadcastEvent('disconnect', error);
-	});
-}
-
-// Broadcast events to all connected ports
-function broadcastEvent(eventName: string, data: any) {
-	const event = {
-		type: 'YAKKL_EVENT:EIP6963',
-		event: eventName,
-		data
-	};
-
-	// Send to all connected ports
-	for (const [portId, portInfo] of Object.entries(connectionManager['ports'])) {
-		try {
-			portInfo.port.postMessage(event);
-		} catch (error) {
-			log.debug('Failed to send event to port:', false, error);
-		}
-	}
-}
-
-// Initialize background script
-async function initializeBackground() {
-	try {
-		log.debug('Initializing background script...', false);
-
-		if (typeof chrome !== 'undefined' && chrome.sidePanel) {
-			log.info('Background initializing: chrome.sidePanel is defined');
-			chrome.sidePanel.setPanelBehavior({ openPanelOnActionClick: true }); // Using sidepanel as default now
-		}
-
-		// Initialize core components
-		await initializeStorageDefaults();
-		initializePermissions();
-		initializeEIP6963();
-
-		// Add listeners
-		addBackgroundListeners();
-		browser.alarms.onAlarm.addListener(onAlarmListener);
-
-		// Setup provider events
-		setupProviderEvents();
-
-		// Start periodic cleanup
-		setInterval(() => {
-			connectionManager.cleanupInactivePorts();
-			connectionManager.cleanupProcessedMessages();
-			cleanupOldProcessedRequests();
-		}, 60000); // Every minute
-
-		// Watch locked state
-		await watchLockedState(2 * 60 * 1000);
-
-		initContextTracker();
-
-		log.debug('Background script initialized successfully', false);
-	} catch (error) {
-		log.error('Failed to initialize background script:', false, error);
-	}
-}
-
-// Clean up old processed requests
-function cleanupOldProcessedRequests() {
-	const now = Date.now();
-
-	// Clean up pending requests older than 5 minutes
-	for (const [id, request] of pendingRequests.entries()) {
-		if (now - request.data.timestamp > 300000) {
-			pendingRequests.delete(id);
-			log.debug('Cleaned up stale pending request:', false, { id });
-		}
-	}
-
-	// Keep processed requests set reasonable size
-	if (processedBackgroundRequests.size > 5000) {
-		const toRemove = processedBackgroundRequests.size - 4000;
-		const iterator = processedBackgroundRequests.values();
-		for (let i = 0; i < toRemove; i++) {
-			processedBackgroundRequests.delete(iterator.next().value);
-		}
-	}
-}
-
-// Get active tab information - unifiedMessageListener handles this now but keep for possible future use
-async function getActiveTab(): Promise<ActiveTab | null> {
-	try {
-		const tabs = await browser.tabs.query({ active: true });
-
-		if (tabs.length > 0) {
-			const realTab = tabs.find((t) => !t.url?.startsWith('chrome-extension://'));
-			if (realTab && browser.windows) {
-				const win = await browser.windows.get(realTab.windowId);
-				return {
-					tabId: realTab.id,
-					windowId: realTab.windowId,
-					windowType: win.type,
-					url: realTab.url,
-					title: realTab.title,
-					favIconUrl: realTab.favIconUrl,
-					dateTime: new Date().toISOString()
-				};
-			}
-		}
-
-		return null;
-	} catch (error) {
-		log.error('Error getting active tab:', false, error);
-		return null;
-	}
-}
-
-// Export the connection manager for testing and debugging
-(globalThis as any).connectionManager = connectionManager;
-
-// Initialize immediately on load
-initializeBackground();
diff --git a/packages/yakkl-wallet/src/lib/extensions/chrome/backgroundStorageHandler.ts b/packages/yakkl-wallet/src/lib/extensions/chrome/backgroundStorageHandler.ts
index 7682f1f..93a1ff2 100644
--- a/packages/yakkl-wallet/src/lib/extensions/chrome/backgroundStorageHandler.ts
+++ b/packages/yakkl-wallet/src/lib/extensions/chrome/backgroundStorageHandler.ts
@@ -1,135 +1,6 @@
 // background-storage-handler.ts
-import browser from 'webextension-polyfill';
-import type { Runtime } from 'webextension-polyfill';
+import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
+import type { Runtime } from '$lib/types/browser-types';
 import type { StorageRequest, StorageResponse } from '$lib/common/storageTypes';
+const browser = getBrowserExt()!;
 
-export class BackgroundStorageHandler {
-	private static instance: BackgroundStorageHandler;
-	private syncQueue: Set<string> = new Set();
-	private syncInProgress = false;
-
-	private constructor() {
-		this.initialize();
-	}
-
-	static getInstance(): BackgroundStorageHandler {
-		if (!BackgroundStorageHandler.instance) {
-			BackgroundStorageHandler.instance = new BackgroundStorageHandler();
-		}
-		return BackgroundStorageHandler.instance;
-	}
-
-	private initialize() {
-		browser.runtime.onConnect.addListener((port) => {
-			if (port.name !== 'yakkl-storage-port') return;
-			this.handlePortConnection(port);
-		});
-	}
-
-	private async handlePortConnection(port: Runtime.Port) {
-		port.onMessage.addListener(async (message: unknown, _port: Runtime.Port) => {
-			try {
-				const request = message as StorageRequest & { requestId: string };
-				const response = await this.handleStorageRequest(request);
-				port.postMessage({ ...response, requestId: request.requestId });
-			} catch (error: unknown) {
-				port.postMessage({
-					success: false,
-					error: {
-						code: 'STORAGE_ERROR',
-						message: error instanceof Error ? error.message : 'Unknown error'
-					},
-					requestId: (message as { requestId?: string })?.requestId || 'unknown'
-				});
-			}
-		});
-	}
-
-	private async handleStorageRequest(request: StorageRequest): Promise<StorageResponse> {
-		switch (request.action) {
-			case 'get': {
-				const local = await this.getLocal(request.key!);
-				if (request.storageType === 'both' || request.storageType === 'remote') {
-					// Add remote fetch logic here when implementing Cloudflare Workers
-					const remote = await this.getRemote(request.key!);
-					// Merge logic here
-				}
-				return {
-					success: true,
-					data: local,
-					source: 'local',
-					metadata: {
-						timestamp: Date.now()
-					}
-				};
-			}
-			case 'set': {
-				await this.setLocal(request.key!, request.value);
-				if (request.storageType === 'both' || request.storageType === 'remote') {
-					this.queueSync(request.key!);
-				}
-				return {
-					success: true,
-					metadata: {
-						timestamp: Date.now(),
-						synced: request.storageType === 'local'
-					}
-				};
-			}
-			case 'remove': {
-				await this.removeLocal(request.key!);
-				if (request.storageType === 'both' || request.storageType === 'remote') {
-					this.queueSync(request.key!);
-				}
-				return {
-					success: true,
-					metadata: {
-						timestamp: Date.now(),
-						synced: request.storageType === 'local'
-					}
-				};
-			}
-			// Add other actions...
-		}
-	}
-
-	private async getLocal(key: string): Promise<any> {
-		const result = await browser.storage.local.get(key);
-		return result[key];
-	}
-
-	private async setLocal(key: string, value: any): Promise<void> {
-		await browser.storage.local.set({ [key]: value });
-	}
-
-	private async getRemote(key: string): Promise<any> {
-		// Implement Cloudflare Workers fetch logic here
-		return null;
-	}
-
-	private queueSync(key: string) {
-		this.syncQueue.add(key);
-		if (!this.syncInProgress) {
-			this.startSync();
-		}
-	}
-
-	private async startSync() {
-		if (this.syncInProgress || this.syncQueue.size === 0) return;
-
-		this.syncInProgress = true;
-		try {
-			// Implement sync logic with Cloudflare Workers
-			// Could include batching, retry logic, etc.
-		} finally {
-			this.syncInProgress = false;
-			if (this.syncQueue.size > 0) {
-				this.startSync();
-			}
-		}
-	}
-
-	private async removeLocal(key: string): Promise<void> {
-		await browser.storage.local.remove(key);
-	}
-}
diff --git a/packages/yakkl-wallet/src/lib/extensions/chrome/content.ts b/packages/yakkl-wallet/src/lib/extensions/chrome/content.ts
index 58be975..670dc44 100644
--- a/packages/yakkl-wallet/src/lib/extensions/chrome/content.ts
+++ b/packages/yakkl-wallet/src/lib/extensions/chrome/content.ts
@@ -6,7 +6,7 @@ import { Duplex } from 'readable-stream';
 import { WALLET_SECURITY_CONFIG, YAKKL_DAPP } from '$lib/common/constants';
 import type { SecurityLevel } from '$lib/permissions/types';
 import { SecurityLevel as SecurityLevelEnum } from '$lib/permissions/types';
-import browser, { type Runtime } from 'webextension-polyfill';
+import browser, { type Runtime } from '$lib/types/browser-types';
 import { log } from '$lib/managers/Logger';
 import { isExtensionContextValid } from '$lib/common';
 import {
diff --git a/packages/yakkl-wallet/src/lib/extensions/chrome/context.ts b/packages/yakkl-wallet/src/lib/extensions/chrome/context.ts
index 45d2052..5287223 100644
--- a/packages/yakkl-wallet/src/lib/extensions/chrome/context.ts
+++ b/packages/yakkl-wallet/src/lib/extensions/chrome/context.ts
@@ -1,1545 +1,6 @@
 import { log } from '$lib/common/logger-wrapper';
-import browser from 'webextension-polyfill';
-import type { Runtime } from 'webextension-polyfill';
+import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
+import type { Runtime } from '$lib/types/browser-types';
 import {
+const browser = getBrowserExt()!;
 	TIMER_IDLE_THRESHOLD,
-	TIMER_IDLE_LOCK_DELAY,
-	TIMER_IDLE_CHECK_INTERVAL
-} from '$lib/common';
-import { NotificationService } from '$lib/common/notifications';
-import { protectedContexts } from '$lib/common/globals';
-
-// Helper function to check if context needs idle protection
-function needsIdleProtection(contextType: string): boolean {
-	return protectedContexts.includes(contextType);
-}
-
-// Define the context info type
-export interface ContextInfo {
-	id: string;
-	type: 'sidepanel' | 'popup-wallet' | 'popup-dapp' | 'options' | 'devtools' | 'unknown' | string;
-	windowId?: number;
-	tabId?: number;
-	url?: string;
-	createdAt: number;
-	lastActive: number;
-}
-
-// Track active UI contexts
-const activeContexts = new Map<string, ContextInfo>();
-
-// Message deduplication - simplified and more robust
-const recentMessages = new Map<string, number>();
-const MESSAGE_DEDUP_WINDOW = 1000; // 1 second window
-const MAX_RECENT_MESSAGES = 500; // Limit memory usage
-
-// Idle management state
-let isLockdownInitiated: boolean = false;
-let isLoginVerified: boolean = false;
-let previousState: IdleState = 'active';
-let lastActivity: number = Date.now();
-let stateChangeListener: ((state: IdleState) => void) | null = null;
-let activityCheckTimer: number | null = null;
-let idleThreshold: number = TIMER_IDLE_THRESHOLD;
-let idleLockDelay: number = TIMER_IDLE_LOCK_DELAY;
-
-// Add state management locks to prevent race conditions
-let isProcessingStateChange = false;
-let isCleaningUp = false;
-let pendingCleanupPromise: Promise<void> | null = null;
-
-// Add debounce tracking with better logic
-let lastStateChangeTime = 0;
-const STATE_CHANGE_DEBOUNCE = 3000; // Reduced from 5s to 3s
-const CLEANUP_THROTTLE = 2000; // Throttle cleanup operations
-
-type IdleState = 'active' | 'idle' | 'locked';
-
-/**
- * Initialize the context and idle tracker module
- */
-export function initContextTracker() {
-	try {
-		// Set up message listener for context messages
-		browser.runtime.onMessage.addListener(handleContextMessage);
-
-		// Listen for window removal to clean up
-		if (browser.windows && browser.windows.onRemoved) {
-			browser.windows.onRemoved.addListener(handleWindowRemoved);
-		}
-
-		// Set up alarm listener for lockdown and keepalive
-		if (browser.alarms && browser.alarms.onAlarm) {
-			browser.alarms.onAlarm.addListener((alarm) => {
-				log.info('[IdleManager] Alarm received:', false, alarm);
-				if (alarm.name === 'yakkl-lock-alarm') {
-					log.info('[IdleManager] Executing lockdown from alarm');
-					executeLockdown().catch((error) => {
-						log.error('[IdleManager] Error executing lockdown from alarm:', false, error);
-					});
-				} else if (alarm.name === 'yakkl-lock-notification') {
-					log.info('[IdleManager] Sending lockdown warning from alarm');
-					NotificationService.sendLockdownWarning(idleLockDelay);
-				} else if (alarm.name === 'yakkl-keepalive') {
-					// Keepalive alarm - just log to keep service worker active
-					log.debug('[ContextTracker]  Keepalive alarm - checking idle state');
-
-					// If we have protected contexts and login is verified, check inactivity
-					if (isLoginVerified) {
-						checkInactivity().catch((error) => {
-							log.error('[ContextTracker] Error in keepalive activity check:', false, error);
-						});
-					}
-				}
-			});
-		}
-
-		log.info('[ContextTracker]  INITIALIZED with idle threshold:', false, {
-			threshold: idleThreshold / 1000,
-			lockDelay: idleLockDelay / 1000,
-			browserIdleSupported: !!(browser.idle && browser.idle.setDetectionInterval),
-			alarmSupported: !!(browser.alarms && browser.alarms.onAlarm),
-			notificationSupported: !!browser.notifications
-		});
-
-		// Start cleanup interval for processed messages
-		setInterval(cleanupRecentMessages, 30000); // Clean every 30 seconds
-
-		// Initialize debugging API
-		initializeDebugAPI();
-	} catch (error) {
-		log.error('[ContextTracker] Failed to initialize:', false, error);
-	}
-}
-
-/**
- * Clean up old message tracking entries - simplified and more efficient
- */
-function cleanupRecentMessages() {
-	try {
-		const now = Date.now();
-		const cutoffTime = now - MESSAGE_DEDUP_WINDOW * 2; // Keep extra buffer
-
-		// Remove old entries
-		for (const [messageId, timestamp] of recentMessages.entries()) {
-			if (timestamp < cutoffTime) {
-				recentMessages.delete(messageId);
-			}
-		}
-
-		// Ensure the map doesn't grow too large
-		if (recentMessages.size > MAX_RECENT_MESSAGES) {
-			// Keep only the most recent messages
-			const entries = Array.from(recentMessages.entries())
-				.sort((a, b) => b[1] - a[1]) // Sort by timestamp (newest first)
-				.slice(0, MAX_RECENT_MESSAGES);
-
-			recentMessages.clear();
-			entries.forEach(([id, timestamp]) => {
-				recentMessages.set(id, timestamp);
-			});
-		}
-	} catch (error) {
-		log.warn('[ContextTracker] Error during cleanup:', false, error);
-	}
-}
-
-/**
- * Check if a message is a duplicate - simplified logic
- */
-function isDuplicateMessage(message: any): boolean {
-	try {
-		// Always allow activity messages
-		if (message.type === 'USER_ACTIVITY' || message.type === 'ui_context_activity') {
-			return false;
-		}
-
-		// Create a simple message ID
-		const messageId = `${message.type}:${message.contextId || 'global'}`;
-		const now = Date.now();
-
-		// Check if we've seen this message recently
-		const lastSeen = recentMessages.get(messageId);
-		if (lastSeen && now - lastSeen < MESSAGE_DEDUP_WINDOW) {
-			return true; // Duplicate message
-		}
-
-		// Track this message
-		recentMessages.set(messageId, now);
-		return false;
-	} catch (error) {
-		log.warn('[ContextTracker] Error checking duplicate message:', false, error);
-		return false; // If we can't check, allow the message through
-	}
-}
-
-/**
- * Handle messages related to contexts and idle management
- */
-function handleContextMessage(
-	message: any,
-	sender: Runtime.MessageSender,
-	sendResponse: (response?: any) => void
-): true | undefined {
-	try {
-		// Extract wrapped message if needed
-		const actualMessage = message.message || message;
-
-		// Validate message format
-		if (!actualMessage || typeof actualMessage !== 'object') {
-			return undefined;
-		}
-
-		// Check for duplicate messages to prevent handling flood
-		if (isDuplicateMessage(actualMessage)) {
-			if (actualMessage.type !== 'CLEAR_ALL_ENHANCED_ALERTS') {
-				log.debug('[ContextTracker] Dropping duplicate message:', false, {
-					type: actualMessage.type
-				});
-			}
-			sendResponse({ success: false, error: 'Duplicate message' });
-			return true;
-		}
-
-		// Handle context initialization messages
-		if (actualMessage.type === 'ui_context_initialized') {
-			sendResponse({ success: true });
-			setTimeout(() => registerContext(actualMessage, sender), 0);
-			return true;
-		}
-
-		// Handle context activity
-		if (actualMessage.type === 'ui_context_activity' || actualMessage.type === 'USER_ACTIVITY') {
-			sendResponse({ success: true });
-			setTimeout(() => updateContextActivity(actualMessage), 0);
-			return true;
-		}
-
-		// Handle context closing
-		if (actualMessage.type === 'ui_context_closing') {
-			sendResponse({ success: true });
-			setTimeout(() => removeContext(actualMessage), 0);
-			return true;
-		}
-
-		// Handle login verification
-		if (actualMessage.type === 'SET_LOGIN_VERIFIED') {
-			log.info('[ContextTracker] SET_LOGIN_VERIFIED received:', false, actualMessage);
-			sendResponse({ success: true });
-			setTimeout(() => setLoginVerified(actualMessage.verified, actualMessage.contextId), 0);
-			return true;
-		}
-
-		// Handle IDLE_MANAGER_START
-		if (actualMessage.type === 'IDLE_MANAGER_START') {
-			const context = activeContexts.get(actualMessage.contextId);
-			if (context && context.type === 'popup-wallet') {
-				sendResponse({ success: false, message: 'Idle manager not supported in popup wallet' });
-				return true;
-			}
-
-			log.info(
-				`[ContextTracker] Starting idle manager from ${actualMessage.contextId || 'unknown'}`
-			);
-			sendResponse({ success: true, message: 'Idle manager started' });
-			setTimeout(() => setLoginVerified(true), 0);
-			return true;
-		}
-
-		// Handle status request
-		if (actualMessage.type === 'GET_IDLE_STATUS') {
-			sendResponse(getIdleStatus());
-			return true;
-		}
-
-		// Handle clientReady message
-		if (actualMessage.type === 'clientReady') {
-			sendResponse({ success: true, clientReady: true });
-			return true;
-		}
-
-		// Not our message
-		return undefined;
-	} catch (error) {
-		log.error('[ContextTracker] Error handling context message:', false, error);
-		try {
-			sendResponse({ success: false, error: 'Internal error' });
-		} catch (responseError) {
-			log.error('[ContextTracker] Error sending error response:', false, responseError);
-		}
-		return true;
-	}
-}
-
-/**
- * Handle window removal events
- */
-function handleWindowRemoved(windowId: number) {
-	try {
-		// Find and remove any contexts associated with this window
-		for (const [contextId, contextInfo] of activeContexts.entries()) {
-			if (contextInfo.windowId === windowId) {
-				activeContexts.delete(contextId);
-				log.info(`[ContextTracker] Context ${contextId} removed due to window close`);
-
-				// Notify other contexts (async, non-blocking)
-				setTimeout(() => {
-					broadcastToOtherContexts(
-						'context_removed',
-						{
-							id: contextId,
-							type: contextInfo.type
-						},
-						contextId
-					);
-				}, 0);
-			}
-		}
-	} catch (error) {
-		log.error('[ContextTracker] Error handling window removal:', false, error);
-	}
-}
-
-/**
- * Register a new UI context
- */
-function registerContext(message: any, sender: Runtime.MessageSender) {
-	try {
-		// Improve context type detection
-		let contextType = message.contextType;
-
-		// If context type is unknown but we have URL info, try to detect it
-		if (contextType === 'unknown' && sender.url) {
-			if (sender.url.includes('sidepanel')) {
-				contextType = 'sidepanel';
-			} else if (sender.url.includes('index.html') || sender.url.endsWith('/')) {
-				contextType = 'popup-wallet';
-			} else if (sender.url.includes('dapp/popups')) {
-				contextType = 'popup-dapp';
-			} else if (sender.url.includes('options')) {
-				contextType = 'options';
-			} else {
-				contextType = 'popup-wallet';
-			}
-			log.info(
-				`[ContextTracker] Corrected context type from 'unknown' to '${contextType}' based on URL: ${sender.url}`
-			);
-		}
-
-		const contextInfo: ContextInfo = {
-			id: message.contextId,
-			type: contextType,
-			windowId: sender.tab?.windowId,
-			tabId: sender.tab?.id,
-			url: sender.url,
-			createdAt: message.timestamp || Date.now(),
-			lastActive: Date.now()
-		};
-
-		// Store the context info
-		activeContexts.set(message.contextId, contextInfo);
-
-		log.info(`[ContextTracker] UI Context initialized: ${contextType}`, false, contextInfo);
-
-		// Broadcast to other contexts (async, non-blocking)
-		setTimeout(() => {
-			broadcastToOtherContexts(
-				'context_added',
-				{
-					id: message.contextId,
-					type: contextType
-				},
-				message.contextId
-			);
-		}, 0);
-	} catch (error) {
-		log.error('[ContextTracker] Error registering context:', false, error);
-	}
-}
-
-/**
- * Update a context's activity timestamp
- */
-async function updateContextActivity(message: any) {
-	try {
-		const contextId = message.contextId;
-		const now = Date.now();
-
-		// Update context activity
-		if (activeContexts.has(contextId)) {
-			const context = activeContexts.get(contextId)!;
-			context.lastActive = now;
-			activeContexts.set(contextId, context);
-		} else {
-			// If context not found, register it
-			const contextType = message.contextType || 'unknown';
-			activeContexts.set(contextId, {
-				id: contextId,
-				type: contextType,
-				createdAt: now,
-				lastActive: now
-			});
-		}
-
-		// Only update global activity for protected contexts
-		const context = activeContexts.get(contextId);
-		if (context && needsIdleProtection(context.type)) {
-			// Update global last activity timestamp
-			lastActivity = now;
-
-			// Clear lockdown state if needed
-			if (isLockdownInitiated) {
-				log.info('[ContextTracker] User activity detected, clearing lockdown state');
-				await clearLockdownState();
-			}
-
-			// If we were inactive and now detected activity
-			if (previousState !== 'active') {
-				handleStateChanged('active').catch((error) => {
-					log.error('[ContextTracker] Error handling state change to active:', false, error);
-				});
-			}
-		}
-	} catch (error) {
-		log.error('[ContextTracker] Error updating context activity:', false, error);
-	}
-}
-
-/**
- * Clear lockdown state with proper error handling
- */
-async function clearLockdownState(): Promise<void> {
-	if (isCleaningUp) {
-		// If already cleaning up, wait for it to complete
-		if (pendingCleanupPromise) {
-			await pendingCleanupPromise;
-		}
-		return;
-	}
-
-	isCleaningUp = true;
-	const now = Date.now();
-
-	try {
-		pendingCleanupPromise = (async () => {
-			// Clear any pending lockdown FIRST
-			cancelPendingLockdown();
-
-			// Clear alarms
-			try {
-				if (browser.alarms) {
-					await Promise.all([
-						browser.alarms.clear('yakkl-lock-alarm'),
-						browser.alarms.clear('yakkl-lock-notification'),
-						browser.alarms.clear('yakkl-keepalive')
-					]);
-				}
-			} catch (error) {
-				log.warn('[ContextTracker] Error clearing alarms:', false, error);
-			}
-
-			// Clear notifications using enhanced method
-			try {
-				await NotificationService.clearAllAlertsEnhanced();
-			} catch (error) {
-				log.warn('[ContextTracker] Error clearing notifications:', false, error);
-			}
-
-			// Reset badge and icon
-			try {
-				if (browser.action) {
-					await Promise.all([
-						browser.action.setBadgeText({ text: '' }),
-						browser.action.setIcon({
-							path: {
-								16: '/images/logoBullFav16x16.png',
-								32: '/images/logoBullFav32x32.png',
-								48: '/images/logoBullFav48x48.png',
-								96: '/images/logoBullFav96x96.png',
-								128: '/images/logoBullFav128x128.png'
-							}
-						})
-					]);
-				}
-			} catch (error) {
-				log.warn('[ContextTracker] Error resetting badge/icon:', false, error);
-			}
-
-			// Send clear message to UI contexts (throttled)
-			const shouldSendClearMessage =
-				now - (clearLockdownState as any).lastClearTime > CLEANUP_THROTTLE;
-			if (shouldSendClearMessage) {
-				(clearLockdownState as any).lastClearTime = now;
-
-				const clearPromises = [];
-				for (const [_, contextInfo] of activeContexts.entries()) {
-					if (contextInfo.tabId && contextInfo.id) {
-						clearPromises.push(
-							browser.tabs
-								.sendMessage(contextInfo.tabId, {
-									type: 'CLEAR_ALL_ENHANCED_ALERTS',
-									timestamp: now,
-									source: 'user_activity',
-									targetContextTypes: [contextInfo.type]
-								})
-								.catch(() => {}) // Ignore errors
-						);
-					}
-				}
-				await Promise.allSettled(clearPromises);
-			}
-
-			// Restart idle detection if login is verified
-			if (isLoginVerified) {
-				startIdleDetection();
-			}
-
-			// Reset state
-			isLockdownInitiated = false;
-			previousState = 'active';
-
-			// Start pricing checks
-			try {
-				await browser.runtime.sendMessage({ type: 'startPricingChecks' });
-			} catch (error) {
-				log.debug('[ContextTracker] Error sending startPricingChecks message:', false, error);
-			}
-
-			log.info('[ContextTracker] Lockdown state cleared successfully');
-		})();
-
-		await pendingCleanupPromise;
-	} finally {
-		isCleaningUp = false;
-		pendingCleanupPromise = null;
-	}
-}
-
-// Initialize the lastClearTime property
-(clearLockdownState as any).lastClearTime = 0;
-
-/**
- * Remove a context
- */
-function removeContext(message: any) {
-	try {
-		const contextId = message.contextId;
-		if (activeContexts.has(contextId)) {
-			const removedContext = activeContexts.get(contextId)!;
-			activeContexts.delete(contextId);
-
-			log.info(`[ContextTracker] UI Context closed: ${removedContext.type}`, false, removedContext);
-
-			// Check if we still have any protected contexts
-			const hasProtectedContexts = Array.from(activeContexts.values()).some((context) =>
-				needsIdleProtection(context.type)
-			);
-
-			// If no more protected contexts, stop idle detection
-			if (!hasProtectedContexts) {
-				log.info('[ContextTracker] No more protected contexts, stopping idle detection');
-				stopIdleDetection();
-				isLoginVerified = false; // Reset login verification
-			}
-
-			// Notify other contexts (async, non-blocking)
-			setTimeout(() => {
-				broadcastToOtherContexts(
-					'context_removed',
-					{
-						id: contextId,
-						type: removedContext.type
-					},
-					contextId
-				);
-			}, 0);
-		}
-	} catch (error) {
-		log.error('[ContextTracker] Error removing context:', false, error);
-	}
-}
-
-/**
- * Helper to broadcast a message to all contexts except the sender
- */
-export function broadcastToOtherContexts(type: string, data: any, excludeContextId?: string) {
-	try {
-		const broadcastPromises = [];
-
-		for (const [contextId, contextInfo] of activeContexts.entries()) {
-			if (contextId !== excludeContextId) {
-				// If we have a tab ID, use it for more targeted messaging
-				if (contextInfo.tabId) {
-					broadcastPromises.push(
-						browser.tabs
-							.sendMessage(contextInfo.tabId, {
-								type,
-								data,
-								fromContextId: excludeContextId,
-								timestamp: Date.now()
-							})
-							.catch((err) => {
-								log.debug(
-									`[ContextTracker] Failed to send message to context ${contextId}:`,
-									false,
-									err
-								);
-							})
-					);
-				}
-			}
-		}
-
-		// Execute all broadcasts concurrently but don't wait for them
-		Promise.allSettled(broadcastPromises).catch(() => {});
-	} catch (error) {
-		log.warn('[ContextTracker] Error broadcasting to other contexts:', false, error);
-	}
-}
-
-/**
- * Helper to broadcast a message to protected contexts only
- */
-export function broadcastToProtectedContexts(type: string, data: any, excludeContextId?: string) {
-	try {
-		const broadcastPromises = [];
-
-		for (const [contextId, contextInfo] of activeContexts.entries()) {
-			if (contextId !== excludeContextId && needsIdleProtection(contextInfo.type)) {
-				if (contextInfo.tabId) {
-					broadcastPromises.push(
-						browser.tabs
-							.sendMessage(contextInfo.tabId, {
-								type,
-								data,
-								fromContextId: excludeContextId,
-								timestamp: Date.now()
-							})
-							.catch((err) => {
-								log.debug(
-									`[ContextTracker] Failed to send message to context ${contextId}:`,
-									false,
-									err
-								);
-							})
-					);
-				}
-			}
-		}
-
-		// Execute all broadcasts concurrently but don't wait for them
-		Promise.allSettled(broadcastPromises).catch(() => {});
-	} catch (error) {
-		log.warn('[ContextTracker] Error broadcasting to protected contexts:', false, error);
-	}
-}
-
-/**
- * Set login verification status
- */
-export function setLoginVerified(verified: boolean, contextId?: string): void {
-	try {
-		log.info(`[ContextTracker]  LOGIN VERIFICATION REQUEST:`, false, {
-			verified,
-			contextId,
-			currentLoginState: isLoginVerified,
-			totalContexts: activeContexts.size,
-			activeContextTypes: Array.from(activeContexts.values()).map((ctx) => ctx.type)
-		});
-
-		// Only set login verified if we have at least one protected context
-		const protectedContexts = Array.from(activeContexts.values()).filter((context) =>
-			needsIdleProtection(context.type)
-		);
-		const hasProtectedContext = protectedContexts.length > 0;
-
-		log.info(`[ContextTracker]  PROTECTED CONTEXTS ANALYSIS:`, false, {
-			hasProtectedContext,
-			protectedCount: protectedContexts.length,
-			protectedTypes: protectedContexts.map((ctx) => ctx.type),
-			allContexts: Array.from(activeContexts.values()).map((ctx) => ({
-				id: ctx.id,
-				type: ctx.type
-			}))
-		});
-
-		if (!hasProtectedContext && verified) {
-			log.warn('[ContextTracker]  NO PROTECTED CONTEXTS - not starting idle detection:', false, {
-				reason: 'No popup-wallet or popup-dapp contexts found',
-				allContextTypes: Array.from(activeContexts.values()).map((ctx) => ctx.type),
-				expectedProtectedTypes: ['popup-wallet', 'popup-dapp']
-			});
-			return;
-		}
-
-		const wasVerified = isLoginVerified;
-		isLoginVerified = verified;
-
-		log.info(`[ContextTracker]  LOGIN STATE CHANGED:`, false, {
-			from: wasVerified,
-			to: verified,
-			willStartIdle: verified && hasProtectedContext,
-			willStopIdle: !verified && wasVerified
-		});
-
-		if (verified) {
-			log.info('[ContextTracker]  STARTING idle detection due to login verification');
-			startIdleDetection();
-			broadcastIdleStatus('active');
-		} else {
-			log.info('[ContextTracker]  STOPPING idle detection due to login unverification');
-			stopIdleDetection();
-		}
-	} catch (error) {
-		log.error('[ContextTracker]  CRITICAL ERROR setting login verified:', false, error);
-	}
-}
-
-/**
- * Start idle detection
- */
-function startIdleDetection(): void {
-	try {
-		log.info('[ContextTracker]  ATTEMPTING to start idle detection');
-
-		if (!isLoginVerified) {
-			log.warn('[ContextTracker]  NOT STARTING - login not verified:', false, {
-				isLoginVerified,
-				activeContextsCount: activeContexts.size,
-				protectedContextsPresent: Array.from(activeContexts.values()).filter((ctx) =>
-					['popup-wallet', 'popup-dapp'].includes(ctx.type)
-				).length
-			});
-			return;
-		}
-
-		log.info('[ContextTracker]  Login verified, proceeding with idle detection setup');
-
-		// Set up system idle detection
-		if (browser.idle && browser.idle.setDetectionInterval) {
-			const detectionInterval = Math.floor(idleThreshold / 1000);
-			browser.idle.setDetectionInterval(detectionInterval);
-			log.info('[ContextTracker]  Browser idle detection interval set:', false, {
-				intervalSeconds: detectionInterval,
-				idleThreshold: idleThreshold
-			});
-		} else {
-			log.error('[ContextTracker]  Browser idle API not available:', false, {
-				hasIdleAPI: !!browser.idle,
-				hasSetInterval: !!(browser.idle && browser.idle.setDetectionInterval),
-				hasOnStateChanged: !!(browser.idle && browser.idle.onStateChanged)
-			});
-		}
-
-		// Add state change listener
-		if (!stateChangeListener && browser.idle && browser.idle.onStateChanged) {
-			stateChangeListener = (state: IdleState) => {
-				log.info('[ContextTracker]  IDLE STATE CHANGED:', false, {
-					newState: state,
-					timestamp: new Date().toISOString(),
-					lastActivity: new Date(lastActivity).toISOString()
-				});
-				handleStateChanged(state).catch((error) => {
-					log.error('[ContextTracker]  Error in state change listener:', false, error);
-				});
-			};
-			browser.idle.onStateChanged.addListener(stateChangeListener);
-			log.info('[ContextTracker]  Idle state change listener added');
-		} else if (stateChangeListener) {
-			log.info('[ContextTracker]  State change listener already exists');
-		} else {
-			log.error('[ContextTracker]  Cannot add state change listener - browser API not available');
-		}
-
-		// Start activity check timer
-		if (!activityCheckTimer && typeof setInterval !== 'undefined') {
-			activityCheckTimer = setInterval(() => {
-				log.debug('[ContextTracker]  Running periodic activity check');
-				checkInactivity().catch((error) => {
-					log.error('[ContextTracker]  Error in activity check:', false, error);
-				});
-			}, TIMER_IDLE_CHECK_INTERVAL) as any;
-			log.info('[ContextTracker]  Activity check timer started:', false, {
-				intervalMs: TIMER_IDLE_CHECK_INTERVAL
-			});
-		} else if (activityCheckTimer) {
-			log.info('[ContextTracker]  Activity check timer already running');
-		}
-
-		// Set up keepalive alarm to prevent service worker from going dormant
-		if (browser.alarms) {
-			// Create a recurring alarm every 15 seconds to keep service worker active
-			// This matches our idle check interval
-			browser.alarms.create('yakkl-keepalive', {
-				periodInMinutes: 0.25 // 15 seconds
-			});
-			log.info('[ContextTracker]  Keepalive alarm created (every 15 seconds)');
-		}
-
-		// Set initial state
-		checkCurrentState()
-			.then((state) => {
-				log.info(`[ContextTracker]  Initial idle state: ${state}`);
-			})
-			.catch((error) => {
-				log.error('[ContextTracker]  Error checking initial state:', false, error);
-			});
-
-		log.info('[ContextTracker]  IDLE DETECTION SETUP COMPLETE');
-	} catch (error) {
-		log.error('[ContextTracker]  CRITICAL ERROR starting idle detection:', false, error);
-	}
-}
-
-/**
- * Stop idle detection
- */
-function stopIdleDetection(): void {
-	try {
-		log.info('[ContextTracker] Stopping idle detection');
-
-		// Remove state change listener
-		if (stateChangeListener && browser.idle && browser.idle.onStateChanged) {
-			browser.idle.onStateChanged.removeListener(stateChangeListener);
-			stateChangeListener = null;
-		}
-
-		// Clear activity check timer
-		if (activityCheckTimer) {
-			clearInterval(activityCheckTimer);
-			activityCheckTimer = null;
-		}
-
-		// Cancel any pending lockdown
-		cancelPendingLockdown();
-
-		// Reset state
-		isLockdownInitiated = false;
-		previousState = 'active';
-		lastActivity = Date.now();
-
-		// Clear any alarms
-		if (browser.alarms) {
-			Promise.allSettled([
-				browser.alarms.clear('yakkl-lock-alarm'),
-				browser.alarms.clear('yakkl-lock-notification'),
-				browser.alarms.clear('yakkl-keepalive')
-			]).catch(() => {});
-		}
-
-		// Clear any notifications
-		NotificationService.clearAllAlertsEnhanced().catch(() => {});
-	} catch (error) {
-		log.error('[ContextTracker] Error stopping idle detection:', false, error);
-	}
-}
-
-/**
- * Check if we've been inactive based on both system idle and our own tracking
- */
-async function checkInactivity(): Promise<void> {
-	if (!isLoginVerified || isProcessingStateChange) return;
-
-	try {
-		const now = Date.now();
-		const timeSinceLastActivity = now - lastActivity;
-		const timeSinceLastStateChange = now - lastStateChangeTime;
-
-		// Don't check if we're within the debounce period
-		if (timeSinceLastStateChange < STATE_CHANGE_DEBOUNCE) {
-			return;
-		}
-
-		// First, query the browser idle state directly
-		const currentIdleState = await checkCurrentState();
-
-		// If browser reports idle/locked, handle it immediately
-		if (currentIdleState !== 'active' && !isLockdownInitiated) {
-			log.info(`[ContextTracker] Browser reports ${currentIdleState} state - handling immediately`);
-			await handleStateChanged(currentIdleState);
-			return;
-		}
-
-		// If we've passed the idle threshold and not already initiated lockdown
-		if (timeSinceLastActivity >= idleThreshold && !isLockdownInitiated) {
-			log.info(`[ContextTracker] Idle threshold reached: ${timeSinceLastActivity}ms`);
-			await handleStateChanged('idle');
-		}
-	} catch (error) {
-		log.error('[ContextTracker] Error checking inactivity:', false, error);
-	}
-}
-
-/**
- * Check current system idle state
- */
-async function checkCurrentState(): Promise<IdleState> {
-	if (!isLoginVerified) return 'active';
-
-	try {
-		if (browser.idle && browser.idle.queryState) {
-			const querySeconds = Math.floor(idleThreshold / 1000);
-			const state = await browser.idle.queryState(querySeconds);
-
-			// Log state queries periodically for debugging
-			const now = Date.now();
-			if (!checkCurrentState.lastLogTime || now - checkCurrentState.lastLogTime > 10000) {
-				log.debug('[ContextTracker] Idle state query:', false, {
-					state,
-					querySeconds,
-					timeSinceLastActivity: now - lastActivity
-				});
-				checkCurrentState.lastLogTime = now;
-			}
-
-			return state as IdleState;
-		}
-		return 'active';
-	} catch (error) {
-		log.warn('[ContextTracker] Error querying idle state:', false, error);
-		return 'active'; // Default to active on error
-	}
-}
-
-// Add property to track last log time
-checkCurrentState.lastLogTime = 0;
-
-/**
- * Handle state changes with improved race condition prevention
- */
-async function handleStateChanged(state: IdleState): Promise<void> {
-	if (!isLoginVerified || isProcessingStateChange) return;
-	if (state === previousState) return;
-
-	const now = Date.now();
-	const timeSinceLastStateChange = now - lastStateChangeTime;
-
-	// Don't allow rapid state changes
-	if (timeSinceLastStateChange < STATE_CHANGE_DEBOUNCE) {
-		log.debug('[ContextTracker] Skipping state change - too soon since last change:', false, {
-			timeSinceLastChange: timeSinceLastStateChange,
-			debouncePeriod: STATE_CHANGE_DEBOUNCE
-		});
-		return;
-	}
-
-	// Check if we have any protected contexts before proceeding
-	const hasProtectedContexts = Array.from(activeContexts.values()).some((context) =>
-		needsIdleProtection(context.type)
-	);
-
-	if (!hasProtectedContexts) {
-		log.info('[ContextTracker] No protected contexts found, stopping idle detection');
-		stopIdleDetection();
-		return;
-	}
-
-	// Set the processing flag to prevent race conditions
-	isProcessingStateChange = true;
-
-	try {
-		log.info(`[ContextTracker] State changing from ${previousState} to ${state}`);
-		previousState = state;
-		lastStateChangeTime = now;
-
-		// Broadcast state to all UI contexts
-		broadcastIdleStatus(state);
-
-		switch (state) {
-			case 'active':
-				await handleActiveState(now);
-				break;
-
-			case 'idle':
-			case 'locked':
-				await handleIdleLockState(state, now);
-				break;
-		}
-	} catch (error) {
-		log.error('[ContextTracker] Error handling state change:', false, error);
-		// Reset state on error
-		isLockdownInitiated = false;
-		previousState = 'active';
-	} finally {
-		isProcessingStateChange = false;
-	}
-}
-
-/**
- * Handle active state
- */
-async function handleActiveState(now: number): Promise<void> {
-	try {
-		// Clear any pending lockdown first
-		cancelPendingLockdown();
-
-		// Reset the last activity timestamp to prevent immediate idle detection
-		lastActivity = now;
-
-		// Clear notifications and reset UI
-		await clearLockdownState();
-
-		// IMPORTANT: Restart idle detection
-		if (isLoginVerified) {
-			startIdleDetection();
-		}
-
-		// Start pricing checks after cleanup
-		try {
-			await browser.runtime.sendMessage({ type: 'startPricingChecks' });
-		} catch (error) {
-			log.debug('[ContextTracker] Error sending startPricingChecks message:', false, error);
-		}
-	} catch (error) {
-		log.error('[ContextTracker] Error handling active state:', false, error);
-	}
-}
-
-/**
- * Handle idle/locked state
- */
-async function handleIdleLockState(state: IdleState, now: number): Promise<void> {
-	try {
-		// Only proceed if we haven't already initiated lockdown
-		if (!isLockdownInitiated) {
-			// Double check if we're still idle
-			const currentState = await checkCurrentState();
-			if (currentState !== 'active') {
-				isLockdownInitiated = true;
-
-				if (idleLockDelay <= 0) {
-					// Immediate lockdown
-					log.info(`[ContextTracker] ${state} detected, initiating immediate lockdown`);
-					await executeLockdown();
-				} else {
-					// Delayed lockdown
-					log.info(
-						`[ContextTracker] ${state} detected, lockdown will occur in ${idleLockDelay / 1000} seconds`
-					);
-					await startLockdownSequence();
-				}
-			} else {
-				log.info('[ContextTracker] State changed to active during idle check, canceling lockdown');
-				await handleStateChanged('active');
-			}
-		}
-	} catch (error) {
-		log.error('[ContextTracker] Error handling idle/lock state:', false, error);
-		isLockdownInitiated = false;
-	}
-}
-
-/**
- * Start the lockdown sequence with notification and timer
- */
-async function startLockdownSequence(): Promise<void> {
-	try {
-		// Check if we have any protected contexts before proceeding
-		const protectedContextsLocal = Array.from(activeContexts.values()).filter((context) =>
-			needsIdleProtection(context.type)
-		);
-
-		if (protectedContextsLocal.length === 0) {
-			log.info('[ContextTracker] No protected contexts found, skipping lockdown sequence');
-			return;
-		}
-
-		log.info(
-			`[ContextTracker] Starting lockdown sequence for ${protectedContextsLocal.length} protected context(s)`
-		);
-
-		// Calculate remaining time for accurate notification
-		const remainingTime = Math.max(0, idleLockDelay);
-		const remainingSeconds = Math.ceil(remainingTime / 1000);
-
-		// Send lockdown warning to all tabs first
-		const messagePromises = [];
-		for (const context of protectedContextsLocal) {
-			if (context.tabId && context.id) {
-				messagePromises.push(
-					browser.tabs
-						.sendMessage(context.tabId, {
-							type: 'lockdownImminent',
-							delayMs: remainingTime,
-							remainingSeconds,
-							enhanced: true,
-							targetContextTypes: protectedContexts,
-							timestamp: Date.now()
-						})
-						.catch((err) => {
-							log.warn(
-								`[ContextTracker] Failed to send lockdownImminent to context ${context.id}:`,
-								false,
-								err
-							);
-						})
-				);
-			}
-		}
-
-		// Send all messages concurrently
-		await Promise.allSettled(messagePromises);
-
-		// Set lockdown alarm
-		if (browser.alarms) {
-			await browser.alarms.create('yakkl-lock-alarm', {
-				when: Date.now() + remainingTime
-			});
-		}
-
-		log.info(`[ContextTracker] Alarm set for lockdown in ${remainingSeconds} seconds`);
-	} catch (error) {
-		log.error('[ContextTracker] Error starting lockdown sequence:', false, error);
-	}
-}
-
-/**
- * Cancel a pending lockdown
- */
-function cancelPendingLockdown(): void {
-	if (!isLockdownInitiated) return;
-
-	try {
-		log.info('[ContextTracker] Canceling pending lockdown');
-
-		// Clear flag FIRST to prevent race conditions
-		isLockdownInitiated = false;
-
-		// Clear alarms
-		if (browser.alarms) {
-			Promise.allSettled([
-				browser.alarms.clear('yakkl-lock-alarm'),
-				browser.alarms.clear('yakkl-lock-notification')
-			]).catch(() => {});
-		}
-
-		// Reset state
-		previousState = 'active';
-
-		log.info('[ContextTracker] Pending lockdown canceled');
-	} catch (error) {
-		log.error('[ContextTracker] Error canceling pending lockdown:', false, error);
-	}
-}
-
-/**
- * Execute the actual lockdown
- */
-async function executeLockdown(): Promise<void> {
-	try {
-		log.info('[ContextTracker] Executing lockdown');
-
-		// Check if we have any protected contexts before proceeding
-		const protectedContextsLocal = Array.from(activeContexts.values()).filter((context) =>
-			needsIdleProtection(context.type)
-		);
-
-		if (protectedContextsLocal.length === 0) {
-			log.info('[ContextTracker] No protected contexts found, skipping lockdown');
-			isLockdownInitiated = false;
-			return;
-		}
-
-		log.info(
-			`[ContextTracker] Executing lockdown for ${protectedContextsLocal.length} protected context(s)`
-		);
-
-		// Send lockdown to all protected tabs
-		const lockdownPromises = [];
-		for (const context of protectedContextsLocal) {
-			if (context.tabId) {
-				lockdownPromises.push(
-					browser.tabs
-						.sendMessage(context.tabId, {
-							type: 'lockdown',
-							targetContextTypes: protectedContexts,
-							timestamp: Date.now()
-						})
-						.catch((err) => {
-							log.warn(
-								`[ContextTracker] Failed to send lockdown to context ${context.id}:`,
-								false,
-								err
-							);
-						})
-				);
-			}
-		}
-
-		// Send all lockdown messages concurrently
-		await Promise.allSettled(lockdownPromises);
-
-		// Reset state
-		isLockdownInitiated = false;
-	} catch (error) {
-		log.error('[ContextTracker] Error executing lockdown:', false, error);
-		isLockdownInitiated = false;
-	}
-}
-
-/**
- * Broadcast idle status to protected contexts only
- */
-function broadcastIdleStatus(state: IdleState): void {
-	try {
-		// Get protected contexts
-		const protectedContextsLocal = Array.from(activeContexts.values()).filter((context) =>
-			needsIdleProtection(context.type)
-		);
-
-		if (protectedContextsLocal.length === 0) {
-			log.debug('[ContextTracker] No protected contexts to broadcast to');
-			return;
-		}
-
-		log.info(
-			`[ContextTracker] Broadcasting idle status '${state}' to ${protectedContextsLocal.length} protected context(s)`
-		);
-
-		// Send directly to each known protected context with a tab ID
-		const broadcastPromises = [];
-		for (const context of protectedContextsLocal) {
-			if (context.tabId && context.id) {
-				broadcastPromises.push(
-					browser.tabs
-						.sendMessage(context.tabId, {
-							type: 'IDLE_STATUS_CHANGED',
-							state,
-							timestamp: Date.now(),
-							targetContextTypes: protectedContexts
-						})
-						.catch(() => {
-							// Silently fail - tab might have been closed
-						})
-				);
-			}
-		}
-
-		// Execute all broadcasts concurrently but don't wait for them
-		Promise.allSettled(broadcastPromises).catch(() => {});
-	} catch (error) {
-		log.error('[ContextTracker] Error broadcasting idle status:', false, error);
-	}
-}
-
-/**
- * Get a list of active contexts
- */
-export function getActiveContexts() {
-	try {
-		return Array.from(activeContexts.entries()).map(([id, info]) => ({
-			id,
-			type: info.type,
-			url: info.url,
-			createdAt: new Date(info.createdAt).toISOString(),
-			lastActive: new Date(info.lastActive).toISOString(),
-			age: Math.floor((Date.now() - info.createdAt) / 1000) + 's'
-		}));
-	} catch (error) {
-		log.error('[ContextTracker] Error getting active contexts:', false, error);
-		return [];
-	}
-}
-
-/**
- * Check if a context exists
- */
-export function hasContext(contextId: string): boolean {
-	return activeContexts.has(contextId);
-}
-
-/**
- * Get context info
- */
-export function getContextInfo(contextId: string): ContextInfo | undefined {
-	return activeContexts.get(contextId);
-}
-
-/**
- * Get contexts by type
- */
-export function getContextsByType(contextType: string): ContextInfo[] {
-	try {
-		return Array.from(activeContexts.values()).filter((context) => context.type === contextType);
-	} catch (error) {
-		log.error('[ContextTracker] Error getting contexts by type:', false, error);
-		return [];
-	}
-}
-
-/**
- * Get the number of active contexts
- */
-export function getActiveContextCount(): number {
-	return activeContexts.size;
-}
-
-/**
- * Get the number of protected contexts
- */
-export function getProtectedContextCount(): number {
-	try {
-		return Array.from(activeContexts.values()).filter((context) =>
-			needsIdleProtection(context.type)
-		).length;
-	} catch (error) {
-		log.error('[ContextTracker] Error getting protected context count:', false, error);
-		return 0;
-	}
-}
-
-/**
- * Get current idle status (for debugging)
- */
-export function getIdleStatus(): any {
-	try {
-		const protectedContextsLocal = Array.from(activeContexts.entries())
-			.filter(([_, info]) => needsIdleProtection(info.type))
-			.map(([id, info]) => ({
-				id,
-				type: info.type,
-				lastActivity: new Date(info.lastActive).toISOString(),
-				idleFor: Math.round((Date.now() - info.lastActive) / 1000) + 's'
-			}));
-
-		return {
-			isLockdownInitiated,
-			isLoginVerified,
-			previousState,
-			threshold: idleThreshold,
-			lockDelay: idleLockDelay,
-			lastActivity,
-			timeSinceLastActivity: Date.now() - lastActivity,
-			activeContextsCount: activeContexts.size,
-			protectedContextsCount: protectedContextsLocal.length,
-			recentMessagesCount: recentMessages.size,
-			isProcessingStateChange,
-			isCleaningUp,
-			lastStateChangeTime,
-			activeContexts: Array.from(activeContexts.entries()).map(([id, info]) => ({
-				id,
-				type: info.type,
-				isProtected: needsIdleProtection(info.type),
-				lastActivity: new Date(info.lastActive).toISOString(),
-				idleFor: Math.round((Date.now() - info.lastActive) / 1000) + 's'
-			})),
-			protectedContexts: protectedContextsLocal
-		};
-	} catch (error) {
-		log.error('[ContextTracker] Error getting idle status:', false, error);
-		return {
-			error: 'Failed to get idle status',
-			timestamp: new Date().toISOString()
-		};
-	}
-}
-
-/**
- * Clear all tracked contexts (for debugging)
- */
-export function clearAllContexts(): void {
-	try {
-		activeContexts.clear();
-		recentMessages.clear();
-		log.info('[ContextTracker] All contexts cleared');
-	} catch (error) {
-		log.error('[ContextTracker] Error clearing all contexts:', false, error);
-	}
-}
-
-/**
- * Initialize debugging API
- */
-function initializeDebugAPI(): void {
-	try {
-		// Expose for debugging in browser console
-		if (typeof globalThis !== 'undefined') {
-			(globalThis as any).YAKKLBackgroundDebug = {
-				// Existing debugging functions
-				getIdleStatus,
-				getActiveContexts,
-				getProtectedContextCount,
-				hasLockdownInitiated: () => isLockdownInitiated,
-				getLastActivity: () => ({
-					timestamp: lastActivity,
-					timeSinceLastActivity: Date.now() - lastActivity,
-					timeInSeconds: Math.round((Date.now() - lastActivity) / 1000)
-				}),
-				getCurrentState: checkCurrentState,
-				triggerStateChange: (state: IdleState) => {
-					log.info(`[Debug] Manually triggering state change to: ${state}`);
-					handleStateChanged(state).catch((error) => {
-						log.error('[Debug] Error in manual state change:', false, error);
-					});
-				},
-				clearLockdown: () => {
-					log.info('[Debug] Manually clearing lockdown state');
-					isLockdownInitiated = false;
-					cancelPendingLockdown();
-					handleStateChanged('active').catch((error) => {
-						log.error('[Debug] Error in manual clear lockdown:', false, error);
-					});
-				},
-				clearAllContexts,
-				recentMessagesCount: () => recentMessages.size,
-				clearRecentMessages: () => recentMessages.clear(),
-
-				// NEW: Enhanced idle detection debugging functions
-				getDetailedIdleStatus: () => ({
-					isLoginVerified,
-					isLockdownInitiated,
-					previousState,
-					lastActivity,
-					timeSinceLastActivity: Date.now() - lastActivity,
-					idleThreshold,
-					idleLockDelay,
-					hasStateChangeListener: !!stateChangeListener,
-					hasActivityCheckTimer: !!activityCheckTimer,
-					browserIdleAPI: {
-						available: !!(browser.idle && browser.idle.setDetectionInterval),
-						hasOnStateChanged: !!(browser.idle && browser.idle.onStateChanged),
-						hasQueryState: !!(browser.idle && browser.idle.queryState)
-					},
-					activeContexts: Array.from(activeContexts.values()).map((ctx) => ({
-						id: ctx.id,
-						type: ctx.type,
-						isProtected: needsIdleProtection(ctx.type),
-						lastActive: ctx.lastActive,
-						timeSinceActive: Date.now() - ctx.lastActive
-					}))
-				}),
-
-				// NEW: Manual idle detection testing
-				manuallySetLoginVerified: (verified: boolean) => {
-					log.info(`[Debug]  Manually setting login verified to: ${verified}`);
-					setLoginVerified(verified, 'debug-manual');
-				},
-
-				manuallyStartIdleDetection: () => {
-					log.info('[Debug]  Manually starting idle detection');
-					startIdleDetection();
-				},
-
-				manuallyStopIdleDetection: () => {
-					log.info('[Debug]  Manually stopping idle detection');
-					stopIdleDetection();
-				},
-
-				// NEW: Test idle flow end-to-end
-				testIdleFlow: async () => {
-					log.info('[Debug]  TESTING COMPLETE IDLE FLOW');
-
-					// 1. Check initial state
-					const initialStatus = getIdleStatus();
-					log.info('[Debug]  Initial status:', false, initialStatus);
-
-					// 2. Verify browser APIs
-					const browserAPIs = {
-						hasIdle: !!browser.idle,
-						hasSetInterval: !!(browser.idle && browser.idle.setDetectionInterval),
-						hasOnStateChanged: !!(browser.idle && browser.idle.onStateChanged),
-						hasQueryState: !!(browser.idle && browser.idle.queryState)
-					};
-					log.info('[Debug]  Browser APIs:', false, browserAPIs);
-
-					// 3. Test state query
-					if (browser.idle && browser.idle.queryState) {
-						const currentState = await browser.idle.queryState(Math.floor(idleThreshold / 1000));
-						log.info('[Debug]  Current browser idle state:', false, currentState);
-					}
-
-					// 4. Check contexts
-					const contexts = Array.from(activeContexts.values());
-					log.info('[Debug]  Active contexts:', false, contexts);
-
-					// 5. Check protected contexts
-					const protectedContexts = contexts.filter((ctx) => needsIdleProtection(ctx.type));
-					log.info('[Debug]  Protected contexts:', false, protectedContexts);
-
-					return {
-						initialStatus,
-						browserAPIs,
-						contexts,
-						protectedContexts,
-						recommendation:
-							protectedContexts.length > 0 && browserAPIs.hasIdle
-								? 'All components available for idle detection'
-								: 'Missing components - see logs for details'
-					};
-				},
-
-				// NEW: Simulate user activity
-				simulateActivity: () => {
-					log.info('[Debug]  Simulating user activity');
-					lastActivity = Date.now();
-
-					// Broadcast to all protected contexts
-					const protectedContexts = Array.from(activeContexts.values()).filter((ctx) =>
-						needsIdleProtection(ctx.type)
-					);
-
-					protectedContexts.forEach((ctx) => {
-						if (ctx.tabId) {
-							browser.tabs
-								.sendMessage(ctx.tabId, {
-									type: 'USER_ACTIVITY',
-									timestamp: Date.now(),
-									contextId: ctx.id,
-									source: 'debug-simulation'
-								})
-								.catch(() => {}); // Ignore errors
-						}
-					});
-				},
-
-				// NEW: Force idle detection interval
-				forceSetIdleInterval: (seconds: number) => {
-					if (browser.idle && browser.idle.setDetectionInterval) {
-						browser.idle.setDetectionInterval(seconds);
-						log.info(`[Debug]  Forced idle detection interval to ${seconds} seconds`);
-					} else {
-						log.error('[Debug]  Browser idle API not available');
-					}
-				},
-
-				// NEW: Test the new idle warning notification system
-				testIdleWarningNotification: (delaySeconds: number = 15) => {
-					log.info(`[Debug]  Testing idle warning notification for ${delaySeconds} seconds`);
-
-					// Send enhanced lockdown warning to UI contexts
-					const protectedContexts = Array.from(activeContexts.values()).filter((ctx) =>
-						needsIdleProtection(ctx.type)
-					);
-
-					protectedContexts.forEach((ctx) => {
-						if (ctx.tabId) {
-							browser.tabs
-								.sendMessage(ctx.tabId, {
-									type: 'LOCKDOWN_WARNING_ENHANCED',
-									message: `Test idle warning notification - wallet will lock in ${delaySeconds} seconds`,
-									timestamp: Date.now(),
-									delayMs: delaySeconds * 1000,
-									delaySeconds: delaySeconds,
-									notificationId: `test-lockdown-warning-${Date.now()}`,
-									windowFocused: false
-								})
-								.catch(() => {}); // Ignore errors
-						}
-					});
-				}
-			};
-
-			log.info(
-				'[ContextTracker]  Enhanced debug API available via YAKKLBackgroundDebug global object'
-			);
-			log.info(
-				'[ContextTracker]  Try: YAKKLBackgroundDebug.testIdleFlow() or YAKKLBackgroundDebug.getDetailedIdleStatus()'
-			);
-			log.info(
-				'[ContextTracker]  NEW: YAKKLBackgroundDebug.testIdleWarningNotification(15) - Test new visual notification system!'
-			);
-		}
-	} catch (error) {
-		log.warn('[ContextTracker] Failed to initialize debug API:', false, error);
-	}
-}
diff --git a/packages/yakkl-wallet/src/lib/extensions/chrome/dapp.ts b/packages/yakkl-wallet/src/lib/extensions/chrome/dapp.ts
index 7090eb4..4fa44f3 100644
--- a/packages/yakkl-wallet/src/lib/extensions/chrome/dapp.ts
+++ b/packages/yakkl-wallet/src/lib/extensions/chrome/dapp.ts
@@ -2,7 +2,7 @@
 import { requestManager } from '$lib/extensions/chrome/eip-6963';
 import { log } from '$lib/managers/Logger';
 import { verifyDomainConnected } from '$lib/extensions/chrome/verifyDomainConnectedBackground';
-import type { Runtime } from 'webextension-polyfill';
+import type { Runtime } from '$lib/types/browser-types';
 import { portManager } from '$lib/managers/PortManager';
 import { UnifiedTimerManager } from '$lib/managers/UnifiedTimerManager';
 
diff --git a/packages/yakkl-wallet/src/lib/extensions/chrome/eip-6963.ts b/packages/yakkl-wallet/src/lib/extensions/chrome/eip-6963.ts
index d2d4d27..5afbabb 100644
--- a/packages/yakkl-wallet/src/lib/extensions/chrome/eip-6963.ts
+++ b/packages/yakkl-wallet/src/lib/extensions/chrome/eip-6963.ts
@@ -1,1178 +1,9 @@
 import { log } from '$lib/managers/Logger';
-import type { Runtime } from 'webextension-polyfill';
+import type { Runtime } from '$lib/types/browser-types';
 import { ProviderRpcError } from '$lib/common';
-import browser from 'webextension-polyfill';
+import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
 import { UnifiedTimerManager } from '$lib/managers/UnifiedTimerManager';
 import { initializePermissions } from '$lib/permissions';
 import {
+const browser = getBrowserExt()!;
 	getBlock,
-	getLatestBlock,
-	getGasPrice,
-	getBalance,
-	getCode,
-	getNonce,
-	getTransactionReceipt,
-	getTransaction,
-	getLogs
-} from './legacy';
-import type { Block, BlockTag } from 'alchemy-sdk';
-import type { YakklCurrentlySelected } from '../../common/interfaces';
-import { STORAGE_YAKKL_CURRENTLY_SELECTED, YAKKL_PROVIDER_EIP6963 } from '$lib/common/constants';
-// import { KeyManager } from '$lib/managers/KeyManager';
-import { estimateGas as estimateGasLegacy } from './legacy';
-import { requestManager } from './requestManager';
-import type { PendingRequestData } from '$lib/common/interfaces';
-import { activeTabBackgroundStore } from '$lib/common/stores';
-import { get } from 'svelte/store';
-import { extractSecureDomain } from '$lib/common/security';
-import {
-	getAddressesForDomain,
-	getDomainForRequestId,
-	revokeDomainConnection,
-	verifyDomainConnected
-} from '$lib/extensions/chrome/verifyDomainConnectedBackground';
-import type { BackgroundPendingRequest } from './background';
-import { isReadMethod, isWriteMethod, isSimulationMethod } from './methodClassification';
-import { handleReadOnlyRequest } from '$lib/common/listeners/background/readMethodHandler';
-import { handleSimulationRequest } from '$lib/common/listeners/background/simulationMethodHandler';
-import { handleWriteRequest } from '$lib/common/listeners/background/writeMethodHandler';
-import { sendErrorResponse } from '$lib/extensions/chrome/errorResponseHandler';
-import { MessageAnalyzer } from './messageAnalyzer';
-import { showPopupForMethod } from '$lib/managers/DAppPopupManager';
-
-export { requestManager };
-
-type RuntimePort = Runtime.Port;
-
-// Map to track active connections
-const eip6963Ports = new Map<string, RuntimePort>();
-
-// Request timeout (30 seconds)
-const REQUEST_TIMEOUT = 30000;
-
-interface EIP6963Message {
-	action: string;
-	requestId: string;
-	result?: any;
-	error?: {
-		code: number;
-		message: string;
-	};
-}
-const messageAnalyzer = new MessageAnalyzer();
-// Add before the handleEIP6963Request function
-type PermissionlessMethod = () => Promise<unknown> | unknown;
-type PermissionRequiredMethod = () => Promise<unknown>;
-
-interface PermissionlessMethods {
-	[key: string]: PermissionlessMethod;
-}
-
-interface PermissionRequiredMethods {
-	[key: string]: PermissionRequiredMethod;
-}
-
-// Add before handleEIP6963Request
-const EIP1193_ERRORS = {
-	USER_REJECTED: { code: 4001, message: 'User rejected the request' },
-	UNAUTHORIZED: { code: 4100, message: 'Unauthorized' },
-	UNSUPPORTED_METHOD: { code: 4200, message: 'Method not supported' },
-	DISCONNECTED: { code: 4900, message: 'Disconnected' },
-	CHAIN_DISCONNECTED: { code: 4901, message: 'Chain disconnected' },
-	INVALID_PARAMS: { code: -32602, message: 'Invalid parameters' },
-	INTERNAL_ERROR: { code: -32603, message: 'Internal error' }
-};
-
-// Track active requests to prevent duplicates
-const activeRequests = new Map<
-	string,
-	{
-		timestamp: number;
-		promise: Promise<any>;
-	}
->();
-
-// Clean up old requests every 5 minutes using UnifiedTimerManager
-const timerManager = UnifiedTimerManager.getInstance();
-timerManager.addInterval(
-	'eip6963-cleanup',
-	() => {
-		const now = Date.now();
-		for (const [requestId, request] of activeRequests.entries()) {
-			if (now - request.timestamp > 5 * 60 * 1000) {
-				activeRequests.delete(requestId);
-			}
-		}
-	},
-	5 * 60 * 1000
-);
-timerManager.startInterval('eip6963-cleanup');
-
-// Add at the top with other imports
-const processedEIP6963Requests = new Set<string>();
-
-/**
- * Get the origin from a request
- * This needs to be implemented based on how your extension receives requests
- */
-function getRequestOrigin(request?: any, sender?: browser.Runtime.MessageSender): string {
-	try {
-		// If we have a sender with a URL, extract the origin
-		if (sender && sender.url) {
-			return new URL(sender.url).origin;
-		}
-
-		// If request contains origin information
-		if (request && request.origin) {
-			return request.origin;
-		}
-
-		// If request contains metadata with domain
-		if (request && request.metaDataParams && request.metaDataParams.domain) {
-			// Ensure it's a proper origin with protocol
-			const domain = request.metaDataParams.domain;
-			if (domain.startsWith('http://') || domain.startsWith('https://')) {
-				return domain;
-			}
-			return `https://${domain}`;
-		}
-
-		// Default to a placeholder if we can't determine the origin
-		log.warn('Could not determine request origin, using placeholder', false, { request, sender });
-		return 'unknown-origin';
-	} catch (error) {
-		log.error('Error getting request origin', false, error);
-		return 'unknown-origin';
-	}
-}
-
-// Add to existing listeners in backgroundListeners.ts
-export async function onEIP6963MessageListener(
-	message: any,
-	sender: Runtime.MessageSender
-): Promise<any> {
-	try {
-		// Type guard to check for EIP-6963 message
-		const isEIP6963Message = (msg: any): msg is EIP6963Message =>
-			msg &&
-			typeof msg === 'object' &&
-			typeof msg.action === 'string' &&
-			typeof msg.requestId === 'string';
-
-		if (!isEIP6963Message(message)) {
-			// Let other handlers try to process it
-			log.info('EIP6963 - onMessage - not an EIP6963 message so passing through', false, {
-				message
-			});
-			return undefined; // Return undefined to let the message pass through
-		}
-
-		log.info('Received EIP6963 message', false, message);
-
-		if (message.action === 'resolveEIP6963Request') {
-			const success = resolveEIP6963Request(message.requestId, message.result);
-			log.debug('EIP6963: resolveEIP6963Request', false, {
-				success,
-				requestId: message.requestId
-			});
-			return {
-				type: 'YAKKL_RESPONSE:EIP6963',
-				result: success,
-				requestId: message.requestId
-			};
-		}
-
-		if (message.action === 'rejectEIP6963Request') {
-			const success = rejectEIP6963Request(message.requestId, message.error);
-			log.debug('EIP6963: rejectEIP6963Request', false, {
-				success,
-				requestId: message.requestId,
-				error: message.error
-			});
-			return {
-				type: 'YAKKL_RESPONSE:EIP6963',
-				result: success,
-				requestId: message.requestId,
-				error: message.error
-			};
-		}
-
-		// If we got here but message is EIP-6963, still respond with an error
-		throw new Error('Unknown EIP6963 action');
-	} catch (error) {
-		log.error('Error handling EIP-6963 message', false, error);
-		return {
-			type: 'YAKKL_RESPONSE:EIP6963',
-			error: {
-				code: 4200,
-				message: error instanceof Error ? error.message : String(error)
-			}
-		};
-	}
-}
-
-export function initializeEIP6963() {
-	if (!browser) return;
-
-	try {
-		// Initialize the permissions system
-		initializePermissions();
-
-		browser.runtime.onConnect.addListener((port: RuntimePort) => {
-			if (port.name !== YAKKL_PROVIDER_EIP6963) return;
-
-			log.debug('EIP6963: Port connected:', false, {
-				portName: port.name,
-				port: port,
-				timestamp: new Date().toISOString()
-			});
-
-			const portId = `eip6963_${Date.now()}_${Math.random().toString(36).slice(2, 11)}`;
-			eip6963Ports.set(portId, port);
-
-			// Use the exported onEIP6963Listener directly
-			port.onMessage.addListener(async (message: unknown) => {
-				await onEIP6963PortListener(message, port);
-			});
-
-			port.onDisconnect.addListener(() => {
-				eip6963Ports.delete(portId);
-
-				if (browser.runtime.lastError) {
-					log.error('EIP-6963 port error on disconnect', false, browser.runtime.lastError);
-				}
-			});
-		});
-	} catch (error) {
-		log.error('Failed to initialize EIP-6963 handler', true, error);
-	}
-}
-
-// Helper function to handle getBlock
-async function handleGetBlock(
-	chainId: number,
-	block: BlockTag | Promise<BlockTag>
-): Promise<Block | undefined> {
-	return await getBlock(chainId, block, undefined);
-}
-
-// Helper function to handle estimateGas
-async function handleEstimateGas(chainId: any, params: any[]): Promise<unknown | undefined> {
-	return await estimateGasLegacy(chainId, params[0]);
-}
-
-// Define read-only methods that don't require approval
-export const READONLY_METHODS = [
-	// Account and Address Methods
-	'eth_accounts',
-	'eth_coinbase',
-	'eth_getBalance',
-	'eth_getCode',
-	'eth_getStorageAt',
-	'eth_getTransactionCount',
-
-	// Block Methods
-	'eth_blockNumber',
-	'eth_getBlockByHash',
-	'eth_getBlockByNumber',
-	'eth_getBlockTransactionCountByHash',
-	'eth_getBlockTransactionCountByNumber',
-	'eth_getUncleByBlockHashAndIndex',
-	'eth_getUncleByBlockNumberAndIndex',
-	'eth_getUncleCountByBlockHash',
-	'eth_getUncleCountByBlockNumber',
-
-	// Chain and Network Methods
-	'eth_chainId',
-	'net_version',
-	'eth_protocolVersion',
-
-	// Compiler Methods
-	'eth_compileLLL',
-	'eth_compileSerpent',
-	'eth_compileSolidity',
-	'eth_getCompilers',
-
-	// Filter Methods
-	'eth_getFilterChanges',
-	'eth_getFilterLogs',
-	'eth_getLogs',
-	'eth_newBlockFilter',
-	'eth_newFilter',
-	'eth_newPendingTransactionFilter',
-	'eth_uninstallFilter',
-
-	// Gas and Mining Methods
-	'eth_gasPrice',
-	'eth_hashrate',
-	'eth_mining',
-
-	// Transaction Methods
-	'eth_getTransactionByBlockHashAndIndex',
-	'eth_getTransactionByBlockNumberAndIndex',
-	'eth_getTransactionByHash',
-	'eth_getTransactionReceipt',
-
-	// Work Methods
-	'eth_getWork',
-	'eth_submitHashrate',
-	'eth_submitWork',
-
-	// State Methods
-	'eth_syncing'
-];
-
-// Function to handle read-only methods
-export async function handleReadOnlyMethod(
-	method: string,
-	params: any[] = [],
-	requestId?: string
-): Promise<any> {
-	try {
-		switch (method) {
-			case 'eth_chainId':
-				return await getCurrentlySelectedChainId(requestId);
-			case 'eth_accounts':
-				return await getCurrentlySelectedAccounts(requestId);
-			case 'net_version':
-				return await getCurrentlySelectedNetworkVersion(requestId);
-			case 'eth_blockNumber':
-				return await getCurrentlySelectedBlockNumber(requestId);
-			case 'eth_getBalance':
-				return await getCurrentlySelectedBalance(params[0], requestId);
-			case 'eth_getCode':
-				return await getCurrentlySelectedCode(params[0], requestId);
-			case 'eth_getStorageAt':
-				return await getCurrentlySelectedStorageAt(params[0], params[1], requestId);
-			case 'eth_getTransactionCount':
-				return await getCurrentlySelectedTransactionCount(params[0], requestId);
-			case 'eth_gasPrice':
-				return await getCurrentlySelectedGasPrice(requestId);
-			case 'eth_getBlockByHash':
-				return await getCurrentlySelectedBlockByHash(params[0], params[1], requestId);
-			case 'eth_getBlockByNumber':
-				return await getCurrentlySelectedBlockByNumber(params[0], params[1], requestId);
-			case 'eth_getTransactionByHash':
-				return await getCurrentlySelectedTransactionByHash(params[0], requestId);
-			case 'eth_getTransactionReceipt':
-				return await getCurrentlySelectedTransactionReceipt(params[0], requestId);
-			case 'eth_getLogs':
-				return await getCurrentlySelectedLogs(params[0], requestId);
-			default:
-				throw new ProviderRpcError(4200, `Method ${method} not supported`);
-		}
-	} catch (error) {
-		log.error('Error handling read-only method:', false, {
-			method,
-			error,
-			timestamp: new Date().toISOString()
-		});
-		throw error;
-	}
-}
-
-// Helper function to handle getBlockByNumber
-async function getCurrentlySelectedBlockByNumber(
-	blockNumber: string,
-	fullTx: boolean,
-	requestId?: string
-): Promise<any> {
-	try {
-		const shortcuts = await getCurrentlySelectedData(requestId);
-		const block = await getBlock(shortcuts.chainId, blockNumber, fullTx ? true : false);
-		return block;
-	} catch (error) {
-		log.error('Error getting block by number:', false, {
-			error,
-			blockNumber,
-			requestId,
-			timestamp: new Date().toISOString()
-		});
-		throw error;
-	}
-}
-
-// Function to handle write methods that require approval
-export async function handleWriteMethod(
-	method: string,
-	port: Runtime.Port,
-	params: any[] = [],
-	requestId?: string
-): Promise<any> {
-	try {
-		switch (method) {
-			case 'eth_requestAccounts':
-				return await handleRequestAccounts(port, requestId);
-			case 'eth_sendTransaction':
-				return await handleSendTransaction(port, params, requestId);
-			case 'eth_sign':
-				return await handleSign(port, params, requestId);
-			case 'personal_sign':
-				return await handlePersonalSign(port, params, requestId);
-			case 'eth_signTypedData_v4':
-				return await handleSignTypedDataV4(port, params, requestId);
-			case 'wallet_addEthereumChain':
-				return await handleAddEthereumChain(port, params, requestId);
-			case 'wallet_switchEthereumChain':
-				return await handleSwitchEthereumChain(port, params, requestId);
-			case 'wallet_requestPermissions':
-				return await handleRequestPermissions(port, params, requestId);
-			case 'wallet_revokePermissions':
-				return await handleRevokePermissions(port, params, requestId);
-			case 'wallet_getPermissions':
-				return await handleGetPermissions(port, requestId);
-			default:
-				throw new ProviderRpcError(4200, `Method ${method} not supported`);
-		}
-	} catch (error) {
-		log.error('Error handling write method:', false, {
-			method,
-			error,
-			timestamp: new Date().toISOString()
-		});
-		throw error;
-	}
-}
-
-// Primary EIP-6963 Port Listener
-export async function onEIP6963PortListener(message: any, port: Runtime.Port): Promise<void> {
-	try {
-		messageAnalyzer.analyze(message);
-		// First, let's understand what we received
-		log.debug('EIP6963 handler received raw message', false, {
-			message,
-			messageType: typeof message,
-			hasMethod: 'method' in message,
-			hasType: 'type' in message,
-			timestamp: new Date().toISOString()
-		});
-
-		// Try to extract method from various possible locations
-		let method = message.method;
-		let id = message.id;
-
-		// Fallback: Check if method is nested in data or payload
-		if (!method && message.data?.method) {
-			method = message.data.method;
-			log.debug('Found method in message.data', false, { method });
-		}
-
-		// Fallback: Check if this is a wrapped message
-		if (!method && message.payload?.method) {
-			method = message.payload.method;
-			log.debug('Found method in message.payload', false, { method });
-		}
-
-		// Fallback: Check if type contains method information (e.g., "YAKKL_REQUEST:eth_accounts")
-		if (!method && message.type && typeof message.type === 'string') {
-			const typeMatch = message.type.match(/:(eth_[a-zA-Z0-9_]+)/);
-			if (typeMatch) {
-				method = typeMatch[1];
-				log.debug('Extracted method from type', false, { type: message.type, method });
-			}
-		}
-
-		// Fallback: Check for action field (some systems use action instead of method)
-		if (!method && message.action) {
-			method = message.action;
-			log.debug('Using action as method', false, { action: message.action });
-		}
-
-		// Special case: handle non-RPC messages
-		if (!method && message.type) {
-			switch (message.type) {
-				case 'ping':
-				case 'PING':
-				case 'connection_test':
-					// Handle ping/connection test
-					port.postMessage({
-						type: 'pong',
-						id: id || message.id || Date.now().toString(),
-						timestamp: Date.now()
-					});
-					log.debug('Handled ping message', false);
-					return;
-
-				case 'init':
-				case 'INIT':
-				case 'handshake':
-					// Handle initialization
-					port.postMessage({
-						type: 'init_ack',
-						id: id || message.id || Date.now().toString(),
-						status: 'ready'
-					});
-					log.debug('Handled init message', false);
-					return;
-
-				default:
-				// Log unknown message types for debugging
-				// log.warn('Unknown message type without method', false, {
-				//   type: message.type,
-				//   message
-				// });
-			}
-		}
-
-		// After all fallbacks, validate we have a method
-		if (!method) {
-			log.error('No method found in EIP6963 message after all fallbacks', false, {
-				message,
-				checkedLocations: [
-					'message.method',
-					'message.data.method',
-					'message.payload.method',
-					'message.type (extraction)',
-					'message.action'
-				]
-			});
-
-			// If we have an ID, send a proper error response
-			if (id) {
-				sendErrorResponse(port, id, new Error('Method is required'));
-			} else {
-				// Without an ID, we can't send a proper response
-				// Log it and potentially close the connection
-				log.error('Cannot send error response - no request ID', false);
-			}
-			return;
-		}
-
-		// Now we definitely have a method, continue with normal processing
-		log.debug('EIP6963 handler processing message', false, {
-			method,
-			id,
-			timestamp: new Date().toISOString()
-		});
-
-		// Skip duplicate requests check remains the same
-		if (id && processedEIP6963Requests.has(id)) {
-			log.debug('EIP6963: Skipping duplicate request:', false, {
-				requestId: id,
-				method,
-				timestamp: new Date().toISOString()
-			});
-			return;
-		}
-
-		if (id) {
-			processedEIP6963Requests.add(id);
-		}
-
-		// Route based on method type
-		if (isSimulationMethod(method)) {
-			log.debug('Routing to simulation handler:', false, { method });
-			await handleSimulationRequest(message, port);
-		} else if (isWriteMethod(method)) {
-			log.debug('Routing to write handler:', false, { method });
-			await handleWriteRequest(message, port);
-		} else if (isReadMethod(method)) {
-			log.debug('Routing to read handler:', false, { method });
-			await handleReadOnlyRequest(message, port);
-		} else {
-			log.warn('Unknown EIP6963 method:', false, { method });
-			if (id) {
-				sendErrorResponse(port, id, new Error(`Unknown method: ${method}`));
-			}
-		}
-	} catch (error) {
-		log.error('Error in EIP6963 handler:', false, error);
-		if (message?.id) {
-			sendErrorResponse(port, message.id, error);
-		}
-	}
-}
-
-async function switchEthereumChain(params: any, requestId?: string): Promise<null> {
-	try {
-		const newChainId = parseInt(params[0].chainId, 16);
-		// Update chain through appropriate mechanism
-		broadcastToEIP6963Ports('chainChanged', `0x${newChainId.toString(16)}`, requestId);
-		return null;
-	} catch (error) {
-		log.error('Error in wallet_switchEthereumChain', false, error);
-		throw new ProviderRpcError(4901, 'Failed to switch chain');
-	}
-}
-
-async function addEthereumChain(
-	params: any,
-	port: Runtime.Port,
-	requestId?: string
-): Promise<null> {
-	return (await showEIP6963Popup('wallet_addEthereumChain', params, port, requestId)) as null;
-}
-
-async function getBlockByNumber(params: any, port: Runtime.Port, requestId?: string): Promise<any> {
-	const result = await browser.storage.local.get(STORAGE_YAKKL_CURRENTLY_SELECTED);
-	const yakklCurrentlySelected = result[STORAGE_YAKKL_CURRENTLY_SELECTED] as YakklCurrentlySelected;
-	if (!yakklCurrentlySelected?.shortcuts?.chainId) {
-		throw new ProviderRpcError(4100, 'Wallet not initialized');
-	}
-	return await showEIP6963Popup('eth_getBlockByNumber', params, port, requestId);
-}
-
-async function estimateGas(
-	params: any,
-	apiKey: string,
-	port: Runtime.Port,
-	requestId?: string
-): Promise<any> {
-	const result = await browser.storage.local.get(STORAGE_YAKKL_CURRENTLY_SELECTED);
-	const yakklCurrentlySelected = result[STORAGE_YAKKL_CURRENTLY_SELECTED] as YakklCurrentlySelected;
-	if (!yakklCurrentlySelected?.shortcuts?.chainId) {
-		throw new ProviderRpcError(4100, 'Wallet not initialized');
-	}
-	return await showEIP6963Popup('eth_estimateGas', params, port, requestId);
-}
-
-// Add parameter validation
-function validateParams(method: string, params: any[]): boolean {
-	try {
-		switch (method) {
-			case 'eth_sendTransaction':
-				return params.length === 1 && typeof params[0] === 'object';
-			case 'eth_sign':
-				return (
-					params.length === 2 && typeof params[0] === 'string' && typeof params[1] === 'string'
-				);
-			case 'personal_sign':
-				return (
-					params.length === 2 && typeof params[0] === 'string' && typeof params[1] === 'string'
-				);
-			case 'eth_signTypedData_v4':
-				return (
-					params.length === 2 && typeof params[0] === 'string' && typeof params[1] === 'string'
-				);
-			case 'wallet_switchEthereumChain':
-				return (
-					params.length === 1 &&
-					typeof params[0] === 'object' &&
-					typeof params[0].chainId === 'string'
-				);
-			case 'wallet_addEthereumChain':
-				return (
-					params.length === 1 &&
-					typeof params[0] === 'object' &&
-					typeof params[0].chainId === 'string'
-				);
-			case 'wallet_requestPermissions':
-				return (
-					params.length === 1 &&
-					Array.isArray(params[0]) &&
-					params[0].every((p) => typeof p === 'object' && typeof p.eth_accounts === 'object')
-				);
-			case 'wallet_revokePermissions':
-				return (
-					params.length === 1 &&
-					Array.isArray(params[0]) &&
-					params[0].every((p) => typeof p === 'object' && typeof p.eth_accounts === 'object')
-				);
-			case 'wallet_getPermissions':
-				return params.length === 0; // No parameters needed
-			// Add more method validations as needed
-			default:
-				return true; // Default to true for methods without specific validation
-		}
-	} catch (error) {
-		log.error('Parameter validation error', false, { method, params, error });
-		return false;
-	}
-}
-
-// Helper functions to get data from currentlySelected.shortcuts
-export async function getCurrentlySelectedData(requestId?: string) {
-	try {
-		const result = await browser.storage.local.get(STORAGE_YAKKL_CURRENTLY_SELECTED);
-		const yakklCurrentlySelected = result[
-			STORAGE_YAKKL_CURRENTLY_SELECTED
-		] as YakklCurrentlySelected;
-		if (!yakklCurrentlySelected?.shortcuts) {
-			throw new ProviderRpcError(4100, 'Wallet shortcuts not initialized');
-		}
-
-		return yakklCurrentlySelected.shortcuts;
-	} catch (error) {
-		log.error('Error getting currently selected data', false, error);
-		throw new ProviderRpcError(4100, 'Error getting currently selected data');
-	}
-}
-
-// Read-only method handlers
-async function getCurrentlySelectedChainId(requestId?: string): Promise<string> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_chainId');
-	}
-	const shortcuts = await getCurrentlySelectedData(requestId);
-	return `0x${shortcuts.chainId.toString(16)}`;
-}
-
-export async function getCurrentlySelectedAccounts(requestId?: string): Promise<string[]> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_accounts');
-	}
-	const shortcuts = await getCurrentlySelectedData(requestId);
-	const id = shortcuts.id;
-	const persona = shortcuts.persona;
-	const domain = await getDomainForRequestId(requestId);
-	const addresses = await getAddressesForDomain(domain);
-	log.info('getCurrentlySelectedAccounts', false, { id, persona, addresses });
-	return addresses;
-}
-
-async function getCurrentlySelectedNetworkVersion(requestId?: string): Promise<string> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_chainId');
-	}
-	const shortcuts = await getCurrentlySelectedData(requestId);
-	return shortcuts.chainId.toString();
-}
-
-async function getCurrentlySelectedBlockNumber(requestId?: string): Promise<string> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_blockNumber');
-	}
-	const shortcuts = await getCurrentlySelectedData(requestId);
-	const block = await getLatestBlock(shortcuts.chainId);
-	return block.number.toString();
-}
-
-async function getCurrentlySelectedBalance(address: string, requestId?: string): Promise<string> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_getBalance');
-	}
-	const shortcuts = await getCurrentlySelectedData(requestId);
-	const balance = await getBalance(shortcuts.chainId, address);
-	return balance.toString();
-}
-
-async function getCurrentlySelectedCode(address: string, requestId?: string): Promise<string> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_getCode');
-	}
-	const shortcuts = await getCurrentlySelectedData(requestId);
-	return await getCode(shortcuts.chainId, address);
-}
-
-async function getCurrentlySelectedStorageAt(
-	address: string,
-	position: string,
-	requestId?: string
-): Promise<string> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_getStorageAt');
-	}
-	const shortcuts = await getCurrentlySelectedData(requestId);
-	return await getCode(shortcuts.chainId, address); // Implement actual storage getter
-}
-
-async function getCurrentlySelectedTransactionCount(
-	address: string,
-	requestId?: string
-): Promise<string> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_getTransactionCount');
-	}
-	const shortcuts = await getCurrentlySelectedData(requestId);
-	const nonce = await getNonce(shortcuts.chainId, address);
-	return nonce.toString();
-}
-
-async function getCurrentlySelectedGasPrice(requestId?: string): Promise<string> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_gasPrice');
-	}
-	const shortcuts = await getCurrentlySelectedData(requestId);
-	const gasPrice = await getGasPrice(shortcuts.chainId);
-	return gasPrice.toString();
-}
-
-async function getCurrentlySelectedBlockByHash(
-	hash: string,
-	fullTx: boolean,
-	requestId?: string
-): Promise<any> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_getBlockByHash');
-	}
-	const shortcuts = await getCurrentlySelectedData(requestId);
-	return await getBlock(shortcuts.chainId, hash, fullTx ? true : false);
-}
-
-async function getCurrentlySelectedTransactionByHash(
-	hash: string,
-	requestId?: string
-): Promise<any> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_getTransactionByHash');
-	}
-	const shortcuts = await getCurrentlySelectedData(requestId);
-	return await getTransaction(shortcuts.chainId, hash);
-}
-
-async function getCurrentlySelectedTransactionReceipt(
-	hash: string,
-	requestId?: string
-): Promise<any> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_getTransactionReceipt');
-	}
-	const shortcuts = await getCurrentlySelectedData(requestId);
-	return await getTransactionReceipt(shortcuts.chainId, hash);
-}
-
-async function getCurrentlySelectedLogs(params: any, requestId?: string): Promise<any> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_getLogs');
-	}
-	const shortcuts = await getCurrentlySelectedData(requestId);
-	return await getLogs(shortcuts.chainId, params);
-}
-
-// Write method handlers
-export async function handleSendTransaction(
-	port: Runtime.Port,
-	params: any[],
-	requestId?: string
-): Promise<string> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_sendTransaction');
-	}
-	return showEIP6963Popup('eth_sendTransaction', params, port, requestId) as Promise<string>;
-}
-
-export async function handleRequestAccounts(
-	port: Runtime.Port,
-	requestId?: string
-): Promise<string[]> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_requestAccounts');
-	}
-	log.warn('Requesting accounts', false, { method: 'eth_requestAccounts', requestId });
-	return showEIP6963Popup('eth_requestAccounts', [], port, requestId) as Promise<string[]>;
-}
-
-export async function handleSign(
-	port: Runtime.Port,
-	params: any[],
-	requestId?: string
-): Promise<string> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_sign');
-	}
-	return showEIP6963Popup('eth_sign', params, port, requestId) as Promise<string>;
-}
-
-export async function handlePersonalSign(
-	port: Runtime.Port,
-	params: any[],
-	requestId?: string
-): Promise<string> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for personal_sign');
-	}
-	return showEIP6963Popup('personal_sign', params, port, requestId) as Promise<string>;
-}
-
-export async function handleSignTypedDataV4(
-	port: Runtime.Port,
-	params: any[],
-	requestId?: string
-): Promise<string> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for eth_signTypedData_v4');
-	}
-	return showEIP6963Popup('eth_signTypedData_v4', params, port, requestId) as Promise<string>;
-}
-
-export async function handleAddEthereumChain(
-	port: Runtime.Port,
-	params: any[],
-	requestId?: string
-): Promise<null> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for wallet_addEthereumChain');
-	}
-	return showEIP6963Popup('wallet_addEthereumChain', params, port, requestId) as null;
-}
-
-export async function handleSwitchEthereumChain(
-	port: Runtime.Port,
-	params: any[],
-	requestId?: string
-): Promise<null> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for wallet_switchEthereumChain');
-	}
-	return showEIP6963Popup('wallet_switchEthereumChain', params, port, requestId) as null;
-}
-
-// Add new handlers for permission methods
-export async function handleRequestPermissions(
-	port: Runtime.Port,
-	params: any[],
-	requestId?: string
-): Promise<any> {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for wallet_requestPermissions');
-	}
-	try {
-		// Validate parameters
-		if (!validateParams('wallet_requestPermissions', params)) {
-			throw new ProviderRpcError(
-				EIP1193_ERRORS.INVALID_PARAMS.code,
-				'Invalid parameters for wallet_requestPermissions'
-			);
-		}
-
-		// Show popup for permission request
-		return await showEIP6963Popup('wallet_requestPermissions', params, port, requestId);
-	} catch (error) {
-		log.error('Error handling wallet_requestPermissions:', false, error);
-		throw error;
-	}
-}
-
-export async function handleRevokePermissions(
-	port: Runtime.Port,
-	params: any[],
-	requestId?: string
-): Promise<any> {
-	try {
-		// Validate parameters
-		if (!validateParams('wallet_revokePermissions', params)) {
-			throw new ProviderRpcError(
-				EIP1193_ERRORS.INVALID_PARAMS.code,
-				'Invalid parameters for wallet_revokePermissions'
-			);
-		}
-
-		// Get the origin from the port
-		const origin = port.sender?.url ? new URL(port.sender.url).origin : null;
-		if (!origin) {
-			throw new ProviderRpcError(
-				EIP1193_ERRORS.INVALID_PARAMS.code,
-				'Could not determine origin for permission revocation'
-			);
-		}
-
-		// Revoke permissions automatically
-		await revokeDomainConnection(origin); // This will remove the domain connection
-
-		// Return success
-		return true;
-	} catch (error) {
-		log.error('Error handling wallet_revokePermissions:', false, error);
-		throw error;
-	}
-}
-
-export async function handleGetPermissions(port: Runtime.Port, requestId?: string): Promise<any> {
-	try {
-		// Validate parameters
-		if (!validateParams('wallet_getPermissions', [])) {
-			throw new ProviderRpcError(
-				EIP1193_ERRORS.INVALID_PARAMS.code,
-				'Invalid parameters for wallet_getPermissions'
-			);
-		}
-
-		// Get the origin from the port
-		const origin = port.sender?.url ? new URL(port.sender.url).origin : null;
-		if (!origin) {
-			throw new ProviderRpcError(
-				EIP1193_ERRORS.INVALID_PARAMS.code,
-				'Could not determine origin for permission check'
-			);
-		}
-
-		// Check if the domain is connected
-		const isConnected = await verifyDomainConnected(origin);
-
-		// If connected, return the standard eth_accounts permission
-		if (isConnected) {
-			return [
-				{
-					parentCapability: 'eth_accounts',
-					caveats: []
-				}
-			];
-		}
-
-		// If not connected, return empty array
-		return [];
-	} catch (error) {
-		log.error('Error handling wallet_getPermissions:', false, error);
-		throw error;
-	}
-}
-
-// Request handling functions
-export function resolveEIP6963Request(requestId: string, result: any): void {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for resolveEIP6963Request');
-	}
-	const request = requestManager.getRequest(requestId);
-	if (!request) {
-		throw new ProviderRpcError(4100, 'Request not found');
-	}
-	request.resolve(result);
-	requestManager.removeRequest(requestId);
-}
-
-export function rejectEIP6963Request(requestId: string, error: any): void {
-	if (!requestId) {
-		throw new ProviderRpcError(4100, 'Request ID is required for rejectEIP6963Request');
-	}
-	const request = requestManager.getRequest(requestId);
-	if (!request) {
-		throw new ProviderRpcError(4100, 'Request not found');
-	}
-	request.reject(error);
-	requestManager.removeRequest(requestId);
-}
-
-// Event broadcasting function
-export function broadcastToEIP6963Ports(event: string, data: any, requestId?: string): void {
-	eip6963Ports.forEach((port) => {
-		try {
-			if (port.sender) {
-				port.postMessage({
-					type: 'YAKKL_EVENT:EIP6963',
-					event,
-					data
-				});
-			}
-		} catch (error) {
-			log.error('Error broadcasting to port', false, error);
-		}
-	});
-}
-
-export async function showEIP6963Popup(
-	method: string,
-	params: any[],
-	port: RuntimePort,
-	requestId?: string,
-	pinnedLocation: string = 'M'
-): Promise<any> {
-	// Use the provided request ID or throw an error if none provided
-	if (!requestId) {
-		throw new Error('Request ID is required for EIP-6963 popup');
-	}
-
-	// Check if we already have a pending request with this ID
-	const existingRequest = requestManager.getRequest(requestId);
-	if (existingRequest) {
-		log.info(`Reusing existing request for ID: ${requestId}`, false, {
-			method,
-			requestManager: requestManager,
-			existingRequest: existingRequest
-		});
-
-		return new Promise<any>((resolve, reject) => {
-			existingRequest.resolve = resolve;
-			existingRequest.reject = reject;
-		});
-	}
-
-	// Check for duplicate requests with the same method and params
-	const activeRequests = requestManager.getActiveRequests();
-	const duplicateRequest = activeRequests.find(
-		(req) =>
-			req.data.method === method &&
-			JSON.stringify(req.data.params) === JSON.stringify(params) &&
-			req.data.timestamp > Date.now() - 5000 // Only consider requests from the last 5 seconds
-	);
-
-	if (duplicateRequest) {
-		log.info(`Found duplicate request for method: ${method}`, false, {
-			originalId: duplicateRequest.data.id,
-			newId: requestId
-		});
-		return new Promise<any>((resolve, reject) => {
-			duplicateRequest.resolve = resolve;
-			duplicateRequest.reject = reject;
-		});
-	}
-
-	// Show popup
-	const activeTab = get(activeTabBackgroundStore);
-	const url = activeTab?.url || '';
-	const domain = url ? extractSecureDomain(url) : 'NO DOMAIN - NOT ALLOWED';
-
-	// Ensure params is an array and contains the correct data
-	const requestParams = Array.isArray(params) ? params : [params];
-
-	log.debug('----------- EIP-6963: Request params: ------------', false, {
-		requestParams: requestParams,
-		method: method,
-		params: params
-	});
-
-	const requestData: PendingRequestData = {
-		id: requestId,
-		method,
-		params: requestParams,
-		timestamp: Date.now(),
-		requiresApproval: true,
-		metaData: {
-			method: method,
-			params: requestParams,
-			metaData: {
-				domain: domain,
-				isConnected: await verifyDomainConnected(domain),
-				icon: activeTab?.favIconUrl || '/images/failIcon48x48.png',
-				title: activeTab?.title || 'Not Available',
-				origin: url,
-				message:
-					requestParams && requestParams.length > 0 ? String(requestParams[0]) : 'Not Available'
-			}
-		}
-	};
-
-	// Create a new request with proper resolve/reject handlers
-	const request: BackgroundPendingRequest = {
-		resolve: (result) => {
-			port.postMessage({
-				type: 'YAKKL_RESPONSE:EIP6963',
-				jsonrpc: '2.0',
-				id: requestId,
-				method,
-				result
-			});
-		},
-		reject: (error) => {
-			port.postMessage({
-				type: 'YAKKL_RESPONSE:EIP6963',
-				jsonrpc: '2.0',
-				id: requestId,
-				method,
-				error: {
-					code: -32603,
-					message: error?.message || 'Internal error'
-				}
-			});
-		},
-		port: port as Runtime.Port,
-		data: requestData
-	};
-
-	// Add request to request manager
-	requestManager.addRequest(requestId, request);
-
-	// Show popup based on method
-	let popupUrl = `/dapp/popups/approve.html?requestId=${requestId}&source=eip6963&method=${method}`;
-
-	// Show the popup
-	showPopupForMethod(method, requestId, 'M');
-
-	// Return a promise that resolves when the user approves or rejects
-	return new Promise<any>((resolve, reject) => {
-		const request = requestManager.getRequest(requestId);
-		if (request) {
-			request.resolve = resolve;
-			request.reject = reject;
-		}
-	});
-}
diff --git a/packages/yakkl-wallet/src/lib/extensions/chrome/errorResponseHandler.ts b/packages/yakkl-wallet/src/lib/extensions/chrome/errorResponseHandler.ts
index 1da5910..d675e85 100644
--- a/packages/yakkl-wallet/src/lib/extensions/chrome/errorResponseHandler.ts
+++ b/packages/yakkl-wallet/src/lib/extensions/chrome/errorResponseHandler.ts
@@ -1,7 +1,7 @@
 // src/lib/extensions/chrome/utils/errorResponseHandler.ts
 
 import { log } from '$lib/managers/Logger';
-import type { Runtime } from 'webextension-polyfill';
+import type { Runtime } from '$lib/types/browser-types';
 
 /**
  * Standardized error response handler for RPC messages
diff --git a/packages/yakkl-wallet/src/lib/extensions/chrome/ports.ts b/packages/yakkl-wallet/src/lib/extensions/chrome/ports.ts
index 4d47e71..83c1aba 100644
--- a/packages/yakkl-wallet/src/lib/extensions/chrome/ports.ts
+++ b/packages/yakkl-wallet/src/lib/extensions/chrome/ports.ts
@@ -1,10 +1,10 @@
-import type { Runtime } from 'webextension-polyfill';
-import browser from 'webextension-polyfill';
+import type { Runtime } from '$lib/types/browser-types';
+import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
 import { log } from '$lib/common/logger-wrapper';
 import { getTargetOrigin, safePostMessage } from '$lib/common/origin';
 
 type RuntimePort = Runtime.Port;
-const browser_ext = browser;
+const browser_ext = getBrowserExt();
 
 // Port collections
 const portsDapp: RuntimePort[] = [];
diff --git a/packages/yakkl-wallet/src/lib/extensions/chrome/restart.ts b/packages/yakkl-wallet/src/lib/extensions/chrome/restart.ts
index 972f638..a799fea 100644
--- a/packages/yakkl-wallet/src/lib/extensions/chrome/restart.ts
+++ b/packages/yakkl-wallet/src/lib/extensions/chrome/restart.ts
@@ -1,27 +1,5 @@
 // import { browser_ext } from '$lib/common/environment';
-import browser from 'webextension-polyfill';
+import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
 import { log } from '$lib/managers/Logger';
+const browser = getBrowserExt()!;
 
-// WIP - do not use
-export async function restartExtension() {
-	try {
-		if (!browser) return;
-
-		log.info('Restarting extension...');
-
-		// Open the extension popup after a slight delay
-		setTimeout(() => {
-			browser.windows.create({
-				url: browser.runtime.getURL('/popup/popup.html'),
-				type: 'popup',
-				width: 400,
-				height: 600
-			});
-		}, 2000); // Adjust delay as needed to allow the extension to reload
-
-		// Reopen the extension popup after reload
-		browser.runtime.reload();
-	} catch (error) {
-		log.error('Failed to restart extension:', false, error);
-	}
-}
diff --git a/packages/yakkl-wallet/src/lib/extensions/chrome/signingHandler.ts b/packages/yakkl-wallet/src/lib/extensions/chrome/signingHandler.ts
index 41a8e4f..7cfa218 100644
--- a/packages/yakkl-wallet/src/lib/extensions/chrome/signingHandler.ts
+++ b/packages/yakkl-wallet/src/lib/extensions/chrome/signingHandler.ts
@@ -1,6 +1,6 @@
 import { log } from '$lib/managers/Logger';
 import { getSigningManager } from './signingManager';
-import type { Runtime } from 'webextension-polyfill';
+import type { Runtime } from '$lib/types/browser-types';
 
 export type SigningRequest = {
 	type: string; //'personal_sign' | 'eth_signTypedData_v4';
diff --git a/packages/yakkl-wallet/src/lib/extensions/chrome/storage.ts b/packages/yakkl-wallet/src/lib/extensions/chrome/storage.ts
index a427125..c517e83 100644
--- a/packages/yakkl-wallet/src/lib/extensions/chrome/storage.ts
+++ b/packages/yakkl-wallet/src/lib/extensions/chrome/storage.ts
@@ -4,7 +4,7 @@ import { getObjectFromLocalStorage, setObjectInLocalStorage } from '$lib/common/
 import { log } from '$lib/managers/Logger';
 import { upgrade } from '$lib/upgrades/upgrades';
 import { detect } from 'detect-browser';
-import type { Runtime } from 'webextension-polyfill';
+import type { Runtime } from '$lib/types/browser-types';
 
 type RuntimePlatformInfo = Runtime.PlatformInfo;
 
diff --git a/packages/yakkl-wallet/src/lib/extensions/chrome/ui.ts b/packages/yakkl-wallet/src/lib/extensions/chrome/ui.ts
index 2e998ec..10ed52e 100644
--- a/packages/yakkl-wallet/src/lib/extensions/chrome/ui.ts
+++ b/packages/yakkl-wallet/src/lib/extensions/chrome/ui.ts
@@ -1,7 +1,7 @@
 import { STORAGE_YAKKL_PREFERENCES } from '$lib/common/constants';
 import type { Preferences } from '$lib/common/interfaces';
-import type { Windows } from 'webextension-polyfill';
-import browser from 'webextension-polyfill';
+import type { Windows } from '$lib/types/browser-types';
+import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
 import { getObjectFromLocalStorage, setObjectInLocalStorage } from '$lib/common/storage';
 import { log } from '$lib/managers/Logger';
 import type { ExtendedBrowser } from '$lib/common/types/browser-extensions';
diff --git a/packages/yakkl-wallet/src/lib/extensions/chrome/unifiedMessageRouter.ts b/packages/yakkl-wallet/src/lib/extensions/chrome/unifiedMessageRouter.ts
index 2a36086..94b23ed 100644
--- a/packages/yakkl-wallet/src/lib/extensions/chrome/unifiedMessageRouter.ts
+++ b/packages/yakkl-wallet/src/lib/extensions/chrome/unifiedMessageRouter.ts
@@ -5,8 +5,8 @@ import { onEIP6963PortListener } from './eip-6963';
 import { onDappListener } from './dapp';
 import { onPortInternalListener } from '$lib/common/listeners/ui/portListeners';
 import { log } from '$lib/managers/Logger';
-import type { Runtime } from 'webextension-polyfill';
-import browser from 'webextension-polyfill';
+import type { Runtime } from '$lib/types/browser-types';
+import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
 import { YAKKL_DAPP } from '$lib/common/constants';
 
 // This is the single handler that routes to your existing handlers
diff --git a/packages/yakkl-wallet/src/lib/extensions/chrome/utils.ts b/packages/yakkl-wallet/src/lib/extensions/chrome/utils.ts
index c279f24..577026e 100644
--- a/packages/yakkl-wallet/src/lib/extensions/chrome/utils.ts
+++ b/packages/yakkl-wallet/src/lib/extensions/chrome/utils.ts
@@ -4,5 +4,5 @@ export function extractDomain(url: string | URL): string {
 }
 
 // export const browser_ext = typeof browser !== "undefined" ? browser : chrome;
-// import browser from 'webextension-polyfill';
-// export const browser_ext = browser;
+// import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
+// export const browser_ext = getBrowserExt();
diff --git a/packages/yakkl-wallet/src/lib/features/basic/balance/balance.service.ts b/packages/yakkl-wallet/src/lib/features/basic/balance/balance.service.ts
deleted file mode 100644
index 6efe79d..0000000
--- a/packages/yakkl-wallet/src/lib/features/basic/balance/balance.service.ts
+++ /dev/null
@@ -1,242 +0,0 @@
-import { WalletService } from '../../../services/wallet.service';
-import { TokenService } from '../../../services/token.service';
-import type { ServiceResponse, TokenDisplay } from '../../../types';
-import { currentAccount } from '../../../stores/account.store';
-import { get } from 'svelte/store';
-
-interface BalanceInfo {
-  address: string;
-  ethBalance: string;
-  ethBalanceUSD: number;
-  tokens: TokenDisplay[];
-  totalValueUSD: number;
-  lastUpdated: Date;
-}
-
-interface BalanceHistory {
-  timestamp: number;
-  balance: string;
-  valueUSD: number;
-}
-
-export class BalanceService {
-  private static instance: BalanceService;
-  private walletService: WalletService;
-  private tokenService: TokenService;
-
-  private constructor() {
-    this.walletService = WalletService.getInstance();
-    this.tokenService = TokenService.getInstance();
-  }
-
-  static getInstance(): BalanceService {
-    if (!BalanceService.instance) {
-      BalanceService.instance = new BalanceService();
-    }
-    return BalanceService.instance;
-  }
-
-  async getCompleteBalance(address?: string): Promise<ServiceResponse<BalanceInfo>> {
-    try {
-      const account = get(currentAccount);
-      const targetAddress = address || account?.address;
-
-      if (!targetAddress) {
-        return {
-          success: false,
-          error: { hasError: true, message: 'No address provided' }
-        };
-      }
-
-      // Get ETH balance
-      const ethBalanceResponse = await this.walletService.getBalance(targetAddress);
-      if (!ethBalanceResponse.success) {
-        return ethBalanceResponse as unknown as ServiceResponse<BalanceInfo>;
-      }
-
-      // Get token balances
-      const tokensResponse = await this.tokenService.getTokens(targetAddress);
-      if (!tokensResponse.success) {
-        return tokensResponse as unknown as ServiceResponse<BalanceInfo>;
-      }
-
-      const ethBalance = ethBalanceResponse.data || '0';
-      const tokens = tokensResponse.data || [];
-      
-      // Calculate total USD value
-      const ethValueUSD = await this.calculateETHValueUSD(ethBalance);
-      const tokensValueUSD = tokens.reduce((sum, token) => {
-        const tokenValue = typeof token.value === 'number' ? token.value : parseFloat(String(token.value || 0));
-        return sum + tokenValue;
-      }, 0);
-      const totalValueUSD = ethValueUSD + tokensValueUSD;
-
-      return {
-        success: true,
-        data: {
-          address: targetAddress,
-          ethBalance,
-          ethBalanceUSD: ethValueUSD,
-          tokens,
-          totalValueUSD,
-          lastUpdated: new Date()
-        }
-      };
-    } catch (error) {
-      return {
-        success: false,
-        error: { 
-          hasError: true, 
-          message: error instanceof Error ? error.message : 'Failed to get balance' 
-        }
-      };
-    }
-  }
-
-  async refreshBalances(address?: string): Promise<ServiceResponse<boolean>> {
-    try {
-      const account = get(currentAccount);
-      const targetAddress = address || account?.address;
-
-      if (!targetAddress) {
-        return {
-          success: false,
-          error: { hasError: true, message: 'No address provided' }
-        };
-      }
-
-      // Refresh token prices and balances
-      const refreshResponse = await this.tokenService.refreshTokenPrices();
-      
-      return refreshResponse;
-    } catch (error) {
-      return {
-        success: false,
-        error: { 
-          hasError: true, 
-          message: error instanceof Error ? error.message : 'Failed to refresh balances' 
-        }
-      };
-    }
-  }
-
-  async getBalanceHistory(
-    address: string, 
-    days: number = 30
-  ): Promise<ServiceResponse<BalanceHistory[]>> {
-    try {
-      // In a real implementation, this would fetch historical balance data
-      // For now, generate some mock historical data
-      const history: BalanceHistory[] = [];
-      const now = Date.now();
-      const dayMs = 24 * 60 * 60 * 1000;
-
-      for (let i = days; i >= 0; i--) {
-        const timestamp = now - (i * dayMs);
-        // Mock data - in reality this would come from an API or indexer
-        history.push({
-          timestamp,
-          balance: (Math.random() * 2 + 0.5).toFixed(4),
-          valueUSD: Math.random() * 5000 + 1000
-        });
-      }
-
-      return { success: true, data: history };
-    } catch (error) {
-      return {
-        success: false,
-        error: { 
-          hasError: true, 
-          message: error instanceof Error ? error.message : 'Failed to get balance history' 
-        }
-      };
-    }
-  }
-
-  async getTokenAllowance(
-    tokenAddress: string, 
-    spenderAddress: string,
-    ownerAddress?: string
-  ): Promise<ServiceResponse<string>> {
-    try {
-      const account = get(currentAccount);
-      const owner = ownerAddress || account?.address;
-
-      if (!owner) {
-        return {
-          success: false,
-          error: { hasError: true, message: 'No owner address provided' }
-        };
-      }
-
-      // This would call the ERC20 allowance function
-      // For now, return a mock response
-      return {
-        success: true,
-        data: '0' // No allowance by default
-      };
-    } catch (error) {
-      return {
-        success: false,
-        error: { 
-          hasError: true, 
-          message: error instanceof Error ? error.message : 'Failed to get token allowance' 
-        }
-      };
-    }
-  }
-
-  formatBalance(balance: string, decimals: number = 18, precision: number = 4): string {
-    try {
-      const balanceNum = parseFloat(balance) / Math.pow(10, decimals);
-      return balanceNum.toFixed(precision);
-    } catch {
-      return '0.0000';
-    }
-  }
-
-  formatValueUSD(value: number): string {
-    return new Intl.NumberFormat('en-US', {
-      style: 'currency',
-      currency: 'USD',
-      minimumFractionDigits: 2,
-      maximumFractionDigits: 2
-    }).format(value);
-  }
-
-  private async calculateETHValueUSD(ethBalance: string): Promise<number> {
-    try {
-      // Get real ETH price from cache or price manager
-      const { getYakklTokenCache } = await import('$lib/common/stores');
-      const cache = await getYakklTokenCache();
-      
-      // Find ETH price in cache (native ETH has address 0x0...0 or the WETH address)
-      const ethEntry = cache.find(entry => 
-        entry.symbol === 'ETH' && entry.chainId === 1
-      );
-      
-      let ethPrice = ethEntry?.price || 0;
-      
-      // If no cached price, try to get from price manager
-      if (ethPrice === 0) {
-        const { PriceManager } = await import('$lib/managers/PriceManager');
-        const priceManager = new PriceManager();
-        const priceData = await priceManager.getMarketPrice('ETH-USD');
-        ethPrice = priceData.price;
-      }
-      
-      // Fallback to a reasonable default if still no price
-      if (ethPrice === 0) {
-        ethPrice = 3500; // More reasonable default
-      }
-      
-      const balanceETH = parseFloat(ethBalance) / 1e18;
-      return balanceETH * ethPrice;
-    } catch (error) {
-      console.error('[BalanceService] Error calculating ETH value:', error);
-      // Fallback calculation
-      const balanceETH = parseFloat(ethBalance) / 1e18;
-      return balanceETH * 3500; // Reasonable fallback
-    }
-  }
-}
\ No newline at end of file
diff --git a/packages/yakkl-wallet/src/lib/features/basic/index.ts b/packages/yakkl-wallet/src/lib/features/basic/index.ts
deleted file mode 100644
index 38c1f4d..0000000
--- a/packages/yakkl-wallet/src/lib/features/basic/index.ts
+++ /dev/null
@@ -1,4 +0,0 @@
-// Basic tier services
-export { SendService } from './send/send.service';
-export { ReceiveService } from './receive/receive.service';
-export { BalanceService } from './balance/balance.service';
\ No newline at end of file
diff --git a/packages/yakkl-wallet/src/lib/features/basic/receive/receive.service.ts b/packages/yakkl-wallet/src/lib/features/basic/receive/receive.service.ts
deleted file mode 100644
index f35ca07..0000000
--- a/packages/yakkl-wallet/src/lib/features/basic/receive/receive.service.ts
+++ /dev/null
@@ -1,190 +0,0 @@
-import { currentAccount } from '../../../stores/account.store';
-import { currentChain } from '../../../stores/chain.store';
-import { get } from 'svelte/store';
-import type { ServiceResponse } from '../../../types';
-
-interface QRCodeData {
-  address: string;
-  chainId: number;
-  amount?: string;
-  token?: string;
-  message?: string;
-}
-
-interface PaymentRequest {
-  address: string;
-  amount?: string;
-  token?: string;
-  message?: string;
-  qrCode: string;
-  uri: string;
-}
-
-export class ReceiveService {
-  private static instance: ReceiveService;
-
-  private constructor() {}
-
-  static getInstance(): ReceiveService {
-    if (!ReceiveService.instance) {
-      ReceiveService.instance = new ReceiveService();
-    }
-    return ReceiveService.instance;
-  }
-
-  async generatePaymentRequest(
-    amount?: string, 
-    token?: string, 
-    message?: string
-  ): Promise<ServiceResponse<PaymentRequest>> {
-    try {
-      const account = get(currentAccount);
-      const chain = get(currentChain);
-
-      if (!account) {
-        return {
-          success: false,
-          error: { hasError: true, message: 'No account selected' }
-        };
-      }
-
-      if (!chain) {
-        return {
-          success: false,
-          error: { hasError: true, message: 'No network selected' }
-        };
-      }
-
-      const qrData: QRCodeData = {
-        address: account.address,
-        chainId: chain.chainId,
-        amount,
-        token,
-        message
-      };
-
-      // Generate EIP-681 payment URI
-      const uri = this.generatePaymentURI(qrData);
-      
-      // Generate QR code data (in real implementation, this would create actual QR code)
-      const qrCode = this.generateQRCodeData(qrData);
-
-      return {
-        success: true,
-        data: {
-          address: account.address,
-          amount,
-          token,
-          message,
-          qrCode,
-          uri
-        }
-      };
-    } catch (error) {
-      return {
-        success: false,
-        error: { 
-          hasError: true, 
-          message: error instanceof Error ? error.message : 'Failed to generate payment request' 
-        }
-      };
-    }
-  }
-
-  async copyAddressToClipboard(): Promise<ServiceResponse<boolean>> {
-    try {
-      const account = get(currentAccount);
-      
-      if (!account) {
-        return {
-          success: false,
-          error: { hasError: true, message: 'No account selected' }
-        };
-      }
-
-      await navigator.clipboard.writeText(account.address);
-      
-      return { success: true, data: true };
-    } catch (error) {
-      return {
-        success: false,
-        error: { 
-          hasError: true, 
-          message: 'Failed to copy address to clipboard' 
-        }
-      };
-    }
-  }
-
-  async sharePaymentRequest(paymentRequest: PaymentRequest): Promise<ServiceResponse<boolean>> {
-    try {
-      if (navigator.share) {
-        await navigator.share({
-          title: 'Payment Request',
-          text: `Send ${paymentRequest.amount || 'crypto'} to ${paymentRequest.address}`,
-          url: paymentRequest.uri
-        });
-        return { success: true, data: true };
-      } else {
-        // Fallback to clipboard
-        await navigator.clipboard.writeText(paymentRequest.uri);
-        return { success: true, data: true };
-      }
-    } catch (error) {
-      return {
-        success: false,
-        error: { 
-          hasError: true, 
-          message: 'Failed to share payment request' 
-        }
-      };
-    }
-  }
-
-  private generatePaymentURI(data: QRCodeData): string {
-    // EIP-681 format: ethereum:<address>[@<chain_id>][?value=<value>&gas=<gas>&gasPrice=<gasPrice>]
-    let uri = `ethereum:${data.address}`;
-    
-    if (data.chainId !== 1) {
-      uri += `@${data.chainId}`;
-    }
-
-    const params = new URLSearchParams();
-    
-    if (data.amount) {
-      // Convert to wei for ETH, or token units for ERC20
-      if (!data.token || data.token === 'ETH') {
-        const weiAmount = (parseFloat(data.amount) * 1e18).toString();
-        params.append('value', weiAmount);
-      } else {
-        params.append('uint256', data.amount);
-      }
-    }
-
-    if (data.token && data.token !== 'ETH') {
-      // For ERC20 tokens, we'd need the contract address
-      params.append('function', 'transfer');
-    }
-
-    if (data.message) {
-      params.append('message', data.message);
-    }
-
-    const paramString = params.toString();
-    return paramString ? `${uri}?${paramString}` : uri;
-  }
-
-  private generateQRCodeData(data: QRCodeData): string {
-    // In a real implementation, this would generate actual QR code SVG/image
-    // For now, return the URI that would be encoded
-    return this.generatePaymentURI(data);
-  }
-
-  getAddressDisplayFormats(address: string) {
-    return {
-      full: address,
-      short: `${address.slice(0, 6)}...${address.slice(-4)}`,
-      middle: `${address.slice(0, 10)}...${address.slice(-6)}`
-    };
-  }
-}
\ No newline at end of file
diff --git a/packages/yakkl-wallet/src/lib/features/basic/send/send.service.ts b/packages/yakkl-wallet/src/lib/features/basic/send/send.service.ts
deleted file mode 100644
index 79a3a43..0000000
--- a/packages/yakkl-wallet/src/lib/features/basic/send/send.service.ts
+++ /dev/null
@@ -1,150 +0,0 @@
-import { TransactionService } from '../../../services/transaction.service';
-import type { ServiceResponse } from '../../../types';
-
-interface SendParams {
-  to: string;
-  amount: string;
-  tokenAddress?: string;
-  gasPrice?: string;
-  gasLimit?: string;
-}
-
-interface SendResult {
-  txHash: string;
-  gasUsed?: string;
-  status: 'pending' | 'confirmed' | 'failed';
-}
-
-export class SendService {
-  private static instance: SendService;
-  private txService: TransactionService;
-
-  private constructor() {
-    this.txService = TransactionService.getInstance();
-  }
-
-  static getInstance(): SendService {
-    if (!SendService.instance) {
-      SendService.instance = new SendService();
-    }
-    return SendService.instance;
-  }
-
-  async validateSendParams(params: SendParams): Promise<ServiceResponse<boolean>> {
-    try {
-      // Validate recipient address
-      if (!params.to || !this.isValidAddress(params.to)) {
-        return {
-          success: false,
-          error: { hasError: true, message: 'Invalid recipient address' }
-        };
-      }
-
-      // Validate amount
-      const amount = parseFloat(params.amount);
-      if (isNaN(amount) || amount <= 0) {
-        return {
-          success: false,
-          error: { hasError: true, message: 'Invalid amount' }
-        };
-      }
-
-      // Additional validations can be added here
-      return { success: true, data: true };
-    } catch (error) {
-      return {
-        success: false,
-        error: { 
-          hasError: true, 
-          message: error instanceof Error ? error.message : 'Validation failed' 
-        }
-      };
-    }
-  }
-
-  async estimateGasForSend(params: SendParams): Promise<ServiceResponse<string>> {
-    try {
-      const validation = await this.validateSendParams(params);
-      if (!validation.success) {
-        return validation as unknown as ServiceResponse<string>;
-      }
-
-      return await this.txService.estimateGas({
-        to: params.to,
-        value: params.amount,
-        tokenAddress: params.tokenAddress
-      });
-    } catch (error) {
-      return {
-        success: false,
-        error: { 
-          hasError: true, 
-          message: error instanceof Error ? error.message : 'Gas estimation failed' 
-        }
-      };
-    }
-  }
-
-  async sendTokens(params: SendParams): Promise<ServiceResponse<SendResult>> {
-    try {
-      // Validate parameters first
-      const validation = await this.validateSendParams(params);
-      if (!validation.success) {
-        return validation as unknown as ServiceResponse<SendResult>;
-      }
-
-      // Send the transaction
-      const response = await this.txService.sendTransaction({
-        to: params.to,
-        value: params.amount,
-        tokenAddress: params.tokenAddress,
-        gasPrice: params.gasPrice,
-        gasLimit: params.gasLimit
-      });
-
-      if (response.success && response.data) {
-        return {
-          success: true,
-          data: {
-            txHash: response.data,
-            status: 'pending'
-          }
-        };
-      }
-
-      return response as unknown as ServiceResponse<SendResult>;
-    } catch (error) {
-      return {
-        success: false,
-        error: { 
-          hasError: true, 
-          message: error instanceof Error ? error.message : 'Send transaction failed' 
-        }
-      };
-    }
-  }
-
-  async getMaxSendAmount(tokenAddress?: string): Promise<ServiceResponse<string>> {
-    try {
-      // This would get the maximum sendable amount accounting for gas fees
-      // For now, we'll use a simple implementation
-      return {
-        success: true,
-        data: tokenAddress ? '999999999' : '0.95' // Leave some ETH for gas
-      };
-    } catch (error) {
-      return {
-        success: false,
-        error: { 
-          hasError: true, 
-          message: error instanceof Error ? error.message : 'Failed to calculate max amount' 
-        }
-      };
-    }
-  }
-
-  private isValidAddress(address: string): boolean {
-    // Basic Ethereum address validation
-    return /^0x[a-fA-F0-9]{40}$/.test(address);
-  }
-}
\ No newline at end of file
diff --git a/packages/yakkl-wallet/src/lib/features/index.ts b/packages/yakkl-wallet/src/lib/features/index.ts
index 4a31139..dbaf0e0 100644
--- a/packages/yakkl-wallet/src/lib/features/index.ts
+++ b/packages/yakkl-wallet/src/lib/features/index.ts
@@ -1,4 +1,4 @@
 // Feature modules organized by tier
-export * from './basic';
+export * from './explorer';
 export * from './pro';
-export * from './payment';
\ No newline at end of file
+export * from './payment';
diff --git a/packages/yakkl-wallet/src/lib/features/payment/subscription/subscription.service.ts b/packages/yakkl-wallet/src/lib/features/payment/subscription/subscription.service.ts
index efefeb7..49b3943 100644
--- a/packages/yakkl-wallet/src/lib/features/payment/subscription/subscription.service.ts
+++ b/packages/yakkl-wallet/src/lib/features/payment/subscription/subscription.service.ts
@@ -1,6 +1,6 @@
 import { BaseService } from '../../../services/base.service';
 import type { ServiceResponse } from '../../../types';
-import { PlanType } from '../../../config/features';
+import { PlanType } from '$lib/common/types';
 import { currentAccount } from '../../../stores/account.store';
 import { get } from 'svelte/store';
 
@@ -90,7 +90,7 @@ export class SubscriptionService extends BaseService {
   async getCurrentSubscription(): Promise<ServiceResponse<Subscription | null>> {
     try {
       const account = get(currentAccount);
-      
+
       if (!account) {
         return {
           success: false,
@@ -118,13 +118,13 @@ export class SubscriptionService extends BaseService {
   }
 
   async subscribeToPlan(
-    planId: string, 
-    paymentMethodId: string, 
+    planId: string,
+    paymentMethodId: string,
     couponCode?: string
   ): Promise<ServiceResponse<Subscription>> {
     try {
       const account = get(currentAccount);
-      
+
       if (!account) {
         return {
           success: false,
@@ -154,7 +154,7 @@ export class SubscriptionService extends BaseService {
   async cancelSubscription(immediate: boolean = false): Promise<ServiceResponse<Subscription>> {
     try {
       const account = get(currentAccount);
-      
+
       if (!account) {
         return {
           success: false,
@@ -182,7 +182,7 @@ export class SubscriptionService extends BaseService {
   async updatePaymentMethod(paymentMethodId: string): Promise<ServiceResponse<boolean>> {
     try {
       const account = get(currentAccount);
-      
+
       if (!account) {
         return {
           success: false,
@@ -210,7 +210,7 @@ export class SubscriptionService extends BaseService {
   async getPaymentMethods(): Promise<ServiceResponse<PaymentMethod[]>> {
     try {
       const account = get(currentAccount);
-      
+
       if (!account) {
         return {
           success: false,
@@ -242,7 +242,7 @@ export class SubscriptionService extends BaseService {
   ): Promise<ServiceResponse<PaymentMethod>> {
     try {
       const account = get(currentAccount);
-      
+
       if (!account) {
         return {
           success: false,
@@ -271,7 +271,7 @@ export class SubscriptionService extends BaseService {
   async getInvoices(limit: number = 10): Promise<ServiceResponse<Invoice[]>> {
     try {
       const account = get(currentAccount);
-      
+
       if (!account) {
         return {
           success: false,
@@ -300,7 +300,7 @@ export class SubscriptionService extends BaseService {
   async startTrial(planId: string): Promise<ServiceResponse<Subscription>> {
     try {
       const account = get(currentAccount);
-      
+
       if (!account) {
         return {
           success: false,
@@ -349,9 +349,9 @@ export class SubscriptionService extends BaseService {
   private async getDefaultPlans(): Promise<ServiceResponse<SubscriptionPlan[]>> {
     const plans: SubscriptionPlan[] = [
       {
-        id: 'basic',
-        name: 'Basic',
-        type: PlanType.Basic,
+        id: 'explorer_member',
+        name: 'Explorer',
+        type: PlanType.EXPLORER_MEMBER,
         price: 0,
         currency: 'USD',
         interval: 'month',
@@ -366,12 +366,12 @@ export class SubscriptionService extends BaseService {
       {
         id: 'pro-monthly',
         name: 'Pro',
-        type: PlanType.Pro,
-        price: 9.99,
+        type: PlanType.YAKKL_PRO,
+        price: 8.00,
         currency: 'USD',
         interval: 'month',
         features: [
-          'Everything in Basic',
+          'Everything in Explorer',
           'Token Swapping',
           'AI Assistant',
           'Advanced Analytics',
@@ -385,12 +385,12 @@ export class SubscriptionService extends BaseService {
       {
         id: 'pro-yearly',
         name: 'Pro',
-        type: PlanType.Pro,
-        price: 99.99,
+        type: PlanType.YAKKL_PRO,
+        price: 80.00,
         currency: 'USD',
         interval: 'year',
         features: [
-          'Everything in Basic',
+          'Everything in Explorer',
           'Token Swapping',
           'AI Assistant',
           'Advanced Analytics',
@@ -404,8 +404,8 @@ export class SubscriptionService extends BaseService {
       {
         id: 'enterprise',
         name: 'Enterprise',
-        type: PlanType.Enterprise,
-        price: 99.99,
+        type: PlanType.ENTERPRISE,
+        price: 999.99,
         currency: 'USD',
         interval: 'month',
         features: [
@@ -421,4 +421,4 @@ export class SubscriptionService extends BaseService {
 
     return { success: true, data: plans };
   }
-}
\ No newline at end of file
+}
diff --git a/packages/yakkl-wallet/src/lib/managers/BackgroundManager.ts b/packages/yakkl-wallet/src/lib/managers/BackgroundManager.ts
index 9362bea..408579b 100644
--- a/packages/yakkl-wallet/src/lib/managers/BackgroundManager.ts
+++ b/packages/yakkl-wallet/src/lib/managers/BackgroundManager.ts
@@ -1,6 +1,6 @@
 import { browser_ext } from '$lib/common/environment';
 import { log } from '$lib/common/logger-wrapper';
-import type { Runtime } from 'webextension-polyfill';
+import type { Runtime } from '$lib/types/browser-types';
 
 export interface QueuedMessage<T = unknown> {
 	type: string;
diff --git a/packages/yakkl-wallet/src/lib/managers/BalanceCacheManager.ts b/packages/yakkl-wallet/src/lib/managers/BalanceCacheManager.ts
index 612278e..239e815 100644
--- a/packages/yakkl-wallet/src/lib/managers/BalanceCacheManager.ts
+++ b/packages/yakkl-wallet/src/lib/managers/BalanceCacheManager.ts
@@ -1,15 +1,17 @@
 import { log } from '$lib/managers/Logger';
 import type { CachedBalanceData } from '$lib/utilities/accountData';
+import { getObjectFromExtensionStorage, setObjectInExtensionStorage, removeFromExtensionStorage } from '$lib/common/stores';
 
 export class BalanceCacheManager {
-	private static instance: BalanceCacheManager | null = null;
-	private readonly CACHE_KEY = 'yakkl_balance_cache';
-	private readonly CACHE_DURATION = 15 * 60 * 1000; // 15 minutes (increased from 5 to reduce API calls)
-	private readonly STALE_DURATION = 10 * 60 * 1000; // 10 minutes (increased from 2 to reduce background refreshes)
+	private static instance: BalanceCacheManager;
+	private readonly CACHE_KEY = 'yakklBalanceCache';
+	private readonly CACHE_EXPIRY = 5 * 60 * 1000; // 5 minutes
+	private readonly STALE_DURATION = 2 * 60 * 1000; // 2 minutes
 	private cache: Map<string, CachedBalanceData> = new Map();
 
 	private constructor() {
-		this.loadFromStorage();
+		// Start loading asynchronously, but don't block constructor
+		this.initializeAsync();
 	}
 
 	public static getInstance(): BalanceCacheManager {
@@ -19,6 +21,16 @@ export class BalanceCacheManager {
 		return BalanceCacheManager.instance;
 	}
 
+	/**
+	 * Initialize asynchronously without blocking constructor
+	 */
+	private initializeAsync(): void {
+		this.loadFromStorage().catch(error => {
+			// Log error but don't fail - cache will just start empty
+			console.warn('BalanceCacheManager: Failed to load from storage, starting with empty cache:', error);
+		});
+	}
+
 	/**
 	 * Get cached balance data for an address
 	 */
@@ -28,9 +40,11 @@ export class BalanceCacheManager {
 
 		// Check if cache is expired
 		const age = Date.now() - cached.timestamp;
-		if (age > this.CACHE_DURATION) {
+		if (age > this.CACHE_EXPIRY) {
 			this.cache.delete(address.toLowerCase());
-			this.saveToStorage();
+			this.saveToStorage().catch(error => {
+				console.warn('BalanceCacheManager: Failed to save cache after expiry cleanup:', error);
+			});
 			return null;
 		}
 
@@ -55,26 +69,27 @@ export class BalanceCacheManager {
 		const cacheData: CachedBalanceData = {
 			address: address.toLowerCase(),
 			balance,
-			timestamp: Date.now(),
-			price
+			price,
+			timestamp: Date.now()
 		};
 
 		this.cache.set(address.toLowerCase(), cacheData);
-		this.saveToStorage();
-
-		log.debug('[BalanceCacheManager] Cached balance for address:', false, {
-			address: address.toLowerCase(),
-			balance: balance.toString(),
-			price
+		this.saveToStorage().catch(error => {
+			console.warn('BalanceCacheManager: Failed to save cache after setting balance:', error);
 		});
 	}
 
 	/**
 	 * Clear all cached data
 	 */
-	public clearCache(): void {
+	public async clearCache(): Promise<void> {
 		this.cache.clear();
-		localStorage.removeItem(this.CACHE_KEY);
+		try {
+			await removeFromExtensionStorage(this.CACHE_KEY);
+		} catch (error) {
+			// Fallback to localStorage
+			localStorage.removeItem(this.CACHE_KEY);
+		}
 		log.info('[BalanceCacheManager] Cache cleared');
 	}
 
@@ -83,7 +98,9 @@ export class BalanceCacheManager {
 	 */
 	public clearCachedBalance(address: string): void {
 		this.cache.delete(address.toLowerCase());
-		this.saveToStorage();
+		this.saveToStorage().catch(error => {
+			console.warn('BalanceCacheManager: Failed to save cache after clearing balance:', error);
+		});
 	}
 
 	/**
@@ -92,21 +109,17 @@ export class BalanceCacheManager {
 	public updatePriceForAllEntries(newPrice: number): void {
 		let updated = 0;
 
-		for (const [address, data] of this.cache.entries()) {
-			// Only update if price actually changed
+		for (const [, data] of this.cache.entries()) {
 			if (data.price !== newPrice) {
-				this.cache.set(address, {
-					...data,
-					price: newPrice,
-					timestamp: Date.now() // Refresh timestamp since value changed
-				});
+				data.price = newPrice;
 				updated++;
 			}
 		}
 
 		if (updated > 0) {
-			this.saveToStorage();
-			log.info(`[BalanceCacheManager] Updated price for ${updated} cached entries to ${newPrice}`);
+			this.saveToStorage().catch(error => {
+				console.warn('BalanceCacheManager: Failed to save cache after price update:', error);
+			});
 		}
 	}
 
@@ -125,15 +138,16 @@ export class BalanceCacheManager {
 		let cleaned = 0;
 
 		for (const [address, data] of this.cache.entries()) {
-			if (now - data.timestamp > this.CACHE_DURATION) {
+			if (now - data.timestamp > this.CACHE_EXPIRY) {
 				this.cache.delete(address);
 				cleaned++;
 			}
 		}
 
 		if (cleaned > 0) {
-			this.saveToStorage();
-			log.info(`[BalanceCacheManager] Cleaned up ${cleaned} expired entries`);
+			this.saveToStorage().catch(error => {
+				console.warn('BalanceCacheManager: Failed to save cache after cleanup:', error);
+			});
 		}
 	}
 
@@ -150,18 +164,15 @@ export class BalanceCacheManager {
 			}
 		}
 
-		log.debug(
-			`[BalanceCacheManager] Preloaded ${preloaded.size}/${addresses.length} balances from cache`
-		);
 		return preloaded;
 	}
 
 	/**
 	 * Load cache from localStorage
 	 */
-	private loadFromStorage(): void {
+	private async loadFromStorage(): Promise<void> {
 		try {
-			const stored = localStorage.getItem(this.CACHE_KEY);
+			const stored = await getObjectFromExtensionStorage<string>(this.CACHE_KEY);
 			if (stored) {
 				const parsed = JSON.parse(stored);
 				this.cache = new Map(
@@ -188,7 +199,7 @@ export class BalanceCacheManager {
 	/**
 	 * Save cache to localStorage
 	 */
-	private saveToStorage(): void {
+	private async saveToStorage(): Promise<void> {
 		try {
 			const serializable = Object.fromEntries(
 				Array.from(this.cache.entries()).map(([address, data]) => [
@@ -200,7 +211,7 @@ export class BalanceCacheManager {
 				])
 			);
 
-			localStorage.setItem(this.CACHE_KEY, JSON.stringify(serializable));
+			await setObjectInExtensionStorage(this.CACHE_KEY, JSON.stringify(serializable));
 		} catch (error) {
 			log.warn('[BalanceCacheManager] Failed to save cache to storage:', false, error);
 		}
@@ -222,7 +233,7 @@ export class BalanceCacheManager {
 
 		for (const data of this.cache.values()) {
 			const age = now - data.timestamp;
-			if (age > this.CACHE_DURATION) {
+			if (age > this.CACHE_EXPIRY) {
 				expired++;
 			} else if (age > this.STALE_DURATION) {
 				stale++;
@@ -240,5 +251,19 @@ export class BalanceCacheManager {
 	}
 }
 
-// Export singleton instance
-export const balanceCacheManager = BalanceCacheManager.getInstance();
+// Export singleton getter - lazy initialization to avoid browser API access at module load time
+export function getBalanceCacheManager(): BalanceCacheManager {
+	return BalanceCacheManager.getInstance();
+}
+
+// For backward compatibility, create a proxy that lazily initializes
+export const balanceCacheManager = new Proxy({} as BalanceCacheManager, {
+	get(_, prop) {
+		const instance = BalanceCacheManager.getInstance();
+		return Reflect.get(instance, prop, instance);
+	},
+	set(_, prop, value) {
+		const instance = BalanceCacheManager.getInstance();
+		return Reflect.set(instance, prop, value, instance);
+	}
+});
diff --git a/packages/yakkl-wallet/src/lib/managers/DAppPopupManager.ts b/packages/yakkl-wallet/src/lib/managers/DAppPopupManager.ts
index 30fddcb..dc89225 100644
--- a/packages/yakkl-wallet/src/lib/managers/DAppPopupManager.ts
+++ b/packages/yakkl-wallet/src/lib/managers/DAppPopupManager.ts
@@ -1,9 +1,9 @@
 import { log } from '$lib/common/logger-wrapper';
 import { sendNotificationMessage } from '$lib/common/notifications';
 import { showExtensionPopup } from '$contexts/background/extensions/chrome/ui';
-import browser from 'webextension-polyfill';
+import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
 
-const browser_ext = browser;
+const browser_ext = getBrowserExt();
 
 // See example usage below::
 
diff --git a/packages/yakkl-wallet/src/lib/managers/KeyManager.ts b/packages/yakkl-wallet/src/lib/managers/KeyManager.ts
index 632dbe4..d81e89f 100644
--- a/packages/yakkl-wallet/src/lib/managers/KeyManager.ts
+++ b/packages/yakkl-wallet/src/lib/managers/KeyManager.ts
@@ -1,8 +1,8 @@
 import { log } from '$lib/managers/Logger';
-import browser from 'webextension-polyfill';
+import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
 import { subtle } from 'crypto';
 import { detectExecutionContext } from '$lib/common/utils';
-import type { Manifest } from 'webextension-polyfill';
+import type { Manifest } from '$lib/types/browser-types';
 import keyConfig from '../config/keys.json';
 import { initializeStorageDefaults } from '$lib/common/backgroundUtils';
 import { isBackgroundContext } from '$lib/common/contextCheck';
diff --git a/packages/yakkl-wallet/src/lib/managers/PortManager.ts b/packages/yakkl-wallet/src/lib/managers/PortManager.ts
index aab7527..5c30f1e 100644
--- a/packages/yakkl-wallet/src/lib/managers/PortManager.ts
+++ b/packages/yakkl-wallet/src/lib/managers/PortManager.ts
@@ -1,5 +1,5 @@
 // Updated portManager.ts
-import type { Runtime } from 'webextension-polyfill';
+import type { Runtime } from '$lib/types/browser-types';
 import { log } from '$lib/managers/Logger';
 
 interface PortRegistration {
diff --git a/packages/yakkl-wallet/src/lib/managers/PortManagerWithStream.ts b/packages/yakkl-wallet/src/lib/managers/PortManagerWithStream.ts
index 49a0f36..9aa429a 100644
--- a/packages/yakkl-wallet/src/lib/managers/PortManagerWithStream.ts
+++ b/packages/yakkl-wallet/src/lib/managers/PortManagerWithStream.ts
@@ -2,7 +2,7 @@ import { getDuplex } from '$lib/common/duplexShim';
 import { PortDuplexStream, type LightweightDuplex } from './PortStreamManager';
 import { log } from '$lib/common/logger-wrapper';
 import { browser_ext, isClient, getBrowserExt } from '$lib/common/environment';
-import type { Runtime } from 'webextension-polyfill';
+import type { Runtime } from '$lib/types/browser-types';
 import type { DuplexOptions } from 'stream';
 
 export class PortManagerWithStream {
diff --git a/packages/yakkl-wallet/src/lib/managers/PortStreamManager.ts b/packages/yakkl-wallet/src/lib/managers/PortStreamManager.ts
index 3edccc3..f9e2d4a 100644
--- a/packages/yakkl-wallet/src/lib/managers/PortStreamManager.ts
+++ b/packages/yakkl-wallet/src/lib/managers/PortStreamManager.ts
@@ -1,7 +1,7 @@
 // File: PortStreamManager.ts
 import { log } from '$lib/common/logger-wrapper';
 import { browser_ext } from '$lib/common/environment';
-import type { Runtime } from 'webextension-polyfill';
+import type { Runtime } from '$lib/types/browser-types';
 import { getDuplex } from '$lib/common/duplexShim';
 import type { Duplex as StreamDuplex } from 'readable-stream'; // or 'stream'
 
diff --git a/packages/yakkl-wallet/src/lib/managers/RequestManager.ts b/packages/yakkl-wallet/src/lib/managers/RequestManager.ts
index 20aa348..91818b7 100644
--- a/packages/yakkl-wallet/src/lib/managers/RequestManager.ts
+++ b/packages/yakkl-wallet/src/lib/managers/RequestManager.ts
@@ -1,5 +1,5 @@
 // RequestManager.ts
-import type { Runtime } from 'webextension-polyfill';
+import type { Runtime } from '$lib/types/browser-types';
 import { log } from '$lib/managers/Logger';
 import type { BackgroundPendingRequest } from '$contexts/background/extensions/chrome/background';
 
diff --git a/packages/yakkl-wallet/src/lib/managers/SessionManager.ts b/packages/yakkl-wallet/src/lib/managers/SessionManager.ts
index b586de8..fac0753 100644
--- a/packages/yakkl-wallet/src/lib/managers/SessionManager.ts
+++ b/packages/yakkl-wallet/src/lib/managers/SessionManager.ts
@@ -68,7 +68,7 @@ export class SessionManager {
 		userId: string,
 		username: string,
 		profileId: string,
-		planLevel: string = 'basic'
+		planLevel: string = 'explorer_member'
 	): Promise<string> {
 		try {
 			// Generate JWT token
@@ -114,6 +114,26 @@ export class SessionManager {
 					sessionId,
 					expiresAt: this.sessionState.expiresAt
 				});
+
+							// Also notify about login success to start JWT validation
+			try {
+				if (typeof chrome !== 'undefined' && chrome.runtime) {
+					// Send the JWT token to background for storage and validation
+					chrome.runtime.sendMessage({
+						type: 'USER_LOGIN_SUCCESS',
+						sessionId,
+						hasJWT: !!jwtToken,
+						jwtToken: jwtToken, // Include the actual JWT token
+						userId,
+						username,
+						profileId,
+						planLevel
+					});
+					log.debug('SessionManager: Notified background about login success with JWT token');
+				}
+			} catch (error) {
+				log.warn('SessionManager: Failed to notify background about login:', false, error);
+			}
 			}
 
 			return jwtToken;
@@ -487,7 +507,7 @@ export class SessionManager {
 		try {
 			const browserExt = getBrowserExt();
 			if (!browserExt) return;
-			
+
 			browserExt.runtime.sendMessage({
 				type: `SESSION_${type}`,
 				data
diff --git a/packages/yakkl-wallet/src/lib/managers/SessionPortManager.ts b/packages/yakkl-wallet/src/lib/managers/SessionPortManager.ts
index 763c4ea..17ec06b 100644
--- a/packages/yakkl-wallet/src/lib/managers/SessionPortManager.ts
+++ b/packages/yakkl-wallet/src/lib/managers/SessionPortManager.ts
@@ -1,5 +1,5 @@
 // SessionPortManager.ts
-import type { Runtime } from 'webextension-polyfill';
+import type { Runtime } from '$lib/types/browser-types';
 import { log } from '$lib/managers/Logger';
 import type { SessionInfo } from '$lib/common/interfaces';
 import { getWindowOrigin } from '$lib/common/origin';
diff --git a/packages/yakkl-wallet/src/lib/managers/SingletonWindowManager.ts b/packages/yakkl-wallet/src/lib/managers/SingletonWindowManager.ts
index d2770a9..c32f556 100644
--- a/packages/yakkl-wallet/src/lib/managers/SingletonWindowManager.ts
+++ b/packages/yakkl-wallet/src/lib/managers/SingletonWindowManager.ts
@@ -1,10 +1,10 @@
 import { log } from '$lib/common/logger-wrapper';
-import browser from 'webextension-polyfill';
-import type { Windows } from 'webextension-polyfill';
+import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
+import type { BrowserAPI } from '$lib/types/browser-types';
 import { openWindows } from '$contexts/background/extensions/chrome/ui';
 import { showExtensionPopup } from '$contexts/background/extensions/chrome/ui';
 
-const browser_ext = browser;
+const browser_ext = getBrowserExt();
 
 export class SingletonWindowManager {
 	private static instance: SingletonWindowManager | null = null;
@@ -31,7 +31,7 @@ export class SingletonWindowManager {
 
 		try {
 			log.info('Initializing SingletonWindowManager');
-			
+
 			// Initialize from session storage
 			await this.loadStoredWindowId();
 
@@ -90,21 +90,21 @@ export class SingletonWindowManager {
 	}
 
 	async showPopup(url: string = '', pinnedLocation: string = '0'): Promise<void> {
-		log.info('SingletonWindowManager.showPopup called', false, { 
-			url, 
-			pinnedLocation, 
+		log.info('SingletonWindowManager.showPopup called', false, {
+			url,
+			pinnedLocation,
 			currentWindowId: this.currentWindowId,
-			initialized: this.initialized 
+			initialized: this.initialized
 		});
-		
+
 		try {
 			// Ensure we're initialized
 			await this.initialize();
-			
+
 			// Log state after initialization
-			log.info('After initialization', false, { 
+			log.info('After initialization', false, {
 				currentWindowId: this.currentWindowId,
-				initialized: this.initialized 
+				initialized: this.initialized
 			});
 
 			// Check if browser_ext is available
@@ -116,21 +116,21 @@ export class SingletonWindowManager {
 			if (this.currentWindowId) {
 				let windowExists = false;
 				let windowValid = false;
-				
+
 				try {
 					// Try to get the window
 					const existingWindow = await browser_ext.windows.get(this.currentWindowId);
-					
+
 					// Check if window actually exists and is our popup
 					if (existingWindow && existingWindow.id === this.currentWindowId) {
 						windowExists = true;
 						windowValid = true;
-						log.info('Found existing popup window', false, { 
-							windowId: this.currentWindowId, 
+						log.info('Found existing popup window', false, {
+							windowId: this.currentWindowId,
 							windowState: existingWindow.state,
-							focused: existingWindow.focused 
+							focused: existingWindow.focused
 						});
-						
+
 						// Focus existing window
 						await browser_ext.windows.update(this.currentWindowId, {
 							focused: true,
@@ -151,16 +151,16 @@ export class SingletonWindowManager {
 						return;
 					} else {
 						// Window object returned but doesn't match our ID
-						log.warn('Window returned but ID mismatch', false, { 
+						log.warn('Window returned but ID mismatch', false, {
 							expectedId: this.currentWindowId,
-							actualId: existingWindow?.id 
+							actualId: existingWindow?.id
 						});
 						windowExists = true;
 						windowValid = false;
 					}
 				} catch (error) {
 					// Error getting window - it doesn't exist
-					log.info('Window does not exist or cannot be accessed', false, { 
+					log.info('Window does not exist or cannot be accessed', false, {
 						windowId: this.currentWindowId,
 						errorMessage: (error as Error).message,
 						errorString: String(error)
@@ -168,23 +168,23 @@ export class SingletonWindowManager {
 					windowExists = false;
 					windowValid = false;
 				}
-				
+
 				// If window doesn't exist or is invalid, clean up and create a new one
 				if (!windowExists || !windowValid) {
-					log.info('Window is invalid or closed, cleaning up and creating new window', false, { 
+					log.info('Window is invalid or closed, cleaning up and creating new window', false, {
 						windowId: this.currentWindowId,
 						windowExists,
 						windowValid
 					});
-					
+
 					// Remove from openWindows map if it exists (before clearing currentWindowId)
 					if (openWindows && this.currentWindowId) {
 						openWindows.delete(this.currentWindowId);
 					}
-					
+
 					// Clear the current window ID
 					this.currentWindowId = null;
-					
+
 					// Clean up session storage
 					if (browser_ext.storage?.session) {
 						try {
@@ -203,19 +203,19 @@ export class SingletonWindowManager {
 			try {
 				window = await showExtensionPopup(428, 926, url, pinnedLocation);
 			} catch (error) {
-				log.error('Failed to create popup window', false, { 
+				log.error('Failed to create popup window', false, {
 					error: error instanceof Error ? error.message : error,
 					url,
-					pinnedLocation 
+					pinnedLocation
 				});
 				throw error;
 			}
-			
+
 			if (!window || !window.id) {
 				log.error('Window creation returned invalid result', false, { window });
 				throw new Error('Failed to create popup window - invalid window object');
 			}
-			
+
 			this.currentWindowId = window.id;
 			log.info('New popup window created successfully', false, { windowId: window.id });
 
@@ -246,16 +246,16 @@ export class SingletonWindowManager {
 	}
 
 	private async onWindowRemoved(windowId: number) {
-		log.info('Window removed event fired', false, { 
-			removedWindowId: windowId, 
+		log.info('Window removed event fired', false, {
+			removedWindowId: windowId,
 			currentWindowId: this.currentWindowId,
 			isOurWindow: windowId === this.currentWindowId
 		});
-		
+
 		if (windowId === this.currentWindowId) {
 			log.info('Our popup window was closed, cleaning up', false, { windowId });
 			this.currentWindowId = null;
-			
+
 			// Try to remove from session storage, but don't fail if already removed
 			try {
 				// Check if session storage is available before trying to remove
@@ -271,7 +271,7 @@ export class SingletonWindowManager {
 			} catch (error) {
 				log.warn('Session storage operation failed', false, error);
 			}
-			
+
 			// Don't lock the wallet when window is closed - only lock on explicit logout or idle timeout
 			// This allows users to close and reopen the wallet without re-authenticating
 			log.info('Window closed - wallet remains unlocked for quick reopening');
@@ -279,25 +279,60 @@ export class SingletonWindowManager {
 	}
 
 
+	/**
+	 * Check if there's an active popup window
+	 */
+	async hasActiveWindow(): Promise<boolean> {
+		try {
+			await this.initialize();
+
+			if (!this.currentWindowId || !browser_ext) {
+				return false;
+			}
+
+			try {
+				const window = await browser_ext.windows.get(this.currentWindowId);
+				return !!(window && window.id === this.currentWindowId);
+			} catch (error) {
+				// Window doesn't exist
+				this.currentWindowId = null;
+				if (browser_ext?.storage?.session) {
+					await browser_ext.storage.session.remove('windowId');
+				}
+				return false;
+			}
+		} catch (error) {
+			log.error('Failed to check for active window:', false, error);
+			return false;
+		}
+	}
+
+	/**
+	 * Get the current window ID if available
+	 */
+	getCurrentWindowId(): number | null {
+		return this.currentWindowId;
+	}
+
 	/**
 	 * Reset the singleton instance - useful for testing or when extension is reloaded
 	 */
 	static reset() {
 		if (SingletonWindowManager.instance) {
 			const instance = SingletonWindowManager.instance;
-			
+
 			// Remove listener if exists
 			if (browser_ext?.windows?.onRemoved && instance.handleWindowRemoved) {
 				browser_ext.windows.onRemoved.removeListener(instance.handleWindowRemoved);
 			}
-			
+
 			// Clear state
 			instance.currentWindowId = null;
 			instance.initialized = false;
-			
+
 			// Clear singleton instance
 			SingletonWindowManager.instance = null;
-			
+
 			log.info('SingletonWindowManager reset');
 		}
 	}
diff --git a/packages/yakkl-wallet/src/lib/managers/TransactionCacheManager.ts b/packages/yakkl-wallet/src/lib/managers/TransactionCacheManager.ts
index f0f4f84..8c74cc8 100644
--- a/packages/yakkl-wallet/src/lib/managers/TransactionCacheManager.ts
+++ b/packages/yakkl-wallet/src/lib/managers/TransactionCacheManager.ts
@@ -2,6 +2,7 @@ import { log } from '$lib/managers/Logger';
 import type { TransactionDisplay } from '$lib/types';
 import { StorageService } from '$lib/common/shared/StorageService';
 import { browser } from '$app/environment';
+import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
 
 interface TransactionCache {
   transactions: TransactionDisplay[];
@@ -20,7 +21,7 @@ export class TransactionCacheManager {
   private static instance: TransactionCacheManager;
   private storageService: StorageService;
   private memoryCache: Map<string, TransactionCache> = new Map();
-  
+
   private readonly config: TransactionCacheConfig = {
     maxAge: 5 * 60 * 1000, // 5 minutes
     maxTransactions: 1000, // Store up to 1000 transactions per address/chain
@@ -88,7 +89,7 @@ export class TransactionCacheManager {
     sortOrder: 'newest' | 'oldest' = 'newest'
   ): Promise<TransactionDisplay[] | null> {
     const cacheKey = this.getCacheKey(address, chainId);
-    
+
     // Check memory cache first
     const memoryCache = this.memoryCache.get(cacheKey);
     if (memoryCache && Date.now() - memoryCache.lastUpdated < this.config.maxAge) {
@@ -99,7 +100,7 @@ export class TransactionCacheManager {
     // Check persistent storage
     const storageKey = this.getStorageKey(cacheKey);
     const storedCache = await this.storageService.getData<TransactionCache | null>(storageKey, null);
-    
+
     if (storedCache && Date.now() - storedCache.lastUpdated < this.config.maxAge) {
       // Update memory cache
       this.memoryCache.set(cacheKey, storedCache);
@@ -121,33 +122,33 @@ export class TransactionCacheManager {
   ): Promise<void> {
     const cacheKey = this.getCacheKey(address, chainId);
     const storageKey = this.getStorageKey(cacheKey);
-    
+
     // Get existing cache
     const existingCache = await this.storageService.getData<TransactionCache | null>(storageKey, null);
-    
+
     // Merge transactions (newer ones take precedence)
     const mergedTransactions = this.mergeTransactions(
       existingCache?.transactions || [],
       transactions
     );
-    
+
     // Limit the number of transactions
     const limitedTransactions = mergedTransactions.slice(0, this.config.maxTransactions);
-    
+
     const cache: TransactionCache = {
       transactions: limitedTransactions,
       lastUpdated: Date.now(),
       chainId,
       address: address.toLowerCase()
     };
-    
+
     // Update both memory and storage
     this.memoryCache.set(cacheKey, cache);
     await this.storageService.saveData(storageKey, cache);
-    
+
     // Update index
     await this.updateCacheIndex(cacheKey);
-    
+
     log.debug('TransactionCacheManager: Cache updated', false, {
       address,
       chainId,
@@ -165,14 +166,14 @@ export class TransactionCacheManager {
   ): Promise<void> {
     const cacheKey = this.getCacheKey(address, chainId);
     const storageKey = this.getStorageKey(cacheKey);
-    
+
     // Get existing cache
     const existingCache = await this.storageService.getData<TransactionCache | null>(storageKey, null);
     const transactions = existingCache?.transactions || [];
-    
+
     // Check if transaction already exists
     const existingIndex = transactions.findIndex(tx => tx.hash === transaction.hash);
-    
+
     if (existingIndex !== -1) {
       // Update existing transaction
       transactions[existingIndex] = transaction;
@@ -180,21 +181,21 @@ export class TransactionCacheManager {
       // Add new transaction at the beginning (newest first)
       transactions.unshift(transaction);
     }
-    
+
     // Limit the number of transactions
     const limitedTransactions = transactions.slice(0, this.config.maxTransactions);
-    
+
     const cache: TransactionCache = {
       transactions: limitedTransactions,
       lastUpdated: Date.now(),
       chainId,
       address: address.toLowerCase()
     };
-    
+
     // Update both memory and storage
     this.memoryCache.set(cacheKey, cache);
     await this.storageService.saveData(storageKey, cache);
-    
+
     log.debug('TransactionCacheManager: Transaction added', false, {
       hash: transaction.hash,
       address,
@@ -209,29 +210,29 @@ export class TransactionCacheManager {
     const cutoffTime = Date.now() - (this.config.retentionDays * 24 * 60 * 60 * 1000);
     const index = await this.loadCacheIndex();
     let cleanedCount = 0;
-    
+
     for (const cacheKey of index) {
       const storageKey = this.getStorageKey(cacheKey);
       const cache = await this.storageService.getData<TransactionCache | null>(storageKey, null);
-      
+
       if (cache) {
         // Filter out old transactions
         const filteredTransactions = cache.transactions.filter(
           tx => tx.timestamp > cutoffTime / 1000 // Convert to seconds
         );
-        
+
         if (filteredTransactions.length < cache.transactions.length) {
           cache.transactions = filteredTransactions;
           cache.lastUpdated = Date.now();
-          
+
           await this.storageService.saveData(storageKey, cache);
           this.memoryCache.set(cacheKey, cache);
-          
+
           cleanedCount += cache.transactions.length - filteredTransactions.length;
         }
       }
     }
-    
+
     log.info('TransactionCacheManager: Cleared old transactions', false, {
       transactionsRemoved: cleanedCount,
       retentionDays: this.config.retentionDays
@@ -244,25 +245,27 @@ export class TransactionCacheManager {
   async clearCache(address: string, chainId: number): Promise<void> {
     const cacheKey = this.getCacheKey(address, chainId);
     const storageKey = this.getStorageKey(cacheKey);
-    
+
     // Clear from memory
     this.memoryCache.delete(cacheKey);
-    
+
     // Clear from storage
     if (browser) {
       try {
-        const browserApi = (await import('webextension-polyfill')).default;
-        await browserApi.storage.local.remove(storageKey);
+        const browserApi = getBrowserExt();
+        if (browserApi) {
+          await browserApi.storage.local.remove(storageKey);
+        }
       } catch (error) {
         log.error('Failed to clear cache from storage', false, error);
       }
     }
-    
+
     // Update index
     const index = await this.loadCacheIndex();
     const newIndex = index.filter(key => key !== cacheKey);
     await this.saveCacheIndex(newIndex);
-    
+
     log.debug('TransactionCacheManager: Cache cleared', false, { address, chainId });
   }
 
@@ -271,24 +274,26 @@ export class TransactionCacheManager {
    */
   async clearAllCaches(): Promise<void> {
     const index = await this.loadCacheIndex();
-    
+
     // Clear all cache entries
     if (browser) {
       try {
-        const browserApi = (await import('webextension-polyfill')).default;
-        const keysToRemove = index.map(key => this.getStorageKey(key));
-        await browserApi.storage.local.remove(keysToRemove);
+        const browserApi = getBrowserExt();
+        if (browserApi) {
+          const keysToRemove = index.map(key => this.getStorageKey(key));
+          await browserApi.storage.local.remove(keysToRemove);
+        }
       } catch (error) {
         log.error('Failed to clear all caches from storage', false, error);
       }
     }
-    
+
     // Clear memory cache
     this.memoryCache.clear();
-    
+
     // Clear index
     await this.saveCacheIndex([]);
-    
+
     log.info('TransactionCacheManager: All caches cleared', false);
   }
 
@@ -304,12 +309,12 @@ export class TransactionCacheManager {
     const index = await this.loadCacheIndex();
     let totalTransactions = 0;
     let oldestTransaction: number | null = null;
-    
+
     for (const cacheKey of index) {
       const cache = this.memoryCache.get(cacheKey);
       if (cache) {
         totalTransactions += cache.transactions.length;
-        
+
         for (const tx of cache.transactions) {
           if (!oldestTransaction || tx.timestamp < oldestTransaction) {
             oldestTransaction = tx.timestamp;
@@ -317,7 +322,7 @@ export class TransactionCacheManager {
         }
       }
     }
-    
+
     return {
       totalCaches: index.length,
       totalTransactions,
@@ -334,17 +339,17 @@ export class TransactionCacheManager {
     newTxs: TransactionDisplay[]
   ): TransactionDisplay[] {
     const txMap = new Map<string, TransactionDisplay>();
-    
+
     // Add existing transactions
     for (const tx of existing) {
       txMap.set(tx.hash, tx);
     }
-    
+
     // Add/update with new transactions
     for (const tx of newTxs) {
       txMap.set(tx.hash, tx);
     }
-    
+
     // Convert back to array and sort by timestamp (newest first)
     return Array.from(txMap.values()).sort((a, b) => b.timestamp - a.timestamp);
   }
@@ -357,13 +362,13 @@ export class TransactionCacheManager {
     order: 'newest' | 'oldest'
   ): TransactionDisplay[] {
     const sorted = [...transactions];
-    
+
     if (order === 'newest') {
       sorted.sort((a, b) => b.timestamp - a.timestamp);
     } else {
       sorted.sort((a, b) => a.timestamp - b.timestamp);
     }
-    
+
     return sorted;
   }
 
@@ -372,7 +377,7 @@ export class TransactionCacheManager {
    */
   private async updateCacheIndex(cacheKey: string): Promise<void> {
     const index = await this.loadCacheIndex();
-    
+
     if (!index.includes(cacheKey)) {
       index.push(cacheKey);
       await this.saveCacheIndex(index);
@@ -390,7 +395,7 @@ export class TransactionCacheManager {
           log.error('Failed to run cleanup task', false, error);
         });
       }, 24 * 60 * 60 * 1000); // 24 hours
-      
+
       // Run initial cleanup after 1 minute
       setTimeout(() => {
         this.clearOldTransactions().catch(error => {
@@ -399,4 +404,4 @@ export class TransactionCacheManager {
       }, 60 * 1000); // 1 minute
     }
   }
-}
\ No newline at end of file
+}
diff --git a/packages/yakkl-wallet/src/lib/managers/UniswapSwapManager.ts b/packages/yakkl-wallet/src/lib/managers/UniswapSwapManager.ts
index 2719a9a..410bb98 100644
--- a/packages/yakkl-wallet/src/lib/managers/UniswapSwapManager.ts
+++ b/packages/yakkl-wallet/src/lib/managers/UniswapSwapManager.ts
@@ -8,6 +8,8 @@ import {
 	YAKKL_GAS_ESTIMATE_MULTIHOP_SWAP_DEFAULT,
 	YAKKL_GAS_ESTIMATE_MULTIPLIER_BASIS_POINTS
 } from '$lib/common';
+import { BigNumberishUtils } from '$lib/common/BigNumberishUtils';
+import { DecimalMath } from '$lib/common/DecimalMath';
 import type {
 	BigNumberish,
 	PoolInfoData,
@@ -38,36 +40,13 @@ import { EVMToken } from './tokens/evm/EVMToken';
 import { EthersConverter } from './utilities/EthersConverter';
 import { log } from '$lib/common/logger-wrapper';
 
-// import { getToken, type TokenPair } from '$lib/common/tokens';
-// import { CurrencyAmount, Token as UniswapToken } from '@uniswap/sdk-core';
-// import IUniswapV3PoolABI from '@uniswap/v3-core/artifacts/contracts/interfaces/IUniswapV3Pool.sol/IUniswapV3Pool.json';
-// import { Pool, SqrtPriceMath, TickMath } from '@uniswap/v3-sdk';
-// import JSBI from 'jsbi';
-// import JSBI from '@uniswap/sdk-core/node_modules/jsbi';
-// import { convertToUniswapToken, sqrtPriceX96ToPrice } from './utilities/uniswap';
-// import { AlphaRouterService } from '@yakkl/uniswap-alpha-router-service';
-
 const SUPPORTED_STABLECOINS = ['USDC', 'USDT', 'DAI', 'BUSD'];
 
-// example
-// import { AlphaRouterService } from 'uniswap-alpha-router-service';
-
-// const service = new AlphaRouterService();
-// try {
-//   const quote = await service.getQuote( tokenIn, tokenOut, amount, fundingAddress );
-//   // Use quote data
-// } catch ( error ) {
-//   log.error( 'Quote error:', false, error );
-// } finally {
-//   service.dispose();
-// }
-
 export class UniswapSwapManager extends SwapManager {
 	private routerContract: ethers.Contract | null = null;
 	private providerNative: ethers.JsonRpcProvider | null = null;
 	private signerNative: ethers.JsonRpcSigner | null = null;
 	private factory: ethers.Contract | null = null;
-	// private alphaRouter: AlphaRouterService;
 
 	constructor(
 		blockchain: Ethereum,
@@ -75,7 +54,6 @@ export class UniswapSwapManager extends SwapManager {
 		initialFeeBasisPoints: number = YAKKL_FEE_BASIS_POINTS
 	) {
 		super(blockchain, provider, initialFeeBasisPoints);
-		// this.alphaRouter = new AlphaRouterService();
 		this.initialize().then();
 	}
 
@@ -106,15 +84,12 @@ export class UniswapSwapManager extends SwapManager {
 	}
 
 	dispose() {
-		// this.alphaRouter.dispose();
 	}
 
 	getName(): string {
 		return 'Uniswap V3';
 	}
 
-	// Get best price tier for a swap - future implementation
-
 	async checkIfPoolExists(tokenIn: Token, tokenOut: Token, fee: number): Promise<boolean> {
 		if (!this.factory) throw new Error('Factory contract not initialized');
 		try {
@@ -125,7 +100,6 @@ export class UniswapSwapManager extends SwapManager {
 		}
 	}
 
-	// For getting the tokens specific to Uniswap V3
 	async fetchTokenList(): Promise<SwapToken[]> {
 		try {
 			const response = await fetch('https://tokens.uniswap.org');
@@ -165,86 +139,6 @@ export class UniswapSwapManager extends SwapManager {
 			.filter((token): token is SwapToken => token !== undefined);
 	}
 
-	// Final fallback for multi-hop quotes but we may move this up and replace the multiHopQuote method
-	//   async multiHopQuoteAlphaRouter(
-	//     tokenIn: Token,
-	//     tokenOut: Token,
-	//     amount: BigNumberish,
-	//     fundingAddress: string,
-	//     isExactIn: boolean = true
-	//   ): Promise<SwapPriceData> {
-	//   try {
-	//     // Step 1: Set up the provider using Alchemy (ethers v5)
-	//     const provider = new ethersv5.providers.AlchemyProvider(
-	//       'mainnet',
-	//       import.meta.env.VITE_ALCHEMY_API_KEY_PROD
-	//     );
-
-	//     // Step 2: Initialize the AlphaRouter
-	//     const router = new AlphaRouter( { chainId: 1, provider } );
-
-	//     const slippageTolerance = new Percent( 5, 100 );
-
-	//     // Step 3: Set up the Swap route request
-	//     const amountInOrOut = ethersv5.BigNumber.from( amount );
-	//     const swapRouteOptions: SwapOptions = {
-	//       recipient: fundingAddress,
-	//       slippageTolerance: slippageTolerance, // Setting a 5% slippage tolerance
-	//       deadline: Math.floor( Date.now() / 1000 ) + 60 * 20, // 20 minutes from now
-	//       type: SwapType.SWAP_ROUTER_02, // Set the type to indicate the router version (SwapRouter02 is the most used)
-	//     };
-
-	//     // Convert to uniswap tokens
-
-	//     const currencyAmount = CurrencyAmount.fromRawAmount( convertToUniswapToken( isExactIn ? tokenIn : tokenOut ), amountInOrOut.toString() );
-
-	//     // Step 4: Call AlphaRouter to get the best swap route
-	//     const swapRoute: SwapRoute | null = await router.route(
-	//       currencyAmount,
-	//       convertToUniswapToken( tokenOut),
-	//       isExactIn ? TradeType.EXACT_INPUT : TradeType.EXACT_OUTPUT,
-	//       swapRouteOptions
-	//     );
-
-	//     if ( !swapRoute ) {
-	//       throw new Error( 'No valid route exists for the provided tokens and amount' );
-	//     }
-
-	//     // Step 5: Extract quote information from the SwapRoute
-	//     const quoteAmount = swapRoute.quote.toFixed( 0 ); // CurrencyAmount has address and which token in it
-	//     const gasEstimate = ethersv5.BigNumber.from( swapRoute.estimatedGasUsed );
-
-	//     let poolFee: number | undefined = undefined;
-
-	//     if ( swapRoute instanceof V3RouteWithValidQuote ) {
-	//       const route = swapRoute.route; // V3Route object containing pool information
-	//       if ( route && route.pools && route.pools.length > 0 ) {
-	//         // Extracting the fee from the first pool in the route
-	//         poolFee = route.pools[ 0 ].fee; // Assuming this pool has a 'fee' property
-	//       }
-	//     }
-
-	//     const fee = poolFee ?? 3000; // Default to 3000 basis points if pool fee is not found
-
-	//     return await this.constructQuoteData(
-	//       tokenIn,
-	//       tokenOut,
-	//       fundingAddress,
-	//       amount,
-	//       BigInt( quoteAmount ),
-	//       fee, // Assuming first fee for simplicity
-	//       gasEstimate.toBigInt(),
-	//       true, // multiHop
-	//       0n, // sqrtPriceX96After.toBigInt(),
-	//       0, // initializedTicksCrossed,
-	//       isExactIn
-	//     );
-	//   } catch ( error ) {
-	//     debug_log( 'Error fetching multi-hop quote using AlphaRouter:', false, error );
-	//     throw new Error( 'Failed to get multi-hop quote via AlphaRouter. This means pools do not exist.' );
-	//   }
-	// }
-
 	async multiHopQuote(
 		tokenIn: Token,
 		tokenOut: Token,
@@ -253,40 +147,10 @@ export class UniswapSwapManager extends SwapManager {
 		isExactIn: boolean = true,
 		fee: number = 3000
 	): Promise<SwapPriceData> {
-		// const quote = await this.alphaRouter.getQuote(
-		//   tokenIn,
-		//   tokenOut,
-		//   amount.toString(),
-		//   fundingAddress,
-		//   isExactIn
-		// );
-
-		// if ( !quote.success || !quote.data ) {
-		//   throw new Error( quote.error || 'Failed to get quote' );
-		// }
-
-		// return this.constructQuoteData(
-		//   tokenIn,
-		//   tokenOut,
-		//   fundingAddress,
-		//   amount,
-		//   BigInt( quote.data.quoteAmount ),
-		//   quote.data.fee ?? 3000,
-		//   BigInt( quote.data.gasEstimate ),
-		//   true,
-		//   0n,
-		//   0,
-		//   isExactIn
-		// );
-
-		// multiHopQuoteAlphaRouter(tokenIn, tokenOut, amount, fundingAddress, isExactIn);
-
-		// Step 1: Set up the provider using Alchemy (ethers v6)
 		const provider = new ethers.AlchemyProvider(
 			'mainnet',
 			import.meta.env.VITE_ALCHEMY_API_KEY_PROD
 		);
-		// Step 2: Define the QuoterV2 contract address and ABI
 		const quoterV2ABI = [
 			{
 				inputs: [
@@ -338,10 +202,8 @@ export class UniswapSwapManager extends SwapManager {
 			}
 		];
 
-		// Step 3: Create the contract instance
 		const quoterContract = new ethers.Contract(ADDRESSES.UNISWAP_V3_QUOTER, quoterV2ABI, provider);
 
-		// Step 4: Encode the path using solidityPack (ethers v5)
 		const tokenInAddress = tokenIn.address;
 		const tokenOutAddress = tokenOut.address;
 
@@ -367,7 +229,6 @@ export class UniswapSwapManager extends SwapManager {
 					]
 				);
 
-		// Step 5: Call the contract method
 		const amountInOrOut = toBigInt(amount);
 
 		const multiHopParams = {
@@ -378,7 +239,6 @@ export class UniswapSwapManager extends SwapManager {
 		try {
 			let quoteAmount: bigint;
 
-			// Returns a single value for the quote instead of a tuple of values
 			if (isExactIn) {
 				quoteAmount = await quoterContract.quoteExactInput.staticCall(
 					multiHopParams.path,
@@ -417,16 +277,11 @@ export class UniswapSwapManager extends SwapManager {
 		} catch (error) {
 			const excludedProperties = ['url', 'requestBody', 'requestMethod', 'accessList'];
 			const formattedError = this.errorUniswap(error, excludedProperties);
-			// debug_log( 'Formatted error: ', formattedError );
 
 			throw new Error(formattedError);
-			// AlphaRouter causes issues with current version of ethers so it is no longer used here
-			// return this.multiHopQuoteAlphaRouter( tokenIn, tokenOut, amount, fundingAddress, isExactIn );
 		}
 
 		throw new Error('Token pools not found');
-		// AlphaRouter causes issues with current version of ethers so it is no longer used here
-		// return this.multiHopQuoteAlphaRouter( tokenIn, tokenOut, amount, fundingAddress, isExactIn );
 	}
 
 	async getQuote(
@@ -437,7 +292,6 @@ export class UniswapSwapManager extends SwapManager {
 		isExactIn: boolean = true,
 		fee: number = 3000
 	): Promise<SwapPriceData> {
-		// Determine actual tokens for routing
 		const actualTokenIn = tokenIn.isNative ? await this.getWETHToken() : tokenIn;
 		const actualTokenOut = tokenOut.isNative ? await this.getWETHToken() : tokenOut;
 
@@ -452,7 +306,6 @@ export class UniswapSwapManager extends SwapManager {
 		}
 
 		if (!actualTokenIn?.address || !actualTokenOut?.address || !amount) {
-			// Default empty quote return if params are not sufficient
 			return {
 				provider: this.getName(),
 				lastUpdated: new Date(),
@@ -491,9 +344,7 @@ export class UniswapSwapManager extends SwapManager {
 			};
 		}
 		if (!this.providerNative) throw new Error('Provider(s) not set');
-		// Step 1: Get available pools
 		const availablePools = await this.getAvailablePools(actualTokenIn, actualTokenOut);
-		// Step 2: Proceed with the first available pool (or select a pool with the desired fee). There are cases where pools only have a single fee tier.
 		let newFee = fee;
 
 		if (!availablePools || !availablePools.includes(fee)) {
@@ -501,7 +352,6 @@ export class UniswapSwapManager extends SwapManager {
 		}
 
 		if (!availablePools || availablePools.length === 0) {
-			// Handle multi-hop or throw an error if no valid routes exist
 			try {
 				return await this.multiHopQuote(
 					tokenIn,
@@ -518,8 +368,6 @@ export class UniswapSwapManager extends SwapManager {
 		}
 
 		try {
-			// Step 3: Call `quoteExactInputSingle` or `quoteExactOutputSingle` based on the type of swap
-			// (Using the fee obtained from the available pool)
 			const params = {
 				tokenIn: actualTokenIn.address,
 				tokenOut: actualTokenOut.address,
@@ -565,7 +413,6 @@ export class UniswapSwapManager extends SwapManager {
 			log.error('Direct pool quote failed, trying multi-hop:', false, error);
 		}
 
-		// If direct pool fails, attempt multi-hop anyway
 		try {
 			return await this.multiHopQuote(tokenIn, tokenOut, amount, fundingAddress, isExactIn, newFee);
 		} catch (error) {
@@ -574,9 +421,7 @@ export class UniswapSwapManager extends SwapManager {
 		}
 	}
 
-	// WIP - Not yet implemented
 	async estimateSwapGas(swapRouterAddress: string, swapParams: SwapParams): Promise<bigint> {
-		// debug_log( 'Estimating gas for swap:', swapParams );
 		return 0n;
 	}
 
@@ -584,7 +429,6 @@ export class UniswapSwapManager extends SwapManager {
 		const availablePools: number[] = [];
 		const feeTiers = [500, 3000, 10000]; // Common fee tiers on Uniswap V3
 
-		// Loop through each fee tier to check if a pool exists
 		for (const fee of feeTiers) {
 			try {
 				const poolAddress = await this.getPoolAddress(tokenA, tokenB, fee);
@@ -600,7 +444,6 @@ export class UniswapSwapManager extends SwapManager {
 
 	async getPoolAddress(tokenA: Token, tokenB: Token, fee: number): Promise<string> {
 		if (!this.factory) throw new Error('Factory contract not initialized');
-		// Sort the tokens by address to get the correct pool address (Uniswap requires tokens in sorted order)
 		const [token0, token1] = [tokenA.address, tokenB.address].sort((a, b) =>
 			a.toLowerCase() < b.toLowerCase() ? -1 : 1
 		);
@@ -608,135 +451,6 @@ export class UniswapSwapManager extends SwapManager {
 		return poolAddress;
 	}
 
-	// WIP - Not yet implemented - Liquidity consideration of pools.
-	// async getQuoteWithLiquidityConsideration(
-	//   tokenIn: Token,
-	//   tokenOut: Token,
-	//   amount: BigNumberish,
-	//   fundingAddress: string,
-	//   isExactIn: boolean = true,
-	//   preferredFee: number = 3000,
-	//   liquidityThreshold?: BigNumberish // Updated to be optional
-	// ): Promise<SwapPriceData> {
-	//   try {
-	//     // Determine actual tokens for routing
-	//     const actualTokenIn = tokenIn.isNative ? await this.getWETHToken() : tokenIn;
-	//     const actualTokenOut = tokenOut.isNative ? await this.getWETHToken() : tokenOut;
-
-	//     // Step 1: Get available pools
-	//     const availablePools = await this.getAvailablePools( actualTokenIn, actualTokenOut );
-
-	//     if ( availablePools.length === 0 ) {
-	//       log.error( `No pools exist for ${ tokenIn.symbol } and ${ tokenOut.symbol }` );
-	//       // Handle multi-hop or throw an error if no valid routes exist
-	//       return await this.multiHopQuote( tokenIn, tokenOut, amount, fundingAddress, isExactIn );
-	//     }
-
-	//     // Step 2: Choose the appropriate fee tier based on liquidity
-	//     let selectedFee: number | undefined = undefined;
-	//     let maxLiquidity = BigInt( 0 );
-
-	//     for ( const fee of availablePools ) {
-	//       const liquidity = await this.getPoolLiquidity( actualTokenIn, actualTokenOut, fee );
-	//       if ( liquidity === null ) {
-	//         log.error( `Liquidity data unavailable for pool with fee ${ fee }` );
-	//         continue;
-	//       }
-
-	//       // Check if the liquidity is greater than the threshold or keep track of the highest liquidity
-	//       if (
-	//         liquidityThreshold == null ||
-	//         ( liquidityThreshold != null && BigInt( liquidity ) > BigInt( liquidityThreshold ) )
-	//       ) {
-	//         if ( BigInt( liquidity ) > maxLiquidity ) {
-	//           selectedFee = fee;
-	//           maxLiquidity = BigInt( liquidity );
-	//         }
-	//       }
-	//     }
-
-	//     // If no suitable pool was found based on the threshold, use the first available pool
-	//     const fee = selectedFee ? selectedFee : availablePools[ 0 ];
-	//     log.error( `Using fee tier ${ fee } with liquidity ${ maxLiquidity.toString() }` );
-
-	//     // Step 3: Create quote parameters
-	//     const params = {
-	//       tokenIn: actualTokenIn.address,
-	//       tokenOut: actualTokenOut.address,
-	//       fee,
-	//       sqrtPriceLimitX96: 0n,
-	//       ...( isExactIn ? { amountIn: amount } : { amount: amount } ),
-	//     };
-
-	//     const quoterContract = new ethersv6.Contract(
-	//       ADDRESSES.UNISWAP_V3_QUOTER,
-	//       IQuoterV2ABI.abi,
-	//       this.providerNative
-	//     );
-	//     if ( !quoterContract ) throw new Error( 'Invalid quoter contract' );
-
-	//     let quoteAmount: bigint = 0n;
-	//     let sqrtPriceX96After: bigint = 0n;
-	//     let initializedTicksCrossed: number = 0;
-	//     let gasEstimate: bigint = 0n;
-
-	//     try {
-	//       if ( isExactIn ) {
-	//         // Comes from fromAmount
-	//         [ quoteAmount, sqrtPriceX96After, initializedTicksCrossed, gasEstimate ] =
-	//           await quoterContract.quoteExactInputSingle.staticCall( params );
-	//       } else {
-	//         // Comes from toAmount
-	//         [ quoteAmount, sqrtPriceX96After, initializedTicksCrossed, gasEstimate ] =
-	//           await quoterContract.quoteExactOutputSingle.staticCall( params );
-	//       }
-
-	//       if ( quoteAmount > 0n ) {
-	//         return await this.constructQuoteData(
-	//           tokenIn,
-	//           tokenOut,
-	//           fundingAddress,
-	//           amount,
-	//           quoteAmount,
-	//           fee,
-	//           gasEstimate,
-	//           false, // multiHop
-	//           sqrtPriceX96After,
-	//           initializedTicksCrossed,
-	//           isExactIn
-	//         );
-	//       }
-	//     } catch ( error ) {
-	//       log.error( 'Direct pool quote failed, trying multi-hop:', false, error );
-	//     }
-
-	//     // Step 4: If no direct pool works, attempt a multi-hop route
-	//     return await this.multiHopQuote( tokenIn, tokenOut, amount, fundingAddress, isExactIn );
-	//   } catch ( error ) {
-	//     log.error( 'Error in getQuoteWithLiquidityConsideration:', false, error );
-	//     throw error;
-	//   }
-	// }
-
-	// async getPoolLiquidity( tokenA: Token, tokenB: Token, fee: number ): Promise<BigNumberish | null> {
-	//   try {
-	//     const poolAddress = await this.getPoolAddress( tokenA, tokenB, fee );
-	//     if ( poolAddress === ethersv6.ZeroAddress ) {
-	//       log.error( `No pool exists for the token pair ${ tokenA.symbol }/${ tokenB.symbol } at fee ${ fee }` );
-	//       return null;
-	//     }
-
-	//     const poolContract = new ethersv6.Contract( poolAddress, UNISWAP_POOL_ABI, this.providerNative );
-	//     const liquidity = await poolContract.liquidity();
-	//     return liquidity;
-	//   } catch ( error ) {
-	//     log.error( 'Error fetching pool liquidity:', false, error );
-	//     return null;
-	//   }
-	// }
-
-	// Where fees are calculated...
-
 	private async constructQuoteData(
 		tokenIn: Token,
 		tokenOut: Token,
@@ -750,7 +464,6 @@ export class UniswapSwapManager extends SwapManager {
 		initializedTicksCrossed: number,
 		isExactIn: boolean
 	): Promise<SwapPriceData> {
-		// Fee should always be calculated based on the 'buy' side
 		const feeAmount = this.calculateFee(isExactIn ? quoteAmount : toBigInt(amount));
 
 		const amountAfterFee = isExactIn ? quoteAmount - feeAmount : quoteAmount + feeAmount; // Adjusted amount after fee
@@ -763,20 +476,15 @@ export class UniswapSwapManager extends SwapManager {
 		);
 		const exchangeRate = formattedAmountOut / formattedAmountIn;
 
-		// Fetch USD prices (these should come back as `number`)
-		// These should cycle through the providers to get the first price
 		const priceIn = await this.getMarketPrice(`${tokenIn.symbol}-USD`);
 		const priceOut = await this.getMarketPrice(`${tokenOut.symbol}-USD`);
 
-		// This is not checking specific prices but the object itself
 		if (!priceIn || !priceOut) {
 			throw new Error('Failed to get price from provider');
 		}
 
-		// const feeAmountInTokenOut = ethersv6.formatUnits( feeAmount, tokenOut.decimals ); // Fee amount in tokenOut
-
-		const feeAmountInUSD = formatFeeToUSD(feeAmount, tokenOut.decimals, priceOut.price); //feeAmountInTokenOut * priceOut.price; // Always in tokenOut (buy side)
-		const priceOutBigInt = BigInt(Math.round(priceOut.price * 10 ** tokenOut.decimals));
+		const feeAmountInUSD = formatFeeToUSD(feeAmount, tokenOut.decimals, BigNumberishUtils.toNumber(priceOut.price)); //feeAmountInTokenOut * priceOut.price; // Always in tokenOut (buy side)
+		const priceOutBigInt = BigInt(DecimalMath.of(BigNumberishUtils.toNumber(priceOut.price)).mul(Math.pow(10, tokenOut.decimals)).round(0).toNumber());
 
 		let gasEstimateInUSD = '';
 		let adjustedGasEstimate = 0n;
@@ -787,17 +495,13 @@ export class UniswapSwapManager extends SwapManager {
 			adjustedGasEstimate =
 				(gasEstimate * (10000n + YAKKL_GAS_ESTIMATE_MULTIPLIER_BASIS_POINTS)) / 10000n;
 
-			// Convert gas estimate from Gwei to Ether
 			const gasEstimateInEther = adjustedGasEstimate * 10n ** 9n;
 			const gasEstimateInEtherNumber = Number(gasEstimateInEther) / 10 ** 18;
 
-			// Calculate gas cost in USD using the price of Ether
 			const ethPriceInUSD = gasPrice.price;
 
-			// Multiply gas in Ether with Ether's price to get the cost in USD
-			const gasCostInUSD = gasEstimateInEtherNumber * ethPriceInUSD;
+			const gasCostInUSD = DecimalMath.of(gasEstimateInEtherNumber).mul(BigNumberishUtils.toNumber(ethPriceInUSD)).toNumber();
 
-			// Can use Math.max to ensure a gas estimate
 			gasEstimateInUSD =
 				gasCostInUSD > YAKKL_GAS_ESTIMATE_MIN_USD
 					? formatPrice(gasCostInUSD)
@@ -827,13 +531,12 @@ export class UniswapSwapManager extends SwapManager {
 			],
 			fee,
 			feeBasisPoints: this.feeBasisPoints,
-			feeAmountPrice: (Number(feeAmount) * priceOut.price) / formattedAmountOut,
+			feeAmountPrice: DecimalMath.of(Number(feeAmount)).mul(BigNumberishUtils.toNumber(priceOut.price)).div(formattedAmountOut).toNumber(),
 			feeAmountInUSD,
 			gasEstimate: adjustedGasEstimate,
 			gasEstimateInUSD,
 			tokenOutPriceInUSD: formatPrice(Number(priceOutBigInt) / 10 ** tokenOut.decimals),
 
-			// Default values and have no meaning here but are required for the interface and will be corrected further up the chain
 			slippageTolerance: 0.5,
 			deadline: 10,
 
@@ -852,22 +555,18 @@ export class UniswapSwapManager extends SwapManager {
 		fundingAddress: string,
 		fee: number
 	): Promise<bigint> {
-		// Ensure provider is not null
 		if (!this.providerNative) {
 			throw new Error('Ethereum provider not initialized');
 		}
 
-		// Step 1: Set up the SwapRouter contract (Uniswap V3)
 		const swapRouterABI = [
 			'function exactInput((bytes path,uint256 amountIn,uint256 amountOutMinimum,address recipient,uint256 deadline)) external payable returns (uint256 amountOut)'
 		];
 
-		// Create a provider from the existing provider
 		const provider = new ethers.JsonRpcProvider(await this.provider.getProviderURL());
 
 		const swapRouter = new ethers.Contract(ADDRESSES.UNISWAP_V3_ROUTER, swapRouterABI, provider);
 
-		// Step 2: Encode the multi-hop path using ethers v6 utils
 		const encodedPath = ethers.solidityPacked(
 			['address', 'uint24', 'address', 'uint24', 'address'],
 			[
@@ -879,13 +578,11 @@ export class UniswapSwapManager extends SwapManager {
 			]
 		);
 
-		// Step 3: Prepare swap parameters
 		const recipient: string = fundingAddress;
 
 		const deadline = Math.floor(Date.now() / 1000) + 60 * 20; // 20 minutes from the current Unix time
 		const amountOutMinimum = 0; // You can adjust slippage tolerance here
 
-		// Parameters for the swap
 		const swapParams = {
 			path: encodedPath,
 			amountIn: amountIn.toString(), // Convert to string for ethers v5
@@ -894,22 +591,16 @@ export class UniswapSwapManager extends SwapManager {
 			deadline: deadline
 		};
 
-		// Step 4: Estimate gas for the transaction
 		try {
-			// Populate the transaction using the contract method directly
 			const tx = await swapRouter.exactInput.populateTransaction(swapParams);
 
-			// Ensure from address is set
 			tx.from = recipient;
 
-			// Add value for native token input
-			// If tokenIn is native, add the amountIn as value
 			const isNativeInput = tokenIn.toLowerCase() === ethers.ZeroAddress.toLowerCase();
 			if (isNativeInput) {
 				tx.value = BigInt(amountIn.toString());
 			}
 
-			// Try to estimate gas with a fallback mechanism
 			let gasEstimate: bigint;
 			try {
 				const estimatedGas = await provider.estimateGas({
@@ -918,19 +609,16 @@ export class UniswapSwapManager extends SwapManager {
 				});
 				gasEstimate = BigInt(estimatedGas.toString());
 			} catch (estimateError) {
-				// Fallback: Use a fixed gas limit or a percentage increase
 				const baseGasLimit = YAKKL_GAS_ESTIMATE_MULTIHOP_SWAP_DEFAULT; // Adjust based on typical multi-hop swap gas usage
 				gasEstimate = BigInt(baseGasLimit);
 			}
 
-			// Add a buffer to the gas estimate
 			const gasEstimateBigInt = gasEstimate; // Already bigint
 			const adjustedGasEstimate =
 				(gasEstimateBigInt * (10000n + YAKKL_GAS_ESTIMATE_MULTIPLIER_BASIS_POINTS)) / 10000n;
 
 			return adjustedGasEstimate;
 		} catch (error) {
-			// Fallback to a default gas estimate
 			const fallbackGasLimit = BigInt(YAKKL_GAS_ESTIMATE_MULTIHOP_SWAP_DEFAULT); // Adjust based on typical multi-hop swap gas usage
 			return fallbackGasLimit;
 		}
@@ -944,278 +632,6 @@ export class UniswapSwapManager extends SwapManager {
 		throw new Error('Not implemented yet');
 	}
 
-	// async getPoolInfo( tokenIn: SwapToken, tokenOut: SwapToken, fee: number = 3000 ): Promise<PoolInfoData> {
-	//   if ( !this.factory || !this.provider ) throw new Error( 'Contracts not initialized' );
-
-	//   try {
-	//     const poolAddress = await this.factory.getPool( tokenIn.address, tokenOut.address, fee );
-	//     if ( !poolAddress || poolAddress === ethersv6.ZeroAddress ) {
-	//       throw new Error( 'Pool does not exist' );
-	//     }
-
-	//     const tokenA = convertToUniswapToken( tokenIn );
-	//     const tokenB = convertToUniswapToken( tokenOut );
-
-	//     const poolContract = new ethersv6.Contract( poolAddress, IUniswapV3PoolABI.abi, this.providerNative );
-	//     if ( !poolContract ) throw new Error( 'Pool contract not found' );
-
-	//     const [ slot0, liquidity, token0Address, token1Address, tickSpacing, poolFee, tickBitmap, ticks ] = await Promise.all( [
-	//       poolContract.slot0(),
-	//       poolContract.liquidity(),
-	//       poolContract.token0(),
-	//       poolContract.token1(),
-	//       poolContract.tickSpacing(),
-	//       poolContract.fee(),
-	//       poolContract.tickBitmap( 0 ),
-	//       poolContract.ticks( 0 )
-	//     ] );
-
-	//     debug_log( '\n\nUniswapPriceProvider - getPoolInfo: >>>>>>>>>>>>>>>>>>>>>>>>>>>> POOL START <<<<<<<<<<<<<<<<<<<<<<<<\n\n' );
-	//     debug_log( 'UniswapPriceProvider - getPoolInfo:', poolContract );
-
-	//     debug_log( 'Slot0:', slot0 );
-	//     debug_log( 'Liquidity:', liquidity.toString() );
-	//     debug_log( 'Token0 address:', token0Address, tokenA );
-	//     debug_log( 'Token1 address:', token1Address, tokenB );
-	//     debug_log( 'Tick spacing:', tickSpacing.toString() );
-	//     debug_log( 'Pool fee:', poolFee.toString() );
-
-	//     debug_log( 'Tick bitmap:', tickBitmap );
-	//     debug_log( 'Ticks:', ticks );
-
-	//     const { sqrtPriceX96, tick } = slot0;
-
-	//     debug_log( 'sqrtPriceX96:', sqrtPriceX96.toString() );
-	//     debug_log( 'tick:', tick );
-
-	//     const token0 = new UniswapToken( this.getChainId(), token0Address, tokenIn.decimals, tokenIn.symbol, tokenIn.name );
-	//     const token1 = new UniswapToken( this.getChainId(), token1Address, tokenOut.decimals, tokenOut.symbol, tokenOut.name );
-
-	//     debug_log( 'Token0:', token0 );
-	//     debug_log( 'Token1:', token1 );
-
-	//     // Ensure tick is within valid range
-	//     const minTick = BigInt( TickMath.MIN_TICK );
-	//     const maxTick = BigInt( TickMath.MAX_TICK );
-	//     const tickBigInt = BigInt( tick.toString() );
-	//     const validTickBigInt = tickBigInt < minTick ? minTick : ( tickBigInt > maxTick ? maxTick : tickBigInt );
-
-	//     let validTick: number;
-	//     try {
-	//       validTick = safeConvertBigIntToNumber( validTickBigInt );
-	//     } catch ( error ) {
-	//       log.error( 'Error converting tick to number:', false, error );
-	//       // Fallback to a default tick value or handle the error as appropriate for your use case
-	//       validTick = 0; // or some other default value
-	//     }
-
-	//     debug_log( 'Valid tick:', validTick );
-
-	//     // Calculate reserves
-	//     const Q96 = 2n ** 96n;
-
-	//     // Calculate price from sqrtPriceX96
-	//     const price = ( Number( sqrtPriceX96 ) / Number( Q96 ) ) ** 2;
-	//     debug_log( 'Price:', price );
-
-	//     // Ensure sqrtPriceX96 is within valid range
-	//     const minSqrtRatio = JSBI.BigInt( TickMath.MIN_SQRT_RATIO.toString() );
-	//     const maxSqrtRatio = JSBI.BigInt( TickMath.MAX_SQRT_RATIO.toString() );
-	//     const sqrtPriceX96BigInt = JSBI.BigInt( sqrtPriceX96.toString() );
-	//     const clampedSqrtPriceX96 = JSBI.lessThan( sqrtPriceX96BigInt, minSqrtRatio )
-	//       ? minSqrtRatio
-	//       : ( JSBI.greaterThan( sqrtPriceX96BigInt, maxSqrtRatio ) ? maxSqrtRatio : sqrtPriceX96BigInt );
-
-	//     debug_log( 'Clamped sqrtPriceX96:', clampedSqrtPriceX96.toString() );
-
-	//     const pool = new Pool(
-	//       token0,
-	//       token1,
-	//       fee,
-	//       clampedSqrtPriceX96.toString(),
-	//       liquidity.toString(),
-	//       validTick
-	//     );
-
-	//     debug_log( 'Pool created successfully', pool );
-
-	//     // Calculate amounts from liquidity
-	//     const tickLow = Math.floor( validTick / Number( tickSpacing ) ) * Number( tickSpacing );
-	//     const tickHigh = tickLow + Number( tickSpacing );
-	//     const sqrtPriceLow = TickMath.getSqrtRatioAtTick( tickLow );
-	//     const sqrtPriceHigh = TickMath.getSqrtRatioAtTick( tickHigh );
-
-	//     debug_log( 'Tick low:', tickLow );
-	//     debug_log( 'Tick high:', tickHigh );
-	//     debug_log( 'Sqrt price low:', sqrtPriceLow.toString() );
-	//     debug_log( 'Sqrt price high:', sqrtPriceHigh.toString() );
-
-	//     const price2 = sqrtPriceX96ToPrice( BigInt( sqrtPriceLow.toString() ), token0.decimals, token1.decimals );
-	//     debug_log( 'Price at low tick:', price2 );
-	//     const price3 = sqrtPriceX96ToPrice( BigInt( sqrtPriceHigh.toString() ), token0.decimals, token1.decimals );
-	//     debug_log( 'Price at high tick:', price3 );
-
-	//     const avgPrice = ( price2 + price3 ) / 2;
-	//     debug_log( 'Average price:', avgPrice );
-
-	//     const sqrtPrice = sqrtPriceX96 / Q96;
-	//     debug_log( 'Sqrt price:', sqrtPrice );
-
-	//     const liquidityBigInt = BigInt( liquidity.toString() );
-
-	//     const token0Amt = Number( liquidityBigInt ) / ( Number( sqrtPrice ) * ( 2 ** 96 ) );
-	//     const token1Amt = Number( liquidityBigInt ) * Number( sqrtPrice ) / ( 2 ** 96 );
-
-	//     debug_log( 'Token0 amount:', token0Amt );
-	//     debug_log( 'Token1 amount:', token1Amt );
-
-	//     // Calculate reserves
-	//     const token0Reserve = parseFloat(
-	//       ethersv6.formatUnits( liquidity.toString(), token0.decimals )
-	//     );
-	//     const token1Reserve = parseFloat(
-	//       ethersv6.formatUnits( liquidity.toString(), token1.decimals )
-	//     );
-
-	//     debug_log( 'Token0 reserve:', token0Reserve );
-	//     debug_log( 'Token1 reserve:', token1Reserve );
-
-	//     // Calculate amounts of token0 and token1 in the pool
-	//     const sqrtRatioX96 = JSBI.BigInt( clampedSqrtPriceX96.toString() );
-
-	//     const liquidity_ = JSBI.BigInt( liquidity.toString());
-
-	//     debug_log( 'sqrtRatioX96:', sqrtRatioX96.toString() );
-	//     debug_log( 'liquidity_:', liquidity_.toString() );
-
-	//     const token0Amount = SqrtPriceMath.getAmount0Delta(
-	//       sqrtRatioX96,
-	//       TickMath.MAX_SQRT_RATIO,
-	//       liquidity_,
-	//       true
-	//     );
-
-	//     const token1Amount = SqrtPriceMath.getAmount1Delta(
-	//       TickMath.MIN_SQRT_RATIO,
-	//       sqrtRatioX96,
-	//       liquidity_,
-	//       true
-	//     );
-
-	//     debug_log( 'token0Amount:', token0Amount.toString() );
-	//     debug_log( 'token1Amount:', token1Amount.toString() );
-
-	//     // Get CurrencyAmount for 1 unit of each token
-	//     const amount0 = CurrencyAmount.fromRawAmount(
-	//       token0,
-	//       JSBI.exponentiate( JSBI.BigInt( 10 ), JSBI.BigInt( token0.decimals ) ).toString()
-	//     );
-	//     const amount1 = CurrencyAmount.fromRawAmount(
-	//       token1,
-	//       JSBI.exponentiate( JSBI.BigInt( 10 ), JSBI.BigInt( token1.decimals ) ).toString()
-	//     );
-
-	//     debug_log( 'amount0:', amount0.toExact() );
-	//     debug_log( 'amount1:', amount1.toExact() );
-
-	//     // Calculate prices
-	//     let token0Price, token1Price;
-	//     try {
-	//       // Get the sqrt price from the pool
-	//       const sqrtPriceX96 = JSBI.BigInt( pool.sqrtRatioX96.toString() );
-
-	//       // Calculate price0 (token1 per token0)
-	//       const price0 = JSBI.divide(
-	//         JSBI.multiply( sqrtPriceX96, sqrtPriceX96 ),
-	//         JSBI.exponentiate( JSBI.BigInt( 2 ), JSBI.BigInt( 192 ) )
-	//       );
-
-	//       // Calculate price1 (token0 per token1)
-	//       const price1 = JSBI.divide(
-	//         JSBI.exponentiate( JSBI.BigInt( 2 ), JSBI.BigInt( 192 ) ),
-	//         JSBI.multiply( sqrtPriceX96, sqrtPriceX96 )
-	//       );
-
-	//       // Convert to decimal representation
-	//       const price0Decimal = Number( price0.toString() ) / Math.pow( 10, token1.decimals - token0.decimals );
-	//       const price1Decimal = Number( price1.toString() ) / Math.pow( 10, token0.decimals - token1.decimals );
-
-	//       debug_log( 'token0:', token0 );
-	//       debug_log( 'token1:', token1 );
-
-	//       debug_log( 'price0Decimal:', price0Decimal );
-	//       debug_log( 'price1Decimal:', price1Decimal );
-
-	//       token0Price = price0Decimal.toFixed( 6 );
-	//       token1Price = price1Decimal.toFixed( 6 );
-
-	//       debug_log( 'token0Price:', token0Price );
-	//       debug_log( 'token1Price:', token1Price );
-
-	//     } catch ( error ) {
-	//       log.error( 'Error calculating prices:', false, error );
-	//       token0Price = '0';
-	//       token1Price = '0';
-	//     }
-
-	//     const token0Reserves = ethersv6.formatUnits( token0Amount.toString(), tokenIn.decimals );
-	//     const token1Reserves = ethersv6.formatUnits( token1Amount.toString(), tokenOut.decimals );
-
-	//     debug_log( 'token0Reserves:', token0Reserves );
-	//     debug_log( 'token1Reserves:', token1Reserves );
-
-	//     // Calculate TVL using the price as a string and parseFloat
-	//     const tvl = ( parseFloat( token0Reserves ) * parseFloat( token0Price ) ) +
-	//       ( parseFloat( token1Reserves ) * parseFloat( token1Price ) );
-
-	//     debug_log( 'TVL:', tvl );
-
-	//     debug_log( '\n\nUniswapPriceProvider - getPoolInfo: >>>>>>>>>>>>>>>>>>>>>>>>>>>> POOL END <<<<<<<<<<<<<<<<<<<<<<<<\n\n' );
-
-	//     return {
-	//       provider: this.getName(),
-	//       lastUpdated: new Date(),
-	//       chainId: this.getChainId(),
-	//       fee,
-	//       liquidity: liquidity.toString(),
-	//       sqrtPriceX96: clampedSqrtPriceX96.toString(),
-	//       tick: validTick,
-	//       tokenInReserve: token0Reserves,
-	//       tokenOutReserve: token1Reserves,
-	//       tokenInUSDPrice: token0Price,
-	//       tokenOutUSDPrice: token1Price,
-	//       tvl
-	//     };
-	//   } catch ( error ) {
-	//     log.error( 'Error in getPoolInfo:', false, error );
-	//     throw error;
-	//   }
-	// }
-
-	// async getTokenPair( pair: string ): Promise<TokenPair | PriceData> {
-	//   if ( !pair ) {
-	//     return this.returnError( `Invalid pair - ${ pair }` );
-	//   }
-
-	//   const [ tokenInSymbol, tokenOutSymbol ] = pair.split( '-' );
-	//   if ( !tokenInSymbol || !tokenOutSymbol ) {
-	//     return this.returnError( `Invalid pair format - ${ pair }` );
-	//   }
-
-	//   const tokenIn = this.getStandardizedToken( tokenInSymbol );
-	//   const tokenOut = this.getStandardizedToken( tokenOutSymbol );
-
-	//   if ( !tokenIn || !tokenOut ) {
-	//     return this.returnError( `Token not found for ${ pair }` );
-	//   }
-
-	//   if ( tokenIn.address === tokenOut.address ) {
-	//     return this.getMarketPrice( `${ tokenInSymbol }-USD` );
-	//   }
-
-	//   return { tokenIn, tokenOut };
-	// }
-
 	private returnError(message: string): PriceData {
 		return {
 			provider: this.getName(),
@@ -1227,20 +643,17 @@ export class UniswapSwapManager extends SwapManager {
 	}
 
 	errorUniswap(error: any, excludeProps: string[] = []): string {
-		// Recursive function to clean up the object
 		const cleanObject = (obj: any, exclude: string[]): any => {
 			if (!obj || typeof obj !== 'object') {
 				return obj;
 			}
 
-			// Create a shallow copy to avoid mutating the original object
 			const cleaned = Array.isArray(obj) ? [...obj] : { ...obj };
 
 			for (const key in cleaned) {
 				if (exclude.includes(key)) {
 					delete cleaned[key];
 				} else if (typeof cleaned[key] === 'string') {
-					// Attempt to parse stringified JSON for better readability
 					try {
 						const parsed = JSON.parse(cleaned[key]);
 						cleaned[key] = parsed; // Replace with parsed JSON if valid
@@ -1248,7 +661,6 @@ export class UniswapSwapManager extends SwapManager {
 						// Keep the string as-is if it's not valid JSON
 					}
 				} else if (typeof cleaned[key] === 'object') {
-					// Recursively clean nested objects
 					cleaned[key] = cleanObject(cleaned[key], exclude);
 				}
 			}
@@ -1256,10 +668,8 @@ export class UniswapSwapManager extends SwapManager {
 			return cleaned;
 		};
 
-		// Extract and clean up the error object
 		const cleanedError = cleanObject(error, excludeProps);
 
-		// Format the cleaned object into a readable JSON string
 		return JSON.stringify(cleanedError, null, 2);
 	}
 
@@ -1271,7 +681,7 @@ export class UniswapSwapManager extends SwapManager {
 	private async getTokenUSDPrice(token: Token): Promise<number> {
 		try {
 			const price = await this.getMarketPrice(token.symbol + '-USD');
-			return price.price;
+			return BigNumberishUtils.toNumber(price.price);
 		} catch (error) {
 			log.error('Error getting token price. Defaulting to 0:', false, error);
 			return 0;
@@ -1366,7 +776,6 @@ export class UniswapSwapManager extends SwapManager {
 		};
 	}
 
-	// No fee needed for multi-hop swaps since it is enoded in the route
 	async populateMultiHopSwapTransaction(
 		tokenIn: Token,
 		tokenOut: Token,
@@ -1398,7 +807,6 @@ export class UniswapSwapManager extends SwapManager {
 	async checkAllowance(token: Token, fundingAddress: string): Promise<bigint> {
 		try {
 			if (!token || token.isNative || !fundingAddress || !this.providerNative) {
-				// debug_log( 'Token, provider, or swap manager not initialized', { token, fundingAddress } );
 				return 0n;
 			}
 
@@ -1421,7 +829,6 @@ export class UniswapSwapManager extends SwapManager {
 	}
 
 	async approveToken(token: Token, amount: string): Promise<TransactionReceipt> {
-		// Validate inputs
 		if (!this.blockchain) {
 			throw new Error('Blockchain not initialized');
 		}
@@ -1435,7 +842,6 @@ export class UniswapSwapManager extends SwapManager {
 		if (!routerAddress || routerAddress === ethers.ZeroAddress) {
 			throw new Error('Invalid router address');
 		}
-		// Create token contract
 		const tokenContract = new ethers.Contract(
 			token.address,
 			['function approve(address,uint256) public returns (bool)'],
@@ -1446,18 +852,15 @@ export class UniswapSwapManager extends SwapManager {
 		}
 
 		try {
-			// Parse the amount with correct decimals
 			const parsedAmount = ethers.parseUnits(amount, token.decimals);
 			if (!parsedAmount) {
 				throw new Error('Failed to parse amount');
 			}
 
-			// Set gas parameters defaults - these can be adjusted based on network conditions and token approval requirements
 			const gasLimit = 100000; // Set an appropriate gas limit value
 			const maxPriorityFeePerGas = ethers.parseUnits('1.5', 'gwei'); // Adjust based on network conditions
 			const maxFeePerGas = ethers.parseUnits('20', 'gwei'); // Adjust based on network conditions
 
-			// Call approve with gas overrides
 			const tx = await tokenContract.approve(routerAddress, parsedAmount, {
 				chainId: this.getChainId() || 1,
 				type: 2,
@@ -1466,21 +869,16 @@ export class UniswapSwapManager extends SwapManager {
 				maxFeePerGas
 			});
 
-			// Wait for transaction confirmation to get the receipt
 			const receipt = await tx.wait(); // TODO: Move the class to background processing and setup a listener for the transaction receipt with no 'wait'
 			if (receipt.status !== 1) {
 				throw new Error('Token approval transaction failed');
 			}
 
-			// Check if the approval was successful (true or false)
 			if (receipt.logs.length > 0) {
 				const eventFragment = tokenContract.interface.getEvent('Approval');
 				const log = receipt.logs.find(
 					(log: { topics: string[] }) => log.topics[0] === eventFragment?.topicHash
 				);
-				// if ( log ) {
-				//   debug_log( 'Approval event detected: ***************************', log );
-				// }
 			}
 
 			return EthersConverter.ethersTransactionReceiptToTransactionReceipt(receipt);
@@ -1512,7 +910,6 @@ export class UniswapSwapManager extends SwapManager {
 			const minOut = (toBigInt(quote.amountOut) * BigInt(1000 - Math.floor(slippage * 10))) / 1000n;
 			let tx;
 			if (quote.multiHop) {
-				// No fee required for multi-hop swaps (encoded in path)
 				tx = await this.populateMultiHopSwapTransaction(
 					tokenIn,
 					tokenOut,
@@ -1556,13 +953,11 @@ export class UniswapSwapManager extends SwapManager {
 				throw new Error('Failed to execute swap - 1');
 			}
 
-			// Wait for the swap transaction receipt
 			const swapReceipt = await tx.wait();
 			if (!swapReceipt) {
 				throw new Error('Failed to get transaction receipt - 2');
 			}
 
-			// Distribute the fee via transaction/transfer and wait for the fee transaction receipt
 			const feeReceipt = await this.distributeFee(
 				params.tokenOut,
 				params.feeAmount,
@@ -1572,7 +967,6 @@ export class UniswapSwapManager extends SwapManager {
 				params.maxFeePerGas
 			);
 
-			// Return both receipts as an array, as expected by the function return type
 			return [swapReceipt, feeReceipt];
 		} catch (error) {
 			log.error('Error executing FULL swap:', false, error);
@@ -1604,14 +998,12 @@ export class UniswapSwapManager extends SwapManager {
 		let priorityFee = toBigInt(maxPriorityFeePerGas);
 		const maxFee = toBigInt(maxFeePerGas);
 
-		// Ensure maxPriorityFeePerGas does not exceed maxFeePerGas
 		if (priorityFee > maxFee) {
 			priorityFee = maxFee; // Adjust to make sure it's valid
 		}
 
 		if (tokenOut.isNative) {
 			try {
-				// Create a transaction to send the fee directly as a transfer
 				const signer = this.provider.getSigner();
 				if (!signer) {
 					throw new Error('Signer not available');
@@ -1657,19 +1049,14 @@ export class UniswapSwapManager extends SwapManager {
 				this.signerNative // Use the signer for transactions, transfers, etc.
 			);
 
-			// Use the `transfer` function of the ERC-20 token to send the tokens to the recipient
-			// NOTE: Using ethers and it supports transaction overrides like { gasLimit, maxPriorityFeePerGas, maxFeePerGas }
 			const tx = await tokenContract.transfer(feeRecipient, feeAmount, {
 				gasLimit: toBigInt(gasLimit),
 				maxPriorityFeePerGas: toBigInt(maxPriorityFeePerGas),
 				maxFeePerGas: toBigInt(maxFeePerGas)
 			});
 
-			// Wait for the transaction to be mined
 			const receipt = await tx.wait();
-			// May want to do something with the receipt here...
 
-			// Use the gas spends that come back and calculate actual gas cost for transaction
 			try {
 				const gasUsed = toBigInt(receipt.gasUsed) || 0n;
 				const cummulativeGasUsed = toBigInt(receipt.cumulativeGasUsed.toString()) || 0n;
@@ -1700,12 +1087,6 @@ export class UniswapSwapManager extends SwapManager {
 				this.signerNative
 			);
 
-			// Make sure that the signer is connected properly for the recipient
-			// const tx = await wethContract.connect( this.signerNative ).deposit( {
-			//   value: amount,
-			//   from: recipient
-			// } );
-
 			let tx;
 			if (recipient !== (await this.signerNative.getAddress())) {
 				tx = await wethContract.deposit({
@@ -1748,9 +1129,7 @@ export class UniswapSwapManager extends SwapManager {
 				throw new Error('Failed to withdraw WETH');
 			}
 
-			// Send the resulting ETH to the recipient
 			if (recipient !== (await this.signerNative.getAddress())) {
-				// This means unwrap WETH to ETH and send to someone else (not the signer)
 				const txTransfer = await this.signerNative.sendTransaction({
 					to: recipient,
 					value: toBigInt(amount)
@@ -1772,11 +1151,4 @@ export class UniswapSwapManager extends SwapManager {
 			throw error;
 		}
 	}
-
-	// private getStandardizedToken( symbol: string ): SwapToken | null {
-	//   let standardizedSymbol = symbol;
-	//   if ( symbol === 'USD' ) standardizedSymbol = 'USDC';
-	//   if ( symbol === 'ETH' ) standardizedSymbol = 'WETH';
-	//   return getToken( standardizedSymbol, this.getChainId() );
-	// }
 }
diff --git a/packages/yakkl-wallet/src/lib/managers/providers/fees/ethereum/EthereumGasProvider.ts b/packages/yakkl-wallet/src/lib/managers/providers/fees/ethereum/EthereumGasProvider.ts
index 9be22d6..f0b1c92 100644
--- a/packages/yakkl-wallet/src/lib/managers/providers/fees/ethereum/EthereumGasProvider.ts
+++ b/packages/yakkl-wallet/src/lib/managers/providers/fees/ethereum/EthereumGasProvider.ts
@@ -25,6 +25,7 @@ import type { Provider } from '../../../Provider';
 import { ethers as ethersv6 } from 'ethers-v6';
 import { Web3Provider } from '../../../AnalyticsBase';
 import { EthereumAnalytics } from '../../../blockchains/evm/ethereum/EthereumAnalytics';
+import { BigNumberishUtils } from '$lib/common/BigNumberishUtils';
 
 const DEFAULT_GAS_ESTIMATES = {
 	ERC20_APPROVE: 46000n,
@@ -693,7 +694,7 @@ export class EthereumGasProvider implements GasProvider {
 			log.debug('getEthPrice - priceProvider', false, this.priceProvider);
 
 			const marketPrice = this.priceProvider.getMarketPrice('ETH-USD');
-			return (await marketPrice).price;
+			return BigNumberishUtils.toNumber((await marketPrice).price);
 		} catch (error) {
 			log.error('Error fetching ETH price:', false, false, error);
 			return 0;
diff --git a/packages/yakkl-wallet/src/lib/managers/providers/network/ethereum_provider/eip-1193.ts b/packages/yakkl-wallet/src/lib/managers/providers/network/ethereum_provider/eip-1193.ts
index 31f34c0..76b7a83 100644
--- a/packages/yakkl-wallet/src/lib/managers/providers/network/ethereum_provider/eip-1193.ts
+++ b/packages/yakkl-wallet/src/lib/managers/providers/network/ethereum_provider/eip-1193.ts
@@ -4,7 +4,8 @@ import type { Duplex } from 'readable-stream';
 import { getWindowOrigin, safePostMessage, getTargetOrigin } from '$lib/common/origin';
 import { log } from '$lib/managers/Logger';
 import { EIP1193_ERRORS } from './eip-types';
-import { getCurrentlySelectedAccounts } from '$lib/extensions/chrome/eip-6963';
+import { getCurrentlySelectedAccounts } from '$lib/common/shortcuts';
+import { handleRequestAccounts } from '$contexts/background/extensions/chrome/eip-6963';
 
 export class EIP1193Provider extends EventEmitter {
 	private _isConnected: boolean = false;
@@ -105,11 +106,6 @@ export class EIP1193Provider extends EventEmitter {
 				// For eth_requestAccounts, use the EIP-6963 implementation
 				if (method === 'eth_requestAccounts') {
 					try {
-						// Import the handleRequestAccounts function from eip-6963.ts
-						const { handleRequestAccounts } = await import(
-							'../../../../ext/v1/chrome/eip-6963'
-						);
-
 						// Use the EIP-6963 implementation to handle the request
 						finalResult = await handleRequestAccounts(null, id.toString());
 
@@ -127,7 +123,7 @@ export class EIP1193Provider extends EventEmitter {
 					}
 				} else {
 					// For eth_accounts, use cached accounts if available
-					finalResult = this.cachedAccounts = await getCurrentlySelectedAccounts(id.toString());
+					finalResult = this.cachedAccounts = await getCurrentlySelectedAccounts();
 				}
 			} else if (method === 'net_version') {
 				this.networkVersion = finalResult;
diff --git a/packages/yakkl-wallet/src/lib/models/dataModels.ts b/packages/yakkl-wallet/src/lib/models/dataModels.ts
index 888dc50..1c4097a 100644
--- a/packages/yakkl-wallet/src/lib/models/dataModels.ts
+++ b/packages/yakkl-wallet/src/lib/models/dataModels.ts
@@ -7,7 +7,7 @@
 
 // NOTE: 'id' should be unique value for the given group of data. Crypto uuidv4 can be used so that if we move to a central DB then it will be unique.
 
-export const prerender = false;
+// export const prerender = false;
 
 import { dateString } from '$lib/common/datetime';
 import type {
@@ -152,7 +152,7 @@ export let yakklSettings: Settings = {
 	version: VERSION, // Uses semversion format but puts 'default' as a placeholder
 	previousVersion: '',
 	plan: {
-		type: PlanType.BASIC_MEMBER,
+		type: PlanType.EXPLORER_MEMBER,
 		source: AccessSourceType.STANDARD,
 		promo: null,
 		trialEndDate: null,
@@ -246,7 +246,7 @@ export let yakklRegisteredData: YakklRegisteredData = {
 	persona: DEFAULT_PERSONA,
 	key: '',
 	plan: {
-		type: PlanType.BASIC_MEMBER,
+		type: PlanType.EXPLORER_MEMBER,
 		source: AccessSourceType.STANDARD,
 		promo: PromoClassificationType.NONE,
 		trialEndDate: '',
diff --git a/packages/yakkl-wallet/src/lib/permissions/index.ts b/packages/yakkl-wallet/src/lib/permissions/index.ts
index 6168725..4ff49c5 100644
--- a/packages/yakkl-wallet/src/lib/permissions/index.ts
+++ b/packages/yakkl-wallet/src/lib/permissions/index.ts
@@ -9,7 +9,7 @@ export * from './handlers';
 import { resolvePermissionRequest, rejectPermissionRequest } from './handlers';
 // Main initialization function
 import { log } from '$lib/managers/Logger';
-import browser from 'webextension-polyfill';
+import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
 
 /**
  * Initialize the permissions system
diff --git a/packages/yakkl-wallet/src/lib/permissions/security.ts b/packages/yakkl-wallet/src/lib/permissions/security.ts
index 88188ce..a799d18 100644
--- a/packages/yakkl-wallet/src/lib/permissions/security.ts
+++ b/packages/yakkl-wallet/src/lib/permissions/security.ts
@@ -1,6 +1,6 @@
 // src/lib/permissions/security.ts
 
-import browser from 'webextension-polyfill';
+import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
 import { SecurityLevel } from './types';
 import { log } from '$lib/managers/Logger';
 
diff --git a/packages/yakkl-wallet/src/lib/permissions/storage.ts b/packages/yakkl-wallet/src/lib/permissions/storage.ts
index 7d48cd5..6ca2a6b 100644
--- a/packages/yakkl-wallet/src/lib/permissions/storage.ts
+++ b/packages/yakkl-wallet/src/lib/permissions/storage.ts
@@ -1,6 +1,6 @@
 // src/lib/permissions/storage.ts
 
-import browser from 'webextension-polyfill';
+import { getBrowserExt } from '$lib/browser-polyfill-wrapper';
 import type { PermissionData, EncryptedPermissionStore, SecurityLevel } from './types';
 import { encryptWithDomainKey, decryptWithDomainKey, generateSessionId } from '../utilities/crypto';
 import { log } from '$lib/managers/Logger';
diff --git a/packages/yakkl-wallet/src/lib/plugins/hardware/README.md b/packages/yakkl-wallet/src/lib/plugins/hardware/README.md
index 08a01e2..739f97b 100644
--- a/packages/yakkl-wallet/src/lib/plugins/hardware/README.md
+++ b/packages/yakkl-wallet/src/lib/plugins/hardware/README.md
@@ -36,7 +36,7 @@ The hardware wallet system follows the YAKKL plugin architecture pattern:
 import { pluginRegistry } from '$lib/plugins/registry/PluginRegistry';
 
 // Initialize the plugin registry
-await pluginRegistry.initialize(PlanType.BASIC_MEMBER);
+await pluginRegistry.initialize(PlanType.EXPLORER_MEMBER);
 
 // Check if hardware wallets are supported
 const isSupported = await pluginRegistry.hardwareWallet.isSupported();
diff --git a/packages/yakkl-wallet/src/lib/plugins/interfaces/IAccountManager.ts b/packages/yakkl-wallet/src/lib/plugins/interfaces/IAccountManager.ts
index dcb100d..dfb7e19 100644
--- a/packages/yakkl-wallet/src/lib/plugins/interfaces/IAccountManager.ts
+++ b/packages/yakkl-wallet/src/lib/plugins/interfaces/IAccountManager.ts
@@ -1,4 +1,5 @@
 import type { PlanType } from '$lib/common';
+import type { BigNumberish } from '$lib/common/bignumber';
 
 /**
  * Account data interfaces
@@ -19,10 +20,10 @@ export interface Account {
 export interface AccountToken {
 	symbol: string;
 	address: string;
-	balance: string;
-	decimals: number;
-	price: number;
-	value: number;
+	balance: string;                // Keep as string for consistency
+	decimals: number;               // Stay number (decimal places count)
+	price: BigNumberish;            // Changed from number - CRITICAL
+	value: BigNumberish;            // Changed from number - CRITICAL
 	logo?: string;
 }
 
diff --git a/packages/yakkl-wallet/src/lib/plugins/registry/PluginRegistry.ts b/packages/yakkl-wallet/src/lib/plugins/registry/PluginRegistry.ts
index 8eea458..213460e 100644
--- a/packages/yakkl-wallet/src/lib/plugins/registry/PluginRegistry.ts
+++ b/packages/yakkl-wallet/src/lib/plugins/registry/PluginRegistry.ts
@@ -54,7 +54,7 @@ export interface PluginFeatures {
 export class PluginRegistry {
 	private static instance: PluginRegistry;
 	private managers: PluginManagerConfig | null = null;
-	private currentPlan: PlanType = PlanType.BASIC_MEMBER;
+	private currentPlan: PlanType = PlanType.EXPLORER_MEMBER;
 	private initialized = false;
 
 	private constructor() {}
@@ -109,19 +109,19 @@ export class PluginRegistry {
 			// Fallback to standard managers on error
 			this.managers = await this.loadStandardManagers();
 			await Promise.all([
-				this.managers.trading.initialize(PlanType.BASIC_MEMBER),
-				this.managers.accounts.initialize(PlanType.BASIC_MEMBER),
-				this.managers.news.initialize(PlanType.BASIC_MEMBER),
+				this.managers.trading.initialize(PlanType.EXPLORER_MEMBER),
+				this.managers.accounts.initialize(PlanType.EXPLORER_MEMBER),
+				this.managers.news.initialize(PlanType.EXPLORER_MEMBER),
 				this.managers.hardwareWallet.initialize()
 			]);
 
 			this.initialized = true;
-			this.currentPlan = PlanType.BASIC_MEMBER;
+			this.currentPlan = PlanType.EXPLORER_MEMBER;
 
 			return {
 				success: false,
-				planType: PlanType.BASIC_MEMBER,
-				features: this.getAvailableFeatures(PlanType.BASIC_MEMBER),
+				planType: PlanType.EXPLORER_MEMBER,
+				features: this.getAvailableFeatures(PlanType.EXPLORER_MEMBER),
 				errors: [error instanceof Error ? error.message : 'Unknown error occurred']
 			};
 		}
@@ -297,7 +297,7 @@ export class PluginRegistry {
 		}
 
 		this.initialized = false;
-		this.currentPlan = PlanType.BASIC_MEMBER;
+		this.currentPlan = PlanType.EXPLORER_MEMBER;
 	}
 }
 
diff --git a/packages/yakkl-wallet/src/lib/plugins/standard/StandardAccountManager.ts b/packages/yakkl-wallet/src/lib/plugins/standard/StandardAccountManager.ts
index 30be8fc..b91ddb8 100644
--- a/packages/yakkl-wallet/src/lib/plugins/standard/StandardAccountManager.ts
+++ b/packages/yakkl-wallet/src/lib/plugins/standard/StandardAccountManager.ts
@@ -17,7 +17,7 @@ import { UpgradeRequiredError } from '../errors/UpgradeRequiredError';
  * Pro features throw UpgradeRequiredError
  */
 export class StandardAccountManager implements IAccountManager {
-	private planType: PlanType = PlanType.BASIC_MEMBER;
+	private planType: PlanType = PlanType.EXPLORER_MEMBER;
 	private initialized = false;
 	private accounts: Account[] = [];
 
diff --git a/packages/yakkl-wallet/src/lib/plugins/standard/StandardNewsManager.ts b/packages/yakkl-wallet/src/lib/plugins/standard/StandardNewsManager.ts
index 6c26e0f..a50ed42 100644
--- a/packages/yakkl-wallet/src/lib/plugins/standard/StandardNewsManager.ts
+++ b/packages/yakkl-wallet/src/lib/plugins/standard/StandardNewsManager.ts
@@ -20,7 +20,7 @@ import { UpgradeRequiredError } from '../errors/UpgradeRequiredError';
  * Pro features throw UpgradeRequiredError
  */
 export class StandardNewsManager implements INewsManager {
-	private planType: PlanType = PlanType.BASIC_MEMBER;
+	private planType: PlanType = PlanType.EXPLORER_MEMBER;
 	private initialized = false;
 	private bookmarks: BookmarkedArticle[] = [];
 	private readHistory: NewsItem[] = [];
diff --git a/packages/yakkl-wallet/src/lib/plugins/standard/StandardTradingManager.ts b/packages/yakkl-wallet/src/lib/plugins/standard/StandardTradingManager.ts
index 7bff2e9..49b9b42 100644
--- a/packages/yakkl-wallet/src/lib/plugins/standard/StandardTradingManager.ts
+++ b/packages/yakkl-wallet/src/lib/plugins/standard/StandardTradingManager.ts
@@ -15,7 +15,7 @@ import { UpgradeRequiredError } from '../errors/UpgradeRequiredError';
  * Pro features throw UpgradeRequiredError
  */
 export class StandardTradingManager implements ITradingManager {
-	private planType: PlanType = PlanType.BASIC_MEMBER;
+	private planType: PlanType = PlanType.EXPLORER_MEMBER;
 	private initialized = false;
 
 	async initialize(planType: PlanType): Promise<void> {
diff --git a/packages/yakkl-wallet/src/lib/polyfill-mock.js b/packages/yakkl-wallet/src/lib/polyfill-mock.js
index 2017860..f389b6e 100644
--- a/packages/yakkl-wallet/src/lib/polyfill-mock.js
+++ b/packages/yakkl-wallet/src/lib/polyfill-mock.js
@@ -1,55 +1,93 @@
-// Mock webextension-polyfill for SSR
+// Mock webextension-polyfill for SSR and client-side fallback
 // This prevents the actual polyfill from loading during server-side rendering
+// and provides a fallback when the polyfill isn't available as an ES module
 
-const mockBrowser = {
-	runtime: {
-		connect: () => ({
-			onDisconnect: { addListener: () => {} },
-			postMessage: () => {},
-			disconnect: () => {}
-		}),
-		sendMessage: () => Promise.resolve({}),
-		onMessage: {
-			addListener: () => {},
-			removeListener: () => {},
-			hasListener: () => false
-		},
-		getURL: (path) => 'chrome-extension://mock/' + path,
-		id: 'mock-extension-id'
-	},
-	storage: {
-		local: {
-			get: () => Promise.resolve({}),
-			set: () => Promise.resolve(),
-			remove: () => Promise.resolve(),
-			clear: () => Promise.resolve()
-		},
-		sync: {
-			get: () => Promise.resolve({}),
-			set: () => Promise.resolve(),
-			remove: () => Promise.resolve(),
-			clear: () => Promise.resolve()
+// Check if we're in a browser context and the global browser object exists
+const getBrowserAPI = () => {
+	// Server-side: return mock
+	if (typeof window === 'undefined') {
+		return createMockBrowser();
+	}
+	
+	// Client-side: try to use the real browser API if available
+	if (typeof window !== 'undefined') {
+		// Check if browser polyfill was loaded via script tag
+		if (window.browser && window.browser.runtime) {
+			console.log('[polyfill-mock] Using window.browser API');
+			return window.browser;
+		}
+		// Check for chrome API - use it directly since it's already compatible
+		if (window.chrome && window.chrome.runtime && window.chrome.runtime.id) {
+			console.log('[polyfill-mock] Using window.chrome API');
+			// Chrome API is available - wrap it to match browser API interface
+			return window.chrome;
 		}
-	},
-	tabs: {
-		query: () => Promise.resolve([]),
-		create: () => Promise.resolve({}),
-		update: () => Promise.resolve({})
-	},
-	windows: {
-		create: () => Promise.resolve({}),
-		update: () => Promise.resolve({})
 	}
+	
+	console.warn('[polyfill-mock] No browser API found, using mock');
+	// Fallback to mock
+	return createMockBrowser();
 };
 
-// Export as both default and named exports for compatibility
-module.exports = mockBrowser;
-module.exports.default = mockBrowser;
+function createMockBrowser() {
+	return {
+		runtime: {
+			connect: () => ({
+				onDisconnect: { addListener: () => {} },
+				postMessage: () => {},
+				disconnect: () => {}
+			}),
+			sendMessage: () => Promise.resolve({}),
+			onMessage: {
+				addListener: () => {},
+				removeListener: () => {},
+				hasListener: () => false
+			},
+			getURL: (path) => 'chrome-extension://mock/' + path,
+			id: 'mock-extension-id'
+		},
+		storage: {
+			local: {
+				get: () => Promise.resolve({}),
+				set: () => Promise.resolve(),
+				remove: () => Promise.resolve(),
+				clear: () => Promise.resolve()
+			},
+			sync: {
+				get: () => Promise.resolve({}),
+				set: () => Promise.resolve(),
+				remove: () => Promise.resolve(),
+				clear: () => Promise.resolve()
+			}
+		},
+		tabs: {
+			query: () => Promise.resolve([]),
+			create: () => Promise.resolve({}),
+			update: () => Promise.resolve({})
+		},
+		windows: {
+			create: () => Promise.resolve({}),
+			update: () => Promise.resolve({})
+		}
+	};
+}
 
-// Also define exports for ES modules
-if (typeof exports !== 'undefined') {
-	exports.runtime = mockBrowser.runtime;
-	exports.storage = mockBrowser.storage;
-	exports.tabs = mockBrowser.tabs;
-	exports.windows = mockBrowser.windows;
+const browserAPI = getBrowserAPI();
+
+// Export for both CommonJS and ES modules
+if (typeof module !== 'undefined' && module.exports) {
+	// CommonJS
+	module.exports = browserAPI;
+	module.exports.default = browserAPI;
+	module.exports.runtime = browserAPI.runtime;
+	module.exports.storage = browserAPI.storage;
+	module.exports.tabs = browserAPI.tabs;
+	module.exports.windows = browserAPI.windows;
 }
+
+// ES module exports
+export default browserAPI;
+export const runtime = browserAPI.runtime;
+export const storage = browserAPI.storage;
+export const tabs = browserAPI.tabs;
+export const windows = browserAPI.windows;
diff --git a/packages/yakkl-wallet/src/lib/services/cache-sync.service.ts b/packages/yakkl-wallet/src/lib/services/cache-sync.service.ts
index 827480f..f88ac44 100644
--- a/packages/yakkl-wallet/src/lib/services/cache-sync.service.ts
+++ b/packages/yakkl-wallet/src/lib/services/cache-sync.service.ts
@@ -11,6 +11,10 @@ import { updateTokenPrices } from '$lib/common/tokenPriceManager';
 import { getInstances } from '$lib/common';
 import { log } from '$lib/common/logger-wrapper';
 import { ethers } from 'ethers-v6';
+import { getYakklCombinedTokens, getYakklTokenCache } from '$lib/common/stores';
+import { loadDefaultTokens } from '$lib/managers/tokens/loadDefaultTokens';
+import { BigNumberishUtils } from '../common/BigNumberishUtils';
+import { DecimalMath } from '../common/DecimalMath';
 
 export class CacheSyncManager {
   private static instance: CacheSyncManager;
@@ -51,11 +55,9 @@ export class CacheSyncManager {
 
     try {
       // Ensure default tokens are loaded first
-      const { getYakklCombinedToken } = await import('$lib/common/stores');
-      const combinedTokens = await getYakklCombinedToken();
+      const combinedTokens = await getYakklCombinedTokens();
       if (!combinedTokens || combinedTokens.length === 0) {
         log.info('[CacheSync] No tokens found, loading default tokens...', false);
-        const { loadDefaultTokens } = await import('$lib/managers/tokens/loadDefaultTokens');
         await loadDefaultTokens();
       }
 
@@ -130,9 +132,9 @@ export class CacheSyncManager {
             balance: String(token.qty || token.balance || '0'), // Use qty which is the calculated balance
             balanceLastUpdated: new Date(),
             price: token.price || 0,
-            priceLastUpdated: token.price > 0 ? new Date() : new Date(0), // Only set if we have a price
+            priceLastUpdated: BigNumberishUtils.compare(token.price || 0, 0) > 0 ? new Date() : new Date(0), // Only set if we have a price
             price24hChange: token.change24h,
-            value: typeof token.value === 'number' ? token.value : parseFloat(token.value || '0'),
+            value: typeof token.value === 'number' ? token.value : BigNumberishUtils.toNumber(token.value || 0),
             icon: token.icon,
             isNative: isNativeToken,
             chainId
@@ -152,7 +154,6 @@ export class CacheSyncManager {
               const balanceFormatted = ethers.formatUnits(balance, 18);
 
               // Get current ETH price
-              const { getYakklTokenCache } = await import('$lib/common/stores');
               const tokenCacheEntries = await getYakklTokenCache();
               const ethPrice = tokenCacheEntries.find(entry =>
                 entry.tokenAddress.toLowerCase() === '0x0000000000000000000000000000000000000000' &&
@@ -168,7 +169,7 @@ export class CacheSyncManager {
                 balanceLastUpdated: new Date(),
                 price: ethPrice,
                 priceLastUpdated: new Date(),
-                value: parseFloat(balanceFormatted) * ethPrice,
+                value: DecimalMath.of(parseFloat(balanceFormatted)).mul(BigNumberishUtils.toNumber(ethPrice)).toNumber(),
                 icon: '/images/eth.svg',
                 isNative: true,
                 chainId
@@ -212,7 +213,7 @@ export class CacheSyncManager {
                   ...tokenCache[nativeTokenIndex],
                   balance: balanceFormatted,
                   balanceLastUpdated: new Date(),
-                  value: parseFloat(balanceFormatted) * (tokenCache[nativeTokenIndex].price || 0)
+                  value: DecimalMath.of(parseFloat(balanceFormatted)).mul(BigNumberishUtils.toNumber(tokenCache[nativeTokenIndex].price || 0)).toNumber()
                 };
 
                 log.info('[CacheSync] Updated existing ETH token with provider balance:', false, balanceFormatted);
@@ -252,7 +253,6 @@ export class CacheSyncManager {
       await updateTokenPrices();
 
       // Get updated prices from token cache store
-      const { getYakklTokenCache } = await import('$lib/common/stores');
       const tokenCache = await getYakklTokenCache();
 
       // Create price map
@@ -261,7 +261,7 @@ export class CacheSyncManager {
       tokenCache
         .filter(entry => entry.chainId === chainId)
         .forEach(entry => {
-          priceMap.set(entry.tokenAddress.toLowerCase(), entry.price || 0);
+          priceMap.set(entry.tokenAddress.toLowerCase(), BigNumberishUtils.toNumber(entry.price || 0));
         });
 
       // Update all account caches on this chain
diff --git a/packages/yakkl-wallet/src/lib/services/token.service.ts b/packages/yakkl-wallet/src/lib/services/token.service.ts
index a0d374f..06db922 100644
--- a/packages/yakkl-wallet/src/lib/services/token.service.ts
+++ b/packages/yakkl-wallet/src/lib/services/token.service.ts
@@ -1,11 +1,17 @@
 import { BaseService } from './base.service';
+import type { YakklAccount } from '$lib/common';
 import type { TokenDisplay, ServiceResponse } from '../types';
-import { yakklCombinedTokenStore } from '$lib/common/stores';
+import type { TokenData, TokenChange } from '$lib/common/interfaces';
 import { get } from 'svelte/store';
-import type { TokenChange } from '$lib/common/interfaces';
-import { currentChain, chainStore } from '$lib/stores';
-import { currentAccount } from '$lib/stores';
+import { accountStore, currentAccount, currentChain, chainStore } from '$lib/stores';
+import { yakklCombinedTokenStore, getYakklTokenCache } from '$lib/common/stores';
 import { WalletService } from './wallet.service';
+import { BalanceCacheManager } from '$lib/managers/BalanceCacheManager';
+import { computeTokenValue } from '$lib/common/computeTokenValue';
+import { BigNumberishUtils } from '$lib/common/BigNumberishUtils';
+import { DecimalMath } from '$lib/common/DecimalMath';
+import { loadDefaultTokens } from '$lib/managers/tokens/loadDefaultTokens';
+import { PriceManager } from '$lib/managers/PriceManager';
 
 export class TokenService extends BaseService {
   private static instance: TokenService;
@@ -27,25 +33,24 @@ export class TokenService extends BaseService {
       const chain = get(currentChain);
       const chainId = chain?.chainId || 1;
       const account = get(currentAccount);
-      
+
       // Get all chains for name lookup
       const chains = get(chainStore).chains;
       const chainMap = new Map(chains.map(c => [c.chainId, c]));
-      
+
       console.log('[TokenService] Getting tokens for chainId:', chainId);
-      
+
       // Get tokens from store
       let combinedTokens = get(yakklCombinedTokenStore);
-      
+
       console.log('[TokenService] Combined tokens from store:', combinedTokens);
-      
+
       if (!combinedTokens || combinedTokens.length === 0) {
         console.log('[TokenService] No tokens found in combined store, loading defaults...');
-        
+
         // Load default tokens if none exist
-        const { loadDefaultTokens } = await import('$lib/managers/tokens/loadDefaultTokens');
         await loadDefaultTokens();
-        
+
         // Try again after loading defaults
         combinedTokens = get(yakklCombinedTokenStore);
         if (!combinedTokens || combinedTokens.length === 0) {
@@ -68,17 +73,17 @@ export class TokenService extends BaseService {
       }
 
       // Filter tokens by current chain
-      const chainTokens = combinedTokens.filter(token => 
-        token.chainId === chainId || 
+      const chainTokens = combinedTokens.filter(token =>
+        token.chainId === chainId ||
         (!token.chainId && chainId === 1) // Default to mainnet for tokens without chainId
       );
-      
+
       console.log('[TokenService] Filtered tokens for chain:', chainTokens);
 
       // Transform to TokenDisplay format
       const preview2Tokens: TokenDisplay[] = await Promise.all(chainTokens.map(async (token) => {
         let balance = parseFloat(String(token.balance || token.quantity || '0'));
-        
+
         console.log(`[TokenService] Processing token ${token.symbol}:`, {
           isNative: token.isNative,
           tokenBalance: token.balance,
@@ -86,7 +91,7 @@ export class TokenService extends BaseService {
           accountBalance: account?.balance,
           hasAccount: !!account
         });
-        
+
         // For native token (ETH), use the account balance
         if (token.isNative && account && account.balance) {
           balance = parseFloat(account.balance);
@@ -117,23 +122,21 @@ export class TokenService extends BaseService {
             }
           }
         }
-        
+
         let price = token.price?.price || 0;
-        
+
         // If no price, try to get from cache
         if (price === 0) {
           try {
-            const { getYakklTokenCache } = await import('$lib/common/stores');
             const cache = await getYakklTokenCache();
-            const cachedEntry = cache.find(c => 
+            const cachedEntry = cache.find(c =>
               c.tokenAddress.toLowerCase() === token.address.toLowerCase() &&
               c.chainId === (token.chainId || chainId)
             );
             price = cachedEntry?.price || 0;
-            
+
             // If still no price and it's a main token, try to get from price manager
             if (price === 0 && ['ETH', 'WETH', 'WBTC', 'USDC', 'USDT'].includes(token.symbol.toUpperCase())) {
-              const { PriceManager } = await import('$lib/managers/PriceManager');
               const priceManager = new PriceManager();
               const pair = `${token.symbol.toUpperCase()}-USD`;
               try {
@@ -157,14 +160,14 @@ export class TokenService extends BaseService {
             console.error('[TokenService] Error fetching cached price:', error);
           }
         }
-        
-        const value = balance * price;
-        
+
+        const value = DecimalMath.of(balance).mul(BigNumberishUtils.toNumber(price)).toNumber();
+
         console.log(`[TokenService] Token ${token.symbol}: balance=${balance}, price=${price}, value=${value}`);
-        
+
         const chainInfo = chainMap.get(token.chainId || chainId);
         const chainName = chainInfo ? `${chainInfo.name} ${chainInfo.network || ''}`.trim() : `Network ${token.chainId || chainId}`;
-        
+
         return {
           symbol: token.symbol,
           name: token.name,
@@ -183,16 +186,16 @@ export class TokenService extends BaseService {
 
       // Filter tokens - show all tokens with balance OR the main tokens (ETH, WETH, WBTC, stablecoins)
       const mainTokens = ['ETH', 'WETH', 'WBTC', 'USDT', 'USDC', 'DAI'];
-      const activeTokens = preview2Tokens.filter(t => 
-        t.qty > 0 || mainTokens.includes(t.symbol.toUpperCase())
+      const activeTokens = preview2Tokens.filter(t =>
+        BigNumberishUtils.compare(t.qty, 0) > 0 || mainTokens.includes(t.symbol.toUpperCase())
       );
-      
+
       // Sort by value descending, but put zero-value main tokens at the end
       activeTokens.sort((a, b) => {
         // Convert values to numbers for comparison
         const aValue = typeof a.value === 'number' ? a.value : parseFloat(String(a.value || 0));
         const bValue = typeof b.value === 'number' ? b.value : parseFloat(String(b.value || 0));
-        
+
         if (aValue === 0 && bValue === 0) {
           // Both have zero value, sort main tokens first
           const aIsMain = mainTokens.includes(a.symbol.toUpperCase());
@@ -218,21 +221,21 @@ export class TokenService extends BaseService {
     try {
       // Get supported chains
       const chains = get(chainStore).chains;
-      
+
       // If no chainIds specified, get tokens from all chains
       const targetChains = chainIds || chains.map(c => c.chainId);
-      
+
       console.log('[TokenService] Getting multi-network tokens for chains:', targetChains);
-      
+
       // Aggregate tokens from all chains
       const allTokens: TokenDisplay[] = [];
-      
+
       for (const chainId of targetChains) {
         const response = await this.sendMessage<any[]>({
           method: 'yakkl_getTokensForChain',
           params: [address, chainId]
         });
-        
+
         if (response.success && response.data) {
           const chainTokens = response.data.map(token => ({
             ...this.transformToTokenDisplay(token),
@@ -241,10 +244,10 @@ export class TokenService extends BaseService {
           allTokens.push(...chainTokens);
         }
       }
-      
+
       // Group tokens by symbol and aggregate values
       const aggregatedTokens = this.aggregateTokensBySymbol(allTokens);
-      
+
       console.log('[TokenService] Aggregated multi-network tokens:', aggregatedTokens);
       return { success: true, data: aggregatedTokens };
     } catch (error) {
@@ -257,16 +260,16 @@ export class TokenService extends BaseService {
 
   private aggregateTokensBySymbol(tokens: TokenDisplay[]): TokenDisplay[] {
     const tokenMap = new Map<string, TokenDisplay>();
-    
+
     for (const token of tokens) {
       const key = token.symbol.toUpperCase();
       if (tokenMap.has(key)) {
         const existing = tokenMap.get(key)!;
-        // Aggregate quantities and values
-        existing.qty += token.qty;
+        // Aggregate quantities and values using BigNumber methods
+        existing.qty = BigNumberishUtils.add(existing.qty, token.qty);
         // Convert values to numbers before adding
-        const existingValue = typeof existing.value === 'number' ? existing.value : parseFloat(String(existing.value || 0));
-        const tokenValue = typeof token.value === 'number' ? token.value : parseFloat(String(token.value || 0));
+        const existingValue = typeof existing.value === 'number' ? existing.value : BigNumberishUtils.toNumber(existing.value || 0);
+        const tokenValue = typeof token.value === 'number' ? token.value : BigNumberishUtils.toNumber(token.value || 0);
         existing.value = existingValue + tokenValue;
         // Keep the same price (should be similar across chains)
         existing.price = token.price || existing.price;
@@ -274,7 +277,7 @@ export class TokenService extends BaseService {
         tokenMap.set(key, { ...token });
       }
     }
-    
+
     return Array.from(tokenMap.values());
   }
 
@@ -282,7 +285,7 @@ export class TokenService extends BaseService {
     const balance = parseFloat(String(token.balance || token.quantity || '0'));
     const price = token.price?.price || 0;
     const value = balance * price;
-    
+
     return {
       symbol: token.symbol,
       name: token.name,
@@ -323,7 +326,7 @@ export class TokenService extends BaseService {
       // This would typically call an API to get latest prices
       // For now, we'll simulate price changes by updating the combined token store
       const combinedTokens = get(yakklCombinedTokenStore);
-      
+
       // Update prices with random variations to simulate market movements
       const updatedTokens = combinedTokens.map(token => {
         if (token.price?.price) {
@@ -333,17 +336,17 @@ export class TokenService extends BaseService {
             ...token,
             price: {
               ...token.price,
-              price: token.price.price * randomFactor,
+              price: DecimalMath.of(BigNumberishUtils.toNumber(token.price.price)).mul(randomFactor).toNumber(),
               lastUpdated: new Date()
             }
           };
         }
         return token;
       });
-      
+
       // Update the combined token store which will trigger all reactive updates
       yakklCombinedTokenStore.set(updatedTokens);
-      
+
       console.log('[TokenService] Refreshed token prices with variations');
       return { success: true, data: true };
     } catch (error) {
@@ -398,6 +401,6 @@ export class TokenService extends BaseService {
 
   private getTokenChange24h(changes: TokenChange[]): number | undefined {
     const change24h = changes.find(c => c.timeline === '24h');
-    return change24h?.percentChange;
+    return change24h?.percentChange ? BigNumberishUtils.toNumber(change24h.percentChange) : undefined;
   }
-}
\ No newline at end of file
+}
diff --git a/packages/yakkl-wallet/src/lib/services/v1_WebSocketClient.ts b/packages/yakkl-wallet/src/lib/services/v1_WebSocketClient.ts
deleted file mode 100644
index 024d5cd..0000000
--- a/packages/yakkl-wallet/src/lib/services/v1_WebSocketClient.ts
+++ /dev/null
@@ -1,209 +0,0 @@
-import { log } from '$lib/common/logger-wrapper';
-import { writable, type Writable, get } from 'svelte/store';
-
-// NOTE: This must only go in the background service, not the wallet client!
-
-export type MessageType = 'rss_feed' | 'notification' | 'price_update' | 'system_status';
-
-const WS_URL = 'ws://localhost:8787/ws';
-
-interface WebSocketMessage {
-	type: MessageType;
-	payload: any;
-	timestamp: number;
-}
-
-interface WebSocketState {
-	connected: boolean;
-	authenticated: boolean;
-	subscriptions: Set<MessageType>;
-}
-
-export class WebSocketClient {
-	private static instance: WebSocketClient;
-	private ws: WebSocket | null = null;
-	private reconnectAttempts = 0;
-	private maxReconnectAttempts = 5;
-	private reconnectDelay = 1000;
-	private messageHandlers: Map<MessageType, ((payload: any) => void)[]> = new Map();
-	private state: Writable<WebSocketState> = writable({
-		connected: false,
-		authenticated: false,
-		subscriptions: new Set()
-	});
-
-	private constructor() {}
-
-	static getInstance(): WebSocketClient {
-		if (!WebSocketClient.instance) {
-			WebSocketClient.instance = new WebSocketClient();
-		}
-		return WebSocketClient.instance;
-	}
-
-	connect(token: string) {
-		if (this.ws?.readyState === WebSocket.OPEN) {
-			return;
-		}
-
-		const wsUrl = `${WS_URL}?token=${token}`;
-		this.ws = new WebSocket(wsUrl);
-
-		this.ws.onopen = () => {
-			log.debug('WebSocket connected');
-			this.reconnectAttempts = 0;
-			this.state.update((s) => ({ ...s, connected: true }));
-
-			// Resubscribe to channels
-			const { subscriptions } = get(this.state);
-			if (subscriptions.size > 0) {
-				this.subscribe(Array.from(subscriptions));
-			}
-		};
-
-		this.ws.onmessage = (event) => {
-			try {
-				const message: WebSocketMessage = JSON.parse(event.data);
-
-				if (message.type === 'system_status') {
-					this.state.update((s) => ({
-						...s,
-						authenticated: message.payload.authenticated
-					}));
-				}
-
-				// Call registered handlers
-				const handlers = this.messageHandlers.get(message.type) || [];
-				handlers.forEach((handler) => handler(message.payload));
-			} catch (error) {
-				log.warn('Failed to parse message:', false, error);
-			}
-		};
-
-		this.ws.onclose = (event) => {
-			log.debug('WebSocket closed:', false, event.code, event.reason);
-			this.state.update((s) => ({ ...s, connected: false }));
-
-			if (event.code === 1008) {
-				// Authentication failed, try to refresh token
-				this.refreshToken();
-			} else {
-				this.reconnect();
-			}
-		};
-
-		this.ws.onerror = (error) => {
-			log.warn('WebSocket error:', false, error);
-		};
-	}
-
-	private async refreshToken() {
-		try {
-			// Implement your token refresh logic here
-			const newToken = await this.getNewToken();
-			this.connect(newToken);
-		} catch (error) {
-			log.warn('Failed to refresh token:', false, error);
-			this.reconnect();
-		}
-	}
-
-	private async getNewToken(): Promise<string> {
-		// Implement your token refresh API call here
-		const response = await fetch('/api/auth/refresh', {
-			method: 'POST',
-			credentials: 'include'
-		});
-
-		if (!response.ok) {
-			throw new Error('Failed to refresh token');
-		}
-
-		const data = await response.json();
-		return data.token;
-	}
-
-	private reconnect() {
-		if (this.reconnectAttempts >= this.maxReconnectAttempts) {
-			log.warn('Max reconnection attempts reached');
-			return;
-		}
-
-		this.reconnectAttempts++;
-		const delay = this.reconnectDelay * Math.pow(2, this.reconnectAttempts - 1);
-
-		setTimeout(() => {
-			log.debug(`Attempting to reconnect (${this.reconnectAttempts}/${this.maxReconnectAttempts})`);
-			this.connect(this.getCurrentToken());
-		}, delay);
-	}
-
-	private getCurrentToken(): string {
-		// Implement your token retrieval logic here
-		return localStorage.getItem('token') || '';
-	}
-
-	subscribe(channels: MessageType[]) {
-		if (!this.ws || this.ws.readyState !== WebSocket.OPEN) {
-			return;
-		}
-
-		this.ws.send(
-			JSON.stringify({
-				type: 'subscribe',
-				channels
-			})
-		);
-
-		this.state.update((s) => ({
-			...s,
-			subscriptions: new Set([...s.subscriptions, ...channels])
-		}));
-	}
-
-	unsubscribe(channels: MessageType[]) {
-		if (!this.ws || this.ws.readyState !== WebSocket.OPEN) {
-			return;
-		}
-
-		this.ws.send(
-			JSON.stringify({
-				type: 'unsubscribe',
-				channels
-			})
-		);
-
-		this.state.update((s) => {
-			const newSubscriptions = new Set(s.subscriptions);
-			channels.forEach((channel) => newSubscriptions.delete(channel));
-			return { ...s, subscriptions: newSubscriptions };
-		});
-	}
-
-	onMessage(type: MessageType, handler: (payload: any) => void) {
-		const handlers = this.messageHandlers.get(type) || [];
-		handlers.push(handler);
-		this.messageHandlers.set(type, handlers);
-	}
-
-	offMessage(type: MessageType, handler: (payload: any) => void) {
-		const handlers = this.messageHandlers.get(type) || [];
-		const index = handlers.indexOf(handler);
-		if (index !== -1) {
-			handlers.splice(index, 1);
-			this.messageHandlers.set(type, handlers);
-		}
-	}
-
-	disconnect() {
-		if (this.ws) {
-			this.ws.close();
-			this.ws = null;
-		}
-		this.state.update((s) => ({ ...s, connected: false, authenticated: false }));
-	}
-
-	getState() {
-		return this.state;
-	}
-}
diff --git a/packages/yakkl-wallet/src/lib/services/wallet.service.ts b/packages/yakkl-wallet/src/lib/services/wallet.service.ts
index ec966c7..b6b898f 100644
--- a/packages/yakkl-wallet/src/lib/services/wallet.service.ts
+++ b/packages/yakkl-wallet/src/lib/services/wallet.service.ts
@@ -1,6 +1,6 @@
 import { BaseService } from './base.service';
 import type { AccountDisplay, ChainDisplay, ServiceResponse } from '../types';
-import { PlanType } from '../types';
+import { PlanType } from '$lib/common/types';
 import type { YakklAccount, YakklCurrentlySelected } from '$lib/common/interfaces';
 import { AccountTypeCategory } from '$lib/common/types';
 import { get } from 'svelte/store';
@@ -8,11 +8,14 @@ import {
   yakklAccountsStore,
   yakklCurrentlySelectedStore,
   yakklSettingsStore,
-  setYakklAccountsStorage
+  setYakklAccountsStorage,
+  setYakklCurrentlySelectedStorage
 } from '$lib/common/stores';
 import { getSafeUUID } from '$lib/common/uuid';
 import { walletStore } from '$lib/managers/Wallet';
 import { browser } from '$app/environment';
+import { DEFAULT_CHAINS } from '$lib/config/chains';
+import { encryptData } from '$lib/common/encryption';
 
 export class WalletService extends BaseService {
   private static instance: WalletService;
@@ -43,7 +46,7 @@ export class WalletService extends BaseService {
           avatar: acc.avatar || null,
           isActive: true,
           balance: acc.quantity?.toString() || '0',
-          plan: (settings?.plan?.type || PlanType.Basic) as PlanType,
+          plan: (settings?.plan?.type || PlanType.EXPLORER_MEMBER) as PlanType,
           // Additional properties for account management
           value: acc.quantity ? parseFloat(acc.quantity.toString()) : 0,
           createdAt: acc.createDate,
@@ -71,7 +74,7 @@ export class WalletService extends BaseService {
           avatar: null as string | null,
           isActive: false,
           balance: '0',
-          plan: (settings?.plan?.type || PlanType.Basic) as PlanType
+          plan: (settings?.plan?.type || PlanType.EXPLORER_MEMBER) as PlanType
         }));
 
         return { success: true, data: displayAccounts };
@@ -103,7 +106,7 @@ export class WalletService extends BaseService {
             avatar: account.avatar || null,
             isActive: true,
             balance: account.quantity?.toString() || '0',
-            plan: (settings?.plan?.type || PlanType.Basic) as PlanType,
+            plan: (settings?.plan?.type || PlanType.EXPLORER_MEMBER) as PlanType,
             // Additional properties for account management
             value: account.quantity ? parseFloat(account.quantity.toString()) : 0,
             createdAt: account.createDate,
@@ -137,12 +140,12 @@ export class WalletService extends BaseService {
   async getBalance(address: string): Promise<ServiceResponse<string>> {
     try {
       console.log('[WalletService] Getting balance for address:', address);
-      
+
       const response = await this.sendMessage<string>({
         method: 'eth_getBalance',
         params: [address, 'latest']
       });
-      
+
       console.log('[WalletService] Balance response:', {
         success: response.success,
         data: response.data,
@@ -173,9 +176,8 @@ export class WalletService extends BaseService {
           }
         };
         yakklCurrentlySelectedStore.set(updated);
-        
+
         // Persist to storage
-        const { setYakklCurrentlySelectedStorage } = await import('$lib/common/stores');
         await setYakklCurrentlySelectedStorage(updated);
         console.log('[WalletService] Persisted account switch to:', address);
       }
@@ -191,9 +193,6 @@ export class WalletService extends BaseService {
 
   async getChains(): Promise<ServiceResponse<ChainDisplay[]>> {
     try {
-      // Import chain configuration
-      const { DEFAULT_CHAINS } = await import('$lib/config/chains');
-
       // Get current chain from store if available
       const currentlySelected = get(yakklCurrentlySelectedStore);
       const currentChainId = currentlySelected?.shortcuts?.chainId || 1;
@@ -282,11 +281,11 @@ export class WalletService extends BaseService {
 
       // Remove 0x prefix if present
       const cleanKey = privateKey.startsWith('0x') ? privateKey.slice(2) : privateKey;
-      
+
       // Create account from private key
       const { ethers } = await import('ethers-v6');
       const ethersWallet = new ethers.Wallet(cleanKey);
-      
+
       // Create YakklAccount
       const newAccount: YakklAccount = {
         id: getSafeUUID(),
@@ -323,7 +322,6 @@ export class WalletService extends BaseService {
       await setYakklAccountsStorage(accounts);
 
       // Store encrypted private key
-      const { encryptData } = await import('$lib/common/encryption');
       // TODO: Get the actual wallet password from user session
       // For now, use a temporary approach - in production this should prompt for password
       const tempPassword = 'imported_' + newAccount.address.slice(0, 8);
@@ -346,7 +344,7 @@ export class WalletService extends BaseService {
         avatar: null,
         isActive: false,
         balance: '0',
-        plan: PlanType.Basic,
+        plan: PlanType.EXPLORER_MEMBER,
         accountType: AccountTypeCategory.IMPORTED,
         tags: ['imported'],
         createdAt: newAccount.createDate,
diff --git a/packages/yakkl-wallet/src/lib/stores/account.store.ts b/packages/yakkl-wallet/src/lib/stores/account.store.ts
index fb281f2..93f832f 100644
--- a/packages/yakkl-wallet/src/lib/stores/account.store.ts
+++ b/packages/yakkl-wallet/src/lib/stores/account.store.ts
@@ -1,6 +1,9 @@
 import { writable, derived, get } from 'svelte/store';
 import type { AccountDisplay, LoadingState, ErrorState } from '../types';
 import { WalletService } from '../services/wallet.service';
+import { getYakklCurrentlySelected, setYakklCurrentlySelectedStorage } from '$lib/common/stores';
+import { walletCacheStore } from './wallet-cache.store';
+import { tokenStore } from './token.store';
 
 interface AccountState {
   accounts: AccountDisplay[];
@@ -11,7 +14,7 @@ interface AccountState {
 
 function createAccountStore() {
   const walletService = WalletService.getInstance();
-  
+
   const { subscribe, set, update } = writable<AccountState>({
     accounts: [],
     currentAccount: null,
@@ -21,7 +24,7 @@ function createAccountStore() {
 
   return {
     subscribe,
-    
+
     async loadAccounts() {
       update(state => ({
         ...state,
@@ -29,7 +32,7 @@ function createAccountStore() {
       }));
 
       const response = await walletService.getAccounts();
-      
+
       if (response.success && response.data) {
         // Update accounts but don't fetch balances here - let token store handle that
         update(state => ({
@@ -38,7 +41,7 @@ function createAccountStore() {
           loading: { isLoading: false },
           error: { hasError: false }
         }));
-        
+
         // Load current account if not set
         const currentResponse = await walletService.getCurrentAccount();
         if (currentResponse.success && currentResponse.data) {
@@ -53,9 +56,9 @@ function createAccountStore() {
             currentResponse.data.balance = balanceInEth;
             console.log('[AccountStore] Set balance:', balanceInEth, 'ETH for', currentResponse.data.address);
           } else {
-            console.error('[AccountStore] Failed to fetch balance:', balanceResponse.error);
+            console.error('[AccountStore] Failed to fetch balance:', balanceResponse ? balanceResponse?.error ?? 'No balance response' : 'No balance response');
           }
-          
+
           update(state => ({
             ...state,
             currentAccount: currentResponse.data!
@@ -72,12 +75,12 @@ function createAccountStore() {
 
     async switchAccount(address: string) {
       const response = await walletService.switchAccount(address);
-      
+
       if (response.success) {
         // Find the account first
         const currentState = get({ subscribe });
         const account = currentState.accounts.find(acc => acc.address === address);
-        
+
         if (account) {
           // Fetch fresh balance for the new account
           console.log('[AccountStore] Switching account - fetching balance for:', address);
@@ -92,19 +95,16 @@ function createAccountStore() {
             console.error('[AccountStore] Switch account - failed to fetch balance:', balanceResponse.error);
           }
         }
-        
+
         // Update the current account
         update(state => ({
           ...state,
           currentAccount: account || null
         }));
-        
+
         // Persist the selection - walletService.switchAccount already does this
         // but let's ensure it's done correctly
         try {
-          const { setYakklCurrentlySelectedStorage } = await import('$lib/common/stores');
-          const { getYakklCurrentlySelected } = await import('$lib/common/stores');
-          
           // Get current selection data
           const currentlySelected = await getYakklCurrentlySelected();
           if (currentlySelected) {
@@ -120,19 +120,17 @@ function createAccountStore() {
         } catch (error) {
           console.error('[AccountStore] Failed to persist account switch:', error);
         }
-        
+
         // Update wallet cache store with the new active account
-        const { walletCacheStore } = await import('./wallet-cache.store');
         walletCacheStore.switchAccount(address);
-        
+
         // Notify token store to refresh immediately by importing and calling refresh
         // This ensures immediate update rather than waiting for subscription
-        const { tokenStore } = await import('./token.store');
         tokenStore.refresh(true);
-        
+
         return true;
       }
-      
+
       return false;
     },
 
@@ -169,7 +167,7 @@ function createAccountStore() {
       }));
 
       const response = await walletService.removeAccount(address);
-      
+
       if (response.success) {
         // Remove from local state
         update(s => ({
@@ -199,8 +197,8 @@ function createAccountStore() {
         // Update in local state
         update(state => ({
           ...state,
-          accounts: state.accounts.map(acc => 
-            acc.address === address 
+          accounts: state.accounts.map(acc =>
+            acc.address === address
               ? { ...acc, username: name, ens: name }
               : acc
           ),
@@ -213,7 +211,7 @@ function createAccountStore() {
 
         // TODO: Persist to storage
         // await walletService.updateAccountName(address, name);
-        
+
         return true;
       } catch (error) {
         update(state => ({
@@ -237,17 +235,17 @@ function createAccountStore() {
       }));
 
       const response = await walletService.importPrivateKey(privateKey, name, alias);
-      
+
       if (response.success && response.data) {
         // Reload accounts to get the new one
         await accountStore.loadAccounts();
-        
+
         update(state => ({
           ...state,
           loading: { isLoading: false },
           error: { hasError: false }
         }));
-        
+
         return response.data;
       } else {
         update(state => ({
@@ -286,4 +284,4 @@ export const accounts = derived(
 export const isLoadingAccounts = derived(
   accountStore,
   $store => $store.loading.isLoading
-);
\ No newline at end of file
+);
diff --git a/packages/yakkl-wallet/src/lib/stores/auth-store.ts b/packages/yakkl-wallet/src/lib/stores/auth-store.ts
index e74faf0..c2337e5 100644
--- a/packages/yakkl-wallet/src/lib/stores/auth-store.ts
+++ b/packages/yakkl-wallet/src/lib/stores/auth-store.ts
@@ -6,6 +6,9 @@ import type { Profile } from '$lib/common/interfaces';
 import { log } from '$lib/common/logger-wrapper';
 import { sessionManager, type SessionState } from '$lib/managers/SessionManager';
 import { jwtManager } from '$lib/utilities/jwt';
+import { auditAuthEvent, checkAuthRateLimit, clearAuthRateLimit, validateAuthentication } from '$lib/common/authValidation';
+import { SessionVerificationService } from '$lib/services/session-verification.service';
+import { setLocks } from '$lib/common/locks';
 
 interface AuthState {
 	isAuthenticated: boolean;
@@ -52,7 +55,6 @@ function createAuthStore() {
 			},
 			onExpired: async () => {
 				// Import audit function
-				const { auditAuthEvent } = await import('$lib/common/authValidation');
 				await auditAuthEvent('session_expired', { reason: 'session_manager_timeout' });
 
 				update((state) => ({
@@ -132,7 +134,6 @@ function createAuthStore() {
 				update((state) => ({ ...state, isInitializing: true }));
 
 				// Import validation module
-				const { validateAuthentication } = await import('$lib/common/authValidation');
 				const validation = await validateAuthentication();
 
 				const settings = await getSettings();
@@ -199,9 +200,6 @@ function createAuthStore() {
 
 		async login(username: string, password: string): Promise<Profile> {
 			try {
-				// Import rate limiting and audit functions
-				const { checkAuthRateLimit, clearAuthRateLimit, auditAuthEvent } = await import('$lib/common/authValidation');
-
 				// Format the username properly (removing .nfs.id if already present, then adding it)
 				const normalizedUsername = username.toLowerCase().trim().replace('.nfs.id', '');
 
@@ -229,7 +227,6 @@ function createAuthStore() {
 				}
 
 				// Perform post-login validation to ensure everything is properly set up
-				const { validateAuthentication } = await import('$lib/common/authValidation');
 				const validation = await validateAuthentication();
 
 				if (!validation.isValid) {
@@ -243,7 +240,7 @@ function createAuthStore() {
 
 				// Get user's plan level for JWT
 				const settings = await getSettings();
-				const planLevel = settings?.plan?.type || 'basic';
+				const planLevel = settings?.plan?.type || 'explorer_member';
 
 				// Start session with JWT token generation
 				const jwtToken = await sessionManager.startSession(
@@ -279,7 +276,6 @@ function createAuthStore() {
 
 				// Notify background script about login to start idle detection
 				try {
-					const { SessionVerificationService } = await import('$lib/services/session-verification.service');
 					const sessionService = SessionVerificationService.getInstance();
 					await sessionService.verifyLogin(true);
 					log.debug('Idle detection started after login');
@@ -288,6 +284,21 @@ function createAuthStore() {
 					// Don't fail login if idle detection fails
 				}
 
+				// Notify background script about successful login to start JWT validation
+				try {
+					if (typeof chrome !== 'undefined' && chrome.runtime) {
+						await chrome.runtime.sendMessage({
+							type: 'USER_LOGIN_SUCCESS',
+							sessionId: sessionState?.sessionId,
+							hasJWT: !!jwtToken
+						});
+						log.debug('Notified background script about successful login');
+					}
+				} catch (error) {
+					log.warn('Failed to notify background script about login:', false, error);
+					// Don't fail login if background notification fails
+				}
+
 				log.debug('User logged in successfully', false, {
 					username: normalizedUsername,
 					sessionId: sessionState?.sessionId
@@ -301,9 +312,6 @@ function createAuthStore() {
 
 		async logout() {
 			try {
-				// Import audit function
-				const { auditAuthEvent } = await import('$lib/common/authValidation');
-
 				// Get current state for audit
 				const currentState = get(authStore);
 				const username = currentState.profile?.username;
@@ -315,12 +323,10 @@ function createAuthStore() {
 				await sessionManager.endSession();
 
 				// Import setLocks to set isLocked flag
-				const { setLocks } = await import('$lib/common/locks');
 				await setLocks(true);
 
 				// Notify background script about logout to stop idle detection
 				try {
-					const { SessionVerificationService } = await import('$lib/services/session-verification.service');
 					const sessionService = SessionVerificationService.getInstance();
 					await sessionService.verifyLogin(false);
 					log.debug('Idle detection stopped after logout');
@@ -365,7 +371,6 @@ function createAuthStore() {
 
 				// Check for inactivity timeout
 				if (now - state.lastActivity > timeoutMs) {
-					const { auditAuthEvent } = await import('$lib/common/authValidation');
 					await auditAuthEvent('session_expired', {
 						reason: 'inactivity_timeout',
 						lastActivity: state.lastActivity,
@@ -378,11 +383,9 @@ function createAuthStore() {
 				}
 
 				// Perform comprehensive validation check
-				const { validateAuthentication } = await import('$lib/common/authValidation');
 				const validation = await validateAuthentication();
 
 				if (!validation.isValid) {
-					const { auditAuthEvent } = await import('$lib/common/authValidation');
 					await auditAuthEvent('session_expired', {
 						reason: 'validation_failed',
 						validationReason: validation.reason
@@ -395,7 +398,6 @@ function createAuthStore() {
 
 				// Check JWT expiry if available
 				if (state.jwtToken && !get(hasValidJWT)) {
-					const { auditAuthEvent } = await import('$lib/common/authValidation');
 					await auditAuthEvent('session_expired', {
 						reason: 'jwt_expired'
 					});
diff --git a/packages/yakkl-wallet/src/lib/stores/chain.store.ts b/packages/yakkl-wallet/src/lib/stores/chain.store.ts
index 3b02993..5f60f3c 100644
--- a/packages/yakkl-wallet/src/lib/stores/chain.store.ts
+++ b/packages/yakkl-wallet/src/lib/stores/chain.store.ts
@@ -1,6 +1,7 @@
-import { writable, derived } from 'svelte/store';
+import { writable, derived, get } from 'svelte/store';
 import type { ChainDisplay, LoadingState, ErrorState } from '../types';
 import { WalletService } from '../services/wallet.service';
+import { yakklCurrentlySelectedStore } from '$lib/common/stores';
 
 interface ChainState {
   chains: ChainDisplay[];
@@ -12,7 +13,7 @@ interface ChainState {
 
 function createChainStore() {
   const walletService = WalletService.getInstance();
-  
+
   const { subscribe, set, update } = writable<ChainState>({
     chains: [],
     currentChain: null,
@@ -23,7 +24,7 @@ function createChainStore() {
 
   return {
     subscribe,
-    
+
     async loadChains() {
       console.log('ChainStore: Loading chains...');
       update(state => ({
@@ -33,15 +34,13 @@ function createChainStore() {
 
       const response = await walletService.getChains();
       console.log('ChainStore: getChains response:', response);
-      
+
       if (response.success && response.data) {
         // Get the current chain ID from the store
-        const { yakklCurrentlySelectedStore } = await import('$lib/common/stores');
-        const { get } = await import('svelte/store');
         const currentlySelected = get(yakklCurrentlySelectedStore);
         const savedChainId = currentlySelected?.shortcuts?.chainId || 1;
         console.log('ChainStore: savedChainId:', savedChainId, 'chains:', response.data);
-        
+
         update(state => ({
           ...state,
           chains: response.data!,
@@ -67,7 +66,7 @@ function createChainStore() {
 
       const response = await walletService.switchChain(chainId);
       console.log('ChainStore: switchChain response:', response);
-      
+
       if (response.success) {
         update(state => {
           const chain = state.chains.find(c => c.chainId === chainId);
@@ -131,12 +130,12 @@ export const currentChain = derived(
 
 export const visibleChains = derived(
   chainStore,
-  $store => $store.showTestnets 
-    ? $store.chains 
+  $store => $store.showTestnets
+    ? $store.chains
     : $store.chains.filter(chain => !chain.isTestnet)
 );
 
 export const isLoadingChains = derived(
   chainStore,
   $store => $store.loading.isLoading
-);
\ No newline at end of file
+);
diff --git a/packages/yakkl-wallet/src/lib/stores/plan.store.lean.ts b/packages/yakkl-wallet/src/lib/stores/plan.store.lean.ts
index 02b2c2d..bc13e78 100644
--- a/packages/yakkl-wallet/src/lib/stores/plan.store.lean.ts
+++ b/packages/yakkl-wallet/src/lib/stores/plan.store.lean.ts
@@ -4,7 +4,7 @@
  */
 
 import { writable, derived } from 'svelte/store';
-import { PlanType } from '../types';
+import { PlanType } from '$lib/common/types';
 import { featureManager, canUseFeature as checkFeature } from '../utils/features';
 import { getSettings } from '$lib/common/stores';
 import { log } from '../utils/logger';
@@ -21,40 +21,40 @@ interface PlanState {
 
 function createPlanStore() {
   const { subscribe, set, update } = writable<PlanState>({
-    plan: { type: PlanType.Basic },
+    plan: { type: PlanType.EXPLORER_MEMBER },
     loading: false
   });
 
   return {
     subscribe,
-    
+
     async loadPlan() {
       update(state => ({ ...state, loading: true }));
-      
+
       try {
         const settings = await getSettings();
         // Convert old plan types to new ones
         const oldPlanType = settings?.plan?.type;
         let planType: PlanType;
-        
+
         // Map old plan types to new ones
         if (oldPlanType === 'yakkl_pro' || oldPlanType === 'founding_member' || oldPlanType === 'early_adopter') {
-          planType = PlanType.Pro;
+          planType = PlanType.YAKKL_PRO;
         } else if (oldPlanType === 'enterprise' || oldPlanType === 'institution' || oldPlanType === 'business') {
-          planType = PlanType.Enterprise;
+          planType = PlanType.ENTERPRISE;
         } else {
-          planType = PlanType.Basic;
+          planType = PlanType.EXPLORER_MEMBER;
         }
-        
+
         const trialEndDate = settings?.plan?.trialEndDate;
-        
+
         // Check if user is on trial (Pro features during trial)
         const onTrial = trialEndDate && new Date(trialEndDate) > new Date();
-        const effectivePlan = onTrial ? PlanType.Pro : planType;
-        
+        const effectivePlan = onTrial ? PlanType.YAKKL_PRO : planType;
+
         // Update feature manager
         featureManager.setPlan(effectivePlan);
-        
+
         set({
           plan: {
             type: effectivePlan,
@@ -62,15 +62,15 @@ function createPlanStore() {
           },
           loading: false
         });
-        
+
         log.debug(`Plan loaded: ${effectivePlan}`, { onTrial, trialEndDate });
       } catch (error) {
         log.error('Failed to load plan:', error);
-        
+
         // Default to basic plan
-        featureManager.setPlan(PlanType.Basic);
+        featureManager.setPlan(PlanType.EXPLORER_MEMBER);
         set({
-          plan: { type: PlanType.Basic },
+          plan: { type: PlanType.EXPLORER_MEMBER },
           loading: false
         });
       }
@@ -78,10 +78,10 @@ function createPlanStore() {
 
     async upgradePlan(newPlan: PlanType) {
       log.info(`Upgrading plan to: ${newPlan}`);
-      
+
       // Update feature manager
       featureManager.setPlan(newPlan);
-      
+
       update(state => ({
         ...state,
         plan: { ...state.plan, type: newPlan }
@@ -89,9 +89,9 @@ function createPlanStore() {
     },
 
     reset() {
-      featureManager.setPlan(PlanType.Basic);
+      featureManager.setPlan(PlanType.EXPLORER_MEMBER);
       set({
-        plan: { type: PlanType.Basic },
+        plan: { type: PlanType.EXPLORER_MEMBER },
         loading: false
       });
     }
@@ -108,7 +108,7 @@ export const currentPlan = derived(
 
 export const isProUser = derived(
   planStore,
-  $store => featureManager.hasAccess(PlanType.Pro)
+  $store => featureManager.hasAccess(PlanType.YAKKL_PRO)
 );
 
 export const isOnTrial = derived(
@@ -122,4 +122,4 @@ export const isOnTrial = derived(
 // Export feature checking function
 export const canUseFeature = (feature: string): boolean => {
   return checkFeature(feature);
-};
\ No newline at end of file
+};
diff --git a/packages/yakkl-wallet/src/lib/stores/plan.store.ts b/packages/yakkl-wallet/src/lib/stores/plan.store.ts
index 410ce7c..5899944 100644
--- a/packages/yakkl-wallet/src/lib/stores/plan.store.ts
+++ b/packages/yakkl-wallet/src/lib/stores/plan.store.ts
@@ -1,9 +1,11 @@
 import { writable, derived } from 'svelte/store';
 import type { UserPlan } from '../types';
-import { PlanType } from '../types';
+import { PlanType } from '../common';
 import { hasFeature, getFeaturesForPlan, isTrialUser } from '../config/features';
-import { getSettings } from '$lib/common/stores';
+import { getMiscStore, getProfile, getSettings, setProfileStorage, setSettingsStorage } from '$lib/common/stores';
 import { setUserPlan } from '../utils/features';
+import { decryptData, encryptData, isEncryptedData, type ProfileData } from '$lib/common';
+import { log } from '$lib/common/logger-wrapper';
 
 interface PlanState {
   plan: UserPlan;
@@ -13,31 +15,31 @@ interface PlanState {
 function createPlanStore() {
   const { subscribe, set, update } = writable<PlanState>({
     plan: {
-      type: PlanType.Basic,
-      features: getFeaturesForPlan(PlanType.Basic) as string[]
+      type: PlanType.EXPLORER_MEMBER,
+      features: getFeaturesForPlan(PlanType.EXPLORER_MEMBER) as string[]
     },
     loading: false
   });
 
   return {
     subscribe,
-    
+
     async loadPlan() {
       update(state => ({ ...state, loading: true }));
-      
+
       try {
         // Get plan from settings
         const settings = await getSettings();
-        const planType = settings?.plan?.type || PlanType.Basic;
+        const planType = settings?.plan?.type || PlanType.EXPLORER_MEMBER;
         const trialEndsAt = (settings as any)?.plan?.trialEndsAt as string | undefined;
-        
+
         // Check if user is on trial
         const onTrial = isTrialUser(trialEndsAt);
-        const effectivePlan = onTrial ? PlanType.Pro : planType;
-        
+        const effectivePlan = onTrial ? PlanType.YAKKL_PRO : planType;
+
         // Update the feature manager with the current plan
         setUserPlan(effectivePlan as PlanType);
-        
+
         set({
           plan: {
             type: effectivePlan as PlanType,
@@ -51,8 +53,8 @@ function createPlanStore() {
         // Default to basic plan on error
         set({
           plan: {
-            type: PlanType.Basic,
-            features: getFeaturesForPlan(PlanType.Basic) as string[]
+            type: PlanType.EXPLORER_MEMBER,
+            features: getFeaturesForPlan(PlanType.EXPLORER_MEMBER) as string[]
           },
           loading: false
         });
@@ -60,45 +62,63 @@ function createPlanStore() {
     },
 
     canUseFeature(feature: string): boolean {
-      let planState: PlanState = { 
-        plan: { type: PlanType.Basic, features: [] }, 
-        loading: false 
+      let planState: PlanState = {
+        plan: { type: PlanType.EXPLORER_MEMBER, features: [] },
+        loading: false
       };
-      
+
       subscribe(state => { planState = state; })();
-      
+
       return hasFeature(planState.plan.type, feature);
     },
 
     async upgradeTo(newPlan: PlanType) {
-      update(state => ({ ...state, loading: true }));
-      
       try {
+        if (!newPlan) throw new Error('No plan type provided');
+
+	  		update((state) => ({ ...state, loading: true }));
+
+
+
+
         // In production, this would make an API call to process the upgrade
         await new Promise(resolve => setTimeout(resolve, 1000)); // Simulate API call
-        
+
+
+
+        const profile = await getProfile();
+        if (profile) {
+          let profileData: ProfileData;
+          if (isEncryptedData(profile.data)) {
+            const miscStore = getMiscStore();
+            profileData = await decryptData(profile.data, miscStore) as ProfileData;
+            if (profileData) {
+              profileData.planType = newPlan as PlanType;
+
+              const encryptedProfileData = await encryptData(profileData, miscStore);
+              if (encryptedProfileData) {
+                profile.data = encryptedProfileData;
+                await setProfileStorage(profile);
+              } else {
+                throw new Error('Failed to encrypt profile data');
+              }
+            } else {
+              throw new Error('Profile data is not valid');
+            }
+          } else {
+            throw new Error('Profile data is not encrypted');
+          }
+        }
+
         // Update local storage for persistence
         const settings = await getSettings();
         if (settings) {
-          const updatedSettings = {
-            ...settings,
-            plan: {
-              ...settings.plan,
-              type: newPlan,
-              trialEndsAt: null as string | null, // Clear trial when upgrading
-              subscriptionId: `sub_${Date.now()}`, // Mock subscription ID
-              updatedAt: new Date().toISOString()
-            }
-          };
-          
-          // In a real app, you'd save this to secure storage
-          localStorage.setItem('yakkl:plan', JSON.stringify({
-            type: newPlan,
-            subscriptionId: updatedSettings.plan.subscriptionId,
-            upgradedAt: updatedSettings.plan.updatedAt
-          }));
+          settings.plan.type = newPlan as PlanType;
+          settings.plan.trialEndDate = null as string | null; // Clear trial when upgrading
+          settings.plan.upgradeDate = new Date().toISOString();
+          await setSettingsStorage(settings);
         }
-        
+
         // Update the store
         update(state => ({
           ...state,
@@ -110,9 +130,9 @@ function createPlanStore() {
           },
           loading: false
         }));
-        
-        console.log(` Successfully upgraded to ${newPlan}`);
-        
+
+        log.info(` Successfully upgraded to ${newPlan}`);
+
       } catch (error) {
         console.error('Upgrade failed:', error);
         update(state => ({ ...state, loading: false }));
@@ -123,10 +143,10 @@ function createPlanStore() {
     async downgradeTo(newPlan: PlanType) {
       // Similar to upgrade but for downgrades
       update(state => ({ ...state, loading: true }));
-      
+
       try {
         await new Promise(resolve => setTimeout(resolve, 1000));
-        
+
         update(state => ({
           ...state,
           plan: {
@@ -137,7 +157,7 @@ function createPlanStore() {
           },
           loading: false
         }));
-        
+
       } catch (error) {
         console.error('Downgrade failed:', error);
         update(state => ({ ...state, loading: false }));
@@ -147,24 +167,24 @@ function createPlanStore() {
 
     async startTrial(trialDays = 14) {
       update(state => ({ ...state, loading: true }));
-      
+
       try {
         const trialEndsAt = new Date();
         trialEndsAt.setDate(trialEndsAt.getDate() + trialDays);
-        
+
         update(state => ({
           ...state,
           plan: {
-            type: PlanType.Pro, // Trial gives Pro features
-            features: getFeaturesForPlan(PlanType.Pro) as string[],
+            type: PlanType.YAKKL_PRO, // Trial gives Pro features
+            features: getFeaturesForPlan(PlanType.YAKKL_PRO) as string[],
             trialEndsAt: trialEndsAt.toISOString(),
             subscriptionId: null
           },
           loading: false
         }));
-        
+
         console.log(` Started ${trialDays}-day trial`);
-        
+
       } catch (error) {
         console.error('Failed to start trial:', error);
         update(state => ({ ...state, loading: false }));
@@ -173,27 +193,27 @@ function createPlanStore() {
     },
 
     getUpgradeOptions(currentPlan: PlanType) {
-      const plans = [PlanType.Basic, PlanType.Pro, PlanType.Enterprise];
+      const plans = [PlanType.EXPLORER_MEMBER, PlanType.YAKKL_PRO, PlanType.ENTERPRISE];
       const currentIndex = plans.indexOf(currentPlan);
       return plans.slice(currentIndex + 1);
     },
 
     getPlanStatus() {
-      let planState: PlanState = { 
-        plan: { type: PlanType.Basic, features: [] }, 
-        loading: false 
+      let planState: PlanState = {
+        plan: { type: PlanType.EXPLORER_MEMBER, features: [] },
+        loading: false
       };
-      
+
       subscribe(state => { planState = state; })();
-      
+
       const trialActive = isTrialUser(planState.plan.trialEndsAt);
       const hasSubscription = !!planState.plan.subscriptionId;
-      
+
       return {
         current: planState.plan.type,
         onTrial: trialActive,
         hasSubscription,
-        canUpgrade: planState.plan.type !== PlanType.Enterprise,
+        canUpgrade: planState.plan.type !== PlanType.ENTERPRISE,
         trialEndsAt: planState.plan.trialEndsAt
       };
     },
@@ -202,8 +222,8 @@ function createPlanStore() {
       // Reset to default state
       set({
         plan: {
-          type: PlanType.Basic,
-          features: getFeaturesForPlan(PlanType.Basic) as string[]
+            type: PlanType.EXPLORER_MEMBER,
+          features: getFeaturesForPlan(PlanType.EXPLORER_MEMBER) as string[]
         },
         loading: false
       });
@@ -221,7 +241,7 @@ export const currentPlan = derived(
 
 export const isProUser = derived(
   planStore,
-  $store => $store.plan.type === PlanType.Pro || $store.plan.type === PlanType.Enterprise
+  $store => $store.plan.type === PlanType.YAKKL_PRO || $store.plan.type === PlanType.ENTERPRISE
 );
 
 export const isOnTrial = derived(
@@ -237,4 +257,4 @@ export const availableFeatures = derived(
 // Helper to check features in components
 export function canUseFeature(feature: string): boolean {
   return planStore.canUseFeature(feature);
-}
\ No newline at end of file
+}
diff --git a/packages/yakkl-wallet/src/lib/stores/token.store.ts b/packages/yakkl-wallet/src/lib/stores/token.store.ts
index 8afe9a6..74f44be 100644
--- a/packages/yakkl-wallet/src/lib/stores/token.store.ts
+++ b/packages/yakkl-wallet/src/lib/stores/token.store.ts
@@ -9,13 +9,16 @@ import {
   multiChainPortfolioValue,
   portfolioByNetwork as cachePortfolioByNetwork
 } from './wallet-cache.store';
-import { currentAccount } from './account.store';
+// Remove direct import of currentAccount to avoid circular dependency
+// import { currentAccount } from './account.store';
 import { currentChain } from './chain.store';
 import { CacheSyncManager } from '../services/cache-sync.service';
 import { log } from '$lib/common/logger-wrapper';
 
 import type { TokenData } from '$lib/common/interfaces';
-import { setYakklCombinedTokenStorage, getYakklCombinedToken } from '$lib/common/stores';
+import { setYakklCombinedTokenStorage, getYakklCombinedTokens } from '$lib/common/stores';
+import { BigNumber } from '$lib/common/bignumber';
+import { BigNumberishUtils } from '$lib/common/BigNumberishUtils';
 
 interface TokenState {
   loading: LoadingState;
@@ -50,22 +53,22 @@ function createTokenStore() {
       syncManager.startAutoSync();
     }
 
-    log.info('[TokenStore] Initialization complete', false);
-  }
-
-  // Run initialization only in browser
-  if (browser) {
-    initialize();
-  }
-
-      // Listen for account changes only in browser
+    // Set up listeners after initialization to avoid circular dependency
     if (browser) {
-      currentAccount.subscribe(async (account) => {
-        if (account) {
-          log.info('[TokenStore] Account changed, initializing cache...', false);
-          await syncManager.initializeCurrentAccount();
-        }
-      });
+      try {
+        // Dynamically import currentAccount after initialization to avoid circular dependency
+        const { currentAccount } = await import('./account.store');
+
+        // Listen for account changes
+        currentAccount.subscribe(async (account) => {
+          if (account) {
+            log.info('[TokenStore] Account changed, initializing cache...', false);
+            await syncManager.initializeCurrentAccount();
+          }
+        });
+      } catch (error) {
+        log.error('[TokenStore] Failed to set up account listener:', false, error);
+      }
 
       // Listen for chain changes
       currentChain.subscribe(async (chain) => {
@@ -76,6 +79,14 @@ function createTokenStore() {
       });
     }
 
+    log.info('[TokenStore] Initialization complete', false);
+  }
+
+  // Run initialization only in browser
+  if (browser) {
+    initialize();
+  }
+
   return {
     subscribe,
 
@@ -153,7 +164,7 @@ function createTokenStore() {
     async addCustomToken(token: TokenData) {
       try {
         // Save to combined token storage
-        const yakklTokens = await getYakklCombinedToken() || [];
+        const yakklTokens = await getYakklCombinedTokens() || [];
         yakklTokens.push({
           address: token.address,
           symbol: token.symbol,
@@ -197,7 +208,7 @@ export const tokens = derived(
       isNative: token.isNative,
       chainId: token.chainId,
       // Add required fields for TokenDisplay
-      qty: parseFloat(token.balance) || 0,
+      qty: BigNumber.from(token.balance) || 0n,
       quantity: token.balance,
       chainName: ''  // Will be filled by UI
     }));
@@ -215,7 +226,7 @@ export const tokensByValue = derived(
   tokens,
   $tokens => {
     if (!Array.isArray($tokens)) return [];
-    return [...$tokens].sort((a, b) => b.value - a.value);
+    return [...$tokens].sort((a, b) => BigNumberishUtils.compare(b.value, a.value));
   }
 );
 
diff --git a/packages/yakkl-wallet/src/lib/stores/transaction.store.ts b/packages/yakkl-wallet/src/lib/stores/transaction.store.ts
index 57afae9..97711bf 100644
--- a/packages/yakkl-wallet/src/lib/stores/transaction.store.ts
+++ b/packages/yakkl-wallet/src/lib/stores/transaction.store.ts
@@ -7,7 +7,7 @@ import { currentAccount } from './account.store';
 import { currentChain } from './chain.store';
 import { get } from 'svelte/store';
 import { browser } from '$app/environment';
-// Removed: import browserApi from 'webextension-polyfill';
+// Removed: import browserApi from '$lib/types/browser-types';
 // Added: Use helper to avoid module resolution error
 import { addTransactionUpdateListener, isExtensionContext, getSessionStorage } from './transaction-store-helper';
 
diff --git a/packages/yakkl-wallet/src/lib/stores/wallet-cache.store.ts b/packages/yakkl-wallet/src/lib/stores/wallet-cache.store.ts
index 7cfb1db..1da6ee7 100644
--- a/packages/yakkl-wallet/src/lib/stores/wallet-cache.store.ts
+++ b/packages/yakkl-wallet/src/lib/stores/wallet-cache.store.ts
@@ -1,7 +1,8 @@
 import { writable, derived, get } from 'svelte/store';
 import {
   setObjectInExtensionStorage,
-  getObjectFromExtensionStorage
+  getObjectFromExtensionStorage,
+  getYakklCurrentlySelected
 } from '$lib/common/stores';
 import type {
   YakklAccount,
@@ -11,6 +12,7 @@ import type {
 } from '$lib/types';
 import { VERSION } from '$lib/common';
 import { log } from '$lib/common/logger-wrapper';
+import { BigNumber, type BigNumberish } from '$lib/common/bignumber';
 
 // Cache version for migrations
 const CACHE_VERSION = VERSION;
@@ -66,24 +68,24 @@ export interface TokenCache {
   address: string;
   symbol: string;
   name: string;
-  decimals: number;
+  decimals: number;               // Stay number (decimal places count)
 
   // Balance data
-  balance: string;
+  balance: string;                // Keep as string for storage
   balanceLastUpdated: Date;
 
   // Price data
-  price: number;
+  price: BigNumberish;            // Changed from number - CRITICAL
   priceLastUpdated: Date;
-  price24hChange?: number;
+  price24hChange?: BigNumberish;  // Changed from number for precision
 
   // Calculated value
-  value: number; // balance * price
+  value: BigNumberish;            // Changed from number - CRITICAL (balance * price)
 
   // UI display data
   icon?: string;
   isNative: boolean;
-  chainId: number;
+  chainId: number;                // Stay number (chain ID is integer)
 }
 
 export interface TransactionCache {
@@ -218,7 +220,6 @@ function createWalletCacheStore() {
       }
 
       // Sync with current account from persisted storage
-      const { getYakklCurrentlySelected } = await import('$lib/common/stores');
       const currentlySelected = await getYakklCurrentlySelected();
       if (currentlySelected?.shortcuts?.address) {
         update(cache => ({
@@ -261,7 +262,6 @@ function createWalletCacheStore() {
       await loadFromStorage();
 
       // Ensure we're synced with the current account after initialization
-      const { getYakklCurrentlySelected } = await import('$lib/common/stores');
       const currentlySelected = await getYakklCurrentlySelected();
       if (currentlySelected?.shortcuts?.address) {
         const currentState = get({ subscribe });
@@ -326,14 +326,14 @@ function createWalletCacheStore() {
         // More lenient validation - allow updates if we have ANY meaningful data
         const hasAnyMeaningfulData = tokens.some(token =>
           (token.balance && parseFloat(token.balance) > 0) ||
-          (token.price && token.price > 0) ||
+          (token.price && (BigNumber.toNumber(token.price) || 0) > 0) ||
           token.isNative // Always preserve native token even with 0 balance
         );
 
         // Only reject if ALL tokens have zero values AND no native token
         const existingHasValues = accountCache.tokens.some(token =>
           (token.balance && parseFloat(token.balance) > 0) ||
-          (token.value && token.value > 0) ||
+          (token.value && (BigNumber.toNumber(token.value) || 0) > 0) ||
           token.isNative
         );
 
@@ -353,7 +353,10 @@ function createWalletCacheStore() {
 
         // Recalculate portfolio
         accountCache.portfolio = {
-          totalValue: tokens.reduce((sum, token) => sum + (token.value || 0), 0),
+          totalValue: tokens.reduce((sum, token) => {
+            const tokenValue = BigNumber.toNumber(token.value || 0) || 0;
+            return sum + tokenValue;
+          }, 0),
           lastCalculated: new Date(),
           tokenCount: tokens.length
         };
@@ -362,6 +365,45 @@ function createWalletCacheStore() {
       });
     },
 
+    // Update only native token price without touching other cache data
+    updateNativeTokenPrice(chainId: number, address: string, price: number) {
+      update(cache => {
+        const newCache = { ...cache };
+        const normalizedAddress = address.toLowerCase();
+        const accountCache = newCache.chainAccountCache[chainId]?.[normalizedAddress];
+
+        if (!accountCache) {
+          log.warn('[WalletCache] No cache for native token price update', false, { chainId, address });
+          return cache;
+        }
+
+        // Find and update only the native token
+        let updated = false;
+        accountCache.tokens = accountCache.tokens.map(token => {
+          if (token.isNative) {
+            const balance = parseFloat(token.balance) || 0;
+            updated = true;
+            return {
+              ...token,
+              price: price,
+              priceLastUpdated: new Date(),
+              value: balance * price
+            };
+          }
+          return token;
+        });
+
+        if (updated) {
+          // DON'T recalculate portfolio here - let other systems handle portfolio totals
+          // Just update the price update timestamp
+          accountCache.lastPriceUpdate = new Date();
+          log.info('[WalletCache] Updated native token price only (portfolio calculation skipped)', false, { chainId, address, price });
+        }
+
+        return newCache;
+      });
+    },
+
     // Update token prices for all accounts on a chain
     updateTokenPrices(chainId: number, priceMap: Map<string, number>) {
       update(cache => {
@@ -393,7 +435,10 @@ function createWalletCacheStore() {
 
           // Recalculate portfolio
           accountCache.portfolio = {
-            totalValue: accountCache.tokens.reduce((sum, token) => sum + (token.value || 0), 0),
+            totalValue: accountCache.tokens.reduce((sum, token) => {
+              const tokenValue = BigNumber.toNumber(token.value || 0) || 0;
+              return sum + tokenValue;
+            }, 0),
             lastCalculated: new Date(),
             tokenCount: accountCache.tokens.length
           };
diff --git a/packages/yakkl-wallet/src/lib/streams/port-stream.ts b/packages/yakkl-wallet/src/lib/streams/port-stream.ts
index a6ab497..3708a38 100644
--- a/packages/yakkl-wallet/src/lib/streams/port-stream.ts
+++ b/packages/yakkl-wallet/src/lib/streams/port-stream.ts
@@ -4,7 +4,7 @@ import { Duplex } from 'stream-browserify';
  * This class is a Duplex stream that wraps a WebExtensions Port. It allows for bi-directional communication between the content script and the background script using the stream protocol provided by Node.js. so that it can also be used with Node.js streams. This is useful for integrating WebExtensions with libraries that expect Node.js streams.
  */
 
-import type { Runtime } from 'webextension-polyfill';
+import type { Runtime } from '$lib/types/browser-types';
 type RuntimePort = Runtime.Port;
 
 type Log = (data: unknown, out: boolean) => void;
diff --git a/packages/yakkl-wallet/src/lib/tokens/prices.ts b/packages/yakkl-wallet/src/lib/tokens/prices.ts
index ec6fc15..2e30539 100644
--- a/packages/yakkl-wallet/src/lib/tokens/prices.ts
+++ b/packages/yakkl-wallet/src/lib/tokens/prices.ts
@@ -1,12 +1,16 @@
 // Base coingecko API
 // import { fetchJson } from "@ethersproject/web";
-import { get } from 'svelte/store';
+import { writable, get, type Writable } from 'svelte/store';
+import { yakklCombinedTokenStore } from '$lib/common/stores';
+import type { TokenData } from '$lib/common/interfaces';
+import { balanceCacheManager } from '$lib/managers/BalanceCacheManager';
+import { BigNumberishUtils } from '$lib/common/BigNumberishUtils';
+import { log } from '$lib/common/logger-wrapper';
 import { yakklPricingStore, yakklConnectionStore } from '$lib/common/stores';
 import { PriceManager } from '$lib/managers/PriceManager';
 import { KrakenPriceProvider } from '$lib/managers/providers/price/kraken/KrakenPriceProvider';
 import { CoingeckoPriceProvider } from '$lib/managers/providers/price/coingecko/CoingeckoPriceProvider';
 import { CoinbasePriceProvider } from '$lib/managers/providers/price/coinbase/CoinbasePriceProvider';
-import { log } from '$lib/managers/Logger';
 import { getTimerManager } from '$lib/managers/TimerManager';
 import { TIMER_CHECK_PRICE_INTERVAL_TIME } from '$lib/common';
 
@@ -38,16 +42,15 @@ export async function checkPricesCallback(symbol: string = 'ETH-USD') {
 				yakklPricingStore.set({
 					provider: result.provider,
 					id: 'checkPricesCallback',
-					price: result.price,
+					price: BigNumberishUtils.toNumber(result.price),
 					prevPrice: prevPrice
 				});
 
 				// Update all cached balances with new price
-				const { balanceCacheManager } = await import('$lib/managers/BalanceCacheManager');
-				if (result.price && result.price > 0) {
-					balanceCacheManager.updatePriceForAllEntries(result.price);
+				if (result.price && BigNumberishUtils.compare(result.price, 0) > 0) {
+					balanceCacheManager.updatePriceForAllEntries(BigNumberishUtils.toNumber(result.price));
 					log.debug('[checkPricesCallback] Updated all cached entries with new price:', false, {
-						newPrice: result.price
+						newPrice: BigNumberishUtils.toNumber(result.price)
 					});
 				}
 			}
diff --git a/packages/yakkl-wallet/src/lib/types.ts b/packages/yakkl-wallet/src/lib/types.ts
index 681023c..e3327f5 100644
--- a/packages/yakkl-wallet/src/lib/types.ts
+++ b/packages/yakkl-wallet/src/lib/types.ts
@@ -1,3 +1,6 @@
+import type { PlanType } from '$lib/common/types';
+import type { BigNumberish } from '$lib/common/bignumber';
+
 // Re-export existing types from main lib
 export type {
   YakklAccount,
@@ -18,14 +21,14 @@ export interface AccountDisplay {
   username?: string;
   avatar?: string | null;
   isActive: boolean;
-  balance?: string;
+  balance?: string;               // Keep as string for display
   plan?: PlanType;
   // Additional properties for account management
   connectedDomains?: string[];
-  value?: number;
+  value?: BigNumberish;           // Changed from number - CRITICAL
   createdAt?: string;
   createDate?: string;
-  chainIds?: number[];
+  chainIds?: number[];            // Stay number (chain IDs are integers)
   accountType?: string;
   tags?: string[];
   isPrimary?: boolean;
@@ -46,26 +49,26 @@ export interface ChainDisplay {
     name: string;
     symbol: string;
     decimals: number;
-    price?: number;
+    price?: BigNumberish;         // Changed from number
   };
 }
 
 export interface TokenDisplay {
-  chainId?: number;
+  chainId?: number;               // Stay number (chain ID is integer)
   address?: string;
   isNative?: boolean;
   symbol: string;
   name: string;
-  decimals: number;
+  decimals: number;               // Stay number (decimal places count)
   logo?: string;
-  quantity?: string;
-  balance?: string | number;
-  value?: string | number;
-  price?: number;
+  quantity?: string;              // Keep as string - good for display
+  balance?: string | BigNumberish; // Accept both for compatibility, prefer BigNumberish
+  value?: string | BigNumberish;   // Accept both for compatibility, prefer BigNumberish
+  price?: BigNumberish;           // Changed from number - CRITICAL
   chainName?: string;
   icon?: string;
-  qty?: number;
-  change24h?: number;
+  qty?: BigNumberish;             // Changed from number - CRITICAL
+  change24h?: BigNumberish;       // Changed from number for precision
   color?: string;
 }
 
@@ -98,14 +101,6 @@ export interface TransactionDisplay {
   chainId?: number; // Added for multi-chain support
 }
 
-export enum PlanType {
-  Basic = 'basic_member',
-  FoundingMember = 'founding_member',
-  EarlyAdopter = 'early_adopter',
-  Pro = 'yakkl_pro',
-  Enterprise = 'enterprise'
-}
-
 export interface UserPlan {
   type: PlanType;
   trialEndsAt?: string;
diff --git a/packages/yakkl-wallet/src/lib/upgrades/UpgradeMigrationManager.ts b/packages/yakkl-wallet/src/lib/upgrades/UpgradeMigrationManager.ts
index d742f0f..de1fdd6 100644
--- a/packages/yakkl-wallet/src/lib/upgrades/UpgradeMigrationManager.ts
+++ b/packages/yakkl-wallet/src/lib/upgrades/UpgradeMigrationManager.ts
@@ -5,6 +5,13 @@ import {
 } from '$lib/common/storage';
 import { log } from '$lib/managers/Logger';
 import { AccessSourceType, PromoClassificationType } from '$lib/common/types';
+import { EthereumBigNumber } from '$lib/common/bignumber-ethereum';
+import {
+    getObjectFromExtensionStorage,
+    setObjectInExtensionStorage,
+    getYakklTokenCache,
+    setYakklTokenCacheStorage
+} from '$lib/common/stores';
 
 // List of all storage keys that need to be upgraded
 const yakklUpdateStorage = [
@@ -28,6 +35,7 @@ const yakklUpdateStorage = [
 	'yakklWatchList',
   'yakklTokenCache',
 	'yakklTokenViewCache',
+  'yakklAddressTokenHoldings',
   'yakklWalletCache'
 ];
 
@@ -37,6 +45,75 @@ interface UpgradeMigration {
 	migrate: (data: any, storageKey: string) => Promise<any>;
 }
 
+/**
+ * Simple migration for converting number-based financial data to BigNumberish
+ * Version: 2.1.0
+ */
+export async function migrateFinancialDataToBigNumberish(): Promise<void> {
+    try {
+        log.info('[Migration] Starting financial data migration to BigNumberish');
+
+        // Migrate wallet cache data
+        await migrateWalletCacheData();
+
+        // Migrate token cache data
+        await migrateTokenCacheData();
+
+        log.info('[Migration] Completed financial data migration to BigNumberish');
+    } catch (error) {
+        log.error('[Migration] Failed financial data migration:', false, error);
+        throw error;
+    }
+}
+
+async function migrateWalletCacheData(): Promise<void> {
+    try {
+        const cacheKey = 'yakklWalletCache';
+        const cache = await getObjectFromExtensionStorage(cacheKey) as any;
+
+        if (!cache?.chainAccountCache) return;
+
+        // Simple migration: convert number fields to string representation
+        for (const chainId in cache.chainAccountCache) {
+            const chainCache = cache.chainAccountCache[chainId];
+
+            for (const address in chainCache) {
+                const accountCache = chainCache[address];
+
+                // Migrate token values
+                accountCache.tokens = accountCache.tokens.map((token: any) => ({
+                    ...token,
+                    price: typeof token.price === 'number' ? token.price.toString() : token.price,
+                    value: typeof token.value === 'number' ? token.value.toString() : token.value,
+                    price24hChange: typeof token.price24hChange === 'number' ? token.price24hChange.toString() : token.price24hChange
+                }));
+            }
+        }
+
+        await setObjectInExtensionStorage(cacheKey, cache);
+        log.info('[Migration] Migrated wallet cache data');
+    } catch (error) {
+        log.warn('[Migration] Failed to migrate wallet cache:', false, error);
+    }
+}
+
+async function migrateTokenCacheData(): Promise<void> {
+    try {
+        const cache = await getYakklTokenCache();
+
+        const migratedCache = cache.map((entry: any) => ({
+            ...entry,
+            price: typeof entry.price === 'number' ? entry.price.toString() : entry.price,
+            value: typeof entry.value === 'number' ? entry.value.toString() : entry.value
+        }));
+
+        await setYakklTokenCacheStorage(migratedCache, true);
+        log.info('[Migration] Migrated token cache data');
+    } catch (error) {
+        log.warn('[Migration] Failed to migrate token cache:', false, error);
+    }
+}
+
 export class UpgradeMigrationManager {
 	private static instance: UpgradeMigrationManager | null = null;
 
@@ -153,9 +230,10 @@ export class UpgradeMigrationManager {
 	 * Get migrations that need to run between two versions
 	 */
 	private getMigrationsToRun(fromVersion: string, toVersion: string): UpgradeMigration[] {
-		return this.migrations.filter(migration =>
-			this.isVersionNewer(migration.version, fromVersion) &&
-			!this.isVersionNewer(migration.version, toVersion)
+		return this.migrations.filter(
+			(migration) =>
+				this.isVersionNewer(migration.version, fromVersion) &&
+				!this.isVersionNewer(migration.version, toVersion)
 		);
 	}
 
@@ -176,7 +254,7 @@ export class UpgradeMigrationManager {
 
 				// Handle arrays
 				if (Array.isArray(data)) {
-					data = await Promise.all(data.map(item => migration.migrate(item, storageKey)));
+					data = await Promise.all(data.map((item) => migration.migrate(item, storageKey)));
 				} else {
 					data = await migration.migrate(data, storageKey);
 				}
@@ -337,7 +415,7 @@ export class UpgradeMigrationManager {
 	 */
 	addMigration(migration: UpgradeMigration): void {
 		// Insert in version order
-		const insertIndex = this.migrations.findIndex(m =>
+		const insertIndex = this.migrations.findIndex((m) =>
 			this.isVersionNewer(migration.version, m.version)
 		);
 
diff --git a/packages/yakkl-wallet/src/lib/utilities/accountData.ts b/packages/yakkl-wallet/src/lib/utilities/accountData.ts
index 8009959..66cb661 100644
--- a/packages/yakkl-wallet/src/lib/utilities/accountData.ts
+++ b/packages/yakkl-wallet/src/lib/utilities/accountData.ts
@@ -4,6 +4,7 @@ import { yakklPricingStore } from '$lib/common/stores';
 import { get } from 'svelte/store';
 import { balanceCacheManager } from '$lib/managers/BalanceCacheManager';
 import { log } from '$lib/managers/Logger';
+import type { BigNumberish } from '$lib/common/bignumber';
 
 export interface AccountData {
 	id?: string;
@@ -11,7 +12,7 @@ export interface AccountData {
 	account: YakklAccount;
 	quantity: bigint;
 	quantityFormatted: string;
-	totalValue: number;
+	totalValue: BigNumberish;
 	totalValueFormatted: string;
 	// Enhanced loading states
 	isLoading: boolean;
@@ -25,7 +26,7 @@ export interface CachedBalanceData {
 	address: string;
 	balance: bigint;
 	timestamp: number;
-	price: number;
+	price: BigNumberish;
 }
 
 // Helper function to determine if an error should be shown to the user
@@ -272,7 +273,7 @@ export function createAccountDataWithRestrictions(
 	restrictedAccounts: YakklAccount[];
 	isRestricted: boolean;
 } {
-	const isBasicMember = membershipLevel === 'basic_member';
+	const isBasicMember = membershipLevel === 'explorer_member';
 
 	if (!isBasicMember || accounts.length <= maxAccountsForBasic) {
 		return {
diff --git a/packages/yakkl-wallet/src/lib/utilities/balanceUtils.ts b/packages/yakkl-wallet/src/lib/utilities/balanceUtils.ts
index 15ba8a5..0d35717 100644
--- a/packages/yakkl-wallet/src/lib/utilities/balanceUtils.ts
+++ b/packages/yakkl-wallet/src/lib/utilities/balanceUtils.ts
@@ -4,6 +4,9 @@ import type { SwapToken } from '$lib/common/interfaces';
 import type { Provider } from '$managers/Provider';
 import type { TokenService } from '$lib/managers/blockchains/evm/TokenService';
 import { log } from '$lib/managers/Logger';
+import { get } from 'svelte/store';
+import { yakklPricingStore } from '$lib/common/stores';
+import { balanceCacheManager } from '$lib/managers/BalanceCacheManager';
 
 // Helper function to determine if an error should be shown to the user
 function shouldShowErrorToUser(error: any): boolean {
@@ -55,9 +58,6 @@ export async function getTokenBalance(
 			token.balance = retBal;
 
 			// Update cache with native token balance
-			const { balanceCacheManager } = await import('$lib/managers/BalanceCacheManager');
-			const { yakklPricingStore } = await import('$lib/common/stores');
-			const { get } = await import('svelte/store');
 			const currentPrice = get(yakklPricingStore)?.price;
 			if (currentPrice) {
 				balanceCacheManager.setCachedBalance(address, retBal, currentPrice);
diff --git a/packages/yakkl-wallet/src/lib/utilities/browserSvelte.ts b/packages/yakkl-wallet/src/lib/utilities/browserSvelte.ts
deleted file mode 100644
index 1c841bc..0000000
--- a/packages/yakkl-wallet/src/lib/utilities/browserSvelte.ts
+++ /dev/null
@@ -1,2 +0,0 @@
-export const browserSvelte = typeof window !== 'undefined';
-// deprecated - use common/environment.ts
diff --git a/packages/yakkl-wallet/src/lib/utilities/jwt-background.ts b/packages/yakkl-wallet/src/lib/utilities/jwt-background.ts
index a04372e..b6682f5 100644
--- a/packages/yakkl-wallet/src/lib/utilities/jwt-background.ts
+++ b/packages/yakkl-wallet/src/lib/utilities/jwt-background.ts
@@ -46,7 +46,7 @@ class BackgroundJWTManager {
 		userId: string,
 		username: string,
 		profileId: string,
-		planLevel: string = 'basic',
+		planLevel: string = 'explorer_member',
 		sessionId?: string,
 		expirationMinutes: number = 60
 	): Promise<string> {
@@ -176,6 +176,46 @@ class BackgroundJWTManager {
 		}
 	}
 
+	/**
+	 * Get current session information
+	 */
+	async getSessionInfo(): Promise<{
+		hasActiveSession: boolean;
+		sessionExpiresAt: number | null;
+		sessionId: string | null;
+		payload: JWTPayload | null;
+	}> {
+		try {
+			const stored = await this.getStoredToken();
+
+			if (!stored) {
+				return {
+					hasActiveSession: false,
+					sessionExpiresAt: null,
+					sessionId: null,
+					payload: null
+				};
+			}
+
+			const hasActiveSession = Date.now() < stored.expiresAt;
+
+			return {
+				hasActiveSession,
+				sessionExpiresAt: stored.expiresAt,
+				sessionId: stored.payload?.sessionId || null,
+				payload: stored.payload
+			};
+		} catch (error) {
+			console.error('Failed to get session info:', error);
+			return {
+				hasActiveSession: false,
+				sessionExpiresAt: null,
+				sessionId: null,
+				payload: null
+			};
+		}
+	}
+
 	/**
 	 * Check if token exists and is valid
 	 */
@@ -302,7 +342,7 @@ export async function createJWTForUser(
 	userId: string,
 	username: string,
 	profileId: string,
-	planLevel: string = 'basic',
+	planLevel: string = 'explorer_member',
 	sessionId?: string
 ): Promise<string> {
 	return await backgroundJWTManager.generateToken(
diff --git a/packages/yakkl-wallet/src/lib/utilities/jwt.ts b/packages/yakkl-wallet/src/lib/utilities/jwt.ts
index ec1a6a1..2ffb8fd 100644
--- a/packages/yakkl-wallet/src/lib/utilities/jwt.ts
+++ b/packages/yakkl-wallet/src/lib/utilities/jwt.ts
@@ -9,6 +9,7 @@
 import { log } from '$lib/common/logger-wrapper';
 import { backgroundJWTManager } from './jwt-background';
 import { browserSvelte } from '$lib/common/environment';
+import { getSettings } from '$lib/common/stores';
 
 export interface JWTPayload {
 	sub: string; // Subject (user ID)
@@ -49,7 +50,7 @@ export class JWTManager {
 		userId: string,
 		username: string,
 		profileId: string,
-		planLevel: string = 'basic',
+		planLevel: string = 'explorer_member',
 		expirationMinutes: number = 60
 	): Promise<string> {
 		try {
@@ -180,7 +181,7 @@ export class JWTManager {
 					payload.sub,
 					payload.username || '',
 					payload.profileId || '',
-					payload.planLevel || 'basic'
+					payload.planLevel || 'explorer_member'
 				);
 			}
 
@@ -236,7 +237,6 @@ export class JWTManager {
 		// For now, we'll generate a key based on the user's profile
 		if (browserSvelte) {
 			try {
-				const { getSettings } = await import('$lib/common/stores');
 				const settings = await getSettings();
 
 				// Create a signing key from user settings and current date (changes daily for security)
@@ -347,7 +347,7 @@ export class ContextAwareJWTManager {
 		userId: string,
 		username: string,
 		profileId: string,
-		planLevel: string = 'basic',
+		planLevel: string = 'explorer_member',
 		sessionId?: string,
 		expirationMinutes: number = 60
 	): Promise<string> {
@@ -422,7 +422,7 @@ export async function createJWTInBackground(
 	userId: string,
 	username: string,
 	profileId: string,
-	planLevel: string = 'basic',
+	planLevel: string = 'explorer_member',
 	sessionId?: string
 ): Promise<string> {
 	return await backgroundJWTManager.generateToken(
diff --git a/packages/yakkl-wallet/src/lib/utilities/utilities.ts b/packages/yakkl-wallet/src/lib/utilities/utilities.ts
index fd6f2d6..5ec5da7 100644
--- a/packages/yakkl-wallet/src/lib/utilities/utilities.ts
+++ b/packages/yakkl-wallet/src/lib/utilities/utilities.ts
@@ -21,6 +21,7 @@ import { ethers as ethersv6 } from 'ethers-v6';
 import { browserSvelte, browser_ext } from '$lib/common/environment';
 import { log } from '$lib/managers/Logger';
 import { UnifiedTimerManager } from '$lib/managers/UnifiedTimerManager';
+import { BigNumberishUtils } from '$lib/common/BigNumberishUtils';
 
 export function getTokenChange(changeArray: TokenChange[], timeline: string): number | null {
 	if (!changeArray) {
@@ -32,7 +33,7 @@ export function getTokenChange(changeArray: TokenChange[], timeline: string): nu
 	}
 
 	const foundChange = changeArray.find((change) => change.timeline === timeline);
-	return foundChange ? foundChange.percentChange : null;
+	return foundChange && foundChange.percentChange ? BigNumberishUtils.toNumber(foundChange.percentChange) : null;
 }
 
 export function calculateFeeAmount(tokenAmount: bigint, feeBasisPoints: number): bigint {
diff --git a/packages/yakkl-wallet/src/lib/utils/features.ts b/packages/yakkl-wallet/src/lib/utils/features.ts
index 5d59941..c0271be 100644
--- a/packages/yakkl-wallet/src/lib/utils/features.ts
+++ b/packages/yakkl-wallet/src/lib/utils/features.ts
@@ -3,12 +3,12 @@
  * Clean, efficient implementation with minimal dependencies
  */
 
-import { PlanType } from '../types';
+import { PlanType } from '../common';
 import { PLAN_FEATURES, type FeatureKey } from '../config/features';
 import { log } from './logger';
 
 class FeatureManager {
-  private currentPlan: PlanType = PlanType.Basic;
+  private currentPlan: PlanType = PlanType.EXPLORER_MEMBER;
   private enabledFeatures: Set<string> = new Set();
 
   constructor() {
@@ -52,22 +52,22 @@ class FeatureManager {
    */
   hasAccess(requiredPlan: PlanType): boolean {
     const planHierarchy = {
-      [PlanType.Basic]: 0,
-      [PlanType.Pro]: 2,
-      [PlanType.EarlyAdopter]: 2.5, // Higher than Pro, lower than Founding
-      [PlanType.FoundingMember]: 3, // Highest prestige Pro-level
-      [PlanType.Enterprise]: 4
+      [PlanType.EXPLORER_MEMBER]: 0,
+      [PlanType.YAKKL_PRO]: 2,
+      [PlanType.EARLY_ADOPTER]: 2.5, // Higher than Pro, lower than Founding
+      [PlanType.FOUNDING_MEMBER]: 3, // Highest prestige Pro-level
+      [PlanType.ENTERPRISE]: 4
     };
 
     const currentLevel = planHierarchy[this.currentPlan] ?? 0;
     const requiredLevel = planHierarchy[requiredPlan] ?? 0;
-    
+
     return currentLevel >= requiredLevel;
   }
 
   private updateFeatures() {
     this.enabledFeatures.clear();
-    
+
     // Get features for current plan
     const planFeatures = this.getPlanFeatures(this.currentPlan);
     planFeatures.forEach(feature => this.enabledFeatures.add(feature));
@@ -75,15 +75,15 @@ class FeatureManager {
 
   private getPlanFeatures(plan: PlanType): readonly string[] {
     switch (plan) {
-      case PlanType.Basic:
+      case PlanType.EXPLORER_MEMBER:
         return PLAN_FEATURES.BASIC;
-      case PlanType.FoundingMember:
+      case PlanType.FOUNDING_MEMBER:
         return PLAN_FEATURES.PRO; // Founding members get Pro features
-      case PlanType.EarlyAdopter:
+      case PlanType.EARLY_ADOPTER:
         return PLAN_FEATURES.PRO; // Early adopters get Pro features
-      case PlanType.Pro:
+      case PlanType.YAKKL_PRO:
         return PLAN_FEATURES.PRO;
-      case PlanType.Enterprise:
+      case PlanType.ENTERPRISE:
         return PLAN_FEATURES.ENTERPRISE;
       default:
         log.warn(`Unknown plan type: ${plan}, defaulting to Basic`);
@@ -96,48 +96,48 @@ class FeatureManager {
 export const featureManager = new FeatureManager();
 
 // Export convenience functions
-export const canUseFeature = (feature: string): boolean => 
+export const canUseFeature = (feature: string): boolean =>
   featureManager.canUse(feature);
 
-export const hasAccessToPlan = (plan: PlanType): boolean => 
+export const hasAccessToPlan = (plan: PlanType): boolean =>
   featureManager.hasAccess(plan);
 
-export const setUserPlan = (plan: PlanType): void => 
+export const setUserPlan = (plan: PlanType): void =>
   featureManager.setPlan(plan);
 
-export const getCurrentPlan = (): PlanType => 
+export const getCurrentPlan = (): PlanType =>
   featureManager.getCurrentPlan();
 
 // Plan display helpers
 export const getPlanBadgeText = (plan?: PlanType): string => {
   const currentPlan = plan || featureManager.getCurrentPlan();
   switch (currentPlan) {
-    case PlanType.FoundingMember:
+    case PlanType.FOUNDING_MEMBER:
       return 'FOUNDING / PRO';
-    case PlanType.EarlyAdopter:
+    case PlanType.EARLY_ADOPTER:
       return 'EARLY / PRO';
-    case PlanType.Pro:
+    case PlanType.YAKKL_PRO:
       return 'PRO';
-    case PlanType.Enterprise:
+    case PlanType.ENTERPRISE:
       return 'ENTERPRISE';
-    case PlanType.Basic:
+    case PlanType.EXPLORER_MEMBER:
     default:
-      return 'BASIC';
+      return 'EXPLORER';
   }
 };
 
 export const getPlanBadgeColor = (plan?: PlanType): string => {
   const currentPlan = plan || featureManager.getCurrentPlan();
   switch (currentPlan) {
-    case PlanType.FoundingMember:
+    case PlanType.FOUNDING_MEMBER:
       return 'oklch(71.97% 0.149 81.37 / 1)'; // Gold/yellow as specified
-    case PlanType.EarlyAdopter:
+    case PlanType.EARLY_ADOPTER:
       return 'oklch(71.97% 0.149 142.5 / 1)'; // Green with similar characteristics
-    case PlanType.Pro:
+    case PlanType.YAKKL_PRO:
       return 'oklch(71.97% 0.149 192.5 / 1)'; // Teal with similar characteristics
-    case PlanType.Enterprise:
+    case PlanType.ENTERPRISE:
       return 'oklch(71.97% 0.149 266.5 / 1)'; // Purple with similar characteristics
-    case PlanType.Basic:
+    case PlanType.EXPLORER_MEMBER:
     default:
       return 'oklch(71.97% 0.149 27.5 / 1)'; // Brown with similar characteristics
   }
@@ -146,15 +146,15 @@ export const getPlanBadgeColor = (plan?: PlanType): string => {
 export const getPlanGradientClass = (plan?: PlanType): string => {
   const currentPlan = plan || featureManager.getCurrentPlan();
   switch (currentPlan) {
-    case PlanType.FoundingMember:
+    case PlanType.FOUNDING_MEMBER:
       return 'from-yellow-500 to-amber-600';
-    case PlanType.EarlyAdopter:
+    case PlanType.EARLY_ADOPTER:
       return 'from-green-500 to-emerald-600';
-    case PlanType.Pro:
+    case PlanType.YAKKL_PRO:
       return 'from-teal-500 to-cyan-600';
-    case PlanType.Enterprise:
+    case PlanType.ENTERPRISE:
       return 'from-purple-500 to-indigo-600';
-    case PlanType.Basic:
+    case PlanType.EXPLORER_MEMBER:
     default:
       return 'from-stone-500 to-amber-700';
   }
diff --git a/packages/yakkl-wallet/src/lib/utils/migration.ts b/packages/yakkl-wallet/src/lib/utils/migration.ts
index 90af6a2..178dca7 100644
--- a/packages/yakkl-wallet/src/lib/utils/migration.ts
+++ b/packages/yakkl-wallet/src/lib/utils/migration.ts
@@ -1,6 +1,6 @@
 import type { YakklAccount, TokenData as Token } from '$lib/common/interfaces';
 import type { AccountDisplay, TokenDisplay, ChainDisplay } from '../types';
-import { PlanType } from '../config/features';
+import { PlanType } from '$lib/common/types';
 
 /**
  * Migration utilities to convert between old and new data formats
@@ -18,7 +18,7 @@ export class MigrationUtils {
       avatar: yakklAccount.avatar || null,
       isActive: true,
       balance: yakklAccount.quantity?.toString() || '0',
-      plan: PlanType.Basic // Default plan for existing users
+      plan: PlanType.EXPLORER_MEMBER // Default plan for existing users
     };
   }
 
@@ -124,7 +124,7 @@ export class MigrationUtils {
 
     return {
       success,
-      summary: success 
+      summary: success
         ? `Successfully migrated ${accountCount} accounts, ${tokenCount} tokens, and ${transactionCount} transactions.`
         : `Migration completed with ${errors.length} errors. Please review the details below.`,
       details: {
@@ -174,7 +174,7 @@ export class MigrationUtils {
       const originalValue = parseFloat(originalData.totalValue);
       const migratedValue = parseFloat(migratedData.totalValue);
       const difference = Math.abs(originalValue - migratedValue);
-      
+
       if (difference > originalValue * 0.01) { // 1% tolerance
         warnings.push('Significant portfolio value difference detected');
       }
@@ -276,12 +276,12 @@ export class MigrationUtils {
    */
   private static determinePlanType(legacySettings: any): PlanType {
     if (legacySettings.isProLevel || legacySettings.plan === 'pro') {
-      return PlanType.Pro;
+      return PlanType.YAKKL_PRO;
     }
     if (legacySettings.plan === 'enterprise') {
-      return PlanType.Enterprise;
+      return PlanType.ENTERPRISE;
     }
-    return PlanType.Basic;
+    return PlanType.EXPLORER_MEMBER;
   }
 
   /**
@@ -323,13 +323,13 @@ export class MigrationUtils {
   private static generateChecksum(data: any): string {
     const dataString = JSON.stringify(data);
     let hash = 0;
-    
+
     for (let i = 0; i < dataString.length; i++) {
       const char = dataString.charCodeAt(i);
       hash = ((hash << 5) - hash) + char;
       hash = hash & hash; // Convert to 32-bit integer
     }
-    
+
     return hash.toString(36);
   }
 }
@@ -385,4 +385,4 @@ export const MIGRATION_CHECKLIST = [
   'Hardware wallet connections working',
   'DApp connections still functional',
   'Backup and recovery phrases secure'
-];
\ No newline at end of file
+];
diff --git a/packages/yakkl-wallet/src/lib/utils/v1_utilities.ts b/packages/yakkl-wallet/src/lib/utils/v1_utilities.ts
index bf9896b..6360087 100644
--- a/packages/yakkl-wallet/src/lib/utils/v1_utilities.ts
+++ b/packages/yakkl-wallet/src/lib/utils/v1_utilities.ts
@@ -21,6 +21,7 @@ import { ethers as ethersv6 } from 'ethers-v6';
 import { browserSvelte, browser_ext } from '$lib/common/environment';
 import { log } from '$lib/managers/Logger';
 import { UnifiedTimerManager } from '$lib/managers/UnifiedTimerManager';
+import { BigNumberishUtils } from '$lib/common/BigNumberishUtils';
 
 export function getTokenChange(changeArray: TokenChange[], timeline: string): number | null {
 	if (!changeArray) {
@@ -32,7 +33,7 @@ export function getTokenChange(changeArray: TokenChange[], timeline: string): nu
 	}
 
 	const foundChange = changeArray.find((change) => change.timeline === timeline);
-	return foundChange ? foundChange.percentChange : null;
+	return foundChange && foundChange.percentChange ? BigNumberishUtils.toNumber(foundChange.percentChange) : null;
 }
 
 export function calculateFeeAmount(tokenAmount: bigint, feeBasisPoints: number): bigint {
diff --git a/packages/yakkl-wallet/src/routes/(dapp)/dapp/popups/accounts/+page.svelte b/packages/yakkl-wallet/src/routes/(dapp)/dapp/popups/accounts/+page.svelte
index 550fc0a..651658c 100644
--- a/packages/yakkl-wallet/src/routes/(dapp)/dapp/popups/accounts/+page.svelte
+++ b/packages/yakkl-wallet/src/routes/(dapp)/dapp/popups/accounts/+page.svelte
@@ -20,7 +20,7 @@
 		type YakklConnectedDomain,
 		type YakklCurrentlySelected
 	} from '$lib/common';
-	import type { Runtime } from 'webextension-polyfill';
+	import type { Runtime } from '$lib/types/browser-types';
 	import { dateString } from '$lib/common/datetime';
 	import { log } from '$lib/managers/Logger';
 	import Confirmation from '$lib/components/Confirmation.svelte';
diff --git a/packages/yakkl-wallet/src/routes/(dapp)/dapp/popups/approve/+page.svelte b/packages/yakkl-wallet/src/routes/(dapp)/dapp/popups/approve/+page.svelte
index c6decaf..2067add 100644
--- a/packages/yakkl-wallet/src/routes/(dapp)/dapp/popups/approve/+page.svelte
+++ b/packages/yakkl-wallet/src/routes/(dapp)/dapp/popups/approve/+page.svelte
@@ -13,7 +13,7 @@
 	import Copyright from '$lib/components/Copyright.svelte';
 	import Failed from '$lib/components/Failed.svelte';
 	import { log } from '$lib/common/logger-wrapper';
-	import type { Runtime } from 'webextension-polyfill';
+	import type { Runtime } from '$lib/types/browser-types';
 	import Warning from '$lib/components/Warning.svelte';
 	import Confirmation from '$lib/components/Confirmation.svelte';
 	import { createPortManagerWithStream } from '$lib/managers/PortManagerWithStream';
diff --git a/packages/yakkl-wallet/src/routes/(dapp)/dapp/popups/permissions/+page.svelte b/packages/yakkl-wallet/src/routes/(dapp)/dapp/popups/permissions/+page.svelte
index b90ccc1..21848da 100644
--- a/packages/yakkl-wallet/src/routes/(dapp)/dapp/popups/permissions/+page.svelte
+++ b/packages/yakkl-wallet/src/routes/(dapp)/dapp/popups/permissions/+page.svelte
@@ -11,7 +11,7 @@
 	import { DEFAULT_TITLE, YAKKL_DAPP } from '$lib/common/constants';
 	import { onMount } from 'svelte';
 	import { log } from '$lib/common/logger-wrapper';
-	import type { Runtime } from 'webextension-polyfill';
+	import type { Runtime } from '$lib/types/browser-types';
 	import type { JsonRpcResponse, SessionInfo } from '$lib/common/interfaces';
 	import type { BackgroundPendingRequest } from '$lib/extensions/chrome/background';
 	import Confirmation from '$lib/components/Confirmation.svelte';
diff --git a/packages/yakkl-wallet/src/routes/(dapp)/dapp/popups/sign/+page.svelte b/packages/yakkl-wallet/src/routes/(dapp)/dapp/popups/sign/+page.svelte
index 837239f..c676ecb 100644
--- a/packages/yakkl-wallet/src/routes/(dapp)/dapp/popups/sign/+page.svelte
+++ b/packages/yakkl-wallet/src/routes/(dapp)/dapp/popups/sign/+page.svelte
@@ -22,7 +22,7 @@
 	} from '$lib/common/constants';
 	import { onMount } from 'svelte';
 	import { log } from '$lib/common/logger-wrapper';
-	import type { Runtime } from 'webextension-polyfill';
+	import type { Runtime } from '$lib/types/browser-types';
 	import type { JsonRpcResponse, SessionInfo } from '$lib/common/interfaces';
 	import type { BackgroundPendingRequest } from '$lib/extensions/chrome/background';
 	import Confirmation from '$lib/components/Confirmation.svelte';
diff --git a/packages/yakkl-wallet/src/routes/(dapp)/dapp/popups/wallet/+page.svelte b/packages/yakkl-wallet/src/routes/(dapp)/dapp/popups/wallet/+page.svelte
index f0219b4..bb8bf8c 100644
--- a/packages/yakkl-wallet/src/routes/(dapp)/dapp/popups/wallet/+page.svelte
+++ b/packages/yakkl-wallet/src/routes/(dapp)/dapp/popups/wallet/+page.svelte
@@ -11,7 +11,7 @@
 	import { DEFAULT_TITLE, YAKKL_DAPP } from '$lib/common/constants';
 	import { onMount } from 'svelte';
 	import { log } from '$managers/Logger';
-	import type { Runtime } from 'webextension-polyfill';
+	import type { Runtime } from '$lib/types/browser-types';
 	import type { JsonRpcResponse, SessionInfo } from '$lib/common/interfaces';
 	import type { BackgroundPendingRequest } from '$lib/extensions/chrome/background';
 	import Confirmation from '$lib/components/Confirmation.svelte';
@@ -25,6 +25,7 @@
 	import type { PortDuplexStream } from '$lib/managers/PortStreamManager';
 	import { sessionToken, verifySessionToken } from '$lib/common/auth/session';
 	import { safeLogout } from '$lib/common/safeNavigate';
+	import { UnifiedTimerManager } from '$lib/managers/UnifiedTimerManager';
 
 	// NOTE: This is not as large of security risk as the network form, but we should still be mindful of it.
 	// NOTE: We should also consider adding a warning to the user about the risks of signing messages.
@@ -239,7 +240,6 @@
 				// Write to stream and add a small delay to ensure the write completes
 				stream.write(jsonRpcResponse);
 				await new Promise(async (resolve) => {
-					const { UnifiedTimerManager } = await import('$lib/managers/UnifiedTimerManager');
 					const timerManager = UnifiedTimerManager.getInstance();
 					timerManager.addTimeout('wallet-popup-delay', () => resolve(undefined), 100);
 					timerManager.startTimeout('wallet-popup-delay');
diff --git a/packages/yakkl-wallet/src/routes/(dapp)/dapp/walletConnect/+page.svelte b/packages/yakkl-wallet/src/routes/(dapp)/dapp/walletConnect/+page.svelte
index d507ca7..0915514 100644
--- a/packages/yakkl-wallet/src/routes/(dapp)/dapp/walletConnect/+page.svelte
+++ b/packages/yakkl-wallet/src/routes/(dapp)/dapp/walletConnect/+page.svelte
@@ -10,7 +10,7 @@
 	import { PATH_LOGIN, YAKKL_DAPP, PATH_DAPP_ACCOUNTS } from '$lib/common/constants';
 	import { onMount, onDestroy } from 'svelte';
 
-	import type { Runtime } from 'webextension-polyfill';
+	import type { Runtime } from '$lib/types/browser-types';
 	import type { Settings } from '$lib/common';
 
 	type RuntimePort = Runtime.Port | undefined;
diff --git a/packages/yakkl-wallet/src/routes/(sidepanel)/sidepanel/sidepanel/+page.svelte b/packages/yakkl-wallet/src/routes/(sidepanel)/sidepanel/sidepanel/+page.svelte
index 77ee813..ece6d1e 100644
--- a/packages/yakkl-wallet/src/routes/(sidepanel)/sidepanel/sidepanel/+page.svelte
+++ b/packages/yakkl-wallet/src/routes/(sidepanel)/sidepanel/sidepanel/+page.svelte
@@ -1,7 +1,7 @@
 <!-- File: src/routes/sidepanel/+page.svelte -->
 <script lang="ts">
 	import TokenComponentList from '$lib/components/TokenComponentList.svelte';
-	import RotatingBanner from '$lib/components/RotatingBanner.svelte';
+	// import RotatingBanner from '$lib/components/RotatingBanner.svelte';
 	import { browser_ext, browserSvelte } from '$lib/common/environment';
 	import WalletIcon from '$lib/components/icons/WalletIcon.svelte';
 	import TokenIcon from '$lib/components/icons/TokenIcon.svelte';
@@ -53,16 +53,20 @@
 	let tokensLockedCount = $state(0); // Show all tokens for both Basic and Pro
 	let newsfeedsLockedCount = $state(6);
 	let maxVisibleTokens = $state(0); // Show all tokens initially
-	let showBanner = $state(true);
+	// let showBanner = $state(true);
 	let showNewsfeeds = $state(false);
 	let showDynamicNewsfeeds = $state(false);
 	let showLegalTerms = $state(false);
 	let isAgreed = $state(false);
-	let planType = $state('Pro (Trial)');
+	let planType = $state('yakkl_pro (Trial)');
 	let trialEnds = $state('2025-07-01');
 
 	// List of crypto news RSS feeds
 	const cryptoFeeds = [
+    'https://www.ft.com/cryptofinance?format=rss/?utm_source=yakkl&utm_medium=extension',
+    'https://seekingalpha.com/feeds/cryptocompare/cryptos/?utm_source=yakkl&utm_medium=extension',
+    'https://finbold.com/category/cryptocurrency-news/feed/?utm_source=yakkl&utm_medium=extension',
+    'https://blog.kraken.com/feed/?utm_source=yakkl&utm_medium=extension',
 		'https://cointelegraph.com/rss/?utm_source=yakkl&utm_medium=extension',
 		'https://cryptonews.com/news/feed/?utm_source=yakkl&utm_medium=extension',
 		'https://decrypt.co/feed/?utm_source=yakkl&utm_medium=extension',
@@ -75,7 +79,7 @@
 	];
 
 	// WebSocket URL for dynamic feed
-	const wsFeedUrl = 'wss://your-websocket-server.com/feed';
+	const wsFeedUrl = '';
 
 	function openWallet() {
 		if (browserSvelte) {
@@ -238,7 +242,7 @@
 				locked = (await isProLevel()) ? false : true;
 				tokensLockedCount = 0; // Show all tokens for both Basic and Pro
 				newsfeedsLockedCount = (await isProLevel()) ? 10 : 4;
-				planType = (await isProLevel()) ? 'Pro' : 'Basic';
+				planType = (await isProLevel()) ? 'yakkl_pro' : 'explorer_member';
 				trialEnds = settings.plan.trialEndDate || null;
 			}
 
@@ -290,7 +294,7 @@
 				locked = (await isProLevel()) ? false : true;
 				tokensLockedCount = 0; // Show all tokens for both Basic and Pro
 				newsfeedsLockedCount = (await isProLevel()) ? 10 : 4;
-				planType = (await isProLevel()) ? 'Pro' : 'Basic';
+				planType = (await isProLevel()) ? 'yakkl_pro' : 'explorer_member';
 				trialEnds = settings.plan.trialEndDate || null;
 
 				// Load default tokens and update stores
@@ -388,7 +392,9 @@
 	>
 		<div class="flex items-center gap-3">
 			<img src="/images/logoBullFav128x128.png" alt="YAKKL" class="w-8 h-8" />
-			<h1 class="text-xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent">YAKKL Insights</h1>
+			<h1 class="text-xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent">
+        Alpha Insights
+      </h1>
 		</div>
 		<!-- Wallet Integration -->
 		<SimpleTooltip content="Click here to unlock your wallet" position="bottom">
@@ -408,12 +414,12 @@
 		{/if}
 	</header>
 
-	<RotatingBanner
+	<!-- <RotatingBanner
 		bind:show={showBanner}
 		items={bannerItems}
 		autoRotate={false}
 		showControls={false}
-	/>
+	/> -->
 
 	<div class="flex justify-end px-4 py-2">
 		<PlanBadge planType={planType} trialEnds={trialEnds} />
diff --git a/packages/yakkl-wallet/src/routes/(splash)/popup/+page.svelte b/packages/yakkl-wallet/src/routes/(splash)/popup/+page.svelte
index 6966823..ee57609 100644
--- a/packages/yakkl-wallet/src/routes/(splash)/popup/+page.svelte
+++ b/packages/yakkl-wallet/src/routes/(splash)/popup/+page.svelte
@@ -5,7 +5,7 @@
   import { YAKKL_SPLASH, NUM_OF_SPLASH_IMAGES } from '$lib/common/constants';
   import { wait } from '$lib/common/utils';
   import { log } from '$lib/common/logger-wrapper';
-  import type { Runtime } from 'webextension-polyfill';
+  import type { Runtime } from '$lib/types/browser-types';
 
   type RuntimePort = Runtime.Port;
 
@@ -142,7 +142,7 @@
 	import { YAKKL_SPLASH, NUM_OF_SPLASH_IMAGES } from '$lib/common/constants';
 	import { wait } from '$lib/common/utils';
 	import { log } from '$lib/common/logger-wrapper';
-	import type { Runtime } from 'webextension-polyfill';
+	import type { Runtime } from '$lib/types/browser-types';
 
 	type RuntimePort = Runtime.Port;
 
@@ -231,7 +231,7 @@
 
   // Splash size should be maximum default browser extension size.
   // Note: May want to look into providing a communications window for the user to see what is going on if we need to provide them with an important message.
-  import type { Runtime } from 'webextension-polyfill';
+  import type { Runtime } from '$lib/types/browser-types';
 
   type RuntimePort = Runtime.Port;
 
diff --git a/packages/yakkl-wallet/src/routes/(splash)/popup/popup/+page.svelte b/packages/yakkl-wallet/src/routes/(splash)/popup/popup/+page.svelte
index 6d59c17..4957368 100644
--- a/packages/yakkl-wallet/src/routes/(splash)/popup/popup/+page.svelte
+++ b/packages/yakkl-wallet/src/routes/(splash)/popup/popup/+page.svelte
@@ -4,7 +4,7 @@
 	import { YAKKL_SPLASH, NUM_OF_SPLASH_IMAGES } from '$lib/common/constants';
 	import { wait } from '$lib/common/utils';
 	import { log } from '$lib/common/logger-wrapper';
-	import type { Runtime } from 'webextension-polyfill';
+	import type { Runtime } from '$lib/types/browser-types';
 
 	type RuntimePort = Runtime.Port;
 
diff --git a/packages/yakkl-wallet/src/routes/(test)/test-registration-prompt/+page.svelte b/packages/yakkl-wallet/src/routes/(test)/test-registration-prompt/+page.svelte
deleted file mode 100644
index 4ef7402..0000000
--- a/packages/yakkl-wallet/src/routes/(test)/test-registration-prompt/+page.svelte
+++ /dev/null
@@ -1,61 +0,0 @@
-<script lang="ts">
-	import RegistrationPrompt from '$lib/components/RegistrationPrompt.svelte';
-	import { checkRegistrationStatus, isUserLoggedIn } from '$lib/common/auth-utils';
-	import { getSettings, getMiscStore } from '$lib/common/stores';
-
-	let showRegistrationPrompt = $state(false);
-	let registrationStatus = $state<any>(null);
-	let settings = $state<any>(null);
-	let isLoggedIn = $state(false);
-
-	async function testRegistrationCheck() {
-		registrationStatus = await checkRegistrationStatus();
-		settings = await getSettings();
-		isLoggedIn = isUserLoggedIn(getMiscStore());
-	}
-
-	function openWallet() {
-		console.log('Opening wallet...');
-		alert('openWallet function called');
-	}
-</script>
-
-<div class="p-8">
-	<h1 class="text-2xl font-bold mb-4">Registration Prompt Test</h1>
-
-	<div class="space-y-4">
-		<button
-			onclick={() => (showRegistrationPrompt = true)}
-			class="px-4 py-2 bg-blue-600 text-white rounded"
-		>
-			Show Registration Prompt (Sidepanel)
-		</button>
-
-		<button onclick={testRegistrationCheck} class="px-4 py-2 bg-green-600 text-white rounded">
-			Check Registration Status
-		</button>
-
-		{#if registrationStatus}
-			<div class="p-4 bg-gray-100 rounded">
-				<h2 class="font-bold">Registration Status:</h2>
-				<pre>{JSON.stringify(registrationStatus, null, 2)}</pre>
-			</div>
-		{/if}
-
-		{#if settings}
-			<div class="p-4 bg-gray-100 rounded">
-				<h2 class="font-bold">Settings:</h2>
-				<p>init: {settings.init}</p>
-				<p>termsAgreed: {settings.legal?.termsAgreed}</p>
-				<p>isLoggedIn: {isLoggedIn}</p>
-			</div>
-		{/if}
-	</div>
-
-	<RegistrationPrompt
-		bind:show={showRegistrationPrompt}
-		context="sidepanel"
-		{openWallet}
-		onCancel={() => console.log('Cancelled')}
-	/>
-</div>
diff --git a/packages/yakkl-wallet/src/routes/(wallet)/+layout.svelte b/packages/yakkl-wallet/src/routes/(wallet)/+layout.svelte
index 20d3d30..fc57d6f 100644
--- a/packages/yakkl-wallet/src/routes/(wallet)/+layout.svelte
+++ b/packages/yakkl-wallet/src/routes/(wallet)/+layout.svelte
@@ -10,6 +10,7 @@
   import Profile from '$lib/components/Profile.svelte';
   import ConfirmLogout from '$lib/components/ConfirmLogout.svelte';
   import SessionWarning from '$lib/components/SessionWarning.svelte';
+  import JWTValidationModalProvider from '$lib/components/JWTValidationModalProvider.svelte';
   import EmergencyKit from '$lib/components/EmergencyKit.svelte';
   import ManageAccounts from '$lib/components/ManageAccounts.svelte';
   import NetworkMismatchModal from '$lib/components/NetworkMismatchModal.svelte';
@@ -19,15 +20,16 @@
   import { planStore } from '$lib/stores/plan.store';
   import { canUseFeature } from '$lib/stores/plan.store';
   import { modalStore, isModalOpen } from '$lib/stores/modal.store';
-  import { transactionStore } from '$lib/stores/transaction.store';
   import { sessionManager } from '$lib/managers/SessionManager';
-  import { getYakklAccounts, getProfile, syncStorageToStore } from '$lib/common/stores';
+  import { getYakklAccounts, getProfile, syncStorageToStore, getMiscStore } from '$lib/common/stores';
   import type { ChainDisplay } from '$lib/types';
   import { setupConsoleFilters } from '$lib/utils/console-filter';
   import { lockWallet } from '$lib/common/lockWallet';
   import { validateAndRefreshAuth } from '$lib/common/authValidation';
   import { messagingService } from '$lib/common/messaging';
 	import { goto } from '$app/navigation';
+	import { decryptData, isEncryptedData, type ProfileData } from '$lib/common';
+	import { log } from '$lib/common/logger-wrapper';
 
   interface Props {
     children?: import('svelte').Snippet;
@@ -56,7 +58,6 @@
 
   // Initialize stores on mount
 
-
   onMount(async () => {
     // Don't block UI - let components handle their own loading
     initializing = true;
@@ -77,52 +78,58 @@
 
         if (authResult) {
           // User is authenticated, sync all stores from persistent storage
-          console.log('Layout: User authenticated, syncing stores from persistent storage...');
+          log.info('Layout: User authenticated, syncing stores from persistent storage...');
           await syncStorageToStore();
-          console.log('Layout: Stores synchronized');
+          log.info('Layout: Stores synchronized');
+
+          // May remove this later
+          // Load wallet data in parallel with timeout
+          await Promise.race([
+            Promise.all([
+              accountStore.loadAccounts(),
+              chainStore.loadChains(),
+              planStore.loadPlan()
+            ]),
+            new Promise((_, reject) =>
+              setTimeout(() => reject(new Error('Store loading timeout')), 3000)
+            )
+          ]);
+
         } else {
-          console.log('Layout: User not authenticated, skipping store sync');
+          log.info('Layout: User not authenticated, skipping store sync');
         }
 
-        // Load wallet data in parallel with timeout
-        await Promise.race([
-          Promise.all([
-            accountStore.loadAccounts(),
-            chainStore.loadChains(),
-            planStore.loadPlan()
-          ]),
-          new Promise((_, reject) =>
-            setTimeout(() => reject(new Error('Store loading timeout')), 3000)
-          )
-        ]);
-
         // Initialize session if authenticated
         if (authResult) {
           const profile = await getProfile();
+          const miscStore = getMiscStore();
           if (profile && profile.data) {
-            const profileData = profile.data as any;
-            // Start session with JWT
-            await sessionManager.startSession(
-              profile.id,
-              profileData.username || 'user',
-              profile.id,
-              profileData.planType || 'basic'
-            );
-
-            // Load testnet preference from user profile
-            if (profile.preferences?.showTestNetworks) {
-              showTestnets = true;
-              // Update the chain store to show testnets
-              chainStore.setShowTestnets(true);
+            if (isEncryptedData(profile.data)) {
+              const profileData = await decryptData(profile.data, miscStore) as ProfileData;
+
+              // Start session with JWT
+              await sessionManager.startSession(
+                profile.id,
+                profile.username || 'user',
+                profile.id,
+                profileData.planType || 'explorer_member'
+              );
+
+              // Load testnet preference from user profile
+              if (profile.preferences?.showTestNetworks) {
+                showTestnets = true;
+                // Update the chain store to show testnets
+                chainStore.setShowTestnets(true);
+              }
             }
           }
 
           // Transaction monitoring is now handled in background context
           // No need to start it here as it runs independently
-          console.log('Layout: Transaction monitoring handled by background context');
+          log.info('Layout: Transaction monitoring handled by background context');
         }
       } catch (error) {
-        console.error('Layout: Error initializing stores:', error);
+        log.warn('Layout: Error initializing stores:', error);
       } finally {
         initializing = false;
       }
@@ -172,7 +179,7 @@
     try {
       // TODO: Implement account creation for the specific network
       // For now, just close the modal
-      console.log('Creating account for network:', pendingChain);
+      log.info('Creating account for network:', false, pendingChain);
 
       // After account creation, switch to the network
       await chainStore.switchChain(pendingChain.chainId);
@@ -180,7 +187,7 @@
       showNetworkMismatch = false;
       pendingChain = null;
     } catch (error) {
-      console.error('Failed to create account:', error);
+      log.warn('Failed to create account:', false, error);
     }
   }
 
@@ -252,20 +259,20 @@
       // Lock the wallet using centralized function
       await lockWallet('user-logout');
 
-      console.log('V2: Logout completed successfully');
+      log.info('V2: Logout completed successfully');
 
       // Send logout message to background to handle all windows
       try {
         await messagingService.sendMessage('logout', { reason: 'user-logout' });
       } catch (error) {
-        console.error('Failed to send logout message to background', error);
+        log.warn('Failed to send logout message to background', error);
       }
 
       // Navigate to logout page to handle proper cleanup
       await goto('/logout');
 
     } catch (error) {
-      console.error('V2: Logout failed:', error);
+      log.warn('V2: Logout failed:', error);
       // Try to navigate to logout page anyway
       try {
         await goto('/logout');
@@ -306,6 +313,11 @@
     <SessionWarning />
   {/if}
 
+  <!-- JWT Validation Modal -->
+  {#if isAuthenticated}
+    <JWTValidationModalProvider />
+  {/if}
+
   <!-- Network Mismatch Modal -->
   {#if pendingChain}
     <NetworkMismatchModal
diff --git a/packages/yakkl-wallet/src/routes/(wallet)/+layout.ts b/packages/yakkl-wallet/src/routes/(wallet)/+layout.ts
index d43d0cd..ceccaaf 100644
--- a/packages/yakkl-wallet/src/routes/(wallet)/+layout.ts
+++ b/packages/yakkl-wallet/src/routes/(wallet)/+layout.ts
@@ -1 +1,2 @@
-export const prerender = false;
+export const prerender = true;
+export const ssr = false;
diff --git a/packages/yakkl-wallet/src/routes/(wallet)/+page.svelte b/packages/yakkl-wallet/src/routes/(wallet)/+page.svelte
index 8434901..2a1cb6d 100644
--- a/packages/yakkl-wallet/src/routes/(wallet)/+page.svelte
+++ b/packages/yakkl-wallet/src/routes/(wallet)/+page.svelte
@@ -4,6 +4,7 @@
   import { uiStore } from '$lib/stores/ui.store';
   import { validateAuthentication, auditAuthEvent } from '$lib/common/authValidation';
   import { PATH_REGISTER, PATH_LEGAL, PATH_LOGIN } from '$lib/common/constants';
+	import { log } from '$lib/common/logger-wrapper';
 
   onMount(async () => {
     // Show loading state
@@ -13,7 +14,7 @@
       // Perform comprehensive authentication validation
       const validation = await validateAuthentication();
 
-      console.log('/(wallet)/+page.svelte: auth validation result:', {
+      log.info('/(wallet)/+page.svelte: auth validation result:', {
         isValid: validation.isValid,
         reason: validation.reason,
         hasValidSession: validation.hasValidSession,
@@ -25,12 +26,12 @@
         switch (validation.reason) {
           case 'Wallet not initialized':
             await auditAuthEvent('validation_failed', { reason: 'not_initialized' });
-            console.log('Redirecting to register...');
+            log.info('Redirecting to register...');
             return await goto(PATH_REGISTER);
 
           case 'Legal terms not accepted':
             await auditAuthEvent('validation_failed', { reason: 'legal_terms' });
-            console.log('Redirecting to legal terms...');
+            log.info('Redirecting to legal terms...');
             return await goto(PATH_LEGAL);
 
           case 'Wallet is locked':
@@ -40,19 +41,19 @@
           case 'Profile decryption failed':
           case 'Session expired due to inactivity':
             await auditAuthEvent('validation_failed', { reason: validation.reason });
-            console.log('Redirecting to login...', validation.reason);
+            log.info('Redirecting to login...', validation.reason);
             return await goto(PATH_LOGIN);
 
           default:
             await auditAuthEvent('validation_failed', { reason: validation.reason || 'unknown' });
-            console.error('Authentication validation failed:', validation.reason);
+            log.error('Authentication validation failed:', false, validation.reason);
             return await goto(PATH_LOGIN);
         }
       }
 
       // Authentication is valid - redirect to home page
       await auditAuthEvent('navigation', { from: '/', to: '/home' });
-      console.log('User authenticated, redirecting to home...');
+      log.info('User authenticated, redirecting to home...');
 
       // Check if we're in an extension popup context
       // We can detect this by checking if we're running in an extension URL
@@ -64,7 +65,7 @@
       await goto('/home', { replaceState: true });
 
     } catch (error) {
-      console.error('Authentication check failed:', error);
+      log.error('Authentication check failed:', error);
       uiStore.showError(
         'Authentication Error',
         'Unable to verify authentication status. Please try again.'
diff --git a/packages/yakkl-wallet/src/routes/(wallet)/+page.ts b/packages/yakkl-wallet/src/routes/(wallet)/+page.ts
deleted file mode 100644
index dbf4e8f..0000000
--- a/packages/yakkl-wallet/src/routes/(wallet)/+page.ts
+++ /dev/null
@@ -1 +0,0 @@
-export const prerender = false;
\ No newline at end of file
diff --git a/packages/yakkl-wallet/src/routes/(wallet)/accounts/+page.svelte b/packages/yakkl-wallet/src/routes/(wallet)/accounts/+page.svelte
index f14d5e8..9091d92 100644
--- a/packages/yakkl-wallet/src/routes/(wallet)/accounts/+page.svelte
+++ b/packages/yakkl-wallet/src/routes/(wallet)/accounts/+page.svelte
@@ -4,6 +4,7 @@
   import { accounts as accountsStore, currentAccount, accountStore } from '$lib/stores';
   import { Copy, Plus, Download, Upload, MoreVertical } from 'lucide-svelte';
   import { get } from 'svelte/store';
+  import { BigNumberishUtils } from '$lib/common/BigNumberishUtils';
 
   let accountsList = $derived($accountsStore);
   let selectedAccount = $derived($currentAccount);
@@ -56,7 +57,7 @@
   function getAccountColor(account: any): string {
     // Ensure tags is an array before using includes
     const tags = Array.isArray(account.tags) ? account.tags : [];
-    
+
     // Color coding based on account type
     if (account.accountType === 'imported' || tags.includes('imported')) {
       return 'from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 border-green-200 dark:border-green-800';
@@ -72,7 +73,7 @@
   function getAccountTypeLabel(account: any): string {
     // Ensure tags is an array before using includes
     const tags = Array.isArray(account.tags) ? account.tags : [];
-    
+
     if (account.accountType === 'imported' || tags.includes('imported')) {
       return 'Imported';
     } else if (account.accountType === 'primary' || tags.includes('primary') || account.isPrimary) {
@@ -86,7 +87,7 @@
   function getAccountIcon(account: any): string {
     // Ensure tags is an array before using includes
     const tags = Array.isArray(account.tags) ? account.tags : [];
-    
+
     if (account.accountType === 'imported' || tags.includes('imported')) {
       return '';
     } else if (account.accountType === 'primary' || tags.includes('primary') || account.isPrimary) {
@@ -109,7 +110,7 @@
 
   async function handleRemove(account: any) {
     showMenu = null;
-    
+
     // Don't allow removing the current account
     if (account.address === selectedAccount?.address) {
       alert('Cannot remove the current account. Please switch to another account first.');
@@ -198,7 +199,7 @@
                       </div>
                       {#if account.balance || account.value}
                         <div class="text-xs text-gray-500 dark:text-gray-400 mt-1">
-                          Balance: ${account.value?.toFixed(2) || '0.00'}
+                          Balance: ${account.value ? BigNumberishUtils.toNumber(account.value).toFixed(2) : '0.00'}
                         </div>
                       {/if}
                     </div>
diff --git a/packages/yakkl-wallet/src/routes/(wallet)/accounts/+page.ts b/packages/yakkl-wallet/src/routes/(wallet)/accounts/+page.ts
deleted file mode 100644
index dbf4e8f..0000000
--- a/packages/yakkl-wallet/src/routes/(wallet)/accounts/+page.ts
+++ /dev/null
@@ -1 +0,0 @@
-export const prerender = false;
\ No newline at end of file
diff --git a/packages/yakkl-wallet/src/routes/(wallet)/accounts/create-new/+page.ts b/packages/yakkl-wallet/src/routes/(wallet)/accounts/create-new/+page.ts
deleted file mode 100644
index dbf4e8f..0000000
--- a/packages/yakkl-wallet/src/routes/(wallet)/accounts/create-new/+page.ts
+++ /dev/null
@@ -1 +0,0 @@
-export const prerender = false;
\ No newline at end of file
diff --git a/packages/yakkl-wallet/src/routes/(wallet)/accounts/create/+page.svelte b/packages/yakkl-wallet/src/routes/(wallet)/accounts/create/+page.svelte
index 98e3979..e17f795 100644
--- a/packages/yakkl-wallet/src/routes/(wallet)/accounts/create/+page.svelte
+++ b/packages/yakkl-wallet/src/routes/(wallet)/accounts/create/+page.svelte
@@ -137,7 +137,7 @@
           id: profile?.id || '',
           key: '', // License key if any
           plan: {
-            type: PlanType.BASIC_MEMBER,
+            type: PlanType.EXPLORER_MEMBER,
             source: AccessSourceType.STANDARD,
             promo: PromoClassificationType.NONE,
             trialEndDate: '',
diff --git a/packages/yakkl-wallet/src/routes/(wallet)/accounts/create/+page.ts b/packages/yakkl-wallet/src/routes/(wallet)/accounts/create/+page.ts
deleted file mode 100644
index dbf4e8f..0000000
--- a/packages/yakkl-wallet/src/routes/(wallet)/accounts/create/+page.ts
+++ /dev/null
@@ -1 +0,0 @@
-export const prerender = false;
\ No newline at end of file
diff --git a/packages/yakkl-wallet/src/routes/(wallet)/accounts/export/+page.svelte b/packages/yakkl-wallet/src/routes/(wallet)/accounts/export/+page.svelte
index 781661b..a55e28f 100644
--- a/packages/yakkl-wallet/src/routes/(wallet)/accounts/export/+page.svelte
+++ b/packages/yakkl-wallet/src/routes/(wallet)/accounts/export/+page.svelte
@@ -1,15 +1,15 @@
 <script lang="ts">
   import { onMount } from 'svelte';
   import { goto } from '$app/navigation';
-  import ExportPrivateKey from '$lib/components/v1/ExportPrivateKey.svelte';
+  import ExportPrivateKey from '$lib/components/ExportPrivateKey.svelte';
   import { ChevronLeft, Key, Download, AlertTriangle } from 'lucide-svelte';
   import { sessionManager } from '$lib/managers/SessionManager';
   import { currentAccount } from '$lib/stores/account.store';
-  
+
   let pageReady = $state(false);
   let showExportModal = $state(false);
   let account = $derived($currentAccount);
-  
+
   // Check authentication on mount
   onMount(async () => {
     // Check if user is authenticated
@@ -21,21 +21,21 @@
     }
     pageReady = true;
   });
-  
+
   function handleBack() {
     // Go back to accounts page
     goto('/accounts');
   }
-  
+
   function handleExportPrivateKey() {
     showExportModal = true;
   }
-  
+
   function handleExportSeedPhrase() {
     // TODO: Implement seed phrase export
     alert('Seed phrase export coming soon. Only account owners can export the master seed phrase.');
   }
-  
+
   function handleExportSuccess() {
     // Return to accounts page after successful export
     goto('/accounts');
@@ -52,9 +52,9 @@
       <ChevronLeft class="w-5 h-5" />
       Back
     </button>
-    
+
     <h1 class="text-2xl font-bold mb-6 text-gray-900 dark:text-gray-100">Export Account</h1>
-    
+
     {#if account}
       <div class="mb-6 p-4 bg-white dark:bg-gray-800 rounded-lg shadow">
         <div class="text-sm text-gray-600 dark:text-gray-400">Current Account</div>
@@ -64,7 +64,7 @@
         </div>
       </div>
     {/if}
-    
+
     <div class="space-y-4">
       <button
         onclick={handleExportPrivateKey}
@@ -78,7 +78,7 @@
           <p class="text-sm text-gray-600 dark:text-gray-400">Export the private key for this account</p>
         </div>
       </button>
-      
+
       <button
         onclick={handleExportSeedPhrase}
         class="w-full p-4 bg-white dark:bg-gray-800 rounded-lg shadow hover:shadow-lg transition-all flex items-center gap-4 text-left group opacity-50 cursor-not-allowed"
@@ -93,13 +93,13 @@
         </div>
       </button>
     </div>
-    
+
     <div class="mt-8 p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800">
       <div class="flex gap-3">
         <AlertTriangle class="w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5" />
         <div class="text-sm text-red-800 dark:text-red-200">
-          <strong>Security Warning:</strong> Never share your private key or seed phrase with anyone. 
-          Anyone with access to these can steal all your funds. Only export if you need to import 
+          <strong>Security Warning:</strong> Never share your private key or seed phrase with anyone.
+          Anyone with access to these can steal all your funds. Only export if you need to import
           your account into another wallet. Store exports in a secure location.
         </div>
       </div>
@@ -110,10 +110,10 @@
 
 <!-- Export Modal -->
 {#if showExportModal}
-  <ExportPrivateKey 
+  <ExportPrivateKey
     bind:show={showExportModal}
     onVerify={() => {
       // Modal handles its own success
     }}
   />
-{/if}
\ No newline at end of file
+{/if}
diff --git a/packages/yakkl-wallet/src/routes/(wallet)/accounts/export/+page.ts b/packages/yakkl-wallet/src/routes/(wallet)/accounts/export/+page.ts
deleted file mode 100644
index dbf4e8f..0000000
--- a/packages/yakkl-wallet/src/routes/(wallet)/accounts/export/+page.ts
+++ /dev/null
@@ -1 +0,0 @@
-export const prerender = false;
\ No newline at end of file
diff --git a/packages/yakkl-wallet/src/routes/(wallet)/accounts/import/+page.svelte b/packages/yakkl-wallet/src/routes/(wallet)/accounts/import/+page.svelte
index 223f919..74055cc 100644
--- a/packages/yakkl-wallet/src/routes/(wallet)/accounts/import/+page.svelte
+++ b/packages/yakkl-wallet/src/routes/(wallet)/accounts/import/+page.svelte
@@ -1,17 +1,17 @@
 <script lang="ts">
   import { onMount } from 'svelte';
   import { goto } from '$app/navigation';
-  import ImportOption from '$lib/components/v1/ImportOption.svelte';
-  import ImportPrivateKey from '$lib/components/v1/ImportPrivateKey.svelte';
-  import ImportPhrase from '$lib/components/v1/ImportPhrase.svelte';
-  import ImportWatchAccount from '$lib/components/v1/ImportWatchAccount.svelte';
+  import ImportOption from '$lib/components/ImportOption.svelte';
+  import ImportPrivateKey from '$lib/components/ImportPrivateKey.svelte';
+  import ImportPhrase from '$lib/components/ImportPhrase.svelte';
+  import ImportWatchAccount from '$lib/components/ImportWatchAccount.svelte';
   import { ChevronLeft, Key, FileText, Eye } from 'lucide-svelte';
   import { sessionManager } from '$lib/managers/SessionManager';
-  
+
   let importType = $state<'private-key' | 'seed-phrase' | 'watch' | null>(null);
   let showModal = $state(false);
   let pageReady = $state(false);
-  
+
   // Check authentication on mount
   onMount(async () => {
     // Check if user is authenticated
@@ -23,7 +23,7 @@
     }
     pageReady = true;
   });
-  
+
   function handleBack() {
     if (importType) {
       importType = null;
@@ -32,7 +32,7 @@
       goto('/accounts');
     }
   }
-  
+
   function handleImportSuccess() {
     // Go to accounts page to see the new account
     goto('/accounts');
@@ -49,10 +49,10 @@
       <ChevronLeft class="w-5 h-5" />
       Back
     </button>
-    
+
     {#if !importType}
       <h1 class="text-2xl font-bold mb-6 text-gray-900 dark:text-gray-100">Import Account</h1>
-      
+
       <div class="space-y-4">
         <button
           onclick={() => {
@@ -69,7 +69,7 @@
             <p class="text-sm text-gray-600 dark:text-gray-400">Use your 12 or 24 word recovery phrase</p>
           </div>
         </button>
-        
+
         <button
           onclick={() => {
             importType = 'private-key';
@@ -85,7 +85,7 @@
             <p class="text-sm text-gray-600 dark:text-gray-400">Import an account using its private key</p>
           </div>
         </button>
-        
+
         <button
           onclick={() => {
             importType = 'watch';
@@ -102,7 +102,7 @@
           </div>
         </button>
       </div>
-      
+
       <div class="mt-8 p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg">
         <p class="text-sm text-yellow-800 dark:text-yellow-200">
           <strong>Security Note:</strong> Never share your seed phrase or private key with anyone. YAKKL will never ask for them outside of this import process.
@@ -115,7 +115,7 @@
 
 <!-- Import Modals - Rendered outside main content -->
 {#if importType === 'seed-phrase' && showModal}
-  <ImportPhrase 
+  <ImportPhrase
     bind:show={showModal}
     onComplete={handleImportSuccess}
     onCancel={() => {
@@ -126,7 +126,7 @@
 {/if}
 
 {#if importType === 'private-key' && showModal}
-  <ImportPrivateKey 
+  <ImportPrivateKey
     bind:show={showModal}
     onComplete={handleImportSuccess}
     onCancel={() => {
@@ -137,7 +137,7 @@
 {/if}
 
 {#if importType === 'watch' && showModal}
-  <ImportWatchAccount 
+  <ImportWatchAccount
     bind:show={showModal}
     onComplete={handleImportSuccess}
     onCancel={() => {
@@ -145,4 +145,4 @@
       showModal = false;
     }}
   />
-{/if}
\ No newline at end of file
+{/if}
diff --git a/packages/yakkl-wallet/src/routes/(wallet)/accounts/import/+page.ts b/packages/yakkl-wallet/src/routes/(wallet)/accounts/import/+page.ts
deleted file mode 100644
index dbf4e8f..0000000
--- a/packages/yakkl-wallet/src/routes/(wallet)/accounts/import/+page.ts
+++ /dev/null
@@ -1 +0,0 @@
-export const prerender = false;
\ No newline at end of file
diff --git a/packages/yakkl-wallet/src/routes/(wallet)/accounts/print-emergency-kit/+page.ts b/packages/yakkl-wallet/src/routes/(wallet)/accounts/print-emergency-kit/+page.ts
deleted file mode 100644
index dbf4e8f..0000000
--- a/packages/yakkl-wallet/src/routes/(wallet)/accounts/print-emergency-kit/+page.ts
+++ /dev/null
@@ -1 +0,0 @@
-export const prerender = false;
\ No newline at end of file
diff --git a/packages/yakkl-wallet/src/routes/(wallet)/ai-help/+page.ts b/packages/yakkl-wallet/src/routes/(wallet)/ai-help/+page.ts
deleted file mode 100644
index dbf4e8f..0000000
--- a/packages/yakkl-wallet/src/routes/(wallet)/ai-help/+page.ts
+++ /dev/null
@@ -1 +0,0 @@
-export const prerender = false;
\ No newline at end of file
diff --git a/packages/yakkl-wallet/src/routes/(wallet)/contacts/+page.ts b/packages/yakkl-wallet/src/routes/(wallet)/contacts/+page.ts
deleted file mode 100644
index d2c0be2..0000000
--- a/packages/yakkl-wallet/src/routes/(wallet)/contacts/+page.ts
+++ /dev/null
@@ -1,2 +0,0 @@
-export const prerender = true;
-export const ssr = false;
\ No newline at end of file
diff --git a/packages/yakkl-wallet/src/routes/(wallet)/extensions/+page.ts b/packages/yakkl-wallet/src/routes/(wallet)/extensions/+page.ts
deleted file mode 100644
index d2c0be2..0000000
--- a/packages/yakkl-wallet/src/routes/(wallet)/extensions/+page.ts
+++ /dev/null
@@ -1,2 +0,0 @@
-export const prerender = true;
-export const ssr = false;
\ No newline at end of file
diff --git a/packages/yakkl-wallet/src/routes/(wallet)/home/+page.svelte b/packages/yakkl-wallet/src/routes/(wallet)/home/+page.svelte
index 3f60fd7..bc3a5c8 100644
--- a/packages/yakkl-wallet/src/routes/(wallet)/home/+page.svelte
+++ b/packages/yakkl-wallet/src/routes/(wallet)/home/+page.svelte
@@ -21,6 +21,8 @@
   import { initializeCore } from "$lib/core/integration";
   import { currentAccount } from '$lib/stores/account.store';
   import { currentChain } from '$lib/stores/chain.store';
+  import { importWithBrowserAPI, ensureBrowserAPI } from '$lib/browser-polyfill-import';
+  import type { BrowserFeatures } from '$lib/modules/browser-dependent-features';
   import { totalPortfolioValue, isLoadingTokens, lastTokenUpdate, isMultiChainView, displayTokens, tokenStore, grandTotalPortfolioValue } from '$lib/stores/token.store';
   import { canUseFeature } from '$lib/utils/features';
   import { uiStore } from '$lib/stores/ui.store';
@@ -29,11 +31,19 @@
 	import { get } from 'svelte/store';
 	import PincodeVerify from '$lib/components/PincodeVerify.svelte';
 	import ProtectedValue from '$lib/components/ProtectedValue.svelte';
-	  import { updateTokenBalances } from '$lib/common/tokens';
+  import { updateTokenBalances } from '$lib/common/tokens';
   import { updateTokenPrices } from '$lib/common/tokenPriceManager';
   import { getInstances } from '$lib/common';
+  import { nativeTokenPriceService } from '$lib/services/native-token-price.service';
+  import { uiJWTValidatorService } from '$lib/services/ui-jwt-validator.service';
   import { log } from '$lib/common/logger-wrapper';
+  import { BigNumberishUtils } from '$lib/common/BigNumberishUtils';
+  import { DecimalMath } from '$lib/common/DecimalMath';
 
+  // Initialize core integration dynamically to prevent SSR issues
+  //let initializeCore: (() => Promise<void>) | null = null;
+
+  // State
   let showSendModal = $state(false);
   let showSwapModal = $state(false);
   let showReceiveModal = $state(false);
@@ -52,189 +62,285 @@
   let nativePriceDirection = $state<'up' | 'down' | null>(null);
   let selectedTransaction = $state(null);
   let showTransactionDetailModal = $state(false);
-
-  // Track if we've done initial load
   let hasInitialLoad = $state(false);
+  let transactionListData = $state<any>(null);
+  let browserFeatures = $state<BrowserFeatures | null>(null);
+
+  // Debug state for error tracking
+  let debugInfo = $state('Initializing home page...');
+  let hasError = $state(false);
+  let errorMessage = $state('');
+
+  function safeLog(message: string, data?: any) {
+    try {
+      log.info(`[Home] ${message}`, false, data);
+      debugInfo = message;
+    } catch (e) {
+      console.log(`[Home] ${message}`, data);
+    }
+  }
 
-  // Refresh data when account changes or becomes available
+  function handleError(error: any, context: string) {
+    const errorMsg = `Error in ${context}: ${error?.message || error}`;
+    safeLog(errorMsg, error);
+    hasError = true;
+    errorMessage = errorMsg;
+
+    // Show user-friendly notification
+    try {
+      uiStore.showError('Page Load Error', `Failed to load home page: ${context}`);
+    } catch (e) {
+      console.error('Failed to show error notification:', e);
+    }
+  }
+
+  // Safely wrap all effects in try-catch
   $effect(() => {
-    if (account?.address && !hasInitialLoad) {
-            log.info('Account available, triggering initial data load:', false, account.address);
-      hasInitialLoad = true;
-
-      // Force a refresh to ensure data is loaded
-      setTimeout(() => {
-        log.info('Forcing initial token refresh for account:', false, account.address);
-        tokenStore.refresh(true).then(() => {
-          log.info('Initial token refresh completed', false);
-        });
-      }, 500); // Small delay to ensure stores are ready
+    try {
+      if (account?.address && !hasInitialLoad) {
+        safeLog('Account available, triggering initial data load', account.address);
+        hasInitialLoad = true;
+
+        // Force a refresh to ensure data is loaded
+        setTimeout(() => {
+          safeLog('Forcing initial token refresh for account', account.address);
+          tokenStore.refresh(true).then(() => {
+            safeLog('Initial token refresh completed');
+          }).catch(error => {
+            handleError(error, 'initial token refresh');
+          });
+        }, 500);
+      }
+    } catch (error) {
+      handleError(error, 'account change effect');
     }
   });
 
-  // Debug portfolio values
   $effect(() => {
-        // Always log token breakdown for debugging
-    log.info('[Home] Token breakdown:', false, tokenList.map(t => ({
-      symbol: t.symbol,
-      qty: (t as any).qty || parseFloat((t as any).balance || '0'),
-      price: t.price,
-      value: t.value,
-      address: t.address,
-      chainId: t.chainId
-    })));
-
-    // Check for suspicious values
-    const suspiciousValues = [912.81, 912.47, 912.98, 2581.53, 2581.87];
-    if (suspiciousValues.some(val => Math.abs(portfolioValue - val) < 1)) {
-      log.warn('[Home] SUSPICIOUS portfolio value detected:', false, portfolioValue);
+    try {
+      // Always log token breakdown for debugging
+      safeLog('Token breakdown:', tokenList.map(t => ({
+        symbol: t.symbol,
+        qty: (t as any).qty || parseFloat((t as any).balance || '0'),
+        price: t.price,
+        value: t.value,
+        address: t.address,
+        chainId: t.chainId
+      })));
+
+      safeLog('Portfolio debug:', {
+        portfolioValue,
+        tokenCount: tokenList.length,
+        isMultiChain,
+        grandTotal,
+        singleChainTotal: $totalPortfolioValue,
+        account: account?.address,
+        chain: chain?.name,
+        firstToken: tokenList[0]
+      });
+    } catch (error) {
+      handleError(error, 'portfolio debug effect');
     }
-
-    log.info('[Home] Portfolio debug:', false, {
-      portfolioValue,
-      tokenCount: tokenList.length,
-      isMultiChain,
-      grandTotal,
-      singleChainTotal: $totalPortfolioValue,
-      account: account?.address,
-      chain: chain?.name,
-      firstToken: tokenList[0]
-    });
   });
 
-   $effect(() => {
-    const unsubscribe = visibilityStore.subscribe((value) => {
-      isVisible = value;
-    });
-    return unsubscribe;
+  $effect(() => {
+    try {
+      const unsubscribe = visibilityStore.subscribe((value) => {
+        isVisible = value;
+      });
+      return unsubscribe;
+    } catch (error) {
+      handleError(error, 'visibility store effect');
+    }
   });
 
-  // Reactive values from stores
+    // Reactive values from stores
   let account = $derived($currentAccount);
   let chain = $derived($currentChain);
   let tokenList = $derived($displayTokens);
   let isMultiChain = $derived($isMultiChainView);
   let grandTotal = $derived($grandTotalPortfolioValue); // Total across ALL addresses and ALL chains
+
   let portfolioValue = $derived.by(() => {
-    // Use the appropriate total based on view mode
-    if (isMultiChain) {
-      // In multi-chain view, use the grand total across all addresses/chains
-      return grandTotal;
-    } else {
-      // In single chain view, use the single chain total
-      return $totalPortfolioValue;
+    try {
+      // Use the appropriate total based on view mode
+      if (isMultiChain) {
+        // In multi-chain view, use the grand total across all addresses/chains
+        return grandTotal;
+      } else {
+        // In single chain view, use the single chain total
+        return $totalPortfolioValue;
+      }
+    } catch (error) {
+      handleError(error, 'calculating portfolio value');
+      return 0;
     }
   });
 
   // Current account value on current network only
   let currentAccountValue = $derived.by(() => {
-    if (!account || !chain) return 0;
-    // This is the value for the current account on the current network only
-    return $totalPortfolioValue;
+    try {
+      if (!account || !chain) return 0;
+      // This is the value for the current account on the current network only
+      return $totalPortfolioValue;
+    } catch (error) {
+      handleError(error, 'calculating current account value');
+      return 0;
+    }
+  });
+
+  let loading = $derived.by(() => {
+    try {
+      return $isLoadingTokens;
+    } catch (error) {
+      handleError(error, 'getting loading state');
+      return false;
+    }
+  });
+
+  let lastUpdate = $derived.by(() => {
+    try {
+      return $lastTokenUpdate;
+    } catch (error) {
+      handleError(error, 'getting last update');
+      return null;
+    }
   });
-  let loading = $derived($isLoadingTokens);
-  let lastUpdate = $derived($lastTokenUpdate);
 
   // Find native token and its price
-  let nativeToken = $derived(
-    tokenList.find(t =>
-      t.symbol === chain?.nativeCurrency?.symbol ||
-      t.symbol === 'ETH' ||
-      t.symbol === 'MATIC' ||
-      t.symbol === 'BNB'
-    )
-  );
-
-  let nativePrice = $derived(nativeToken?.price || 0);
-
-    // Debug native token price
+  let nativeToken = $derived.by(() => {
+    try {
+      return tokenList.find(t =>
+        t.symbol === chain?.nativeCurrency?.symbol ||
+        t.symbol === 'ETH' ||
+        t.symbol === 'MATIC' ||
+        t.symbol === 'BNB'
+      );
+    } catch (error) {
+      handleError(error, 'finding native token');
+      return null;
+    }
+  });
+
+  let nativePrice = $derived.by(() => {
+    try {
+      return nativeToken?.price || 0;
+    } catch (error) {
+      handleError(error, 'getting native price');
+      return 0;
+    }
+  });
+
+  // Debug native token price
   $effect(() => {
-    if (nativeToken) {
-            log.info('[Home] Native token debug:', false, {
-        symbol: nativeToken.symbol,
-        price: nativeToken.price,
-        value: nativeToken.value,
-        qty: (nativeToken as any).qty || parseFloat((nativeToken as any).balance || '0'),
-        chainId: nativeToken.chainId
-      });
+    try {
+      if (nativeToken) {
+        safeLog('Native token debug:', {
+          symbol: nativeToken.symbol,
+          price: nativeToken.price,
+          value: nativeToken.value,
+          qty: (nativeToken as any).qty || parseFloat((nativeToken as any).balance || '0'),
+          chainId: nativeToken.chainId
+        });
 
-      // Check if the price looks like a portfolio value
-      if (nativeToken.price > 10000) {
-        log.warn('[Home] WARNING: Native token price looks like portfolio value!', false, nativeToken.price);
+        // Check if the price looks like a portfolio value
+        if (BigNumberishUtils.compare(nativeToken.price, 10000) > 0) {
+          safeLog('WARNING: Native token price looks like portfolio value!', BigNumberishUtils.toNumber(nativeToken.price));
+        }
       }
+    } catch (error) {
+      handleError(error, 'native token debug effect');
     }
   });
 
   // Calculate native token value for account display
   let accountNativeValue = $derived.by(() => {
-    if (!account || !chain) return 0;
-    const balance = parseFloat(account.balance || '0');
-    return balance * nativePrice;
+    try {
+      if (!account || !chain) return 0;
+      const balance = parseFloat(account.balance || '0');
+      return DecimalMath.of(balance).mul(BigNumberishUtils.toNumber(nativePrice)).toNumber();
+    } catch (error) {
+      handleError(error, 'calculating account native value');
+      return 0;
+    }
   });
 
   // Track native price changes and update direction indicator
   $effect(() => {
-    if (nativePrice > 0 && previousNativePrice !== null && previousNativePrice > 0) {
-      if (nativePrice > previousNativePrice) {
-        nativePriceDirection = 'up';
-      } else if (nativePrice < previousNativePrice) {
-        nativePriceDirection = 'down';
+    try {
+      if (BigNumberishUtils.compare(nativePrice, 0) > 0 && previousNativePrice !== null && previousNativePrice > 0) {
+        if (BigNumberishUtils.compare(nativePrice, previousNativePrice) > 0) {
+          nativePriceDirection = 'up';
+        } else if (BigNumberishUtils.compare(nativePrice, previousNativePrice) < 0) {
+          nativePriceDirection = 'down';
+        }
       }
-      // Don't clear - keep the indicator visible
-    }
-    if (nativePrice > 0) {
-      previousNativePrice = nativePrice;
+      if (BigNumberishUtils.compare(nativePrice, 0) > 0) {
+        previousNativePrice = BigNumberishUtils.toNumber(nativePrice);
+      }
+    } catch (error) {
+      handleError(error, 'native price tracking effect');
     }
   });
 
   // Update direction from price service
   $effect(() => {
-    if (nativeToken?.symbol) {
-      // DISABLED: Price direction from simulated service
-      // const direction = priceUpdateService.getPriceDirection(nativeToken.symbol);
-      // if (direction) {
-      //   nativePriceDirection = direction;
-      // }
-      // TODO: Implement price direction tracking with real prices
+    try {
+      if (nativeToken?.symbol) {
+        // DISABLED: Price direction from simulated service
+        // const direction = priceUpdateService.getPriceDirection(nativeToken.symbol);
+        // if (direction) {
+        //   nativePriceDirection = direction;
+        // }
+        // TODO: Implement price direction tracking with real prices
+      }
+    } catch (error) {
+      handleError(error, 'price direction update effect');
     }
   });
 
   // Track modal states
   $effect(() => {
-    if (showUpgradeModal) {
-      modalStore.openModal('upgrade');
-    } else if ($isModalOpen && modalStore.isModalOpen()) {
-      // Only close if we opened it
-      modalStore.closeModal();
+    try {
+      if (showUpgradeModal) {
+        modalStore.openModal('upgrade');
+      } else if ($isModalOpen && modalStore.isModalOpen()) {
+        // Only close if we opened it
+        modalStore.closeModal();
+      }
+    } catch (error) {
+      handleError(error, 'modal state tracking effect');
     }
   });
 
   // Subscribe to modal store for transactionList modal
   $effect(() => {
-    const unsubscribe = modalStore.subscribe(state => {
-      if (state.modalType === 'transactionList' && state.isOpen) {
-        showTransactionListModal = true;
-        transactionListData = (state as any).data || null;
-      } else if (state.modalType === 'transactionList' && !state.isOpen) {
-        showTransactionListModal = false;
-        transactionListData = null;
-      }
-    });
+    try {
+      const unsubscribe = modalStore.subscribe(state => {
+        if (state.modalType === 'transactionList' && state.isOpen) {
+          showTransactionListModal = true;
+          transactionListData = (state as any).data || null;
+        } else if (state.modalType === 'transactionList' && !state.isOpen) {
+          showTransactionListModal = false;
+          transactionListData = null;
+        }
+      });
 
-    return () => unsubscribe();
+      return () => unsubscribe();
+    } catch (error) {
+      handleError(error, 'modal store subscription effect');
+    }
   });
 
-  let transactionListData = $state<any>(null);
-
   async function refreshAllData(forceRefresh = false) {
-    log.info('refreshAllData: Starting data refresh...', false, { forceRefresh });
-
     try {
+      safeLog('refreshAllData: Starting data refresh...', { forceRefresh });
+
       // When force refreshing, update prices first to ensure consistency
       if (forceRefresh) {
         // Update prices before refreshing token store
         await updateTokenPrices();
-        log.info('refreshAllData: Token prices updated', false);
+        safeLog('refreshAllData: Token prices updated');
 
         // Small delay to ensure price updates are propagated to cache
         await new Promise(resolve => setTimeout(resolve, 100));
@@ -242,7 +348,7 @@
 
       // Always refresh to get latest data
       await tokenStore.refresh(forceRefresh);
-      log.info('refreshAllData: Token store refreshed', false);
+      safeLog('refreshAllData: Token store refreshed');
 
       // Update balances if needed
       if (forceRefresh) {
@@ -256,95 +362,127 @@
         }
       }
     } catch (error) {
-      log.warn('refreshAllData: Error refreshing data:', false, error);
+      handleError(error, 'refreshAllData');
     }
   }
 
   onMount(() => {
-    // DISABLED: Simulated price updates - using real prices from tokenPriceManager instead
-    // priceUpdateService.startPriceUpdates(30000); // 30 seconds
-
-    // Run async initialization without blocking UI
-    (async () => {
-      // Don't show global loading - let individual components handle their state
-      // Added: Add timeout to prevent infinite initialization
-      const initTimeout = setTimeout(() => {
-        log.warn('Home page initialization timeout reached', false);
-      }, 5000);
-
-      try {
-        // Initialize YAKKL Core (non-blocking)
-        initializeCore().catch(err => {
-          log.warn('YAKKL Core initialization failed:', false, err);
-        });
+    try {
+      if (typeof window === 'undefined') {
+        console.log('window is not defined');
+        return null;
+      }
 
-        // The token store automatically loads cached data on initialization
-        // and sets up auto-refresh, so we don't need to force a refresh here
-        log.info('Home: Token store will handle data loading automatically', false);
-
-        // ALWAYS run background refresh to update portfolio totals after cache loads
-        if ($currentAccount) {
-                      // Wait a bit to allow cache to load first, then refresh
-            setTimeout(() => {
-              log.info('/home/+page.svelte: Starting automatic background refresh for', false, $currentAccount.address);
-
-              // Run the same logic as the manual refresh button (refreshAllData)
-              // This ensures portfolio totals are updated with fresh data
-              (async () => {
-                try {
-                  // Update prices and balances in background
-                  await updateTokenPrices();
-                  log.info('/home/+page.svelte: Token prices updated automatically', false);
-
-                  // Small delay to ensure price updates are propagated to cache
-                  await new Promise(resolve => setTimeout(resolve, 100));
-
-                  // Refresh token store to get updated portfolio totals
-                  await tokenStore.refresh(true);
-                  log.info('/home/+page.svelte: Token store refreshed automatically', false);
-
-                  // Update balances to ensure we have latest data
-                  const instances = await getInstances();
-                  if (instances && instances[1]) {
-                    const provider = instances[1].getProvider();
-                    await updateTokenBalances($currentAccount.address, provider);
-
-                    // Final refresh to ensure UI has all latest data
-                    await tokenStore.refresh();
-                    log.info('/home/+page.svelte: Final automatic refresh completed', false);
-                  }
-                } catch (err) {
-                  log.warn('Automatic background refresh failed:', false, err);
-                }
-              })();
-          }, 1500); // Wait 1.5 seconds to ensure cache loads first, then auto-refresh
+      safeLog('onMount: Starting home page initialization');
+
+      // Dynamic import and async initialization
+      (async () => {
+        // Dynamic import to prevent SSR issues
+        try {
+          // const coreModule = await import('$lib/core/integration');
+          // initializeCore = coreModule.initializeCore;
+          safeLog('onMount: Core integration module loaded');
+        } catch (error) {
+          handleError(error, 'loading core integration module');
         }
 
-      } catch (error) {
-        log.warn('Preview 2.0 initialization failed:', false, error);
-      } finally {
-        clearTimeout(initTimeout);
-      }
-    })();
-
-    // Listen for token click events
-    const handleEvent = (event: Event) => {
-      handleTokenClick(event as CustomEvent);
-    };
+        // Add timeout to prevent infinite initialization
+        const initTimeout = setTimeout(() => {
+          handleError(new Error('Initialization timeout'), 'home page initialization timeout');
+        }, 10000); // Increased to 10 seconds
+
+        try {
+          safeLog('onMount: Starting async initialization');
+
+          // Initialize YAKKL Core (non-blocking)
+          if (initializeCore) {
+            try {
+              await initializeCore();
+              safeLog('onMount: YAKKL Core initialized successfully');
+            } catch (err) {
+              handleError(err, 'YAKKL Core initialization');
+            }
+          }
+
+          try {
+            await tokenStore.refresh();
+            safeLog('onMount: Token store refreshed');
+          } catch (error) {
+            handleError(error, 'token store refresh');
+          }
+
+          try {
+            await updateTokenPrices();
+            safeLog('onMount: Token prices updated');
+          } catch (error) {
+            handleError(error, 'token price update');
+          }
+
+          try {
+            const instances = await getInstances();
+            if (instances && instances[1]) {
+              await updateTokenBalances($currentAccount.address, instances[1].getProvider());
+              safeLog('onMount: Token balances updated');
+            }
+          } catch (error) {
+            handleError(error, 'token balance update');
+          }
+
+          // Start JWT validation service for security
+          // Wait longer to ensure background JWT validator has set up grace period
+          setTimeout(() => {
+            try {
+              safeLog('onMount: Starting UI JWT validation service');
+              uiJWTValidatorService.start();
+            } catch (error) {
+              handleError(error, 'JWT validation service start');
+            }
+          }, 5000); // Wait 5 seconds to ensure background grace period is active
+
+          safeLog('onMount: Async initialization completed successfully');
+        } catch (error) {
+          handleError(error, 'async initialization');
+        } finally {
+          clearTimeout(initTimeout);
+        }
+      })();
+
+      // Listen for token click events
+      const handleEvent = (event: Event) => {
+        try {
+          handleTokenClick(event as CustomEvent);
+        } catch (error) {
+          handleError(error, 'token click event handler');
+        }
+      };
 
-    if (typeof document !== 'undefined') {
-      document.addEventListener('tokenclick', handleEvent);
+      if (typeof document !== 'undefined') {
+        document.addEventListener('tokenclick', handleEvent);
+      }
 
+      // Cleanup on unmount
       return () => {
-        document.removeEventListener('tokenclick', handleEvent);
+        try {
+          if (typeof document !== 'undefined') {
+            document.removeEventListener('tokenclick', handleEvent);
+          }
+
+          // Stop native token price updates
+          nativeTokenPriceService.stopAutomaticUpdates();
+          safeLog('onMount cleanup: Native token price service stopped');
+
+          // Stop JWT validation service
+          uiJWTValidatorService.stop();
+          safeLog('onMount cleanup: UI JWT validation service stopped');
+        } catch (error) {
+          handleError(error, 'cleanup');
+        }
       };
+    } catch (error) {
+      handleError(error, 'onMount');
+      // Return empty cleanup function on error
+      return () => {};
     }
-
-    // Cleanup on unmount
-    return () => {
-      // DISABLED: No longer using simulated price updates
-      // priceUpdateService.stopPriceUpdates();
-    };
   });
 
   function handleTokenSend(token: any) {
@@ -521,6 +659,34 @@
   onSend={handleTokenSend}
 />
 
+<!-- Debug Panel for Error Tracking -->
+{#if hasError}
+<div class="fixed top-4 left-4 right-4 z-50 bg-red-100 dark:bg-red-900 border border-red-300 dark:border-red-700 rounded-lg p-4 shadow-lg">
+  <div class="flex justify-between items-start">
+    <div>
+      <h3 class="text-red-800 dark:text-red-200 font-bold">Home Page Error</h3>
+      <p class="text-red-700 dark:text-red-300 text-sm mt-1">{errorMessage}</p>
+      <p class="text-red-600 dark:text-red-400 text-xs mt-2">
+        Try refreshing the page or checking the browser console for more details.
+      </p>
+    </div>
+    <button
+      onclick={() => { hasError = false; errorMessage = ''; }}
+      class="text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-200"
+    >
+      
+    </button>
+  </div>
+</div>
+{/if}
+
+<!-- Debug Status -->
+{#if !hasError}
+<div class="fixed bottom-4 left-4 z-40 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg p-2 text-xs max-w-xs opacity-75">
+  <span class="text-gray-700 dark:text-gray-300">Status: {debugInfo}</span>
+</div>
+{/if}
+
 <!-- Fixed centered logo watermark -->
 <div class="fixed inset-0 flex items-center justify-center pointer-events-none select-none z-0">
   <img src="/images/logoBullFav128x128.png" class="w-44 h-44 opacity-10 dark:opacity-15" alt="logo" />
@@ -528,6 +694,43 @@
 
 <div class="max-w-[400px] mx-auto p-5 space-y-5 mt-1 pt-2 relative">
 
+  <!-- Error Fallback Content -->
+  {#if hasError}
+    <div class="yakkl-card p-6 text-center">
+      <div class="text-red-500 mb-4">
+        <svg class="w-16 h-16 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
+          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z" />
+        </svg>
+      </div>
+      <h2 class="text-xl font-bold text-zinc-900 dark:text-white mb-4">Page Loading Error</h2>
+      <p class="text-zinc-600 dark:text-zinc-400 mb-6">
+        There was an error loading the home page. This is likely a temporary issue.
+      </p>
+      <div class="space-y-3">
+        <button
+          onclick={() => window.location.reload()}
+          class="yakkl-btn-primary w-full"
+        >
+          Refresh Page
+        </button>
+        <button
+          onclick={() => { hasError = false; errorMessage = ''; }}
+          class="yakkl-btn-secondary w-full"
+        >
+          Try Again
+        </button>
+        <a href="/accounts" class="yakkl-btn-secondary w-full inline-block text-center">
+          Go to Accounts
+        </a>
+      </div>
+      <details class="mt-6 text-left">
+        <summary class="cursor-pointer text-sm text-zinc-500 dark:text-zinc-400">Technical Details</summary>
+        <pre class="mt-2 p-3 bg-zinc-100 dark:bg-zinc-800 rounded text-xs overflow-auto">{errorMessage}</pre>
+      </details>
+    </div>
+  {:else}
+    <!-- Normal Page Content -->
+
   <!-- Account header -->
   <div class="flex items-center justify-between relative z-10">
     <div>
@@ -613,8 +816,8 @@
         {#if chain}
           <div class="text-xs text-gray-500 dark:text-gray-400 mt-0.5 flex items-center gap-1">
             <span>{chain.nativeCurrency?.symbol || 'ETH'}:</span>
-            {#if nativePrice > 0}
-              <ProtectedValue value={formatCurrency(nativePrice)} placeholder="****" />
+            {#if BigNumberishUtils.compare(nativePrice, 0) > 0}
+              <ProtectedValue value={formatCurrency(BigNumberishUtils.toNumber(nativePrice))} placeholder="****" />
             {:else}
               <span class="animate-pulse">Loading...</span>
             {/if}
@@ -758,7 +961,9 @@
       </svg>
       YAKKL v2
     </div>
-  </div>
+    </div>
+  {/if} <!-- End normal page content -->
+
 </div>
 
 <!-- AI Help Button - Floating Action Button (hidden during modals) -->
diff --git a/packages/yakkl-wallet/src/routes/(wallet)/home/+page.ts b/packages/yakkl-wallet/src/routes/(wallet)/home/+page.ts
deleted file mode 100644
index ae88a27..0000000
--- a/packages/yakkl-wallet/src/routes/(wallet)/home/+page.ts
+++ /dev/null
@@ -1,2 +0,0 @@
-export const prerender = false;
-export const ssr = false;
diff --git a/packages/yakkl-wallet/src/routes/(wallet)/legal/+page.ts b/packages/yakkl-wallet/src/routes/(wallet)/legal/+page.ts
deleted file mode 100644
index d2c0be2..0000000
--- a/packages/yakkl-wallet/src/routes/(wallet)/legal/+page.ts
+++ /dev/null
@@ -1,2 +0,0 @@
-export const prerender = true;
-export const ssr = false;
\ No newline at end of file
diff --git a/packages/yakkl-wallet/src/routes/(wallet)/login/+page.svelte b/packages/yakkl-wallet/src/routes/(wallet)/login/+page.svelte
index adffbb6..adf0d00 100644
--- a/packages/yakkl-wallet/src/routes/(wallet)/login/+page.svelte
+++ b/packages/yakkl-wallet/src/routes/(wallet)/login/+page.svelte
@@ -19,11 +19,15 @@
 	import { extensionTokenCacheStore } from '$lib/stores/extension-token-cache.store';
 	import { currentAccount } from '$lib/stores';
 	import { get } from 'svelte/store';
+	import { getYakklCurrentlySelected, getYakklCombinedTokens, getYakklAddressTokenHoldings } from '$lib/common/stores';
+	import { walletCacheStore } from '$lib/stores/wallet-cache.store';
+	import { updateTokenPrices } from '$lib/common/tokenPriceManager';
+	import { browser_ext } from '$lib/common/environment';
 
   // State
   let showError = $state(false);
   let errorValue = $state('');
-  let planType = $state(PlanType.BASIC_MEMBER);
+  let planType = $state(PlanType.EXPLORER_MEMBER);
   let yakklSettings: Settings | null = $state(null);
 
   // Format plan type for display (remove underscores and capitalize)
@@ -39,18 +43,100 @@
   onMount(async () => {
     yakklSettings = await getNormalizedSettings();
     await setSettingsStorage(yakklSettings);
-    planType = yakklSettings?.plan.type ?? PlanType.BASIC_MEMBER;
+    planType = yakklSettings?.plan.type ?? PlanType.EXPLORER_MEMBER;
 
     // Load cache managers early to ensure cached data is available
-    try {
-      BalanceCacheManager.getInstance();
-      AccountTokenCacheManager.getInstance();
-    } catch (error) {
-      log.warn('Failed to load cache managers in login:', false, error);
-    }
+    // try {
+    //   BalanceCacheManager.getInstance();
+    //   AccountTokenCacheManager.getInstance();
+    // } catch (error) {
+    //   log.warn('Failed to load cache managers in login:', false, error);
+    // }
   });
 
+  /**
+   * Pre-load token cache during login as requested by user
+   * This implements the user's specific request to have cache updated with current info
+   * before getting to the home page, so home page doesn't need complex logic
+   */
+  // async function preloadTokenCache() {
+  //   try {
+  //     log.info('[Login] Starting token cache preload...', false);
+
+  //     // Get currently selected account data as user requested
+  //     const currentlySelected = await getYakklCurrentlySelected();
+  //     if (currentlySelected?.shortcuts) {
+  //       const currentAddress = currentlySelected.shortcuts.address;
+  //       const currentChainId = currentlySelected.shortcuts.chainId;
+
+  //       if (currentAddress) {
+  //         log.info('[Login] Preloading tokens for address:', false, { address: currentAddress, chainId: currentChainId });
+
+  //         // Get the address token holdings for the current address
+  //         const addressTokenHoldings = await getYakklAddressTokenHoldings();
+
+  //         // Verify if tokens and address are in the yakklWalletCache
+  //         const cacheState = get(walletCacheStore);
+  //         const accountCache = cacheState.chainAccountCache[currentChainId]?.[currentAddress.toLowerCase()];
+
+  //         if (!accountCache || accountCache.tokens.length === 0) {
+  //           log.info('[Login] No cache found for address, loading default tokens...', false);
+
+  //           // Get combined tokens (default + custom)
+  //           const combinedTokens = await getYakklCombinedTokens();
+
+  //           // Filter tokens for current chain
+  //           const chainTokens = combinedTokens.filter(token =>
+  //             token.chainId === currentChainId || (!token.chainId && currentChainId === 1)
+  //           );
+
+  //           // Update wallet cache with token data
+  //           const tokenCacheData = chainTokens.map(token => ({
+  //             address: token.address,
+  //             symbol: token.symbol,
+  //             name: token.name,
+  //             decimals: token.decimals || 18,
+  //             balance: token.balance?.toString() || '0',
+  //             balanceLastUpdated: new Date(),
+  //             price: parseFloat(token.price?.toString() || '0'),
+  //             priceLastUpdated: new Date(),
+  //             value: parseFloat(token.balance?.toString() || '0') * parseFloat(token.price?.toString() || '0'),
+  //             icon: token.logoURI || token.icon || undefined,
+  //             isNative: token.isNative || false,
+  //             chainId: currentChainId
+  //           }));
+
+  //           walletCacheStore.updateTokens(currentChainId, currentAddress, tokenCacheData);
+
+  //           log.info('[Login] Added tokens to cache:', false, chainTokens.length);
+  //         } else {
+  //           log.info('[Login] Existing cache found, refreshing prices only...', false);
+  //         }
+
+  //         // Get prices for each token, including native token (ETH)
+  //         // This should include zero_address with isNative = true as user mentioned
+  //         try {
+  //           await updateTokenPrices();
+  //           log.info('[Login] Token prices updated during cache preload', false);
+  //         } catch (error) {
+  //           log.warn('Failed to update token prices during preload:', false, error);
+  //         }
+
+  //         log.info('[Login] Token cache preload completed successfully', false);
+  //       } else {
+  //         log.warn('[Login] No current address found for token cache preload', false);
+  //       }
+  //     } else {
+  //       log.warn('[Login] No currently selected shortcuts found for token cache preload', false);
+  //     }
+  //   } catch (error) {
+  //     log.error('Error during token cache preload:', false, error);
+  //     // Don't fail login if cache preload fails
+  //   }
+  // }
+
   // Handle successful login
+
   async function onSuccess(profile: Profile, digest: string, isMinimal: boolean) {
     try {
       // Set the username in the global store
@@ -61,32 +147,32 @@
 
       // KEY: Sync all storage to stores - this loads all persistent data
       await syncStorageToStore();
-      
+
       // Only clear cache for first-time users, not on every login
-      try {
-        await extensionTokenCacheStore.clearForFirstTimeSetup();
-        console.log('[Login] Checked and cleared cache if first-time user');
-      } catch (error) {
-        console.warn('[Login] Failed to check first-time user cache:', error);
-      }
+      // try {
+      //   await extensionTokenCacheStore.clearForFirstTimeSetup();
+      //   log.info('[Login] Checked and cleared cache if first-time user');
+      // } catch (error) {
+      //   log.warn('Failed to check first-time user cache:', false, error);
+      // }
 
       // Ensure cache managers are loaded after login
-      try {
-        BalanceCacheManager.getInstance();
-        const accountTokenCache = AccountTokenCacheManager.getInstance();
-        
+      // try {
+        // BalanceCacheManager.getInstance();
+        // const accountTokenCache = AccountTokenCacheManager.getInstance();
+
         // Clear any stale portfolio value cache to force fresh calculation
         // Get the current account from the stores after sync
-        const account = get(currentAccount);
-        
+        // const account = get(currentAccount);
+
         // No need to clear account cache on every login - cache persists between sessions
-        console.log('[Login] Account token cache persists between sessions');
-      } catch (error) {
-        log.warn('Failed to load cache managers after login:', false, error);
-      }
+        log.info('[Login] Account token cache persists between sessions');
+      // } catch (error) {
+      //   log.warn('Failed to load cache managers after login:', false, error);
+      // }
 
       // Unlock the wallet using setLocks function - this updates both storage and stores
-      await setLocks(false, yakklSettings?.plan.type || PlanType.BASIC_MEMBER);
+      await setLocks(false, yakklSettings?.plan.type || PlanType.EXPLORER_MEMBER);
 
       // Start activity tracking
       const contextType = 'popup-wallet';
@@ -95,10 +181,13 @@
         startActivityTracking(contextType);
       }
 
-      // Small delay to ensure all stores are synchronized before redirect
-      await new Promise(resolve => setTimeout(resolve, 200));
+      // NEW: Pre-load token cache during login as user requested
+      // This ensures the cache is populated before reaching the home page
+      // await preloadTokenCache();
 
-      log.info('V2: All stores synchronized after login');
+      // Small delay to ensure all stores are synchronized before redirect
+      // await new Promise(resolve => setTimeout(resolve, 200));
+      // log.info('V2: All stores synchronized after login');
 
       // Mark session as authenticated
       sessionStorage.setItem('wallet-authenticated', 'true');
@@ -111,19 +200,58 @@
         log.info('Login in extension popup context');
       }
 
-      // Added: Use debug navigation to diagnose why home page doesn't appear
-      // Original: await goto('/home', { replaceState: true });
+      // TEST: Navigate to simplified home2 page to debug module resolution issues
+      console.log('[LOGIN] Starting navigation to home2...');
+      console.log('[LOGIN] Current URL:', window.location.href);
+      console.log('[LOGIN] Protocol:', window.location.protocol);
+
+      const isExtension = window.location.protocol === 'chrome-extension:';
+      console.log('[LOGIN] Is extension context:', isExtension);
+
       try {
-        // await debugGoto('/home', { replaceState: true });
-        await goto('/home', { replaceState: true });
-      } catch (navError) {
-        // If SvelteKit navigation fails, try fallback method
-        log.warn('SvelteKit navigation failed, trying fallback', false, navError);
-        fallbackNavigate('/home');
+        // Try different navigation methods and log results
+        // await goto('/home2');
+
+        // console.log('[LOGIN] Method 1: Attempting window.location.href("/home2.html")...');
+        // window.location.href = '/home2.html';
+
+
+
+        console.log('[LOGIN] Method 1: Attempting ("/home")...');
+        await goto('/home');
+        console.log('[LOGIN] Method 1: Success - goto worked!');
+      } catch (error1) {
+        console.error('[LOGIN] Method 1 failed:', error1);
+        console.log('[LOGIN] Error name:', error1.name);
+        console.log('[LOGIN] Error message:', error1.message);
+        console.log('[LOGIN] Error stack:', error1.stack);
+
+        try {
+          console.log('[LOGIN] Method 2: Attempting goto with replaceState...');
+          await goto('/home2', { replaceState: true });
+          console.log('[LOGIN] Method 2: Success!');
+        } catch (error2) {
+          console.error('[LOGIN] Method 2 failed:', error2);
+
+          try {
+            console.log('[LOGIN] Method 3: Attempting window.location.href...');
+            window.location.href = '/home2.html';
+            console.log('[LOGIN] Method 3: Initiated (page should reload)');
+          } catch (error3) {
+            console.error('[LOGIN] Method 3 failed:', error3);
+
+            // Final fallback
+            console.log('[LOGIN] Method 4: Final fallback - direct URL construction');
+            const baseUrl = window.location.origin;
+            const targetUrl = `${baseUrl}/home2.html`;
+            console.log('[LOGIN] Target URL:', targetUrl);
+            window.location.replace(targetUrl);
+          }
+        }
       }
 
     } catch (e: any) {
-      log.error('Error during post-login initialization', false, e);
+      console.error('Error during post-login initialization', false, e);
       errorValue = e;
       showError = true;
     }
diff --git a/packages/yakkl-wallet/src/routes/(wallet)/phishing/+page.ts b/packages/yakkl-wallet/src/routes/(wallet)/phishing/+page.ts
deleted file mode 100644
index d2c0be2..0000000
--- a/packages/yakkl-wallet/src/routes/(wallet)/phishing/+page.ts
+++ /dev/null
@@ -1,2 +0,0 @@
-export const prerender = true;
-export const ssr = false;
\ No newline at end of file
diff --git a/packages/yakkl-wallet/src/routes/(wallet)/preferences/+page.ts b/packages/yakkl-wallet/src/routes/(wallet)/preferences/+page.ts
deleted file mode 100644
index d2c0be2..0000000
--- a/packages/yakkl-wallet/src/routes/(wallet)/preferences/+page.ts
+++ /dev/null
@@ -1,2 +0,0 @@
-export const prerender = true;
-export const ssr = false;
\ No newline at end of file
diff --git a/packages/yakkl-wallet/src/routes/(wallet)/register/+page.ts b/packages/yakkl-wallet/src/routes/(wallet)/register/+page.ts
deleted file mode 100644
index dbf4e8f..0000000
--- a/packages/yakkl-wallet/src/routes/(wallet)/register/+page.ts
+++ /dev/null
@@ -1 +0,0 @@
-export const prerender = false;
\ No newline at end of file
diff --git a/packages/yakkl-wallet/src/routes/(wallet)/register/create/+page.svelte b/packages/yakkl-wallet/src/routes/(wallet)/register/create/+page.svelte
index 5d5b25f..0367401 100644
--- a/packages/yakkl-wallet/src/routes/(wallet)/register/create/+page.svelte
+++ b/packages/yakkl-wallet/src/routes/(wallet)/register/create/+page.svelte
@@ -219,7 +219,7 @@
         registered: {
           key: '',
           plan: {
-            type: 'basic_member' as any, // Default plan type
+            type: 'explorer_member' as any, // Default plan type
             source: 'web' as any,
             promo: 'none' as any,
             trialEndDate: '',
diff --git a/packages/yakkl-wallet/src/routes/(wallet)/register/create/+page.ts b/packages/yakkl-wallet/src/routes/(wallet)/register/create/+page.ts
deleted file mode 100644
index dbf4e8f..0000000
--- a/packages/yakkl-wallet/src/routes/(wallet)/register/create/+page.ts
+++ /dev/null
@@ -1 +0,0 @@
-export const prerender = false;
\ No newline at end of file
diff --git a/packages/yakkl-wallet/src/routes/(wallet)/send/+page.ts b/packages/yakkl-wallet/src/routes/(wallet)/send/+page.ts
deleted file mode 100644
index d2c0be2..0000000
--- a/packages/yakkl-wallet/src/routes/(wallet)/send/+page.ts
+++ /dev/null
@@ -1,2 +0,0 @@
-export const prerender = true;
-export const ssr = false;
\ No newline at end of file
diff --git a/packages/yakkl-wallet/src/routes/(wallet)/settings/+page.ts b/packages/yakkl-wallet/src/routes/(wallet)/settings/+page.ts
deleted file mode 100644
index d2c0be2..0000000
--- a/packages/yakkl-wallet/src/routes/(wallet)/settings/+page.ts
+++ /dev/null
@@ -1,2 +0,0 @@
-export const prerender = true;
-export const ssr = false;
\ No newline at end of file
diff --git a/packages/yakkl-wallet/src/routes/(wallet)/success/+page.svelte b/packages/yakkl-wallet/src/routes/(wallet)/success/+page.svelte
deleted file mode 100644
index 0a555a0..0000000
--- a/packages/yakkl-wallet/src/routes/(wallet)/success/+page.svelte
+++ /dev/null
@@ -1,209 +0,0 @@
-<script lang="ts">
-	import { onMount } from 'svelte';
-	import { goto } from '$app/navigation';
-	import { uiStore } from '$lib/stores/ui.store';
-
-	let countdown = $state(5);
-	let confettiCanvas: HTMLCanvasElement;
-
-	onMount(() => {
-		// Animate confetti
-		if (typeof window !== 'undefined') {
-			createConfetti();
-		}
-
-		// Countdown timer
-		const timer = setInterval(() => {
-			countdown--;
-			if (countdown <= 0) {
-				clearInterval(timer);
-				goto('/');
-			}
-		}, 1000);
-
-		// Show success notification
-		uiStore.showSuccess(
-			'Migration Complete!',
-			'Welcome to YAKKL V2 - your wallet has been successfully upgraded!'
-		);
-
-		return () => clearInterval(timer);
-	});
-
-	function createConfetti() {
-		if (!confettiCanvas) return;
-
-		const ctx = confettiCanvas.getContext('2d');
-		if (!ctx) return;
-
-		const canvas = confettiCanvas;
-		canvas.width = window.innerWidth;
-		canvas.height = window.innerHeight;
-
-		const confetti: Array<{
-			x: number;
-			y: number;
-			size: number;
-			color: string;
-			velocity: { x: number; y: number };
-			rotation: number;
-			rotationSpeed: number;
-		}> = [];
-
-		const colors = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', '#FFEAA7', '#DDA0DD', '#98D8C8'];
-
-		// Create confetti pieces
-		for (let i = 0; i < 100; i++) {
-			confetti.push({
-				x: Math.random() * canvas.width,
-				y: -10,
-				size: Math.random() * 6 + 3,
-				color: colors[Math.floor(Math.random() * colors.length)],
-				velocity: {
-					x: (Math.random() - 0.5) * 2,
-					y: Math.random() * 3 + 2
-				},
-				rotation: Math.random() * 360,
-				rotationSpeed: (Math.random() - 0.5) * 10
-			});
-		}
-
-		function animate() {
-			ctx.clearRect(0, 0, canvas.width, canvas.height);
-
-			for (let i = confetti.length - 1; i >= 0; i--) {
-				const piece = confetti[i];
-
-				// Update position
-				piece.x += piece.velocity.x;
-				piece.y += piece.velocity.y;
-				piece.rotation += piece.rotationSpeed;
-
-				// Draw confetti piece
-				ctx.save();
-				ctx.translate(piece.x, piece.y);
-				ctx.rotate(piece.rotation * Math.PI / 180);
-				ctx.fillStyle = piece.color;
-				ctx.fillRect(-piece.size / 2, -piece.size / 2, piece.size, piece.size);
-				ctx.restore();
-
-				// Remove if off screen
-				if (piece.y > canvas.height + 10) {
-					confetti.splice(i, 1);
-				}
-			}
-
-			if (confetti.length > 0) {
-				requestAnimationFrame(animate);
-			}
-		}
-
-		animate();
-	}
-
-	function goToWallet() {
-		goto('/preview2');
-	}
-</script>
-
-<svelte:head>
-	<title>Migration Successful - YAKKL Preview 2.0</title>
-</svelte:head>
-
-<!-- Confetti Canvas -->
-<canvas
-	bind:this={confettiCanvas}
-	class="fixed inset-0 pointer-events-none z-10"
-></canvas>
-
-<div class="min-h-screen bg-gradient-to-br from-green-50 to-emerald-100 dark:from-green-900 dark:to-emerald-900 flex items-center justify-center p-4 relative">
-	<!-- Success Container -->
-	<div class="max-w-md w-full text-center relative z-20">
-		<!-- Success Icon -->
-		<div class="mb-8 relative">
-			<div class="w-24 h-24 mx-auto bg-green-500 rounded-full flex items-center justify-center shadow-xl animate-bounce">
-				<svg class="w-12 h-12 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
-					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
-				</svg>
-			</div>
-
-			<!-- Animated rings -->
-			<div class="absolute inset-0 w-24 h-24 mx-auto border-4 border-green-300 rounded-full animate-ping"></div>
-			<div class="absolute inset-0 w-32 h-32 mx-auto -m-4 border-2 border-green-200 rounded-full animate-pulse"></div>
-		</div>
-
-		<!-- Success Message -->
-		<div class="bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 mb-6">
-			<h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-4">
-				 Migration Successful!
-			</h1>
-
-			<p class="text-gray-600 dark:text-gray-300 mb-6 leading-relaxed">
-				Welcome to <strong>YAKKL Preview 2.0</strong>! Your wallet has been successfully upgraded with enhanced features, improved security, and a beautiful new design.
-			</p>
-
-			<!-- Feature highlights -->
-			<div class="grid grid-cols-2 gap-4 mb-6 text-sm">
-				<div class="flex items-center gap-2 text-green-600 dark:text-green-400">
-					<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
-						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
-					</svg>
-					Enhanced UI/UX
-				</div>
-				<div class="flex items-center gap-2 text-green-600 dark:text-green-400">
-					<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
-						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
-					</svg>
-					Feature Control
-				</div>
-				<div class="flex items-center gap-2 text-green-600 dark:text-green-400">
-					<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
-						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
-					</svg>
-					Payment Gateway
-				</div>
-				<div class="flex items-center gap-2 text-green-600 dark:text-green-400">
-					<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
-						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
-					</svg>
-					Data Preserved
-				</div>
-			</div>
-
-			<!-- Countdown -->
-			<div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4 mb-6">
-				<p class="text-sm text-gray-600 dark:text-gray-300 mb-2">
-					Redirecting to your wallet in:
-				</p>
-				<div class="text-2xl font-bold text-indigo-600 dark:text-indigo-400">
-					{countdown}s
-				</div>
-			</div>
-
-			<!-- Action Button -->
-			<button
-				onclick={goToWallet}
-				class="w-full bg-gradient-to-r from-indigo-500 to-purple-600 text-white font-semibold py-3 px-6 rounded-lg hover:from-indigo-600 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105"
-			>
-				Enter Your Wallet Now
-			</button>
-		</div>
-
-		<!-- Additional Info -->
-		<div class="text-sm text-gray-500 dark:text-gray-400">
-			<p>Your original data has been safely migrated and backed up.</p>
-			<p class="mt-1">You can always switch back if needed.</p>
-		</div>
-	</div>
-
-	<!-- Background decorations -->
-	<div class="absolute inset-0 overflow-hidden">
-		<div class="absolute -top-10 -right-10 w-40 h-40 bg-green-200 dark:bg-green-700 rounded-full opacity-20 animate-pulse"></div>
-		<div class="absolute -bottom-10 -left-10 w-32 h-32 bg-emerald-200 dark:bg-emerald-700 rounded-full opacity-20 animate-pulse"></div>
-		<div class="absolute top-1/2 left-1/4 w-6 h-6 bg-green-300 dark:bg-green-600 rounded-full opacity-40 animate-bounce" style="animation-delay: 0.5s;"></div>
-		<div class="absolute top-1/3 right-1/4 w-4 h-4 bg-emerald-300 dark:bg-emerald-600 rounded-full opacity-40 animate-bounce" style="animation-delay: 1s;"></div>
-	</div>
-</div>
-
-<style>
-</style>
diff --git a/packages/yakkl-wallet/src/routes/(wallet)/success/+page.ts b/packages/yakkl-wallet/src/routes/(wallet)/success/+page.ts
deleted file mode 100644
index d2c0be2..0000000
--- a/packages/yakkl-wallet/src/routes/(wallet)/success/+page.ts
+++ /dev/null
@@ -1,2 +0,0 @@
-export const prerender = true;
-export const ssr = false;
\ No newline at end of file
diff --git a/packages/yakkl-wallet/src/routes/(wallet)/swap/+page.ts b/packages/yakkl-wallet/src/routes/(wallet)/swap/+page.ts
deleted file mode 100644
index dbf4e8f..0000000
--- a/packages/yakkl-wallet/src/routes/(wallet)/swap/+page.ts
+++ /dev/null
@@ -1 +0,0 @@
-export const prerender = false;
\ No newline at end of file
diff --git a/packages/yakkl-wallet/src/routes/(wallet)/tokens/+page.ts b/packages/yakkl-wallet/src/routes/(wallet)/tokens/+page.ts
deleted file mode 100644
index d2c0be2..0000000
--- a/packages/yakkl-wallet/src/routes/(wallet)/tokens/+page.ts
+++ /dev/null
@@ -1,2 +0,0 @@
-export const prerender = true;
-export const ssr = false;
\ No newline at end of file
diff --git a/packages/yakkl-wallet/src/routes/(wallet)/upgrade.v1backup/+page.svelte b/packages/yakkl-wallet/src/routes/(wallet)/upgrade.v1backup/+page.svelte
deleted file mode 100644
index 3c665b5..0000000
--- a/packages/yakkl-wallet/src/routes/(wallet)/upgrade.v1backup/+page.svelte
+++ /dev/null
@@ -1,231 +0,0 @@
-<!--
-  Upgrade Page - Comprehensive overview of all plan tiers and features
--->
-
-<script lang="ts">
-  import { currentPlan, isOnTrial } from '$lib/stores/plan.store';
-  import { PlanType } from '$lib/types';
-  import ProFeatures from '$lib/components/showcase/ProFeatures.svelte';
-  import PrivateFeatures from '$lib/components/showcase/PrivateFeatures.svelte';
-  import Upgrade from '$lib/components/Upgrade.svelte';
-
-  let plan = $derived($currentPlan);
-  let trial = $derived($isOnTrial);
-  let showUpgradeModal = $state(false);
-
-  const planComparison = [
-    {
-      name: 'Basic',
-      price: 'Free',
-      description: 'Essential wallet features for getting started',
-      features: [
-        'View balance and transactions',
-        'Send and receive tokens',
-        'Up to 3 accounts',
-        'Basic security features',
-        'Community support'
-      ],
-      highlight: false,
-      planType: PlanType.Basic
-    },
-    {
-      name: 'Pro',
-      price: '$9.99/month',
-      description: 'Advanced features for power users',
-      features: [
-        'Everything in Basic',
-        'Advanced analytics',
-        'AI assistant',
-        'Token swapping',
-        'Buy/sell crypto',
-        'DeFi integrations',
-        'Priority support',
-        'Unlimited accounts'
-      ],
-      highlight: true,
-      planType: PlanType.Pro
-    },
-    {
-      name: 'Enterprise',
-      price: '$49.99/month',
-      description: 'Business features and team management',
-      features: [
-        'Everything in Pro',
-        'Team management',
-        'Multi-signature wallets',
-        'White label solutions',
-        'Custom integrations',
-        'Dedicated support',
-        'SLA guarantees'
-      ],
-      highlight: false,
-      planType: PlanType.Enterprise
-    },
-    {
-      name: 'Founding Member',
-      price: 'Lifetime',
-      description: 'Exclusive benefits for early supporters',
-      features: [
-        'Everything in Pro',
-        'Lifetime access',
-        'Founding member benefits',
-        'Direct founder access',
-        'Special recognition',
-        'All future features',
-        'Priority everything'
-      ],
-      highlight: false,
-      planType: PlanType.FoundingMember
-    }
-  ];
-
-  function handlePlanUpgrade(targetPlan: PlanType) {
-    showUpgradeModal = true;
-  }
-</script>
-
-<div class="p-4 space-y-8">
-  <!-- Header -->
-  <div class="text-center">
-    <h1 class="text-3xl font-bold mb-4">Choose Your Plan</h1>
-    <p class="text-gray-600 dark:text-gray-400 max-w-2xl mx-auto">
-      {#if trial}
-        Your trial is active! Choose a plan to continue enjoying premium features.
-      {:else if plan === PlanType.Basic}
-        Unlock the full potential of your crypto wallet with advanced features and enhanced security.
-      {:else}
-        You're currently on the <strong>{plan}</strong> plan. Upgrade for even more features!
-      {/if}
-    </p>
-  </div>
-
-  <!-- Current Plan Status -->
-  {#if trial}
-    <div class="bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg p-4">
-      <div class="flex items-center gap-3">
-        <div class="text-orange-500">
-          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
-            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
-          </svg>
-        </div>
-        <div>
-          <h3 class="font-medium text-orange-700 dark:text-orange-300">Trial Active</h3>
-          <p class="text-sm text-orange-600 dark:text-orange-400">
-            You're currently enjoying Pro features. Choose a plan to continue after your trial ends.
-          </p>
-        </div>
-      </div>
-    </div>
-  {/if}
-
-  <!-- Plan Comparison Grid -->
-  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
-    {#each planComparison as planOption}
-      <div class="yakkl-card p-6 relative {planOption.highlight ? 'border-2 border-indigo-500 dark:border-indigo-400' : ''}">
-        {#if planOption.highlight}
-          <div class="absolute -top-3 left-1/2 transform -translate-x-1/2">
-            <span class="bg-indigo-500 text-white px-3 py-1 rounded-full text-xs font-medium">
-              Most Popular
-            </span>
-          </div>
-        {/if}
-
-        <div class="text-center mb-6">
-          <h3 class="text-xl font-bold mb-2">{planOption.name}</h3>
-          <div class="text-2xl font-bold text-indigo-600 dark:text-indigo-400 mb-2">
-            {planOption.price}
-          </div>
-          <p class="text-sm text-gray-600 dark:text-gray-400">
-            {planOption.description}
-          </p>
-        </div>
-
-        <ul class="space-y-2 mb-6">
-          {#each planOption.features as feature}
-            <li class="flex items-center gap-2 text-sm">
-              <svg class="w-4 h-4 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
-                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
-              </svg>
-              {feature}
-            </li>
-          {/each}
-        </ul>
-
-        <div class="text-center">
-          {#if plan === planOption.planType}
-            <div class="bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 px-4 py-2 rounded-lg text-sm font-medium">
-              Current Plan
-            </div>
-          {:else if planOption.planType === PlanType.Basic}
-            <button
-              disabled
-              class="w-full bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-400 px-4 py-2 rounded-lg text-sm font-medium cursor-not-allowed"
-            >
-              Downgrade Not Available
-            </button>
-          {:else}
-            <button
-              onclick={() => handlePlanUpgrade(planOption.planType)}
-              class="w-full {planOption.highlight ?
-                'bg-indigo-600 hover:bg-indigo-700 text-white' :
-                'bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-900 dark:text-gray-100'
-              } px-4 py-2 rounded-lg text-sm font-medium transition-colors"
-            >
-              {trial && planOption.planType === PlanType.Pro ? 'Continue with Pro' : 'Upgrade'}
-            </button>
-          {/if}
-        </div>
-      </div>
-    {/each}
-  </div>
-
-  <!-- Feature Showcases -->
-  <div class="space-y-8">
-    <!-- Pro Features -->
-    <ProFeatures variant="card" />
-
-    <!-- Private Features -->
-    <PrivateFeatures variant="card" />
-  </div>
-
-  <!-- FAQ Section -->
-  <div class="yakkl-card p-6">
-    <h2 class="text-xl font-bold mb-4">Frequently Asked Questions</h2>
-    <div class="space-y-4">
-      <div>
-        <h3 class="font-medium mb-2">Can I change my plan anytime?</h3>
-        <p class="text-sm text-gray-600 dark:text-gray-400">
-          Yes! You can upgrade or downgrade your plan at any time. Changes take effect immediately.
-        </p>
-      </div>
-
-      <div>
-        <h3 class="font-medium mb-2">Is there a free trial?</h3>
-        <p class="text-sm text-gray-600 dark:text-gray-400">
-          New users get a 14-day free trial of Pro features. No credit card required.
-        </p>
-      </div>
-
-      <div>
-        <h3 class="font-medium mb-2">What payment methods do you accept?</h3>
-        <p class="text-sm text-gray-600 dark:text-gray-400">
-          We accept all major credit cards, bank transfers, and cryptocurrency payments.
-        </p>
-      </div>
-
-      <div>
-        <h3 class="font-medium mb-2">Is my data secure?</h3>
-        <p class="text-sm text-gray-600 dark:text-gray-400">
-          Absolutely. We use bank-grade encryption and never store your private keys or personal data.
-        </p>
-      </div>
-    </div>
-  </div>
-</div>
-
-<!-- Upgrade Modal -->
-<Upgrade
-  bind:show={showUpgradeModal}
-  onComplete={() => showUpgradeModal = false}
-  onCancel={() => showUpgradeModal = false}
-/>
diff --git a/packages/yakkl-wallet/src/routes/+layout.svelte b/packages/yakkl-wallet/src/routes/+layout.svelte
index dbe3446..46ac6aa 100644
--- a/packages/yakkl-wallet/src/routes/+layout.svelte
+++ b/packages/yakkl-wallet/src/routes/+layout.svelte
@@ -9,6 +9,7 @@
   import { chainStore, currentChain, visibleChains } from '$lib/stores';
   import { planStore } from '$lib/stores';
   import { isModalOpen } from '$lib/stores';
+	import { getSettings, syncStorageToStore } from '$lib/common/stores';
 
   interface Props {
     children?: import('svelte').Snippet;
@@ -44,7 +45,6 @@
         // This helps prevent "Receiving end does not exist" errors during extension reload
         await new Promise(resolve => setTimeout(resolve, 100));
       // First check if user is authenticated
-      const { getSettings, syncStorageToStore } = await import('$lib/common/stores');
       const settings = await getSettings();
 
       if (settings && !settings.isLocked && settings.init) {
diff --git a/packages/yakkl-wallet/src/routes/+layout.ts b/packages/yakkl-wallet/src/routes/+layout.ts
index eb20dc0..77c7585 100644
--- a/packages/yakkl-wallet/src/routes/+layout.ts
+++ b/packages/yakkl-wallet/src/routes/+layout.ts
@@ -3,7 +3,7 @@ export const prerender = true; // Must be here to create files. Do NOT use ssr =
 
 import { YAKKL_INTERNAL } from '$lib/common/constants';
 import { isServerSide, wait } from '$lib/common/utils';
-// Removed: import type { Runtime } from 'webextension-polyfill';
+// Removed: import type { Runtime } from '$lib/types/browser-types';
 // Added: Use local type to avoid module resolution error in browser context
 import { handleLockDown } from '$lib/common/handlers';
 import { log } from '$lib/common/logger-wrapper';
diff --git a/packages/yakkl-wallet/src/routes/logout/+page.svelte b/packages/yakkl-wallet/src/routes/logout/+page.svelte
deleted file mode 100644
index a5deabf..0000000
--- a/packages/yakkl-wallet/src/routes/logout/+page.svelte
+++ /dev/null
@@ -1,65 +0,0 @@
-<script lang="ts">
-	import { browserSvelte } from '$lib/common/environment';
-	import {
-		yakklCurrentlySelectedStore,
-		yakklSettingsStore
-	} from '$lib/common/stores';
-	import { type Settings, type YakklCurrentlySelected } from '$lib/common';
-	import { log } from '$lib/common/logger-wrapper';
-	import { lockWallet } from '$lib/common/lockWallet';
-	import { ErrorHandler } from '$lib/managers/ErrorHandler';
-	import { goto } from '$app/navigation';
-
-	// Initialize error handler
-	if (browserSvelte) {
-		ErrorHandler.getInstance();
-	}
-
-	// Reactive State
-	let yakklCurrentlySelected: YakklCurrentlySelected | null = $state(null);
-	let yakklSettings: Settings | null = $state(null);
-
-	$effect(() => {
-		yakklCurrentlySelected = $yakklCurrentlySelectedStore;
-	});
-	$effect(() => {
-		yakklSettings = $yakklSettingsStore;
-	});
-
-	let isUpdating = false; // Prevent concurrent executions
-
-	async function update() {
-		if (!browserSvelte) return;
-		if (isUpdating) return; // Prevent multiple updates
-		isUpdating = true;
-
-		try {
-			// Use centralized lockWallet function which saves cache and clears state
-			await lockWallet('user-logout');
-		} catch (error) {
-			log.error('Logout failed:', false, error);
-			alert(
-				'Logout encountered an error. Please try again or refresh the extension via browser extension manager.'
-			);
-		} finally {
-			isUpdating = false;
-			// Safely close the window, handling both extension and web contexts
-			try {
-        window.close();
-			} catch (closeError) {
-				log.error('Could not close window:', false, closeError);
-				await goto('/login'); // Redirect to login page only if window.close fails
-			}
-		}
-	}
-
-	if (browserSvelte) {
-		update();
-	}
-</script>
-
-<div>
-  <h1>Logging out...</h1>
-  <p>Please wait while we log you out.</p>
-  <p>If you are not redirected, please click <a href="/login">here</a>.</p>
-</div>
diff --git a/packages/yakkl-wallet/src/routes/migration-banner.svelte b/packages/yakkl-wallet/src/routes/migration-banner.svelte
deleted file mode 100644
index 8a46ddd..0000000
--- a/packages/yakkl-wallet/src/routes/migration-banner.svelte
+++ /dev/null
@@ -1,216 +0,0 @@
-<script lang="ts">
-	import { onMount } from 'svelte';
-	import { getMigrationStatus, type V2Migration } from './migrate';
-	import { uiStore } from '$lib/stores/ui.store';
-	import { get } from 'svelte/store';
-
-	let {
-		onMigrate = async () => {},
-		onDismiss = () => {},
-		showBanner = $bindable(true)
-	}: {
-		onMigrate?: () => Promise<void>;
-		onDismiss?: () => void;
-		showBanner?: boolean;
-	} = $props();
-
-	let migrationStatus = $state<{
-		isNeeded: boolean;
-		isCompleted: boolean;
-		migrationDate?: string;
-	}>({ isNeeded: false, isCompleted: false });
-
-	let isLoading = $state(false);
-	let showDetails = $state(false);
-
-	onMount(async () => {
-		try {
-			migrationStatus = await getMigrationStatus();
-		} catch (error) {
-			console.warn('Failed to check migration status:', error);
-		}
-	});
-
-	async function handleMigrate() {
-		try {
-			isLoading = true;
-			await onMigrate();
-
-			// Refresh status
-			migrationStatus = await getMigrationStatus();
-
-			// Show success notification
-			uiStore.showSuccess(
-				'Migration Complete!',
-				'Your wallet has been successfully upgraded to V2'
-			);
-
-			// Auto-dismiss banner after migration
-			setTimeout(() => {
-				showBanner = false;
-			}, 3000);
-
-		} catch (error) {
-			uiStore.showError(
-				'Migration Failed',
-				error instanceof Error ? error.message : 'Please try again later'
-			);
-		} finally {
-			isLoading = false;
-		}
-	}
-
-	function handleDismiss() {
-		showBanner = false;
-		onDismiss();
-	}
-</script>
-
-{#if showBanner && migrationStatus.isNeeded}
-	<div class="yakkl-migration-banner bg-gradient-to-r from-purple-500 to-indigo-600 text-white p-4 relative overflow-hidden">
-		<!-- Background pattern -->
-		<div class="absolute inset-0 opacity-10">
-			<svg class="w-full h-full" viewBox="0 0 100 100" preserveAspectRatio="none">
-				<defs>
-					<pattern id="grid" width="10" height="10" patternUnits="userSpaceOnUse">
-						<path d="M 10 0 L 0 0 0 10" fill="none" stroke="currentColor" stroke-width="0.5"/>
-					</pattern>
-				</defs>
-				<rect width="100" height="100" fill="url(#grid)" />
-			</svg>
-		</div>
-
-		<div class="relative z-10">
-			<div class="flex items-start justify-between gap-4">
-				<!-- Content -->
-				<div class="flex-1">
-					<div class="flex items-center gap-3 mb-2">
-						<!-- Upgrade icon -->
-						<div class="flex-shrink-0">
-							<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
-								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
-							</svg>
-						</div>
-
-						<div>
-							<h3 class="text-lg font-semibold">YAKKL V2 Available!</h3>
-							<p class="text-sm opacity-90">Experience the new wallet design with enhanced features</p>
-						</div>
-					</div>
-
-					<!-- Feature highlights -->
-					<div class="grid grid-cols-1 sm:grid-cols-3 gap-2 text-xs opacity-80 mb-3">
-						<div class="flex items-center gap-1">
-							<span class="w-1 h-1 bg-white rounded-full"></span>
-							Enhanced UI/UX
-						</div>
-						<div class="flex items-center gap-1">
-							<span class="w-1 h-1 bg-white rounded-full"></span>
-							Feature-based access
-						</div>
-						<div class="flex items-center gap-1">
-							<span class="w-1 h-1 bg-white rounded-full"></span>
-							Payment gateway
-						</div>
-					</div>
-
-					<!-- Action buttons -->
-					<div class="flex flex-wrap items-center gap-2">
-						<button
-							onclick={handleMigrate}
-							disabled={isLoading}
-							class="bg-white text-purple-600 px-4 py-2 rounded-lg font-medium hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"
-						>
-							{#if isLoading}
-								<svg class="w-4 h-4 animate-spin" fill="none" viewBox="0 0 24 24">
-									<circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
-									<path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
-								</svg>
-								Migrating...
-							{:else}
-								Migrate Now
-							{/if}
-						</button>
-
-						<button
-							onclick={() => showDetails = !showDetails}
-							class="text-white/80 hover:text-white text-sm underline"
-						>
-							{showDetails ? 'Hide' : 'Learn More'}
-						</button>
-					</div>
-
-					<!-- Details panel -->
-					{#if showDetails}
-						<div class="mt-3 p-3 bg-white/10 rounded-lg backdrop-blur-sm">
-							<h4 class="font-medium mb-2">What's new in V2?</h4>
-							<ul class="text-sm space-y-1 opacity-90">
-								<li> Modern, responsive design optimized for all screen sizes</li>
-								<li> Feature-based access control (Basic/Pro/Enterprise plans)</li>
-								<li> Integrated crypto payment gateway for merchants</li>
-								<li> Enhanced transaction management with real-time updates</li>
-								<li> AI assistant and advanced analytics (Pro features)</li>
-								<li> Improved security and backup/recovery options</li>
-							</ul>
-
-							<div class="mt-2 p-2 bg-white/5 rounded text-xs">
-								<strong>Safe Migration:</strong> Your existing data will be preserved and converted to the new format.
-								A backup is automatically created before migration.
-							</div>
-						</div>
-					{/if}
-				</div>
-
-				<!-- Dismiss button -->
-				<button
-					onclick={handleDismiss}
-					class="flex-shrink-0 text-white/60 hover:text-white/80 transition-colors p-1"
-					aria-label="Dismiss banner"
-				>
-					<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
-						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
-					</svg>
-				</button>
-			</div>
-		</div>
-
-		<!-- Animated elements -->
-		<div class="absolute right-4 top-4 opacity-20">
-			<svg class="w-24 h-24 animate-pulse" fill="currentColor" viewBox="0 0 24 24">
-				<path d="M12 2L13.09 8.26L20 9L13.09 9.74L12 16L10.91 9.74L4 9L10.91 8.26L12 2Z" />
-			</svg>
-		</div>
-	</div>
-{:else if migrationStatus.isCompleted}
-	<!-- Success state -->
-	<div class="bg-green-500 text-white p-3 text-center">
-		<div class="flex items-center justify-center gap-2">
-			<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
-				<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
-			</svg>
-			<span class="font-medium">Migration completed successfully!</span>
-			{#if migrationStatus.migrationDate}
-				<span class="text-sm opacity-80">
-					({new Date(migrationStatus.migrationDate).toLocaleDateString()})
-				</span>
-			{/if}
-		</div>
-	</div>
-{/if}
-
-<style>
-	.yakkl-migration-banner {
-		animation: slideInFromTop 0.5s ease-out;
-	}
-
-	@keyframes slideInFromTop {
-		from {
-			transform: translateY(-100%);
-			opacity: 0;
-		}
-		to {
-			transform: translateY(0);
-			opacity: 1;
-		}
-	}
-</style>
diff --git a/packages/yakkl-wallet/src/routes/vitest.config.ts b/packages/yakkl-wallet/src/routes/vitest.config.ts
deleted file mode 100644
index 76f3715..0000000
--- a/packages/yakkl-wallet/src/routes/vitest.config.ts
+++ /dev/null
@@ -1,50 +0,0 @@
-import { defineConfig } from 'vitest/config';
-import { svelte } from '@sveltejs/vite-plugin-svelte';
-import { resolve } from 'path';
-
-export default defineConfig({
-  plugins: [svelte({ hot: !process.env.VITEST })] as any,
-  test: {
-    include: ['lib/tests/**/*.{test,spec}.{js,ts}'],
-    globals: true,
-    environment: 'jsdom',
-    setupFiles: ['lib/tests/setup.ts'],
-    coverage: {
-      provider: 'v8',
-      reporter: ['text', 'json', 'html'],
-      exclude: [
-        'node_modules/',
-        'lib/tests/',
-        '**/*.d.ts',
-        '**/*.config.*'
-      ],
-      thresholds: {
-        global: {
-          branches: 60, // Lowered for initial implementation
-          functions: 60,
-          lines: 60,
-          statements: 60
-        }
-      }
-    }
-  },
-  resolve: {
-    alias: {
-      '$lib': resolve(__dirname, '../../../lib'),
-      '$app': resolve(__dirname, '../../../app'),
-      '$stores': resolve(__dirname, 'lib/stores'),
-      '$services': resolve(__dirname, 'lib/services'),
-      '$features': resolve(__dirname, 'lib/features'),
-      '$components': resolve(__dirname, 'lib/components'),
-      '$utils': resolve(__dirname, 'lib/utils'),
-      '$types': resolve(__dirname, 'lib/types')
-    }
-  },
-  define: {
-    global: 'globalThis'
-  },
-  // Handle module mocking
-  optimizeDeps: {
-    include: ['@testing-library/svelte']
-  }
-});
\ No newline at end of file
diff --git a/packages/yakkl-wallet/svelte.config.js b/packages/yakkl-wallet/svelte.config.js
index d694af5..c396656 100644
--- a/packages/yakkl-wallet/svelte.config.js
+++ b/packages/yakkl-wallet/svelte.config.js
@@ -41,7 +41,7 @@ const config = {
 					console.warn(`Ignoring prerender error on ${path} - likely due to crypto dependencies`);
 					return;
 				}
-				if (status === 404 && (path.includes('/preview2') || path.includes('/v2') || path.includes('/accounts/manage/'))) {
+				if (status === 404 && path.includes('/accounts/manage/')) {
 					// Ignore legacy routes and dynamic routes that no longer exist
 					return;
 				}
diff --git a/packages/yakkl-wallet/test-eth-balance.js b/packages/yakkl-wallet/test-eth-balance.js
deleted file mode 100644
index d9d6e9c..0000000
--- a/packages/yakkl-wallet/test-eth-balance.js
+++ /dev/null
@@ -1,64 +0,0 @@
-// Test script to check ETH balance fetch
-// Run this in the browser console after the extension is loaded
-
-async function testEthBalance() {
-  console.log('Testing ETH balance fetch...');
-  
-  // Test 1: Direct message to get balance
-  try {
-    const response = await chrome.runtime.sendMessage({
-      method: 'eth_getBalance',
-      params: ['0x742d35Cc6634C0532925a3b844Bc9e7595f8fA69', 'latest'] // Example address
-    });
-    console.log('Direct eth_getBalance response:', response);
-  } catch (error) {
-    console.error('Direct eth_getBalance error:', error);
-  }
-  
-  // Test 2: Get accounts
-  try {
-    const accountsResponse = await chrome.runtime.sendMessage({
-      method: 'eth_accounts'
-    });
-    console.log('eth_accounts response:', accountsResponse);
-    
-    if (accountsResponse.data && accountsResponse.data.length > 0) {
-      // Test balance for first account
-      const firstAccount = accountsResponse.data[0];
-      console.log('Testing balance for account:', firstAccount);
-      
-      const balanceResponse = await chrome.runtime.sendMessage({
-        method: 'eth_getBalance',
-        params: [firstAccount, 'latest']
-      });
-      console.log('Balance response for', firstAccount, ':', balanceResponse);
-    }
-  } catch (error) {
-    console.error('Accounts/balance test error:', error);
-  }
-  
-  // Test 3: Check if provider is available
-  if (window.ethereum) {
-    console.log('window.ethereum is available');
-    try {
-      const accounts = await window.ethereum.request({ method: 'eth_accounts' });
-      console.log('window.ethereum accounts:', accounts);
-      
-      if (accounts.length > 0) {
-        const balance = await window.ethereum.request({
-          method: 'eth_getBalance',
-          params: [accounts[0], 'latest']
-        });
-        console.log('window.ethereum balance (hex):', balance);
-        console.log('window.ethereum balance (ETH):', parseInt(balance, 16) / 1e18);
-      }
-    } catch (error) {
-      console.error('window.ethereum error:', error);
-    }
-  } else {
-    console.log('window.ethereum not available');
-  }
-}
-
-// Run the test
-testEthBalance();
\ No newline at end of file
diff --git a/packages/yakkl-wallet/test-extension.html b/packages/yakkl-wallet/test-extension.html
deleted file mode 100644
index 7315061..0000000
--- a/packages/yakkl-wallet/test-extension.html
+++ /dev/null
@@ -1,116 +0,0 @@
-<!DOCTYPE html>
-<html>
-<head>
-  <title>Extension Test</title>
-  <style>
-    body {
-      font-family: Arial, sans-serif;
-      padding: 20px;
-      max-width: 600px;
-      margin: auto;
-    }
-    .status {
-      padding: 10px;
-      margin: 10px 0;
-      border-radius: 5px;
-    }
-    .success {
-      background: #d4edda;
-      color: #155724;
-    }
-    .error {
-      background: #f8d7da;
-      color: #721c24;
-    }
-    .info {
-      background: #d1ecf1;
-      color: #0c5460;
-    }
-    button {
-      padding: 10px 20px;
-      margin: 5px;
-      cursor: pointer;
-    }
-  </style>
-</head>
-<body>
-  <h1>YAKKL Extension Test</h1>
-  
-  <div id="status"></div>
-  
-  <h2>Test Actions:</h2>
-  <button onclick="checkExtension()">Check Extension Status</button>
-  <button onclick="openWallet()">Open Smart Wallet</button>
-  <button onclick="checkServiceWorker()">Check Service Worker</button>
-  
-  <h2>Instructions:</h2>
-  <ol>
-    <li>Make sure the extension is installed and enabled in Chrome</li>
-    <li>Reload the extension in chrome://extensions/ if you just built it</li>
-    <li>Click "Check Extension Status" to verify it's working</li>
-    <li>Click "Open Smart Wallet" to test the popup/sidepanel</li>
-  </ol>
-  
-  <script>
-    function addStatus(message, type = 'info') {
-      const statusDiv = document.getElementById('status');
-      const div = document.createElement('div');
-      div.className = `status ${type}`;
-      div.textContent = `${new Date().toLocaleTimeString()}: ${message}`;
-      statusDiv.appendChild(div);
-    }
-    
-    function checkExtension() {
-      if (typeof chrome !== 'undefined' && chrome.runtime && chrome.runtime.id) {
-        addStatus('Extension is installed and accessible', 'success');
-        addStatus(`Extension ID: ${chrome.runtime.id}`, 'info');
-      } else {
-        addStatus('Extension not detected', 'error');
-      }
-    }
-    
-    function openWallet() {
-      try {
-        if (typeof chrome !== 'undefined' && chrome.runtime && chrome.runtime.sendMessage) {
-          // Send message to extension to open wallet
-          chrome.runtime.sendMessage(chrome.runtime.id, { 
-            type: 'OPEN_WALLET' 
-          }, (response) => {
-            if (chrome.runtime.lastError) {
-              addStatus(`Error: ${chrome.runtime.lastError.message}`, 'error');
-            } else {
-              addStatus('Message sent to extension', 'success');
-            }
-          });
-        } else {
-          addStatus('Cannot communicate with extension', 'error');
-        }
-      } catch (error) {
-        addStatus(`Error: ${error.message}`, 'error');
-      }
-    }
-    
-    function checkServiceWorker() {
-      if ('serviceWorker' in navigator) {
-        navigator.serviceWorker.getRegistrations().then(registrations => {
-          if (registrations.length > 0) {
-            addStatus(`Found ${registrations.length} service worker(s)`, 'success');
-            registrations.forEach((reg, i) => {
-              addStatus(`SW ${i+1}: ${reg.scope} - ${reg.active ? 'Active' : 'Not Active'}`, 'info');
-            });
-          } else {
-            addStatus('No service workers found', 'info');
-          }
-        });
-      } else {
-        addStatus('Service workers not supported', 'error');
-      }
-    }
-    
-    // Check on load
-    window.onload = () => {
-      checkExtension();
-    };
-  </script>
-</body>
-</html>
\ No newline at end of file
diff --git a/packages/yakkl-wallet/tsconfig.json b/packages/yakkl-wallet/tsconfig.json
index ac7f736..1b6c856 100644
--- a/packages/yakkl-wallet/tsconfig.json
+++ b/packages/yakkl-wallet/tsconfig.json
@@ -46,5 +46,5 @@
 		"src/lib/browser-polyfill.d.ts",
 		"src/**/*.svelte"
 	],
-	"exclude": ["**/node_modules/**", "dist", "src/lib/polyfill-mock.js", "src/lib/crypto-ssr-mock.js", "src/routes/lib.tmp/**", "**/*.tmp"]
+	"exclude": ["**/node_modules/**", "**v1**", "dist", "src/lib/polyfill-mock.js", "src/lib/crypto-ssr-mock.js", "src/routes/lib.tmp/**", "**/*.tmp"]
 }
diff --git a/packages/yakkl-wallet/vite.config.ts b/packages/yakkl-wallet/vite.config.ts
index e6a294f..2f638f9 100644
--- a/packages/yakkl-wallet/vite.config.ts
+++ b/packages/yakkl-wallet/vite.config.ts
@@ -61,10 +61,8 @@ export default defineConfig(({ mode }) => {
 				$managers: path.resolve('./src/lib/managers'),
 				$plugins: path.resolve('./src/lib/plugins'),
 				$contexts: path.resolve('./src/contexts'),
-				// ...(process.env.YAKKL_PRO === 'true' && { $pro: path.resolve('./src/pro') }),
-				// ...(process.env.YAKKL_PRIVATE === 'true' && { $private: path.resolve('./src/private') }),
-				//// 'webextension-polyfill': path.resolve( __dirname, 'node_modules/webextension-polyfill/dist/browser-polyfill.js' ),
-				'webextension-polyfill': path.resolve(__dirname, 'src/lib/polyfill-mock.js'), // Use mock for SSR safety
+				// For build time, use the import wrapper to handle both SSR and client
+				'webextension-polyfill': path.resolve(__dirname, 'src/lib/browser-polyfill-import.ts'),
 				stream: 'stream-browserify',
 				net: 'net-browserify',
 				fs: path.resolve(__dirname, 'empty.js'),
@@ -96,7 +94,10 @@ export default defineConfig(({ mode }) => {
 				'webextension-polyfill',
 				'ethers',
 				'**/*.tmp/**/*', // Exclude .tmp directories - the .tmp items here do not seem to be working as expected. I will keep it and handle it another way.
-				'**/*.tmp' // Exclude .tmp files
+				'**/*.tmp', // Exclude .tmp files
+				'**/v1.tmp/**/*',
+				'**/v1.tmp',
+				'**v1**' // Exclude v1 files - remove this once we are done with v1
 			],
 			entries: [
 				'!**/*.tmp/**/*', // Exclude .tmp directories
@@ -112,6 +113,15 @@ export default defineConfig(({ mode }) => {
 			noExternal: ['@walletconnect/web3wallet', '@walletconnect/core'],
 			external: ['webextension-polyfill', 'crypto-browserify']
 		},
+		server: {
+			hmr: false, // Disable HMR completely
+			fs: {
+				allow: ['..'] // Allow serving files from parent directory
+			},
+			watch: {
+				usePolling: false
+			}
+		},
 		build: {
 			sourcemap: true,
 			minify: 'terser',
@@ -170,14 +180,6 @@ export default defineConfig(({ mode }) => {
 			drop: isProd ? ['debugger'] : [],
 			// Mark certain functions as pure for tree-shaking
 			pure: isProd ? ['log.debug', 'log.info', 'log.debugStack', 'log.infoStack'] : []
-		},
-		server: {
-			// Disable HMR for browser extensions
-			hmr: false,
-			watch: {
-				// Don't trigger full page reloads
-				usePolling: false
-			}
 		}
 	};
 });
diff --git a/packages/yakkl-wallet/webpack.config.cjs b/packages/yakkl-wallet/webpack.config.cjs
index c146c7d..4303cbc 100644
--- a/packages/yakkl-wallet/webpack.config.cjs
+++ b/packages/yakkl-wallet/webpack.config.cjs
@@ -70,7 +70,8 @@ module.exports = {
 				exclude: [
 					path.resolve(__dirname, 'node_modules'),
 					path.resolve(__dirname, '../../node_modules'),
-					path.resolve(__dirname, '../uniswap-alpha-router-service/node_modules')
+					path.resolve(__dirname, '../uniswap-alpha-router-service/node_modules'),
+					path.resolve(__dirname, '**v1**') // Exclude v1 files - remove this once we are done with v1
 				],
 				use: [
 					{
diff --git a/pnpm-lock.yaml b/pnpm-lock.yaml
index c541a77..91f2cec 100644
--- a/pnpm-lock.yaml
+++ b/pnpm-lock.yaml
@@ -308,6 +308,9 @@ importers:
       cheerio:
         specifier: ^1.0.0
         version: 1.1.0
+      decimal.js:
+        specifier: ^10.6.0
+        version: 10.6.0
       esbuild:
         specifier: ^0.24.2
         version: 0.24.2
@@ -727,463 +730,6 @@ importers:
         specifier: ^4.4.2
         version: 4.4.2
 
-  packages/yakkl-wallet-v1:
-    dependencies:
-      '@ethersproject/properties':
-        specifier: ^5.7.0
-        version: 5.8.0
-      '@ethersproject/web':
-        specifier: ^5.7.1
-        version: 5.8.0
-      '@ledgerhq/hw-app-eth':
-        specifier: ^6.45.7
-        version: 6.45.7
-      '@ledgerhq/hw-transport-webhid':
-        specifier: ^6.30.2
-        version: 6.30.2
-      '@ledgerhq/hw-transport-webusb':
-        specifier: ^6.29.6
-        version: 6.29.6
-      '@rollup/plugin-commonjs':
-        specifier: ^28.0.2
-        version: 28.0.6(rollup@4.43.0)
-      '@rollup/plugin-node-resolve':
-        specifier: ^15.3.1
-        version: 15.3.1(rollup@4.43.0)
-      '@uniswap/v3-core':
-        specifier: ^1.0.1
-        version: 1.0.1
-      '@walletconnect/web3wallet':
-        specifier: ^1.16.1
-        version: 1.16.1(bufferutil@4.0.9)(utf-8-validate@5.0.10)
-      '@yakkl/core':
-        specifier: workspace:*
-        version: link:../yakkl-core
-      assert:
-        specifier: ^2.1.0
-        version: 2.1.0
-      buffer:
-        specifier: ^6.0.3
-        version: 6.0.3
-      cheerio:
-        specifier: ^1.0.0
-        version: 1.1.0
-      esbuild:
-        specifier: ^0.24.2
-        version: 0.24.2
-      https-browserify:
-        specifier: ^1.0.0
-        version: 1.0.0
-      is-stream:
-        specifier: ^4.0.1
-        version: 4.0.1
-      node-fetch:
-        specifier: ^3.3.2
-        version: 3.3.2
-      os-browserify:
-        specifier: ^0.3.0
-        version: 0.3.0
-      process:
-        specifier: ^0.11.10
-        version: 0.11.10
-      stream-http:
-        specifier: ^3.2.0
-        version: 3.2.0
-      svelte-chartjs:
-        specifier: ^3.1.5
-        version: 3.1.5(chart.js@4.5.0)(svelte@5.34.3)
-      svelte-confetti:
-        specifier: ^2.2.0
-        version: 2.3.1(svelte@5.34.3)
-      url:
-        specifier: ^0.11.4
-        version: 0.11.4
-      uuid:
-        specifier: ^10.0.0
-        version: 10.0.0
-    devDependencies:
-      '@babel/cli':
-        specifier: ^7.26.4
-        version: 7.27.2(@babel/core@7.27.4)
-      '@babel/core':
-        specifier: ^7.26.0
-        version: 7.27.4
-      '@babel/preset-env':
-        specifier: ^7.26.0
-        version: 7.27.2(@babel/core@7.27.4)
-      '@babel/preset-typescript':
-        specifier: ^7.26.0
-        version: 7.27.1(@babel/core@7.27.4)
-      '@eslint/compat':
-        specifier: ^1.2.5
-        version: 1.3.0(eslint@9.29.0(jiti@1.21.7))
-      '@internationalized/date':
-        specifier: ^3.7.0
-        version: 3.8.2
-      '@neoconfetti/svelte':
-        specifier: 2.0.0
-        version: 2.0.0
-      '@playwright/test':
-        specifier: ^1.49.1
-        version: 1.53.0
-      '@rollup/plugin-replace':
-        specifier: ^5.0.7
-        version: 5.0.7(rollup@4.43.0)
-      '@sushiswap/sdk':
-        specifier: 5.0.0-canary.116
-        version: 5.0.0-canary.116(bufferutil@4.0.9)(utf-8-validate@5.0.10)
-      '@sveltejs/adapter-auto':
-        specifier: ^3.3.1
-        version: 3.3.1(@sveltejs/kit@2.21.5(@sveltejs/vite-plugin-svelte@5.1.0(svelte@5.34.3)(vite@6.3.5(@types/node@20.19.1)(jiti@1.21.7)(terser@5.43.0)(yaml@2.7.0)))(svelte@5.34.3)(vite@6.3.5(@types/node@20.19.1)(jiti@1.21.7)(terser@5.43.0)(yaml@2.7.0)))
-      '@sveltejs/adapter-static':
-        specifier: ^3.0.8
-        version: 3.0.8(@sveltejs/kit@2.21.5(@sveltejs/vite-plugin-svelte@5.1.0(svelte@5.34.3)(vite@6.3.5(@types/node@20.19.1)(jiti@1.21.7)(terser@5.43.0)(yaml@2.7.0)))(svelte@5.34.3)(vite@6.3.5(@types/node@20.19.1)(jiti@1.21.7)(terser@5.43.0)(yaml@2.7.0)))
-      '@sveltejs/kit':
-        specifier: ^2.17.1
-        version: 2.21.5(@sveltejs/vite-plugin-svelte@5.1.0(svelte@5.34.3)(vite@6.3.5(@types/node@20.19.1)(jiti@1.21.7)(terser@5.43.0)(yaml@2.7.0)))(svelte@5.34.3)(vite@6.3.5(@types/node@20.19.1)(jiti@1.21.7)(terser@5.43.0)(yaml@2.7.0))
-      '@sveltejs/vite-plugin-svelte':
-        specifier: ^5.0.3
-        version: 5.1.0(svelte@5.34.3)(vite@6.3.5(@types/node@20.19.1)(jiti@1.21.7)(terser@5.43.0)(yaml@2.7.0))
-      '@tailwindcss/aspect-ratio':
-        specifier: ^0.4.2
-        version: 0.4.2(tailwindcss@3.4.17(ts-node@10.9.2(@types/node@20.19.1)(typescript@5.8.3)))
-      '@tailwindcss/container-queries':
-        specifier: ^0.1.1
-        version: 0.1.1(tailwindcss@3.4.17(ts-node@10.9.2(@types/node@20.19.1)(typescript@5.8.3)))
-      '@tailwindcss/forms':
-        specifier: ^0.5.10
-        version: 0.5.10(tailwindcss@3.4.17(ts-node@10.9.2(@types/node@20.19.1)(typescript@5.8.3)))
-      '@tailwindcss/typography':
-        specifier: ^0.5.16
-        version: 0.5.16(tailwindcss@3.4.17(ts-node@10.9.2(@types/node@20.19.1)(typescript@5.8.3)))
-      '@tanstack/table-core':
-        specifier: ^8.20.5
-        version: 8.21.3
-      '@types/bn.js':
-        specifier: ^5.1.6
-        version: 5.2.0
-      '@types/chrome':
-        specifier: ^0.0.287
-        version: 0.0.287
-      '@types/jest':
-        specifier: ^29.5.14
-        version: 29.5.14
-      '@types/ledgerhq__hw-transport':
-        specifier: ^6.0.0
-        version: 6.0.0
-      '@types/lodash':
-        specifier: ^4.17.14
-        version: 4.17.17
-      '@types/lodash-es':
-        specifier: ^4.17.12
-        version: 4.17.12
-      '@types/mustache':
-        specifier: ^4.2.5
-        version: 4.2.6
-      '@types/node':
-        specifier: ^20.17.14
-        version: 20.19.1
-      '@types/readable-stream':
-        specifier: ^4.0.18
-        version: 4.0.21
-      '@types/uuid':
-        specifier: ^10.0.0
-        version: 10.0.0
-      '@types/webextension-polyfill':
-        specifier: ^0.12.1
-        version: 0.12.3
-      '@types/zxcvbn':
-        specifier: ^4.4.5
-        version: 4.4.5
-      '@typescript-eslint/eslint-plugin':
-        specifier: ^5.62.0
-        version: 5.62.0(@typescript-eslint/parser@5.62.0(eslint@9.29.0(jiti@1.21.7))(typescript@5.8.3))(eslint@9.29.0(jiti@1.21.7))(typescript@5.8.3)
-      '@typescript-eslint/parser':
-        specifier: ^5.62.0
-        version: 5.62.0(eslint@9.29.0(jiti@1.21.7))(typescript@5.8.3)
-      '@uniswap/permit2-sdk':
-        specifier: ^1.3.0
-        version: 1.3.1(bufferutil@4.0.9)(utf-8-validate@5.0.10)
-      '@uniswap/router-sdk':
-        specifier: ^1.18.0
-        version: 1.23.0(hardhat@2.22.17(bufferutil@4.0.9)(ts-node@10.9.2(@types/node@20.19.1)(typescript@5.8.3))(typescript@5.8.3)(utf-8-validate@5.0.10))
-      '@uniswap/sdk-core':
-        specifier: ^6.1.1
-        version: 6.1.1
-      '@uniswap/universal-router-sdk':
-        specifier: ^4.10.0
-        version: 4.19.5(bufferutil@4.0.9)(hardhat@2.22.17(bufferutil@4.0.9)(ts-node@10.9.2(@types/node@20.19.1)(typescript@5.8.3))(typescript@5.8.3)(utf-8-validate@5.0.10))(utf-8-validate@5.0.10)
-      '@uniswap/v3-periphery':
-        specifier: ^1.4.4
-        version: 1.4.4
-      '@uniswap/v3-sdk':
-        specifier: ^3.21.0
-        version: 3.25.2(hardhat@2.22.17(bufferutil@4.0.9)(ts-node@10.9.2(@types/node@20.19.1)(typescript@5.8.3))(typescript@5.8.3)(utf-8-validate@5.0.10))
-      '@unovis/svelte':
-        specifier: ^1.5.0
-        version: 1.5.2(@unovis/ts@1.5.0)(svelte@5.34.3)
-      alchemy-sdk:
-        specifier: ^3.5.1
-        version: 3.6.0(bufferutil@4.0.9)(typescript@5.8.3)(utf-8-validate@5.0.10)
-      autoprefixer:
-        specifier: ^10.4.20
-        version: 10.4.21(postcss@8.5.6)
-      axios:
-        specifier: ^1.7.9
-        version: 1.10.0
-      babel-jest:
-        specifier: ^29.7.0
-        version: 29.7.0(@babel/core@7.27.4)
-      babel-loader:
-        specifier: ^9.2.1
-        version: 9.2.1(@babel/core@7.27.4)(webpack@5.99.9)
-      bits-ui:
-        specifier: 1.0.0-next.74
-        version: 1.0.0-next.74(svelte@5.34.3)
-      clipboard:
-        specifier: ^2.0.11
-        version: 2.0.11
-      clsx:
-        specifier: ^2.1.1
-        version: 2.1.1
-      copy-webpack-plugin:
-        specifier: ^12.0.2
-        version: 12.0.2(webpack@5.99.9)
-      crypto-browserify:
-        specifier: ^3.12.1
-        version: 3.12.1
-      daisyui:
-        specifier: ^4.12.23
-        version: 4.12.24(postcss@8.5.6)
-      detect-browser:
-        specifier: ^5.3.0
-        version: 5.3.0
-      dexie:
-        specifier: ^4.0.11
-        version: 4.0.11
-      dotenv:
-        specifier: ^16.4.7
-        version: 16.5.0
-      dotenv-webpack:
-        specifier: ^8.1.0
-        version: 8.1.0(webpack@5.99.9)
-      dts-cli:
-        specifier: ^2.0.5
-        version: 2.0.5(@babel/plugin-syntax-flow@7.26.0(@babel/core@7.27.4))(@babel/plugin-transform-react-jsx@7.25.9(@babel/core@7.27.4))(@jest/transform@30.0.0)(@jest/types@30.0.0)(@types/babel__core@7.20.5)(@types/node@20.19.1)(bufferutil@4.0.9)(esbuild@0.24.2)(jest-util@30.0.0)(utf-8-validate@5.0.10)
-      easyqrcodejs:
-        specifier: ^4.6.1
-        version: 4.6.2
-      embla-carousel-svelte:
-        specifier: ^8.5.2
-        version: 8.6.0(svelte@5.34.3)
-      eslint:
-        specifier: ^9.18.0
-        version: 9.29.0(jiti@1.21.7)
-      eslint-config-prettier:
-        specifier: ^9.1.0
-        version: 9.1.0(eslint@9.29.0(jiti@1.21.7))
-      eslint-plugin-svelte:
-        specifier: ^2.46.1
-        version: 2.46.1(eslint@9.29.0(jiti@1.21.7))(svelte@5.34.3)(ts-node@10.9.2(@types/node@20.19.1)(typescript@5.8.3))
-      ethereum-blockies-base64:
-        specifier: ^1.0.2
-        version: 1.0.2
-      ethers:
-        specifier: npm:ethers@^5.7.2
-        version: 5.8.0(bufferutil@4.0.9)(utf-8-validate@5.0.10)
-      ethers-v6:
-        specifier: npm:ethers@^6.13.5
-        version: ethers@6.14.4(bufferutil@4.0.9)(utf-8-validate@5.0.10)
-      flowbite:
-        specifier: ^2.5.2
-        version: 2.5.2(rollup@4.43.0)
-      flowbite-svelte:
-        specifier: ^0.46.23
-        version: 0.46.23(rollup@4.43.0)(svelte@5.34.3)
-      flowbite-svelte-icons:
-        specifier: ^1.6.2
-        version: 1.6.2(svelte@5.34.3)(tailwind-merge@2.6.0)(tailwindcss@3.4.17(ts-node@10.9.2(@types/node@20.19.1)(typescript@5.8.3)))
-      formsnap:
-        specifier: ^2.0.0
-        version: 2.0.1(svelte@5.34.3)(sveltekit-superforms@2.27.0(@sveltejs/kit@2.21.5(@sveltejs/vite-plugin-svelte@5.1.0(svelte@5.34.3)(vite@6.3.5(@types/node@20.19.1)(jiti@1.21.7)(terser@5.43.0)(yaml@2.7.0)))(svelte@5.34.3)(vite@6.3.5(@types/node@20.19.1)(jiti@1.21.7)(terser@5.43.0)(yaml@2.7.0)))(@types/json-schema@7.0.15)(esbuild@0.24.2)(svelte@5.34.3)(typescript@5.8.3))
-      fs:
-        specifier: 0.0.1-security
-        version: 0.0.1-security
-      globals:
-        specifier: ^15.14.0
-        version: 15.15.0
-      idb:
-        specifier: ^8.0.2
-        version: 8.0.3
-      install:
-        specifier: ^0.13.0
-        version: 0.13.0
-      jest:
-        specifier: ^29.7.0
-        version: 29.7.0(@types/node@20.19.1)(babel-plugin-macros@3.1.0)(ts-node@10.9.2(@types/node@20.19.1)(typescript@5.8.3))
-      lodash:
-        specifier: ^4.17.21
-        version: 4.17.21
-      lodash-es:
-        specifier: ^4.17.21
-        version: 4.17.21
-      lucide-svelte:
-        specifier: ^0.468.0
-        version: 0.468.0(svelte@5.34.3)
-      mode-watcher:
-        specifier: ^0.5.0
-        version: 0.5.1(svelte@5.34.3)
-      mustache:
-        specifier: ^4.2.0
-        version: 4.2.0
-      net-browserify:
-        specifier: ^0.2.4
-        version: 0.2.4(bufferutil@4.0.9)(utf-8-validate@5.0.10)
-      node-polyfill-webpack-plugin:
-        specifier: ^4.1.0
-        version: 4.1.0(webpack@5.99.9)
-      npm:
-        specifier: ^10.9.2
-        version: 10.9.2
-      openai:
-        specifier: ^4.79.3
-        version: 4.104.0(ws@8.18.2(bufferutil@4.0.9)(utf-8-validate@5.0.10))(zod@3.25.67)
-      paneforge:
-        specifier: 1.0.0-next.2
-        version: 1.0.0-next.2(svelte@5.34.3)
-      path:
-        specifier: ^0.12.7
-        version: 0.12.7
-      path-browserify:
-        specifier: ^1.0.1
-        version: 1.0.1
-      phosphor-svelte:
-        specifier: ^3.0.1
-        version: 3.0.1(svelte@5.34.3)(vite@6.3.5(@types/node@20.19.1)(jiti@1.21.7)(terser@5.43.0)(yaml@2.7.0))
-      postcss:
-        specifier: ^8.5.1
-        version: 8.5.6
-      prettier:
-        specifier: ^3.4.2
-        version: 3.5.3
-      prettier-plugin-svelte:
-        specifier: ^3.3.3
-        version: 3.4.0(prettier@3.5.3)(svelte@5.34.3)
-      prettier-plugin-tailwindcss:
-        specifier: ^0.6.10
-        version: 0.6.12(prettier-plugin-svelte@3.4.0(prettier@3.5.3)(svelte@5.34.3))(prettier@3.5.3)
-      readable-stream:
-        specifier: ^4.7.0
-        version: 4.7.0
-      rollup:
-        specifier: ^4.31.0
-        version: 4.43.0
-      rollup-plugin-node-polyfills:
-        specifier: ^0.2.1
-        version: 0.2.1
-      stream:
-        specifier: ^0.0.3
-        version: 0.0.3
-      stream-browserify:
-        specifier: ^3.0.0
-        version: 3.0.0
-      svelte:
-        specifier: ^5.20.0
-        version: 5.34.3
-      svelte-check:
-        specifier: ^4.1.4
-        version: 4.2.1(picomatch@4.0.2)(svelte@5.34.3)(typescript@5.8.3)
-      svelte-forms-lib:
-        specifier: ^2.0.1
-        version: 2.0.1
-      svelte-radix:
-        specifier: ^2.0.1
-        version: 2.0.1(svelte@5.34.3)
-      svelte-sonner:
-        specifier: ^0.3.28
-        version: 0.3.28(svelte@5.34.3)
-      sveltekit-adapter-chrome-extension:
-        specifier: ^2.0.1
-        version: 2.0.1(@sveltejs/adapter-static@3.0.8(@sveltejs/kit@2.21.5(@sveltejs/vite-plugin-svelte@5.1.0(svelte@5.34.3)(vite@6.3.5(@types/node@20.19.1)(jiti@1.21.7)(terser@5.43.0)(yaml@2.7.0)))(svelte@5.34.3)(vite@6.3.5(@types/node@20.19.1)(jiti@1.21.7)(terser@5.43.0)(yaml@2.7.0))))
-      sveltekit-superforms:
-        specifier: ^2.23.0
-        version: 2.27.0(@sveltejs/kit@2.21.5(@sveltejs/vite-plugin-svelte@5.1.0(svelte@5.34.3)(vite@6.3.5(@types/node@20.19.1)(jiti@1.21.7)(terser@5.43.0)(yaml@2.7.0)))(svelte@5.34.3)(vite@6.3.5(@types/node@20.19.1)(jiti@1.21.7)(terser@5.43.0)(yaml@2.7.0)))(@types/json-schema@7.0.15)(esbuild@0.24.2)(svelte@5.34.3)(typescript@5.8.3)
-      tailwind-merge:
-        specifier: ^2.6.0
-        version: 2.6.0
-      tailwind-variants:
-        specifier: ^0.3.1
-        version: 0.3.1(tailwindcss@3.4.17(ts-node@10.9.2(@types/node@20.19.1)(typescript@5.8.3)))
-      tailwindcss:
-        specifier: ^3.4.17
-        version: 3.4.17(ts-node@10.9.2(@types/node@20.19.1)(typescript@5.8.3))
-      tailwindcss-animate:
-        specifier: ^1.0.7
-        version: 1.0.7(tailwindcss@3.4.17(ts-node@10.9.2(@types/node@20.19.1)(typescript@5.8.3)))
-      tailwindcss-dotted-background:
-        specifier: ^1.1.0
-        version: 1.1.0(tailwindcss@3.4.17(ts-node@10.9.2(@types/node@20.19.1)(typescript@5.8.3)))
-      terser:
-        specifier: ^5.37.0
-        version: 5.43.0
-      terser-webpack-plugin:
-        specifier: ^5.3.11
-        version: 5.3.14(esbuild@0.24.2)(webpack@5.99.9)
-      ts-jest:
-        specifier: ^29.2.5
-        version: 29.4.0(@babel/core@7.27.4)(@jest/transform@30.0.0)(@jest/types@30.0.0)(babel-jest@29.7.0(@babel/core@7.27.4))(esbuild@0.24.2)(jest-util@30.0.0)(jest@29.7.0(@types/node@20.19.1)(babel-plugin-macros@3.1.0)(ts-node@10.9.2(@types/node@20.19.1)(typescript@5.8.3)))(typescript@5.8.3)
-      ts-loader:
-        specifier: ^9.5.2
-        version: 9.5.2(typescript@5.8.3)(webpack@5.99.9)
-      tslib:
-        specifier: ^2.8.1
-        version: 2.8.1
-      typescript:
-        specifier: ^5.7.3
-        version: 5.8.3
-      typescript-eslint:
-        specifier: ^8.21.0
-        version: 8.34.1(eslint@9.29.0(jiti@1.21.7))(typescript@5.8.3)
-      vaul-svelte:
-        specifier: 1.0.0-next.3
-        version: 1.0.0-next.3(svelte@5.34.3)
-      vite:
-        specifier: ^6.0.11
-        version: 6.3.5(@types/node@20.19.1)(jiti@1.21.7)(terser@5.43.0)(yaml@2.7.0)
-      vite-plugin-iso-import:
-        specifier: ^1.1.0
-        version: 1.2.0(vite@6.3.5(@types/node@20.19.1)(jiti@1.21.7)(terser@5.43.0)(yaml@2.7.0))
-      vite-plugin-node-polyfills:
-        specifier: ^0.22.0
-        version: 0.22.0(rollup@4.43.0)(vite@6.3.5(@types/node@20.19.1)(jiti@1.21.7)(terser@5.43.0)(yaml@2.7.0))
-      vite-plugin-static-copy:
-        specifier: ^2.2.0
-        version: 2.3.1(vite@6.3.5(@types/node@20.19.1)(jiti@1.21.7)(terser@5.43.0)(yaml@2.7.0))
-      vitest:
-        specifier: ^2.1.8
-        version: 2.1.9(@types/node@20.19.1)(jsdom@20.0.3(bufferutil@4.0.9)(utf-8-validate@5.0.10))(terser@5.43.0)
-      vm-browserify:
-        specifier: ^1.1.2
-        version: 1.1.2
-      webextension-polyfill:
-        specifier: ^0.12.0
-        version: 0.12.0
-      webpack:
-        specifier: ^5.97.1
-        version: 5.99.9(esbuild@0.24.2)(webpack-cli@5.1.4)
-      webpack-cli:
-        specifier: ^5.1.4
-        version: 5.1.4(webpack@5.99.9)
-      yup:
-        specifier: ^1.6.1
-        version: 1.6.1
-      zod:
-        specifier: ^3.24.1
-        version: 3.25.67
-      zxcvbn:
-        specifier: ^4.4.2
-        version: 4.4.2
-
 packages:
 
   '@adraffy/ens-normalize@1.10.1':
@@ -3921,9 +3467,6 @@ packages:
   '@types/chai@5.2.2':
     resolution: {integrity: sha512-8kB30R7Hwqf40JPiKhVzodJs2Qc1ZJ5zuT3uzw5Hq/dhNCl3G3l83jfpdI1e20BP348+fV7VIL/+FxaXkqBmWg==}
 
-  '@types/chrome@0.0.287':
-    resolution: {integrity: sha512-wWhBNPNXZHwycHKNYnexUcpSbrihVZu++0rdp6GEk5ZgAglenLx+RwdEouh6FrHS0XQiOxSd62yaujM1OoQlZQ==}
-
   '@types/chrome@0.0.326':
     resolution: {integrity: sha512-WS7jKf3ZRZFHOX7dATCZwqNJgdfiSF0qBRFxaO0LhIOvTNBrfkab26bsZwp6EBpYtqp8loMHJTnD6vDTLWPKYw==}
 
@@ -6002,8 +5545,8 @@ packages:
   decimal.js-light@2.5.1:
     resolution: {integrity: sha512-qIMFpTMZmny+MMIitAB6D7iVPEorVw6YQRWkvarTkT4tBeSLLiHzcwj6q0MmYSFCiVpiqPJTJEYIrpcPzVEIvg==}
 
-  decimal.js@10.4.3:
-    resolution: {integrity: sha512-VBBaLc1MgL5XpzgIP7ny5Z6Nx3UrRkIViUkPUdtl9aya5amy3De1gsUUSB1g3+3sExYNjCAsAznmukyxCb1GRA==}
+  decimal.js@10.6.0:
+    resolution: {integrity: sha512-YpgQiITW3JXGntzdUmyUR1V812Hn8T1YVXhCu+wO3OpS4eU9l4YdD3qjyiKdV6mvV29zapkMeD390UVEf2lkUg==}
 
   decode-uri-component@0.2.2:
     resolution: {integrity: sha512-FqUYQ+8o158GyGTrMFJms9qh3CqTKvAqgqsTnkLI8sKu0028orqBhxNMFkFen0zGyg6epACD32pjVk58ngIErQ==}
@@ -14325,11 +13868,6 @@ snapshots:
     dependencies:
       '@types/deep-eql': 4.0.2
 
-  '@types/chrome@0.0.287':
-    dependencies:
-      '@types/filesystem': 0.0.36
-      '@types/har-format': 1.2.16
-
   '@types/chrome@0.0.326':
     dependencies:
       '@types/filesystem': 0.0.36
@@ -17287,7 +16825,7 @@ snapshots:
 
   decimal.js-light@2.5.1: {}
 
-  decimal.js@10.4.3: {}
+  decimal.js@10.6.0: {}
 
   decode-uri-component@0.2.2: {}
 
@@ -19919,7 +19457,7 @@ snapshots:
       cssom: 0.5.0
       cssstyle: 2.3.0
       data-urls: 3.0.2
-      decimal.js: 10.4.3
+      decimal.js: 10.6.0
       domexception: 4.0.0
       escodegen: 2.1.0
       form-data: 4.0.1
@@ -20623,21 +20161,6 @@ snapshots:
     transitivePeerDependencies:
       - encoding
 
-  openai@4.104.0(ws@8.18.2(bufferutil@4.0.9)(utf-8-validate@5.0.10))(zod@3.25.67):
-    dependencies:
-      '@types/node': 18.19.112
-      '@types/node-fetch': 2.6.12
-      abort-controller: 3.0.0
-      agentkeepalive: 4.6.0
-      form-data-encoder: 1.7.2
-      formdata-node: 4.4.1
-      node-fetch: 2.7.0
-    optionalDependencies:
-      ws: 8.18.2(bufferutil@4.0.9)(utf-8-validate@5.0.10)
-      zod: 3.25.67
-    transitivePeerDependencies:
-      - encoding
-
   optionator@0.9.4:
     dependencies:
       deep-is: 0.1.4
