import{aK as is_array,b5 as get_prototype_of,b6 as object_prototype,a7 as untrack,S as STATE_SYMBOL,b7 as console_log_state}from"./BaS8d5lg.js";import{s as state_snapshot_uncloneable}from"./D_ljX5ue.js";const empty=[];function snapshot(value,skip_warning=false){if(!skip_warning){const paths=[];const copy=clone(value,new Map,"",paths);if(paths.length===1&&paths[0]===""){state_snapshot_uncloneable()}else if(paths.length>0){const slice=paths.length>10?paths.slice(0,7):paths.slice(0,10);const excess=paths.length-slice.length;let uncloned=slice.map(path=>`- <value>${path}`).join("\n");if(excess>0)uncloned+=`\n- ...and ${excess} more`;state_snapshot_uncloneable(uncloned)}return copy}return clone(value,new Map,"",empty)}function clone(value,cloned,path,paths,original=null){if(typeof value==="object"&&value!==null){var unwrapped=cloned.get(value);if(unwrapped!==void 0)return unwrapped;if(value instanceof Map)return new Map(value);if(value instanceof Set)return new Set(value);if(is_array(value)){var copy=Array(value.length);cloned.set(value,copy);if(original!==null){cloned.set(original,copy)}for(var i=0;i<value.length;i+=1){var element=value[i];if(i in value){copy[i]=clone(element,cloned,`${path}[${i}]`,paths)}}return copy}if(get_prototype_of(value)===object_prototype){copy={};cloned.set(value,copy);if(original!==null){cloned.set(original,copy)}for(var key in value){copy[key]=clone(value[key],cloned,`${path}.${key}`,paths)}return copy}if(value instanceof Date){return structuredClone(value)}if(typeof value.toJSON==="function"){return clone(value.toJSON(),cloned,`${path}.toJSON()`,paths,value)}}if(value instanceof EventTarget){return value}try{return structuredClone(value)}catch(e){{paths.push(path)}return value}}function log_if_contains_state(method,...objects){untrack(()=>{try{let has_state=false;const transformed=[];for(const obj of objects){if(obj&&typeof obj==="object"&&STATE_SYMBOL in obj){transformed.push(snapshot(obj,true));has_state=true}else{transformed.push(obj)}}if(has_state){console_log_state(method);console.log("%c[snapshot]","color: grey",...transformed)}}catch{}});return objects}export{log_if_contains_state as l,snapshot as s};
//# sourceMappingURL=DZ17DrFv.js.map
