{"version":3,"mappings":";0uGACQA,UAAYC,KAAAC,QAAA,kBAEZ,MAAAC,MAAA,EACFC,KAAM,YAAaC,KAAM,KAAMC,MAAO,SACtCF,KAAM,wBAAyBC,KAAM,KAAMC,MAAO,gBAClDF,KAAM,qBAAsBC,KAAM,MAAOC,MAAO,aAChDF,KAAM,qBAAsBC,KAAM,KAAMC,MAAO,aAC/CF,KAAM,mBAAoBC,KAAM,KAAMC,MAAO,4HAQtCC,KAAAC,MAAA,OAAAL,uBAASM,+EACLC,cAAAC,EAAA,OAAAC,IAAAH,MAAKL,MAA6KS,SAAAC,MAAAF,IAAAH,MAAKJ,0GALzLL,8bCXPe,KAAOd,KAAAC,QAAA,yCAAgCc,KAAOf,KAAAC,QAAA,aAAIF,UAAYC,KAAAC,QAAA,kBAChE,IAAAe,YAAcD,sBAAQA,OAAS,0LAMbA,8DADhBC,WAAUC,SAAAC,8CAF2EC,UAAAC,IAAA,mFAAAJ,WAAa,oBAAsB,MAAMjB,uCAC1He,mJCyCO,IAAAO,WAAA,CAAAC,EAAAC,WAAAC,IAAAD,cAAYA,4bAsBN,IAAAE,aAAA,CAAAC,IAAAC,YAAAC,QAAAD,gBAAYC,glCA4BwE,IAAAC,aAAA,CAAAC,IAAAP,WAAAC,IAAAD,SAAW,siCA5FpH,IAAAQ,OAAA/B,KAAAC,QAAA,oBACA+B,cAAgBhC,KAAAC,QAAA,wBAChBgC,aAAejC,KAAAC,QAAA,wBACfiC,SAAWlC,KAAAC,QAAA,mBACXF,UAAYC,KAAAC,QAAA,kBAIV,IAAAkC,YAAAC,IAAAC,aAAuBC,gBAAc,eACrC,IAAAC,mBAAAH,IAAAC,aAA8BG,eAAa,sBAC3C,IAAAC,oBAA6B,MAG7B,IAAAC,gBAAAN,IAAiCC,aAAA,SAC/B,GAAA1B,IAAAwB,aAAYQ,OAAS,EAAG,CACiBhC,WAAAwB,aAAYS,OAAOhB,QAAUA,MAAMiB,UAChF,CACI,GAAAd,SAAOY,OAAS,EAAG,CACd,OAAAV,eAAeF,SAASA,SAAOa,OAAOhB,QAAUA,MAAMiB,UAC/D,SAEIC,IAAK,WAAY/B,KAAM,WAAYgC,QAAS,UAAW3C,KAAM,kBAAmByC,UAAW,MAAOG,QAAS,IAC3GF,IAAK,cAAe/B,KAAM,WAAYgC,QAAS,UAAW3C,KAAM,kBAAmByC,UAAW,KAAMG,QAAS,WAC7GF,IAAK,WAAY/B,KAAM,SAAUgC,QAAS,UAAW3C,KAAM,kBAAmByC,UAAW,MAAOG,QAAS,MAC3GJ,OAAOhB,QAAuCA,MAAMiB,gCAGpD,IAAAI,uBAAAb,IAAwCC,aAAA,YACnCE,qBAAsBP,iBAAArB,IAAiB+B,iBAAgB,8BAG5D,IAAAnB,SAAAa,IAAAc,MAAkB,OAAK,YAElB,SAAAvB,YAAYC,OACf,GAAAM,sBAAmBN,WACvBL,SAAW,MACb,wKAYcd,cAAA0C,IAAA,MAAAxC,IAAAsC,wBAAuB7C,MAAWK,cAAA0C,IAAA,MAAAxC,IAAAsC,wBAAuBlC,2KAE5CqC,IAAAH,yCAAwB7C,OAAQ,mEAHpDO,eAAAsC,0BAAAtC,eAAwBP,OAAxBO,UAA8B,EAAA0C,GAAAC,SAAS,KAAGrC,SAAAC,iBAAAD,SAAAsC,UAAA,sSAQzC,IAAAtB,gBAAgBQ,wBAAwB9B,OAAAsC,0BAAAtC,eAAwBkC,WAAS5B,SAAAuC,iJAMtEC,KAAAC,MAAA,OAAA/C,IAAA+B,kCAAmBd,sLASVnB,cAAAkD,MAAA,MAAAhD,IAAAiB,OAAMxB,MAAWK,cAAAkD,MAAA,MAAAhD,IAAAiB,OAAMb,+HAEV6C,gBAAA,IAAAhD,SAAAiD,OAAAlD,IAAAiB,OAAMxB,mEAH1BO,WAAAiB,OAAMxB,OAANO,eAAY2C,SAAS,cAAGQ,mBAAA7C,SAAA8C,YAAA,+RASeC,gBAAA,IAAApD,SAAAqD,OAAA,OAAAtD,IAAAiB,OAAMoB,SAAO,2DADlD,GAAArC,IAAAiB,OAAMoB,iBAAOkB,kKAId,IAAAjC,gBAAgBQ,sBAAwB9B,IAAAiB,OAAMiB,mBAASsB,wJAGxD,GAAAC,cAAAzD,IAAAiB,OAAMkB,KAAQnC,OAAAsC,0BAAAtC,UAAwB,EAAA0D,GAAAvB,KAAG7B,SAAAqD,kJArBM1C,OAAMkB,KAAQnC,GAAAyC,IAAAH,0BAAAtC,UAAwB,EAAA0D,GAAAvB,KAAM,kCAAoC,MAGrHyB,cAAAC,SAAA,gBAAAJ,cAAAzD,IAAAsC,wBAAuBH,IAAQnC,IAAAiB,OAAMkB,MAChCrC,cAAA+D,SAAA,qBAAA7D,IAAAiB,OAAMb,QAAQJ,IAAAiB,OAAMmB,WAQZnC,SAAA6D,OAAA9D,IAAAiB,OAAMb,MACCH,SAAA8D,OAAA/D,IAAAiB,OAAMmB,0LAjB5CxB,UAAQN,SAAA0D,sFApBS5E,wDAMLwB,gCAOS6B,IAAAH,yCAAwBlC,OAAQ,gCACRqC,IAAAH,yCAAwBF,UAAW,wLCVpE,IAAA1B,SAAA,CAAAC,EAAAC,WAAAC,IAAAD,cAAYA,mRAeV,IAAAE,WAAA,CAAAC,IAAAH,WAAAC,IAAAD,SAAW,uBACdqD,EAACrD,WAAA6C,cAAKQ,EAAE9B,IAAQ,WAAQtB,IAAKD,SAAW,wWA4B0BC,IAAAD,SAAW,OAAesD,YAAIA,yDAM9BrD,IAAAD,SAAW,OAAiBuD,cAAIA,wDAOhCtD,IAAAD,SAAW,OAAcwD,WAAIA,sDAO6CvD,IAAAD,SAAW,OAAeyD,YAAIA,44GA1GxL,IAAAC,QAAAjF,KAAAC,QAAA,mBAAYiF,SAAU,GAAIC,QAAS,GAAIC,IAAK,KAAMC,OAAQ,QAC1DR,SAAW7E,KAAAC,QAAA,mBAAM8E,QAAU/E,KAAAC,QAAA,kBAAM6E,WAAa9E,KAAAC,QAAA,qBAAM+E,SAAWhF,KAAAC,QAAA,mBAC/DF,UAAYC,KAAAC,QAAA,kBAIV,IAAAqF,aAAAlD,IAAAC,aAAwBkD,iBAAe,gBACvC,IAAAC,KAAApD,IAAAC,aAAgBoD,cAAY,QAE5B,IAAAC,iBAAAtD,IAAkCC,aAAA,YAC7BiD,eAAgBL,+BAGrB,IAAA1D,SAAAa,IAAAc,MAAkB,OAAK,YAClB,SAAAyC,UAAUC,MACP,SAAAA,uBAAMC,MAAM,EAAG,QAAQD,MAAA,YAAAA,KAAMC,OAAQ,IACjD,CACI,IAAAX,SAAA9C,IAA0BC,aAAA,SACtB,MAAAyD,IAAMnF,IAAA+E,kBACL,OAAAI,IAAIV,KAAOU,IAAIZ,UAAYS,UAAUG,IAAIX,uBAG9C,IAAAY,YAAA3D,IAA6BC,aAAA,SACzB,MAAAyD,IAAMnF,IAAA+E,kBACR,GAAAI,IAAIV,WAAYU,IAAIV,IACpB,GAAAU,IAAIZ,gBAAiBY,IAAIZ,SACtB,OAAAS,UAAUG,IAAIX,0BAGnB,IAAAa,cAAA5D,IAA+BC,aAAA,mBAC3B,MAAAyD,IAAMnF,IAAA+E,kBACR,GAAAI,IAAIV,IAAY,OAAAU,IAAIV,IAAI,GAAGa,cAC3B,GAAAH,IAAIZ,SAAiB,OAAAY,IAAIZ,SAAS,GAAGe,sBAClC5C,IAAIgB,GAAAyB,IAAAX,UAAJ,UAAc,EAAAd,GAAA,KAAd,eAAkB4B,gBAAiB,uKAa9BjC,gBAAA,IAAAvD,cAAA0C,IAAA,MAAAxC,IAAA+E,kBAAiBL,qKAGxBW,oEAJA,GAAArF,IAAA+E,kBAAiBL,gBAAMnE,iBAAAD,SAAAsC,UAAA,wWAyBVS,gBAAA,IAAAvD,cAAAkD,MAAA,MAAAhD,IAAA+E,kBAAiBL,8KAGxBW,uEAJA,GAAArF,IAAA+E,kBAAiBL,gBAAM7B,mBAAAvC,SAAA8C,YAAA,iuBAU4CyB,OAAI,qBAF/BO,mBACEJ,UAAShF,IAAC+E,kBAAiBP,yEAzB7E5D,UAAQN,SAAA6C,kHAhB0C/D,sHAGnBmF,cACxB,OAAAvE,IAAAoF,YAAApF,WAAkB6E,4uBCzC5B1E,KAAOd,KAAAC,QAAA,yCACPiG,KAAOlG,KAAAC,QAAA,cACPgF,QAAAjF,KAAAC,QAAA,mBAAYiF,SAAU,GAAIC,QAAS,GAAIC,IAAK,KAAMC,OAAQ,QAC1DrD,cAAgBhC,KAAAC,QAAA,wBAChB8B,OAAA/B,KAAAC,QAAA,oBACAgC,aAAejC,KAAAC,QAAA,wBACfkG,cAAgBnG,KAAAC,QAAA,wBAKJmG,KAAAnG,QAAA,6HAOgBa,2HAMlBiB,qCACOC,2CACDC,sCACJkE,wJAQDlB,4PAjBFiB,8pBCbNG,SAAWrG,KAAAC,QAAA,mBAAMF,UAAYC,KAAAC,QAAA,kBAM/B,IAAAqG,WAAAlE,IAAAc,MAA4B,IAAE,cAElCqD,QAAoBC,UACnBC,cAAcC,WAAYC,eACnBC,cAAgBD,OACtBnF,IAAA8E,WAAaM,cAAcpB,KAAKqB,KAAA,UAKzB,SAAAC,eAAetB,UAClBA,KAAa,SACX,OAAAA,KACLuB,QAAQ,KAAM,KACdC,MAAM,KACNC,IAAIC,MAAQA,KAAKC,OAAO,GAAGlB,cAAgBiB,KAAKrB,MAAM,GAAGuB,eACzDC,KAAK,IACR,KAGIC,YAAuBlF,IAAAC,aAAA,IAAAyE,eAAeT,gBAAYC,cAAU,kLAQ7DgB,uEAHEA,aAAWrG,SAAAC,oMAF+DnB,eAW3Da,SAAA2G,OAAA,qBAAAC,kBAAiBC,kTChD9BpB,SAAWrG,KAAAC,QAAA,4BAA2BmG,KAAAnG,QAAA,4BAAwBmG,KAAAnG,QAAA,qBAAS,IAAAF,UAAYC,KAAAC,QAAA,sLAG5DF,iKC6FpB2H,cAAgBpG,EAAAqG,iBACvBA,YAAc,KAChB,CAES,SAAAC,qEACPC,QAAQC,IAAI,wCACZC,YAAc,UACdC,YAAc,WACdC,UAAY,MAGZC,kBAGM,MAAAC,cAAA,CACJC,UAAWC,KAAKC,MAChBC,aAAeC,SAASC,aAAaC,QAAQ,uCAAyC,KAAO,GAE/FD,aAAaE,QAAQ,iCAAkCC,KAAKC,UAAUV,gBACtEM,aAAaE,QAAQ,qCAAsCR,cAAcI,aAAaO,YAEtFjB,QAAQC,OAAAiB,sBAAA,MAAI,uCAAwCZ,gBAEpDa,WAAiB,SACfjB,YAAc,QACb,IACL,s2EAnHEkB,YAAcjJ,KAAAC,QAAA,sBACdiJ,YAAclJ,KAAAC,QAAA,sBACdF,UAAYC,KAAAC,QAAA,kBACZkJ,SAAWnJ,KAAAC,QAAA,oBACXmJ,iBAAmBpJ,KAAAC,QAAA,0BACnBoJ,aAAerJ,KAAAC,QAAA,sBAGb,IAAAuF,KAAApD,IAAAC,aAAgBoD,cAAY,QAC5B,IAAA6D,MAAAlH,IAAAC,aAAiBkH,YAAU,SAC3B,IAAA5B,YAAAvF,IAAAc,MAAqB,OAAK,eAC1B,IAAA+E,UAAA7F,IAAAc,MAAmB,OAAK,aACxB,IAAA8E,YAAA5F,IAAAc,MAAqB,OAAK,mBAC1BsG,UAA2B,SAC3BC,UAA2B,KAC3B,IAAA1B,YAAA3F,IAAAc,MAAqB,OAAK,mBAC1BwG,eAAiB,MAGf,MAAAC,qBAAAvF,qBAA8BwF,OAAW,mBAAcnB,aAAaC,QAAQ,kCAAoC,QAClHiB,qBAAsB,CACpB,IACI,MAAAE,KAAOjB,KAAKkB,MAAMH,0BACxB1B,UAAY,KACd,OAASrD,OACPqD,UAAY,KACd,CACF,OAGM8B,mBAAqBX,yBACrBY,cAAgBX,eAGlB,IAAAY,cAAA7H,IAA+BC,aAAA,iBAC5BiH,SAAUY,aAAW1E,KAAK2E,YAAoB,SAC7C,MAAA7B,QAAUD,WACV+B,SAAe,IAAA/B,KAAK6B,aAAW1E,KAAK2E,mBACpCE,SAAWD,SAASE,UAAYhC,IAAIgC,UACpC,MAAAC,SAAWC,KAAKC,KAAKJ,UAAY,IAAO,GAAK,GAAK,KACjD,OAAAG,KAAKE,IAAI,EAAGH,6BAIjB,IAAAI,WAAAvI,IAA4BC,aAAA,gBAE1B4F,WAAW,CACN,OAAAtH,IAAAqH,YACT,QAGIsB,QAASJ,eAAAvI,IAAesJ,gBAAiB,EAAU,iCACnDzE,MAASoF,SAASC,QAAS5B,cAAoB,YAE5C,sCAGA6B,0BACHxB,OAAO,CACL3I,OAAAsJ,gBAAiB,EAAG,CACf,uEACT,SAAA7F,cAAAzD,IAAWsJ,eAAkB,GAAG,CACvB,uEACF,oCAC2BA,oDAClC,MACK,CACE,yEACT,CACF,UAESc,gBACH,GAAApK,IAAA2I,QAAA3I,IAASsJ,gBAAiB,EAAU,eACpC,GAAAtJ,IAAA2I,QAAA3I,IAASsJ,gBAAiB,EAAU,gBACjC,YACT,UAESe,wBACDnE,KAAOkE,gBACL,OAAAlE,MACD,aACI,uGACJ,cACI,iIAEA,yHAEb,UA8BSoE,wBACPtD,YAAc,WACdM,UAAY,UACZD,YAAc,OACdE,iBACF,UAESA,qBACHsB,UAAW,CACb0B,cAAc1B,WACFA,UAAA,IACd,IACIC,UAAW,CACb0B,aAAa1B,WACDA,UAAA,IACd,CACF,UAES2B,qCAEH5F,MAASoF,SAASC,aAAU5C,WAAW,CAC7BuB,UAAA6B,YAAkB,KAEvB,IAAA1K,IAAAsH,aAAAtH,IAAcgH,mBAAgBK,aAAa,CAExC,MAAAsD,cAAgB7C,aAAaC,QAAQ,sCACtC4C,cAAe,KAClBtD,YAAc,MAGFyB,UAAAT,WAAiB,SAC3BhB,YAAc,QACbgC,cACL,CACF,GACCD,mBACL,CACF,CAGAwB,YAAc,SACP7B,eAAgB,CACFA,eAAA,KAEX,MAAA8B,cAAgB/C,aAAaC,QAAQ,kCAC3Cb,QAAQC,OAAAiB,sBAAA,MAAI,kDAAmDyC,mBAE3DA,cAAe,CACb,IACI,MAAA3B,KAAOjB,KAAKkB,MAAM0B,eAClB,MAAAC,cAAA,IAAoBpD,KAAKwB,KAAKzB,WAAaI,SAASgD,gBACpD,MAAAlD,QAAUD,KACV,MAAAqD,oBAAsBlB,KAAKmB,OAAOrD,IAAIgC,UAAYmB,cAAcnB,YAAc,IAAO,GAAK,KAC1F,MAAA/B,aAAesB,KAAKtB,cAAgB,EAElCV,QAAAC,OAAIiB,sBAAA,8CAAyC2C,oBAAqB,iBAAkBnD,eAGxF,IAAAqD,WAAAjL,IAAa2I,OAAQ,GAAK,IAC1B,GAAAf,cAAgB,EAAG,CACrB5H,eAAa2I,OAAQ,IAAM,GAC7B,CAEI,GAAAoC,qBAAuBE,WAAY,CACrC/D,QAAQC,IAAI,yDACZW,aAAaoD,WAAW,kCACxBpD,aAAaoD,WAAW,0CACxB5D,UAAY,WACP,CACLJ,QAAQC,IAAI,mEACZG,UAAY,KACd,CACF,OAASrD,SAED6G,cAAoB,IAAApD,KAAKG,SAASgD,gBAClC,MAAAlD,QAAUD,KACV,MAAAqD,oBAAsBlB,KAAKmB,OAAOrD,IAAIgC,UAAYmB,cAAcnB,YAAc,IAAO,GAAK,KAC1F,MAAAsB,WAAAjL,IAAa2I,OAAQ,GAAK,IAE5B,GAAAoC,qBAAuBE,WAAY,CACrCnD,aAAaoD,WAAW,kCACxBpD,aAAaoD,WAAW,0CACxB5D,UAAY,WACP,KACLA,UAAY,KACd,CACF,CACF,SAGKA,WAAW,CACdmD,eACF,CACF,CAGa,WACXlD,4gBAkBgB,GAAA9D,cAAA2G,gBAAoB,oBAASvH,mBAAAvC,SAAA8C,YAAA,+CAJlC,GAAAK,cAAA2G,gBAAoB,mBAAQ7J,iBAAAD,SAAAsC,UAAA,kMAuBxBmE,cAAaC,0GAUbC,gKAxCQ,kBAAA7H,eAAaqE,cAAA+E,WAAa,OAAQ,kCAAoC/E,cAAA+E,WAAa,UAAW,qCAAuC,uBACrJnB,aAAc,oBAAsB,UAAMD,aAAc,kBAAoB,qTAmC5EuB,OAAQ,cAAgB,0CAjCH0B,6BAoBnBF,mCASAC,gBAAoB,UAAW,4EAA2E3G,cAC1G2G,gBAAoB,WAAY,wFAChC,kKApCHnB,OAAW,YAAW,QAAAjJ,IAAIgK,YAAU1J,SAAA6C,sEA0DHmH,wCAAzBtD,gCAAAmE,IAAAnE,YAAWoE,QAAA,kMCNrBC,YAAY1K,EAAA2K,SAAAC,QAAAC,yCAChB,GAAAxL,IAAAsL,WAAAtL,IAAYuL,SAAS,CACxBC,YAAY,qBAAoBxL,GAAAyC,IAAA8I,SAAQE,cAARzL,eAAqB0L,mBAAoB,OAC7DF,YAAA,UAASxL,OAAAuL,SAAQE,cAARzL,UAAqB,EAAA0C,GAAAiJ,OAAQC,YAAYC,QAC9DL,YAAY,WAAUxL,GAAAyC,IAAA8I,SAAQE,cAARzL,eAAqB8L,SAAU,SACzCN,YAAA,aAAYxL,WAAAuL,SAAQE,cAARzL,UAAqB,EAAA+L,GAAAC,WAArBhM,UAA+B,EAAAiM,GAAAC,OAAQ,OAC/DV,YAAY,sBAAqBxL,GAAAyC,IAAA8I,SAAQE,cAARzL,eAAqBmM,oBAAqB,KAC3EX,YAAY,iBAAgBxL,GAAAyC,IAAA8I,SAAQE,cAARzL,eAAqBoM,eAAgB,MACjEZ,YAAY,sBAAqBxL,GAAAyC,IAAA8I,SAAQE,cAARzL,eAAqBqM,oBAAqB,KAC3Eb,YAAY,YAAAxL,IAAasL,UAASgB,WAAa,MAC/Cd,YAAY,uBAAAxL,IAAwBsL,UAASiB,sBAAwB,MACtE,CACD,m3OAnRC,IAAAC,KAAAnN,KAAAC,QAAA,UAAiB,OACjBmN,QAAApN,KAAAC,QAAA,gBAAiBkN,KAAO,QACxBE,WAAArN,KAAAC,QAAA,uBAGG,IAAAgM,SAAA7J,IAAAc,MAAmC,MAAI,YACvC,IAAAgJ,QAAA9J,IAAAc,MAAiC,MAAI,WACrC,IAAAoK,UAAAlL,IAAAc,MAAmB,OAAK,aACxB,IAAAqK,SAAAnL,IAAAc,MAAkB,OAAK,YACvB,IAAAsK,MAAApL,IAAAc,MAAe,IAAE,SACjB,IAAAuK,QAAArL,IAAAc,MAAiB,IAAE,WACnB,IAAAwK,WAAAtL,IAAAc,MAAoB,OAAK,cAGvB,MAAAyK,aAAA,EACHC,MAAOrB,YAAYC,OAAQnM,MAAO,WAClCuN,MAAOrB,YAAYsB,MAAOxN,MAAO,UACjCuN,MAAOrB,YAAYuB,KAAMzN,MAAO,SAG7B,MAAA0N,gBAAA,CACH,CAAAH,MAAO,MAAOvN,MAAO,mBACrB,CAAAuN,MAAO,MAAOvN,MAAO,cACrB,CAAAuN,MAAO,MAAOvN,MAAO,uBACrB,CAAAuN,MAAO,MAAOvN,MAAO,sBACrB,CAAAuN,MAAO,MAAOvN,MAAO,0BACrBuN,MAAO,MAAOvN,MAAO,2BACrB,CAAAuN,MAAO,MAAOvN,MAAO,qBACrB,CAAAuN,MAAO,MAAOvN,MAAO,uBAGlB,MAAA2N,cAAA,CACH,CAAAJ,MAAO,QAASvN,MAAO,gBACvB,CAAAuN,MAAO,QAASvN,MAAO,gBACvB,CAAAuN,MAAO,QAASvN,MAAO,WACvB,CAAAuN,MAAO,QAASvN,MAAO,UACvB,CAAAuN,MAAO,QAASvN,MAAO,UACvB,CAAAuN,MAAO,QAASvN,MAAO,WACvB,CAAAuN,MAAO,QAASvN,MAAO,cACvB,CAAAuN,MAAO,QAASvN,MAAO,YACvB,CAAAuN,MAAO,QAASvN,MAAO,UACvB,CAAAuN,MAAO,QAASvN,MAAO,yBACvBuN,MAAO,QAASvN,MAAO,0BAGpB,MAAA4N,iBAAA,CACH,CAAAL,MAAO,GAAIvN,MAAO,YAClB,CAAAuN,MAAO,IAAKvN,MAAO,aACnB,CAAAuN,MAAO,IAAKvN,MAAO,cACnB,CAAAuN,MAAO,IAAKvN,MAAO,cACnB,CAAAuN,MAAO,KAAMvN,MAAO,cACpB,CAAAuN,MAAO,KAAMvN,MAAO,UACpB,CAAAuN,MAAO,EAAGvN,MAAO,UAId,MAAA6N,iBAAmBC,WAAaC,MAAA,CACrC/B,iBAAkBgC,WAClBC,MAAOC,WAAaC,MAAMC,OAAOC,OAAOnC,cACxCE,OAAQ8B,WAAaI,SAAS,sBAC9BhC,SAAU4B,WAAaI,SAAS,wBAChC7B,kBAAmB8B,WAAaC,IAAI,EAAG,oCACvC9B,aAAcsB,WACdrB,kBAAmB4B,WAAaC,IAAI,GAAI,6CACxC5B,UAAWoB,WACXnB,qBAAsBmB,wBAIfS,KAAAC,OAAMA,OAAAC,QAAQA,QAAAC,QAASA,QAAA9C,YAASA,aAAgB+C,WAAA,CACvDC,cAAA,CACC9C,iBAAkB,MAClBiC,MAAO/B,YAAYC,OACnBC,OAAQ,QACRE,SAAU,MACVG,kBAAmB,IACnBC,aAAc,KACdC,kBAAmB,IACnBC,UAAW,KACXC,qBAAsB,OAEvBgB,kCACAkB,SAAA5I,MAAiBkI,eACVW,aAAaX,WAKNlI,eAAA8I,iBAAiBC,QAC/BA,OAAMC,qBAGDC,WAAU,OAEf,OAGMJ,aAAaK,QACpB,CAGAnE,YAAc,QACT4B,OAAM,CACTwC,kBACD,IAIDpE,YAAc,iCACT5K,OAAAsL,WAAAtL,IAAYuL,eAAYoB,WAAW,OAChCsC,cAAgBF,QAEhB,MAAAG,eAAA,CACLxD,mBAAkB1L,GAAAyC,IAAA8I,SAAQE,cAARzL,eAAqB0L,mBAAoB,MAC3DiC,QAAO3N,GAAAyC,IAAA8I,SAAQE,cAARzL,eAAqB2L,OAAQC,YAAYC,OAChDC,SAAQ9L,GAAAyC,IAAA8I,SAAQE,cAARzL,eAAqB8L,SAAU,QACvCE,WAAUhM,WAAAuL,SAAQE,cAARzL,UAAqB,EAAA+L,GAAAC,WAArBhM,eAA+BkM,OAAQ,MACjDC,oBAAmBnM,GAAAyC,IAAA8I,SAAQE,cAARzL,eAAqBmM,oBAAqB,IAC7DC,eAAcpM,GAAAyC,IAAA8I,SAAQE,cAARzL,eAAqBoM,eAAgB,KACnDC,oBAAmBrM,GAAAyC,IAAA8I,SAAQE,cAARzL,eAAqBqM,oBAAqB,IAC7DC,UAAAtM,IAAWsL,UAASgB,WAAa,KACjCC,qBAAAvM,IAAsBsL,UAASiB,sBAAwB,OAGxD1L,IAAAkM,WAAAtJ,cACCwL,cAAcvD,iBAAqBwD,eAAexD,iBAAA,QAAAjI,cAClDwL,cAActB,MAAUuB,eAAevB,MACvC,QAAAlK,cAAAwL,cAAcnD,OAAWoD,eAAepD,OAAA,QAAArI,cACxCwL,cAAcjD,SAAakD,eAAelD,SAC1C,QAAAvI,cAAAwL,cAAc9C,kBAAsB+C,eAAe/C,kBACnD,QAAA1I,cAAAwL,cAAc7C,aAAiB8C,eAAe9C,mCAC9C6C,cAAc5C,kBAAsB6C,eAAe7C,kBAAA,QAAA5I,cACnDwL,cAAc3C,UAAc4C,eAAe5C,UAC3C,QAAA7I,cAAAwL,cAAc1C,qBAAyB2C,eAAe3C,qBAAA,iBACjD,KACNQ,WAAa,MACd,mBAGciC,mDACdrC,UAAY,UACZE,MAAQ,IAEJ,0DAEFhM,IAAAyK,SAAA6D,QAAA,aAAU5D,QAAO4D,QAAA,QAAU,SAAAC,QAAQC,KACnCvJ,cACAwJ,wBAGIhE,UAAU,KACduB,MAAQ,4BAET,SAEKtB,SAAS,KACbsB,MAAQ,2BAET,CAGArB,YAAY,qBAAoBxL,GAAAyC,IAAA8I,SAAQE,cAARzL,eAAqB0L,mBAAoB,OAC7DF,YAAA,UAASxL,OAAAuL,SAAQE,cAARzL,UAAqB,EAAA0C,GAAAiJ,OAAQC,YAAYC,QAC9DL,YAAY,WAAUxL,GAAAyC,IAAA8I,SAAQE,cAARzL,eAAqB8L,SAAU,SACzCN,YAAA,aAAYxL,WAAAuL,SAAQE,cAARzL,UAAqB,EAAA+L,GAAAC,WAArBhM,UAA+B,EAAAiM,GAAAC,OAAQ,OAC/DV,YAAY,sBAAqBxL,GAAAyC,IAAA8I,SAAQE,cAARzL,eAAqBmM,oBAAqB,KAC3EX,YAAY,iBAAgBxL,GAAAyC,IAAA8I,SAAQE,cAARzL,eAAqBoM,eAAgB,MACjEZ,YAAY,sBAAqBxL,GAAAyC,IAAA8I,SAAQE,cAARzL,eAAqBqM,oBAAqB,KAC3Eb,YAAY,YAAAxL,IAAasL,UAASgB,WAAa,MAC/Cd,YAAY,uBAAAxL,IAAwBsL,UAASiB,sBAAwB,MAEtE,OAAStI,GACJkD,IAAA0F,MAAM,+BAAgC,MAAO5I,OACjD4I,MAAQ,gCACP,YACDF,UAAY,MACb,CACD,CAEe9G,eAAA6I,aAAaX,QACtB,IAAA/N,IAAAsL,YAAAtL,IAAauL,SAAS,KAC1BsB,MAAQ,kCAET,KAEAD,SAAW,UACXC,MAAQ,QACRC,QAAU,IAEN,IAEG,MAAAyC,gBAAA,IACFvP,IAAAsL,UACHgB,UAAWyB,OAAOzB,UAClBC,qBAAsBwB,OAAOxB,qBAC7BiD,YAAA,IAAgB9H,MAAO+H,eAIlB,MAAAC,eAAA,IACF1P,IAAAuL,SACHE,YAAA,QACIF,SAAQE,YACXC,iBAAkBqC,OAAOrC,iBACzBC,KAAMoC,OAAOJ,MACb7B,OAAQiC,OAAOjC,OACfE,SAAA,IACIhM,IAAAuL,SAAQE,YAAYO,SACvBE,KAAM6B,OAAO/B,UAEdG,kBAAmB4B,OAAO5B,kBAC1BC,aAAc2B,OAAO3B,aACrBC,kBAAmB0B,OAAO1B,kBAC1BmD,YAAA,IAAgB9H,MAAO+H,eAExBD,YAAA,IAAgB9H,MAAO+H,qBAIlBL,QAAQC,IAAA,CACbM,YAAYJ,iBACZK,kBAAkBF,kBAInBvE,IAAAG,SAAWiE,gBAAA,MACXpE,IAAAI,QAAUmE,eAAA,UAEV5C,QAAU,sCACVC,WAAa,OAGbL,eAGAA,eAGArE,WAAiB,KAChBmE,KAAO,WACPI,SAAW,QACT,IAEJ,OAAS3I,GACF,MAAA4L,SAAW,oCAAsC5L,EAAE6L,QACrD3I,IAAA0F,MAAM,yBAA0B,MAAO5I,OAC3C4I,MAAQgD,cACRjD,SAAW,MACZ,CACD,UAESmD,qBACJhD,YAAY,CACX,GAAAiD,QAAQ,6DAA8D,CACzExD,KAAO,OACPC,WACD,MACM,CACND,KAAO,OACPC,WACD,CACD,CAgBS,SAAAwD,aAAavK,UACb,OAAAA,eACFuE,WAASiG,aACN,0BACHjG,WAASkG,UACN,uBACHlG,WAASmG,cACN,8BAEA,gBAEV,oGAGkDL,++BA4BT9P,SAAAiD,OAAAlD,IAAAsL,UAAS+E,WAZT,IAAAJ,aAAajQ,IAAAsL,UAASzG,KAAKqB,MAIvB,QAAAwB,KAAK1H,IAAAsL,UAASgF,YAAYC,qBAIZ,IAAAvQ,IAAAsL,UAASkF,GAAGC,UAAU,EAAG,yDAd5E,GAAAzQ,IAAAsL,eAAYC,kBAAO1I,0IAqCblD,KAAA+Q,OAAA,OAAA1D,8BAAgB2D,6HACP,GAAAC,iCAAA5Q,IAAA2Q,QAAO1D,OAAK,CAAZ4D,SAAA5D,OAAA4D,SAAAC,QAAA9Q,IAAA2Q,QAAO1D,QAAK,GAAGhN,SAAA6D,OAAA9D,IAAA2Q,QAAOjR,2bA6C/BC,KAAAoR,SAAA,OAAA1D,+BAAiBsD,6HACR,GAAAK,iCAAAhR,IAAA2Q,QAAO1D,OAAK,CAAZgE,SAAAhE,OAAAgE,SAAAH,QAAA9Q,IAAA2Q,QAAO1D,QAAK,GAAGhN,SAAA8D,OAAA/D,IAAA2Q,QAAOjR,sKAIAuD,gBAAA,IAAAhD,SAAAqD,OAAA4N,UAAQpF,yDAD1C,GAAAoF,UAAQpF,QAAUqF,WAASrF,gBAAM3I,+GAe9BxD,KAAAyR,SAAA,OAAAhE,iCAAmBuD,6HACV,GAAAU,iCAAArR,IAAA2Q,QAAO1D,OAAK,CAAZqE,SAAArE,OAAAqE,SAAAR,QAAA9Q,IAAA2Q,QAAO1D,QAAK,GAAGhN,SAAAsR,OAAAvR,IAAA2Q,QAAOjR,4KAIAuD,gBAAA,IAAAhD,SAAAuR,OAAAN,UAAQlF,6DAD1C,GAAAkF,UAAQlF,UAAYmF,WAASnF,kBAAQzI,0LAoBlC5D,KAAA8R,SAAA,OAAAnE,kCAAoBqD,8HACX,GAAAe,iCAAA1R,IAAA2Q,QAAO1D,OAAK,CAAZ0E,SAAA1E,OAAA0E,SAAAb,QAAA9Q,IAAA2Q,QAAO1D,QAAK,GAAGhN,SAAA2R,OAAA5R,IAAA2Q,QAAOjR,mdAoCCuD,gBAAA,IAAAhD,SAAA4R,QAAAX,UAAQ7E,sEAD1C,GAAA6E,UAAQ7E,mBAAqB8E,WAAS9E,2BAAiB7I,wQAFrC,iBAAA0N,UAAQ7E,mBAAqB8E,WAAS9E,sBALhDyF,WAAAC,QAAA,IAAAhD,QAAM1C,kBAAiBjB,SAAA4G,aAAA7D,KAAA8D,QAAvBlD,OAAM1C,kCAAN0C,8DARV,GAAAA,QAAM3C,aAAY9L,SAAAqD,+PAkCPuO,aAAAC,QAAA,IAAApD,QAAMxC,qBAAoBnB,SAAA4G,aAAA7D,KAAA8D,QAA1BlD,OAAMxC,qCAANwC,uFAPbzD,2BAAUzG,iBAAM,EAAAnC,GAAA0P,sBAAYpO,oNAoBc6I,qEAF1CA,OAAKvM,SAAA+R,sNAQuCvF,uEAF5CA,SAAOxM,SAAAgS,sFAUDjH,YAASC,SAAAC,QAAAC,sFAURuE,+QAYJnD,UAAQtM,SAAAiS,mBAAAjS,SAAA8C,YAAA,gPAeK,QAAAsE,KAAK1H,IAAAsL,UAASkE,YAAYgD,gFAF1C,IAAAxS,OAAAsL,YAAAtL,UAAU,EAAA0D,GAAA8L,oBAAUiD,qcAjCZC,OAAAC,UAAA3S,IAAA+M,iBAAcH,gCAUdA,6BAQCkC,aAAQ9O,IAAK+M,aAAU/M,IAAI4M,kBAnJf,iBAAAsE,UAAQpF,QAAUqF,WAASrF,eAmB3B,iBAAAoF,UAAQlF,UAAYmF,WAASnF,mCAtGxC2C,kBAoCCiE,kBAAAlC,OAAA,IAAA3B,QAAMpB,MAAKvC,SAAA4G,aAAA7D,KAAA8D,QAAXlD,OAAMpB,sBAANoB,SAaEmD,aAAAW,MAAA,IAAA9D,QAAMrD,iBAAgBN,SAAA4G,aAAA7D,KAAA8D,QAAtBlD,OAAMrD,iCAANqD,SAYAmD,aAAAY,QAAA,IAAA/D,QAAMzC,UAASlB,SAAA4G,aAAA7D,KAAA8D,QAAflD,OAAMzC,0BAANyC,SAoBF6D,kBAAA7B,SAAA,IAAAhC,QAAMjD,OAAMV,SAAA4G,aAAA7D,KAAA8D,QAAZlD,OAAMjD,uBAANiD,SAmBA6D,kBAAAxB,SAAA,IAAArC,QAAM/C,SAAQZ,SAAA4G,aAAA7D,KAAA8D,QAAdlD,OAAM/C,yBAAN+C,SAyBA6D,kBAAAnB,SAAA,IAAA1C,QAAM5C,kBAAiBf,SAAA4G,aAAA7D,KAAA8D,QAAvBlD,OAAM5C,kCAAN4C,SAgBEmD,aAAAa,QAAA,IAAAhE,QAAM3C,aAAYhB,SAAA4G,aAAA7D,KAAA8D,QAAlBlD,OAAM3C,6BAAN2C,mEAnJfpC,WAASrM,SAAAC,iBAAAD,SAAAsC,UAAA,4eC/ST,MAAAoQ,UAAAtQ,IAAgBgB,GAAApE,QAAA2T,WAAhB,eAA0BzM,OAAO,KAAjC,eAAqClB,gBAAiB,UAGtD4N,eACL,sSAKWC,KACArT,cAAA0C,IAAA,MAAAlD,QAAA8T,WAAa,eACKC,UAAA7Q,IAAA,kBAAAlD,QAAAF,WAAa8T,kJAK7BG,UAAA5S,IAAA,EAAA6S,KAAAhU,QAAAF,WAAa8T,iBACRpT,cAAAW,IAAA,aAAAnB,QAAA8T,WAAa,8BAG9BJ,sEAbQG,IAAG7S,SAAAC,iBAAAD,SAAAsC,UAAA,0uBCFZ,IAAA4J,KAAAnN,KAAAC,QAAA,UAAiB,OACjBiU,MAAQlU,KAAAC,QAAA,oBACR2N,MAAQ5N,KAAAC,QAAA,+BACRF,UAAYC,KAAAC,QAAA,yBACZmN,QAA0BpN,KAAAC,QAAA,kBACzBkN,KAAO,iaAYGC,QAAO+G,KAAAC,OAAAC,cAAA,qEALgBzG,4LCsT1B5B,UAAY1K,EAAA4K,QAAAoI,YAAAnI,gCAChB,GAAAxL,IAAAuL,UAAAvL,IAAW2T,aAAa,CAC3BnI,YAAY,WAAAxL,IAAYuL,SAAQ0H,UAAY,IAC5CzH,YAAY,cAAaxL,GAAAyC,IAAAkR,aAAYvT,OAAZJ,eAAkB4T,QAAS,IACpDpI,YAAY,aAAYxL,GAAAyC,IAAAkR,aAAYvT,OAAZJ,eAAkB6T,OAAQ,IAClDrI,YAAY,QAAAxL,IAAS2T,aAAYG,OAAS,IAC1CtI,YAAY,QAAAxL,GAAOyC,IAAAkR,eAAP3T,eAAoB+T,MAAiB,IACjDvI,YAAY,YAAAxL,GAAWyC,IAAAkR,eAAX3T,eAAwBgU,UAAqB,IACzDxI,YAAY,cAAAxL,GAAayC,IAAAkR,eAAb3T,eAA0BiU,YAAuB,GAC9D,CACD,82KApUC,IAAAzH,KAAAnN,KAAAC,QAAA,UAAiB,OACjBmN,QAAApN,KAAAC,QAAA,gBAAiBkN,KAAO,QACxBE,WAAArN,KAAAC,QAAA,uBAGG,IAAAiM,QAAA9J,IAAAc,MAAiC,MAAI,WACrC,IAAAoR,YAAAlS,IAAAc,MAAyC,MAAI,eAC7C,IAAAoK,UAAAlL,IAAAc,MAAmB,OAAK,aACxB,IAAAqK,SAAAnL,IAAAc,MAAkB,OAAK,YACvB,IAAAsK,MAAApL,IAAAc,MAAe,IAAE,SACjB,IAAAuK,QAAArL,IAAAc,MAAiB,IAAE,WACnB,IAAA2R,iBAAAzS,IAAAc,MAA0B,IAAE,oBAC5B,IAAAwK,WAAAtL,IAAAc,MAAoB,OAAK,cACzB,IAAA4R,UAAA1S,IAAAc,MAAmB,OAAK,aACxB,IAAA6R,WAAA3S,IAAAc,MAAoB,IAAE,cAGpB,MAAAgL,iBAAmBC,WAAaC,MAAA,CACrCwF,SAAUrF,WAERI,SAAS,wBACTE,IAAI,EAAG,0CACPnE,IAAI,GAAI,4CACRsK,QAAQ,mBAAoB,uEAC9BC,UAAW1G,WAETI,SAAS,0BACTE,IAAI,EAAG,0BACPnE,IAAI,GAAI,8CACVwK,SAAU3G,WAERI,SAAS,yBACTE,IAAI,EAAG,yBACPnE,IAAI,GAAI,6CACV+J,MAAOlG,WAELkG,MAAM,iCACN9F,SAAS,6BACX+F,IAAKnG,WAEH7D,IAAI,IAAK,wCACTyK,WACFR,QAASpG,WAEPuF,IAAI,uBACJqB,WACAC,WACAC,UAAWzH,OAAWxJ,cAAAwJ,MAAU,IAAK,KAAOA,OAC9CgH,UAAWrG,WAETuF,IAAI,uBACJqB,WACAC,WACAC,UAAWzH,OAAWxJ,cAAAwJ,MAAU,IAAK,KAAOA,oBAIvCkB,KAAAC,OAAMA,OAAAC,QAAQA,QAAAC,QAASA,QAAA9C,YAASA,aAAgB+C,WAAA,CACvDC,cAAA,CACCyE,SAAU,GACVqB,UAAW,GACXC,SAAU,GACVT,MAAO,GACPC,IAAK,GACLC,QAAS,GACTC,UAAW,IAEZ1G,kCACAkB,SAAA5I,MAAiBkI,eACV4G,YAAY5G,WAKLlI,eAAA8I,iBAAiBC,QAC/BA,OAAMC,qBAGDC,WAAU,OAEf,OAGM6F,YAAY5F,QACnB,CAGAnE,YAAc,QACT4B,OAAM,CACToI,iBACD,IAIDhK,YAAc,wBACT5K,OAAAuL,UAAAvL,IAAW2T,mBAAgBhH,WAAW,OACnCsC,cAAgBF,QAEhB,MAAAG,eAAA,CACL+D,SAAAjT,IAAUuL,SAAQ0H,UAAY,GAC9BqB,YAAWtU,GAAAyC,IAAAkR,aAAYvT,OAAZJ,eAAkB4T,QAAS,GACtCW,WAAUvU,GAAAyC,IAAAkR,aAAYvT,OAAZJ,eAAkB6T,OAAQ,GACpCC,MAAA9T,IAAO2T,aAAYG,OAAS,GAC5BC,MAAA/T,OAAK2T,eAAL3T,eAAkB+T,MAAiB,GACnCC,UAAAhU,OAAS2T,eAAT3T,eAAsBgU,UAAqB,GAC3CC,YAAAjU,OAAW2T,eAAX3T,eAAwBiU,YAAuB,IAGhD9I,IAAA4B,WACCtJ,cAAAwL,cAAcgE,SAAa/D,eAAe+D,SAC1C,QAAAxP,cAAAwL,cAAcqF,UAAcpF,eAAeoF,UAC3C,QAAA7Q,cAAAwL,cAAcsF,SAAarF,eAAeqF,SAC1C,QAAA9Q,cAAAwL,cAAc6E,MAAU5E,eAAe4E,MAAA,QAAArQ,cACvCwL,cAAc8E,IAAQ7E,eAAe6E,IAAA,QAAAtQ,cACrCwL,cAAc+E,QAAY9E,eAAe8E,QAAA,QAAAvQ,cACzCwL,cAAcgF,UAAc/E,eAAe+E,UAAA,iBAEtC,KACNlH,WAAa,MACd,IAIDnC,YAAc,eACP,MAAAqJ,UAAYlF,QAAMkF,aACpBA,WAAaxQ,cAAAwQ,UAAUY,OAAW,GAAI,QACzC1J,IAAA+I,iBAAmBD,UAAA,UACb,CACNpT,IAAAqT,mBAAAlU,OAAmB2T,eAAnB3T,eAAgCiU,YAAuBa,YAAU9U,GAAAyC,IAAA8I,WAAAvL,eAASiT,WAAY,WAAS,KAChG,mBAGc2B,yCACdjI,UAAY,UACZE,MAAQ,IAEJ,QACHtB,cAAgB+D,aAAA,cACX/D,SAAS,KACbsB,MAAQ,2BAET,IAGIkI,gBAAgB/U,IAAAuL,SAAQrC,MAAO,OAC5B8L,UAAYC,sBACbD,UAAW,KACfnI,MAAQ,wCAET,CACA1B,IAAAwI,kBAAoBuB,YAAAlV,IAAYuL,SAAQrC,KAAM8L,WAAS,UACjD,CACNnU,IAAA8S,YAAA3T,IAAcuL,SAAQrC,KAAA,KACvB,CAGAsC,YAAY,WAAAxL,IAAYuL,SAAQ0H,UAAY,IAC5CzH,YAAY,cAAaxL,GAAAyC,IAAAkR,aAAYvT,OAAZJ,eAAkB4T,QAAS,IACpDpI,YAAY,aAAYxL,GAAAyC,IAAAkR,aAAYvT,OAAZJ,eAAkB6T,OAAQ,IAClDrI,YAAY,QAAAxL,IAAS2T,aAAYG,OAAS,IAC1CtI,YAAY,QAAAxL,GAAOyC,IAAAkR,eAAP3T,eAAoB+T,MAAiB,IACjDvI,YAAY,YAAAxL,GAAWyC,IAAAkR,eAAX3T,eAAwBgU,UAAqB,IACzDxI,YAAY,cAAAxL,GAAayC,IAAAkR,eAAb3T,eAA0BiU,YAAuB,GAE9D,OAAShQ,GACJkR,MAAAtI,MAAM,8BAA+B,MAAO5I,OAChD4I,MAAQ,+BACP,YACDF,UAAY,MACb,CACD,CAEe9G,eAAA8O,YAAY5G,QAErB,IAAA/N,IAAAuL,WAAAvL,IAAY2T,aAAa,KAC7B9G,MAAQ,iCAET,KAEAD,SAAW,UACXC,MAAQ,QACRC,QAAU,IAEN,IACCqI,MAAAC,KAAK,uCAAwC,MAAOrH,QACpDoH,MAAAC,KAAK,2BAA4B,OACpC7J,UAAWvL,IAAAuL,SACXoI,cAAe3T,IAAA2T,aACfqB,YAAaC,0BAIRD,UAAYC,sBACbD,UAAW,OACTnF,SAAW,0DACbsF,MAAAtI,MAAM,aAAegD,SAAU,WACnChD,MAAQgD,cACRuE,WAAavE,cACbsE,UAAY,UACZvH,SAAW,aAEZ,CAGM,MAAAyI,mBAAA,IACFrV,IAAA2T,aACHvT,KAAA,CACCoQ,GAAAxQ,IAAIuL,SAAQiF,GACZ8E,QAAAtV,IAASuL,SAAQ+J,QACjB1B,MAAO7F,OAAOuG,WAAa,GAC3BT,KAAM9F,OAAOwG,UAAY,IAE1BT,MAAO/F,OAAO+F,OAAS,GACvBC,IAAKhG,OAAOgG,KAAO,GACnBC,QAASjG,OAAOiG,SAAW,GAC3BC,UAAWlG,OAAOkG,WAAa,IAG5BkB,MAAAC,KAAK,0CAA2C,MAAOC,oBAGrD,MAAA3F,eAAA,IACF1P,IAAAuL,SACH0H,SAAUlF,OAAOkF,SACjB/J,KAAMmM,mBACN7F,YAAA,IAAgB9H,MAAO+H,eAGpB0F,MAAAC,KAAK,qCAAsC,OAC9CnC,SAAUvD,eAAeuD,SACzBzD,WAAYE,eAAeF,aAI5BrI,MAAIiO,KAAK,oCACL,IACH1F,eAAexG,WAAaqM,YAAYF,mBAAoBL,WAC5D7N,MAAIiO,KAAK,kCACV,OAASI,cACF,MAAA3F,SAAW,mCAAqC2F,aAAa1F,QAC/DqF,MAAAtI,MAAM,+BAAgC,MAAO2I,kBACjD3I,MAAQgD,cACRuE,WAAavE,cACbsE,UAAY,UACZvH,SAAW,aAEZ,CAGAzF,MAAIiO,KAAK,sCACL,UACGxF,kBAAkBF,gBACxBvI,MAAIiO,KAAK,oCACV,OAASK,WACF,MAAA5F,SAAW,sCAAwC4F,UAAU3F,QAC/DqF,MAAAtI,MAAM,4BAA6B,MAAO4I,eAC9C5I,MAAQgD,cACRuE,WAAavE,cACbsE,UAAY,UACZvH,SAAW,aAEZ,CAIA/L,IAAA0K,QAAA,IACImE,eACHxG,KAAMmM,oBAAA,MAEPlK,IAAAwI,YAAc0B,mBAAA,UAEdvI,QAAU,qCACVC,WAAa,OAEToI,MAAAC,KAAK,uDAAwD,OAChErI,WAAA/M,IAAA+M,YACAxB,QAAAvL,IAASuL,SAAQ0H,SACjBU,YAAA3T,IAAa2T,aAAYvT,OAI1BsM,eAGAvF,MAAIiO,KAAK,4DAGT/M,WAAiB,KAChBmE,KAAO,WACPI,SAAW,QACT,IAEJ,OAAS3I,GACF,MAAA4L,SAAW,mCAAqC5L,EAAE6L,QACpDqF,MAAAtI,MAAM,6CAA8C,MAAO5I,OAC/D4I,MAAQgD,cACRuE,WAAavE,cACbsE,UAAY,UACZvH,SAAW,MACZ,CACD,UAESmD,qBACJhD,YAAY,CACX,GAAAiD,QAAQ,6DAA8D,CACzExD,KAAO,OACPC,WACD,MACM,CACND,KAAO,OACPC,WACD,CACD,UAcSiJ,uBACRvB,UAAY,WACZtH,MAAQ,QACRuH,WAAa,GACd,4IAGyCrE,+XAczB,MAAA4F,WAAAjU,aAAA,IAAAqN,QAAMuF,WAAavF,QAAMkE,8CAD9BiB,4XAoBiCjR,gBAAA,IAAAhD,SAAAC,MAAAgR,UAAQ+C,4DAD1C,GAAA/C,UAAQ+C,WAAa9C,WAAS8C,mBAASpR,gSAqBLI,gBAAA,IAAAhD,SAAA2G,OAAAsK,UAAQ+B,6DAD1C,GAAA/B,UAAQ+B,UAAY9B,WAAS8B,kBAAQ9P,4PAkBHF,gBAAA,IAAAhD,SAAA2V,OAAA1E,UAAQ4C,0DAD1C,GAAA5C,UAAQ4C,OAAS3C,WAAS2C,eAAKvQ,gSAoBGN,gBAAA,IAAAhD,SAAAiD,OAAAgO,UAAQoD,8DAD1C,GAAApD,UAAQoD,WAAanD,WAASmD,mBAAS9Q,8PAkBLP,gBAAA,IAAAhD,SAAA6D,OAAAoN,UAAQqD,6DAD1C,GAAArD,UAAQqD,UAAYpD,WAASoD,kBAAQ5Q,4QAoBJV,gBAAA,IAAAhD,SAAA8D,OAAAmN,UAAQ8C,4DAD1C,GAAA9C,UAAQ8C,SAAW7C,WAAS6C,iBAAOhQ,oQAkBDf,gBAAA,IAAAhD,SAAAqD,OAAA4N,UAAQ6C,wDAD1C,GAAA7C,UAAQ6C,KAAO5C,WAAS4C,aAAG1B,4RAScxF,sEAF1CA,OAAKvM,SAAAgS,oNAQuCxF,wEAF5CA,SAAOxM,SAAAiS,uFAUDlH,oHAUC0E,8QAYJnD,UAAQtM,SAAAmS,oBAAAnS,SAAA8C,YAAA,gPAeK,QAAAsE,KAAK1H,IAAAuL,SAAQiE,YAAYgD,gFAFzC,IAAAxS,OAAAuL,WAAAvL,UAAS,EAAA0D,GAAA8L,oBAAUqG,o7CAvDiBC,SAAAvE,OAAA,IAAAxC,QAAMgF,KAAO,IAAI/R,QAAM,qBAsBnD0Q,OAAAC,UAAA3S,IAAA+M,iBAAcH,gCAUdA,6BAQCkC,aAAQ9O,IAAK+M,aAAU/M,IAAI4M,kBA1JhB,iBAAAsE,UAAQ+C,WAAa9C,WAAS8C,kBAoB9B,iBAAA/C,UAAQ+B,UAAY9B,WAAS8B,iBAiB7B,iBAAA/B,UAAQ4C,OAAS3C,WAAS2C,cAmB1B,iBAAA5C,UAAQoD,WAAanD,WAASmD,kBAiB9B,iBAAApD,UAAQqD,UAAYpD,WAASoD,iBAmB9B,iBAAArD,UAAQ8C,SAAW7C,WAAS6C,gBAiB5B,iBAAA9C,UAAQ6C,KAAO5C,WAAS4C,8BAnIjCpF,kBAmBAmD,WAAAe,MAAA,IAAA9D,QAAMkF,UAAS7I,SAAA4G,aAAA7D,KAAA8D,QAAflD,OAAMkF,0BAANlF,SAoBA+C,WAAAgB,QAAA,IAAA/D,QAAMkE,SAAQ7H,SAAA4G,aAAA7D,KAAA8D,QAAdlD,OAAMkE,yBAANlE,SAiBA+C,WAAAiB,QAAA,IAAAhE,QAAM+E,MAAK1I,SAAA4G,aAAA7D,KAAA8D,QAAXlD,OAAM+E,sBAAN/E,SAmBA+C,WAAAC,QAAA,IAAAhD,QAAMuF,UAASlJ,SAAA4G,aAAA7D,KAAA8D,QAAflD,OAAMuF,0BAANvF,SAiBA+C,WAAAK,QAAA,IAAApD,QAAMwF,SAAQnJ,SAAA4G,aAAA7D,KAAA8D,QAAdlD,OAAMwF,yBAANxF,SAmBD+C,WAAAiE,QAAA,IAAAhH,QAAMiF,QAAO5I,SAAA4G,aAAA7D,KAAA8D,QAAblD,OAAMiF,wBAANjF,SAgBA+C,WAAAkE,SAAA,IAAAjH,QAAMgF,IAAG3I,SAAA4G,aAAA7D,KAAA8D,QAATlD,OAAMgF,oBAANhF,qEArIXpC,WAASrM,SAAAC,iBAAAD,SAAAsC,UAAA,+IAiNRwR,gDAEEsB,uCAHEvB,8BAAAhJ,IAAAgJ,UAAS/I,QAAA,4MCthBX6K,cAAgBtV,EAAAuV,UAAAC,cAAA3J,MACxB0J,YAAAlW,IAAUmW,gBACV3J,KAAO,MACR,UAES4J,aAAerV,IAAAsV,SAAA7J,MACvB6J,aACA7J,KAAO,MACR,k5CAtBC,IAAAA,KAAAnN,KAAAC,QAAA,UAAiB,OACjBiU,MAAQlU,KAAAC,QAAA,4BACRwQ,QAAUzQ,KAAAC,QAAA,2HACVgX,WAAajX,KAAAC,QAAA,yBACbiX,YAAclX,KAAAC,QAAA,0BACdF,UAAYC,KAAAC,QAAA,yBACZ4W,UAAA7W,KAAAC,QAAA,sBACA+W,SAAiBhX,KAAAC,QAAA,kBAChBkN,KAAO,SAIL,IAAA2J,cAAA1U,IAAAc,MAAuB,OAAK,mnBA4CpB6T,aAAYC,SAAA7J,mGAOZyJ,wJA7B4CnG,2BAwBpDwG,8BAOAC,iBAtBcC,aAAA3D,MAAA,IAAA7S,IAAAmW,0CAAa/K,6pDCrC1B,IAAAqL,QAAAhV,IAAAc,MAAiB,MAAI,WACrB,IAAAjB,aAAsB,MACtB,IAAAoV,aAAAjV,IAAAc,MAAsB,OAAK,gBAC3B,IAAAoU,YAAAlV,IAAAc,MAAqB,OAAK,eAC1B,IAAAqU,kBAAAnV,IAAAc,MAA2B,OAAK,yBAGhC+B,QAAmB7C,IAAAC,aAAA,IAAAkD,mBAAA,CAAqBJ,QAAS,GAAIC,IAAK,kBAC1D,IAAApD,cAAAI,IAAAC,aAAyBG,eAAa,iBACtC,IAAAT,OAAAK,IAAAC,aAAkBC,gBAAc,UAChC,IAAAkV,UAAqBpV,IAAAC,aAAA,IAAA6H,aAAW1E,KAAK2E,aAAW,aAChD,IAAA9D,SAAoBjE,IAAAC,aAAA,IAAA6H,aAAW1E,KAAKqB,MAAI,YACxC,IAAA4Q,UAAArV,IAAAC,aAAqBqV,cAAY,aAGrCnR,QAAoBC,cAClB4Q,QAAU,MAEN,IAEM,MAAA3Q,4CAAakR,sIAAoC,uCAAoB,OAAAlR,yBAAAkR,yCAAA,KAAAC,oCAAA,cAAA9D,KACvE,MAAA7H,eAAiBxF,kBAEnBwF,WAAaA,SAAS4L,UAAY5L,SAAS6L,KAAM,CAEnDjQ,QAAQC,IAAI,2DACN6P,qBACN9P,QAAQC,IAAI,8BACd,OAGMiI,QAAQC,IAAA,CACZ+H,aAAaC,eACbC,WAAWC,aACXC,UAAUC,YAEd,OAAS5K,OACP3F,QAAQ2F,SAAAzE,sBAAA,QAAM,qCAAsCyE,OACtD,KAEA4J,QAAU,SAGH,SAAAiB,kBAAkBzW,OACdqW,WAAAK,YAAY1W,MAAMoB,QAC/B,UAESuV,0BACPjB,YAAc,KAChB,UAESkB,qBACPnB,aAAe,KACjB,UAESoB,cAEEC,SAAAC,gBAAgBC,UAAUC,OAAO,OAC5C,gBAEeC,qBAEPC,iBAAmB3U,cAAAqE,aAAaC,QAAQ,kCAAsC,WAEhFqQ,iBAAkB,OAEdC,oBACD,KAELzB,kBAAoB,KACtB,CACF,CAEe/Q,eAAAyS,oBAAoBnC,kBAC7BA,cAAe,CAEJrO,aAAAE,QAAQ,iCAAkC,OACzD,OAEMqQ,eACR,gBAEeA,gBACT,sBAGAE,YAAAC,aACAA,aAAAC,+BACAA,+BAAAC,0BACAA,qPACe,yBAAoB3S,KAAA4S,KAAAC,IAAA,sLAAA3B,oCAAA,cAAA9D,KAE7B,MAAA0F,0BAAcC,+HAA6B,sCAA0B,OAAAD,2BAAAC,2BAAA,KAAA7B,wCAAA,cAAA9D,KACrE,MAAA4F,iCAAAC,cAAAnT,UAAA,MAAAkT,kCAAAE,OAA8B,yBAAoB,OAAAF,6BAAA,KAAA9B,oCAAA,cAAA9D,KAClD,MAAA+F,uCAAAF,cAAAnT,UAAA,MAAAqT,wCAAAD,OAAiC,yBAAuB,OAAAC,mCAAA,KAAAjC,gCAAA,cAAA9D,KACxD,MAAAgG,yBAAAH,cAAAnT,UAAA,MAAAsT,0BAAAF,OAA0B,yBAAmB,OAAAE,qBAAA,KAAAlC,uCAAA,cAAA9D,KAC7C,MAAAiG,2DAAAJ,cAAAnT,UAAA,MAAAuT,4DAAAH,OAA2C,yBAAuC,OAAAG,uDAAA,KAAAnC,uCAAA,cAAA9D,KAClF,MAAAkG,iDAAAL,cAAAnT,UAAA,MAAAwT,kDAAAJ,OAAsC,yBAAuB,OAAAI,6CAAA,KAAApC,+CAAA,cAAA9D,KAC7D,MAAAhM,8DAAA8R,OAAqB,yBAA4BlT,KAAA4S,KAAAW,IAAA,OAAAnS,WAAA,KAAA8P,oCAAA,cAAA9D,KACjD,MAAA1Q,8DAAAwW,OAAqB,yBAAclT,KAAA4S,KAAAY,GAAA,OAAA9W,WAAA,KAAAwU,8BAAA,cAAA9D,WAGrCkG,6BAGAR,aAAa,UACbC,oBAGAK,SAAS,MAGfJ,eACAG,kBACAV,aAAa,IACbY,4BAG+B3W,oCAAIiW,4BAGnCH,iBAGInB,cAAuB3T,qBAAA2T,aAAaoC,MAAU,YAAY,CAC5DpC,aAAaoC,OACf,IACIlC,YAAqB7T,qBAAA6T,WAAWkC,MAAU,YAAY,CACxDlC,WAAWkC,OACb,IACIhC,WAAoB/T,qBAAA+T,UAAUgC,MAAU,YAAY,CACtDhC,UAAUgC,YACL,CACLtS,QAAQuS,KAAK,8DACf,CAGAC,eAAexO,WAAW,0BAE1BhE,QAAQC,IAAI,2CAGZ8B,OAAO0Q,SAASna,KAAO,iBAEzB,OAASqN,OACP3F,QAAQ2F,SAAAzE,sBAAA,QAAM,2BAA4ByE,QAC1C+M,MAAM,0EACR,CACF,2FAOWtV,kCACDlD,wCACOC,gBACDC,wCACCoW,kCACEE,+BACLC,uBACHC,qBACCK,kJAQG,iBACA,yTAKR1B,SAAOnW,SAAAC,iBAAAD,SAAAsC,UAAA,sJAkBCiU,qSAQR,GAAAgD,cAAc,kBAAgBvZ,SAAAuC,0KAI9B,GAAAgX,cAAc,gBAAcvZ,SAAA6C,+EAL7B2T,oBAASvT,oFAWMmT,iCAAAvL,IAAAuL,aAAYtL,QAAA,4EAGbuL,gCAAAxL,IAAAwL,YAAWvL,QAAA,wEAKlBkN,oBACKjC,SAAA,IAAAxV,IAAA+V,kBAAoB,6BAFzBA,sCAAAzL,IAAAyL,kBAAiBxL,QAAA","names":["className","$.prop","$$props","items","href","icon","label","$.each","div_2","item","$.set_attribute","a","$.get","$.set_text","text","logo","name","isLogoOnly","$$render","consequent","set_class","div","on_click","_","menuOpen","$.set","on_click_1","__1","selectChain","chain","on_click_2","__2","chains","selectedChain","showTestnets","onSwitch","storeChains","$.tag","$.derived","$visibleChains","storeSelectedChain","$currentChain","showTestnetsSetting","effectiveChains","length","filter","isTestnet","key","network","chainId","effectiveSelectedChain","$.state","img","get","_b","includes","alternate","consequent_1","each","div_1","img_1","$.template_effect","text_3","consequent_2","alternate_1","template_effect","text_6","consequent_3","consequent_4","$.strict_equals","_a","consequent_5","set_attribute","button_1","text_4","text_5","consequent_6","e","onManage","onSettings","onTheme","onLogout","account","username","address","ens","avatar","storeAccount","$currentAccount","plan","$currentPlan","effectiveAccount","shortAddr","addr","slice","acc","displayName","avatarInitial","toUpperCase","link","onSwitchChain","prop","planType","registered","onMount","async","getSettings","then","result","yakklSettings","type","formatPlanType","replace","split","map","word","charAt","toLowerCase","join","displayPlan","text_1","YEAR","VERSION","handleUpgrade","showUpgrade","handleDismiss","console","log","isAnimating","autoVisible","dismissed","clearAutoTimers","dismissalData","timestamp","Date","now","dismissCount","parseInt","localStorage","getItem","setItem","JSON","stringify","toString","$.log_if_contains_state","setTimeout","showOnBasic","showOnTrial","position","autoShowInterval","fadeDuration","trial","$isOnTrial","autoTimer","fadeTimer","hasInitialized","initialDismissalData","window","data","parse","AUTO_SHOW_INTERVAL","FADE_DURATION","trialDaysLeft","$planStore","trialEndsAt","trialEnd","diffTime","getTime","diffDays","Math","ceil","max","shouldShow","PlanType","Basic","getBannerMessage","getBannerType","getBannerColors","onUpgradeComplete","clearInterval","clearTimeout","startAutoShow","setInterval","dismissedTime","$.user_effect","dismissedData","dismissedDate","hoursSinceDismissed","floor","resetHours","removeItem","set","$$value","resetForm","settings","profile","updateField","preferences","showTestNetworks","dark","SystemTheme","SYSTEM","locale","_d","currency","_e","code","idleDelayInterval","idleAutoLock","idleAutoLockCycle","showHints","trialCountdownPinned","show","onClose","onComplete","isLoading","isSaving","error","success","hasChanges","themeOptions","value","LIGHT","DARK","currencyOptions","localeOptions","idleDelayOptions","validationSchema","yup.object","shape","yup.boolean","theme","yup.string","oneOf","Object","values","required","yup.number","min","form","errors","isValid","touched","createForm","initialValues","onSubmit","saveSettings","handleFormSubmit","event","preventDefault","$isValid","$form","loadSettingsData","currentValues","originalValues","$$array","Promise","all","getProfile","updatedSettings","updateDate","toISOString","updatedProfile","setSettings","setProfileStorage","errorMsg","message","handleClose","confirm","getPlanLabel","BASIC_MEMBER","YAKKL_PRO","YAKKL_PREMIUM","version","createDate","toLocaleDateString","id","substring","select","option","option_1_value","option_1","__value","select_1","option_2_value","option_2","$errors","$touched","select_2","option_3_value","option_3","text_7","text_8","select_3","option_4_value","option_4","text_9","text_10","$.bind_value","input_3","$.store_mutate","$.untrack","$.bind_checked","input_4","trialEndDate","consequent_7","consequent_8","consequent_9","toLocaleString","consequent_10","button","disabled","$.bind_select_value","input","input_1","input_2","initial","userName","defaultClasses","url","ariaLabel","$.set_class","$.clsx","title","this","$$args","ErrorNoAction","profileData","first","last","email","bio","website","avatarUrl","previewAvatarUrl","showError","errorValue","matches","firstName","lastName","optional","nullable","transform","saveProfile","loadProfileData","trim","identicon","isEncryptedData","miscStore","$yakklMiscStore","decryptData","log$1","info","updatedProfileData","persona","encryptData","encryptError","saveError","handleErrorClose","expression","text_2","consequent_11","set_text","input_5","textarea","handleConfirm","onConfirm","dontShowAgain","handleCancel","onCancel","rejectText","confirmText","bind_checked","loading","showSettings","showProfile","showLogoutConfirm","trialEnds","modalOpen","$isModalOpen","syncStorageToStore","__VITE_PRELOAD__","isLocked","init","accountStore","loadAccounts","chainStore","loadChains","planStore","loadPlan","handleSwitchChain","switchChain","handleManageAccount","handleSettings","handleTheme","document","documentElement","classList","toggle","handleLogout","skipConfirmation","performLogout","handleLogoutConfirm","resetStores","setMiscStore","setYakklTokenDataCustomStorage","yakklTokenDataCustomStore","n","dg","setBadgeText","setIconLock","removeTimers","__vitePreload","import","removeListeners","setLocks","resetTokenDataStoreValues","stopActivityTracking","df","i","reset","warn","sessionStorage","location","alert","canUseFeature"],"ignoreList":[],"sources":["../../../../../../src/routes/preview2/lib/components/DockLauncher.svelte","../../../../../../src/routes/preview2/lib/components/Brand.svelte","../../../../../../src/routes/preview2/lib/components/NetworkSwitcher.svelte","../../../../../../src/routes/preview2/lib/components/UserMenu.svelte","../../../../../../src/routes/preview2/lib/components/Header.svelte","../../../../../../src/routes/preview2/lib/components/Copyright.svelte","../../../../../../src/routes/preview2/lib/components/Footer.svelte","../../../../../../src/routes/preview2/lib/components/UpgradeBanner.svelte","../../../../../../src/routes/preview2/lib/components/Settings.svelte","../../../../../../src/routes/preview2/lib/components/v1/Avatar.svelte","../../../../../../src/routes/preview2/lib/components/v1/ErrorNoAction.svelte","../../../../../../src/routes/preview2/lib/components/Profile.svelte","../../../../../../src/routes/preview2/lib/components/ConfirmLogout.svelte","../../../../../../src/routes/preview2/+layout.svelte"],"sourcesContent":["<script lang=\"ts\">\n  let { className = '' } = $props();\n\n  const items = [\n    { href: '/preview2', icon: '🏠', label: 'Home' },\n    { href: '/preview2/preferences', icon: '⚙️', label: 'Preferences' },\n    { href: '/preview2/settings', icon: '🛠️', label: 'Settings' },\n    { href: '/preview2/contacts', icon: '📇', label: 'Contacts' },\n    { href: '/preview2/tokens', icon: '💠', label: 'Tokens' }\n  ];\n</script>\n\n<div class={`${className}`}>\n  <div class={`relative group w-14`}>\n    <button class=\"yakkl-circle-button text-lg font-bold\">☰</button>\n    <div class=\"absolute bottom-16 left-0 bg-white dark:bg-zinc-900 shadow-lg border border-zinc-200 dark:border-zinc-700 rounded-t-full py-2 z-50 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 w-14 flex flex-col items-center\">\n      {#each items as item}\n        <a href={item.href} class=\"w-12 h-12 flex items-center justify-center rounded-full hover:bg-zinc-200 dark:hover:bg-zinc-700 text-zinc-900 dark:text-white text-sm mb-1 transition-colors\">{item.icon}</a>\n      {/each}\n    </div>\n  </div>\n</div>\n","<script lang=\"ts\">\n  let { logo = '/images/logoBullFav32x32.png', name = '', className = '' } = $props();\n  let isLogoOnly = !name || name === '';\n</script>\n\n<div class={`flex items-center font-bold text-lg tracking-wide text-indigo-400 select-none ${isLogoOnly ? 'w-10 max-w-[42px]' : ''} ${className}`}>\n  <img src={logo} class=\"h-7 w-7 rounded-none\" alt=\"Logo\" />\n  {#if !isLogoOnly}\n    <span class=\"ml-2\">{name}</span>\n  {/if}\n</div>\n","<script lang=\"ts\">\n  import { currentChain, visibleChains } from '../stores/chain.store';\n  import { getSettings } from '$lib/common/stores';\n  \n  let {\n    chains = [],\n    selectedChain = null,\n    showTestnets = false,\n    onSwitch = null,\n    className = ''\n  } = $props();\n  \n  // Use store data if available\n  let storeChains = $derived($visibleChains);\n  let storeSelectedChain = $derived($currentChain);\n  let showTestnetsSetting = $state(false);\n\n  // Use store data if available, otherwise fallback to props or default\n  let effectiveChains = $derived(() => {\n    if (storeChains.length > 0) {\n      return showTestnetsSetting ? storeChains : storeChains.filter(chain => !chain.isTestnet);\n    }\n    if (chains.length > 0) {\n      return showTestnets ? chains : chains.filter(chain => !chain.isTestnet);\n    }\n    return [\n      { key: 'eth-main', name: 'Ethereum', network: 'Mainnet', icon: '/images/eth.svg', isTestnet: false, chainId: 1 },\n      { key: 'eth-sepolia', name: 'Ethereum', network: 'Sepolia', icon: '/images/eth.svg', isTestnet: true, chainId: 11155111 },\n      { key: 'sol-main', name: 'Solana', network: 'Mainnet', icon: '/images/sol.svg', isTestnet: false, chainId: 101 }\n    ].filter(chain => showTestnetsSetting ? true : !chain.isTestnet);\n  });\n  \n  let effectiveSelectedChain = $derived(() => {\n    return storeSelectedChain || selectedChain || effectiveChains[0];\n  });\n\n  let menuOpen = $state(false);\n\n  function selectChain(chain: any) {\n    if (onSwitch) onSwitch(chain);\n    menuOpen = false;\n  }\n</script>\n\n<div class={`relative ${className}`}>\n  <button\n    class=\"yakkl-pill\"\n    onclick={() => menuOpen = !menuOpen}\n    title=\"Switch Network\"\n    aria-haspopup=\"listbox\"\n    aria-expanded={menuOpen}\n  >\n    {#if effectiveSelectedChain?.icon?.includes('/')}\n      <img src={effectiveSelectedChain.icon} alt={effectiveSelectedChain.name} class=\"w-6 h-6\" />\n    {:else}\n      <span class=\"text-xl\">{effectiveSelectedChain?.icon || '🌐'}</span>\n    {/if}\n    <span class=\"truncate\">{effectiveSelectedChain?.name || 'Unknown'}</span>\n    <span class=\"text-xs opacity-70 ml-1 truncate\">{effectiveSelectedChain?.network || 'Network'}</span>\n    <svg class=\"ml-1 w-3 h-3\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path d=\"M6 8l4 4 4-4\"/></svg>\n    {#if (showTestnets || showTestnetsSetting) && effectiveSelectedChain?.isTestnet}\n      <span class=\"ml-2 px-2 py-0.5 rounded-full text-[10px] bg-yellow-200 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100 font-bold\">TESTNET</span>\n    {/if}\n  </button>\n  {#if menuOpen}\n    <div class=\"absolute left-0 top-full mt-2 w-56 yakkl-dropdown\">\n      {#each effectiveChains as chain}\n        <button\n          class=\"yakkl-dropdown-item flex items-center gap-2 {chain.key === effectiveSelectedChain?.key ? 'bg-indigo-50 dark:bg-indigo-900' : ''}\"\n          onclick={() => selectChain(chain)}\n          role=\"option\"\n          aria-selected={effectiveSelectedChain.key === chain.key}\n          title={`Switch to ${chain.name} ${chain.network}`}\n        >\n          {#if chain.icon?.includes('/')}\n            <img src={chain.icon} alt={chain.name} class=\"w-6 h-6\" />\n          {:else}\n            <span class=\"text-xl\">{chain.icon}</span>\n          {/if}\n          <div class=\"flex-1 text-left\">\n            <div class=\"font-medium\">{chain.name}</div>\n            <div class=\"text-xs opacity-60\">{chain.network}</div>\n            {#if chain.chainId}\n              <div class=\"text-xs text-zinc-400\">ID: {chain.chainId}</div>\n            {/if}\n          </div>\n          {#if (showTestnets || showTestnetsSetting) && chain.isTestnet}\n            <span class=\"px-2 py-0.5 rounded-full text-[10px] bg-yellow-200 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100 font-bold\">TEST</span>\n          {/if}\n          {#if chain.key === effectiveSelectedChain?.key}\n            <svg class=\"w-4 h-4 text-green-500 ml-auto\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 13l4 4L19 7\" />\n            </svg>\n          {/if}\n        </button>\n      {/each}\n    </div>\n    <button class=\"fixed inset-0 z-40\" style=\"background:transparent\" aria-label=\"Close menu\" onclick={() => menuOpen = false}></button>\n  {/if}\n</div>\n","<script lang=\"ts\">\n  import SimpleTooltip from \"$lib/components/SimpleTooltip.svelte\";\n  import { currentAccount } from '../stores/account.store';\n  import { currentPlan } from '../stores/plan.store';\n  \n  let {\n    account = { username: '', address: '', ens: null, avatar: null },\n    onManage = null, onTheme = null, onSettings = null, onLogout = null,\n    className = ''\n  } = $props();\n  \n  // Use store data if available\n  let storeAccount = $derived($currentAccount);\n  let plan = $derived($currentPlan);\n  \n  let effectiveAccount = $derived(() => {\n    return storeAccount || account;\n  });\n\n  let menuOpen = $state(false);\n  function shortAddr(addr: string | undefined) {\n    return `${addr?.slice(0, 6)}...${addr?.slice(-4)}`;\n  }\n  let username = $derived(() => {\n    const acc = effectiveAccount;\n    return acc.ens || acc.username || shortAddr(acc.address);\n  });\n  \n  let displayName = $derived(() => {\n    const acc = effectiveAccount;\n    if (acc.ens) return acc.ens;\n    if (acc.username) return acc.username;\n    return shortAddr(acc.address);\n  });\n  \n  let avatarInitial = $derived(() => {\n    const acc = effectiveAccount;\n    if (acc.ens) return acc.ens[0].toUpperCase();\n    if (acc.username) return acc.username[0].toUpperCase();\n    return acc.address?.[2]?.toUpperCase() ?? \"Y\";\n  });\n</script>\n\n<div class={`relative flex items-center justify-center ${className}`}>\n  <button\n    class=\"h-7 w-7 rounded-full bg-indigo-600 hover:ring-2 hover:ring-indigo-400 border border-indigo-200 dark:border-indigo-600 flex items-center justify-center\"\n    aria-label={`Manage account for ${username()}`}\n    title={`${displayName()} (${plan})`}\n    onclick={() => menuOpen = !menuOpen}\n    tabindex=\"0\"\n  >\n    {#if effectiveAccount.avatar}\n      <img src={effectiveAccount.avatar} alt=\"avatar\" class=\"h-8 w-8 rounded-full object-cover\" />\n    {:else}\n      <span class=\"text-white text-lg font-bold select-none\">\n        {avatarInitial()}\n      </span>\n    {/if}\n  </button>\n  {#if menuOpen}\n    <!-- Backdrop overlay for click-outside functionality -->\n    <div \n      class=\"fixed inset-0 z-40 bg-transparent\" \n      onclick={() => menuOpen = false}\n      onkeydown={(e) => e.key === 'Escape' && (menuOpen = false)}\n      role=\"button\"\n      tabindex=\"0\"\n      aria-label=\"Close menu\"\n    ></div>\n    \n    <!-- Dropdown menu -->\n    <div class=\"absolute right-0 top-full mt-2 min-w-[200px] yakkl-dropdown animate-in fade-in z-50\">\n      <!-- Account Info Header -->\n      <div class=\"px-4 py-3 border-b border-zinc-200 dark:border-zinc-700\">\n        <div class=\"flex items-center gap-3\">\n          {#if effectiveAccount.avatar}\n            <img src={effectiveAccount.avatar} alt=\"avatar\" class=\"w-8 h-8 rounded-full object-cover\" />\n          {:else}\n            <div class=\"w-8 h-8 rounded-full bg-indigo-600 flex items-center justify-center text-white font-bold\">\n              {avatarInitial()}\n            </div>\n          {/if}\n          <div class=\"flex-1 min-w-0\">\n            <div class=\"font-medium text-sm truncate\">{displayName()}</div>\n            <div class=\"text-xs text-zinc-500 truncate\">{shortAddr(effectiveAccount.address)}</div>\n            <div class=\"text-xs text-indigo-600 dark:text-indigo-400 capitalize\">{plan} Plan</div>\n          </div>\n        </div>\n      </div>\n      \n      <!-- Menu Items -->\n      <div class=\"py-1\">\n        <button class=\"yakkl-dropdown-item flex items-center gap-2\" onclick={() => {menuOpen = false; onManage && onManage();}}>\n          <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" />\n          </svg>\n          Manage Account\n        </button>\n        <button class=\"yakkl-dropdown-item flex items-center gap-2\" onclick={() => {menuOpen = false; onSettings && onSettings();}}>\n          <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z\" />\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n          </svg>\n          Settings\n        </button>\n        <button class=\"yakkl-dropdown-item flex items-center gap-2\" onclick={() => {menuOpen = false; onTheme && onTheme();}}>\n          <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z\" />\n          </svg>\n          Toggle Theme\n        </button>\n        <div class=\"border-t border-zinc-200 dark:border-zinc-700 my-1\"></div>\n        <button class=\"yakkl-dropdown-item text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 flex items-center gap-2\" onclick={() => {menuOpen = false; onLogout && onLogout();}}>\n          <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\" />\n          </svg>\n          Logout\n        </button>\n      </div>\n    </div>\n  {/if}\n</div>\n","<script lang=\"ts\">\n  import Brand from './Brand.svelte';\n  import NetworkSwitcher from './NetworkSwitcher.svelte';\n  import UserMenu from './UserMenu.svelte';\n\n  let {\n    logo = '/images/logoBullFav32x32.png',\n    link = '/',\n    account = { username: '', address: '', ens: null, avatar: null },\n    selectedChain = null,\n    chains = [],\n    showTestnets = false,\n    onSwitchChain = null,\n    onManageAccount,\n    onSettings,\n    onTheme,\n    onLogout,\n    className = ''\n  } = $props();\n</script>\n\n<header class=\"relative w-full mx-auto flex items-center h-14 bg-white/90 dark:bg-zinc-900/80 border-b border-zinc-100 dark:border-zinc-800 z-50\">\n  <!-- Brand Left -->\n  <div class=\"absolute left-4 top-1/2 -translate-y-1/2\">\n    <a href={link}><Brand logo={logo} /></a>\n  </div>\n\n  <!-- Center: Network Switcher (true center!) -->\n  <div class=\"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2\">\n    <NetworkSwitcher\n      chains={chains}\n      selectedChain={selectedChain}\n      showTestnets={showTestnets}\n      onSwitch={onSwitchChain}\n      className=\"yakkl-net-switcher\"\n    />\n  </div>\n\n  <!-- UserMenu right -->\n  <div class=\"absolute right-4 top-1/2 -translate-y-1/2\">\n    <UserMenu\n      account={account}\n      onManage={onManageAccount}\n      onSettings={onSettings}\n      onTheme={onTheme}\n      onLogout={onLogout}\n    />\n  </div>\n</header>\n\n","<script lang=\"ts\">\n\timport { VERSION, YEAR } from '$lib/common/constants';\n\timport type { Settings } from '$lib/common';\n\timport { getSettings } from '$lib/common/stores';\n\timport { onMount } from 'svelte';\n\n\tinterface Props {\n\t\tplanType?: string | null;\n\t\tclassName?: string;\n\t}\n\n\tlet { planType = null, className = '' }: Props = $props();\n\n\t/**\n\t * The registered type retrieved from Yakkl settings.\n\t * @type {string}\n\t */\n\tlet registered: string = $state('');\n\n\tonMount(async () => {\n\t\tgetSettings().then(async (result) => {\n\t\t\tconst yakklSettings = result as Settings;\n\t\t\tregistered = yakklSettings.plan.type;\n\t\t});\n\t});\n\n\t// Format plan type for display (remove underscores and capitalize)\n\tfunction formatPlanType(plan: string): string {\n\t\tif (!plan) return '';\n\t\treturn plan\n\t\t\t.replace(/_/g, ' ')\n\t\t\t.split(' ')\n\t\t\t.map(word => word.charAt(0).toUpperCase() + word.slice(1).toLowerCase())\n\t\t\t.join(' ');\n\t}\n\n\t// Get the display plan type\n\tlet displayPlan = $derived(formatPlanType(planType || registered));\n</script>\n\n<div class={`inline-flex items-center gap-2 w-full justify-center text-center ${className}`}>\n\t<!-- Blue highlighted plan type at the beginning -->\n\t{#if displayPlan}\n\t\t<span class=\"inline-flex items-center px-2 py-0.5 rounded-full shadow text-[10px] font-semibold opacity-80\n\t\t\tbg-blue-50 dark:bg-blue-900 text-blue-700 dark:text-blue-200\">\n\t\t\t{displayPlan}\n\t\t</span>\n\t{/if}\n\t\n\t<!-- Copyright text -->\n\t<span class=\"text-[10px] opacity-70 text-gray-400 dark:text-gray-500 select-none\">\n\t\tYAKKL® ©Copyright {YEAR}, Version: {VERSION}\n\t</span>\n</div>","<script lang=\"ts\">\n\timport Copyright from \"./Copyright.svelte\";\n\n  let { planType = 'Pro (Trial)', trialEnds = '2024-07-20', appName = 'YAKKL', className = '' } = $props();\n</script>\n\n<footer class={`yakkl-footer ${className}`}>\n  <Copyright {planType} />\n</footer>\n","<!--\n  UpgradeBanner - Shows upgrade prompts for trial users or basic plan users\n-->\n\n<script lang=\"ts\">\n  import { currentPlan, isOnTrial, planStore } from '../stores/plan.store';\n  import { PlanType } from '../types';\n  import Upgrade from './Upgrade.svelte';\n\n  let { \n    showOnBasic = true,\n    showOnTrial = true,\n    className = '',\n    position = 'top', // 'top', 'bottom', 'inline'\n    autoShowInterval = 300000, // 5 minutes in ms\n    fadeDuration = 10000 // 10 seconds to show\n  } = $props();\n\n  let plan = $derived($currentPlan);\n  let trial = $derived($isOnTrial);\n  let showUpgrade = $state(false);\n  let dismissed = $state(false);\n  let autoVisible = $state(false);\n  let autoTimer: number | null = null;\n  let fadeTimer: number | null = null;\n  let isAnimating = $state(false);\n  let hasInitialized = false;\n  \n  // Check dismissal immediately on component creation\n  const initialDismissalData = typeof window !== 'undefined' ? localStorage.getItem('yakkl:upgrade-banner-dismissed') : null;\n  if (initialDismissalData) {\n    try {\n      const data = JSON.parse(initialDismissalData);\n      dismissed = true; // Set immediately to prevent flash\n    } catch (e) {\n      dismissed = true; // Set immediately to prevent flash\n    }\n  }\n  \n  // Constants for easy configuration\n  const AUTO_SHOW_INTERVAL = autoShowInterval; // 5 minutes\n  const FADE_DURATION = fadeDuration; // 10 seconds\n\n  // Calculate trial days remaining\n  let trialDaysLeft = $derived(() => {\n    if (!trial || !$planStore.plan.trialEndsAt) return 0;\n    const now = new Date();\n    const trialEnd = new Date($planStore.plan.trialEndsAt);\n    const diffTime = trialEnd.getTime() - now.getTime();\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n    return Math.max(0, diffDays);\n  });\n\n  // Determine if banner should show\n  let shouldShow = $derived(() => {\n    // If dismissed, only show if auto-triggered\n    if (dismissed) {\n      return autoVisible;\n    }\n    \n    // Not dismissed, check if should show based on plan\n    if (trial && showOnTrial && trialDaysLeft <= 7) return true; // Show in last 7 days\n    if (plan === PlanType.Basic && showOnBasic) return true;\n    \n    return false;\n  });\n\n  function getBannerMessage() {\n    if (trial) {\n      if (trialDaysLeft <= 0) {\n        return 'Your trial has expired. Upgrade to continue using Pro features.';\n      } else if (trialDaysLeft === 1) {\n        return 'Your trial expires tomorrow. Upgrade to keep Pro features.';\n      } else {\n        return `Your trial expires in ${trialDaysLeft} days. Upgrade to keep Pro features.`;\n      }\n    } else {\n      return 'Upgrade to Pro to unlock advanced features and enhanced security.';\n    }\n  }\n\n  function getBannerType() {\n    if (trial && trialDaysLeft <= 1) return 'urgent';\n    if (trial && trialDaysLeft <= 3) return 'warning';\n    return 'info';\n  }\n\n  function getBannerColors() {\n    const type = getBannerType();\n    switch (type) {\n      case 'urgent':\n        return 'bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-800 dark:text-red-200';\n      case 'warning':\n        return 'bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800 text-yellow-800 dark:text-yellow-200';\n      default:\n        return 'bg-indigo-50 dark:bg-indigo-900/20 border-indigo-200 dark:border-indigo-800 text-indigo-800 dark:text-indigo-200';\n    }\n  }\n\n  function handleUpgrade() {\n    showUpgrade = true;\n  }\n\n  function handleDismiss() {\n    console.log('UpgradeBanner: Dismissing banner');\n    isAnimating = true;\n    autoVisible = false;\n    dismissed = true;\n    \n    // Clear any active timers\n    clearAutoTimers();\n    \n    // Immediately store dismissal in localStorage with more permanent flag\n    const dismissalData = {\n      timestamp: Date.now(),\n      dismissCount: (parseInt(localStorage.getItem('yakkl:upgrade-banner-dismiss-count') || '0') + 1)\n    };\n    localStorage.setItem('yakkl:upgrade-banner-dismissed', JSON.stringify(dismissalData));\n    localStorage.setItem('yakkl:upgrade-banner-dismiss-count', dismissalData.dismissCount.toString());\n    \n    console.log('UpgradeBanner: Saved dismissal data:', dismissalData);\n    \n    setTimeout(() => {\n      isAnimating = false;\n    }, 300); // Wait for animation to complete\n  }\n\n  function onUpgradeComplete() {\n    showUpgrade = false;\n    dismissed = true;\n    autoVisible = false;\n    clearAutoTimers();\n  }\n  \n  function clearAutoTimers() {\n    if (autoTimer) {\n      clearInterval(autoTimer);\n      autoTimer = null;\n    }\n    if (fadeTimer) {\n      clearTimeout(fadeTimer);\n      fadeTimer = null;\n    }\n  }\n  \n  function startAutoShow() {\n    // Only start auto-show for basic users who haven't permanently dismissed\n    if (plan === PlanType.Basic && !dismissed) {\n      autoTimer = setInterval(() => {\n        // Check if user hasn't dismissed and not in upgrade flow\n        if (!dismissed && !showUpgrade && !autoVisible) {\n          // Double-check dismissal status from localStorage\n          const dismissedTime = localStorage.getItem('yakkl:upgrade-banner-dismissed');\n          if (!dismissedTime) {\n            autoVisible = true;\n            \n            // Auto-hide after fade duration\n            fadeTimer = setTimeout(() => {\n              autoVisible = false;\n            }, FADE_DURATION);\n          }\n        }\n      }, AUTO_SHOW_INTERVAL);\n    }\n  }\n\n  // Initialize dismissal status only once\n  $effect(() => {\n    if (!hasInitialized) {\n      hasInitialized = true;\n      \n      const dismissedData = localStorage.getItem('yakkl:upgrade-banner-dismissed');\n      console.log('UpgradeBanner: Checking dismissal status, data:', dismissedData);\n      \n      if (dismissedData) {\n        try {\n          const data = JSON.parse(dismissedData);\n          const dismissedDate = new Date(data.timestamp || parseInt(dismissedData));\n          const now = new Date();\n          const hoursSinceDismissed = Math.floor((now.getTime() - dismissedDate.getTime()) / (1000 * 60 * 60));\n          const dismissCount = data.dismissCount || 1;\n          \n          console.log('UpgradeBanner: Hours since dismissed:', hoursSinceDismissed, 'Dismiss count:', dismissCount);\n          \n          // More aggressive dismissal for users who have dismissed multiple times\n          let resetHours = trial ? 24 : 168; // Default: 24h for trial, 7 days for basic\n          if (dismissCount >= 3) {\n            resetHours = trial ? 168 : 720; // 7 days for trial, 30 days for basic after 3 dismissals\n          }\n          \n          if (hoursSinceDismissed >= resetHours) {\n            console.log('UpgradeBanner: Reset time reached, clearing dismissal');\n            localStorage.removeItem('yakkl:upgrade-banner-dismissed');\n            localStorage.removeItem('yakkl:upgrade-banner-dismiss-count');\n            dismissed = false;\n          } else {\n            console.log('UpgradeBanner: Still within dismissal period, hiding banner');\n            dismissed = true;\n          }\n        } catch (e) {\n          // Handle old format\n          const dismissedDate = new Date(parseInt(dismissedData));\n          const now = new Date();\n          const hoursSinceDismissed = Math.floor((now.getTime() - dismissedDate.getTime()) / (1000 * 60 * 60));\n          const resetHours = trial ? 24 : 168;\n          \n          if (hoursSinceDismissed >= resetHours) {\n            localStorage.removeItem('yakkl:upgrade-banner-dismissed');\n            localStorage.removeItem('yakkl:upgrade-banner-dismiss-count');\n            dismissed = false;\n          } else {\n            dismissed = true;\n          }\n        }\n      }\n      \n      // Start auto-show timer only if not dismissed\n      if (!dismissed) {\n        startAutoShow();\n      }\n    }\n    \n    // Cleanup on unmount\n    return () => {\n      clearAutoTimers();\n    };\n  });\n</script>\n\n{#if typeof window !== 'undefined' && shouldShow}\n  <div \n    class={`upgrade-banner ${className} ${position === 'top' ? 'fixed top-0 left-0 right-0 z-40' : position === 'bottom' ? 'fixed bottom-0 left-0 right-0 z-40' : ''} \n           ${autoVisible ? 'animate-slideDown' : ''} ${isAnimating ? 'animate-slideUp' : ''}`}\n  >\n    <div class={`border-l-4 p-4 ${getBannerColors()} relative`}>\n      <div class=\"flex items-center justify-between\">\n        <div class=\"flex items-center\">\n          <div class=\"flex-shrink-0\">\n            {#if getBannerType() === 'urgent'}\n              <svg class=\"h-5 w-5 text-red-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" aria-hidden=\"true\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.232 15.5c-.77.833.192 2.5 1.732 2.5z\" />\n              </svg>\n            {:else if getBannerType() === 'warning'}\n              <svg class=\"h-5 w-5 text-yellow-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" aria-hidden=\"true\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n              </svg>\n            {:else}\n              <svg class=\"h-5 w-5 text-indigo-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" aria-hidden=\"true\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\n              </svg>\n            {/if}\n          </div>\n          <div class=\"ml-3\">\n            <p class=\"text-sm font-medium\">\n              {getBannerMessage()}\n            </p>\n          </div>\n        </div>\n        \n        <div class=\"flex items-center space-x-2\">\n          <button\n            onclick={handleUpgrade}\n            class=\"bg-white dark:bg-zinc-800 px-3 py-1.5 rounded-md text-sm font-medium shadow-sm border border-transparent hover:bg-zinc-50 dark:hover:bg-zinc-700 transition-colors\n              {getBannerType() === 'urgent' ? 'text-red-800 dark:text-red-200 hover:text-red-900 dark:hover:text-red-100' :\n               getBannerType() === 'warning' ? 'text-yellow-800 dark:text-yellow-200 hover:text-yellow-900 dark:hover:text-yellow-100' :\n               'text-indigo-800 dark:text-indigo-200 hover:text-indigo-900 dark:hover:text-indigo-100'}\"\n          >\n            {trial ? 'Upgrade Now' : 'Upgrade to Pro'}\n          </button>\n          \n          <button\n            onclick={handleDismiss}\n            class=\"text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300\"\n            title=\"Dismiss\"\n            aria-label=\"Dismiss upgrade banner\"\n          >\n            <svg class=\"h-5 w-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" aria-hidden=\"true\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n{/if}\n\n<!-- Upgrade Modal -->\n<Upgrade bind:show={showUpgrade} onComplete={onUpgradeComplete} />\n\n<style>\n  .upgrade-banner {\n    transition: all 0.3s ease-out;\n  }\n  \n  .upgrade-banner.fixed {\n    transition: transform 0.3s ease-out, opacity 0.3s ease-out;\n  }\n  \n  .animate-slideDown {\n    animation: slideDown 0.5s ease-out;\n  }\n  \n  .animate-slideUp {\n    animation: slideUp 0.3s ease-in forwards;\n  }\n  \n  @keyframes slideDown {\n    from {\n      transform: translateY(-100%);\n      opacity: 0;\n    }\n    to {\n      transform: translateY(0);\n      opacity: 1;\n    }\n  }\n  \n  @keyframes slideUp {\n    from {\n      transform: translateY(0);\n      opacity: 1;\n    }\n    to {\n      transform: translateY(-100%);\n      opacity: 0;\n    }\n  }\n  \n  /* Auto-fade animation for non-aggressive showing */\n  .upgrade-banner.auto-show {\n    animation: autoFadeIn 0.8s ease-out, autoFadeOut 0.8s ease-in 9.2s;\n  }\n  \n  @keyframes autoFadeIn {\n    from { opacity: 0; transform: translateY(-20px); }\n    to { opacity: 1; transform: translateY(0); }\n  }\n  \n  @keyframes autoFadeOut {\n    from { opacity: 1; transform: translateY(0); }\n    to { opacity: 0; transform: translateY(-20px); }\n  }\n</style>","<!-- Settings.svelte -->\n<script lang=\"ts\">\n\timport { createForm } from 'svelte-forms-lib';\n\timport * as yup from 'yup';\n\timport Modal from './v1/Modal.svelte';\n\timport { getSettings, setSettings, getProfile, setProfileStorage } from '$lib/common/stores';\n\timport { log } from '$lib/managers/Logger';\n\timport { onMount } from 'svelte';\n\timport type { Settings, Profile } from '$lib/common/interfaces';\n\timport { SystemTheme, PlanType } from '$lib/common/types';\n\n\tinterface Props {\n\t\tshow?: boolean;\n\t\tonClose?: () => void;\n\t\tonComplete?: () => void;\n\t}\n\n\tlet {\n\t\tshow = $bindable(false),\n\t\tonClose = () => (show = false),\n\t\tonComplete = () => {}\n\t}: Props = $props();\n\n\tlet settings: Settings | null = $state(null);\n\tlet profile: Profile | null = $state(null);\n\tlet isLoading = $state(false);\n\tlet isSaving = $state(false);\n\tlet error = $state('');\n\tlet success = $state('');\n\tlet hasChanges = $state(false);\n\n\t// Available options\n\tconst themeOptions = [\n\t\t{ value: SystemTheme.SYSTEM, label: 'System' },\n\t\t{ value: SystemTheme.LIGHT, label: 'Light' },\n\t\t{ value: SystemTheme.DARK, label: 'Dark' }\n\t];\n\n\tconst currencyOptions = [\n\t\t{ value: 'USD', label: 'US Dollar (USD)' },\n\t\t{ value: 'EUR', label: 'Euro (EUR)' },\n\t\t{ value: 'GBP', label: 'British Pound (GBP)' },\n\t\t{ value: 'JPY', label: 'Japanese Yen (JPY)' },\n\t\t{ value: 'CAD', label: 'Canadian Dollar (CAD)' },\n\t\t{ value: 'AUD', label: 'Australian Dollar (AUD)' },\n\t\t{ value: 'CHF', label: 'Swiss Franc (CHF)' },\n\t\t{ value: 'CNY', label: 'Chinese Yuan (CNY)' }\n\t];\n\n\tconst localeOptions = [\n\t\t{ value: 'en-US', label: 'English (US)' },\n\t\t{ value: 'en-GB', label: 'English (UK)' },\n\t\t{ value: 'es-ES', label: 'Spanish' },\n\t\t{ value: 'fr-FR', label: 'French' },\n\t\t{ value: 'de-DE', label: 'German' },\n\t\t{ value: 'it-IT', label: 'Italian' },\n\t\t{ value: 'pt-PT', label: 'Portuguese' },\n\t\t{ value: 'ja-JP', label: 'Japanese' },\n\t\t{ value: 'ko-KR', label: 'Korean' },\n\t\t{ value: 'zh-CN', label: 'Chinese (Simplified)' },\n\t\t{ value: 'zh-TW', label: 'Chinese (Traditional)' }\n\t];\n\n\tconst idleDelayOptions = [\n\t\t{ value: 60, label: '1 minute' },\n\t\t{ value: 300, label: '5 minutes' },\n\t\t{ value: 600, label: '10 minutes' },\n\t\t{ value: 900, label: '15 minutes' },\n\t\t{ value: 1800, label: '30 minutes' },\n\t\t{ value: 3600, label: '1 hour' },\n\t\t{ value: 0, label: 'Never' }\n\t];\n\n\t// Form validation schema\n\tconst validationSchema = yup.object().shape({\n\t\tshowTestNetworks: yup.boolean(),\n\t\ttheme: yup.string().oneOf(Object.values(SystemTheme)),\n\t\tlocale: yup.string().required('Locale is required'),\n\t\tcurrency: yup.string().required('Currency is required'),\n\t\tidleDelayInterval: yup.number().min(0, 'Idle delay must be 0 or positive'),\n\t\tidleAutoLock: yup.boolean(),\n\t\tidleAutoLockCycle: yup.number().min(60, 'Auto-lock cycle must be at least 1 minute'),\n\t\tshowHints: yup.boolean(),\n\t\ttrialCountdownPinned: yup.boolean()\n\t});\n\n\t// Initialize form\n\tconst { form, errors, isValid, touched, updateField } = createForm({\n\t\tinitialValues: {\n\t\t\tshowTestNetworks: false,\n\t\t\ttheme: SystemTheme.SYSTEM,\n\t\t\tlocale: 'en-US',\n\t\t\tcurrency: 'USD',\n\t\t\tidleDelayInterval: 300,\n\t\t\tidleAutoLock: true,\n\t\t\tidleAutoLockCycle: 180,\n\t\t\tshowHints: true,\n\t\t\ttrialCountdownPinned: false\n\t\t},\n\t\tvalidationSchema,\n\t\tonSubmit: async (values) => {\n\t\t\tawait saveSettings(values);\n\t\t}\n\t});\n\n\t// Custom submit handler for Svelte 5\n\tasync function handleFormSubmit(event: Event) {\n\t\tevent.preventDefault();\n\t\t\n\t\t// Validate the form\n\t\tif (!$isValid) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\t// Call saveSettings directly with form values\n\t\tawait saveSettings($form);\n\t}\n\n\t// Load settings data on mount and when modal opens\n\t$effect(() => {\n\t\tif (show) {\n\t\t\tloadSettingsData();\n\t\t}\n\t});\n\n\t// Track form changes\n\t$effect(() => {\n\t\tif (settings && profile && !isLoading) {\n\t\t\tconst currentValues = $form;\n\t\t\t// Only track changes if form has been properly initialized\n\t\t\tconst originalValues = {\n\t\t\t\tshowTestNetworks: profile.preferences?.showTestNetworks ?? false,\n\t\t\t\ttheme: profile.preferences?.dark ?? SystemTheme.SYSTEM,\n\t\t\t\tlocale: profile.preferences?.locale ?? 'en-US',\n\t\t\t\tcurrency: profile.preferences?.currency?.code ?? 'USD',\n\t\t\t\tidleDelayInterval: profile.preferences?.idleDelayInterval ?? 300,\n\t\t\t\tidleAutoLock: profile.preferences?.idleAutoLock ?? true,\n\t\t\t\tidleAutoLockCycle: profile.preferences?.idleAutoLockCycle ?? 180,\n\t\t\t\tshowHints: settings.showHints ?? true,\n\t\t\t\ttrialCountdownPinned: settings.trialCountdownPinned ?? false\n\t\t\t};\n\n\t\t\thasChanges = \n\t\t\t\tcurrentValues.showTestNetworks !== originalValues.showTestNetworks ||\n\t\t\t\tcurrentValues.theme !== originalValues.theme ||\n\t\t\t\tcurrentValues.locale !== originalValues.locale ||\n\t\t\t\tcurrentValues.currency !== originalValues.currency ||\n\t\t\t\tcurrentValues.idleDelayInterval !== originalValues.idleDelayInterval ||\n\t\t\t\tcurrentValues.idleAutoLock !== originalValues.idleAutoLock ||\n\t\t\t\tcurrentValues.idleAutoLockCycle !== originalValues.idleAutoLockCycle ||\n\t\t\t\tcurrentValues.showHints !== originalValues.showHints ||\n\t\t\t\tcurrentValues.trialCountdownPinned !== originalValues.trialCountdownPinned;\n\t\t} else {\n\t\t\thasChanges = false;\n\t\t}\n\t});\n\n\tasync function loadSettingsData() {\n\t\tisLoading = true;\n\t\terror = '';\n\t\t\n\t\ttry {\n\t\t\t// Load both settings and profile (for preferences)\n\t\t\t[settings, profile] = await Promise.all([\n\t\t\t\tgetSettings(),\n\t\t\t\tgetProfile()\n\t\t\t]);\n\n\t\t\tif (!settings) {\n\t\t\t\terror = 'Settings not found';\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!profile) {\n\t\t\t\terror = 'Profile not found';\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Update form with current settings and preferences\n\t\t\tupdateField('showTestNetworks', profile.preferences?.showTestNetworks ?? false);\n\t\t\tupdateField('theme', profile.preferences?.dark ?? SystemTheme.SYSTEM);\n\t\t\tupdateField('locale', profile.preferences?.locale ?? 'en-US');\n\t\t\tupdateField('currency', profile.preferences?.currency?.code ?? 'USD');\n\t\t\tupdateField('idleDelayInterval', profile.preferences?.idleDelayInterval ?? 300);\n\t\t\tupdateField('idleAutoLock', profile.preferences?.idleAutoLock ?? true);\n\t\t\tupdateField('idleAutoLockCycle', profile.preferences?.idleAutoLockCycle ?? 180);\n\t\t\tupdateField('showHints', settings.showHints ?? true);\n\t\t\tupdateField('trialCountdownPinned', settings.trialCountdownPinned ?? false);\n\n\t\t} catch (e) {\n\t\t\tlog.error('Error loading settings data:', false, e);\n\t\t\terror = 'Failed to load settings data';\n\t\t} finally {\n\t\t\tisLoading = false;\n\t\t}\n\t}\n\n\tasync function saveSettings(values: any) {\n\t\tif (!settings || !profile) {\n\t\t\terror = 'Settings data not loaded';\n\t\t\treturn;\n\t\t}\n\n\t\tisSaving = true;\n\t\terror = '';\n\t\tsuccess = '';\n\n\t\ttry {\n\t\t\t// Update settings\n\t\t\tconst updatedSettings: Settings = {\n\t\t\t\t...settings,\n\t\t\t\tshowHints: values.showHints,\n\t\t\t\ttrialCountdownPinned: values.trialCountdownPinned,\n\t\t\t\tupdateDate: new Date().toISOString()\n\t\t\t};\n\n\t\t\t// Update preferences in profile\n\t\t\tconst updatedProfile: Profile = {\n\t\t\t\t...profile,\n\t\t\t\tpreferences: {\n\t\t\t\t\t...profile.preferences,\n\t\t\t\t\tshowTestNetworks: values.showTestNetworks,\n\t\t\t\t\tdark: values.theme,\n\t\t\t\t\tlocale: values.locale,\n\t\t\t\t\tcurrency: {\n\t\t\t\t\t\t...profile.preferences.currency,\n\t\t\t\t\t\tcode: values.currency\n\t\t\t\t\t},\n\t\t\t\t\tidleDelayInterval: values.idleDelayInterval,\n\t\t\t\t\tidleAutoLock: values.idleAutoLock,\n\t\t\t\t\tidleAutoLockCycle: values.idleAutoLockCycle,\n\t\t\t\t\tupdateDate: new Date().toISOString()\n\t\t\t\t},\n\t\t\t\tupdateDate: new Date().toISOString()\n\t\t\t};\n\n\t\t\t// Save both settings and profile\n\t\t\tawait Promise.all([\n\t\t\t\tsetSettings(updatedSettings),\n\t\t\t\tsetProfileStorage(updatedProfile)\n\t\t\t]);\n\n\t\t\t// Update local references to reflect saved state\n\t\t\tsettings = updatedSettings;\n\t\t\tprofile = updatedProfile;\n\n\t\t\tsuccess = 'Settings updated successfully!';\n\t\t\thasChanges = false;\n\t\t\t\n\t\t\t// Call completion callback\n\t\t\tonComplete();\n\n\t\t\t// Call completion callback\n\t\t\tonComplete();\n\n\t\t\t// Close modal with a small delay to ensure state updates complete\n\t\t\tsetTimeout(() => {\n\t\t\t\tshow = false;\n\t\t\t\tisSaving = false;\n\t\t\t}, 100);\n\n\t\t} catch (e: any) {\n\t\t\tconst errorMsg = 'Failed to save settings changes: ' + e.message;\n\t\t\tlog.error('Error saving settings:', false, e);\n\t\t\terror = errorMsg;\n\t\t\tisSaving = false;\n\t\t}\n\t}\n\n\tfunction handleClose() {\n\t\tif (hasChanges) {\n\t\t\tif (confirm('You have unsaved changes. Are you sure you want to close?')) {\n\t\t\t\tshow = false;\n\t\t\t\tonClose();\n\t\t\t}\n\t\t} else {\n\t\t\tshow = false;\n\t\t\tonClose();\n\t\t}\n\t}\n\n\tfunction resetForm() {\n\t\tif (settings && profile) {\n\t\t\tupdateField('showTestNetworks', profile.preferences?.showTestNetworks ?? false);\n\t\t\tupdateField('theme', profile.preferences?.dark ?? SystemTheme.SYSTEM);\n\t\t\tupdateField('locale', profile.preferences?.locale ?? 'en-US');\n\t\t\tupdateField('currency', profile.preferences?.currency?.code ?? 'USD');\n\t\t\tupdateField('idleDelayInterval', profile.preferences?.idleDelayInterval ?? 300);\n\t\t\tupdateField('idleAutoLock', profile.preferences?.idleAutoLock ?? true);\n\t\t\tupdateField('idleAutoLockCycle', profile.preferences?.idleAutoLockCycle ?? 180);\n\t\t\tupdateField('showHints', settings.showHints ?? true);\n\t\t\tupdateField('trialCountdownPinned', settings.trialCountdownPinned ?? false);\n\t\t}\n\t}\n\n\tfunction getPlanLabel(planType: PlanType): string {\n\t\tswitch (planType) {\n\t\t\tcase PlanType.BASIC_MEMBER:\n\t\t\t\treturn 'Basic Member';\n\t\t\tcase PlanType.YAKKL_PRO:\n\t\t\t\treturn 'YAKKL Pro';\n\t\t\tcase PlanType.YAKKL_PREMIUM:\n\t\t\t\treturn 'YAKKL Premium';\n\t\t\tdefault:\n\t\t\t\treturn 'Unknown';\n\t\t}\n\t}\n</script>\n\n<Modal bind:show title=\"Account Settings\" onClose={handleClose} className=\"max-w-2xl\">\n\t<div class=\"space-y-6 p-6\">\n\t\t{#if isLoading}\n\t\t\t<div class=\"flex items-center justify-center py-8\">\n\t\t\t\t<div class=\"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600\"></div>\n\t\t\t\t<span class=\"ml-2 text-gray-600\">Loading settings...</span>\n\t\t\t</div>\n\t\t{:else}\n\t\t\t<form onsubmit={handleFormSubmit} class=\"space-y-6\">\n\t\t\t\t<!-- Account Information (Read-only) -->\n\t\t\t\t{#if settings && profile}\n\t\t\t\t\t<div class=\"bg-gray-50 p-4 rounded-lg\">\n\t\t\t\t\t\t<h3 class=\"text-lg font-medium text-gray-900 mb-3\">Account Information</h3>\n\t\t\t\t\t\t<div class=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<span class=\"font-medium text-gray-700\">Plan:</span>\n\t\t\t\t\t\t\t\t<span class=\"ml-2 text-gray-600\">{getPlanLabel(settings.plan.type)}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<span class=\"font-medium text-gray-700\">Member since:</span>\n\t\t\t\t\t\t\t\t<span class=\"ml-2 text-gray-600\">{new Date(settings.createDate).toLocaleDateString()}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<span class=\"font-medium text-gray-700\">Profile ID:</span>\n\t\t\t\t\t\t\t\t<span class=\"ml-2 text-gray-600 font-mono text-xs\">{settings.id.substring(0, 8)}...</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<span class=\"font-medium text-gray-700\">Version:</span>\n\t\t\t\t\t\t\t\t<span class=\"ml-2 text-gray-600\">{settings.version}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\n\t\t\t\t<!-- Display & Theme Settings -->\n\t\t\t\t<div>\n\t\t\t\t\t<h3 class=\"text-lg font-medium text-gray-900 mb-4\">Display & Theme</h3>\n\t\t\t\t\t<div class=\"space-y-4\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<label for=\"theme\" class=\"block text-sm font-medium text-gray-700 mb-1\">\n\t\t\t\t\t\t\t\tTheme\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\tid=\"theme\"\n\t\t\t\t\t\t\t\tbind:value={$form.theme}\n\t\t\t\t\t\t\t\tclass=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{#each themeOptions as option}\n\t\t\t\t\t\t\t\t\t<option value={option.value}>{option.label}</option>\n\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"flex items-center\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid=\"showTestNetworks\"\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tbind:checked={$form.showTestNetworks}\n\t\t\t\t\t\t\t\tclass=\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<label for=\"showTestNetworks\" class=\"ml-2 block text-sm text-gray-900\">\n\t\t\t\t\t\t\t\tShow test networks\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"flex items-center\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid=\"showHints\"\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tbind:checked={$form.showHints}\n\t\t\t\t\t\t\t\tclass=\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<label for=\"showHints\" class=\"ml-2 block text-sm text-gray-900\">\n\t\t\t\t\t\t\t\tShow helpful hints and tips\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<!-- Localization Settings -->\n\t\t\t\t<div>\n\t\t\t\t\t<h3 class=\"text-lg font-medium text-gray-900 mb-4\">Localization</h3>\n\t\t\t\t\t<div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<label for=\"locale\" class=\"block text-sm font-medium text-gray-700 mb-1\">\n\t\t\t\t\t\t\t\tLanguage <span class=\"text-red-500\">*</span>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\tid=\"locale\"\n\t\t\t\t\t\t\t\tbind:value={$form.locale}\n\t\t\t\t\t\t\t\tclass=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n\t\t\t\t\t\t\t\tclass:border-red-500={$errors.locale && $touched.locale}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{#each localeOptions as option}\n\t\t\t\t\t\t\t\t\t<option value={option.value}>{option.label}</option>\n\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t{#if $errors.locale && $touched.locale}\n\t\t\t\t\t\t\t\t<p class=\"mt-1 text-sm text-red-600\">{$errors.locale}</p>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<label for=\"currency\" class=\"block text-sm font-medium text-gray-700 mb-1\">\n\t\t\t\t\t\t\t\tCurrency <span class=\"text-red-500\">*</span>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\tid=\"currency\"\n\t\t\t\t\t\t\t\tbind:value={$form.currency}\n\t\t\t\t\t\t\t\tclass=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n\t\t\t\t\t\t\t\tclass:border-red-500={$errors.currency && $touched.currency}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{#each currencyOptions as option}\n\t\t\t\t\t\t\t\t\t<option value={option.value}>{option.label}</option>\n\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t{#if $errors.currency && $touched.currency}\n\t\t\t\t\t\t\t\t<p class=\"mt-1 text-sm text-red-600\">{$errors.currency}</p>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<!-- Security Settings -->\n\t\t\t\t<div>\n\t\t\t\t\t<h3 class=\"text-lg font-medium text-gray-900 mb-4\">Security & Privacy</h3>\n\t\t\t\t\t<div class=\"space-y-4\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<label for=\"idleDelayInterval\" class=\"block text-sm font-medium text-gray-700 mb-1\">\n\t\t\t\t\t\t\t\tAuto-lock after idle time\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\tid=\"idleDelayInterval\"\n\t\t\t\t\t\t\t\tbind:value={$form.idleDelayInterval}\n\t\t\t\t\t\t\t\tclass=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{#each idleDelayOptions as option}\n\t\t\t\t\t\t\t\t\t<option value={option.value}>{option.label}</option>\n\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t<p class=\"mt-1 text-sm text-gray-500\">\n\t\t\t\t\t\t\t\tAutomatically lock the wallet after the specified time of inactivity\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"flex items-center\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid=\"idleAutoLock\"\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tbind:checked={$form.idleAutoLock}\n\t\t\t\t\t\t\t\tclass=\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<label for=\"idleAutoLock\" class=\"ml-2 block text-sm text-gray-900\">\n\t\t\t\t\t\t\t\tEnable automatic idle lock\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{#if $form.idleAutoLock}\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<label for=\"idleAutoLockCycle\" class=\"block text-sm font-medium text-gray-700 mb-1\">\n\t\t\t\t\t\t\t\t\tAuto-lock cycle (seconds)\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tid=\"idleAutoLockCycle\"\n\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\tbind:value={$form.idleAutoLockCycle}\n\t\t\t\t\t\t\t\t\tmin=\"60\"\n\t\t\t\t\t\t\t\t\tmax=\"3600\"\n\t\t\t\t\t\t\t\t\tstep=\"60\"\n\t\t\t\t\t\t\t\t\tclass=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n\t\t\t\t\t\t\t\t\tclass:border-red-500={$errors.idleAutoLockCycle && $touched.idleAutoLockCycle}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{#if $errors.idleAutoLockCycle && $touched.idleAutoLockCycle}\n\t\t\t\t\t\t\t\t\t<p class=\"mt-1 text-sm text-red-600\">{$errors.idleAutoLockCycle}</p>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t<p class=\"mt-1 text-sm text-gray-500\">\n\t\t\t\t\t\t\t\t\tHow often to check for idle activity (minimum 60 seconds)\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<!-- Trial Settings (if applicable) -->\n\t\t\t\t{#if settings?.plan?.trialEndDate}\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h3 class=\"text-lg font-medium text-gray-900 mb-4\">Trial Settings</h3>\n\t\t\t\t\t\t<div class=\"flex items-center\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid=\"trialCountdownPinned\"\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tbind:checked={$form.trialCountdownPinned}\n\t\t\t\t\t\t\t\tclass=\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<label for=\"trialCountdownPinned\" class=\"ml-2 block text-sm text-gray-900\">\n\t\t\t\t\t\t\t\tPin trial countdown to top of interface\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\n\t\t\t\t<!-- Status Messages -->\n\t\t\t\t{#if error}\n\t\t\t\t\t<div class=\"rounded-md bg-red-50 p-4\">\n\t\t\t\t\t\t<p class=\"text-sm font-medium text-red-800\">{error}</p>\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\n\t\t\t\t{#if success}\n\t\t\t\t\t<div class=\"rounded-md bg-green-50 p-4\">\n\t\t\t\t\t\t<p class=\"text-sm font-medium text-green-800\">{success}</p>\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\n\t\t\t\t<!-- Form Actions -->\n\t\t\t\t<div class=\"flex justify-between pt-5\">\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tonclick={resetForm}\n\t\t\t\t\t\tclass=\"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\n\t\t\t\t\t\tdisabled={!hasChanges || isSaving}\n\t\t\t\t\t>\n\t\t\t\t\t\tReset\n\t\t\t\t\t</button>\n\t\t\t\t\t\n\t\t\t\t\t<div class=\"flex space-x-3\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\tonclick={handleClose}\n\t\t\t\t\t\t\tclass=\"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\n\t\t\t\t\t\t\tdisabled={isSaving}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\tclass=\"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n\t\t\t\t\t\t\tdisabled={!$isValid || !hasChanges || isSaving}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{#if isSaving}\n\t\t\t\t\t\t\t\t<span class=\"flex items-center\">\n\t\t\t\t\t\t\t\t\t<div class=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n\t\t\t\t\t\t\t\t\tSaving...\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\tSave Changes\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<!-- Last Updated Info -->\n\t\t\t\t{#if settings?.updateDate}\n\t\t\t\t\t<div class=\"text-xs text-gray-500 text-center pt-2 border-t\">\n\t\t\t\t\t\tLast updated: {new Date(settings.updateDate).toLocaleString()}\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t</form>\n\t\t{/if}\n\t</div>\n</Modal>","<script lang=\"ts\">\n\tconst props = $props<{\n\t\tuserName?: string;\n\t\turl?: string;\n\t\tclassName?: string;\n\t\tariaLabel?: string;\n\t}>();\n\n\tconst initial = props.userName?.charAt(0)?.toUpperCase() ?? '?';\n\n\t// Default styles (can be extended or overridden by props.className)\n\tconst defaultClasses =\n\t\t'w-10 h-10 rounded-full ring-2 ring-offset-1 flex items-center justify-center text-sm font-bold uppercase bg-primary-300 text-base-content';\n</script>\n\n{#if props.url}\n\t<img\n\t\tsrc={props.url}\n\t\talt={props.ariaLabel ?? 'User avatar'}\n\t\tclass={`object-cover ${props.className ?? defaultClasses}`}\n\t\tloading=\"lazy\"\n\t/>\n{:else}\n\t<div\n\t\tclass={props.className ?? defaultClasses}\n\t\taria-label={props.ariaLabel ?? 'User avatar'}\n\t\trole=\"img\"\n\t>\n\t\t{initial}\n\t</div>\n{/if}\n","<script lang=\"ts\">\n\timport Modal from './Modal.svelte';\n\n\tinterface Props {\n\t\tshow: boolean;\n\t\tvalue: string;\n\t\ttitle?: string;\n\t\tclassName?: string;\n\t\tonClose?: () => void;\n\t}\n\n\t// Destructure props correctly\n\tlet {\n\t\tshow = $bindable(false),\n\t\ttitle = 'ERROR!',\n\t\tvalue = 'An error occurred',\n\t\tclassName = 'z-[999]',\n\t\tonClose = $bindable(() => {\n\t\t\tshow = false;\n\t\t})\n\t}: Props = $props();\n</script>\n\n<Modal bind:show {title} {className}>\n\t<div class=\"p-6\">\n\t\t<p class=\"text-sm text-gray-500\">{value}</p>\n\t\t<div class=\"mt-4 flex justify-end\">\n\t\t\t<button\n\t\t\t\ttype=\"button\"\n\t\t\t\tclass=\"rounded-md border border-gray-300 bg-white py-2 px-4 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2\"\n\t\t\t\tonclick={onClose}>Close</button\n\t\t\t>\n\t\t</div>\n\t</div>\n</Modal>\n","<!-- Profile.svelte -->\n<script lang=\"ts\">\n\timport { createForm } from 'svelte-forms-lib';\n\timport * as yup from 'yup';\n\timport Modal from './v1/Modal.svelte';\n\timport Avatar from './v1/Avatar.svelte';\n\timport ErrorNoAction from './v1/ErrorNoAction.svelte';\n\timport { getProfile, setProfileStorage, yakklMiscStore } from '$lib/common/stores';\n\timport { log } from '$lib/common/logger-wrapper';\n\timport type { Profile, ProfileData } from '$lib/common/interfaces';\n\timport { decryptData, encryptData } from '$lib/common/encryption';\n\timport { isEncryptedData } from '$lib/common/misc';\n\timport { identicon } from '$lib/utilities';\n\n\tinterface Props {\n\t\tshow?: boolean;\n\t\tonClose?: () => void;\n\t\tonComplete?: () => void;\n\t}\n\n\tlet {\n\t\tshow = $bindable(false),\n\t\tonClose = () => (show = false),\n\t\tonComplete = () => {}\n\t}: Props = $props();\n\n\tlet profile: Profile | null = $state(null);\n\tlet profileData: ProfileData | null = $state(null);\n\tlet isLoading = $state(false);\n\tlet isSaving = $state(false);\n\tlet error = $state('');\n\tlet success = $state('');\n\tlet previewAvatarUrl = $state('');\n\tlet hasChanges = $state(false);\n\tlet showError = $state(false);\n\tlet errorValue = $state('');\n\n\t// Form validation schema\n\tconst validationSchema = yup.object().shape({\n\t\tuserName: yup\n\t\t\t.string()\n\t\t\t.required('Username is required')\n\t\t\t.min(3, 'Username must be at least 3 characters')\n\t\t\t.max(30, 'Username must be less than 30 characters')\n\t\t\t.matches(/^[a-zA-Z0-9_-]+$/, 'Username can only contain letters, numbers, underscores, and dashes'),\n\t\tfirstName: yup\n\t\t\t.string()\n\t\t\t.required('First name is required')\n\t\t\t.min(1, 'First name is required')\n\t\t\t.max(50, 'First name must be less than 50 characters'),\n\t\tlastName: yup\n\t\t\t.string()\n\t\t\t.required('Last name is required')\n\t\t\t.min(1, 'Last name is required')\n\t\t\t.max(50, 'Last name must be less than 50 characters'),\n\t\temail: yup\n\t\t\t.string()\n\t\t\t.email('Must be a valid email address')\n\t\t\t.required('Email address is required'),\n\t\tbio: yup\n\t\t\t.string()\n\t\t\t.max(500, 'Bio must be less than 500 characters')\n\t\t\t.optional(),\n\t\twebsite: yup\n\t\t\t.string()\n\t\t\t.url('Must be a valid URL')\n\t\t\t.optional()\n\t\t\t.nullable()\n\t\t\t.transform((value) => (value === '' ? null : value)),\n\t\tavatarUrl: yup\n\t\t\t.string()\n\t\t\t.url('Must be a valid URL')\n\t\t\t.optional()\n\t\t\t.nullable()\n\t\t\t.transform((value) => (value === '' ? null : value))\n\t});\n\n\t// Initialize form\n\tconst { form, errors, isValid, touched, updateField } = createForm({\n\t\tinitialValues: {\n\t\t\tuserName: '',\n\t\t\tfirstName: '',\n\t\t\tlastName: '',\n\t\t\temail: '',\n\t\t\tbio: '',\n\t\t\twebsite: '',\n\t\t\tavatarUrl: ''\n\t\t},\n\t\tvalidationSchema,\n\t\tonSubmit: async (values) => {\n\t\t\tawait saveProfile(values);\n\t\t}\n\t});\n\n\t// Custom submit handler for Svelte 5\n\tasync function handleFormSubmit(event: Event) {\n\t\tevent.preventDefault();\n\t\t\n\t\t// Validate the form\n\t\tif (!$isValid) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\t// Call saveProfile directly with form values\n\t\tawait saveProfile($form);\n\t}\n\n\t// Load profile data on mount and when modal opens\n\t$effect(() => {\n\t\tif (show) {\n\t\t\tloadProfileData();\n\t\t}\n\t});\n\n\t// Track form changes\n\t$effect(() => {\n\t\tif (profile && profileData && !isLoading) {\n\t\t\tconst currentValues = $form;\n\t\t\t// Only track changes if form has been properly initialized\n\t\t\tconst originalValues = {\n\t\t\t\tuserName: profile.userName || '',\n\t\t\t\tfirstName: profileData.name?.first || '',\n\t\t\t\tlastName: profileData.name?.last || '',\n\t\t\t\temail: profileData.email || '',\n\t\t\t\tbio: profileData?.bio as string || '',\n\t\t\t\twebsite: profileData?.website as string || '',\n\t\t\t\tavatarUrl: profileData?.avatarUrl as string || ''\n\t\t\t};\n\n\t\t\thasChanges =\n\t\t\t\tcurrentValues.userName !== originalValues.userName ||\n\t\t\t\tcurrentValues.firstName !== originalValues.firstName ||\n\t\t\t\tcurrentValues.lastName !== originalValues.lastName ||\n\t\t\t\tcurrentValues.email !== originalValues.email ||\n\t\t\t\tcurrentValues.bio !== originalValues.bio ||\n\t\t\t\tcurrentValues.website !== originalValues.website ||\n\t\t\t\tcurrentValues.avatarUrl !== originalValues.avatarUrl;\n\n\t\t} else {\n\t\t\thasChanges = false;\n\t\t}\n\t});\n\n\t// Update preview avatar when URL changes\n\t$effect(() => {\n\t\tconst avatarUrl = $form.avatarUrl;\n\t\tif (avatarUrl && avatarUrl.trim() !== '') {\n\t\t\tpreviewAvatarUrl = avatarUrl;\n\t\t} else {\n\t\t\tpreviewAvatarUrl = profileData?.avatarUrl as string || identicon(profile?.userName || 'default');\n\t\t}\n\t});\n\n\tasync function loadProfileData() {\n\t\tisLoading = true;\n\t\terror = '';\n\n\t\ttry {\n\t\t\tprofile = await getProfile();\n\t\t\tif (!profile) {\n\t\t\t\terror = 'Profile not found';\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Decrypt profile data if encrypted\n\t\t\tif (isEncryptedData(profile.data)) {\n\t\t\t\tconst miscStore = $yakklMiscStore;\n\t\t\t\tif (!miscStore) {\n\t\t\t\t\terror = 'Unable to decrypt profile data';\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tprofileData = await decryptData(profile.data, miscStore) as ProfileData;\n\t\t\t} else {\n\t\t\t\tprofileData = profile.data as ProfileData;\n\t\t\t}\n\n\t\t\t// Update form with profile data\n\t\t\tupdateField('userName', profile.userName || '');\n\t\t\tupdateField('firstName', profileData.name?.first || '');\n\t\t\tupdateField('lastName', profileData.name?.last || '');\n\t\t\tupdateField('email', profileData.email || '');\n\t\t\tupdateField('bio', profileData?.bio as string || '');\n\t\t\tupdateField('website', profileData?.website as string || '');\n\t\t\tupdateField('avatarUrl', profileData?.avatarUrl as string || '');\n\n\t\t} catch (e) {\n\t\t\tlog.error('Error loading profile data:', false, e);\n\t\t\terror = 'Failed to load profile data';\n\t\t} finally {\n\t\t\tisLoading = false;\n\t\t}\n\t}\n\n\tasync function saveProfile(values: any) {\n\n\t\tif (!profile || !profileData) {\n\t\t\terror = 'Profile data not loaded';\n\t\t\treturn;\n\t\t}\n\n\t\tisSaving = true;\n\t\terror = '';\n\t\tsuccess = '';\n\n\t\ttry {\n\t\t\tlog.info('[Profile] Starting save with values:', false, values);\n\t\t\tlog.info('[Profile] Current state:', false, {\n\t\t\t\tprofile: !!profile,\n\t\t\t\tprofileData: !!profileData,\n\t\t\t\tmiscStore: !!$yakklMiscStore\n\t\t\t});\n\n\t\t\t// Check if we can encrypt before proceeding\n\t\t\tconst miscStore = $yakklMiscStore;\n\t\t\tif (!miscStore) {\n\t\t\t\tconst errorMsg = 'Unable to encrypt profile data - missing encryption key';\n\t\t\t\tlog.error('[Profile] ' + errorMsg, false);\n\t\t\t\terror = errorMsg;\n\t\t\t\terrorValue = errorMsg;\n\t\t\t\tshowError = true;\n\t\t\t\tisSaving = false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Update profile data\n\t\t\tconst updatedProfileData: ProfileData = {\n\t\t\t\t...profileData,\n\t\t\t\tname: {\n\t\t\t\t\tid: profile.id,\n\t\t\t\t\tpersona: profile.persona,\n\t\t\t\t\tfirst: values.firstName || '',\n\t\t\t\t\tlast: values.lastName || ''\n\t\t\t\t},\n\t\t\t\temail: values.email || '',\n\t\t\t\tbio: values.bio || '',\n\t\t\t\twebsite: values.website || '',\n\t\t\t\tavatarUrl: values.avatarUrl || ''\n\t\t\t};\n\n\t\t\tlog.info('[Profile] Created updated profile data:', false, updatedProfileData);\n\n\t\t\t// Update profile\n\t\t\tconst updatedProfile: Profile = {\n\t\t\t\t...profile,\n\t\t\t\tuserName: values.userName,\n\t\t\t\tdata: updatedProfileData,\n\t\t\t\tupdateDate: new Date().toISOString()\n\t\t\t};\n\n\t\t\tlog.info('[Profile] Created updated profile:', false, {\n\t\t\t\tuserName: updatedProfile.userName,\n\t\t\t\tupdateDate: updatedProfile.updateDate\n\t\t\t});\n\n\t\t\t// Encrypt the data\n\t\t\tlog.info('[Profile] Starting encryption...');\n\t\t\ttry {\n\t\t\t\tupdatedProfile.data = await encryptData(updatedProfileData, miscStore);\n\t\t\t\tlog.info('[Profile] Encryption successful');\n\t\t\t} catch (encryptError: any) {\n\t\t\t\tconst errorMsg = 'Failed to encrypt profile data: ' + encryptError.message;\n\t\t\t\tlog.error('[Profile] Encryption failed:', false, encryptError);\n\t\t\t\terror = errorMsg;\n\t\t\t\terrorValue = errorMsg;\n\t\t\t\tshowError = true;\n\t\t\t\tisSaving = false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Save to storage\n\t\t\tlog.info('[Profile] Starting storage save...');\n\t\t\ttry {\n\t\t\t\tawait setProfileStorage(updatedProfile);\n\t\t\t\tlog.info('[Profile] Storage save successful');\n\t\t\t} catch (saveError: any) {\n\t\t\t\tconst errorMsg = 'Failed to save profile to storage: ' + saveError.message;\n\t\t\t\tlog.error('[Profile] Storage failed:', false, saveError);\n\t\t\t\terror = errorMsg;\n\t\t\t\terrorValue = errorMsg;\n\t\t\t\tshowError = true;\n\t\t\t\tisSaving = false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Update the local profile and profileData references to reflect saved state\n\t\t\t// Keep profile.data unencrypted for local comparison purposes\n\t\t\tprofile = {\n\t\t\t\t...updatedProfile,\n\t\t\t\tdata: updatedProfileData\n\t\t\t};\n\t\t\tprofileData = updatedProfileData;\n\n\t\t\tsuccess = 'Profile updated successfully!';\n\t\t\thasChanges = false;\n\n\t\t\tlog.info('[Profile] Profile saved successfully, state updated:', false, {\n\t\t\t\thasChanges,\n\t\t\t\tprofile: profile.userName,\n\t\t\t\tprofileData: profileData.name\n\t\t\t});\n\n\t\t\t// Call completion callback\n\t\t\tonComplete();\n\n\t\t\t// Close modal with a small delay to ensure state updates complete\n\t\t\tlog.info('[Profile] Preparing to close modal after successful save');\n\t\t\t\n\t\t\t// Use setTimeout to ensure state updates are complete\n\t\t\tsetTimeout(() => {\n\t\t\t\tshow = false;\n\t\t\t\tisSaving = false;\n\t\t\t}, 100);\n\n\t\t} catch (e: any) {\n\t\t\tconst errorMsg = 'Failed to save profile changes: ' + e.message;\n\t\t\tlog.error('[Profile] Unexpected error saving profile:', false, e);\n\t\t\terror = errorMsg;\n\t\t\terrorValue = errorMsg;\n\t\t\tshowError = true;\n\t\t\tisSaving = false;\n\t\t}\n\t}\n\n\tfunction handleClose() {\n\t\tif (hasChanges) {\n\t\t\tif (confirm('You have unsaved changes. Are you sure you want to close?')) {\n\t\t\t\tshow = false;\n\t\t\t\tonClose();\n\t\t\t}\n\t\t} else {\n\t\t\tshow = false;\n\t\t\tonClose();\n\t\t}\n\t}\n\n\tfunction resetForm() {\n\t\tif (profile && profileData) {\n\t\t\tupdateField('userName', profile.userName || '');\n\t\t\tupdateField('firstName', profileData.name?.first || '');\n\t\t\tupdateField('lastName', profileData.name?.last || '');\n\t\t\tupdateField('email', profileData.email || '');\n\t\t\tupdateField('bio', profileData?.bio as string || '');\n\t\t\tupdateField('website', profileData?.website as string || '');\n\t\t\tupdateField('avatarUrl', profileData?.avatarUrl as string || '');\n\t\t}\n\t}\n\n\tfunction handleErrorClose() {\n\t\tshowError = false;\n\t\terror = '';\n\t\terrorValue = '';\n\t}\n</script>\n\n<Modal bind:show title=\"Profile\" onClose={handleClose} className=\"max-w-2xl\">\n\t<div class=\"space-y-6 p-6\">\n\t\t{#if isLoading}\n\t\t\t<div class=\"flex items-center justify-center py-8\">\n\t\t\t\t<div class=\"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600\"></div>\n\t\t\t\t<span class=\"ml-2 text-gray-600\">Loading profile...</span>\n\t\t\t</div>\n\t\t{:else}\n\t\t\t<form onsubmit={handleFormSubmit} class=\"space-y-6\">\n\t\t\t\t<!-- Avatar Section -->\n\t\t\t\t<div class=\"flex flex-col items-center space-y-4\">\n\t\t\t\t\t<div class=\"text-center\">\n\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\turl={previewAvatarUrl}\n\t\t\t\t\t\t\tuserName={$form.firstName || $form.userName}\n\t\t\t\t\t\t\tclassName=\"w-24 h-24 rounded-full ring-4 ring-offset-2 ring-indigo-500\"\n\t\t\t\t\t\t\tariaLabel=\"Profile Avatar\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"w-full\">\n\t\t\t\t\t\t<label for=\"avatarUrl\" class=\"block text-sm font-medium text-gray-700 mb-1\">\n\t\t\t\t\t\t\tAvatar URL (optional)\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid=\"avatarUrl\"\n\t\t\t\t\t\t\ttype=\"url\"\n\t\t\t\t\t\t\tbind:value={$form.avatarUrl}\n\t\t\t\t\t\t\tplaceholder=\"https://example.com/your-avatar.jpg\"\n\t\t\t\t\t\t\tclass=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n\t\t\t\t\t\t\tclass:border-red-500={$errors.avatarUrl && $touched.avatarUrl}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{#if $errors.avatarUrl && $touched.avatarUrl}\n\t\t\t\t\t\t\t<p class=\"mt-1 text-sm text-red-600\">{$errors.avatarUrl}</p>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<!-- Basic Information -->\n\t\t\t\t<div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<label for=\"userName\" class=\"block text-sm font-medium text-gray-700 mb-1\">\n\t\t\t\t\t\t\tUsername <span class=\"text-red-500\">*</span>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid=\"userName\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tbind:value={$form.userName}\n\t\t\t\t\t\t\tplaceholder=\"your_username\"\n\t\t\t\t\t\t\tclass=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n\t\t\t\t\t\t\tclass:border-red-500={$errors.userName && $touched.userName}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{#if $errors.userName && $touched.userName}\n\t\t\t\t\t\t\t<p class=\"mt-1 text-sm text-red-600\">{$errors.userName}</p>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<label for=\"email\" class=\"block text-sm font-medium text-gray-700 mb-1\">\n\t\t\t\t\t\t\tEmail <span class=\"text-red-500\">*</span>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid=\"email\"\n\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\tbind:value={$form.email}\n\t\t\t\t\t\t\tplaceholder=\"your@email.com\"\n\t\t\t\t\t\t\tclass=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n\t\t\t\t\t\t\tclass:border-red-500={$errors.email && $touched.email}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{#if $errors.email && $touched.email}\n\t\t\t\t\t\t\t<p class=\"mt-1 text-sm text-red-600\">{$errors.email}</p>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<label for=\"firstName\" class=\"block text-sm font-medium text-gray-700 mb-1\">\n\t\t\t\t\t\t\tFirst Name <span class=\"text-red-500\">*</span>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid=\"firstName\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tbind:value={$form.firstName}\n\t\t\t\t\t\t\tplaceholder=\"John\"\n\t\t\t\t\t\t\tclass=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n\t\t\t\t\t\t\tclass:border-red-500={$errors.firstName && $touched.firstName}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{#if $errors.firstName && $touched.firstName}\n\t\t\t\t\t\t\t<p class=\"mt-1 text-sm text-red-600\">{$errors.firstName}</p>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<label for=\"lastName\" class=\"block text-sm font-medium text-gray-700 mb-1\">\n\t\t\t\t\t\t\tLast Name <span class=\"text-red-500\">*</span>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid=\"lastName\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tbind:value={$form.lastName}\n\t\t\t\t\t\t\tplaceholder=\"Doe\"\n\t\t\t\t\t\t\tclass=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n\t\t\t\t\t\t\tclass:border-red-500={$errors.lastName && $touched.lastName}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{#if $errors.lastName && $touched.lastName}\n\t\t\t\t\t\t\t<p class=\"mt-1 text-sm text-red-600\">{$errors.lastName}</p>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<!-- Optional Fields -->\n\t\t\t\t<div>\n\t\t\t\t\t<label for=\"website\" class=\"block text-sm font-medium text-gray-700 mb-1\">\n\t\t\t\t\t\tWebsite (optional)\n\t\t\t\t\t</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"website\"\n\t\t\t\t\t\ttype=\"url\"\n\t\t\t\t\t\tbind:value={$form.website}\n\t\t\t\t\t\tplaceholder=\"https://your-website.com\"\n\t\t\t\t\t\tclass=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n\t\t\t\t\t\tclass:border-red-500={$errors.website && $touched.website}\n\t\t\t\t\t/>\n\t\t\t\t\t{#if $errors.website && $touched.website}\n\t\t\t\t\t\t<p class=\"mt-1 text-sm text-red-600\">{$errors.website}</p>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\n\t\t\t\t<div>\n\t\t\t\t\t<label for=\"bio\" class=\"block text-sm font-medium text-gray-700 mb-1\">\n\t\t\t\t\t\tBio (optional)\n\t\t\t\t\t</label>\n\t\t\t\t\t<textarea\n\t\t\t\t\t\tid=\"bio\"\n\t\t\t\t\t\tbind:value={$form.bio}\n\t\t\t\t\t\trows=\"3\"\n\t\t\t\t\t\tplaceholder=\"Tell us about yourself...\"\n\t\t\t\t\t\tclass=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n\t\t\t\t\t\tclass:border-red-500={$errors.bio && $touched.bio}\n\t\t\t\t\t></textarea>\n\t\t\t\t\t{#if $errors.bio && $touched.bio}\n\t\t\t\t\t\t<p class=\"mt-1 text-sm text-red-600\">{$errors.bio}</p>\n\t\t\t\t\t{/if}\n\t\t\t\t\t<p class=\"mt-1 text-sm text-gray-500\">{($form.bio || '').length}/500 characters</p>\n\t\t\t\t</div>\n\n\t\t\t\t<!-- Status Messages -->\n\t\t\t\t{#if error}\n\t\t\t\t\t<div class=\"rounded-md bg-red-50 p-4\">\n\t\t\t\t\t\t<p class=\"text-sm font-medium text-red-800\">{error}</p>\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\n\t\t\t\t{#if success}\n\t\t\t\t\t<div class=\"rounded-md bg-green-50 p-4\">\n\t\t\t\t\t\t<p class=\"text-sm font-medium text-green-800\">{success}</p>\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\n\t\t\t\t<!-- Form Actions -->\n\t\t\t\t<div class=\"flex justify-between pt-5\">\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tonclick={resetForm}\n\t\t\t\t\t\tclass=\"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\n\t\t\t\t\t\tdisabled={!hasChanges || isSaving}\n\t\t\t\t\t>\n\t\t\t\t\t\tReset\n\t\t\t\t\t</button>\n\n\t\t\t\t\t<div class=\"flex space-x-3\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\tonclick={handleClose}\n\t\t\t\t\t\t\tclass=\"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\n\t\t\t\t\t\t\tdisabled={isSaving}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\tclass=\"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n\t\t\t\t\t\t\tdisabled={!$isValid || !hasChanges || isSaving}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{#if isSaving}\n\t\t\t\t\t\t\t\t<span class=\"flex items-center\">\n\t\t\t\t\t\t\t\t\t<div class=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n\t\t\t\t\t\t\t\t\tSaving...\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\tSave Changes\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<!-- Last Updated Info -->\n\t\t\t\t{#if profile?.updateDate}\n\t\t\t\t\t<div class=\"text-xs text-gray-500 text-center pt-2 border-t\">\n\t\t\t\t\t\tLast updated: {new Date(profile.updateDate).toLocaleString()}\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t</form>\n\t\t{/if}\n\t</div>\n</Modal>\n\n<ErrorNoAction\n\tbind:show={showError}\n\tvalue={errorValue}\n\ttitle=\"Profile Save Error\"\n\tonClose={handleErrorClose}\n/>","<!-- ConfirmLogout.svelte -->\n<script lang=\"ts\">\n\timport Modal from '$lib/components/Modal.svelte';\n\n\tinterface Props {\n\t\tshow: boolean;\n\t\ttitle?: string;\n\t\tmessage?: string;\n\t\trejectText?: string;\n\t\tconfirmText?: string;\n\t\tclassName?: string;\n\t\tonConfirm?: (dontShowAgain: boolean) => void;\n\t\tonCancel?: () => void;\n\t}\n\n\tlet {\n\t\tshow = $bindable(false),\n\t\ttitle = 'Confirm Logout',\n\t\tmessage = 'Are you sure you want to logout? This will lock your wallet and you will need to enter your password again.',\n\t\trejectText = 'Cancel',\n\t\tconfirmText = 'Logout',\n\t\tclassName = 'z-[999]',\n\t\tonConfirm = () => {},\n\t\tonCancel = () => {\n\t\t\tshow = false;\n\t\t}\n\t}: Props = $props();\n\n\tlet dontShowAgain = $state(false);\n\n\tfunction handleConfirm() {\n\t\tonConfirm(dontShowAgain);\n\t\tshow = false;\n\t}\n\n\tfunction handleCancel() {\n\t\tonCancel();\n\t\tshow = false;\n\t}\n</script>\n\n<Modal bind:show {title} {className}>\n\t<div class=\"p-6\">\n\t\t<div class=\"flex items-center mb-4\">\n\t\t\t<div class=\"flex-shrink-0\">\n\t\t\t\t<svg class=\"w-8 h-8 text-red-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.232 15.5c-.77.833.192 2.5 1.732 2.5z\" />\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t\t<div class=\"ml-3\">\n\t\t\t\t<p class=\"text-sm text-gray-600 dark:text-gray-300\">{message}</p>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<!-- Don't show again checkbox -->\n\t\t<div class=\"mb-4\">\n\t\t\t<label class=\"flex items-center\">\n\t\t\t\t<input \n\t\t\t\t\ttype=\"checkbox\" \n\t\t\t\t\tbind:checked={dontShowAgain}\n\t\t\t\t\tclass=\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"\n\t\t\t\t/>\n\t\t\t\t<span class=\"ml-2 text-sm text-gray-600 dark:text-gray-300\">\n\t\t\t\t\tDon't show this confirmation next time\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t</div>\n\n\t\t<div class=\"flex justify-end space-x-3\">\n\t\t\t<button\n\t\t\t\ttype=\"button\"\n\t\t\t\tclass=\"yakkl-btn-secondary\"\n\t\t\t\tonclick={handleCancel}\n\t\t\t>\n\t\t\t\t{rejectText}\n\t\t\t</button>\n\t\t\t<button\n\t\t\t\ttype=\"button\"\n\t\t\t\tclass=\"px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2\"\n\t\t\t\tonclick={handleConfirm}\n\t\t\t>\n\t\t\t\t{confirmText}\n\t\t\t</button>\n\t\t</div>\n\t</div>\n</Modal>","<script lang=\"ts\">\n  import { onMount } from 'svelte';\n  import DockLauncher from './lib/components/DockLauncher.svelte';\n  import AIHelpButton from './lib/components/AIHelpButton.svelte';\n  import Header from './lib/components/Header.svelte';\n  import Footer from './lib/components/Footer.svelte';\n  import UpgradeBanner from './lib/components/UpgradeBanner.svelte';\n  import Settings from './lib/components/Settings.svelte';\n  import Profile from './lib/components/Profile.svelte';\n  import ConfirmLogout from './lib/components/ConfirmLogout.svelte';\n  import { accountStore, currentAccount } from './lib/stores/account.store';\n  import { chainStore, currentChain, visibleChains } from './lib/stores/chain.store';\n  import { planStore } from './lib/stores/plan.store';\n  import { canUseFeature } from './lib/stores/plan.store';\n  import { isModalOpen } from './lib/stores/modal.store';\n  \n  interface Props {\n    children?: import('svelte').Snippet;\n  }\n  let { children }: Props = $props();\n\n  // State\n  let loading = $state(true);\n  let showTestnets = $state(false);\n  let showSettings = $state(false);\n  let showProfile = $state(false);\n  let showLogoutConfirm = $state(false);\n\n  // Computed from stores\n  let account = $derived($currentAccount || { address: '', ens: null });\n  let selectedChain = $derived($currentChain);\n  let chains = $derived($visibleChains);\n  let trialEnds = $derived($planStore.plan.trialEndsAt);\n  let planType = $derived($planStore.plan.type);\n  let modalOpen = $derived($isModalOpen);\n\n  // Initialize stores on mount\n  onMount(async () => {\n    loading = true;\n\n    try {\n      // First check if user is authenticated\n      const { getSettings, syncStorageToStore } = await import('$lib/common/stores');\n      const settings = await getSettings();\n\n      if (settings && !settings.isLocked && settings.init) {\n        // User is authenticated, sync all stores from persistent storage\n        console.log('Layout: Syncing stores from persistent storage...');\n        await syncStorageToStore();\n        console.log('Layout: Stores synchronized');\n      }\n\n      // Load preview2 specific data in parallel\n      await Promise.all([\n        accountStore.loadAccounts(),\n        chainStore.loadChains(),\n        planStore.loadPlan()\n      ]);\n    } catch (error) {\n      console.error('Layout: Error initializing stores:', error);\n    }\n\n    loading = false;\n  });\n\n  function handleSwitchChain(chain: any) {\n    chainStore.switchChain(chain.chainId);\n  }\n\n  function handleManageAccount() {\n    showProfile = true;\n  }\n\n  function handleSettings() {\n    showSettings = true;\n  }\n\n  function handleTheme() {\n    // Toggle theme\n    document.documentElement.classList.toggle('dark');\n  }\n\n  async function handleLogout() {\n    // Check if user has disabled logout confirmation\n    const skipConfirmation = localStorage.getItem('yakkl:skip-logout-confirmation') === 'true';\n\n    if (skipConfirmation) {\n      // Skip confirmation and logout directly\n      await performLogout();\n    } else {\n      // Show confirmation dialog\n      showLogoutConfirm = true;\n    }\n  }\n\n  async function handleLogoutConfirm(dontShowAgain: boolean) {\n    if (dontShowAgain) {\n      // Save the preference to skip confirmation next time\n      localStorage.setItem('yakkl:skip-logout-confirmation', 'true');\n    }\n\n    await performLogout();\n  }\n\n  async function performLogout() {\n    try {\n      // Import all necessary functions\n      const {\n        resetStores,\n        setMiscStore,\n        setYakklTokenDataCustomStorage,\n        yakklTokenDataCustomStore\n      } = await import('$lib/common/stores');\n\n      const { setBadgeText, setIconLock } = await import('$lib/utilities/utilities');\n      const { removeTimers } = await import('$lib/common/timers');\n      const { removeListeners } = await import('$lib/common/listeners');\n      const { setLocks } = await import('$lib/common/locks');\n      const { resetTokenDataStoreValues } = await import('$lib/common/resetTokenDataStoreValues');\n      const { stopActivityTracking } = await import('$lib/common/messaging');\n      const { log } = await import('$lib/common/logger-wrapper');\n      const { get } = await import('svelte/store');\n\n      // Stop activity tracking\n      await stopActivityTracking();\n\n      // Set lock icon and clear badge\n      await setBadgeText('');\n      await setIconLock();\n\n      // Lock the wallet\n      await setLocks(true);\n\n      // Clear session-specific state\n      removeTimers();\n      removeListeners();\n      setMiscStore('');\n      resetTokenDataStoreValues();\n\n      // Zero out values in custom token storage\n      setYakklTokenDataCustomStorage(get(yakklTokenDataCustomStore));\n\n      // Reset all stores\n      resetStores();\n\n      // Reset preview2 specific stores\n      if (accountStore && typeof accountStore.reset === 'function') {\n        accountStore.reset();\n      }\n      if (chainStore && typeof chainStore.reset === 'function') {\n        chainStore.reset();\n      }\n      if (planStore && typeof planStore.reset === 'function') {\n        planStore.reset();\n      } else {\n        console.warn('planStore.reset is not available, skipping plan store reset');\n      }\n\n      // Clear preview2 session marker\n      sessionStorage.removeItem('preview2-authenticated');\n\n      console.log('Preview2: Logout completed successfully');\n\n      // Navigate to login page\n      window.location.href = '/preview2/login';\n\n    } catch (error) {\n      console.error('Preview2: Logout failed:', error);\n      alert('Logout encountered an error. Please try again or refresh the extension.');\n    }\n  }\n</script>\n\n<div class=\"yakkl-body h-screen flex flex-col overflow-hidden\">\n  <!-- Fixed Header -->\n  <Header\n    link=\"/preview2\"\n    account={account}\n    chains={chains}\n    selectedChain={selectedChain}\n    showTestnets={showTestnets}\n    onSwitchChain={handleSwitchChain}\n    onManageAccount={handleManageAccount}\n    onSettings={handleSettings}\n    onTheme={handleTheme}\n    onLogout={handleLogout}\n    className=\"flex-shrink-0\"\n  />\n\n  <!-- Upgrade Banner -->\n  <UpgradeBanner\n    className=\"flex-shrink-0\"\n    position=\"inline\"\n    showOnBasic={true}\n    showOnTrial={true}\n  />\n\n  <!-- Scrollable Content Area -->\n  <main class=\"flex-1 overflow-y-auto overflow-x-hidden\">\n    {#if loading}\n      <div class=\"min-h-full flex items-center justify-center\">\n        <div class=\"text-center\">\n          <div class=\"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto\"></div>\n          <p class=\"mt-4 text-gray-600 dark:text-gray-400\">Loading wallet...</p>\n        </div>\n      </div>\n    {:else}\n      <div class=\"min-h-full pb-16\">\n        {@render children?.()}\n      </div>\n    {/if}\n  </main>\n\n  <!-- Fixed Footer -->\n  <div class=\"flex-shrink-0\">\n    <Footer\n      {planType}\n      trialEnds={trialEnds}\n      appName=\"YAKKL\"\n      className=\"\"\n    />\n  </div>\n\n  <!-- Floating Elements above footer - only show if features are available and no modals open -->\n  {#if !modalOpen}\n    {#if canUseFeature('basic_features')}\n      <DockLauncher className=\"fixed bottom-12 left-4 z-50\" />\n    {/if}\n\n    {#if canUseFeature('ai_assistant')}\n      <AIHelpButton className=\"fixed bottom-12 right-4 z-50\" />\n    {/if}\n  {/if}\n\n  <!-- Settings Modal -->\n  <Settings bind:show={showSettings} />\n\n  <!-- Profile Modal -->\n  <Profile bind:show={showProfile} />\n\n  <!-- Logout Confirmation Modal -->\n  <ConfirmLogout\n    bind:show={showLogoutConfirm}\n    onConfirm={handleLogoutConfirm}\n    onCancel={() => showLogoutConfirm = false}\n  />\n</div>\n\n<style>\n  :global(body) {\n    margin: 0;\n    background-color: #f8fafc;\n  }\n  :global(html.dark body) {\n    background-color: #0e0e11;\n  }\n</style>\n"],"file":"app/immutable/nodes/15.Dv0cwyo8.js"}