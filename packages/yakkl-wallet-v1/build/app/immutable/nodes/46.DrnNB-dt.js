import{c as check_target,l as legacy_api}from"../chunks/BXFaAXnq.js";import{p as push,h as tag,ay as user_effect,e as set,a as pop,i as state,F as FILENAME}from"../chunks/BaS8d5lg.js";import{v as validate_store}from"../chunks/Dv9a3G0k.js";import{a as store_get,s as setup_stores}from"../chunks/CViNpZsE.js";import{b as browserSvelte}from"../chunks/CgCfpVku.js";import{Z as yakklCurrentlySelectedStore,a8 as yakklSettingsStore,B as setMiscStore,af as setYakklTokenDataCustomStorage,ag as resetStores,l as log,ah as yakklTokenDataCustomStore}from"../chunks/Cb2naUpm.js";import{s as setBadgeText,a as setIconLock}from"../chunks/CnIbzB-6.js";import"../chunks/WDN37msH.js";import{removeTimers}from"../chunks/CLRZcuwO.js";import{removeListeners}from"../chunks/_ZitPk-8.js";import{setLocks}from"../chunks/AcHxiMn1.js";import{resetTokenDataStoreValues}from"../chunks/D8D6HWSa.js";import{stopActivityTracking}from"../chunks/DT3ZCMgr.js";import{E as ErrorHandler}from"../chunks/BGcrmAjg.js";_page[FILENAME]="src/routes/(wallet)/logout/+page.svelte";function _page($$anchor,$$props){check_target(new.target);push($$props,true,_page);const[$$stores,$$cleanup]=setup_stores();const $yakklCurrentlySelectedStore=()=>(validate_store(yakklCurrentlySelectedStore,"yakklCurrentlySelectedStore"),store_get(yakklCurrentlySelectedStore,"$yakklCurrentlySelectedStore",$$stores));const $yakklSettingsStore=()=>(validate_store(yakklSettingsStore,"yakklSettingsStore"),store_get(yakklSettingsStore,"$yakklSettingsStore",$$stores));const $yakklTokenDataCustomStore=()=>(validate_store(yakklTokenDataCustomStore,"yakklTokenDataCustomStore"),store_get(yakklTokenDataCustomStore,"$yakklTokenDataCustomStore",$$stores));if(browserSvelte){ErrorHandler.getInstance()}let yakklCurrentlySelected=tag(state(null),"yakklCurrentlySelected");let yakklSettings=tag(state(null),"yakklSettings");user_effect(()=>{set(yakklCurrentlySelected,$yakklCurrentlySelectedStore(),true)});user_effect(()=>{set(yakklSettings,$yakklSettingsStore(),true)});let isUpdating=false;async function update(){if(!browserSvelte)return;if(isUpdating)return;isUpdating=true;try{await stopActivityTracking();await setBadgeText("");await setIconLock();setLocks(true);removeTimers();removeListeners();setMiscStore("");resetTokenDataStoreValues();setYakklTokenDataCustomStorage($yakklTokenDataCustomStore());resetStores()}catch(error){log.error("Logout failed:",false,error);alert("Logout encountered an error. Please try again or refresh the extension via browser extension manager.")}finally{isUpdating=false;window.close()}}if(browserSvelte){update()}var $$pop=pop({...legacy_api()});$$cleanup();return $$pop}export{_page as component};
//# sourceMappingURL=46.DrnNB-dt.js.map
