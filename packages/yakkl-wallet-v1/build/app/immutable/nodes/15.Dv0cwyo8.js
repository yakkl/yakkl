const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/Cb2naUpm.js","../chunks/WDN37msH.js","../chunks/CgCfpVku.js","../chunks/B2gA1VsD.js","../chunks/BaS8d5lg.js","../chunks/BOosul_h.js","../chunks/CnIbzB-6.js","../chunks/z-nmOEXa.js","../chunks/CLRZcuwO.js","../chunks/BKVO1wI8.js","../chunks/_ZitPk-8.js","../chunks/B7s-nLfi.js","../chunks/AcHxiMn1.js","../chunks/D8D6HWSa.js","../chunks/DT3ZCMgr.js","../chunks/D-5FeuF0.js","../chunks/D59oTG1g.js"])))=>i.map(i=>d[i]);
import{g as getSettings,J as YEAR,V as VERSION,bL as SystemTheme,v as getProfile,s as setSettings,am as setProfileStorage,n as PlanType$1,x as isEncryptedData,z as decryptData,l as log$1,H as yakklMiscStore,R as encryptData,_ as __vitePreload}from"../chunks/Cb2naUpm.js";import{c as check_target,l as legacy_api}from"../chunks/BXFaAXnq.js";import{p as push,c as child,s as sibling,r as reset,t as template_effect,g as get,a as pop,F as FILENAME,b as strict_equals,h as tag,e as set,u as user_derived,i as state,f as first_child,o as onMount,ay as user_effect,bv as to_array,j as next,a7 as untrack,n as noop}from"../chunks/BaS8d5lg.js";import{a as add_locations}from"../chunks/3AhEABF_.js";import{a as append,f as from_html,d as from_svg,t as text,c as comment}from"../chunks/Cm3jf07C.js";import{i as if_block}from"../chunks/Q1yPWpQ-.js";import{w as wrap_snippet,s as snippet}from"../chunks/d5hrMixo.js";import{s as setup_stores,a as store_get,d as store_mutate}from"../chunks/CViNpZsE.js";import{v as validate_store}from"../chunks/Dv9a3G0k.js";import{l as log_if_contains_state}from"../chunks/DZ17DrFv.js";import{s as set_text}from"../chunks/Cmwrv3PW.js";import{e as each,i as index}from"../chunks/DraJ8LN-.js";import{s as set_attribute,r as remove_input_defaults,b as bind_select_value}from"../chunks/DTBsVM-c.js";import{s as set_class,c as clsx}from"../chunks/DX_EEhpR.js";import{p as prop}from"../chunks/BYboeQtC.js";import{v as visibleChains,c as currentChain,a as currentAccount,M as Modal,b as accountStore,d as chainStore,i as isModalOpen,A as AIHelpButton}from"../chunks/BO6zr7mn.js";import{d as delegate,e as event,b as apply,c as remove_textarea_child}from"../chunks/DiU70Is3.js";import"../chunks/De3JWpHf.js";import{a as currentPlan,U as Upgrade,P as PlanType,i as isOnTrial,p as planStore,c as canUseFeature}from"../chunks/CoXEMRXA.js";import{c as create_ownership_validator}from"../chunks/COgMMZ9C.js";import{b as bind_value,a as bind_checked}from"../chunks/B6q982nR.js";import{c as createForm}from"../chunks/CEKklR__.js";import"../chunks/Doq7snb5.js";import{c as create$3,d as create$7,e as create$5,a as create$6}from"../chunks/B4Ku5_Cd.js";import{l as log}from"../chunks/WDN37msH.js";import"../chunks/CgCfpVku.js";import"../chunks/z-nmOEXa.js";import"../chunks/CnIbzB-6.js";import"../chunks/Dw28gLPr.js";import{i as identicon}from"../chunks/j44ihrtO.js";import{M as Modal$1}from"../chunks/UU1vCwIM.js";DockLauncher[FILENAME]="src/routes/preview2/lib/components/DockLauncher.svelte";var root_1$b=add_locations(from_html(`<a class="w-12 h-12 flex items-center justify-center rounded-full hover:bg-zinc-200 dark:hover:bg-zinc-700 text-zinc-900 dark:text-white text-sm mb-1 transition-colors"> </a>`),DockLauncher[FILENAME],[[16,8]]);var root$9=add_locations(from_html(`<div><div><button class="yakkl-circle-button text-lg font-bold">☰</button> <div class="absolute bottom-16 left-0 bg-white dark:bg-zinc-900 shadow-lg border border-zinc-200 dark:border-zinc-700 rounded-t-full py-2 z-50 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 w-14 flex flex-col items-center"></div></div></div>`),DockLauncher[FILENAME],[[11,0,[[12,2,[[13,4],[14,4]]]]]]);function DockLauncher($$anchor,$$props){check_target(new.target);push($$props,true,DockLauncher);let className=prop($$props,"className",3,"");const items=[{href:"/preview2",icon:"🏠",label:"Home"},{href:"/preview2/preferences",icon:"⚙️",label:"Preferences"},{href:"/preview2/settings",icon:"🛠️",label:"Settings"},{href:"/preview2/contacts",icon:"📇",label:"Contacts"},{href:"/preview2/tokens",icon:"💠",label:"Tokens"}];var div=root$9();var div_1=child(div);set_class(div_1,1,`relative group w-14`);var div_2=sibling(child(div_1),2);each(div_2,21,()=>items,index,($$anchor2,item)=>{var a=root_1$b();var text2=child(a,true);reset(a);template_effect(()=>{set_attribute(a,"href",get(item).href);set_text(text2,get(item).icon)});append($$anchor2,a)});reset(div_2);reset(div_1);reset(div);template_effect(()=>set_class(div,1,`${className()}`));append($$anchor,div);return pop({...legacy_api()})}Brand[FILENAME]="src/routes/preview2/lib/components/Brand.svelte";var root_1$a=add_locations(from_html(`<span class="ml-2"> </span>`),Brand[FILENAME],[[8,4]]);var root$8=add_locations(from_html(`<div><img class="h-7 w-7 rounded-none" alt="Logo"/> <!></div>`),Brand[FILENAME],[[5,0,[[6,2]]]]);function Brand($$anchor,$$props){check_target(new.target);push($$props,true,Brand);let logo=prop($$props,"logo",3,"/images/logoBullFav32x32.png"),name=prop($$props,"name",3,""),className=prop($$props,"className",3,"");let isLogoOnly=!name()||strict_equals(name(),"");var div=root$8();var img=child(div);var node=sibling(img,2);{var consequent=$$anchor2=>{var span=root_1$a();var text2=child(span,true);reset(span);template_effect(()=>set_text(text2,name()));append($$anchor2,span)};if_block(node,$$render=>{if(!isLogoOnly)$$render(consequent)})}reset(div);template_effect(()=>{set_class(div,1,`flex items-center font-bold text-lg tracking-wide text-indigo-400 select-none ${isLogoOnly?"w-10 max-w-[42px]":""} ${className()}`);set_attribute(img,"src",logo())});append($$anchor,div);return pop({...legacy_api()})}NetworkSwitcher[FILENAME]="src/routes/preview2/lib/components/NetworkSwitcher.svelte";var on_click$1=(_,menuOpen)=>set(menuOpen,!get(menuOpen));var root_1$9=add_locations(from_html(`<img class="w-6 h-6"/>`),NetworkSwitcher[FILENAME],[[45,6]]);var root_2$6=add_locations(from_html(`<span class="text-xl"> </span>`),NetworkSwitcher[FILENAME],[[47,6]]);var root_3$4=add_locations(from_html(`<span class="ml-2 px-2 py-0.5 rounded-full text-[10px] bg-yellow-200 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100 font-bold">TESTNET</span>`),NetworkSwitcher[FILENAME],[[53,6]]);var on_click_1$1=(__1,selectChain,chain)=>selectChain(get(chain));var root_6$2=add_locations(from_html(`<img class="w-6 h-6"/>`),NetworkSwitcher[FILENAME],[[67,12]]);var root_7$2=add_locations(from_html(`<span class="text-xl"> </span>`),NetworkSwitcher[FILENAME],[[69,12]]);var root_8$2=add_locations(from_html(`<div class="text-xs text-zinc-400"> </div>`),NetworkSwitcher[FILENAME],[[75,14]]);var root_9$2=add_locations(from_html(`<span class="px-2 py-0.5 rounded-full text-[10px] bg-yellow-200 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100 font-bold">TEST</span>`),NetworkSwitcher[FILENAME],[[79,12]]);var root_10$2=add_locations(from_svg(`<svg class="w-4 h-4 text-green-500 ml-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>`),NetworkSwitcher[FILENAME],[[82,12,[[83,14]]]]);var root_5$4=add_locations(from_html(`<button role="option"><!> <div class="flex-1 text-left"><div class="font-medium"> </div> <div class="text-xs opacity-60"> </div> <!></div> <!> <!></button>`),NetworkSwitcher[FILENAME],[[59,8,[[71,10,[[72,12],[73,12]]]]]]);var on_click_2$1=(__2,menuOpen)=>set(menuOpen,false);var root_4$4=add_locations(from_html(`<div class="absolute left-0 top-full mt-2 w-56 yakkl-dropdown"></div> <button class="fixed inset-0 z-40" style="background:transparent" aria-label="Close menu"></button>`,1),NetworkSwitcher[FILENAME],[[57,4],[89,4]]);var root$7=add_locations(from_html(`<div><button class="yakkl-pill" title="Switch Network" aria-haspopup="listbox"><!> <span class="truncate"> </span> <span class="text-xs opacity-70 ml-1 truncate"> </span> <svg class="ml-1 w-3 h-3" viewBox="0 0 20 20" fill="currentColor"><path d="M6 8l4 4 4-4"></path></svg> <!></button> <!></div>`),NetworkSwitcher[FILENAME],[[36,0,[[37,2,[[49,4],[50,4],[51,4,[[51,70]]]]]]]]);function NetworkSwitcher($$anchor,$$props){check_target(new.target);push($$props,true,NetworkSwitcher);const[$$stores,$$cleanup]=setup_stores();const $visibleChains=()=>(validate_store(visibleChains,"visibleChains"),store_get(visibleChains,"$visibleChains",$$stores));const $currentChain=()=>(validate_store(currentChain,"currentChain"),store_get(currentChain,"$currentChain",$$stores));let chains=prop($$props,"chains",19,()=>[]),selectedChain=prop($$props,"selectedChain",3,null),showTestnets=prop($$props,"showTestnets",3,false),onSwitch=prop($$props,"onSwitch",3,null),className=prop($$props,"className",3,"");let storeChains=tag(user_derived($visibleChains),"storeChains");let storeSelectedChain=tag(user_derived($currentChain),"storeSelectedChain");let showTestnetsSetting=false;let effectiveChains=tag(user_derived(()=>()=>{if(get(storeChains).length>0){return get(storeChains).filter(chain=>!chain.isTestnet)}if(chains().length>0){return showTestnets()?chains():chains().filter(chain=>!chain.isTestnet)}return[{key:"eth-main",name:"Ethereum",network:"Mainnet",icon:"/images/eth.svg",isTestnet:false,chainId:1},{key:"eth-sepolia",name:"Ethereum",network:"Sepolia",icon:"/images/eth.svg",isTestnet:true,chainId:11155111},{key:"sol-main",name:"Solana",network:"Mainnet",icon:"/images/sol.svg",isTestnet:false,chainId:101}].filter(chain=>!chain.isTestnet)}),"effectiveChains");let effectiveSelectedChain=tag(user_derived(()=>()=>get(storeSelectedChain)||selectedChain()||get(effectiveChains)[0]),"effectiveSelectedChain");let menuOpen=tag(state(false),"menuOpen");function selectChain(chain){if(onSwitch())onSwitch()(chain);set(menuOpen,false)}var div=root$7();var button=child(div);button.__click=[on_click$1,menuOpen];var node=child(button);{var consequent=$$anchor2=>{var img=root_1$9();template_effect(()=>{set_attribute(img,"src",get(effectiveSelectedChain).icon);set_attribute(img,"alt",get(effectiveSelectedChain).name)});append($$anchor2,img)};var alternate=$$anchor2=>{var span=root_2$6();var text2=child(span,true);reset(span);template_effect(()=>{var _a;return set_text(text2,((_a=get(effectiveSelectedChain))==null?void 0:_a.icon)||"🌐")});append($$anchor2,span)};if_block(node,$$render=>{var _a,_b;if((_b=(_a=get(effectiveSelectedChain))==null?void 0:_a.icon)==null?void 0:_b.includes("/"))$$render(consequent);else $$render(alternate,false)})}var span_1=sibling(node,2);var text_1=child(span_1,true);reset(span_1);var span_2=sibling(span_1,2);var text_2=child(span_2,true);reset(span_2);var node_1=sibling(span_2,4);{var consequent_1=$$anchor2=>{var span_3=root_3$4();append($$anchor2,span_3)};if_block(node_1,$$render=>{var _a;if((showTestnets()||showTestnetsSetting)&&((_a=get(effectiveSelectedChain))==null?void 0:_a.isTestnet))$$render(consequent_1)})}reset(button);var node_2=sibling(button,2);{var consequent_6=$$anchor2=>{var fragment=root_4$4();var div_1=first_child(fragment);each(div_1,21,()=>get(effectiveChains),index,($$anchor3,chain)=>{var button_1=root_5$4();button_1.__click=[on_click_1$1,selectChain,chain];var node_3=child(button_1);{var consequent_2=$$anchor4=>{var img_1=root_6$2();template_effect(()=>{set_attribute(img_1,"src",get(chain).icon);set_attribute(img_1,"alt",get(chain).name)});append($$anchor4,img_1)};var alternate_1=$$anchor4=>{var span_4=root_7$2();var text_3=child(span_4,true);reset(span_4);template_effect(()=>set_text(text_3,get(chain).icon));append($$anchor4,span_4)};if_block(node_3,$$render=>{var _a;if((_a=get(chain).icon)==null?void 0:_a.includes("/"))$$render(consequent_2);else $$render(alternate_1,false)})}var div_2=sibling(node_3,2);var div_3=child(div_2);var text_4=child(div_3,true);reset(div_3);var div_4=sibling(div_3,2);var text_5=child(div_4,true);reset(div_4);var node_4=sibling(div_4,2);{var consequent_3=$$anchor4=>{var div_5=root_8$2();var text_6=child(div_5);reset(div_5);template_effect(()=>set_text(text_6,`ID: ${get(chain).chainId??""}`));append($$anchor4,div_5)};if_block(node_4,$$render=>{if(get(chain).chainId)$$render(consequent_3)})}reset(div_2);var node_5=sibling(div_2,2);{var consequent_4=$$anchor4=>{var span_5=root_9$2();append($$anchor4,span_5)};if_block(node_5,$$render=>{if((showTestnets()||showTestnetsSetting)&&get(chain).isTestnet)$$render(consequent_4)})}var node_6=sibling(node_5,2);{var consequent_5=$$anchor4=>{var svg=root_10$2();append($$anchor4,svg)};if_block(node_6,$$render=>{var _a;if(strict_equals(get(chain).key,(_a=get(effectiveSelectedChain))==null?void 0:_a.key))$$render(consequent_5)})}reset(button_1);template_effect(()=>{var _a;set_class(button_1,1,`yakkl-dropdown-item flex items-center gap-2 ${strict_equals(get(chain).key,(_a=get(effectiveSelectedChain))==null?void 0:_a.key)?"bg-indigo-50 dark:bg-indigo-900":""}`);set_attribute(button_1,"aria-selected",strict_equals(get(effectiveSelectedChain).key,get(chain).key));set_attribute(button_1,"title",`Switch to ${get(chain).name} ${get(chain).network}`);set_text(text_4,get(chain).name);set_text(text_5,get(chain).network)});append($$anchor3,button_1)});reset(div_1);var button_2=sibling(div_1,2);button_2.__click=[on_click_2$1,menuOpen];append($$anchor2,fragment)};if_block(node_2,$$render=>{if(get(menuOpen))$$render(consequent_6)})}reset(div);template_effect(()=>{var _a,_b;set_class(div,1,`relative ${className()}`);set_attribute(button,"aria-expanded",get(menuOpen));set_text(text_1,((_a=get(effectiveSelectedChain))==null?void 0:_a.name)||"Unknown");set_text(text_2,((_b=get(effectiveSelectedChain))==null?void 0:_b.network)||"Network")});append($$anchor,div);var $$pop=pop({...legacy_api()});$$cleanup();return $$pop}delegate(["click"]);UserMenu[FILENAME]="src/routes/preview2/lib/components/UserMenu.svelte";var on_click=(_,menuOpen)=>set(menuOpen,!get(menuOpen));var root_1$8=add_locations(from_html(`<img alt="avatar" class="h-8 w-8 rounded-full object-cover"/>`),UserMenu[FILENAME],[[48,6]]);var root_2$5=add_locations(from_html(`<span class="text-white text-lg font-bold select-none"> </span>`),UserMenu[FILENAME],[[50,6]]);var on_click_1=(__1,menuOpen)=>set(menuOpen,false);var on_keydown=(e,menuOpen)=>strict_equals(e.key,"Escape")&&set(menuOpen,false);var root_4$3=add_locations(from_html(`<img alt="avatar" class="w-8 h-8 rounded-full object-cover"/>`),UserMenu[FILENAME],[[72,12]]);var root_5$3=add_locations(from_html(`<div class="w-8 h-8 rounded-full bg-indigo-600 flex items-center justify-center text-white font-bold"> </div>`),UserMenu[FILENAME],[[74,12]]);var on_click_2=(__2,menuOpen,onManage)=>{set(menuOpen,false);onManage()&&onManage()()};var on_click_3=(__3,menuOpen,onSettings)=>{set(menuOpen,false);onSettings()&&onSettings()()};var on_click_4=(__4,menuOpen,onTheme)=>{set(menuOpen,false);onTheme()&&onTheme()()};var on_click_5=(__5,menuOpen,onLogout)=>{set(menuOpen,false);onLogout()&&onLogout()()};var root_3$3=add_locations(from_html(`<div class="fixed inset-0 z-40 bg-transparent" role="button" tabindex="0" aria-label="Close menu"></div> <div class="absolute right-0 top-full mt-2 min-w-[200px] yakkl-dropdown animate-in fade-in z-50"><div class="px-4 py-3 border-b border-zinc-200 dark:border-zinc-700"><div class="flex items-center gap-3"><!> <div class="flex-1 min-w-0"><div class="font-medium text-sm truncate"> </div> <div class="text-xs text-zinc-500 truncate"> </div> <div class="text-xs text-indigo-600 dark:text-indigo-400 capitalize"> </div></div></div></div> <div class="py-1"><button class="yakkl-dropdown-item flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg> Manage Account</button> <button class="yakkl-dropdown-item flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg> Settings</button> <button class="yakkl-dropdown-item flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg> Toggle Theme</button> <div class="border-t border-zinc-200 dark:border-zinc-700 my-1"></div> <button class="yakkl-dropdown-item text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path></svg> Logout</button></div></div>`,1),UserMenu[FILENAME],[[57,4],[67,4,[[69,6,[[70,8,[[78,10,[[79,12],[80,12],[81,12]]]]]]],[87,6,[[88,8,[[89,10,[[90,12]]]]],[94,8,[[95,10,[[96,12],[97,12]]]]],[101,8,[[102,10,[[103,12]]]]],[107,8],[108,8,[[109,10,[[110,12]]]]]]]]]]);var root$6=add_locations(from_html(`<div><button class="h-7 w-7 rounded-full bg-indigo-600 hover:ring-2 hover:ring-indigo-400 border border-indigo-200 dark:border-indigo-600 flex items-center justify-center" tabindex="0"><!></button> <!></div>`),UserMenu[FILENAME],[[39,0,[[40,2]]]]);function UserMenu($$anchor,$$props){check_target(new.target);push($$props,true,UserMenu);const[$$stores,$$cleanup]=setup_stores();const $currentAccount=()=>(validate_store(currentAccount,"currentAccount"),store_get(currentAccount,"$currentAccount",$$stores));const $currentPlan=()=>(validate_store(currentPlan,"currentPlan"),store_get(currentPlan,"$currentPlan",$$stores));let account=prop($$props,"account",19,()=>({username:"",address:"",ens:null,avatar:null})),onManage=prop($$props,"onManage",3,null),onTheme=prop($$props,"onTheme",3,null),onSettings=prop($$props,"onSettings",3,null),onLogout=prop($$props,"onLogout",3,null),className=prop($$props,"className",3,"");let storeAccount=tag(user_derived($currentAccount),"storeAccount");let plan=tag(user_derived($currentPlan),"plan");let effectiveAccount=tag(user_derived(()=>()=>get(storeAccount)||account()),"effectiveAccount");let menuOpen=tag(state(false),"menuOpen");function shortAddr(addr){return`${addr==null?void 0:addr.slice(0,6)}...${addr==null?void 0:addr.slice(-4)}`}let username=tag(user_derived(()=>()=>{const acc=get(effectiveAccount);return acc.ens||acc.username||shortAddr(acc.address)}),"username");let displayName=tag(user_derived(()=>()=>{const acc=get(effectiveAccount);if(acc.ens)return acc.ens;if(acc.username)return acc.username;return shortAddr(acc.address)}),"displayName");let avatarInitial=tag(user_derived(()=>()=>{var _a,_b;const acc=get(effectiveAccount);if(acc.ens)return acc.ens[0].toUpperCase();if(acc.username)return acc.username[0].toUpperCase();return((_b=(_a=acc.address)==null?void 0:_a[2])==null?void 0:_b.toUpperCase())??"Y"}),"avatarInitial");var div=root$6();var button=child(div);button.__click=[on_click,menuOpen];var node=child(button);{var consequent=$$anchor2=>{var img=root_1$8();template_effect(()=>set_attribute(img,"src",get(effectiveAccount).avatar));append($$anchor2,img)};var alternate=$$anchor2=>{var span=root_2$5();var text2=child(span,true);reset(span);template_effect($0=>set_text(text2,$0),[()=>get(avatarInitial)()]);append($$anchor2,span)};if_block(node,$$render=>{if(get(effectiveAccount).avatar)$$render(consequent);else $$render(alternate,false)})}reset(button);var node_1=sibling(button,2);{var consequent_2=$$anchor2=>{var fragment=root_3$3();var div_1=first_child(fragment);div_1.__click=[on_click_1,menuOpen];div_1.__keydown=[on_keydown,menuOpen];var div_2=sibling(div_1,2);var div_3=child(div_2);var div_4=child(div_3);var node_2=child(div_4);{var consequent_1=$$anchor3=>{var img_1=root_4$3();template_effect(()=>set_attribute(img_1,"src",get(effectiveAccount).avatar));append($$anchor3,img_1)};var alternate_1=$$anchor3=>{var div_5=root_5$3();var text_1=child(div_5,true);reset(div_5);template_effect($0=>set_text(text_1,$0),[()=>get(avatarInitial)()]);append($$anchor3,div_5)};if_block(node_2,$$render=>{if(get(effectiveAccount).avatar)$$render(consequent_1);else $$render(alternate_1,false)})}var div_6=sibling(node_2,2);var div_7=child(div_6);var text_2=child(div_7,true);reset(div_7);var div_8=sibling(div_7,2);var text_3=child(div_8,true);reset(div_8);var div_9=sibling(div_8,2);var text_4=child(div_9);reset(div_9);reset(div_6);reset(div_4);reset(div_3);var div_10=sibling(div_3,2);var button_1=child(div_10);button_1.__click=[on_click_2,menuOpen,onManage];var button_2=sibling(button_1,2);button_2.__click=[on_click_3,menuOpen,onSettings];var button_3=sibling(button_2,2);button_3.__click=[on_click_4,menuOpen,onTheme];var button_4=sibling(button_3,4);button_4.__click=[on_click_5,menuOpen,onLogout];reset(div_10);reset(div_2);template_effect(($0,$1)=>{set_text(text_2,$0);set_text(text_3,$1);set_text(text_4,`${get(plan)??""} Plan`)},[()=>get(displayName)(),()=>shortAddr(get(effectiveAccount).address)]);append($$anchor2,fragment)};if_block(node_1,$$render=>{if(get(menuOpen))$$render(consequent_2)})}reset(div);template_effect(($0,$1)=>{set_class(div,1,`relative flex items-center justify-center ${className()}`);set_attribute(button,"aria-label",$0);set_attribute(button,"title",$1)},[()=>`Manage account for ${get(username)()}`,()=>`${get(displayName)()} (${get(plan)})`]);append($$anchor,div);var $$pop=pop({...legacy_api()});$$cleanup();return $$pop}delegate(["click","keydown"]);Header[FILENAME]="src/routes/preview2/lib/components/Header.svelte";var root$5=add_locations(from_html(`<header class="relative w-full mx-auto flex items-center h-14 bg-white/90 dark:bg-zinc-900/80 border-b border-zinc-100 dark:border-zinc-800 z-50"><div class="absolute left-4 top-1/2 -translate-y-1/2"><a><!></a></div> <div class="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2"><!></div> <div class="absolute right-4 top-1/2 -translate-y-1/2"><!></div></header>`),Header[FILENAME],[[20,0,[[22,2,[[23,4]]],[27,2],[38,2]]]]);function Header($$anchor,$$props){check_target(new.target);push($$props,true,Header);let logo=prop($$props,"logo",3,"/images/logoBullFav32x32.png"),link=prop($$props,"link",3,"/"),account=prop($$props,"account",19,()=>({username:"",address:"",ens:null,avatar:null})),selectedChain=prop($$props,"selectedChain",3,null),chains=prop($$props,"chains",19,()=>[]),showTestnets=prop($$props,"showTestnets",3,false),onSwitchChain=prop($$props,"onSwitchChain",3,null);prop($$props,"className",3,"");var header=root$5();var div=child(header);var a=child(div);var node=child(a);Brand(node,{get logo(){return logo()}});reset(a);reset(div);var div_1=sibling(div,2);var node_1=child(div_1);NetworkSwitcher(node_1,{get chains(){return chains()},get selectedChain(){return selectedChain()},get showTestnets(){return showTestnets()},get onSwitch(){return onSwitchChain()},className:"yakkl-net-switcher"});reset(div_1);var div_2=sibling(div_1,2);var node_2=child(div_2);UserMenu(node_2,{get account(){return account()},get onManage(){return $$props.onManageAccount},get onSettings(){return $$props.onSettings},get onTheme(){return $$props.onTheme},get onLogout(){return $$props.onLogout}});reset(div_2);reset(header);template_effect(()=>set_attribute(a,"href",link()));append($$anchor,header);return pop({...legacy_api()})}Copyright[FILENAME]="src/routes/preview2/lib/components/Copyright.svelte";var root_1$7=add_locations(from_html(`<span class="inline-flex items-center px-2 py-0.5 rounded-full shadow text-[10px] font-semibold opacity-80\n\t\t\tbg-blue-50 dark:bg-blue-900 text-blue-700 dark:text-blue-200"> </span>`),Copyright[FILENAME],[[22,2]]);var root$4=add_locations(from_html(`<div><!> <span class="text-[10px] opacity-70 text-gray-400 dark:text-gray-500 select-none"> </span></div>`),Copyright[FILENAME],[[19,0,[[29,1]]]]);function Copyright($$anchor,$$props){check_target(new.target);push($$props,true,Copyright);let planType=prop($$props,"planType",3,null),className=prop($$props,"className",3,"");let registered=tag(state(""),"registered");onMount(async()=>{getSettings().then(async result=>{const yakklSettings=result;set(registered,yakklSettings.plan.type,true)})});function formatPlanType(plan){if(!plan)return"";return plan.replace(/_/g," ").split(" ").map(word=>word.charAt(0).toUpperCase()+word.slice(1).toLowerCase()).join(" ")}let displayPlan=tag(user_derived(()=>formatPlanType(planType()||get(registered))),"displayPlan");var div=root$4();var node=child(div);{var consequent=$$anchor2=>{var span=root_1$7();var text2=child(span,true);reset(span);template_effect(()=>set_text(text2,get(displayPlan)));append($$anchor2,span)};if_block(node,$$render=>{if(get(displayPlan))$$render(consequent)})}var span_1=sibling(node,2);var text_1=child(span_1);reset(span_1);reset(div);template_effect(()=>{set_class(div,1,`inline-flex items-center gap-2 w-full justify-center text-center ${className()}`);set_text(text_1,`YAKKL® ©Copyright ${YEAR}, Version: ${VERSION}`)});append($$anchor,div);return pop({...legacy_api()})}Footer[FILENAME]="src/routes/preview2/lib/components/Footer.svelte";var root$3=add_locations(from_html(`<footer><!></footer>`),Footer[FILENAME],[[5,0]]);function Footer($$anchor,$$props){check_target(new.target);push($$props,true,Footer);let planType=prop($$props,"planType",3,"Pro (Trial)");prop($$props,"trialEnds",3,"2024-07-20");prop($$props,"appName",3,"YAKKL");let className=prop($$props,"className",3,"");var footer=root$3();var node=child(footer);Copyright(node,{get planType(){return planType()}});reset(footer);template_effect(()=>set_class(footer,1,`yakkl-footer ${className()}`));append($$anchor,footer);return pop({...legacy_api()})}UpgradeBanner[FILENAME]="src/routes/preview2/lib/components/UpgradeBanner.svelte";function handleUpgrade(_,showUpgrade){set(showUpgrade,true)}function handleDismiss(__1,isAnimating,autoVisible,dismissed,clearAutoTimers){console.log("UpgradeBanner: Dismissing banner");set(isAnimating,true);set(autoVisible,false);set(dismissed,true);clearAutoTimers();const dismissalData={timestamp:Date.now(),dismissCount:parseInt(localStorage.getItem("yakkl:upgrade-banner-dismiss-count")||"0")+1};localStorage.setItem("yakkl:upgrade-banner-dismissed",JSON.stringify(dismissalData));localStorage.setItem("yakkl:upgrade-banner-dismiss-count",dismissalData.dismissCount.toString());console.log(...log_if_contains_state("log","UpgradeBanner: Saved dismissal data:",dismissalData));setTimeout(()=>{set(isAnimating,false)},300)}var root_2$4=add_locations(from_svg(`<svg class="h-5 w-5 text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.232 15.5c-.77.833.192 2.5 1.732 2.5z"></path></svg>`),UpgradeBanner[FILENAME],[[195,14,[[196,16]]]]);var root_4$2=add_locations(from_svg(`<svg class="h-5 w-5 text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>`),UpgradeBanner[FILENAME],[[199,14,[[200,16]]]]);var root_5$2=add_locations(from_svg(`<svg class="h-5 w-5 text-indigo-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>`),UpgradeBanner[FILENAME],[[203,14,[[204,16]]]]);var root_1$6=add_locations(from_html(`<div><div><div class="flex items-center justify-between"><div class="flex items-center"><div class="flex-shrink-0"><!></div> <div class="ml-3"><p class="text-sm font-medium"> </p></div></div> <div class="flex items-center space-x-2"><button> </button> <button class="text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300" title="Dismiss" aria-label="Dismiss upgrade banner"><svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div></div></div></div>`),UpgradeBanner[FILENAME],[[186,2,[[190,4,[[191,6,[[192,8,[[193,10],[208,10,[[209,12]]]]],[215,8,[[216,10],[226,10,[[232,12,[[233,14]]]]]]]]]]]]]]);var root$2=add_locations(from_html(`<!> <!>`,1),UpgradeBanner[FILENAME],[]);function UpgradeBanner($$anchor,$$props){check_target(new.target);push($$props,true,UpgradeBanner);const[$$stores,$$cleanup]=setup_stores();const $currentPlan=()=>(validate_store(currentPlan,"currentPlan"),store_get(currentPlan,"$currentPlan",$$stores));const $isOnTrial=()=>(validate_store(isOnTrial,"isOnTrial"),store_get(isOnTrial,"$isOnTrial",$$stores));const $planStore=()=>(validate_store(planStore,"planStore"),store_get(planStore,"$planStore",$$stores));let showOnBasic=prop($$props,"showOnBasic",3,true),showOnTrial=prop($$props,"showOnTrial",3,true),className=prop($$props,"className",3,""),position=prop($$props,"position",3,"top"),autoShowInterval=prop($$props,"autoShowInterval",3,3e5),fadeDuration=prop($$props,"fadeDuration",3,1e4);let plan=tag(user_derived($currentPlan),"plan");let trial=tag(user_derived($isOnTrial),"trial");let showUpgrade=tag(state(false),"showUpgrade");let dismissed=tag(state(false),"dismissed");let autoVisible=tag(state(false),"autoVisible");let autoTimer=null;let fadeTimer=null;let isAnimating=tag(state(false),"isAnimating");let hasInitialized=false;const initialDismissalData=strict_equals(typeof window,"undefined",false)?localStorage.getItem("yakkl:upgrade-banner-dismissed"):null;if(initialDismissalData){try{const data=JSON.parse(initialDismissalData);set(dismissed,true)}catch(e){set(dismissed,true)}}const AUTO_SHOW_INTERVAL=autoShowInterval();const FADE_DURATION=fadeDuration();let trialDaysLeft=tag(user_derived(()=>()=>{if(!get(trial)||!$planStore().plan.trialEndsAt)return 0;const now=new Date;const trialEnd=new Date($planStore().plan.trialEndsAt);const diffTime=trialEnd.getTime()-now.getTime();const diffDays=Math.ceil(diffTime/(1e3*60*60*24));return Math.max(0,diffDays)}),"trialDaysLeft");let shouldShow=tag(user_derived(()=>()=>{if(get(dismissed)){return get(autoVisible)}if(get(trial)&&showOnTrial()&&get(trialDaysLeft)<=7)return true;if(strict_equals(get(plan),PlanType.Basic)&&showOnBasic())return true;return false}),"shouldShow");function getBannerMessage(){if(get(trial)){if(get(trialDaysLeft)<=0){return"Your trial has expired. Upgrade to continue using Pro features."}else if(strict_equals(get(trialDaysLeft),1)){return"Your trial expires tomorrow. Upgrade to keep Pro features."}else{return`Your trial expires in ${get(trialDaysLeft)} days. Upgrade to keep Pro features.`}}else{return"Upgrade to Pro to unlock advanced features and enhanced security."}}function getBannerType(){if(get(trial)&&get(trialDaysLeft)<=1)return"urgent";if(get(trial)&&get(trialDaysLeft)<=3)return"warning";return"info"}function getBannerColors(){const type=getBannerType();switch(type){case"urgent":return"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-800 dark:text-red-200";case"warning":return"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800 text-yellow-800 dark:text-yellow-200";default:return"bg-indigo-50 dark:bg-indigo-900/20 border-indigo-200 dark:border-indigo-800 text-indigo-800 dark:text-indigo-200"}}function onUpgradeComplete(){set(showUpgrade,false);set(dismissed,true);set(autoVisible,false);clearAutoTimers()}function clearAutoTimers(){if(autoTimer){clearInterval(autoTimer);autoTimer=null}if(fadeTimer){clearTimeout(fadeTimer);fadeTimer=null}}function startAutoShow(){if(strict_equals(get(plan),PlanType.Basic)&&!get(dismissed)){autoTimer=setInterval(()=>{if(!get(dismissed)&&!get(showUpgrade)&&!get(autoVisible)){const dismissedTime=localStorage.getItem("yakkl:upgrade-banner-dismissed");if(!dismissedTime){set(autoVisible,true);fadeTimer=setTimeout(()=>{set(autoVisible,false)},FADE_DURATION)}}},AUTO_SHOW_INTERVAL)}}user_effect(()=>{if(!hasInitialized){hasInitialized=true;const dismissedData=localStorage.getItem("yakkl:upgrade-banner-dismissed");console.log(...log_if_contains_state("log","UpgradeBanner: Checking dismissal status, data:",dismissedData));if(dismissedData){try{const data=JSON.parse(dismissedData);const dismissedDate=new Date(data.timestamp||parseInt(dismissedData));const now=new Date;const hoursSinceDismissed=Math.floor((now.getTime()-dismissedDate.getTime())/(1e3*60*60));const dismissCount=data.dismissCount||1;console.log(...log_if_contains_state("log","UpgradeBanner: Hours since dismissed:",hoursSinceDismissed,"Dismiss count:",dismissCount));let resetHours=get(trial)?24:168;if(dismissCount>=3){resetHours=get(trial)?168:720}if(hoursSinceDismissed>=resetHours){console.log("UpgradeBanner: Reset time reached, clearing dismissal");localStorage.removeItem("yakkl:upgrade-banner-dismissed");localStorage.removeItem("yakkl:upgrade-banner-dismiss-count");set(dismissed,false)}else{console.log("UpgradeBanner: Still within dismissal period, hiding banner");set(dismissed,true)}}catch(e){const dismissedDate=new Date(parseInt(dismissedData));const now=new Date;const hoursSinceDismissed=Math.floor((now.getTime()-dismissedDate.getTime())/(1e3*60*60));const resetHours=get(trial)?24:168;if(hoursSinceDismissed>=resetHours){localStorage.removeItem("yakkl:upgrade-banner-dismissed");localStorage.removeItem("yakkl:upgrade-banner-dismiss-count");set(dismissed,false)}else{set(dismissed,true)}}}if(!get(dismissed)){startAutoShow()}}return()=>{clearAutoTimers()}});var fragment=root$2();var node=first_child(fragment);{var consequent_2=$$anchor2=>{var div=root_1$6();var div_1=child(div);var div_2=child(div_1);var div_3=child(div_2);var div_4=child(div_3);var node_1=child(div_4);{var consequent=$$anchor3=>{var svg=root_2$4();append($$anchor3,svg)};var alternate=($$anchor3,$$elseif)=>{{var consequent_1=$$anchor4=>{var svg_1=root_4$2();append($$anchor4,svg_1)};var alternate_1=$$anchor4=>{var svg_2=root_5$2();append($$anchor4,svg_2)};if_block($$anchor3,$$render=>{if(strict_equals(getBannerType(),"warning"))$$render(consequent_1);else $$render(alternate_1,false)},$$elseif)}};if_block(node_1,$$render=>{if(strict_equals(getBannerType(),"urgent"))$$render(consequent);else $$render(alternate,false)})}reset(div_4);var div_5=sibling(div_4,2);var p=child(div_5);var text2=child(p,true);reset(p);reset(div_5);reset(div_3);var div_6=sibling(div_3,2);var button=child(div_6);button.__click=[handleUpgrade,showUpgrade];var text_1=child(button,true);reset(button);var button_1=sibling(button,2);button_1.__click=[handleDismiss,isAnimating,autoVisible,dismissed,clearAutoTimers];reset(div_6);reset(div_2);reset(div_1);reset(div);template_effect(($0,$1,$2)=>{set_class(div,1,`upgrade-banner ${className()} ${strict_equals(position(),"top")?"fixed top-0 left-0 right-0 z-40":strict_equals(position(),"bottom")?"fixed bottom-0 left-0 right-0 z-40":""} \n           ${get(autoVisible)?"animate-slideDown":""} ${get(isAnimating)?"animate-slideUp":""}`,"svelte-xvkk6y");set_class(div_1,1,$0,"svelte-xvkk6y");set_text(text2,$1);set_class(button,1,`bg-white dark:bg-zinc-800 px-3 py-1.5 rounded-md text-sm font-medium shadow-sm border border-transparent hover:bg-zinc-50 dark:hover:bg-zinc-700 transition-colors\n              ${$2??""}`);set_text(text_1,get(trial)?"Upgrade Now":"Upgrade to Pro")},[()=>`border-l-4 p-4 ${getBannerColors()} relative`,getBannerMessage,()=>strict_equals(getBannerType(),"urgent")?"text-red-800 dark:text-red-200 hover:text-red-900 dark:hover:text-red-100":strict_equals(getBannerType(),"warning")?"text-yellow-800 dark:text-yellow-200 hover:text-yellow-900 dark:hover:text-yellow-100":"text-indigo-800 dark:text-indigo-200 hover:text-indigo-900 dark:hover:text-indigo-100"]);append($$anchor2,div)};if_block(node,$$render=>{if(strict_equals(typeof window,"undefined",false)&&get(shouldShow))$$render(consequent_2)})}var node_2=sibling(node,2);Upgrade(node_2,{onComplete:onUpgradeComplete,get show(){return get(showUpgrade)},set show($$value){set(showUpgrade,$$value,true)}});append($$anchor,fragment);var $$pop=pop({...legacy_api()});$$cleanup();return $$pop}delegate(["click"]);Settings[FILENAME]="src/routes/preview2/lib/components/Settings.svelte";function resetForm$1(_,settings,profile,updateField){var _a,_b,_c,_d,_e,_f,_g,_h;if(get(settings)&&get(profile)){updateField("showTestNetworks",((_a=get(profile).preferences)==null?void 0:_a.showTestNetworks)??false);updateField("theme",((_b=get(profile).preferences)==null?void 0:_b.dark)??SystemTheme.SYSTEM);updateField("locale",((_c=get(profile).preferences)==null?void 0:_c.locale)??"en-US");updateField("currency",((_e=(_d=get(profile).preferences)==null?void 0:_d.currency)==null?void 0:_e.code)??"USD");updateField("idleDelayInterval",((_f=get(profile).preferences)==null?void 0:_f.idleDelayInterval)??300);updateField("idleAutoLock",((_g=get(profile).preferences)==null?void 0:_g.idleAutoLock)??true);updateField("idleAutoLockCycle",((_h=get(profile).preferences)==null?void 0:_h.idleAutoLockCycle)??180);updateField("showHints",get(settings).showHints??true);updateField("trialCountdownPinned",get(settings).trialCountdownPinned??false)}}var root_2$3=add_locations(from_html(`<div class="flex items-center justify-center py-8"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"></div> <span class="ml-2 text-gray-600">Loading settings...</span></div>`),Settings[FILENAME],[[245,3,[[246,4],[247,4]]]]);var root_4$1=add_locations(from_html(`<div class="bg-gray-50 p-4 rounded-lg"><h3 class="text-lg font-medium text-gray-900 mb-3">Account Information</h3> <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"><div><span class="font-medium text-gray-700">Plan:</span> <span class="ml-2 text-gray-600"> </span></div> <div><span class="font-medium text-gray-700">Member since:</span> <span class="ml-2 text-gray-600"> </span></div> <div><span class="font-medium text-gray-700">Profile ID:</span> <span class="ml-2 text-gray-600 font-mono text-xs"> </span></div> <div><span class="font-medium text-gray-700">Version:</span> <span class="ml-2 text-gray-600"> </span></div></div></div>`),Settings[FILENAME],[[253,5,[[254,6],[255,6,[[256,7,[[257,8],[258,8]]],[260,7,[[261,8],[262,8]]],[264,7,[[265,8],[266,8]]],[268,7,[[269,8],[270,8]]]]]]]]);var root_5$1=add_locations(from_html(`<option> </option>`),Settings[FILENAME],[[290,9]]);var root_6$1=add_locations(from_html(`<option> </option>`),Settings[FILENAME],[[336,9]]);var root_7$1=add_locations(from_html(`<p class="mt-1 text-sm text-red-600"> </p>`),Settings[FILENAME],[[340,8]]);var root_8$1=add_locations(from_html(`<option> </option>`),Settings[FILENAME],[[355,9]]);var root_9$1=add_locations(from_html(`<p class="mt-1 text-sm text-red-600"> </p>`),Settings[FILENAME],[[359,8]]);var root_10$1=add_locations(from_html(`<option> </option>`),Settings[FILENAME],[[379,9]]);var root_12$1=add_locations(from_html(`<p class="mt-1 text-sm text-red-600"> </p>`),Settings[FILENAME],[[415,9]]);var root_11$1=add_locations(from_html(`<div><label for="idleAutoLockCycle" class="block text-sm font-medium text-gray-700 mb-1">Auto-lock cycle (seconds)</label> <input id="idleAutoLockCycle" type="number" min="60" max="3600" step="60"/> <!> <p class="mt-1 text-sm text-gray-500">How often to check for idle activity (minimum 60 seconds)</p></div>`),Settings[FILENAME],[[400,7,[[401,8],[404,8],[417,8]]]]);var root_13$1=add_locations(from_html(`<div><h3 class="text-lg font-medium text-gray-900 mb-4">Trial Settings</h3> <div class="flex items-center"><input id="trialCountdownPinned" type="checkbox" class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"/> <label for="trialCountdownPinned" class="ml-2 block text-sm text-gray-900">Pin trial countdown to top of interface</label></div></div>`),Settings[FILENAME],[[427,5,[[428,6],[429,6,[[430,7],[436,7]]]]]]);var root_14=add_locations(from_html(`<div class="rounded-md bg-red-50 p-4"><p class="text-sm font-medium text-red-800"> </p></div>`),Settings[FILENAME],[[445,5,[[446,6]]]]);var root_15$1=add_locations(from_html(`<div class="rounded-md bg-green-50 p-4"><p class="text-sm font-medium text-green-800"> </p></div>`),Settings[FILENAME],[[451,5,[[452,6]]]]);var root_16=add_locations(from_html(`<span class="flex items-center"><div class="animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"></div> Saving...</span>`),Settings[FILENAME],[[483,8,[[484,9]]]]);var root_18=add_locations(from_html(`<div class="text-xs text-gray-500 text-center pt-2 border-t"> </div>`),Settings[FILENAME],[[496,5]]);var root_3$2=add_locations(from_html(`<form class="space-y-6"><!> <div><h3 class="text-lg font-medium text-gray-900 mb-4">Display & Theme</h3> <div class="space-y-4"><div><label for="theme" class="block text-sm font-medium text-gray-700 mb-1">Theme</label> <select id="theme" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"></select></div> <div class="flex items-center"><input id="showTestNetworks" type="checkbox" class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"/> <label for="showTestNetworks" class="ml-2 block text-sm text-gray-900">Show test networks</label></div> <div class="flex items-center"><input id="showHints" type="checkbox" class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"/> <label for="showHints" class="ml-2 block text-sm text-gray-900">Show helpful hints and tips</label></div></div></div> <div><h3 class="text-lg font-medium text-gray-900 mb-4">Localization</h3> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="locale" class="block text-sm font-medium text-gray-700 mb-1">Language <span class="text-red-500">*</span></label> <select id="locale"></select> <!></div> <div><label for="currency" class="block text-sm font-medium text-gray-700 mb-1">Currency <span class="text-red-500">*</span></label> <select id="currency"></select> <!></div></div></div> <div><h3 class="text-lg font-medium text-gray-900 mb-4">Security & Privacy</h3> <div class="space-y-4"><div><label for="idleDelayInterval" class="block text-sm font-medium text-gray-700 mb-1">Auto-lock after idle time</label> <select id="idleDelayInterval" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"></select> <p class="mt-1 text-sm text-gray-500">Automatically lock the wallet after the specified time of inactivity</p></div> <div class="flex items-center"><input id="idleAutoLock" type="checkbox" class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"/> <label for="idleAutoLock" class="ml-2 block text-sm text-gray-900">Enable automatic idle lock</label></div> <!></div></div> <!> <!> <!> <div class="flex justify-between pt-5"><button type="button" class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">Reset</button> <div class="flex space-x-3"><button type="button" class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">Cancel</button> <button type="submit" class="px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"><!></button></div></div> <!></form>`),Settings[FILENAME],[[250,3,[[277,4,[[278,5],[279,5,[[280,6,[[281,7],[284,7]]],[295,6,[[296,7],[302,7]]],[307,6,[[308,7],[314,7]]]]]]],[322,4,[[323,5],[324,5,[[325,6,[[326,7,[[327,17]]],[329,7]]],[344,6,[[345,7,[[346,17]]],[348,7]]]]]]],[366,4,[[367,5],[368,5,[[369,6,[[370,7],[373,7],[382,7]]],[387,6,[[388,7],[394,7]]]]]]],[457,4,[[458,5],[467,5,[[468,6],[477,6]]]]]]]]);var root_1$5=add_locations(from_html(`<div class="space-y-6 p-6"><!></div>`),Settings[FILENAME],[[243,1]]);function Settings($$anchor,$$props){check_target(new.target);push($$props,true,Settings);var $$ownership_validator=create_ownership_validator($$props);const[$$stores,$$cleanup]=setup_stores();const $isValid=()=>(validate_store(isValid,"isValid"),store_get(isValid,"$isValid",$$stores));const $form=()=>(validate_store(form,"form"),store_get(form,"$form",$$stores));const $errors=()=>(validate_store(errors,"errors"),store_get(errors,"$errors",$$stores));const $touched=()=>(validate_store(touched,"touched"),store_get(touched,"$touched",$$stores));let show=prop($$props,"show",15,false),onClose=prop($$props,"onClose",3,()=>show(false)),onComplete=prop($$props,"onComplete",3,()=>{});let settings=tag(state(null),"settings");let profile=tag(state(null),"profile");let isLoading=tag(state(false),"isLoading");let isSaving=tag(state(false),"isSaving");let error=tag(state(""),"error");let success=tag(state(""),"success");let hasChanges=tag(state(false),"hasChanges");const themeOptions=[{value:SystemTheme.SYSTEM,label:"System"},{value:SystemTheme.LIGHT,label:"Light"},{value:SystemTheme.DARK,label:"Dark"}];const currencyOptions=[{value:"USD",label:"US Dollar (USD)"},{value:"EUR",label:"Euro (EUR)"},{value:"GBP",label:"British Pound (GBP)"},{value:"JPY",label:"Japanese Yen (JPY)"},{value:"CAD",label:"Canadian Dollar (CAD)"},{value:"AUD",label:"Australian Dollar (AUD)"},{value:"CHF",label:"Swiss Franc (CHF)"},{value:"CNY",label:"Chinese Yuan (CNY)"}];const localeOptions=[{value:"en-US",label:"English (US)"},{value:"en-GB",label:"English (UK)"},{value:"es-ES",label:"Spanish"},{value:"fr-FR",label:"French"},{value:"de-DE",label:"German"},{value:"it-IT",label:"Italian"},{value:"pt-PT",label:"Portuguese"},{value:"ja-JP",label:"Japanese"},{value:"ko-KR",label:"Korean"},{value:"zh-CN",label:"Chinese (Simplified)"},{value:"zh-TW",label:"Chinese (Traditional)"}];const idleDelayOptions=[{value:60,label:"1 minute"},{value:300,label:"5 minutes"},{value:600,label:"10 minutes"},{value:900,label:"15 minutes"},{value:1800,label:"30 minutes"},{value:3600,label:"1 hour"},{value:0,label:"Never"}];const validationSchema=create$3().shape({showTestNetworks:create$7(),theme:create$6().oneOf(Object.values(SystemTheme)),locale:create$6().required("Locale is required"),currency:create$6().required("Currency is required"),idleDelayInterval:create$5().min(0,"Idle delay must be 0 or positive"),idleAutoLock:create$7(),idleAutoLockCycle:create$5().min(60,"Auto-lock cycle must be at least 1 minute"),showHints:create$7(),trialCountdownPinned:create$7()});const{form:form,errors:errors,isValid:isValid,touched:touched,updateField:updateField}=createForm({initialValues:{showTestNetworks:false,theme:SystemTheme.SYSTEM,locale:"en-US",currency:"USD",idleDelayInterval:300,idleAutoLock:true,idleAutoLockCycle:180,showHints:true,trialCountdownPinned:false},validationSchema:validationSchema,onSubmit:async values=>{await saveSettings(values)}});async function handleFormSubmit(event2){event2.preventDefault();if(!$isValid()){return}await saveSettings($form())}user_effect(()=>{if(show()){loadSettingsData()}});user_effect(()=>{var _a,_b,_c,_d,_e,_f,_g,_h;if(get(settings)&&get(profile)&&!get(isLoading)){const currentValues=$form();const originalValues={showTestNetworks:((_a=get(profile).preferences)==null?void 0:_a.showTestNetworks)??false,theme:((_b=get(profile).preferences)==null?void 0:_b.dark)??SystemTheme.SYSTEM,locale:((_c=get(profile).preferences)==null?void 0:_c.locale)??"en-US",currency:((_e=(_d=get(profile).preferences)==null?void 0:_d.currency)==null?void 0:_e.code)??"USD",idleDelayInterval:((_f=get(profile).preferences)==null?void 0:_f.idleDelayInterval)??300,idleAutoLock:((_g=get(profile).preferences)==null?void 0:_g.idleAutoLock)??true,idleAutoLockCycle:((_h=get(profile).preferences)==null?void 0:_h.idleAutoLockCycle)??180,showHints:get(settings).showHints??true,trialCountdownPinned:get(settings).trialCountdownPinned??false};set(hasChanges,strict_equals(currentValues.showTestNetworks,originalValues.showTestNetworks,false)||strict_equals(currentValues.theme,originalValues.theme,false)||strict_equals(currentValues.locale,originalValues.locale,false)||strict_equals(currentValues.currency,originalValues.currency,false)||strict_equals(currentValues.idleDelayInterval,originalValues.idleDelayInterval,false)||strict_equals(currentValues.idleAutoLock,originalValues.idleAutoLock,false)||strict_equals(currentValues.idleAutoLockCycle,originalValues.idleAutoLockCycle,false)||strict_equals(currentValues.showHints,originalValues.showHints,false)||strict_equals(currentValues.trialCountdownPinned,originalValues.trialCountdownPinned,false),true)}else{set(hasChanges,false)}});async function loadSettingsData(){var _a,_b,_c,_d,_e,_f,_g,_h;set(isLoading,true);set(error,"");try{await(async $$value=>{var $$array=to_array($$value,2);set(settings,$$array[0],true);set(profile,$$array[1],true)})(await Promise.all([getSettings(),getProfile()]));if(!get(settings)){set(error,"Settings not found");return}if(!get(profile)){set(error,"Profile not found");return}updateField("showTestNetworks",((_a=get(profile).preferences)==null?void 0:_a.showTestNetworks)??false);updateField("theme",((_b=get(profile).preferences)==null?void 0:_b.dark)??SystemTheme.SYSTEM);updateField("locale",((_c=get(profile).preferences)==null?void 0:_c.locale)??"en-US");updateField("currency",((_e=(_d=get(profile).preferences)==null?void 0:_d.currency)==null?void 0:_e.code)??"USD");updateField("idleDelayInterval",((_f=get(profile).preferences)==null?void 0:_f.idleDelayInterval)??300);updateField("idleAutoLock",((_g=get(profile).preferences)==null?void 0:_g.idleAutoLock)??true);updateField("idleAutoLockCycle",((_h=get(profile).preferences)==null?void 0:_h.idleAutoLockCycle)??180);updateField("showHints",get(settings).showHints??true);updateField("trialCountdownPinned",get(settings).trialCountdownPinned??false)}catch(e){log.error("Error loading settings data:",false,e);set(error,"Failed to load settings data")}finally{set(isLoading,false)}}async function saveSettings(values){if(!get(settings)||!get(profile)){set(error,"Settings data not loaded");return}set(isSaving,true);set(error,"");set(success,"");try{const updatedSettings={...get(settings),showHints:values.showHints,trialCountdownPinned:values.trialCountdownPinned,updateDate:(new Date).toISOString()};const updatedProfile={...get(profile),preferences:{...get(profile).preferences,showTestNetworks:values.showTestNetworks,dark:values.theme,locale:values.locale,currency:{...get(profile).preferences.currency,code:values.currency},idleDelayInterval:values.idleDelayInterval,idleAutoLock:values.idleAutoLock,idleAutoLockCycle:values.idleAutoLockCycle,updateDate:(new Date).toISOString()},updateDate:(new Date).toISOString()};await Promise.all([setSettings(updatedSettings),setProfileStorage(updatedProfile)]);set(settings,updatedSettings,true);set(profile,updatedProfile,true);set(success,"Settings updated successfully!");set(hasChanges,false);onComplete()();onComplete()();setTimeout(()=>{show(false);set(isSaving,false)},100)}catch(e){const errorMsg="Failed to save settings changes: "+e.message;log.error("Error saving settings:",false,e);set(error,errorMsg);set(isSaving,false)}}function handleClose(){if(get(hasChanges)){if(confirm("You have unsaved changes. Are you sure you want to close?")){show(false);onClose()()}}else{show(false);onClose()()}}function getPlanLabel(planType){switch(planType){case PlanType$1.BASIC_MEMBER:return"Basic Member";case PlanType$1.YAKKL_PRO:return"YAKKL Pro";case PlanType$1.YAKKL_PREMIUM:return"YAKKL Premium";default:return"Unknown"}}{$$ownership_validator.binding("show",Modal,show);Modal($$anchor,{title:"Account Settings",onClose:handleClose,className:"max-w-2xl",get show(){return show()},set show($$value){show($$value)},children:wrap_snippet(Settings,($$anchor2,$$slotProps)=>{var div=root_1$5();var node=child(div);{var consequent=$$anchor3=>{var div_1=root_2$3();append($$anchor3,div_1)};var alternate=$$anchor3=>{var form_1=root_3$2();var node_1=child(form_1);{var consequent_1=$$anchor4=>{var div_2=root_4$1();var div_3=sibling(child(div_2),2);var div_4=child(div_3);var span=sibling(child(div_4),2);var text2=child(span,true);reset(span);reset(div_4);var div_5=sibling(div_4,2);var span_1=sibling(child(div_5),2);var text_1=child(span_1,true);reset(span_1);reset(div_5);var div_6=sibling(div_5,2);var span_2=sibling(child(div_6),2);var text_2=child(span_2);reset(span_2);reset(div_6);var div_7=sibling(div_6,2);var span_3=sibling(child(div_7),2);var text_3=child(span_3,true);reset(span_3);reset(div_7);reset(div_3);reset(div_2);template_effect(($0,$1,$2)=>{set_text(text2,$0);set_text(text_1,$1);set_text(text_2,`${$2??""}...`);set_text(text_3,get(settings).version)},[()=>getPlanLabel(get(settings).plan.type),()=>new Date(get(settings).createDate).toLocaleDateString(),()=>get(settings).id.substring(0,8)]);append($$anchor4,div_2)};if_block(node_1,$$render=>{if(get(settings)&&get(profile))$$render(consequent_1)})}var div_8=sibling(node_1,2);var div_9=sibling(child(div_8),2);var div_10=child(div_9);var select=sibling(child(div_10),2);each(select,21,()=>themeOptions,index,($$anchor4,option)=>{var option_1=root_5$1();var option_1_value={};var text_4=child(option_1,true);reset(option_1);template_effect(()=>{if(option_1_value!==(option_1_value=get(option).value)){option_1.value=(option_1.__value=get(option).value)??""}set_text(text_4,get(option).label)});append($$anchor4,option_1)});reset(select);reset(div_10);var div_11=sibling(div_10,2);var input=child(div_11);remove_input_defaults(input);next(2);reset(div_11);var div_12=sibling(div_11,2);var input_1=child(div_12);remove_input_defaults(input_1);next(2);reset(div_12);reset(div_9);reset(div_8);var div_13=sibling(div_8,2);var div_14=sibling(child(div_13),2);var div_15=child(div_14);var select_1=sibling(child(div_15),2);let classes;each(select_1,21,()=>localeOptions,index,($$anchor4,option)=>{var option_2=root_6$1();var option_2_value={};var text_5=child(option_2,true);reset(option_2);template_effect(()=>{if(option_2_value!==(option_2_value=get(option).value)){option_2.value=(option_2.__value=get(option).value)??""}set_text(text_5,get(option).label)});append($$anchor4,option_2)});reset(select_1);var node_2=sibling(select_1,2);{var consequent_2=$$anchor4=>{var p=root_7$1();var text_6=child(p,true);reset(p);template_effect(()=>set_text(text_6,$errors().locale));append($$anchor4,p)};if_block(node_2,$$render=>{if($errors().locale&&$touched().locale)$$render(consequent_2)})}reset(div_15);var div_16=sibling(div_15,2);var select_2=sibling(child(div_16),2);let classes_1;each(select_2,21,()=>currencyOptions,index,($$anchor4,option)=>{var option_3=root_8$1();var option_3_value={};var text_7=child(option_3,true);reset(option_3);template_effect(()=>{if(option_3_value!==(option_3_value=get(option).value)){option_3.value=(option_3.__value=get(option).value)??""}set_text(text_7,get(option).label)});append($$anchor4,option_3)});reset(select_2);var node_3=sibling(select_2,2);{var consequent_3=$$anchor4=>{var p_1=root_9$1();var text_8=child(p_1,true);reset(p_1);template_effect(()=>set_text(text_8,$errors().currency));append($$anchor4,p_1)};if_block(node_3,$$render=>{if($errors().currency&&$touched().currency)$$render(consequent_3)})}reset(div_16);reset(div_14);reset(div_13);var div_17=sibling(div_13,2);var div_18=sibling(child(div_17),2);var div_19=child(div_18);var select_3=sibling(child(div_19),2);each(select_3,21,()=>idleDelayOptions,index,($$anchor4,option)=>{var option_4=root_10$1();var option_4_value={};var text_9=child(option_4,true);reset(option_4);template_effect(()=>{if(option_4_value!==(option_4_value=get(option).value)){option_4.value=(option_4.__value=get(option).value)??""}set_text(text_9,get(option).label)});append($$anchor4,option_4)});reset(select_3);next(2);reset(div_19);var div_20=sibling(div_19,2);var input_2=child(div_20);remove_input_defaults(input_2);next(2);reset(div_20);var node_4=sibling(div_20,2);{var consequent_5=$$anchor4=>{var div_21=root_11$1();var input_3=sibling(child(div_21),2);remove_input_defaults(input_3);let classes_2;var node_5=sibling(input_3,2);{var consequent_4=$$anchor5=>{var p_2=root_12$1();var text_10=child(p_2,true);reset(p_2);template_effect(()=>set_text(text_10,$errors().idleAutoLockCycle));append($$anchor5,p_2)};if_block(node_5,$$render=>{if($errors().idleAutoLockCycle&&$touched().idleAutoLockCycle)$$render(consequent_4)})}next(2);reset(div_21);template_effect($0=>classes_2=set_class(input_3,1,"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",null,classes_2,$0),[()=>({"border-red-500":$errors().idleAutoLockCycle&&$touched().idleAutoLockCycle})]);bind_value(input_3,()=>$form().idleAutoLockCycle,$$value=>store_mutate(form,untrack($form).idleAutoLockCycle=$$value,untrack($form)));append($$anchor4,div_21)};if_block(node_4,$$render=>{if($form().idleAutoLock)$$render(consequent_5)})}reset(div_18);reset(div_17);var node_6=sibling(div_17,2);{var consequent_6=$$anchor4=>{var div_22=root_13$1();var div_23=sibling(child(div_22),2);var input_4=child(div_23);remove_input_defaults(input_4);next(2);reset(div_23);reset(div_22);bind_checked(input_4,()=>$form().trialCountdownPinned,$$value=>store_mutate(form,untrack($form).trialCountdownPinned=$$value,untrack($form)));append($$anchor4,div_22)};if_block(node_6,$$render=>{var _a,_b;if((_b=(_a=get(settings))==null?void 0:_a.plan)==null?void 0:_b.trialEndDate)$$render(consequent_6)})}var node_7=sibling(node_6,2);{var consequent_7=$$anchor4=>{var div_24=root_14();var p_3=child(div_24);var text_11=child(p_3,true);reset(p_3);reset(div_24);template_effect(()=>set_text(text_11,get(error)));append($$anchor4,div_24)};if_block(node_7,$$render=>{if(get(error))$$render(consequent_7)})}var node_8=sibling(node_7,2);{var consequent_8=$$anchor4=>{var div_25=root_15$1();var p_4=child(div_25);var text_12=child(p_4,true);reset(p_4);reset(div_25);template_effect(()=>set_text(text_12,get(success)));append($$anchor4,div_25)};if_block(node_8,$$render=>{if(get(success))$$render(consequent_8)})}var div_26=sibling(node_8,2);var button=child(div_26);button.__click=[resetForm$1,settings,profile,updateField];var div_27=sibling(button,2);var button_1=child(div_27);button_1.__click=handleClose;var button_2=sibling(button_1,2);var node_9=child(button_2);{var consequent_9=$$anchor4=>{var span_4=root_16();append($$anchor4,span_4)};var alternate_1=$$anchor4=>{var text_13=text("Save Changes");append($$anchor4,text_13)};if_block(node_9,$$render=>{if(get(isSaving))$$render(consequent_9);else $$render(alternate_1,false)})}reset(button_2);reset(div_27);reset(div_26);var node_10=sibling(div_26,2);{var consequent_10=$$anchor4=>{var div_28=root_18();var text_14=child(div_28);reset(div_28);template_effect($0=>set_text(text_14,`Last updated: ${$0??""}`),[()=>new Date(get(settings).updateDate).toLocaleString()]);append($$anchor4,div_28)};if_block(node_10,$$render=>{var _a;if((_a=get(settings))==null?void 0:_a.updateDate)$$render(consequent_10)})}reset(form_1);template_effect(($0,$1)=>{classes=set_class(select_1,1,"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",null,classes,$0);classes_1=set_class(select_2,1,"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",null,classes_1,$1);button.disabled=!get(hasChanges)||get(isSaving);button_1.disabled=get(isSaving);button_2.disabled=!$isValid()||!get(hasChanges)||get(isSaving)},[()=>({"border-red-500":$errors().locale&&$touched().locale}),()=>({"border-red-500":$errors().currency&&$touched().currency})]);event("submit",form_1,handleFormSubmit);bind_select_value(select,()=>$form().theme,$$value=>store_mutate(form,untrack($form).theme=$$value,untrack($form)));bind_checked(input,()=>$form().showTestNetworks,$$value=>store_mutate(form,untrack($form).showTestNetworks=$$value,untrack($form)));bind_checked(input_1,()=>$form().showHints,$$value=>store_mutate(form,untrack($form).showHints=$$value,untrack($form)));bind_select_value(select_1,()=>$form().locale,$$value=>store_mutate(form,untrack($form).locale=$$value,untrack($form)));bind_select_value(select_2,()=>$form().currency,$$value=>store_mutate(form,untrack($form).currency=$$value,untrack($form)));bind_select_value(select_3,()=>$form().idleDelayInterval,$$value=>store_mutate(form,untrack($form).idleDelayInterval=$$value,untrack($form)));bind_checked(input_2,()=>$form().idleAutoLock,$$value=>store_mutate(form,untrack($form).idleAutoLock=$$value,untrack($form)));append($$anchor3,form_1)};if_block(node,$$render=>{if(get(isLoading))$$render(consequent);else $$render(alternate,false)})}reset(div);append($$anchor2,div)}),$$slots:{default:true}})}var $$pop=pop({...legacy_api()});$$cleanup();return $$pop}delegate(["click"]);Avatar[FILENAME]="src/routes/preview2/lib/components/v1/Avatar.svelte";var root_1$4=add_locations(from_html(`<img loading="lazy"/>`),Avatar[FILENAME],[[7,1]]);var root_2$2=add_locations(from_html(`<div role="img"> </div>`),Avatar[FILENAME],[[14,1]]);function Avatar($$anchor,$$props){var _a,_b;check_target(new.target);push($$props,true,Avatar);const initial=((_b=(_a=$$props.userName)==null?void 0:_a.charAt(0))==null?void 0:_b.toUpperCase())??"?";const defaultClasses="w-10 h-10 rounded-full ring-2 ring-offset-1 flex items-center justify-center text-sm font-bold uppercase bg-primary-300 text-base-content";var fragment=comment();var node=first_child(fragment);{var consequent=$$anchor2=>{var img=root_1$4();template_effect(()=>{set_attribute(img,"src",$$props.url);set_attribute(img,"alt",$$props.ariaLabel??"User avatar");set_class(img,1,`object-cover ${$$props.className??defaultClasses}`)});append($$anchor2,img)};var alternate=$$anchor2=>{var div=root_2$2();var text2=child(div,true);reset(div);template_effect(()=>{set_class(div,1,clsx($$props.className??defaultClasses));set_attribute(div,"aria-label",$$props.ariaLabel??"User avatar");set_text(text2,initial)});append($$anchor2,div)};if_block(node,$$render=>{if($$props.url)$$render(consequent);else $$render(alternate,false)})}append($$anchor,fragment);return pop({...legacy_api()})}ErrorNoAction[FILENAME]="src/routes/preview2/lib/components/v1/ErrorNoAction.svelte";var root_1$3=add_locations(from_html(`<div class="p-6"><p class="text-sm text-gray-500"> </p> <div class="mt-4 flex justify-end"><button type="button" class="rounded-md border border-gray-300 bg-white py-2 px-4 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">Close</button></div></div>`),ErrorNoAction[FILENAME],[[14,1,[[15,2],[16,2,[[17,3]]]]]]);function ErrorNoAction($$anchor,$$props){check_target(new.target);push($$props,true,ErrorNoAction);var $$ownership_validator=create_ownership_validator($$props);let show=prop($$props,"show",15,false),title=prop($$props,"title",3,"ERROR!"),value=prop($$props,"value",3,"An error occurred"),className=prop($$props,"className",3,"z-[999]"),onClose=prop($$props,"onClose",11,()=>{show(false)});{$$ownership_validator.binding("show",Modal,show);Modal($$anchor,{get title(){return title()},get className(){return className()},get show(){return show()},set show($$value){show($$value)},children:wrap_snippet(ErrorNoAction,($$anchor2,$$slotProps)=>{var div=root_1$3();var p=child(div);var text2=child(p,true);reset(p);var div_1=sibling(p,2);var button=child(div_1);button.__click=function(...$$args){apply(onClose,this,$$args,ErrorNoAction,[20,13])};reset(div_1);reset(div);template_effect(()=>set_text(text2,value()));append($$anchor2,div)}),$$slots:{default:true}})}return pop({...legacy_api()})}delegate(["click"]);Profile[FILENAME]="src/routes/preview2/lib/components/Profile.svelte";function resetForm(_,profile,profileData,updateField){var _a,_b,_c,_d,_e;if(get(profile)&&get(profileData)){updateField("userName",get(profile).userName||"");updateField("firstName",((_a=get(profileData).name)==null?void 0:_a.first)||"");updateField("lastName",((_b=get(profileData).name)==null?void 0:_b.last)||"");updateField("email",get(profileData).email||"");updateField("bio",((_c=get(profileData))==null?void 0:_c.bio)||"");updateField("website",((_d=get(profileData))==null?void 0:_d.website)||"");updateField("avatarUrl",((_e=get(profileData))==null?void 0:_e.avatarUrl)||"")}}var root_2$1=add_locations(from_html(`<div class="flex items-center justify-center py-8"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"></div> <span class="ml-2 text-gray-600">Loading profile...</span></div>`),Profile[FILENAME],[[256,3,[[257,4],[258,4]]]]);var root_4=add_locations(from_html(`<p class="mt-1 text-sm text-red-600"> </p>`),Profile[FILENAME],[[286,7]]);var root_5=add_locations(from_html(`<p class="mt-1 text-sm text-red-600"> </p>`),Profile[FILENAME],[[306,7]]);var root_6=add_locations(from_html(`<p class="mt-1 text-sm text-red-600"> </p>`),Profile[FILENAME],[[323,7]]);var root_7=add_locations(from_html(`<p class="mt-1 text-sm text-red-600"> </p>`),Profile[FILENAME],[[342,7]]);var root_8=add_locations(from_html(`<p class="mt-1 text-sm text-red-600"> </p>`),Profile[FILENAME],[[359,7]]);var root_9=add_locations(from_html(`<p class="mt-1 text-sm text-red-600"> </p>`),Profile[FILENAME],[[378,6]]);var root_10=add_locations(from_html(`<p class="mt-1 text-sm text-red-600"> </p>`),Profile[FILENAME],[[395,6]]);var root_11=add_locations(from_html(`<div class="rounded-md bg-red-50 p-4"><p class="text-sm font-medium text-red-800"> </p></div>`),Profile[FILENAME],[[402,5,[[403,6]]]]);var root_12=add_locations(from_html(`<div class="rounded-md bg-green-50 p-4"><p class="text-sm font-medium text-green-800"> </p></div>`),Profile[FILENAME],[[408,5,[[409,6]]]]);var root_13=add_locations(from_html(`<span class="flex items-center"><div class="animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"></div> Saving...</span>`),Profile[FILENAME],[[440,8,[[441,9]]]]);var root_15=add_locations(from_html(`<div class="text-xs text-gray-500 text-center pt-2 border-t"> </div>`),Profile[FILENAME],[[453,5]]);var root_3$1=add_locations(from_html(`<form class="space-y-6"><div class="flex flex-col items-center space-y-4"><div class="text-center"><!></div> <div class="w-full"><label for="avatarUrl" class="block text-sm font-medium text-gray-700 mb-1">Avatar URL (optional)</label> <input id="avatarUrl" type="url" placeholder="https://example.com/your-avatar.jpg"/> <!></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="userName" class="block text-sm font-medium text-gray-700 mb-1">Username <span class="text-red-500">*</span></label> <input id="userName" type="text" placeholder="your_username"/> <!></div> <div><label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email <span class="text-red-500">*</span></label> <input id="email" type="email" placeholder="your@email.com"/> <!></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="firstName" class="block text-sm font-medium text-gray-700 mb-1">First Name <span class="text-red-500">*</span></label> <input id="firstName" type="text" placeholder="John"/> <!></div> <div><label for="lastName" class="block text-sm font-medium text-gray-700 mb-1">Last Name <span class="text-red-500">*</span></label> <input id="lastName" type="text" placeholder="Doe"/> <!></div></div> <div><label for="website" class="block text-sm font-medium text-gray-700 mb-1">Website (optional)</label> <input id="website" type="url" placeholder="https://your-website.com"/> <!></div> <div><label for="bio" class="block text-sm font-medium text-gray-700 mb-1">Bio (optional)</label> <textarea id="bio" rows="3" placeholder="Tell us about yourself..."></textarea> <!> <p class="mt-1 text-sm text-gray-500"> </p></div> <!> <!> <div class="flex justify-between pt-5"><button type="button" class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">Reset</button> <div class="flex space-x-3"><button type="button" class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">Cancel</button> <button type="submit" class="px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"><!></button></div></div> <!></form>`),Profile[FILENAME],[[261,3,[[263,4,[[264,5],[273,5,[[274,6],[277,6]]]]],[292,4,[[293,5,[[294,6,[[295,16]]],[297,6]]],[310,5,[[311,6,[[312,13]]],[314,6]]]]],[328,4,[[329,5,[[330,6,[[331,18]]],[333,6]]],[346,5,[[347,6,[[348,17]]],[350,6]]]]],[365,4,[[366,5],[369,5]]],[382,4,[[383,5],[386,5],[397,5]]],[414,4,[[415,5],[424,5,[[425,6],[434,6]]]]]]]]);var root_1$2=add_locations(from_html(`<div class="space-y-6 p-6"><!></div>`),Profile[FILENAME],[[254,1]]);var root$1=add_locations(from_html(`<!> <!>`,1),Profile[FILENAME],[]);function Profile($$anchor,$$props){check_target(new.target);push($$props,true,Profile);var $$ownership_validator=create_ownership_validator($$props);const[$$stores,$$cleanup]=setup_stores();const $isValid=()=>(validate_store(isValid,"isValid"),store_get(isValid,"$isValid",$$stores));const $form=()=>(validate_store(form,"form"),store_get(form,"$form",$$stores));const $yakklMiscStore=()=>(validate_store(yakklMiscStore,"yakklMiscStore"),store_get(yakklMiscStore,"$yakklMiscStore",$$stores));const $errors=()=>(validate_store(errors,"errors"),store_get(errors,"$errors",$$stores));const $touched=()=>(validate_store(touched,"touched"),store_get(touched,"$touched",$$stores));let show=prop($$props,"show",15,false),onClose=prop($$props,"onClose",3,()=>show(false)),onComplete=prop($$props,"onComplete",3,()=>{});let profile=tag(state(null),"profile");let profileData=tag(state(null),"profileData");let isLoading=tag(state(false),"isLoading");let isSaving=tag(state(false),"isSaving");let error=tag(state(""),"error");let success=tag(state(""),"success");let previewAvatarUrl=tag(state(""),"previewAvatarUrl");let hasChanges=tag(state(false),"hasChanges");let showError=tag(state(false),"showError");let errorValue=tag(state(""),"errorValue");const validationSchema=create$3().shape({userName:create$6().required("Username is required").min(3,"Username must be at least 3 characters").max(30,"Username must be less than 30 characters").matches(/^[a-zA-Z0-9_-]+$/,"Username can only contain letters, numbers, underscores, and dashes"),firstName:create$6().required("First name is required").min(1,"First name is required").max(50,"First name must be less than 50 characters"),lastName:create$6().required("Last name is required").min(1,"Last name is required").max(50,"Last name must be less than 50 characters"),email:create$6().email("Must be a valid email address").required("Email address is required"),bio:create$6().max(500,"Bio must be less than 500 characters").optional(),website:create$6().url("Must be a valid URL").optional().nullable().transform(value=>strict_equals(value,"")?null:value),avatarUrl:create$6().url("Must be a valid URL").optional().nullable().transform(value=>strict_equals(value,"")?null:value)});const{form:form,errors:errors,isValid:isValid,touched:touched,updateField:updateField}=createForm({initialValues:{userName:"",firstName:"",lastName:"",email:"",bio:"",website:"",avatarUrl:""},validationSchema:validationSchema,onSubmit:async values=>{await saveProfile(values)}});async function handleFormSubmit(event2){event2.preventDefault();if(!$isValid()){return}await saveProfile($form())}user_effect(()=>{if(show()){loadProfileData()}});user_effect(()=>{var _a,_b,_c,_d,_e;if(get(profile)&&get(profileData)&&!get(isLoading)){const currentValues=$form();const originalValues={userName:get(profile).userName||"",firstName:((_a=get(profileData).name)==null?void 0:_a.first)||"",lastName:((_b=get(profileData).name)==null?void 0:_b.last)||"",email:get(profileData).email||"",bio:((_c=get(profileData))==null?void 0:_c.bio)||"",website:((_d=get(profileData))==null?void 0:_d.website)||"",avatarUrl:((_e=get(profileData))==null?void 0:_e.avatarUrl)||""};set(hasChanges,strict_equals(currentValues.userName,originalValues.userName,false)||strict_equals(currentValues.firstName,originalValues.firstName,false)||strict_equals(currentValues.lastName,originalValues.lastName,false)||strict_equals(currentValues.email,originalValues.email,false)||strict_equals(currentValues.bio,originalValues.bio,false)||strict_equals(currentValues.website,originalValues.website,false)||strict_equals(currentValues.avatarUrl,originalValues.avatarUrl,false),true)}else{set(hasChanges,false)}});user_effect(()=>{var _a,_b;const avatarUrl=$form().avatarUrl;if(avatarUrl&&strict_equals(avatarUrl.trim(),"",false)){set(previewAvatarUrl,avatarUrl,true)}else{set(previewAvatarUrl,((_a=get(profileData))==null?void 0:_a.avatarUrl)||identicon(((_b=get(profile))==null?void 0:_b.userName)||"default"),true)}});async function loadProfileData(){var _a,_b,_c,_d,_e;set(isLoading,true);set(error,"");try{set(profile,await getProfile(),true);if(!get(profile)){set(error,"Profile not found");return}if(isEncryptedData(get(profile).data)){const miscStore=$yakklMiscStore();if(!miscStore){set(error,"Unable to decrypt profile data");return}set(profileData,await decryptData(get(profile).data,miscStore),true)}else{set(profileData,get(profile).data,true)}updateField("userName",get(profile).userName||"");updateField("firstName",((_a=get(profileData).name)==null?void 0:_a.first)||"");updateField("lastName",((_b=get(profileData).name)==null?void 0:_b.last)||"");updateField("email",get(profileData).email||"");updateField("bio",((_c=get(profileData))==null?void 0:_c.bio)||"");updateField("website",((_d=get(profileData))==null?void 0:_d.website)||"");updateField("avatarUrl",((_e=get(profileData))==null?void 0:_e.avatarUrl)||"")}catch(e){log$1.error("Error loading profile data:",false,e);set(error,"Failed to load profile data")}finally{set(isLoading,false)}}async function saveProfile(values){if(!get(profile)||!get(profileData)){set(error,"Profile data not loaded");return}set(isSaving,true);set(error,"");set(success,"");try{log$1.info("[Profile] Starting save with values:",false,values);log$1.info("[Profile] Current state:",false,{profile:!!get(profile),profileData:!!get(profileData),miscStore:!!$yakklMiscStore()});const miscStore=$yakklMiscStore();if(!miscStore){const errorMsg="Unable to encrypt profile data - missing encryption key";log$1.error("[Profile] "+errorMsg,false);set(error,errorMsg);set(errorValue,errorMsg);set(showError,true);set(isSaving,false);return}const updatedProfileData={...get(profileData),name:{id:get(profile).id,persona:get(profile).persona,first:values.firstName||"",last:values.lastName||""},email:values.email||"",bio:values.bio||"",website:values.website||"",avatarUrl:values.avatarUrl||""};log$1.info("[Profile] Created updated profile data:",false,updatedProfileData);const updatedProfile={...get(profile),userName:values.userName,data:updatedProfileData,updateDate:(new Date).toISOString()};log$1.info("[Profile] Created updated profile:",false,{userName:updatedProfile.userName,updateDate:updatedProfile.updateDate});log$1.info("[Profile] Starting encryption...");try{updatedProfile.data=await encryptData(updatedProfileData,miscStore);log$1.info("[Profile] Encryption successful")}catch(encryptError){const errorMsg="Failed to encrypt profile data: "+encryptError.message;log$1.error("[Profile] Encryption failed:",false,encryptError);set(error,errorMsg);set(errorValue,errorMsg);set(showError,true);set(isSaving,false);return}log$1.info("[Profile] Starting storage save...");try{await setProfileStorage(updatedProfile);log$1.info("[Profile] Storage save successful")}catch(saveError){const errorMsg="Failed to save profile to storage: "+saveError.message;log$1.error("[Profile] Storage failed:",false,saveError);set(error,errorMsg);set(errorValue,errorMsg);set(showError,true);set(isSaving,false);return}set(profile,{...updatedProfile,data:updatedProfileData},true);set(profileData,updatedProfileData,true);set(success,"Profile updated successfully!");set(hasChanges,false);log$1.info("[Profile] Profile saved successfully, state updated:",false,{hasChanges:get(hasChanges),profile:get(profile).userName,profileData:get(profileData).name});onComplete()();log$1.info("[Profile] Preparing to close modal after successful save");setTimeout(()=>{show(false);set(isSaving,false)},100)}catch(e){const errorMsg="Failed to save profile changes: "+e.message;log$1.error("[Profile] Unexpected error saving profile:",false,e);set(error,errorMsg);set(errorValue,errorMsg);set(showError,true);set(isSaving,false)}}function handleClose(){if(get(hasChanges)){if(confirm("You have unsaved changes. Are you sure you want to close?")){show(false);onClose()()}}else{show(false);onClose()()}}function handleErrorClose(){set(showError,false);set(error,"");set(errorValue,"")}var fragment=root$1();var node=first_child(fragment);{$$ownership_validator.binding("show",Modal,show);Modal(node,{title:"Profile",onClose:handleClose,className:"max-w-2xl",get show(){return show()},set show($$value){show($$value)},children:wrap_snippet(Profile,($$anchor2,$$slotProps)=>{var div=root_1$2();var node_1=child(div);{var consequent=$$anchor3=>{var div_1=root_2$1();append($$anchor3,div_1)};var alternate=$$anchor3=>{var form_1=root_3$1();var div_2=child(form_1);var div_3=child(div_2);var node_2=child(div_3);const expression=user_derived(()=>$form().firstName||$form().userName);Avatar(node_2,{get url(){return get(previewAvatarUrl)},get userName(){return get(expression)},className:"w-24 h-24 rounded-full ring-4 ring-offset-2 ring-indigo-500",ariaLabel:"Profile Avatar"});reset(div_3);var div_4=sibling(div_3,2);var input=sibling(child(div_4),2);remove_input_defaults(input);let classes;var node_3=sibling(input,2);{var consequent_1=$$anchor4=>{var p=root_4();var text2=child(p,true);reset(p);template_effect(()=>set_text(text2,$errors().avatarUrl));append($$anchor4,p)};if_block(node_3,$$render=>{if($errors().avatarUrl&&$touched().avatarUrl)$$render(consequent_1)})}reset(div_4);reset(div_2);var div_5=sibling(div_2,2);var div_6=child(div_5);var input_1=sibling(child(div_6),2);remove_input_defaults(input_1);let classes_1;var node_4=sibling(input_1,2);{var consequent_2=$$anchor4=>{var p_1=root_5();var text_1=child(p_1,true);reset(p_1);template_effect(()=>set_text(text_1,$errors().userName));append($$anchor4,p_1)};if_block(node_4,$$render=>{if($errors().userName&&$touched().userName)$$render(consequent_2)})}reset(div_6);var div_7=sibling(div_6,2);var input_2=sibling(child(div_7),2);remove_input_defaults(input_2);let classes_2;var node_5=sibling(input_2,2);{var consequent_3=$$anchor4=>{var p_2=root_6();var text_2=child(p_2,true);reset(p_2);template_effect(()=>set_text(text_2,$errors().email));append($$anchor4,p_2)};if_block(node_5,$$render=>{if($errors().email&&$touched().email)$$render(consequent_3)})}reset(div_7);reset(div_5);var div_8=sibling(div_5,2);var div_9=child(div_8);var input_3=sibling(child(div_9),2);remove_input_defaults(input_3);let classes_3;var node_6=sibling(input_3,2);{var consequent_4=$$anchor4=>{var p_3=root_7();var text_3=child(p_3,true);reset(p_3);template_effect(()=>set_text(text_3,$errors().firstName));append($$anchor4,p_3)};if_block(node_6,$$render=>{if($errors().firstName&&$touched().firstName)$$render(consequent_4)})}reset(div_9);var div_10=sibling(div_9,2);var input_4=sibling(child(div_10),2);remove_input_defaults(input_4);let classes_4;var node_7=sibling(input_4,2);{var consequent_5=$$anchor4=>{var p_4=root_8();var text_4=child(p_4,true);reset(p_4);template_effect(()=>set_text(text_4,$errors().lastName));append($$anchor4,p_4)};if_block(node_7,$$render=>{if($errors().lastName&&$touched().lastName)$$render(consequent_5)})}reset(div_10);reset(div_8);var div_11=sibling(div_8,2);var input_5=sibling(child(div_11),2);remove_input_defaults(input_5);let classes_5;var node_8=sibling(input_5,2);{var consequent_6=$$anchor4=>{var p_5=root_9();var text_5=child(p_5,true);reset(p_5);template_effect(()=>set_text(text_5,$errors().website));append($$anchor4,p_5)};if_block(node_8,$$render=>{if($errors().website&&$touched().website)$$render(consequent_6)})}reset(div_11);var div_12=sibling(div_11,2);var textarea=sibling(child(div_12),2);remove_textarea_child(textarea);let classes_6;var node_9=sibling(textarea,2);{var consequent_7=$$anchor4=>{var p_6=root_10();var text_6=child(p_6,true);reset(p_6);template_effect(()=>set_text(text_6,$errors().bio));append($$anchor4,p_6)};if_block(node_9,$$render=>{if($errors().bio&&$touched().bio)$$render(consequent_7)})}var p_7=sibling(node_9,2);var text_7=child(p_7);reset(p_7);reset(div_12);var node_10=sibling(div_12,2);{var consequent_8=$$anchor4=>{var div_13=root_11();var p_8=child(div_13);var text_8=child(p_8,true);reset(p_8);reset(div_13);template_effect(()=>set_text(text_8,get(error)));append($$anchor4,div_13)};if_block(node_10,$$render=>{if(get(error))$$render(consequent_8)})}var node_11=sibling(node_10,2);{var consequent_9=$$anchor4=>{var div_14=root_12();var p_9=child(div_14);var text_9=child(p_9,true);reset(p_9);reset(div_14);template_effect(()=>set_text(text_9,get(success)));append($$anchor4,div_14)};if_block(node_11,$$render=>{if(get(success))$$render(consequent_9)})}var div_15=sibling(node_11,2);var button=child(div_15);button.__click=[resetForm,profile,profileData,updateField];var div_16=sibling(button,2);var button_1=child(div_16);button_1.__click=handleClose;var button_2=sibling(button_1,2);var node_12=child(button_2);{var consequent_10=$$anchor4=>{var span=root_13();append($$anchor4,span)};var alternate_1=$$anchor4=>{var text_10=text("Save Changes");append($$anchor4,text_10)};if_block(node_12,$$render=>{if(get(isSaving))$$render(consequent_10);else $$render(alternate_1,false)})}reset(button_2);reset(div_16);reset(div_15);var node_13=sibling(div_15,2);{var consequent_11=$$anchor4=>{var div_17=root_15();var text_11=child(div_17);reset(div_17);template_effect($0=>set_text(text_11,`Last updated: ${$0??""}`),[()=>new Date(get(profile).updateDate).toLocaleString()]);append($$anchor4,div_17)};if_block(node_13,$$render=>{var _a;if((_a=get(profile))==null?void 0:_a.updateDate)$$render(consequent_11)})}reset(form_1);template_effect(($0,$1,$2,$3,$4,$5,$6)=>{classes=set_class(input,1,"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",null,classes,$0);classes_1=set_class(input_1,1,"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",null,classes_1,$1);classes_2=set_class(input_2,1,"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",null,classes_2,$2);classes_3=set_class(input_3,1,"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",null,classes_3,$3);classes_4=set_class(input_4,1,"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",null,classes_4,$4);classes_5=set_class(input_5,1,"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",null,classes_5,$5);classes_6=set_class(textarea,1,"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",null,classes_6,$6);set_text(text_7,`${($form().bio||"").length??""}/500 characters`);button.disabled=!get(hasChanges)||get(isSaving);button_1.disabled=get(isSaving);button_2.disabled=!$isValid()||!get(hasChanges)||get(isSaving)},[()=>({"border-red-500":$errors().avatarUrl&&$touched().avatarUrl}),()=>({"border-red-500":$errors().userName&&$touched().userName}),()=>({"border-red-500":$errors().email&&$touched().email}),()=>({"border-red-500":$errors().firstName&&$touched().firstName}),()=>({"border-red-500":$errors().lastName&&$touched().lastName}),()=>({"border-red-500":$errors().website&&$touched().website}),()=>({"border-red-500":$errors().bio&&$touched().bio})]);event("submit",form_1,handleFormSubmit);bind_value(input,()=>$form().avatarUrl,$$value=>store_mutate(form,untrack($form).avatarUrl=$$value,untrack($form)));bind_value(input_1,()=>$form().userName,$$value=>store_mutate(form,untrack($form).userName=$$value,untrack($form)));bind_value(input_2,()=>$form().email,$$value=>store_mutate(form,untrack($form).email=$$value,untrack($form)));bind_value(input_3,()=>$form().firstName,$$value=>store_mutate(form,untrack($form).firstName=$$value,untrack($form)));bind_value(input_4,()=>$form().lastName,$$value=>store_mutate(form,untrack($form).lastName=$$value,untrack($form)));bind_value(input_5,()=>$form().website,$$value=>store_mutate(form,untrack($form).website=$$value,untrack($form)));bind_value(textarea,()=>$form().bio,$$value=>store_mutate(form,untrack($form).bio=$$value,untrack($form)));append($$anchor3,form_1)};if_block(node_1,$$render=>{if(get(isLoading))$$render(consequent);else $$render(alternate,false)})}reset(div);append($$anchor2,div)}),$$slots:{default:true}})}var node_14=sibling(node,2);ErrorNoAction(node_14,{get value(){return get(errorValue)},title:"Profile Save Error",onClose:handleErrorClose,get show(){return get(showError)},set show($$value){set(showError,$$value,true)}});append($$anchor,fragment);var $$pop=pop({...legacy_api()});$$cleanup();return $$pop}delegate(["click"]);ConfirmLogout[FILENAME]="src/routes/preview2/lib/components/ConfirmLogout.svelte";function handleConfirm(_,onConfirm,dontShowAgain,show){onConfirm()(get(dontShowAgain));show(false)}function handleCancel(__1,onCancel,show){onCancel()();show(false)}var root_1$1=add_locations(from_html(`<div class="p-6"><div class="flex items-center mb-4"><div class="flex-shrink-0"><svg class="w-8 h-8 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.232 15.5c-.77.833.192 2.5 1.732 2.5z"></path></svg></div> <div class="ml-3"><p class="text-sm text-gray-600 dark:text-gray-300"> </p></div></div> <div class="mb-4"><label class="flex items-center"><input type="checkbox" class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"/> <span class="ml-2 text-sm text-gray-600 dark:text-gray-300">Don't show this confirmation next time</span></label></div> <div class="flex justify-end space-x-3"><button type="button" class="yakkl-btn-secondary"> </button> <button type="button" class="px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2"> </button></div></div>`),ConfirmLogout[FILENAME],[[28,1,[[29,2,[[30,3,[[31,4,[[32,5]]]]],[35,3,[[36,4]]]]],[41,2,[[42,3,[[43,4],[48,4]]]]],[54,2,[[55,3],[62,3]]]]]]);function ConfirmLogout($$anchor,$$props){check_target(new.target);push($$props,true,ConfirmLogout);var $$ownership_validator=create_ownership_validator($$props);let show=prop($$props,"show",15,false),title=prop($$props,"title",3,"Confirm Logout"),message=prop($$props,"message",3,"Are you sure you want to logout? This will lock your wallet and you will need to enter your password again."),rejectText=prop($$props,"rejectText",3,"Cancel"),confirmText=prop($$props,"confirmText",3,"Logout"),className=prop($$props,"className",3,"z-[999]"),onConfirm=prop($$props,"onConfirm",3,()=>{}),onCancel=prop($$props,"onCancel",3,()=>{show(false)});let dontShowAgain=tag(state(false),"dontShowAgain");{$$ownership_validator.binding("show",Modal$1,show);Modal$1($$anchor,{get title(){return title()},get className(){return className()},get show(){return show()},set show($$value){show($$value)},children:wrap_snippet(ConfirmLogout,($$anchor2,$$slotProps)=>{var div=root_1$1();var div_1=child(div);var div_2=sibling(child(div_1),2);var p=child(div_2);var text2=child(p,true);reset(p);reset(div_2);reset(div_1);var div_3=sibling(div_1,2);var label=child(div_3);var input=child(label);remove_input_defaults(input);next(2);reset(label);reset(div_3);var div_4=sibling(div_3,2);var button=child(div_4);button.__click=[handleCancel,onCancel,show];var text_1=child(button,true);reset(button);var button_1=sibling(button,2);button_1.__click=[handleConfirm,onConfirm,dontShowAgain,show];var text_2=child(button_1,true);reset(button_1);reset(div_4);reset(div);template_effect(()=>{set_text(text2,message());set_text(text_1,rejectText());set_text(text_2,confirmText())});bind_checked(input,()=>get(dontShowAgain),$$value=>set(dontShowAgain,$$value));append($$anchor2,div)}),$$slots:{default:true}})}return pop({...legacy_api()})}delegate(["click"]);_layout[FILENAME]="src/routes/preview2/+layout.svelte";var root_1=add_locations(from_html(`<div class="min-h-full flex items-center justify-center"><div class="text-center"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"></div> <p class="mt-4 text-gray-600 dark:text-gray-400">Loading wallet...</p></div></div>`),_layout[FILENAME],[[147,6,[[148,8,[[149,10],[150,10]]]]]]);var root_2=add_locations(from_html(`<div class="min-h-full pb-16"><!></div>`),_layout[FILENAME],[[154,6]]);var root_3=add_locations(from_html(`<!> <!>`,1),_layout[FILENAME],[]);var root=add_locations(from_html(`<div class="yakkl-body h-screen flex flex-col overflow-hidden"><!> <!> <main class="flex-1 overflow-y-auto overflow-x-hidden"><!></main> <div class="flex-shrink-0"><!></div> <!> <!> <!> <!></div>`),_layout[FILENAME],[[120,0,[[145,2],[161,2]]]]);function _layout($$anchor,$$props){check_target(new.target);push($$props,true,_layout);const[$$stores,$$cleanup]=setup_stores();const $currentAccount=()=>(validate_store(currentAccount,"currentAccount"),store_get(currentAccount,"$currentAccount",$$stores));const $currentChain=()=>(validate_store(currentChain,"currentChain"),store_get(currentChain,"$currentChain",$$stores));const $visibleChains=()=>(validate_store(visibleChains,"visibleChains"),store_get(visibleChains,"$visibleChains",$$stores));const $planStore=()=>(validate_store(planStore,"planStore"),store_get(planStore,"$planStore",$$stores));const $isModalOpen=()=>(validate_store(isModalOpen,"isModalOpen"),store_get(isModalOpen,"$isModalOpen",$$stores));let loading=tag(state(true),"loading");let showTestnets=false;let showSettings=tag(state(false),"showSettings");let showProfile=tag(state(false),"showProfile");let showLogoutConfirm=tag(state(false),"showLogoutConfirm");let account=tag(user_derived(()=>$currentAccount()||{address:"",ens:null}),"account");let selectedChain=tag(user_derived($currentChain),"selectedChain");let chains=tag(user_derived($visibleChains),"chains");let trialEnds=tag(user_derived(()=>$planStore().plan.trialEndsAt),"trialEnds");let planType=tag(user_derived(()=>$planStore().plan.type),"planType");let modalOpen=tag(user_derived($isModalOpen),"modalOpen");onMount(async()=>{set(loading,true);try{const{getSettings:getSettings2,syncStorageToStore:syncStorageToStore}=await __vitePreload(async()=>{const{getSettings:getSettings3,syncStorageToStore:syncStorageToStore2}=await import("../chunks/Cb2naUpm.js").then(n=>n.dg);return{getSettings:getSettings3,syncStorageToStore:syncStorageToStore2}},true?__vite__mapDeps([0,1,2,3,4,5]):void 0,import.meta.url);const settings=await getSettings2();if(settings&&!settings.isLocked&&settings.init){console.log("Layout: Syncing stores from persistent storage...");await syncStorageToStore();console.log("Layout: Stores synchronized")}await Promise.all([accountStore.loadAccounts(),chainStore.loadChains(),planStore.loadPlan()])}catch(error){console.error(...log_if_contains_state("error","Layout: Error initializing stores:",error))}set(loading,false)});function handleSwitchChain(chain){chainStore.switchChain(chain.chainId)}function handleManageAccount(){set(showProfile,true)}function handleSettings(){set(showSettings,true)}function handleTheme(){document.documentElement.classList.toggle("dark")}async function handleLogout(){const skipConfirmation=strict_equals(localStorage.getItem("yakkl:skip-logout-confirmation"),"true");if(skipConfirmation){await performLogout()}else{set(showLogoutConfirm,true)}}async function handleLogoutConfirm(dontShowAgain){if(dontShowAgain){localStorage.setItem("yakkl:skip-logout-confirmation","true")}await performLogout()}async function performLogout(){try{const{resetStores:resetStores,setMiscStore:setMiscStore,setYakklTokenDataCustomStorage:setYakklTokenDataCustomStorage,yakklTokenDataCustomStore:yakklTokenDataCustomStore}=await __vitePreload(async()=>{const{resetStores:resetStores2,setMiscStore:setMiscStore2,setYakklTokenDataCustomStorage:setYakklTokenDataCustomStorage2,yakklTokenDataCustomStore:yakklTokenDataCustomStore2}=await import("../chunks/Cb2naUpm.js").then(n=>n.dg);return{resetStores:resetStores2,setMiscStore:setMiscStore2,setYakklTokenDataCustomStorage:setYakklTokenDataCustomStorage2,yakklTokenDataCustomStore:yakklTokenDataCustomStore2}},true?__vite__mapDeps([0,1,2,3,4,5]):void 0,import.meta.url);const{setBadgeText:setBadgeText,setIconLock:setIconLock}=await __vitePreload(async()=>{const{setBadgeText:setBadgeText2,setIconLock:setIconLock2}=await import("../chunks/CnIbzB-6.js").then(n=>n.y);return{setBadgeText:setBadgeText2,setIconLock:setIconLock2}},true?__vite__mapDeps([6,4,1,0,2,3,5,7]):void 0,import.meta.url);const{removeTimers:removeTimers}=await __vitePreload(async()=>{const{removeTimers:removeTimers2}=await import("../chunks/CLRZcuwO.js");return{removeTimers:removeTimers2}},true?__vite__mapDeps([8,9,3,4,7,1]):void 0,import.meta.url);const{removeListeners:removeListeners}=await __vitePreload(async()=>{const{removeListeners:removeListeners2}=await import("../chunks/_ZitPk-8.js");return{removeListeners:removeListeners2}},true?__vite__mapDeps([10,11,1]):void 0,import.meta.url);const{setLocks:setLocks}=await __vitePreload(async()=>{const{setLocks:setLocks2}=await import("../chunks/AcHxiMn1.js");return{setLocks:setLocks2}},true?__vite__mapDeps([12,0,1,2,3,4,5]):void 0,import.meta.url);const{resetTokenDataStoreValues:resetTokenDataStoreValues}=await __vitePreload(async()=>{const{resetTokenDataStoreValues:resetTokenDataStoreValues2}=await import("../chunks/D8D6HWSa.js");return{resetTokenDataStoreValues:resetTokenDataStoreValues2}},true?__vite__mapDeps([13,0,1,2,3,4,5]):void 0,import.meta.url);const{stopActivityTracking:stopActivityTracking}=await __vitePreload(async()=>{const{stopActivityTracking:stopActivityTracking2}=await import("../chunks/DT3ZCMgr.js");return{stopActivityTracking:stopActivityTracking2}},true?__vite__mapDeps([14,15,4,0,1,2,3,5,16,7]):void 0,import.meta.url);const{log:log2}=await __vitePreload(async()=>{const{log:log3}=await import("../chunks/Cb2naUpm.js").then(n=>n.df);return{log:log3}},true?__vite__mapDeps([0,1,2,3,4,5]):void 0,import.meta.url);const{get:get2}=await __vitePreload(async()=>{const{get:get3}=await import("../chunks/BOosul_h.js").then(n=>n.i);return{get:get3}},true?__vite__mapDeps([5,3,4]):void 0,import.meta.url);await stopActivityTracking();await setBadgeText("");await setIconLock();await setLocks(true);removeTimers();removeListeners();setMiscStore("");resetTokenDataStoreValues();setYakklTokenDataCustomStorage(get2(yakklTokenDataCustomStore));resetStores();if(accountStore&&strict_equals(typeof accountStore.reset,"function")){accountStore.reset()}if(chainStore&&strict_equals(typeof chainStore.reset,"function")){chainStore.reset()}if(planStore&&strict_equals(typeof planStore.reset,"function")){planStore.reset()}else{console.warn("planStore.reset is not available, skipping plan store reset")}sessionStorage.removeItem("preview2-authenticated");console.log("Preview2: Logout completed successfully");window.location.href="/preview2/login"}catch(error){console.error(...log_if_contains_state("error","Preview2: Logout failed:",error));alert("Logout encountered an error. Please try again or refresh the extension.")}}var div=root();var node=child(div);Header(node,{link:"/preview2",get account(){return get(account)},get chains(){return get(chains)},get selectedChain(){return get(selectedChain)},showTestnets:showTestnets,onSwitchChain:handleSwitchChain,onManageAccount:handleManageAccount,onSettings:handleSettings,onTheme:handleTheme,onLogout:handleLogout,className:"flex-shrink-0"});var node_1=sibling(node,2);UpgradeBanner(node_1,{className:"flex-shrink-0",position:"inline",showOnBasic:true,showOnTrial:true});var main=sibling(node_1,2);var node_2=child(main);{var consequent=$$anchor2=>{var div_1=root_1();append($$anchor2,div_1)};var alternate=$$anchor2=>{var div_2=root_2();var node_3=child(div_2);snippet(node_3,()=>$$props.children??noop);reset(div_2);append($$anchor2,div_2)};if_block(node_2,$$render=>{if(get(loading))$$render(consequent);else $$render(alternate,false)})}reset(main);var div_3=sibling(main,2);var node_4=child(div_3);Footer(node_4,{get planType(){return get(planType)},get trialEnds(){return get(trialEnds)},appName:"YAKKL",className:""});reset(div_3);var node_5=sibling(div_3,2);{var consequent_3=$$anchor2=>{var fragment=root_3();var node_6=first_child(fragment);{var consequent_1=$$anchor3=>{DockLauncher($$anchor3,{className:"fixed bottom-12 left-4 z-50"})};if_block(node_6,$$render=>{if(canUseFeature("basic_features"))$$render(consequent_1)})}var node_7=sibling(node_6,2);{var consequent_2=$$anchor3=>{AIHelpButton($$anchor3,{className:"fixed bottom-12 right-4 z-50"})};if_block(node_7,$$render=>{if(canUseFeature("ai_assistant"))$$render(consequent_2)})}append($$anchor2,fragment)};if_block(node_5,$$render=>{if(!get(modalOpen))$$render(consequent_3)})}var node_8=sibling(node_5,2);Settings(node_8,{get show(){return get(showSettings)},set show($$value){set(showSettings,$$value,true)}});var node_9=sibling(node_8,2);Profile(node_9,{get show(){return get(showProfile)},set show($$value){set(showProfile,$$value,true)}});var node_10=sibling(node_9,2);ConfirmLogout(node_10,{onConfirm:handleLogoutConfirm,onCancel:()=>set(showLogoutConfirm,false),get show(){return get(showLogoutConfirm)},set show($$value){set(showLogoutConfirm,$$value,true)}});reset(div);append($$anchor,div);var $$pop=pop({...legacy_api()});$$cleanup();return $$pop}export{_layout as component};
//# sourceMappingURL=15.Dv0cwyo8.js.map
