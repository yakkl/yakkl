{"version":3,"file":"3.BBKjDZX7.js","sources":["../../../../../../src/routes/(sidepanel)/+layout.svelte"],"sourcesContent":["<!-- File: src/routes/(sidepanel)/+layout.svelte -->\n<script lang=\"ts\">\n\timport { onMount } from 'svelte';\n\timport { browserSvelte, browser_ext } from '$lib/common/environment';\n\timport { log } from '$lib/common/logger-wrapper';\n\timport { initializeUiContext } from '$lib/common/messaging';\n\timport TrialCountdown from '$lib/components/TrialCountdown.svelte';\n\timport { modal, modalName } from '$lib/common/stores/modal';\n\timport Upgrade from '$lib/components/Upgrade.svelte';\n\n\tinterface Props {\n\t\tchildren?: import('svelte').Snippet;\n\t}\n\n\tlet { children }: Props = $props();\n\n\tonMount(async () => {\n\t\ttry {\n\t\t\tlog.debug('+layout.svelte (sidepanel level) - onMount');\n\n\t\t\tif (browser_ext) {\n\t\t\t\t// Initialize UI context but explicitly mark as sidepanel (non-protected)\n\t\t\t\tawait initializeUiContext(browser_ext, 'sidepanel');\n\t\t\t\tlog.info('Sidepanel initialized - no idle protection enabled');\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tlog.error('+layout.svelte (sidepanel level) - onMount:', false, error);\n\t\t}\n\t});\n</script>\n\n<!-- Sidepanel layout - no idle management needed -->\n<main class=\"w-full h-screen\">\n\t{@render children?.()}\n</main>\n\n<TrialCountdown />\n<Upgrade\n\tshow={$modal && $modalName === 'upgrade'}\n\tonClose={() => {\n\t\t// Always close modal when upgrade closes\n\t\tmodal.set(false);\n\t\tmodalName.set(null);\n\t\t// Force state reset with a small delay\n\t\tsetTimeout(() => {\n\t\t\tmodal.set(false);\n\t\t\tmodalName.set(null);\n\t\t}, 10);\n\t}}\n\tonCancel={() => {\n\t\t// Always close modal when upgrade cancels\n\t\tmodal.set(false);\n\t\tmodalName.set(null);\n\t\t// Force state reset with a small delay\n\t\tsetTimeout(() => {\n\t\t\tmodal.set(false);\n\t\t\tmodalName.set(null);\n\t\t}, 10);\n\t}}\n/>\n"],"names":["onMount","async","log","debug","browser_ext","initializeUiContext","info","error","$modal","$.strict_equals","$modalName","onClose","modal","set","modalName","setTimeout","onCancel"],"mappings":"q0CAgBCA,QAAoBC,UACf,IACHC,IAAIC,MAAM,iDAENC,YAAa,OAEVC,oBAAoBD,YAAa,aACvCF,IAAII,KAAK,qDACV,CACD,OAASC,OACJL,IAAAK,MAAM,8CAA+C,MAAOA,MACjE,qPAWKC,UAAMC,cAAIC,aAAe,+DAChBC,QAAA,KAEdC,MAAMC,IAAI,OACVC,UAAUD,IAAI,MAEdE,WAAiB,KAChBH,MAAMC,IAAI,OACVC,UAAUD,IAAI,OACZ,KAEYG,SAAA,KAEfJ,MAAMC,IAAI,OACVC,UAAUD,IAAI,MAEdE,WAAiB,KAChBH,MAAMC,IAAI,OACVC,UAAUD,IAAI,OACZ"}