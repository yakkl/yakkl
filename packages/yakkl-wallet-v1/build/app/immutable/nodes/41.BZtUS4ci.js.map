{"version":3,"file":"41.BZtUS4ci.js","sources":["../../../../../../src/lib/components/CtaPopup.svelte"],"sourcesContent":["<script lang=\"ts\">\n\timport { fade } from 'svelte/transition';\n\timport { onMount } from 'svelte';\n\n\tlet popupActive = $state(false);\n\tlet loadedAt: Date | null = null;\n\n\tinterface Props {\n\t\tstorageKey?: string;\n\t\tchildren?: import('svelte').Snippet;\n\t}\n\n\tlet { storageKey = 'popup.fired', children }: Props = $props();\n\n\tonMount(() => {\n\t\tloadedAt = new Date();\n\t});\n\n\tfunction showPopup() {\n\t\tpopupActive = true;\n\t\twindow.localStorage.setItem(storageKey, new Date().toISOString());\n\t}\n\n\tfunction hidePopup() {\n\t\tpopupActive = false;\n\t}\n\n\tfunction isPending() {\n\t\tif (!loadedAt) return true;\n\n\t\tconst now = Date.now();\n\t\t// console.log(now - loadedAt.getDate());\n\t\treturn now - loadedAt.getTime() < 10_000; // ready after 10 seconds\n\t}\n\n\tfunction isAlreadyFired() {\n\t\tconst alreadyFired = window.localStorage.getItem(storageKey);\n\t\tif (!alreadyFired) return false;\n\n\t\tconst now = Date.now();\n\t\tconst then = Date.parse(alreadyFired);\n\t\tconst oneDayAgo = 1000 * 60 * 60 * 24;\n\n\t\treturn now - then < oneDayAgo; // prompted 24 hours ago\n\t}\n\n\tfunction handleMouseLeave(e: MouseEvent) {\n\t\tif (isAlreadyFired() || isPending() || e.clientY > 200) return;\n\n\t\tshowPopup();\n\t}\n</script>\n\n<svelte:body onmouseleave={handleMouseLeave} />\n\n{#if popupActive}\n\t<div\n\t\ttransition:fade\n\t\tclass=\"fixed inset-0 bg-base-200 bg-opacity-95 overflow-y-auto h-full w-full z-20 flex\n\n  justify-center items-center\"\n\t>\n\t\t{@render children?.()}\n\n\t\t<!-- Pin to top right corner -->\n\n\t\t<div class=\"absolute top-6 right-6 h-16 w-16\">\n\t\t\t<button class=\"btn !btn-circle btn-outline\" onclick={hidePopup}>\n\t\t\t\t<!-- Heroicons close button -->\n\n\t\t\t\t<svg\n\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\tclass=\"h-6 w-6\"\n\t\t\t\t\tfill=\"none\"\n\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t>\n\t\t\t\t\t<path\n\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\tstroke-width=\"2\"\n\t\t\t\t\t\td=\"M6 18L18 6M6 6l12 12\"\n\t\t\t\t\t/>\n\t\t\t\t</svg>\n\t\t\t</button>\n\t\t</div>\n\t</div>\n{/if}\n"],"names":["hidePopup","_","popupActive","$.tag","$.state","loadedAt","storageKey","$.prop","$$props","onMount","Date","showPopup","window","localStorage","setItem","toISOString","isPending","now","getTime","isAlreadyFired","alreadyFired","getItem","then","parse","oneDayAgo","handleMouseLeave","e","clientY","$$render","consequent"],"mappings":"kwBAuBUA,UAAYC,EAAAC,iBACpBA,YAAc,MACf,+oBArBI,IAAAA,YAAAC,IAAAC,MAAqB,OAAK,mBAC1BC,SAAwB,SAOtBC,WAAaC,KAAAC,QAAA,aAAA,EAAA,eAEnBC,QAAc,KACbJ,aAAeK,gBAGPC,gBACRT,YAAc,MACPU,OAAAC,aAAaC,QAAQR,kBAAgBI,MAAOK,cACpD,UAMSC,gBACHX,SAAiB,OAAA,KAEhB,MAAAY,IAAMP,KAAKO,MAEV,OAAAA,IAAMZ,SAASa,UAAY,GACnC,UAESC,uBACFC,aAAeR,OAAOC,aAAaQ,QAAQf,kBAC5Cc,aAAqB,OAAA,MAEpB,MAAAH,IAAMP,KAAKO,MACX,MAAAK,KAAOZ,KAAKa,MAAMH,cAClB,MAAAI,UAAY,IAAO,GAAK,GAAK,GAE5B,OAAAP,IAAMK,KAAOE,SACrB,CAES,SAAAC,iBAAiBC,MACrBP,kBAAoBH,aAAeU,EAAEC,QAAU,IAAA,OAEnDhB,WACD,0DAG0Bc,qOAc6BzB,UAASE,uHAZ5DA,aAAW0B,SAAAC"}