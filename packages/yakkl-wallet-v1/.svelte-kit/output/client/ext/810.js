"use strict";(self["webpackChunkyakkl_wallet"]=self["webpackChunkyakkl_wallet"]||[]).push([[810],{2406:(e,t,r)=>{r.d(t,{r:()=>n});const n="providers/5.7.2"},3810:(e,t,r)=>{r.r(t);r.d(t,{AlchemyProvider:()=>AlchemyProvider});var n=r(7590);var o=r(9187);var i=r(9854);var s=r(8654);const a=100;const l=10;class RequestBatcher{constructor(e,t=a){this.sendBatchFn=e;this.maxBatchSize=t;this.pendingBatch=[]}enqueueRequest(e){return(0,n._)(this,void 0,void 0,function*(){const t={request:e,resolve:undefined,reject:undefined};const r=new Promise((e,r)=>{t.resolve=e;t.reject=r});this.pendingBatch.push(t);if(this.pendingBatch.length===this.maxBatchSize){void this.sendBatchRequest()}else if(!this.pendingBatchTimer){this.pendingBatchTimer=setTimeout(()=>this.sendBatchRequest(),l)}return r})}sendBatchRequest(){return(0,n._)(this,void 0,void 0,function*(){const e=this.pendingBatch;this.pendingBatch=[];if(this.pendingBatchTimer){clearTimeout(this.pendingBatchTimer);this.pendingBatchTimer=undefined}const t=e.map(e=>e.request);return this.sendBatchFn(t).then(t=>{e.forEach((e,r)=>{const n=t[r];if(n.error){const t=new Error(n.error.message);t.code=n.error.code;t.data=n.error.data;e.reject(t)}else{e.resolve(n.result)}})},t=>{e.forEach(e=>{e.reject(t)})})})}}class AlchemyProvider extends i.F{constructor(e){const t=AlchemyProvider.getApiKey(e.apiKey);const r=AlchemyProvider.getAlchemyNetwork(e.network);let o=AlchemyProvider.getAlchemyConnectionInfo(r,t,"http");if(e.url!==undefined){o.url=e.url}o.throttleLimit=e.maxRetries;if(e.connectionInfoOverrides){o=Object.assign(Object.assign({},o),e.connectionInfoOverrides)}const i=n.E[r];if(!i){throw new Error(`Unsupported network: ${r}`)}super(o,i);this.apiKey=e.apiKey;this.maxRetries=e.maxRetries;this.batchRequests=e.batchRequests;const a=Object.assign(Object.assign({},this.connection),{headers:Object.assign(Object.assign({},this.connection.headers),{"Alchemy-Ethers-Sdk-Method":"batchSend"})});const sendBatchFn=e=>(0,s.x6)(a,JSON.stringify(e));this.batcher=new RequestBatcher(sendBatchFn);this.modifyFormatter()}static getApiKey(e){if(e==null){return n.D}if(e&&typeof e!=="string"){throw new Error(`Invalid apiKey '${e}' provided. apiKey must be a string.`)}return e}static getNetwork(e){if(typeof e==="string"&&e in n.C){return n.C[e]}return(0,o.N)(e)}static getAlchemyNetwork(e){if(e===undefined){return n.a}if(typeof e==="number"){throw new Error(`Invalid network '${e}' provided. Network must be a string.`)}const t=Object.values(n.N).includes(e);if(!t){throw new Error(`Invalid network '${e}' provided. Network must be one of: `+`${Object.values(n.N).join(", ")}.`)}return e}static getAlchemyConnectionInfo(e,t,r){const o=r==="http"?(0,n.g)(e,t):(0,n.b)(e,t);return{headers:n.I?{"Alchemy-Ethers-Sdk-Version":n.V}:{"Alchemy-Ethers-Sdk-Version":n.V,"Accept-Encoding":"gzip"},allowGzip:true,url:o}}detectNetwork(){const e=Object.create(null,{detectNetwork:{get:()=>super.detectNetwork}});return(0,n._)(this,void 0,void 0,function*(){let t=this.network;if(t==null){t=yield e.detectNetwork.call(this);if(!t){throw new Error("No network detected")}}return t})}_startPending(){(0,n.l)("WARNING: Alchemy Provider does not support pending filters")}isCommunityResource(){return this.apiKey===n.D}send(e,t){return this._send(e,t,"send")}_send(e,t,r){const o={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};const i=Object.assign({},this.connection);i.headers["Alchemy-Ethers-Sdk-Method"]=r;if(this.batchRequests){return this.batcher.enqueueRequest(o)}this.emit("debug",{action:"request",request:(0,n.d)(o),provider:this});const a=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(a&&this._cache[e]){return this._cache[e]}const l=(0,s.x6)(this.connection,JSON.stringify(o),getResult).then(e=>{this.emit("debug",{action:"response",request:o,response:e,provider:this});return e},e=>{this.emit("debug",{action:"response",error:e,request:o,provider:this});throw e});if(a){this._cache[e]=l;setTimeout(()=>{this._cache[e]=null},0)}return l}modifyFormatter(){this.formatter.formats["receiptLog"]["removed"]=e=>{if(typeof e==="boolean"){return e}return undefined}}}function getResult(e){if(e.error){const t=new Error(e.error.message);t.code=e.error.code;t.data=e.error.data;throw t}return e.result}},5994:e=>{var t="qpzry9x8gf2tvdw0s3jn54khce6mua7l";var r={};for(var n=0;n<t.length;n++){var o=t.charAt(n);if(r[o]!==undefined)throw new TypeError(o+" is ambiguous");r[o]=n}function polymodStep(e){var t=e>>25;return(e&33554431)<<5^-(t>>0&1)&996825010^-(t>>1&1)&642813549^-(t>>2&1)&513874426^-(t>>3&1)&1027748829^-(t>>4&1)&705979059}function prefixChk(e){var t=1;for(var r=0;r<e.length;++r){var n=e.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+e+")";t=polymodStep(t)^n>>5}t=polymodStep(t);for(r=0;r<e.length;++r){var o=e.charCodeAt(r);t=polymodStep(t)^o&31}return t}function encode(e,r,n){n=n||90;if(e.length+7+r.length>n)throw new TypeError("Exceeds length limit");e=e.toLowerCase();var o=prefixChk(e);if(typeof o==="string")throw new Error(o);var i=e+"1";for(var s=0;s<r.length;++s){var a=r[s];if(a>>5!==0)throw new Error("Non 5-bit word");o=polymodStep(o)^a;i+=t.charAt(a)}for(s=0;s<6;++s){o=polymodStep(o)}o^=1;for(s=0;s<6;++s){var l=o>>(5-s)*5&31;i+=t.charAt(l)}return i}function __decode(e,t){t=t||90;if(e.length<8)return e+" too short";if(e.length>t)return"Exceeds length limit";var n=e.toLowerCase();var o=e.toUpperCase();if(e!==n&&e!==o)return"Mixed-case string "+e;e=n;var i=e.lastIndexOf("1");if(i===-1)return"No separator character for "+e;if(i===0)return"Missing prefix for "+e;var s=e.slice(0,i);var a=e.slice(i+1);if(a.length<6)return"Data too short";var l=prefixChk(s);if(typeof l==="string")return l;var c=[];for(var u=0;u<a.length;++u){var h=a.charAt(u);var d=r[h];if(d===undefined)return"Unknown character "+h;l=polymodStep(l)^d;if(u+6>=a.length)continue;c.push(d)}if(l!==1)return"Invalid checksum for "+e;return{prefix:s,words:c}}function decodeUnsafe(){var e=__decode.apply(null,arguments);if(typeof e==="object")return e}function decode(e){var t=__decode.apply(null,arguments);if(typeof t==="object")return t;throw new Error(t)}function convert(e,t,r,n){var o=0;var i=0;var s=(1<<r)-1;var a=[];for(var l=0;l<e.length;++l){o=o<<t|e[l];i+=t;while(i>=r){i-=r;a.push(o>>i&s)}}if(n){if(i>0){a.push(o<<r-i&s)}}else{if(i>=t)return"Excess padding";if(o<<r-i&s)return"Non-zero padding"}return a}function toWordsUnsafe(e){var t=convert(e,8,5,true);if(Array.isArray(t))return t}function toWords(e){var t=convert(e,8,5,true);if(Array.isArray(t))return t;throw new Error(t)}function fromWordsUnsafe(e){var t=convert(e,5,8,false);if(Array.isArray(t))return t}function fromWords(e){var t=convert(e,5,8,false);if(Array.isArray(t))return t;throw new Error(t)}e.exports={decodeUnsafe,decode,encode,toWordsUnsafe,toWords,fromWordsUnsafe,fromWords}},9187:(e,t,r)=>{r.d(t,{N:()=>getNetwork});var n=r(7035);const o="networks/5.7.1";const i=new n.Vy(o);function isRenetworkable(e){return e&&typeof e.renetwork==="function"}function ethDefaultProvider(e){const func=function(t,r){if(r==null){r={}}const n=[];if(t.InfuraProvider&&r.infura!=="-"){try{n.push(new t.InfuraProvider(e,r.infura))}catch(e){}}if(t.EtherscanProvider&&r.etherscan!=="-"){try{n.push(new t.EtherscanProvider(e,r.etherscan))}catch(e){}}if(t.AlchemyProvider&&r.alchemy!=="-"){try{n.push(new t.AlchemyProvider(e,r.alchemy))}catch(e){}}if(t.PocketProvider&&r.pocket!=="-"){const o=["goerli","ropsten","rinkeby","sepolia"];try{const i=new t.PocketProvider(e,r.pocket);if(i.network&&o.indexOf(i.network.name)===-1){n.push(i)}}catch(e){}}if(t.CloudflareProvider&&r.cloudflare!=="-"){try{n.push(new t.CloudflareProvider(e))}catch(e){}}if(t.AnkrProvider&&r.ankr!=="-"){try{const o=["ropsten"];const i=new t.AnkrProvider(e,r.ankr);if(i.network&&o.indexOf(i.network.name)===-1){n.push(i)}}catch(e){}}if(n.length===0){return null}if(t.FallbackProvider){let o=1;if(r.quorum!=null){o=r.quorum}else if(e==="homestead"){o=2}return new t.FallbackProvider(n,o)}return n[0]};func.renetwork=function(e){return ethDefaultProvider(e)};return func}function etcDefaultProvider(e,t){const func=function(r,n){if(r.JsonRpcProvider){return new r.JsonRpcProvider(e,t)}return null};func.renetwork=function(t){return etcDefaultProvider(e,t)};return func}const s={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:ethDefaultProvider("homestead")};const a={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:ethDefaultProvider("ropsten")};const l={chainId:63,name:"classicMordor",_defaultProvider:etcDefaultProvider("https://www.ethercluster.com/mordor","classicMordor")};const c={unspecified:{chainId:0,name:"unspecified"},homestead:s,mainnet:s,morden:{chainId:2,name:"morden"},ropsten:a,testnet:a,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:ethDefaultProvider("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:ethDefaultProvider("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:ethDefaultProvider("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,name:"sepolia",_defaultProvider:ethDefaultProvider("sepolia")},classic:{chainId:61,name:"classic",_defaultProvider:etcDefaultProvider("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:l,classicTestnet:l,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:etcDefaultProvider("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:ethDefaultProvider("matic")},maticmum:{chainId:80001,name:"maticmum"},optimism:{chainId:10,name:"optimism",_defaultProvider:ethDefaultProvider("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function getNetwork(e){if(e==null){return null}if(typeof e==="number"){for(const t in c){const r=c[t];if(r.chainId===e){return{name:r.name,chainId:r.chainId,ensAddress:r.ensAddress||null,_defaultProvider:r._defaultProvider||null}}}return{chainId:e,name:"unknown"}}if(typeof e==="string"){const t=c[e];if(t==null){return null}return{name:t.name,chainId:t.chainId,ensAddress:t.ensAddress,_defaultProvider:t._defaultProvider||null}}const t=c[e.name];if(!t){if(typeof e.chainId!=="number"){i.throwArgumentError("invalid network chainId","network",e)}return e}if(e.chainId!==0&&e.chainId!==t.chainId){i.throwArgumentError("network chainId mismatch","network",e)}let r=e._defaultProvider||null;if(r==null&&t._defaultProvider){if(isRenetworkable(t._defaultProvider)){r=t._defaultProvider.renetwork(e)}else{r=t._defaultProvider}}return{name:e.name,chainId:t.chainId,ensAddress:e.ensAddress||t.ensAddress||null,_defaultProvider:r}}},9854:(e,t,r)=>{r.d(t,{F:()=>JsonRpcProvider});var n=r(1975);var o=r(2834);var i=r(1519);var s=r(2854);var a=r(877);var l=r(6055);var c=r(1512);var u=r(7192);const h=null&&BigNumber.from(-1);const d=u.gH.from(0);const f=null&&BigNumber.from(1);const m=null&&BigNumber.from(2);const g=null&&BigNumber.from("1000000000000000000");const A=null&&BigNumber.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const p=null&&BigNumber.from("-0x8000000000000000000000000000000000000000000000000000000000000000");const w=null&&BigNumber.from("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");var y=r(6456);var v=r(8804);var k=r(3013);var b=r(7035);const E="transactions/5.7.0";const N=new b.Vy(E);var B;(function(e){e[e["legacy"]=0]="legacy";e[e["eip2930"]=1]="eip2930";e[e["eip1559"]=2]="eip1559"})(B||(B={}));function handleAddress(e){if(e==="0x"){return null}return(0,c.bv)(e)}function handleNumber(e){if(e==="0x"){return d}return o.gH.from(e)}const _=[{name:"nonce",maxLength:32,numeric:true},{name:"gasPrice",maxLength:32,numeric:true},{name:"gasLimit",maxLength:32,numeric:true},{name:"to",length:20},{name:"value",maxLength:32,numeric:true},{name:"data"}];const C={chainId:true,data:true,gasLimit:true,gasPrice:true,nonce:true,to:true,type:true,value:true};function computeAddress(e){const t=(0,k.uN)(e);return(0,c.bv)((0,i.Ab)((0,y.S)((0,i.Ab)(t,1)),12))}function recoverAddress(e,t){return computeAddress((0,k.jL)((0,i.k9)(e),t))}function formatNumber(e,t){const r=(0,i.gr)(o.gH.from(e).toHexString());if(r.length>32){N.throwArgumentError("invalid length for "+t,"transaction:"+t,e)}return r}function accessSetify(e,t){return{address:(0,c.bv)(e),storageKeys:(t||[]).map((t,r)=>{if((0,i.cm)(t)!==32){N.throwArgumentError("invalid access list storageKey",`accessList[${e}:${r}]`,t)}return t.toLowerCase()})}}function accessListify(e){if(Array.isArray(e)){return e.map((e,t)=>{if(Array.isArray(e)){if(e.length>2){N.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${t}]`,e)}return accessSetify(e[0],e[1])}return accessSetify(e.address,e.storageKeys)})}const t=Object.keys(e).map(t=>{const r=e[t].reduce((e,t)=>{e[t]=true;return e},{});return accessSetify(t,Object.keys(r).sort())});t.sort((e,t)=>e.address.localeCompare(t.address));return t}function formatAccessList(e){return accessListify(e).map(e=>[e.address,e.storageKeys])}function _serializeEip1559(e,t){if(e.gasPrice!=null){const t=o.gH.from(e.gasPrice);const r=o.gH.from(e.maxFeePerGas||0);if(!t.eq(r)){N.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:t,maxFeePerGas:r})}}const r=[formatNumber(e.chainId||0,"chainId"),formatNumber(e.nonce||0,"nonce"),formatNumber(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),formatNumber(e.maxFeePerGas||0,"maxFeePerGas"),formatNumber(e.gasLimit||0,"gasLimit"),e.to!=null?(0,c.bv)(e.to):"0x",formatNumber(e.value||0,"value"),e.data||"0x",formatAccessList(e.accessList||[])];if(t){const e=(0,i.Pc)(t);r.push(formatNumber(e.recoveryParam,"recoveryParam"));r.push((0,i.gr)(e.r));r.push((0,i.gr)(e.s))}return(0,i.qn)(["0x02",v.l(r)])}function _serializeEip2930(e,t){const r=[formatNumber(e.chainId||0,"chainId"),formatNumber(e.nonce||0,"nonce"),formatNumber(e.gasPrice||0,"gasPrice"),formatNumber(e.gasLimit||0,"gasLimit"),e.to!=null?(0,c.bv)(e.to):"0x",formatNumber(e.value||0,"value"),e.data||"0x",formatAccessList(e.accessList||[])];if(t){const e=(0,i.Pc)(t);r.push(formatNumber(e.recoveryParam,"recoveryParam"));r.push((0,i.gr)(e.r));r.push((0,i.gr)(e.s))}return(0,i.qn)(["0x01",v.l(r)])}function _serialize(e,t){checkProperties(e,C);const r=[];_.forEach(function(t){let n=e[t.name]||[];const o={};if(t.numeric){o.hexPad="left"}n=arrayify(hexlify(n,o));if(t.length&&n.length!==t.length&&n.length>0){N.throwArgumentError("invalid length for "+t.name,"transaction:"+t.name,n)}if(t.maxLength){n=stripZeros(n);if(n.length>t.maxLength){N.throwArgumentError("invalid length for "+t.name,"transaction:"+t.name,n)}}r.push(hexlify(n))});let n=0;if(e.chainId!=null){n=e.chainId;if(typeof n!=="number"){N.throwArgumentError("invalid transaction.chainId","transaction",e)}}else if(t&&!isBytesLike(t)&&t.v>28){n=Math.floor((t.v-35)/2)}if(n!==0){r.push(hexlify(n));r.push("0x");r.push("0x")}if(!t){return RLP.encode(r)}const o=splitSignature(t);let i=27+o.recoveryParam;if(n!==0){r.pop();r.pop();r.pop();i+=n*2+8;if(o.v>28&&o.v!==i){N.throwArgumentError("transaction.chainId/signature.v mismatch","signature",t)}}else if(o.v!==i){N.throwArgumentError("transaction.chainId/signature.v mismatch","signature",t)}r.push(hexlify(i));r.push(stripZeros(arrayify(o.r)));r.push(stripZeros(arrayify(o.s)));return RLP.encode(r)}function serialize(e,t){if(e.type==null||e.type===0){if(e.accessList!=null){N.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",e)}return _serialize(e,t)}switch(e.type){case 1:return _serializeEip2930(e,t);case 2:return _serializeEip1559(e,t);default:break}return N.throwError(`unsupported transaction type: ${e.type}`,Logger.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:e.type})}function _parseEipSignature(e,t,r){try{const r=handleNumber(t[0]).toNumber();if(r!==0&&r!==1){throw new Error("bad recid")}e.v=r}catch(e){N.throwArgumentError("invalid v for transaction type: 1","v",t[0])}e.r=(0,i.bj)(t[1],32);e.s=(0,i.bj)(t[2],32);try{const t=(0,y.S)(r(e));e.from=recoverAddress(t,{r:e.r,s:e.s,recoveryParam:e.v})}catch(e){}}function _parseEip1559(e){const t=v.D(e.slice(1));if(t.length!==9&&t.length!==12){N.throwArgumentError("invalid component count for transaction type: 2","payload",(0,i.c$)(e))}const r=handleNumber(t[2]);const n=handleNumber(t[3]);const o={type:2,chainId:handleNumber(t[0]).toNumber(),nonce:handleNumber(t[1]).toNumber(),maxPriorityFeePerGas:r,maxFeePerGas:n,gasPrice:null,gasLimit:handleNumber(t[4]),to:handleAddress(t[5]),value:handleNumber(t[6]),data:t[7],accessList:accessListify(t[8])};if(t.length===9){return o}o.hash=(0,y.S)(e);_parseEipSignature(o,t.slice(9),_serializeEip1559);return o}function _parseEip2930(e){const t=v.D(e.slice(1));if(t.length!==8&&t.length!==11){N.throwArgumentError("invalid component count for transaction type: 1","payload",(0,i.c$)(e))}const r={type:1,chainId:handleNumber(t[0]).toNumber(),nonce:handleNumber(t[1]).toNumber(),gasPrice:handleNumber(t[2]),gasLimit:handleNumber(t[3]),to:handleAddress(t[4]),value:handleNumber(t[5]),data:t[6],accessList:accessListify(t[7])};if(t.length===8){return r}r.hash=(0,y.S)(e);_parseEipSignature(r,t.slice(8),_serializeEip2930);return r}function _parse(e){const t=v.D(e);if(t.length!==9&&t.length!==6){N.throwArgumentError("invalid raw transaction","rawTransaction",e)}const r={nonce:handleNumber(t[0]).toNumber(),gasPrice:handleNumber(t[1]),gasLimit:handleNumber(t[2]),to:handleAddress(t[3]),value:handleNumber(t[4]),data:t[5],chainId:0};if(t.length===6){return r}try{r.v=o.gH.from(t[6]).toNumber()}catch(e){return r}r.r=(0,i.bj)(t[7],32);r.s=(0,i.bj)(t[8],32);if(o.gH.from(r.r).isZero()&&o.gH.from(r.s).isZero()){r.chainId=r.v;r.v=0}else{r.chainId=Math.floor((r.v-35)/2);if(r.chainId<0){r.chainId=0}let n=r.v-27;const o=t.slice(0,6);if(r.chainId!==0){o.push((0,i.c$)(r.chainId));o.push("0x");o.push("0x");n-=r.chainId*2+8}const s=(0,y.S)(v.l(o));try{r.from=recoverAddress(s,{r:(0,i.c$)(r.r),s:(0,i.c$)(r.s),recoveryParam:n})}catch(e){}r.hash=(0,y.S)(e)}r.type=null;return r}function parse(e){const t=(0,i.k9)(e);if(t[0]>127){return _parse(t)}switch(t[0]){case 1:return _parseEip2930(t);case 2:return _parseEip1559(t);default:break}return N.throwError(`unsupported transaction type: ${t[0]}`,b.Vy.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:t[0]})}var I=r(8654);var T=r(2406);var P=r(8095);var R=r(6859);function decode(e){e=atob(e);const t=[];for(let r=0;r<e.length;r++){t.push(e.charCodeAt(r))}return(0,R.k9)(t)}function encode(e){e=(0,R.k9)(e);let t="";for(let r=0;r<e.length;r++){t+=String.fromCharCode(e[r])}return btoa(t)}class BaseX{constructor(e){(0,a.yY)(this,"alphabet",e);(0,a.yY)(this,"base",e.length);(0,a.yY)(this,"_alphabetMap",{});(0,a.yY)(this,"_leader",e.charAt(0));for(let t=0;t<e.length;t++){this._alphabetMap[e.charAt(t)]=t}}encode(e){let t=(0,R.k9)(e);if(t.length===0){return""}let r=[0];for(let e=0;e<t.length;++e){let n=t[e];for(let e=0;e<r.length;++e){n+=r[e]<<8;r[e]=n%this.base;n=n/this.base|0}while(n>0){r.push(n%this.base);n=n/this.base|0}}let n="";for(let e=0;t[e]===0&&e<t.length-1;++e){n+=this._leader}for(let e=r.length-1;e>=0;--e){n+=this.alphabet[r[e]]}return n}decode(e){if(typeof e!=="string"){throw new TypeError("Expected String")}let t=[];if(e.length===0){return new Uint8Array(t)}t.push(0);for(let r=0;r<e.length;r++){let n=this._alphabetMap[e[r]];if(n===undefined){throw new Error("Non-base"+this.base+" character")}let o=n;for(let e=0;e<t.length;++e){o+=t[e]*this.base;t[e]=o&255;o>>=8}while(o>0){t.push(o&255);o>>=8}}for(let r=0;e[r]===this._leader&&r<e.length-1;++r){t.push(0)}return(0,R.k9)(new Uint8Array(t.reverse()))}}const x=new BaseX("abcdefghijklmnopqrstuvwxyz234567");const L=new BaseX("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");const F="0x0000000000000000000000000000000000000000000000000000000000000000";var O=r(3404);function flat(e,t){if(t==null){t=1}const r=[];const n=r.forEach;const flatDeep=function(e,t){n.call(e,function(e){if(t>0&&Array.isArray(e)){flatDeep(e,t-1)}else{r.push(e)}})};flatDeep(e,t);return r}function fromEntries(e){const t={};for(let r=0;r<e.length;r++){const n=e[r];t[n[0]]=n[1]}return t}function decode_arithmetic(e){let t=0;function u16(){return e[t++]<<8|e[t++]}let r=u16();let n=1;let o=[0,1];for(let e=1;e<r;e++){o.push(n+=u16())}let i=u16();let s=t;t+=i;let a=0;let l=0;function read_bit(){if(a==0){l=l<<8|e[t++];a=8}return l>>--a&1}const c=31;const u=Math.pow(2,c);const h=u>>>1;const d=h>>1;const f=u-1;let m=0;for(let e=0;e<c;e++)m=m<<1|read_bit();let g=[];let A=0;let p=u;while(true){let e=Math.floor(((m-A+1)*n-1)/p);let t=0;let i=r;while(i-t>1){let r=t+i>>>1;if(e<o[r]){i=r}else{t=r}}if(t==0)break;g.push(t);let s=A+Math.floor(p*o[t]/n);let a=A+Math.floor(p*o[t+1]/n)-1;while(((s^a)&h)==0){m=m<<1&f|read_bit();s=s<<1&f;a=a<<1&f|1}while(s&~a&d){m=m&h|m<<1&f>>>1|read_bit();s=s<<1^h;a=(a^h)<<1|h|1}A=s;p=1+a-s}let w=r-4;return g.map(t=>{switch(t-w){case 3:return w+65792+(e[s++]<<16|e[s++]<<8|e[s++]);case 2:return w+256+(e[s++]<<8|e[s++]);case 1:return w+e[s++];default:return t-1}})}function read_payload(e){let t=0;return()=>e[t++]}function read_compressed_payload(e){return read_payload(decode_arithmetic(e))}function signed(e){return e&1?~e>>1:e>>1}function read_counts(e,t){let r=Array(e);for(let n=0;n<e;n++)r[n]=1+t();return r}function read_ascending(e,t){let r=Array(e);for(let n=0,o=-1;n<e;n++)r[n]=o+=1+t();return r}function read_deltas(e,t){let r=Array(e);for(let n=0,o=0;n<e;n++)r[n]=o+=signed(t());return r}function read_member_array(e,t){let r=read_ascending(e(),e);let n=e();let o=read_ascending(n,e);let i=read_counts(n,e);for(let e=0;e<n;e++){for(let t=0;t<i[e];t++){r.push(o[e]+t)}}return t?r.map(e=>t[e]):r}function read_mapped_map(e){let t=[];while(true){let r=e();if(r==0)break;t.push(read_linear_table(r,e))}while(true){let r=e()-1;if(r<0)break;t.push(read_replacement_table(r,e))}return fromEntries(flat(t))}function read_zero_terminated_array(e){let t=[];while(true){let r=e();if(r==0)break;t.push(r)}return t}function read_transposed(e,t,r){let n=Array(e).fill(undefined).map(()=>[]);for(let o=0;o<t;o++){read_deltas(e,r).forEach((e,t)=>n[t].push(e))}return n}function read_linear_table(e,t){let r=1+t();let n=t();let o=read_zero_terminated_array(t);let i=read_transposed(o.length,1+e,t);return flat(i.map((e,t)=>{const i=e[0],s=e.slice(1);return Array(o[t]).fill(undefined).map((e,t)=>{let o=t*n;return[i+t*r,s.map(e=>e+o)]})}))}function read_replacement_table(e,t){let r=1+t();let n=read_transposed(r,1+e,t);return n.map(e=>[e[0],e.slice(1)])}function read_emoji_trie(e){let t=read_member_array(e).sort((e,t)=>e-t);return read();function read(){let r=[];while(true){let n=read_member_array(e,t);if(n.length==0)break;r.push({set:new Set(n),node:read()})}r.sort((e,t)=>t.set.size-e.set.size);let n=e();let o=n%3;n=n/3|0;let i=!!(n&1);n>>=1;let s=n==1;let a=n==2;return{branches:r,valid:o,fe0f:i,save:s,check:a}}}function getData(){return read_compressed_payload(decode("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"))}const D=getData();const S=new Set(read_member_array(D));const H=new Set(read_member_array(D));const U=read_mapped_map(D);const Q=read_emoji_trie(D);const Y=45;const M=95;function explode_cp(e){return(0,l.dg)(e)}function filter_fe0f(e){return e.filter(e=>e!=65039)}function ens_normalize_post_check(e){for(let t of e.split(".")){let e=explode_cp(t);try{for(let t=e.lastIndexOf(M)-1;t>=0;t--){if(e[t]!==M){throw new Error(`underscore only allowed at start`)}}if(e.length>=4&&e.every(e=>e<128)&&e[2]===Y&&e[3]===Y){throw new Error(`invalid label extension`)}}catch(e){throw new Error(`Invalid label "${t}": ${e.message}`)}}return e}function ens_normalize(e){return ens_normalize_post_check(normalize(e,filter_fe0f))}function normalize(e,t){let r=explode_cp(e).reverse();let n=[];while(r.length){let e=consume_emoji_reversed(r);if(e){n.push(...t(e));continue}let o=r.pop();if(S.has(o)){n.push(o);continue}if(H.has(o)){continue}let i=U[o];if(i){n.push(...i);continue}throw new Error(`Disallowed codepoint: 0x${o.toString(16).toUpperCase()}`)}return ens_normalize_post_check(nfc(String.fromCodePoint(...n)))}function nfc(e){return e.normalize("NFC")}function consume_emoji_reversed(e,t){var r;let n=Q;let o;let i;let s=[];let a=e.length;if(t)t.length=0;while(a){let l=e[--a];n=(r=n.branches.find(e=>e.set.has(l)))===null||r===void 0?void 0:r.node;if(!n)break;if(n.save){i=l}else if(n.check){if(l===i)break}s.push(l);if(n.fe0f){s.push(65039);if(a>0&&e[a-1]==65039)a--}if(n.valid){o=s.slice();if(n.valid==2)o.splice(1,1);if(t)t.push(...e.slice(a).reverse());e.length=a}}return o}const q=new b.Vy(O.r);const G=new Uint8Array(32);G.fill(0);function checkComponent(e){if(e.length===0){throw new Error("invalid ENS name; empty component")}return e}function ensNameSplit(e){const t=(0,l.YW)(ens_normalize(e));const r=[];if(e.length===0){return r}let n=0;for(let e=0;e<t.length;e++){const o=t[e];if(o===46){r.push(checkComponent(t.slice(n,e)));n=e+1}}if(n>=t.length){throw new Error("invalid ENS name; empty component")}r.push(checkComponent(t.slice(n)));return r}function ensNormalize(e){return ensNameSplit(e).map(e=>toUtf8String(e)).join(".")}function isValidName(e){try{return ensNameSplit(e).length!==0}catch(e){}return false}function namehash(e){if(typeof e!=="string"){q.throwArgumentError("invalid ENS name; not a string","name",e)}let t=G;const r=ensNameSplit(e);while(r.length){t=(0,y.S)((0,i.xW)([t,(0,y.S)(r.pop())]))}return(0,i.c$)(t)}function dnsEncode(e){return(0,i.c$)((0,i.xW)(ensNameSplit(e).map(e=>{if(e.length>63){throw new Error("invalid DNS encoded entry; length exceeds 63 bytes")}const t=new Uint8Array(e.length+1);t.set(e,1);t[0]=t.length-1;return t})))+"00"}var J=r(9187);var K=r(1631);var V=r.n(K);const z="sha2/5.7.0";const W=new b.Vy(z);function ripemd160(e){return"0x"+hash.ripemd160().update(arrayify(e)).digest("hex")}function sha256(e){return"0x"+V().sha256().update((0,R.k9)(e)).digest("hex")}function sha512(e){return"0x"+hash.sha512().update(arrayify(e)).digest("hex")}function computeHmac(e,t,r){if(!SupportedAlgorithm[e]){W.throwError("unsupported algorithm "+e,Logger.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:e})}return"0x"+hash.hmac(hash[e],arrayify(t)).update(arrayify(r)).digest("hex")}var j=r(5994);var X=r.n(j);const Z="0x0000000000000000000000000000000000000000";const $=new b.Vy(T.r);class Formatter{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={};const t=this.address.bind(this);const r=this.bigNumber.bind(this);const n=this.blockTag.bind(this);const o=this.data.bind(this);const i=this.hash.bind(this);const s=this.hex.bind(this);const l=this.number.bind(this);const c=this.type.bind(this);const strictData=e=>this.data(e,true);e.transaction={hash:i,type:c,accessList:Formatter.allowNull(this.accessList.bind(this),null),blockHash:Formatter.allowNull(i,null),blockNumber:Formatter.allowNull(l,null),transactionIndex:Formatter.allowNull(l,null),confirmations:Formatter.allowNull(l,null),from:t,gasPrice:Formatter.allowNull(r),maxPriorityFeePerGas:Formatter.allowNull(r),maxFeePerGas:Formatter.allowNull(r),gasLimit:r,to:Formatter.allowNull(t,null),value:r,nonce:l,data:o,r:Formatter.allowNull(this.uint256),s:Formatter.allowNull(this.uint256),v:Formatter.allowNull(l),creates:Formatter.allowNull(t,null),raw:Formatter.allowNull(o)};e.transactionRequest={from:Formatter.allowNull(t),nonce:Formatter.allowNull(l),gasLimit:Formatter.allowNull(r),gasPrice:Formatter.allowNull(r),maxPriorityFeePerGas:Formatter.allowNull(r),maxFeePerGas:Formatter.allowNull(r),to:Formatter.allowNull(t),value:Formatter.allowNull(r),data:Formatter.allowNull(strictData),type:Formatter.allowNull(l),accessList:Formatter.allowNull(this.accessList.bind(this),null)};e.receiptLog={transactionIndex:l,blockNumber:l,transactionHash:i,address:t,topics:Formatter.arrayOf(i),data:o,logIndex:l,blockHash:i};e.receipt={to:Formatter.allowNull(this.address,null),from:Formatter.allowNull(this.address,null),contractAddress:Formatter.allowNull(t,null),transactionIndex:l,root:Formatter.allowNull(s),gasUsed:r,logsBloom:Formatter.allowNull(o),blockHash:i,transactionHash:i,logs:Formatter.arrayOf(this.receiptLog.bind(this)),blockNumber:l,confirmations:Formatter.allowNull(l,null),cumulativeGasUsed:r,effectiveGasPrice:Formatter.allowNull(r),status:Formatter.allowNull(l),type:c};e.block={hash:Formatter.allowNull(i),parentHash:i,number:l,timestamp:l,nonce:Formatter.allowNull(s),difficulty:this.difficulty.bind(this),gasLimit:r,gasUsed:r,miner:Formatter.allowNull(t),extraData:o,transactions:Formatter.allowNull(Formatter.arrayOf(i)),baseFeePerGas:Formatter.allowNull(r)};e.blockWithTransactions=(0,a.Ic)(e.block);e.blockWithTransactions.transactions=Formatter.allowNull(Formatter.arrayOf(this.transactionResponse.bind(this)));e.filter={fromBlock:Formatter.allowNull(n,undefined),toBlock:Formatter.allowNull(n,undefined),blockHash:Formatter.allowNull(i,undefined),address:Formatter.allowNull(t,undefined),topics:Formatter.allowNull(this.topics.bind(this),undefined)};e.filterLog={blockNumber:Formatter.allowNull(l),blockHash:Formatter.allowNull(i),transactionIndex:l,removed:Formatter.allowNull(this.boolean.bind(this)),address:t,data:Formatter.allowFalsish(o,"0x"),topics:Formatter.arrayOf(i),transactionHash:i,logIndex:l};return e}accessList(e){return accessListify(e||[])}number(e){if(e==="0x"){return 0}return o.gH.from(e).toNumber()}type(e){if(e==="0x"||e==null){return 0}return o.gH.from(e).toNumber()}bigNumber(e){return o.gH.from(e)}boolean(e){if(typeof e==="boolean"){return e}if(typeof e==="string"){e=e.toLowerCase();if(e==="true"){return true}if(e==="false"){return false}}throw new Error("invalid boolean - "+e)}hex(e,t){if(typeof e==="string"){if(!t&&e.substring(0,2)!=="0x"){e="0x"+e}if((0,i.Lo)(e)){return e.toLowerCase()}}return $.throwArgumentError("invalid hash","value",e)}data(e,t){const r=this.hex(e,t);if(r.length%2!==0){throw new Error("invalid data; odd-length - "+e)}return r}address(e){return(0,c.bv)(e)}callAddress(e){if(!(0,i.Lo)(e,32)){return null}const t=(0,c.bv)((0,i.Ab)(e,12));return t===Z?null:t}contractAddress(e){return(0,c.RZ)(e)}blockTag(e){if(e==null){return"latest"}if(e==="earliest"){return"0x0"}switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if(typeof e==="number"||(0,i.Lo)(e)){return(0,i.Fh)(e)}throw new Error("invalid blockTag")}hash(e,t){const r=this.hex(e,t);if((0,i.cm)(r)!==32){return $.throwArgumentError("invalid hash","value",e)}return r}difficulty(e){if(e==null){return null}const t=o.gH.from(e);try{return t.toNumber()}catch(e){}return null}uint256(e){if(!(0,i.Lo)(e)){throw new Error("invalid uint256")}return(0,i.bj)(e,32)}_block(e,t){if(e.author!=null&&e.miner==null){e.miner=e.author}const r=e._difficulty!=null?e._difficulty:e.difficulty;const n=Formatter.check(t,e);n._difficulty=r==null?null:o.gH.from(r);return n}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return Formatter.check(this.formats.transactionRequest,e)}transactionResponse(e){if(e.gas!=null&&e.gasLimit==null){e.gasLimit=e.gas}if(e.to&&o.gH.from(e.to).isZero()){e.to="0x0000000000000000000000000000000000000000"}if(e.input!=null&&e.data==null){e.data=e.input}if(e.to==null&&e.creates==null){e.creates=this.contractAddress(e)}if((e.type===1||e.type===2)&&e.accessList==null){e.accessList=[]}const t=Formatter.check(this.formats.transaction,e);if(e.chainId!=null){let r=e.chainId;if((0,i.Lo)(r)){r=o.gH.from(r).toNumber()}t.chainId=r}else{let r=e.networkId;if(r==null&&t.v==null){r=e.chainId}if((0,i.Lo)(r)){r=o.gH.from(r).toNumber()}if(typeof r!=="number"&&t.v!=null){r=(t.v-35)/2;if(r<0){r=0}r=parseInt(r)}if(typeof r!=="number"){r=0}t.chainId=r}if(t.blockHash&&t.blockHash.replace(/0/g,"")==="x"){t.blockHash=null}return t}transaction(e){return parse(e)}receiptLog(e){return Formatter.check(this.formats.receiptLog,e)}receipt(e){const t=Formatter.check(this.formats.receipt,e);if(t.root!=null){if(t.root.length<=4){const e=o.gH.from(t.root).toNumber();if(e===0||e===1){if(t.status!=null&&t.status!==e){$.throwArgumentError("alt-root-status/status mismatch","value",{root:t.root,status:t.status})}t.status=e;delete t.root}else{$.throwArgumentError("invalid alt-root-status","value.root",t.root)}}else if(t.root.length!==66){$.throwArgumentError("invalid root hash","value.root",t.root)}}if(t.status!=null){t.byzantium=true}return t}topics(e){if(Array.isArray(e)){return e.map(e=>this.topics(e))}else if(e!=null){return this.hash(e,true)}return null}filter(e){return Formatter.check(this.formats.filter,e)}filterLog(e){return Formatter.check(this.formats.filterLog,e)}static check(e,t){const r={};for(const n in e){try{const o=e[n](t[n]);if(o!==undefined){r[n]=o}}catch(e){e.checkKey=n;e.checkValue=t[n];throw e}}return r}static allowNull(e,t){return function(r){if(r==null){return t}return e(r)}}static allowFalsish(e,t){return function(r){if(!r){return t}return e(r)}}static arrayOf(e){return function(t){if(!Array.isArray(t)){throw new Error("not an array")}const r=[];t.forEach(function(t){r.push(e(t))});return r}}}function isCommunityResourcable(e){return e&&typeof e.isCommunityResource==="function"}function isCommunityResource(e){return isCommunityResourcable(e)&&e.isCommunityResource()}let ee=false;function showThrottleMessage(){if(ee){return}ee=true;console.log("========= NOTICE =========");console.log("Request-Rate Exceeded  (this message will not be repeated)");console.log("");console.log("The default API keys for each service are provided as a highly-throttled,");console.log("community resource for low-traffic projects and early prototyping.");console.log("");console.log("While your application will continue to function, we highly recommended");console.log("signing up for your own API keys to improve performance, increase your");console.log("request rate/limit and enable other perks, such as metrics and advanced APIs.");console.log("");console.log("For more details: https://docs.ethers.io/api-keys/");console.log("==========================")}var te=undefined&&undefined.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){o(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})};const re=new b.Vy(T.r);const ne=10;function checkTopic(e){if(e==null){return"null"}if((0,i.cm)(e)!==32){re.throwArgumentError("invalid topic","topic",e)}return e.toLowerCase()}function serializeTopics(e){e=e.slice();while(e.length>0&&e[e.length-1]==null){e.pop()}return e.map(e=>{if(Array.isArray(e)){const t={};e.forEach(e=>{t[checkTopic(e)]=true});const r=Object.keys(t);r.sort();return r.join("|")}else{return checkTopic(e)}}).join("&")}function deserializeTopics(e){if(e===""){return[]}return e.split(/&/g).map(e=>{if(e===""){return[]}const t=e.split("|").map(e=>e==="null"?null:e);return t.length===1?t[0]:t})}function getEventTag(e){if(typeof e==="string"){e=e.toLowerCase();if((0,i.cm)(e)===32){return"tx:"+e}if(e.indexOf(":")===-1){return e}}else if(Array.isArray(e)){return"filter:*:"+serializeTopics(e)}else if(P.Rj.isForkEvent(e)){re.warn("not implemented");throw new Error("not implemented")}else if(e&&typeof e==="object"){return"filter:"+(e.address||"*")+":"+serializeTopics(e.topics||[])}throw new Error("invalid event - "+e)}function getTime(){return(new Date).getTime()}function stall(e){return new Promise(t=>{setTimeout(t,e)})}const oe=["block","network","pending","poll"];class Event{constructor(e,t,r){(0,a.yY)(this,"tag",e);(0,a.yY)(this,"listener",t);(0,a.yY)(this,"once",r);this._lastBlockNumber=-2;this._inflight=false}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");if(e[0]!=="tx"){return null}return e[1]}get filter(){const e=this.tag.split(":");if(e[0]!=="filter"){return null}const t=e[1];const r=deserializeTopics(e[2]);const n={};if(r.length>0){n.topics=r}if(t&&t!=="*"){n.address=t}return n}pollable(){return this.tag.indexOf(":")>=0||oe.indexOf(this.tag)>=0}}const ie={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function bytes32ify(e){return(0,i.bj)(o.gH.from(e).toHexString(),32)}function base58Encode(e){return L.encode((0,i.xW)([e,(0,i.Ab)(sha256(sha256(e)),0,4)]))}const se=new RegExp("^(ipfs)://(.*)$","i");const ae=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),se,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function _parseString(e,t){try{return(0,l._v)(_parseBytes(e,t))}catch(e){}return null}function _parseBytes(e,t){if(e==="0x"){return null}const r=o.gH.from((0,i.Ab)(e,t,t+32)).toNumber();const n=o.gH.from((0,i.Ab)(e,r,r+32)).toNumber();return(0,i.Ab)(e,r+32,r+32+n)}function getIpfsLink(e){if(e.match(/^ipfs:\/\/ipfs\//i)){e=e.substring(12)}else if(e.match(/^ipfs:\/\//i)){e=e.substring(7)}else{re.throwArgumentError("unsupported IPFS format","link",e)}return`https://gateway.ipfs.io/ipfs/${e}`}function numPad(e){const t=(0,i.k9)(e);if(t.length>32){throw new Error("internal; should not happen")}const r=new Uint8Array(32);r.set(t,32-t.length);return r}function bytesPad(e){if(e.length%32===0){return e}const t=new Uint8Array(Math.ceil(e.length/32)*32);t.set(e);return t}function encodeBytes(e){const t=[];let r=0;for(let n=0;n<e.length;n++){t.push(null);r+=32}for(let n=0;n<e.length;n++){const o=(0,i.k9)(e[n]);t[n]=numPad(r);t.push(numPad(o.length));t.push(bytesPad(o));r+=32+Math.ceil(o.length/32)*32}return(0,i.qn)(t)}class Resolver{constructor(e,t,r,n){(0,a.yY)(this,"provider",e);(0,a.yY)(this,"name",r);(0,a.yY)(this,"address",e.formatter.address(t));(0,a.yY)(this,"_resolvedAddress",n)}supportsWildcard(){if(!this._supportsEip2544){this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then(e=>o.gH.from(e).eq(1)).catch(e=>{if(e.code===b.Vy.errors.CALL_EXCEPTION){return false}this._supportsEip2544=null;throw e})}return this._supportsEip2544}_fetch(e,t){return te(this,void 0,void 0,function*(){const r={to:this.address,ccipReadEnabled:true,data:(0,i.qn)([e,namehash(this.name),t||"0x"])};let n=false;if(yield this.supportsWildcard()){n=true;r.data=(0,i.qn)(["0x9061b923",encodeBytes([dnsEncode(this.name),r.data])])}try{let e=yield this.provider.call(r);if((0,i.k9)(e).length%32===4){re.throwError("resolver threw error",b.Vy.errors.CALL_EXCEPTION,{transaction:r,data:e})}if(n){e=_parseBytes(e,0)}return e}catch(e){if(e.code===b.Vy.errors.CALL_EXCEPTION){return null}throw e}})}_fetchBytes(e,t){return te(this,void 0,void 0,function*(){const r=yield this._fetch(e,t);if(r!=null){return _parseBytes(r,0)}return null})}_getAddress(e,t){const r=ie[String(e)];if(r==null){re.throwError(`unsupported coin type: ${e}`,b.Vy.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`})}if(r.ilk==="eth"){return this.provider.formatter.address(t)}const n=(0,i.k9)(t);if(r.p2pkh!=null){const e=t.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(e){const t=parseInt(e[1],16);if(e[2].length===t*2&&t>=1&&t<=75){return base58Encode((0,i.xW)([[r.p2pkh],"0x"+e[2]]))}}}if(r.p2sh!=null){const e=t.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(e){const t=parseInt(e[1],16);if(e[2].length===t*2&&t>=1&&t<=75){return base58Encode((0,i.xW)([[r.p2sh],"0x"+e[2]]))}}}if(r.prefix!=null){const e=n[1];let t=n[0];if(t===0){if(e!==20&&e!==32){t=-1}}else{t=-1}if(t>=0&&n.length===2+e&&e>=1&&e<=75){const e=X().toWords(n.slice(2));e.unshift(t);return X().encode(r.prefix,e)}}return null}getAddress(e){return te(this,void 0,void 0,function*(){if(e==null){e=60}if(e===60){try{const e=yield this._fetch("0x3b3b57de");if(e==="0x"||e===F){return null}return this.provider.formatter.callAddress(e)}catch(e){if(e.code===b.Vy.errors.CALL_EXCEPTION){return null}throw e}}const t=yield this._fetchBytes("0xf1cb7e06",bytes32ify(e));if(t==null||t==="0x"){return null}const r=this._getAddress(e,t);if(r==null){re.throwError(`invalid or unsupported coin data`,b.Vy.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:t})}return r})}getAvatar(){return te(this,void 0,void 0,function*(){const e=[{type:"name",content:this.name}];try{const t=yield this.getText("avatar");if(t==null){return null}for(let r=0;r<ae.length;r++){const n=t.match(ae[r]);if(n==null){continue}const s=n[1].toLowerCase();switch(s){case"https":e.push({type:"url",content:t});return{linkage:e,url:t};case"data":e.push({type:"data",content:t});return{linkage:e,url:t};case"ipfs":e.push({type:"ipfs",content:t});return{linkage:e,url:getIpfsLink(t)};case"erc721":case"erc1155":{const r=s==="erc721"?"0xc87b56dd":"0x0e89341c";e.push({type:s,content:t});const a=this._resolvedAddress||(yield this.getAddress());const l=(n[2]||"").split("/");if(l.length!==2){return null}const c=yield this.provider.formatter.address(l[0]);const u=(0,i.bj)(o.gH.from(l[1]).toHexString(),32);if(s==="erc721"){const t=this.provider.formatter.callAddress(yield this.provider.call({to:c,data:(0,i.qn)(["0x6352211e",u])}));if(a!==t){return null}e.push({type:"owner",content:t})}else if(s==="erc1155"){const t=o.gH.from(yield this.provider.call({to:c,data:(0,i.qn)(["0x00fdd58e",(0,i.bj)(a,32),u])}));if(t.isZero()){return null}e.push({type:"balance",content:t.toString()})}const h={to:this.provider.formatter.address(l[0]),data:(0,i.qn)([r,u])};let d=_parseString(yield this.provider.call(h),0);if(d==null){return null}e.push({type:"metadata-url-base",content:d});if(s==="erc1155"){d=d.replace("{id}",u.substring(2));e.push({type:"metadata-url-expanded",content:d})}if(d.match(/^ipfs:/i)){d=getIpfsLink(d)}e.push({type:"metadata-url",content:d});const f=yield(0,I.x6)(d);if(!f){return null}e.push({type:"metadata",content:JSON.stringify(f)});let m=f.image;if(typeof m!=="string"){return null}if(m.match(/^(https:\/\/|data:)/i)){}else{const t=m.match(se);if(t==null){return null}e.push({type:"url-ipfs",content:m});m=getIpfsLink(m)}e.push({type:"url",content:m});return{linkage:e,url:m}}}}}catch(e){}return null})}getContentHash(){return te(this,void 0,void 0,function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(e==null||e==="0x"){return null}const t=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const e=parseInt(t[3],16);if(t[4].length===e*2){return"ipfs://"+L.encode("0x"+t[1])}}const r=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(r){const e=parseInt(r[3],16);if(r[4].length===e*2){return"ipns://"+L.encode("0x"+r[1])}}const n=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(n){if(n[1].length===32*2){return"bzz://"+n[1]}}const o=e.match(/^0x90b2c605([0-9a-f]*)$/);if(o){if(o[1].length===34*2){const e={"=":"","+":"-","/":"_"};const t=encode("0x"+o[1]).replace(/[=+\/]/g,t=>e[t]);return"sia://"+t}}return re.throwError(`invalid or unsupported content hash data`,b.Vy.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})})}getText(e){return te(this,void 0,void 0,function*(){let t=(0,l.YW)(e);t=(0,i.xW)([bytes32ify(64),bytes32ify(t.length),t]);if(t.length%32!==0){t=(0,i.xW)([t,(0,i.bj)("0x",32-e.length%32)])}const r=yield this._fetchBytes("0x59d1d43c",(0,i.c$)(t));if(r==null||r==="0x"){return null}return(0,l._v)(r)})}}let le=null;let ce=1;class BaseProvider extends P.Kq{constructor(e){super();this._events=[];this._emitted={block:-2};this.disableCcipRead=false;this.formatter=new.target.getFormatter();(0,a.yY)(this,"anyNetwork",e==="any");if(this.anyNetwork){e=this.detectNetwork()}if(e instanceof Promise){this._networkPromise=e;e.catch(e=>{});this._ready().catch(e=>{})}else{const t=(0,a.$J)(new.target,"getNetwork")(e);if(t){(0,a.yY)(this,"_network",t);this.emit("network",t,null)}else{re.throwArgumentError("invalid network","network",e)}}this._maxInternalBlockNumber=-1024;this._lastBlockNumber=-2;this._maxFilterBlockRange=10;this._pollingInterval=4e3;this._fastQueryDate=0}_ready(){return te(this,void 0,void 0,function*(){if(this._network==null){let e=null;if(this._networkPromise){try{e=yield this._networkPromise}catch(e){}}if(e==null){e=yield this.detectNetwork()}if(!e){re.throwError("no network detected",b.Vy.errors.UNKNOWN_ERROR,{})}if(this._network==null){if(this.anyNetwork){this._network=e}else{(0,a.yY)(this,"_network",e)}this.emit("network",e,null)}}return this._network})}get ready(){return(0,I.wt)(()=>this._ready().then(e=>e,e=>{if(e.code===b.Vy.errors.NETWORK_ERROR&&e.event==="noNetwork"){return undefined}throw e}))}static getFormatter(){if(le==null){le=new Formatter}return le}static getNetwork(e){return(0,J.N)(e==null?"homestead":e)}ccipReadFetch(e,t,r){return te(this,void 0,void 0,function*(){if(this.disableCcipRead||r.length===0){return null}const n=e.to.toLowerCase();const o=t.toLowerCase();const i=[];for(let e=0;e<r.length;e++){const t=r[e];const s=t.replace("{sender}",n).replace("{data}",o);const a=t.indexOf("{data}")>=0?null:JSON.stringify({data:o,sender:n});const l=yield(0,I.x6)({url:s,errorPassThrough:true},a,(e,t)=>{e.status=t.statusCode;return e});if(l.data){return l.data}const c=l.message||"unknown error";if(l.status>=400&&l.status<500){return re.throwError(`response not found during CCIP fetch: ${c}`,b.Vy.errors.SERVER_ERROR,{url:t,errorMessage:c})}i.push(c)}return re.throwError(`error encountered during CCIP fetch: ${i.map(e=>JSON.stringify(e)).join(", ")}`,b.Vy.errors.SERVER_ERROR,{urls:r,errorMessages:i})})}_getInternalBlockNumber(e){return te(this,void 0,void 0,function*(){yield this._ready();if(e>0){while(this._internalBlockNumber){const t=this._internalBlockNumber;try{const r=yield t;if(getTime()-r.respTime<=e){return r.blockNumber}break}catch(e){if(this._internalBlockNumber===t){break}}}}const t=getTime();const r=(0,a.k_)({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then(e=>null,e=>e)}).then(({blockNumber:e,networkError:n})=>{if(n){if(this._internalBlockNumber===r){this._internalBlockNumber=null}throw n}const i=getTime();e=o.gH.from(e).toNumber();if(e<this._maxInternalBlockNumber){e=this._maxInternalBlockNumber}this._maxInternalBlockNumber=e;this._setFastBlockNumber(e);return{blockNumber:e,reqTime:t,respTime:i}});this._internalBlockNumber=r;r.catch(e=>{if(this._internalBlockNumber===r){this._internalBlockNumber=null}});return(yield r).blockNumber})}poll(){return te(this,void 0,void 0,function*(){const e=ce++;const t=[];let r=null;try{r=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(e){this.emit("error",e);return}this._setFastBlockNumber(r);this.emit("poll",e,r);if(r===this._lastBlockNumber){this.emit("didPoll",e);return}if(this._emitted.block===-2){this._emitted.block=r-1}if(Math.abs(this._emitted.block-r)>1e3){re.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${r})`);this.emit("error",re.makeError("network block skew detected",b.Vy.errors.NETWORK_ERROR,{blockNumber:r,event:"blockSkew",previousBlockNumber:this._emitted.block}));this.emit("block",r)}else{for(let e=this._emitted.block+1;e<=r;e++){this.emit("block",e)}}if(this._emitted.block!==r){this._emitted.block=r;Object.keys(this._emitted).forEach(e=>{if(e==="block"){return}const t=this._emitted[e];if(t==="pending"){return}if(r-t>12){delete this._emitted[e]}})}if(this._lastBlockNumber===-2){this._lastBlockNumber=r-1}this._events.forEach(e=>{switch(e.type){case"tx":{const r=e.hash;let n=this.getTransactionReceipt(r).then(e=>{if(!e||e.blockNumber==null){return null}this._emitted["t:"+r]=e.blockNumber;this.emit(r,e);return null}).catch(e=>{this.emit("error",e)});t.push(n);break}case"filter":{if(!e._inflight){e._inflight=true;if(e._lastBlockNumber===-2){e._lastBlockNumber=r-1}const n=e.filter;n.fromBlock=e._lastBlockNumber+1;n.toBlock=r;const o=n.toBlock-this._maxFilterBlockRange;if(o>n.fromBlock){n.fromBlock=o}if(n.fromBlock<0){n.fromBlock=0}const i=this.getLogs(n).then(t=>{e._inflight=false;if(t.length===0){return}t.forEach(t=>{if(t.blockNumber>e._lastBlockNumber){e._lastBlockNumber=t.blockNumber}this._emitted["b:"+t.blockHash]=t.blockNumber;this._emitted["t:"+t.transactionHash]=t.blockNumber;this.emit(n,t)})}).catch(t=>{this.emit("error",t);e._inflight=false});t.push(i)}break}}});this._lastBlockNumber=r;Promise.all(t).then(()=>{this.emit("didPoll",e)}).catch(e=>{this.emit("error",e)});return})}resetEventsBlock(e){this._lastBlockNumber=e-1;if(this.polling){this.poll()}}get network(){return this._network}detectNetwork(){return te(this,void 0,void 0,function*(){return re.throwError("provider does not support network detection",b.Vy.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})})}getNetwork(){return te(this,void 0,void 0,function*(){const e=yield this._ready();const t=yield this.detectNetwork();if(e.chainId!==t.chainId){if(this.anyNetwork){this._network=t;this._lastBlockNumber=-2;this._fastBlockNumber=null;this._fastBlockNumberPromise=null;this._fastQueryDate=0;this._emitted.block=-2;this._maxInternalBlockNumber=-1024;this._internalBlockNumber=null;this.emit("network",t,e);yield stall(0);return this._network}const r=re.makeError("underlying network changed",b.Vy.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:t});this.emit("error",r);throw r}return e})}get blockNumber(){this._getInternalBlockNumber(100+this.pollingInterval/2).then(e=>{this._setFastBlockNumber(e)},e=>{});return this._fastBlockNumber!=null?this._fastBlockNumber:-1}get polling(){return this._poller!=null}set polling(e){if(e&&!this._poller){this._poller=setInterval(()=>{this.poll()},this.pollingInterval);if(!this._bootstrapPoll){this._bootstrapPoll=setTimeout(()=>{this.poll();this._bootstrapPoll=setTimeout(()=>{if(!this._poller){this.poll()}this._bootstrapPoll=null},this.pollingInterval)},0)}}else if(!e&&this._poller){clearInterval(this._poller);this._poller=null}}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if(typeof e!=="number"||e<=0||parseInt(String(e))!=e){throw new Error("invalid polling interval")}this._pollingInterval=e;if(this._poller){clearInterval(this._poller);this._poller=setInterval(()=>{this.poll()},this._pollingInterval)}}_getFastBlockNumber(){const e=getTime();if(e-this._fastQueryDate>2*this._pollingInterval){this._fastQueryDate=e;this._fastBlockNumberPromise=this.getBlockNumber().then(e=>{if(this._fastBlockNumber==null||e>this._fastBlockNumber){this._fastBlockNumber=e}return this._fastBlockNumber})}return this._fastBlockNumberPromise}_setFastBlockNumber(e){if(this._fastBlockNumber!=null&&e<this._fastBlockNumber){return}this._fastQueryDate=getTime();if(this._fastBlockNumber==null||e>this._fastBlockNumber){this._fastBlockNumber=e;this._fastBlockNumberPromise=Promise.resolve(e)}}waitForTransaction(e,t,r){return te(this,void 0,void 0,function*(){return this._waitForTransaction(e,t==null?1:t,r||0,null)})}_waitForTransaction(e,t,r,n){return te(this,void 0,void 0,function*(){const o=yield this.getTransactionReceipt(e);if((o?o.confirmations:0)>=t){return o}return new Promise((o,i)=>{const s=[];let a=false;const alreadyDone=function(){if(a){return true}a=true;s.forEach(e=>{e()});return false};const minedHandler=e=>{if(e.confirmations<t){return}if(alreadyDone()){return}o(e)};this.on(e,minedHandler);s.push(()=>{this.removeListener(e,minedHandler)});if(n){let r=n.startBlock;let o=null;const replaceHandler=s=>te(this,void 0,void 0,function*(){if(a){return}yield stall(1e3);this.getTransactionCount(n.from).then(l=>te(this,void 0,void 0,function*(){if(a){return}if(l<=n.nonce){r=s}else{{const t=yield this.getTransaction(e);if(t&&t.blockNumber!=null){return}}if(o==null){o=r-3;if(o<n.startBlock){o=n.startBlock}}while(o<=s){if(a){return}const r=yield this.getBlockWithTransactions(o);for(let o=0;o<r.transactions.length;o++){const s=r.transactions[o];if(s.hash===e){return}if(s.from===n.from&&s.nonce===n.nonce){if(a){return}const r=yield this.waitForTransaction(s.hash,t);if(alreadyDone()){return}let o="replaced";if(s.data===n.data&&s.to===n.to&&s.value.eq(n.value)){o="repriced"}else if(s.data==="0x"&&s.from===s.to&&s.value.isZero()){o="cancelled"}i(re.makeError("transaction was replaced",b.Vy.errors.TRANSACTION_REPLACED,{cancelled:o==="replaced"||o==="cancelled",reason:o,replacement:this._wrapTransaction(s),hash:e,receipt:r}));return}}o++}}if(a){return}this.once("block",replaceHandler)}),e=>{if(a){return}this.once("block",replaceHandler)})});if(a){return}this.once("block",replaceHandler);s.push(()=>{this.removeListener("block",replaceHandler)})}if(typeof r==="number"&&r>0){const e=setTimeout(()=>{if(alreadyDone()){return}i(re.makeError("timeout exceeded",b.Vy.errors.TIMEOUT,{timeout:r}))},r);if(e.unref){e.unref()}s.push(()=>{clearTimeout(e)})}})})}getBlockNumber(){return te(this,void 0,void 0,function*(){return this._getInternalBlockNumber(0)})}getGasPrice(){return te(this,void 0,void 0,function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return o.gH.from(e)}catch(t){return re.throwError("bad result from backend",b.Vy.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:t})}})}getBalance(e,t){return te(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield(0,a.k_)({address:this._getAddress(e),blockTag:this._getBlockTag(t)});const n=yield this.perform("getBalance",r);try{return o.gH.from(n)}catch(e){return re.throwError("bad result from backend",b.Vy.errors.SERVER_ERROR,{method:"getBalance",params:r,result:n,error:e})}})}getTransactionCount(e,t){return te(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield(0,a.k_)({address:this._getAddress(e),blockTag:this._getBlockTag(t)});const n=yield this.perform("getTransactionCount",r);try{return o.gH.from(n).toNumber()}catch(e){return re.throwError("bad result from backend",b.Vy.errors.SERVER_ERROR,{method:"getTransactionCount",params:r,result:n,error:e})}})}getCode(e,t){return te(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield(0,a.k_)({address:this._getAddress(e),blockTag:this._getBlockTag(t)});const n=yield this.perform("getCode",r);try{return(0,i.c$)(n)}catch(e){return re.throwError("bad result from backend",b.Vy.errors.SERVER_ERROR,{method:"getCode",params:r,result:n,error:e})}})}getStorageAt(e,t,r){return te(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield(0,a.k_)({address:this._getAddress(e),blockTag:this._getBlockTag(r),position:Promise.resolve(t).then(e=>(0,i.Fh)(e))});const o=yield this.perform("getStorageAt",n);try{return(0,i.c$)(o)}catch(e){return re.throwError("bad result from backend",b.Vy.errors.SERVER_ERROR,{method:"getStorageAt",params:n,result:o,error:e})}})}_wrapTransaction(e,t,r){if(t!=null&&(0,i.cm)(t)!==32){throw new Error("invalid response - sendTransaction")}const n=e;if(t!=null&&e.hash!==t){re.throwError("Transaction hash mismatch from Provider.sendTransaction.",b.Vy.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:t})}n.wait=(t,n)=>te(this,void 0,void 0,function*(){if(t==null){t=1}if(n==null){n=0}let o=undefined;if(t!==0&&r!=null){o={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:r}}const i=yield this._waitForTransaction(e.hash,t,n,o);if(i==null&&t===0){return null}this._emitted["t:"+e.hash]=i.blockNumber;if(i.status===0){re.throwError("transaction failed",b.Vy.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:i})}return i});return n}sendTransaction(e){return te(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Promise.resolve(e).then(e=>(0,i.c$)(e));const r=this.formatter.transaction(e);if(r.confirmations==null){r.confirmations=0}const n=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const e=yield this.perform("sendTransaction",{signedTransaction:t});return this._wrapTransaction(r,e,n)}catch(e){e.transaction=r;e.transactionHash=r.hash;throw e}})}_getTransactionRequest(e){return te(this,void 0,void 0,function*(){const t=yield e;const r={};["from","to"].forEach(e=>{if(t[e]==null){return}r[e]=Promise.resolve(t[e]).then(e=>e?this._getAddress(e):null)});["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach(e=>{if(t[e]==null){return}r[e]=Promise.resolve(t[e]).then(e=>e?o.gH.from(e):null)});["type"].forEach(e=>{if(t[e]==null){return}r[e]=Promise.resolve(t[e]).then(e=>e!=null?e:null)});if(t.accessList){r.accessList=this.formatter.accessList(t.accessList)}["data"].forEach(e=>{if(t[e]==null){return}r[e]=Promise.resolve(t[e]).then(e=>e?(0,i.c$)(e):null)});return this.formatter.transactionRequest(yield(0,a.k_)(r))})}_getFilter(e){return te(this,void 0,void 0,function*(){e=yield e;const t={};if(e.address!=null){t.address=this._getAddress(e.address)}["blockHash","topics"].forEach(r=>{if(e[r]==null){return}t[r]=e[r]});["fromBlock","toBlock"].forEach(r=>{if(e[r]==null){return}t[r]=this._getBlockTag(e[r])});return this.formatter.filter(yield(0,a.k_)(t))})}_call(e,t,r){return te(this,void 0,void 0,function*(){if(r>=ne){re.throwError("CCIP read exceeded maximum redirections",b.Vy.errors.SERVER_ERROR,{redirects:r,transaction:e})}const n=e.to;const s=yield this.perform("call",{transaction:e,blockTag:t});if(r>=0&&t==="latest"&&n!=null&&s.substring(0,10)==="0x556f1830"&&(0,i.cm)(s)%32===4){try{const a=(0,i.Ab)(s,4);const l=(0,i.Ab)(a,0,32);if(!o.gH.from(l).eq(n)){re.throwError("CCIP Read sender did not match",b.Vy.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s})}const c=[];const u=o.gH.from((0,i.Ab)(a,32,64)).toNumber();const h=o.gH.from((0,i.Ab)(a,u,u+32)).toNumber();const d=(0,i.Ab)(a,u+32);for(let t=0;t<h;t++){const r=_parseString(d,t*32);if(r==null){re.throwError("CCIP Read contained corrupt URL string",b.Vy.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s})}c.push(r)}const f=_parseBytes(a,64);if(!o.gH.from((0,i.Ab)(a,100,128)).isZero()){re.throwError("CCIP Read callback selector included junk",b.Vy.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s})}const m=(0,i.Ab)(a,96,100);const g=_parseBytes(a,128);const A=yield this.ccipReadFetch(e,f,c);if(A==null){re.throwError("CCIP Read disabled or provided no URLs",b.Vy.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s})}const p={to:n,data:(0,i.qn)([m,encodeBytes([A,g])])};return this._call(p,t,r+1)}catch(e){if(e.code===b.Vy.errors.SERVER_ERROR){throw e}}}try{return(0,i.c$)(s)}catch(r){return re.throwError("bad result from backend",b.Vy.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:t},result:s,error:r})}})}call(e,t){return te(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield(0,a.k_)({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(t),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)});return this._call(r.transaction,r.blockTag,r.ccipReadEnabled?0:-1)})}estimateGas(e){return te(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield(0,a.k_)({transaction:this._getTransactionRequest(e)});const r=yield this.perform("estimateGas",t);try{return o.gH.from(r)}catch(e){return re.throwError("bad result from backend",b.Vy.errors.SERVER_ERROR,{method:"estimateGas",params:t,result:r,error:e})}})}_getAddress(e){return te(this,void 0,void 0,function*(){e=yield e;if(typeof e!=="string"){re.throwArgumentError("invalid address or ENS name","name",e)}const t=yield this.resolveName(e);if(t==null){re.throwError("ENS name not configured",b.Vy.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`})}return t})}_getBlock(e,t){return te(this,void 0,void 0,function*(){yield this.getNetwork();e=yield e;let r=-128;const n={includeTransactions:!!t};if((0,i.Lo)(e,32)){n.blockHash=e}else{try{n.blockTag=yield this._getBlockTag(e);if((0,i.Lo)(n.blockTag)){r=parseInt(n.blockTag.substring(2),16)}}catch(t){re.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}}return(0,I.wt)(()=>te(this,void 0,void 0,function*(){const e=yield this.perform("getBlock",n);if(e==null){if(n.blockHash!=null){if(this._emitted["b:"+n.blockHash]==null){return null}}if(n.blockTag!=null){if(r>this._emitted.block){return null}}return undefined}if(t){let t=null;for(let r=0;r<e.transactions.length;r++){const n=e.transactions[r];if(n.blockNumber==null){n.confirmations=0}else if(n.confirmations==null){if(t==null){t=yield this._getInternalBlockNumber(100+2*this.pollingInterval)}let e=t-n.blockNumber+1;if(e<=0){e=1}n.confirmations=e}}const r=this.formatter.blockWithTransactions(e);r.transactions=r.transactions.map(e=>this._wrapTransaction(e));return r}return this.formatter.block(e)}),{oncePoll:this})})}getBlock(e){return this._getBlock(e,false)}getBlockWithTransactions(e){return this._getBlock(e,true)}getTransaction(e){return te(this,void 0,void 0,function*(){yield this.getNetwork();e=yield e;const t={transactionHash:this.formatter.hash(e,true)};return(0,I.wt)(()=>te(this,void 0,void 0,function*(){const r=yield this.perform("getTransaction",t);if(r==null){if(this._emitted["t:"+e]==null){return null}return undefined}const n=this.formatter.transactionResponse(r);if(n.blockNumber==null){n.confirmations=0}else if(n.confirmations==null){const e=yield this._getInternalBlockNumber(100+2*this.pollingInterval);let t=e-n.blockNumber+1;if(t<=0){t=1}n.confirmations=t}return this._wrapTransaction(n)}),{oncePoll:this})})}getTransactionReceipt(e){return te(this,void 0,void 0,function*(){yield this.getNetwork();e=yield e;const t={transactionHash:this.formatter.hash(e,true)};return(0,I.wt)(()=>te(this,void 0,void 0,function*(){const r=yield this.perform("getTransactionReceipt",t);if(r==null){if(this._emitted["t:"+e]==null){return null}return undefined}if(r.blockHash==null){return undefined}const n=this.formatter.receipt(r);if(n.blockNumber==null){n.confirmations=0}else if(n.confirmations==null){const e=yield this._getInternalBlockNumber(100+2*this.pollingInterval);let t=e-n.blockNumber+1;if(t<=0){t=1}n.confirmations=t}return n}),{oncePoll:this})})}getLogs(e){return te(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield(0,a.k_)({filter:this._getFilter(e)});const r=yield this.perform("getLogs",t);r.forEach(e=>{if(e.removed==null){e.removed=false}});return Formatter.arrayOf(this.formatter.filterLog.bind(this.formatter))(r)})}getEtherPrice(){return te(this,void 0,void 0,function*(){yield this.getNetwork();return this.perform("getEtherPrice",{})})}_getBlockTag(e){return te(this,void 0,void 0,function*(){e=yield e;if(typeof e==="number"&&e<0){if(e%1){re.throwArgumentError("invalid BlockTag","blockTag",e)}let t=yield this._getInternalBlockNumber(100+2*this.pollingInterval);t+=e;if(t<0){t=0}return this.formatter.blockTag(t)}return this.formatter.blockTag(e)})}getResolver(e){return te(this,void 0,void 0,function*(){let t=e;while(true){if(t===""||t==="."){return null}if(e!=="eth"&&t==="eth"){return null}const r=yield this._getResolver(t,"getResolver");if(r!=null){const n=new Resolver(this,r,e);if(t!==e&&!(yield n.supportsWildcard())){return null}return n}t=t.split(".").slice(1).join(".")}})}_getResolver(e,t){return te(this,void 0,void 0,function*(){if(t==null){t="ENS"}const r=yield this.getNetwork();if(!r.ensAddress){re.throwError("network does not support ENS",b.Vy.errors.UNSUPPORTED_OPERATION,{operation:t,network:r.name})}try{const t=yield this.call({to:r.ensAddress,data:"0x0178b8bf"+namehash(e).substring(2)});return this.formatter.callAddress(t)}catch(e){}return null})}resolveName(e){return te(this,void 0,void 0,function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(t){if((0,i.Lo)(e)){throw t}}if(typeof e!=="string"){re.throwArgumentError("invalid ENS name","name",e)}const t=yield this.getResolver(e);if(!t){return null}return yield t.getAddress()})}lookupAddress(e){return te(this,void 0,void 0,function*(){e=yield e;e=this.formatter.address(e);const t=e.substring(2).toLowerCase()+".addr.reverse";const r=yield this._getResolver(t,"lookupAddress");if(r==null){return null}const n=_parseString(yield this.call({to:r,data:"0x691f3431"+namehash(t).substring(2)}),0);const o=yield this.resolveName(n);if(o!=e){return null}return n})}getAvatar(e){return te(this,void 0,void 0,function*(){let t=null;if((0,i.Lo)(e)){const r=this.formatter.address(e);const n=r.substring(2).toLowerCase()+".addr.reverse";const o=yield this._getResolver(n,"getAvatar");if(!o){return null}t=new Resolver(this,o,n);try{const e=yield t.getAvatar();if(e){return e.url}}catch(e){if(e.code!==b.Vy.errors.CALL_EXCEPTION){throw e}}try{const e=_parseString(yield this.call({to:o,data:"0x691f3431"+namehash(n).substring(2)}),0);t=yield this.getResolver(e)}catch(e){if(e.code!==b.Vy.errors.CALL_EXCEPTION){throw e}return null}}else{t=yield this.getResolver(e);if(!t){return null}}const r=yield t.getAvatar();if(r==null){return null}return r.url})}perform(e,t){return re.throwError(e+" not implemented",b.Vy.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter(e=>e.pollable()).length>0}_stopEvent(e){this.polling=this._events.filter(e=>e.pollable()).length>0}_addEventListener(e,t,r){const n=new Event(getEventTag(e),t,r);this._events.push(n);this._startEvent(n);return this}on(e,t){return this._addEventListener(e,t,false)}once(e,t){return this._addEventListener(e,t,true)}emit(e,...t){let r=false;let n=[];let o=getEventTag(e);this._events=this._events.filter(e=>{if(e.tag!==o){return true}setTimeout(()=>{e.listener.apply(this,t)},0);r=true;if(e.once){n.push(e);return false}return true});n.forEach(e=>{this._stopEvent(e)});return r}listenerCount(e){if(!e){return this._events.length}let t=getEventTag(e);return this._events.filter(e=>e.tag===t).length}listeners(e){if(e==null){return this._events.map(e=>e.listener)}let t=getEventTag(e);return this._events.filter(e=>e.tag===t).map(e=>e.listener)}off(e,t){if(t==null){return this.removeAllListeners(e)}const r=[];let n=false;let o=getEventTag(e);this._events=this._events.filter(e=>{if(e.tag!==o||e.listener!=t){return true}if(n){return true}n=true;r.push(e);return false});r.forEach(e=>{this._stopEvent(e)});return this}removeAllListeners(e){let t=[];if(e==null){t=this._events;this._events=[]}else{const r=getEventTag(e);this._events=this._events.filter(e=>{if(e.tag!==r){return true}t.push(e);return false})}t.forEach(e=>{this._stopEvent(e)});return this}}var ue=undefined&&undefined.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){o(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})};const he=new b.Vy(T.r);const de=["call","estimateGas"];function spelunk(e,t){if(e==null){return null}if(typeof e.message==="string"&&e.message.match("reverted")){const r=(0,i.Lo)(e.data)?e.data:null;if(!t||r){return{message:e.message,data:r}}}if(typeof e==="object"){for(const r in e){const n=spelunk(e[r],t);if(n){return n}}return null}if(typeof e==="string"){try{return spelunk(JSON.parse(e),t)}catch(e){}}return null}function checkError(e,t,r){const n=r.transaction||r.signedTransaction;if(e==="call"){const e=spelunk(t,true);if(e){return e.data}he.throwError("missing revert data in call exception; Transaction reverted without a reason string",b.Vy.errors.CALL_EXCEPTION,{data:"0x",transaction:n,error:t})}if(e==="estimateGas"){let r=spelunk(t.body,false);if(r==null){r=spelunk(t,false)}if(r){he.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",b.Vy.errors.UNPREDICTABLE_GAS_LIMIT,{reason:r.message,method:e,transaction:n,error:t})}}let o=t.message;if(t.code===b.Vy.errors.SERVER_ERROR&&t.error&&typeof t.error.message==="string"){o=t.error.message}else if(typeof t.body==="string"){o=t.body}else if(typeof t.responseText==="string"){o=t.responseText}o=(o||"").toLowerCase();if(o.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)){he.throwError("insufficient funds for intrinsic transaction cost",b.Vy.errors.INSUFFICIENT_FUNDS,{error:t,method:e,transaction:n})}if(o.match(/nonce (is )?too low/i)){he.throwError("nonce has already been used",b.Vy.errors.NONCE_EXPIRED,{error:t,method:e,transaction:n})}if(o.match(/replacement transaction underpriced|transaction gas price.*too low/i)){he.throwError("replacement fee too low",b.Vy.errors.REPLACEMENT_UNDERPRICED,{error:t,method:e,transaction:n})}if(o.match(/only replay-protected/i)){he.throwError("legacy pre-eip-155 transactions not supported",b.Vy.errors.UNSUPPORTED_OPERATION,{error:t,method:e,transaction:n})}if(de.indexOf(e)>=0&&o.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)){he.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",b.Vy.errors.UNPREDICTABLE_GAS_LIMIT,{error:t,method:e,transaction:n})}throw t}function timer(e){return new Promise(function(t){setTimeout(t,e)})}function getResult(e){if(e.error){const t=new Error(e.error.message);t.code=e.error.code;t.data=e.error.data;throw t}return e.result}function getLowerCase(e){if(e){return e.toLowerCase()}return e}const fe={};class JsonRpcSigner extends n.l{constructor(e,t,r){super();if(e!==fe){throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner")}(0,a.yY)(this,"provider",t);if(r==null){r=0}if(typeof r==="string"){(0,a.yY)(this,"_address",this.provider.formatter.address(r));(0,a.yY)(this,"_index",null)}else if(typeof r==="number"){(0,a.yY)(this,"_index",r);(0,a.yY)(this,"_address",null)}else{he.throwArgumentError("invalid address or index","addressOrIndex",r)}}connect(e){return he.throwError("cannot alter JSON-RPC Signer connection",b.Vy.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new UncheckedJsonRpcSigner(fe,this.provider,this._address||this._index)}getAddress(){if(this._address){return Promise.resolve(this._address)}return this.provider.send("eth_accounts",[]).then(e=>{if(e.length<=this._index){he.throwError("unknown account #"+this._index,b.Vy.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"})}return this.provider.formatter.address(e[this._index])})}sendUncheckedTransaction(e){e=(0,a.Ic)(e);const t=this.getAddress().then(e=>{if(e){e=e.toLowerCase()}return e});if(e.gasLimit==null){const r=(0,a.Ic)(e);r.from=t;e.gasLimit=this.provider.estimateGas(r)}if(e.to!=null){e.to=Promise.resolve(e.to).then(e=>ue(this,void 0,void 0,function*(){if(e==null){return null}const t=yield this.provider.resolveName(e);if(t==null){he.throwArgumentError("provided ENS name resolves to null","tx.to",e)}return t}))}return(0,a.k_)({tx:(0,a.k_)(e),sender:t}).then(({tx:t,sender:r})=>{if(t.from!=null){if(t.from.toLowerCase()!==r){he.throwArgumentError("from address mismatch","transaction",e)}}else{t.from=r}const n=this.provider.constructor.hexlifyTransaction(t,{from:true});return this.provider.send("eth_sendTransaction",[n]).then(e=>e,e=>{if(typeof e.message==="string"&&e.message.match(/user denied/i)){he.throwError("user rejected transaction",b.Vy.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:t})}return checkError("sendTransaction",e,n)})})}signTransaction(e){return he.throwError("signing transactions is unsupported",b.Vy.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return ue(this,void 0,void 0,function*(){const t=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval);const r=yield this.sendUncheckedTransaction(e);try{return yield(0,I.wt)(()=>ue(this,void 0,void 0,function*(){const e=yield this.provider.getTransaction(r);if(e===null){return undefined}return this.provider._wrapTransaction(e,r,t)}),{oncePoll:this.provider})}catch(e){e.transactionHash=r;throw e}})}signMessage(e){return ue(this,void 0,void 0,function*(){const t=typeof e==="string"?(0,l.YW)(e):e;const r=yield this.getAddress();try{return yield this.provider.send("personal_sign",[(0,i.c$)(t),r.toLowerCase()])}catch(t){if(typeof t.message==="string"&&t.message.match(/user denied/i)){he.throwError("user rejected signing",b.Vy.errors.ACTION_REJECTED,{action:"signMessage",from:r,messageData:e})}throw t}})}_legacySignMessage(e){return ue(this,void 0,void 0,function*(){const t=typeof e==="string"?(0,l.YW)(e):e;const r=yield this.getAddress();try{return yield this.provider.send("eth_sign",[r.toLowerCase(),(0,i.c$)(t)])}catch(t){if(typeof t.message==="string"&&t.message.match(/user denied/i)){he.throwError("user rejected signing",b.Vy.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:r,messageData:e})}throw t}})}_signTypedData(e,t,r){return ue(this,void 0,void 0,function*(){const n=yield s.z.resolveNames(e,t,r,e=>this.provider.resolveName(e));const o=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[o.toLowerCase(),JSON.stringify(s.z.getPayload(n.domain,t,n.value))])}catch(e){if(typeof e.message==="string"&&e.message.match(/user denied/i)){he.throwError("user rejected signing",b.Vy.errors.ACTION_REJECTED,{action:"_signTypedData",from:o,messageData:{domain:n.domain,types:t,value:n.value}})}throw e}})}unlock(e){return ue(this,void 0,void 0,function*(){const t=this.provider;const r=yield this.getAddress();return t.send("personal_unlockAccount",[r.toLowerCase(),e,null])})}}class UncheckedJsonRpcSigner extends JsonRpcSigner{sendTransaction(e){return this.sendUncheckedTransaction(e).then(e=>({hash:e,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:t=>this.provider.waitForTransaction(e,t)}))}}const me={chainId:true,data:true,gasLimit:true,gasPrice:true,nonce:true,to:true,value:true,type:true,accessList:true,maxFeePerGas:true,maxPriorityFeePerGas:true};class JsonRpcProvider extends BaseProvider{constructor(e,t){let r=t;if(r==null){r=new Promise((e,t)=>{setTimeout(()=>{this.detectNetwork().then(t=>{e(t)},e=>{t(e)})},0)})}super(r);if(!e){e=(0,a.$J)(this.constructor,"defaultUrl")()}if(typeof e==="string"){(0,a.yY)(this,"connection",Object.freeze({url:e}))}else{(0,a.yY)(this,"connection",Object.freeze((0,a.Ic)(e)))}this._nextId=42}get _cache(){if(this._eventLoopCache==null){this._eventLoopCache={}}return this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){if(!this._cache["detectNetwork"]){this._cache["detectNetwork"]=this._uncachedDetectNetwork();setTimeout(()=>{this._cache["detectNetwork"]=null},0)}return this._cache["detectNetwork"]}_uncachedDetectNetwork(){return ue(this,void 0,void 0,function*(){yield timer(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch(t){try{e=yield this.send("net_version",[])}catch(e){}}if(e!=null){const t=(0,a.$J)(this.constructor,"getNetwork");try{return t(o.gH.from(e).toNumber())}catch(t){return he.throwError("could not detect network",b.Vy.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:t})}}return he.throwError("could not detect network",b.Vy.errors.NETWORK_ERROR,{event:"noNetwork"})})}getSigner(e){return new JsonRpcSigner(fe,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then(e=>e.map(e=>this.formatter.address(e)))}send(e,t){const r={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:(0,a.A4)(r),provider:this});const n=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(n&&this._cache[e]){return this._cache[e]}const o=(0,I.x6)(this.connection,JSON.stringify(r),getResult).then(e=>{this.emit("debug",{action:"response",request:r,response:e,provider:this});return e},e=>{this.emit("debug",{action:"response",error:e,request:r,provider:this});throw e});if(n){this._cache[e]=o;setTimeout(()=>{this._cache[e]=null},0)}return o}prepareRequest(e,t){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[getLowerCase(t.address),t.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[getLowerCase(t.address),t.blockTag]];case"getCode":return["eth_getCode",[getLowerCase(t.address),t.blockTag]];case"getStorageAt":return["eth_getStorageAt",[getLowerCase(t.address),(0,i.bj)(t.position,32),t.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[t.signedTransaction]];case"getBlock":if(t.blockTag){return["eth_getBlockByNumber",[t.blockTag,!!t.includeTransactions]]}else if(t.blockHash){return["eth_getBlockByHash",[t.blockHash,!!t.includeTransactions]]}return null;case"getTransaction":return["eth_getTransactionByHash",[t.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[t.transactionHash]];case"call":{const e=(0,a.$J)(this.constructor,"hexlifyTransaction");return["eth_call",[e(t.transaction,{from:true}),t.blockTag]]}case"estimateGas":{const e=(0,a.$J)(this.constructor,"hexlifyTransaction");return["eth_estimateGas",[e(t.transaction,{from:true})]]}case"getLogs":if(t.filter&&t.filter.address!=null){t.filter.address=getLowerCase(t.filter.address)}return["eth_getLogs",[t.filter]];default:break}return null}perform(e,t){return ue(this,void 0,void 0,function*(){if(e==="call"||e==="estimateGas"){const e=t.transaction;if(e&&e.type!=null&&o.gH.from(e.type).isZero()){if(e.maxFeePerGas==null&&e.maxPriorityFeePerGas==null){const r=yield this.getFeeData();if(r.maxFeePerGas==null&&r.maxPriorityFeePerGas==null){t=(0,a.Ic)(t);t.transaction=(0,a.Ic)(e);delete t.transaction.type}}}}const r=this.prepareRequest(e,t);if(r==null){he.throwError(e+" not implemented",b.Vy.errors.NOT_IMPLEMENTED,{operation:e})}try{return yield this.send(r[0],r[1])}catch(r){return checkError(e,r,t)}})}_startEvent(e){if(e.tag==="pending"){this._startPending()}super._startEvent(e)}_startPending(){if(this._pendingFilter!=null){return}const e=this;const t=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=t;t.then(function(r){function poll(){e.send("eth_getFilterChanges",[r]).then(function(r){if(e._pendingFilter!=t){return null}let n=Promise.resolve();r.forEach(function(t){e._emitted["t:"+t.toLowerCase()]="pending";n=n.then(function(){return e.getTransaction(t).then(function(t){e.emit("pending",t);return null})})});return n.then(function(){return timer(1e3)})}).then(function(){if(e._pendingFilter!=t){e.send("eth_uninstallFilter",[r]);return}setTimeout(function(){poll()},0);return null}).catch(e=>{})}poll();return r}).catch(e=>{})}_stopEvent(e){if(e.tag==="pending"&&this.listenerCount("pending")===0){this._pendingFilter=null}super._stopEvent(e)}static hexlifyTransaction(e,t){const r=(0,a.Ic)(me);if(t){for(const e in t){if(t[e]){r[e]=true}}}(0,a.qN)(e,r);const n={};["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(function(t){if(e[t]==null){return}const r=(0,i.Fh)(o.gH.from(e[t]));if(t==="gasLimit"){t="gas"}n[t]=r});["from","to","data"].forEach(function(t){if(e[t]==null){return}n[t]=(0,i.c$)(e[t])});if(e.accessList){n["accessList"]=accessListify(e.accessList)}return n}}}}]);