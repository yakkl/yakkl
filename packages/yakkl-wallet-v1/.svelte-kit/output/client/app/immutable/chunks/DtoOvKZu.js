import{c as check_target,l as legacy_api}from"./BXFaAXnq.js";import{p as push,h as tag,o as onMount,t as template_effect,a as pop,i as state,c as child,e as set,g as get,s as sibling,F as FILENAME,r as reset,u as user_derived}from"./BaS8d5lg.js";import{a as add_locations}from"./3AhEABF_.js";import{d as delegate}from"./DiU70Is3.js";import{a as append,f as from_html}from"./Cm3jf07C.js";import{c as create_ownership_validator}from"./COgMMZ9C.js";import{w as wrap_snippet}from"./d5hrMixo.js";import{r as remove_input_defaults,a as set_value}from"./DTBsVM-c.js";import{s as set_class}from"./DX_EEhpR.js";import{p as prop}from"./BYboeQtC.js";import{s as setup_stores,a as store_get}from"./CViNpZsE.js";import{v as validate_store}from"./Dv9a3G0k.js";import{x as isEncryptedData,z as decryptData,H as yakklMiscStore,C as getYakklCurrentlySelected}from"./Cb2naUpm.js";import{l as log}from"./WDN37msH.js";import"./CgCfpVku.js";import{P as PincodeVerify}from"./Fc_LhyTR.js";import{M as Modal}from"./UU1vCwIM.js";import{C as Copy}from"./D6ZwBv0_.js";const browserSvelte=typeof window!=="undefined";ExportPrivateKey[FILENAME]="src/lib/components/ExportPrivateKey.svelte";var on_click=(_,showPrivateKeyModal)=>{set(showPrivateKeyModal,false)};var root_1=add_locations(from_html(`<div class="p-6"><p class="text-sm text-red-500 mb-4">Please be careful! <strong>Your PRIVATE KEY should remain PRIVATE</strong>. A bad actor\n\t\t\t\tcould take the content of your wallet if they have access to the PRIVATE KEY! Copy the\n\t\t\t\tPRIVATE KEY and store it somewhere safe!!</p> <div class="mb-4"><label class="block text-sm font-medium text-gray-700 dark:text-gray-200">Address</label> <input type="text" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm bg-gray-100 text-gray-700 cursor-not-allowed" readonly=""/></div> <div class="mb-4"><label class="block text-sm font-medium text-gray-700 dark:text-gray-200">Private Key</label> <div class="mt-1 flex"><input type="text" class="flex-1 block w-full rounded-none rounded-l-md border-gray-300 bg-gray-100 cursor-not-allowed focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" readonly=""/> <!></div></div> <div class="mt-6 flex justify-end space-x-4"><button type="button" class="px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500">Close</button></div></div>`),ExportPrivateKey[FILENAME],[[62,2,[[63,3,[[64,23]]],[68,3,[[70,4],[71,4]]],[78,3,[[80,4],[82,4,[[83,5]]]]],[100,3,[[101,4]]]]]]);var on_click_1=(__1,show,showPincodeModal)=>{show(false);set(showPincodeModal,true)};var root_2=add_locations(from_html(`<div class="p-6"><p class="text-sm text-gray-700 dark:text-gray-200 mb-4">To export the private key of your account, please verify your pincode first.</p> <div class="mt-6 flex justify-end space-x-4"><button type="button" class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">Cancel</button> <button type="button" class="px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">Continue</button></div></div>`),ExportPrivateKey[FILENAME],[[113,2,[[114,3],[117,3,[[118,4],[123,4]]]]]]);var root=add_locations(from_html(`<div><!> <!> <!></div>`),ExportPrivateKey[FILENAME],[[54,0]]);function ExportPrivateKey($$anchor,$$props){check_target(new.target);push($$props,true,ExportPrivateKey);var $$ownership_validator=create_ownership_validator($$props);const[$$stores,$$cleanup]=setup_stores();const $yakklMiscStore=()=>(validate_store(yakklMiscStore,"yakklMiscStore"),store_get(yakklMiscStore,"$yakklMiscStore",$$stores));let show=prop($$props,"show",15,false),className=prop($$props,"className",3,"z-[999]"),onVerify=prop($$props,"onVerify",3,()=>{});let privateKey=tag(state(""),"privateKey");let address=tag(state(void 0),"address");let showPincodeModal=tag(state(false),"showPincodeModal");let showPrivateKeyModal=tag(state(false),"showPrivateKeyModal");let currentlySelected;onMount(async()=>{if(browserSvelte){currentlySelected=await getYakklCurrentlySelected();set(address,currentlySelected.shortcuts.address,true)}});async function verifyPincode(pincode){try{let account;if(isEncryptedData(currentlySelected.data)){await decryptData(currentlySelected.data,$yakklMiscStore()).then(result=>{currentlySelected.data=result})}account=currentlySelected.data.account;if(isEncryptedData(account&&account.data)){await decryptData(account.data,$yakklMiscStore()).then(result=>{account.data=result})}set(privateKey,account.data.privateKey,true);set(showPincodeModal,false);set(showPrivateKeyModal,true);show(false);onVerify()()}catch(e){log.error("Error verifying pincode:",e)}}function closeModal(){show(false)}var div=root();var node=child(div);PincodeVerify(node,{onVerified:verifyPincode,get show(){return get(showPincodeModal)},set show($$value){set(showPincodeModal,$$value,true)}});var node_1=sibling(node,2);Modal(node_1,{title:"Private Key",onClose:()=>set(showPrivateKeyModal,false),get show(){return get(showPrivateKeyModal)},set show($$value){set(showPrivateKeyModal,$$value,true)},children:wrap_snippet(ExportPrivateKey,($$anchor2,$$slotProps)=>{var div_1=root_1();var div_2=sibling(child(div_1),2);var input=sibling(child(div_2),2);remove_input_defaults(input);reset(div_2);var div_3=sibling(div_2,2);var div_4=sibling(child(div_3),2);var input_1=child(div_4);remove_input_defaults(input_1);var node_2=sibling(input_1,2);const expression=user_derived(()=>({value:get(privateKey),timeout:2e4,redactText:"PRIVATE-KEY-REDACTED"}));Copy(node_2,{className:"relative -ml-px inline-flex items-center space-x-2 rounded-r-md border border-gray-300 bg-gray-50 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500",get target(){return get(expression)}});reset(div_4);reset(div_3);var div_5=sibling(div_3,2);var button=child(div_5);button.__click=[on_click,showPrivateKeyModal];reset(div_5);reset(div_1);template_effect(()=>{set_value(input,get(address));set_value(input_1,get(privateKey))});append($$anchor2,div_1)}),$$slots:{default:true}});var node_3=sibling(node_1,2);{$$ownership_validator.binding("show",Modal,show);Modal(node_3,{title:"Export Private Key",onClose:closeModal,get show(){return show()},set show($$value){show($$value)},children:wrap_snippet(ExportPrivateKey,($$anchor2,$$slotProps)=>{var div_6=root_2();var div_7=sibling(child(div_6),2);var button_1=child(div_7);button_1.__click=closeModal;var button_2=sibling(button_1,2);button_2.__click=[on_click_1,show,showPincodeModal];reset(div_7);reset(div_6);append($$anchor2,div_6)}),$$slots:{default:true}})}reset(div);template_effect(()=>set_class(div,1,`relative ${className()??""}`));append($$anchor,div);var $$pop=pop({...legacy_api()});$$cleanup();return $$pop}delegate(["click"]);export{ExportPrivateKey as E};
//# sourceMappingURL=DtoOvKZu.js.map
