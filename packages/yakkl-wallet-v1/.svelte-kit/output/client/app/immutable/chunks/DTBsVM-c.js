import{V as block,a4 as destroy_effect,L as branch,a5 as effect,a7 as untrack,aK as is_array,bd as select_multiple_invalid_value,be as is,ab as derived,bf as LOADING_ATTR_SYMBOL,bg as NAMESPACE_HTML,b5 as get_prototype_of,M as hydrating,g as get,bh as ATTACHMENT_KEY,bi as get_descriptors,bj as hydration_attribute_changed,x as set_hydrating,bk as queue_idle_task}from"./BaS8d5lg.js";import{l as listen_to_event_and_reset_event,f as create_event,d as delegate,g as autofocus,i as add_form_reset_listener}from"./DiU70Is3.js";import{c as is_capture_event,n as normalize_attribute,d as is_delegated}from"./BgcCkDX2.js";import{c as clsx,s as set_class}from"./DX_EEhpR.js";import{s as set_style}from"./D1JcdFy3.js";function attach(node,get_fn){var fn=void 0;var e;block(()=>{if(fn!==(fn=get_fn())){if(e){destroy_effect(e);e=null}if(fn){e=branch(()=>{effect(()=>fn(node))})}}})}function select_option(select,value,mounting){if(select.multiple){if(value==void 0){return}if(!is_array(value)){return select_multiple_invalid_value()}for(var option of select.options){option.selected=value.includes(get_option_value(option))}return}for(option of select.options){var option_value=get_option_value(option);if(is(option_value,value)){option.selected=true;return}}if(!mounting||value!==void 0){select.selectedIndex=-1}}function init_select(select,get_value){let mounting=true;effect(()=>{if(get_value){select_option(select,untrack(get_value),mounting)}mounting=false;var observer=new MutationObserver(()=>{var value=select.__value;select_option(select,value)});observer.observe(select,{childList:true,subtree:true,attributes:true,attributeFilter:["value"]});return()=>{observer.disconnect()}})}function bind_select_value(select,get2,set=get2){var mounting=true;listen_to_event_and_reset_event(select,"change",is_reset=>{var query=is_reset?"[selected]":":checked";var value;if(select.multiple){value=[].map.call(select.querySelectorAll(query),get_option_value)}else{var selected_option=select.querySelector(query)??select.querySelector("option:not([disabled])");value=selected_option&&get_option_value(selected_option)}set(value)});effect(()=>{var value=get2();select_option(select,value,mounting);if(mounting&&value===void 0){var selected_option=select.querySelector(":checked");if(selected_option!==null){value=get_option_value(selected_option);set(value)}}select.__value=value;mounting=false});init_select(select)}function get_option_value(option){if("__value"in option){return option.__value}else{return option.value}}const CLASS=Symbol("class");const STYLE=Symbol("style");const IS_CUSTOM_ELEMENT=Symbol("is custom element");const IS_HTML=Symbol("is html");function remove_input_defaults(input){if(!hydrating)return;var already_removed=false;var remove_defaults=()=>{if(already_removed)return;already_removed=true;if(input.hasAttribute("value")){var value=input.value;set_attribute(input,"value",null);input.value=value}if(input.hasAttribute("checked")){var checked=input.checked;set_attribute(input,"checked",null);input.checked=checked}};input.__on_r=remove_defaults;queue_idle_task(remove_defaults);add_form_reset_listener()}function set_value(element,value){var attributes=get_attributes(element);if(attributes.value===(attributes.value=value??void 0)||element.value===value&&(value!==0||element.nodeName!=="PROGRESS")){return}element.value=value??""}function set_checked(element,checked){var attributes=get_attributes(element);if(attributes.checked===(attributes.checked=checked??void 0)){return}element.checked=checked}function set_selected(element,selected){if(selected){if(!element.hasAttribute("selected")){element.setAttribute("selected","")}}else{element.removeAttribute("selected")}}function set_attribute(element,attribute,value,skip_warning){var attributes=get_attributes(element);if(hydrating){attributes[attribute]=element.getAttribute(attribute);if(attribute==="src"||attribute==="srcset"||attribute==="href"&&element.nodeName==="LINK"){if(!skip_warning){check_src_in_dev_hydration(element,attribute,value??"")}return}}if(attributes[attribute]===(attributes[attribute]=value))return;if(attribute==="loading"){element[LOADING_ATTR_SYMBOL]=value}if(value==null){element.removeAttribute(attribute)}else if(typeof value!=="string"&&get_setters(element).includes(attribute)){element[attribute]=value}else{element.setAttribute(attribute,value)}}function set_attributes(element,prev,next,css_hash,skip_warning=false){var attributes=get_attributes(element);var is_custom_element=attributes[IS_CUSTOM_ELEMENT];var preserve_attribute_case=!attributes[IS_HTML];let is_hydrating_custom_element=hydrating&&is_custom_element;if(is_hydrating_custom_element){set_hydrating(false)}var current=prev||{};var is_option_element=element.tagName==="OPTION";for(var key in prev){if(!(key in next)){next[key]=null}}if(next.class){next.class=clsx(next.class)}else if(next[CLASS]){next.class=null}if(next[STYLE]){next.style??(next.style=null)}var setters=get_setters(element);for(const key2 in next){let value=next[key2];if(is_option_element&&key2==="value"&&value==null){element.value=element.__value="";current[key2]=value;continue}if(key2==="class"){var is_html=element.namespaceURI==="http://www.w3.org/1999/xhtml";set_class(element,is_html,value,css_hash,prev==null?void 0:prev[CLASS],next[CLASS]);current[key2]=value;current[CLASS]=next[CLASS];continue}if(key2==="style"){set_style(element,value,prev==null?void 0:prev[STYLE],next[STYLE]);current[key2]=value;current[STYLE]=next[STYLE];continue}var prev_value=current[key2];if(value===prev_value)continue;current[key2]=value;var prefix=key2[0]+key2[1];if(prefix==="$$")continue;if(prefix==="on"){const opts={};const event_handle_key="$$"+key2;let event_name=key2.slice(2);var delegated=is_delegated(event_name);if(is_capture_event(event_name)){event_name=event_name.slice(0,-7);opts.capture=true}if(!delegated&&prev_value){if(value!=null)continue;element.removeEventListener(event_name,current[event_handle_key],opts);current[event_handle_key]=null}if(value!=null){if(!delegated){let handle=function(evt){current[key2].call(this,evt)};current[event_handle_key]=create_event(event_name,element,handle,opts)}else{element[`__${event_name}`]=value;delegate([event_name])}}else if(delegated){element[`__${event_name}`]=void 0}}else if(key2==="style"){set_attribute(element,key2,value)}else if(key2==="autofocus"){autofocus(element,Boolean(value))}else if(!is_custom_element&&(key2==="__value"||key2==="value"&&value!=null)){element.value=element.__value=value}else if(key2==="selected"&&is_option_element){set_selected(element,value)}else{var name=key2;if(!preserve_attribute_case){name=normalize_attribute(name)}var is_default=name==="defaultValue"||name==="defaultChecked";if(value==null&&!is_custom_element&&!is_default){attributes[key2]=null;if(name==="value"||name==="checked"){let input=element;const use_default=prev===void 0;if(name==="value"){let previous=input.defaultValue;input.removeAttribute(name);input.defaultValue=previous;input.value=input.__value=use_default?previous:null}else{let previous=input.defaultChecked;input.removeAttribute(name);input.defaultChecked=previous;input.checked=use_default?previous:false}}else{element.removeAttribute(key2)}}else if(is_default||setters.includes(name)&&(is_custom_element||typeof value!=="string")){element[name]=value}else if(typeof value!=="function"){set_attribute(element,name,value,skip_warning)}}}if(is_hydrating_custom_element){set_hydrating(true)}return current}function attribute_effect(element,fn,thunks=[],css_hash,skip_warning=false,d=derived){const deriveds=thunks.map(d);var prev=void 0;var effects={};var is_select=element.nodeName==="SELECT";var inited=false;block(()=>{var next=fn(...deriveds.map(get));set_attributes(element,prev,next,css_hash,skip_warning);if(inited&&is_select&&"value"in next){select_option(element,next.value,false)}for(let symbol of Object.getOwnPropertySymbols(effects)){if(!next[symbol])destroy_effect(effects[symbol])}for(let symbol of Object.getOwnPropertySymbols(next)){var n=next[symbol];if(symbol.description===ATTACHMENT_KEY&&(!prev||n!==prev[symbol])){if(effects[symbol])destroy_effect(effects[symbol]);effects[symbol]=branch(()=>attach(element,()=>n))}}prev=next});if(is_select){init_select(element,()=>prev.value)}inited=true}function get_attributes(element){return element.__attributes??(element.__attributes={[IS_CUSTOM_ELEMENT]:element.nodeName.includes("-"),[IS_HTML]:element.namespaceURI===NAMESPACE_HTML})}var setters_cache=new Map;function get_setters(element){var setters=setters_cache.get(element.nodeName);if(setters)return setters;setters_cache.set(element.nodeName,setters=[]);var descriptors;var proto=element;var element_proto=Element.prototype;while(element_proto!==proto){descriptors=get_descriptors(proto);for(var key in descriptors){if(descriptors[key].set){setters.push(key)}}proto=get_prototype_of(proto)}return setters}function check_src_in_dev_hydration(element,attribute,value){if(attribute==="srcset"&&srcset_url_equal(element,value))return;if(src_url_equal(element.getAttribute(attribute)??"",value))return;hydration_attribute_changed(attribute,element.outerHTML.replace(element.innerHTML,element.innerHTML&&"..."),String(value))}function src_url_equal(element_src,url){if(element_src===url)return true;return new URL(element_src,document.baseURI).href===new URL(url,document.baseURI).href}function split_srcset(srcset){return srcset.split(",").map(src=>src.trim().split(" ").filter(Boolean))}function srcset_url_equal(element,srcset){var element_urls=split_srcset(element.srcset);var urls=split_srcset(srcset);return urls.length===element_urls.length&&urls.every(([url,width],i)=>width===element_urls[i][1]&&(src_url_equal(element_urls[i][0],url)||src_url_equal(url,element_urls[i][0])))}export{set_value as a,bind_select_value as b,set_checked as c,attribute_effect as d,select_option as e,init_select as i,remove_input_defaults as r,set_attribute as s};
//# sourceMappingURL=DTBsVM-c.js.map
