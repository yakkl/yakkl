import{c as check_target,l as legacy_api}from"./BXFaAXnq.js";import{p as push,a as pop,F as FILENAME,c as child,r as reset,s as sibling,b as strict_equals,t as template_effect}from"./BaS8d5lg.js";import{a as add_locations}from"./3AhEABF_.js";import{s as set_text}from"./Cmwrv3PW.js";import{c as create_ownership_validator}from"./COgMMZ9C.js";import{i as if_block}from"./Q1yPWpQ-.js";import{f as from_html,t as text,a as append}from"./Cm3jf07C.js";import{w as wrap_snippet}from"./d5hrMixo.js";import{d as delegate}from"./DiU70Is3.js";import{p as prop}from"./BYboeQtC.js";import{M as Modal}from"./UU1vCwIM.js";import{a as browser_ext}from"./CgCfpVku.js";import{g as getSettings}from"./Cb2naUpm.js";RegistrationPrompt[FILENAME]="src/lib/components/RegistrationPrompt.svelte";function handleConfirm(_,$$props,context,show){if($$props.onConfirm){$$props.onConfirm()}else if(strict_equals(context(),"sidepanel")&&$$props.openWallet){$$props.openWallet()}else if(strict_equals(context(),"sidepanel")){browser_ext.runtime.sendMessage({type:"popout"})}show(false)}function handleCancel(__1,$$props,show){if($$props.onCancel)$$props.onCancel();show(false)}var root_1=add_locations(from_html(`<div class="p-6 space-y-4"><p class="text-base"> </p> <p class="text-sm text-gray-600"><!></p> <div class="flex justify-end gap-4 mt-6"><button class="px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300">Cancel</button> <button class="px-6 py-2 text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 transition-colors"> </button></div></div>`),RegistrationPrompt[FILENAME],[[29,1,[[30,2],[31,2],[39,2,[[40,3],[46,3]]]]]]);function RegistrationPrompt($$anchor,$$props){check_target(new.target);push($$props,true,RegistrationPrompt);var $$ownership_validator=create_ownership_validator($$props);let show=prop($$props,"show",15,false),title=prop($$props,"title",3,"Registration Required"),message=prop($$props,"message",3,"You need to register your YAKKL wallet before proceeding."),context=prop($$props,"context",3,"wallet");{$$ownership_validator.binding("show",Modal,show);Modal($$anchor,{get title(){return title()},className:"z-[700]",get show(){return show()},set show($$value){show($$value)},children:wrap_snippet(RegistrationPrompt,($$anchor2,$$slotProps)=>{var div=root_1();var p=child(div);var text$1=child(p,true);reset(p);var p_1=sibling(p,2);var node=child(p_1);{var consequent=$$anchor3=>{var text_1=text("Would you like to open the wallet to complete registration?");append($$anchor3,text_1)};var alternate=$$anchor3=>{var text_2=text("Please complete the registration process to continue.");append($$anchor3,text_2)};if_block(node,$$render=>{if(strict_equals(context(),"sidepanel"))$$render(consequent);else $$render(alternate,false)})}reset(p_1);var div_1=sibling(p_1,2);var button=child(div_1);button.__click=[handleCancel,$$props,show];var button_1=sibling(button,2);button_1.__click=[handleConfirm,$$props,context,show];var text_3=child(button_1,true);reset(button_1);reset(div_1);reset(div);template_effect(()=>{set_text(text$1,message());set_text(text_3,strict_equals(context(),"sidepanel")?"Open Wallet":"Continue")});append($$anchor2,div)}),$$slots:{default:true}})}return pop({...legacy_api()})}delegate(["click"]);async function checkRegistrationStatus(){var _a;try{const settings=await getSettings();const hasAgreedToTerms=((_a=settings==null?void 0:settings.legal)==null?void 0:_a.termsAgreed)??false;const isInitialized=(settings==null?void 0:settings.init)??false;let requiresAction=null;if(!hasAgreedToTerms){requiresAction="terms"}else if(!isInitialized){requiresAction="register"}else{requiresAction="login"}return{isRegistered:hasAgreedToTerms&&isInitialized,hasAgreedToTerms:hasAgreedToTerms,isInitialized:isInitialized,requiresAction:requiresAction}}catch(error){console.error("Error checking registration status:",error);return{isRegistered:false,hasAgreedToTerms:false,isInitialized:false,requiresAction:"terms"}}}function isUserLoggedIn(miscStore){return!!miscStore&&miscStore.length>0}export{RegistrationPrompt as R,checkRegistrationStatus as c,isUserLoggedIn as i};
//# sourceMappingURL=BkHOZpS2.js.map
