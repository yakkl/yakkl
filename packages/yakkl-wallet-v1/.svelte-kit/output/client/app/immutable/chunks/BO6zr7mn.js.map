{"version":3,"file":"BO6zr7mn.js","sources":["../../../../../../src/routes/preview2/lib/components/AIHelpButton.svelte","../../../../../../src/routes/preview2/lib/services/base.service.ts","../../../../../../src/routes/preview2/lib/services/wallet.service.ts","../../../../../../src/routes/preview2/lib/stores/chain.store.ts","../../../../../../src/routes/preview2/lib/stores/account.store.ts","../../../../../../src/routes/preview2/lib/components/v1/Modal.svelte","../../../../../../src/routes/preview2/lib/stores/modal.store.ts"],"sourcesContent":["<script lang=\"ts\">\n  let { className = '' } = $props();\n</script>\n<a href=\"/preview2/ai-help\"\n  class={`yakkl-circle-button text-xl z-50 ${className}`}>\n  ðŸ¤–\n</a>\n","import { browser } from '$app/environment';\n// Mock safeClientSendMessage for Preview 2.0\nconst safeClientSendMessage = async (message: any) => {\n  // Mock implementation for development\n  return { success: false, error: 'Mock implementation' };\n};\nimport type { ServiceResponse, ErrorState } from '../types';\n\nexport abstract class BaseService {\n  protected async sendMessage<T>(message: any): Promise<ServiceResponse<T>> {\n    try {\n      if (!browser) {\n        return {\n          success: false,\n          error: { hasError: true, message: 'Not in browser environment' }\n        };\n      }\n\n      const response = await safeClientSendMessage(message);\n      \n      if (response.error) {\n        return {\n          success: false,\n          error: {\n            hasError: true,\n            message: (response.error as any)?.message || 'Unknown error',\n            code: (response.error as any)?.code\n          }\n        };\n      }\n\n      return {\n        success: true,\n        data: (response as any).result\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: {\n          hasError: true,\n          message: error instanceof Error ? error.message : 'Unknown error'\n        }\n      };\n    }\n  }\n\n  protected handleError(error: any): ErrorState {\n    return {\n      hasError: true,\n      message: error instanceof Error ? error.message : 'Unknown error',\n      code: error?.code\n    };\n  }\n}","import { BaseService } from './base.service';\nimport type { Preview2Account, Preview2Chain, ServiceResponse } from '../types';\nimport { PlanType } from '../types';\nimport type { YakklAccount, YakklCurrentlySelected } from '$lib/common/interfaces';\nimport { get } from 'svelte/store';\nimport { \n  yakklAccountsStore, \n  yakklCurrentlySelectedStore,\n  yakklSettingsStore\n} from '$lib/common/stores';\n\nexport class WalletService extends BaseService {\n  private static instance: WalletService;\n\n  private constructor() {\n    super();\n  }\n\n  static getInstance(): WalletService {\n    if (!WalletService.instance) {\n      WalletService.instance = new WalletService();\n    }\n    return WalletService.instance;\n  }\n\n  async getAccounts(): Promise<ServiceResponse<Preview2Account[]>> {\n    try {\n      // Get from actual YAKKL stores\n      const accounts = get(yakklAccountsStore);\n      const settings = get(yakklSettingsStore);\n      \n      if (accounts && accounts.length > 0) {\n        // Transform to Preview2Account format\n        const preview2Accounts: Preview2Account[] = accounts.map((acc: YakklAccount) => ({\n          address: acc.address || '',\n          ens: acc.alias || null,\n          username: acc.name || '',\n          avatar: acc.avatar || null,\n          isActive: true,\n          balance: acc.quantity?.toString() || '0',\n          plan: (settings?.plan?.type || PlanType.Basic) as PlanType\n        }));\n        \n        return { success: true, data: preview2Accounts };\n      }\n\n      // If no accounts in store, request from background\n      const response = await this.sendMessage<string[]>({\n        method: 'eth_accounts'\n      });\n\n      if (response.success && response.data) {\n        const preview2Accounts: Preview2Account[] = response.data.map(address => ({\n          address,\n          ens: null as string | null,\n          username: '',\n          avatar: null as string | null,\n          isActive: false,\n          balance: '0',\n          plan: (settings?.plan?.type || PlanType.Basic) as PlanType\n        }));\n        \n        return { success: true, data: preview2Accounts };\n      }\n\n      return response as unknown as ServiceResponse<Preview2Account[]>;\n    } catch (error) {\n      return {\n        success: false,\n        error: this.handleError(error)\n      };\n    }\n  }\n\n  async getCurrentAccount(): Promise<ServiceResponse<Preview2Account | null>> {\n    try {\n      const currentlySelected = get(yakklCurrentlySelectedStore);\n      const settings = get(yakklSettingsStore);\n      \n      if (currentlySelected?.shortcuts?.address) {\n        const accounts = get(yakklAccountsStore);\n        const account = accounts?.find((acc: YakklAccount) => acc.address === currentlySelected.shortcuts.address);\n        \n        if (account) {\n          const preview2Account: Preview2Account = {\n            address: account.address || '',\n            ens: account.alias || null,\n            username: account.name || '',\n            avatar: account.avatar || null,\n            isActive: true,\n            balance: account.quantity?.toString() || '0',\n            plan: (settings?.plan?.type || PlanType.Basic) as PlanType\n          };\n          \n          return { success: true, data: preview2Account };\n        }\n      }\n\n      // Fallback to first account\n      const accountsResponse = await this.getAccounts();\n      if (accountsResponse.success && accountsResponse.data && accountsResponse.data.length > 0) {\n        return { success: true, data: accountsResponse.data[0] };\n      }\n\n      return { success: true, data: null };\n    } catch (error) {\n      return {\n        success: false,\n        error: this.handleError(error)\n      };\n    }\n  }\n\n  async getBalance(address: string): Promise<ServiceResponse<string>> {\n    try {\n      const response = await this.sendMessage<string>({\n        method: 'eth_getBalance',\n        params: [address, 'latest']\n      });\n\n      return response;\n    } catch (error) {\n      return {\n        success: false,\n        error: this.handleError(error)\n      };\n    }\n  }\n\n  async switchAccount(address: string): Promise<ServiceResponse<boolean>> {\n    try {\n      // Update the currently selected store\n      const currentlySelected = get(yakklCurrentlySelectedStore);\n      if (currentlySelected) {\n        // Update the address in shortcuts\n        yakklCurrentlySelectedStore.set({\n          ...currentlySelected,\n          shortcuts: {\n            ...currentlySelected.shortcuts,\n            address\n          }\n        });\n      }\n\n      return { success: true, data: true };\n    } catch (error) {\n      return {\n        success: false,\n        error: this.handleError(error)\n      };\n    }\n  }\n\n  async getChains(): Promise<ServiceResponse<Preview2Chain[]>> {\n    try {\n      // For now, return predefined chains\n      // TODO: Get from network configuration\n      const chains: Preview2Chain[] = [\n        {\n          key: 'eth-mainnet',\n          name: 'Ethereum',\n          network: 'Mainnet',\n          icon: '/images/eth.svg',\n          isTestnet: false,\n          chainId: 1,\n          rpcUrl: 'https://mainnet.infura.io/v3/YOUR_KEY'\n        },\n        {\n          key: 'eth-sepolia',\n          name: 'Ethereum',\n          network: 'Sepolia',\n          icon: '/images/eth.svg',\n          isTestnet: true,\n          chainId: 11155111,\n          rpcUrl: 'https://sepolia.infura.io/v3/YOUR_KEY'\n        },\n        {\n          key: 'polygon-mainnet',\n          name: 'Polygon',\n          network: 'Mainnet',\n          icon: '/images/polygon.svg',\n          isTestnet: false,\n          chainId: 137,\n          rpcUrl: 'https://polygon-rpc.com'\n        }\n      ];\n\n      return { success: true, data: chains };\n    } catch (error) {\n      return {\n        success: false,\n        error: this.handleError(error)\n      };\n    }\n  }\n\n  async switchChain(chainId: number): Promise<ServiceResponse<boolean>> {\n    try {\n      const response = await this.sendMessage<boolean>({\n        method: 'wallet_switchEthereumChain',\n        params: [{ chainId: `0x${chainId.toString(16)}` }]\n      });\n\n      if (response.success) {\n        // Update the currently selected store\n        const currentlySelected = get(yakklCurrentlySelectedStore);\n        if (currentlySelected) {\n          yakklCurrentlySelectedStore.set({\n            ...currentlySelected,\n            shortcuts: {\n              ...currentlySelected.shortcuts,\n              chainId\n            }\n          });\n        }\n      }\n\n      return response;\n    } catch (error) {\n      return {\n        success: false,\n        error: this.handleError(error)\n      };\n    }\n  }\n}","import { writable, derived } from 'svelte/store';\nimport type { Preview2Chain, LoadingState, ErrorState } from '../types';\nimport { WalletService } from '../services/wallet.service';\n\ninterface ChainState {\n  chains: Preview2Chain[];\n  currentChain: Preview2Chain | null;\n  showTestnets: boolean;\n  loading: LoadingState;\n  error: ErrorState;\n}\n\nfunction createChainStore() {\n  const walletService = WalletService.getInstance();\n  \n  const { subscribe, set, update } = writable<ChainState>({\n    chains: [],\n    currentChain: null,\n    showTestnets: false,\n    loading: { isLoading: false },\n    error: { hasError: false }\n  });\n\n  return {\n    subscribe,\n    \n    async loadChains() {\n      update(state => ({\n        ...state,\n        loading: { isLoading: true, message: 'Loading networks...' }\n      }));\n\n      const response = await walletService.getChains();\n      \n      if (response.success && response.data) {\n        update(state => ({\n          ...state,\n          chains: response.data!,\n          currentChain: response.data!.find(c => c.chainId === 1) || response.data![0],\n          loading: { isLoading: false },\n          error: { hasError: false }\n        }));\n      } else {\n        update(state => ({\n          ...state,\n          loading: { isLoading: false },\n          error: response.error || { hasError: true, message: 'Failed to load chains' }\n        }));\n      }\n    },\n\n    async switchChain(chainId: number) {\n      update(state => ({\n        ...state,\n        loading: { isLoading: true, message: 'Switching network...' }\n      }));\n\n      const response = await walletService.switchChain(chainId);\n      \n      if (response.success) {\n        update(state => {\n          const chain = state.chains.find(c => c.chainId === chainId);\n          return {\n            ...state,\n            currentChain: chain || null,\n            loading: { isLoading: false },\n            error: { hasError: false }\n          };\n        });\n      } else {\n        update(state => ({\n          ...state,\n          loading: { isLoading: false },\n          error: response.error || { hasError: true, message: 'Failed to switch network' }\n        }));\n      }\n    },\n\n    setCurrentChain(chain: Preview2Chain) {\n      update(state => ({\n        ...state,\n        currentChain: chain\n      }));\n    },\n\n    toggleTestnets() {\n      update(state => ({\n        ...state,\n        showTestnets: !state.showTestnets\n      }));\n    },\n\n    reset() {\n      set({\n        chains: [],\n        currentChain: null,\n        showTestnets: false,\n        loading: { isLoading: false },\n        error: { hasError: false }\n      });\n    }\n  };\n}\n\nexport const chainStore = createChainStore();\n\n// Derived stores\nexport const currentChain = derived(\n  chainStore,\n  $store => $store.currentChain\n);\n\nexport const visibleChains = derived(\n  chainStore,\n  $store => $store.showTestnets \n    ? $store.chains \n    : $store.chains.filter(chain => !chain.isTestnet)\n);\n\nexport const isLoadingChains = derived(\n  chainStore,\n  $store => $store.loading.isLoading\n);","import { writable, derived } from 'svelte/store';\nimport type { Preview2Account, LoadingState, ErrorState } from '../types';\nimport { WalletService } from '../services/wallet.service';\n\ninterface AccountState {\n  accounts: Preview2Account[];\n  currentAccount: Preview2Account | null;\n  loading: LoadingState;\n  error: ErrorState;\n}\n\nfunction createAccountStore() {\n  const walletService = WalletService.getInstance();\n  \n  const { subscribe, set, update } = writable<AccountState>({\n    accounts: [],\n    currentAccount: null,\n    loading: { isLoading: false },\n    error: { hasError: false }\n  });\n\n  return {\n    subscribe,\n    \n    async loadAccounts() {\n      update(state => ({\n        ...state,\n        loading: { isLoading: true, message: 'Loading accounts...' }\n      }));\n\n      const response = await walletService.getAccounts();\n      \n      if (response.success && response.data) {\n        update(state => ({\n          ...state,\n          accounts: response.data!,\n          loading: { isLoading: false },\n          error: { hasError: false }\n        }));\n        \n        // Load current account if not set\n        const currentResponse = await walletService.getCurrentAccount();\n        if (currentResponse.success && currentResponse.data) {\n          update(state => ({\n            ...state,\n            currentAccount: currentResponse.data!\n          }));\n        }\n      } else {\n        update(state => ({\n          ...state,\n          loading: { isLoading: false },\n          error: response.error || { hasError: true, message: 'Failed to load accounts' }\n        }));\n      }\n    },\n\n    async switchAccount(address: string) {\n      const response = await walletService.switchAccount(address);\n      \n      if (response.success) {\n        update(state => {\n          const account = state.accounts.find(acc => acc.address === address);\n          return {\n            ...state,\n            currentAccount: account || null\n          };\n        });\n      }\n    },\n\n    setCurrentAccount(account: Preview2Account) {\n      update(state => ({\n        ...state,\n        currentAccount: account\n      }));\n    },\n\n    reset() {\n      set({\n        accounts: [],\n        currentAccount: null,\n        loading: { isLoading: false },\n        error: { hasError: false }\n      });\n    }\n  };\n}\n\nexport const accountStore = createAccountStore();\n\n// Derived stores for easy access\nexport const currentAccount = derived(\n  accountStore,\n  $store => $store.currentAccount\n);\n\nexport const accounts = derived(\n  accountStore,\n  $store => $store.accounts\n);\n\nexport const isLoadingAccounts = derived(\n  accountStore,\n  $store => $store.loading.isLoading\n);","<script lang=\"ts\">\n\tinterface Props {\n\t\tshow?: boolean;\n\t\ttitle?: string;\n\t\tdescription?: string;\n\t\tclassName?: string;\n\t\tchildren?: import('svelte').Snippet;\n\t\tfooter?: import('svelte').Snippet;\n\t\tonCancel?: () => void;\n\t\tonClose?: () => void;\n\t\tpreventClose?: boolean; // Prevents closing via background click or X button\n\t}\n\n\t// Use `let` for props that are mutable\n\tlet {\n\t\tshow = $bindable(false), // Two-way binding\n\t\ttitle = '',\n\t\tdescription = '',\n\t\tclassName = '',\n\t\tchildren,\n\t\tfooter,\n\t\tonCancel = () => {\n\t\t\tshow = false;\n\t\t}, // Default handlers\n\t\tonClose = () => {\n\t\t\tshow = false;\n\t\t},\n\t\tpreventClose = false\n\t}: Props = $props();\n\n\t// Handle close with preventClose check\n\tfunction handleClose() {\n\t\tif (!preventClose) {\n\t\t\tonClose();\n\t\t}\n\t}\n</script>\n\n{#if show}\n\t<div class=\"fixed inset-0 flex items-center justify-center z-[699] {className}\" aria-modal=\"true\">\n\t\t<!-- svelte-ignore a11y_click_events_have_key_events -->\n\t\t<!-- svelte-ignore a11y_no_static_element_interactions -->\n\t\t<div class=\"absolute inset-0 bg-black opacity-50\" onclick={handleClose}></div>\n\n\t\t<!-- Modal container -->\n\t\t<div\n\t\t\tclass=\"bg-surface-light dark:bg-surface-dark text-primary-light dark:text-primary-dark rounded-lg shadow-lg w-full max-w-md mx-4 z-10 max-h-[80%] flex flex-col overflow-hidden\"\n\t\t>\n\t\t\t<!-- Modal header -->\n\t\t\t<div class=\"p-4 relative overflow-hidden\">\n\t\t\t\t{#if !preventClose}\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"absolute top-4 right-4 text-2xl font-bold hover:text-primary-light dark:hover:text-primary-dark focus:outline-none\"\n\t\t\t\t\t\tonclick={handleClose}\n\t\t\t\t\t>\n\t\t\t\t\t\t&times;\n\t\t\t\t\t</button>\n\t\t\t\t{/if}\n\t\t\t\t{#if description}\n\t\t\t\t\t<h2\n\t\t\t\t\t\tclass=\"text-2xl font-bold mb-4 text-primary-light dark:text-primary-dark truncate pr-8\"\n\t\t\t\t\t\t{title}\n\t\t\t\t\t>\n\t\t\t\t\t\t{title}\n\t\t\t\t\t</h2>\n\t\t\t\t\t<p class=\"text-sm mb-2 text-secondary-light dark:text-secondary-dark\">\n\t\t\t\t\t\t{description}\n\t\t\t\t\t</p>\n\t\t\t\t{:else}\n\t\t\t\t\t<h2\n\t\t\t\t\t\tclass=\"text-2xl font-bold mb-2 text-primary-light dark:text-primary-dark truncate pr-8\"\n\t\t\t\t\t\t{title}\n\t\t\t\t\t>\n\t\t\t\t\t\t{title}\n\t\t\t\t\t</h2>\n\t\t\t\t{/if}\n\t\t\t</div>\n\n\t\t\t<!-- Modal body content -->\n\t\t\t<div class=\"flex-1 overflow-y-auto overflow-x-hidden px-4\">\n\t\t\t\t{@render children?.()}\n\t\t\t</div>\n\n\t\t\t<!-- Modal footer -->\n\t\t\t<div\n\t\t\t\tclass=\"px-6 py-3 rounded-b-lg border-t border-neutral-light dark:border-neutral-dark bg-surface-light dark:bg-surface-dark text-primary-light dark:text-primary-dark overflow-hidden\"\n\t\t\t>\n\t\t\t\t{@render footer?.()}\n\t\t\t</div>\n\t\t</div>\n\t</div>\n{/if}\n","/**\n * Modal state management for preview2\n * Tracks when modals are open to hide floating elements\n */\n\nimport { writable } from 'svelte/store';\n\ninterface ModalState {\n  isOpen: boolean;\n  modalType?: string;\n  modalId?: string;\n}\n\nfunction createModalStore() {\n  const { subscribe, set, update } = writable<ModalState>({\n    isOpen: false,\n    modalType: undefined,\n    modalId: undefined\n  });\n\n  return {\n    subscribe,\n    \n    openModal(type: string, id?: string) {\n      update(state => ({\n        ...state,\n        isOpen: true,\n        modalType: type,\n        modalId: id\n      }));\n    },\n    \n    closeModal() {\n      set({\n        isOpen: false,\n        modalType: undefined,\n        modalId: undefined\n      });\n    },\n    \n    isModalOpen: () => {\n      let isOpen = false;\n      subscribe(state => { isOpen = state.isOpen; })();\n      return isOpen;\n    }\n  };\n}\n\nexport const modalStore = createModalStore();\n\n// Derived store for easy checking\nexport const isModalOpen = writable(false);\n\nmodalStore.subscribe(state => {\n  isModalOpen.set(state.isOpen);\n});"],"names":["className","$.prop","$$props","safeClientSendMessage","async","message","success","error","BaseService","sendMessage","browser","response","hasError","_a","code","_b","data","result","Error","handleError","_WalletService","constructor","super","getInstance","instance","getAccounts","accounts","get","yakklAccountsStore","settings","yakklSettingsStore","length","preview2Accounts","map","acc","address","ens","alias","username","name","avatar","isActive","balance","quantity","toString","plan","type","PlanType","Basic","this","method","getCurrentAccount","currentlySelected","yakklCurrentlySelectedStore","shortcuts","account","find","preview2Account","_c","accountsResponse","getBalance","params","switchAccount","set","getChains","chains","key","network","icon","isTestnet","chainId","rpcUrl","switchChain","__publicField","WalletService","createChainStore","walletService","subscribe","update","writable","currentChain","showTestnets","loading","isLoading","loadChains","state","c","chain","setCurrentChain","toggleTestnets","reset","chainStore","derived","$store","visibleChains","filter","createAccountStore","currentAccount","loadAccounts","currentResponse","setCurrentAccount","accountStore","handleClose","_","preventClose","onClose","show","title","description","prop","$$render","consequent","consequent_1","alternate","consequent_2","createModalStore","isOpen","modalType","modalId","openModal","id","closeModal","isModalOpen","modalStore"],"mappings":"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"}