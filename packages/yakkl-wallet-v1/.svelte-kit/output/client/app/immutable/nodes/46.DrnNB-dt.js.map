{"version":3,"file":"46.DrnNB-dt.js","sources":["../../../../../../src/routes/(wallet)/logout/+page.svelte"],"sourcesContent":["<script lang=\"ts\">\n\timport { browserSvelte } from '$lib/common/environment';\n\timport {\n\t\tresetStores,\n\t\tsetMiscStore,\n\t\tsetYakklTokenDataCustomStorage,\n\t\tyakklCurrentlySelectedStore,\n\t\tyakklSettingsStore,\n\t\tyakklTokenDataCustomStore\n\t} from '$lib/common/stores';\n\timport { setBadgeText, setIconLock } from '$lib/utilities/utilities';\n\n\timport { type Settings, type YakklCurrentlySelected } from '$lib/common';\n\timport { removeTimers } from '$lib/common/timers';\n\timport { removeListeners } from '$lib/common/listeners';\n\timport { setLocks } from '$lib/common/locks';\n\timport { resetTokenDataStoreValues } from '$lib/common/resetTokenDataStoreValues';\n\timport { log } from '$lib/common/logger-wrapper';\n\timport { stopActivityTracking } from '$lib/common/messaging';\n\timport { ErrorHandler } from '$lib/managers/ErrorHandler';\n\n\t// Initialize error handler\n\tif (browserSvelte) {\n\t\tErrorHandler.getInstance();\n\t}\n\n\t// Reactive State\n\tlet yakklCurrentlySelected: YakklCurrentlySelected | null = $state(null);\n\tlet yakklSettings: Settings | null = $state(null);\n\n\t$effect(() => {\n\t\tyakklCurrentlySelected = $yakklCurrentlySelectedStore;\n\t});\n\t$effect(() => {\n\t\tyakklSettings = $yakklSettingsStore;\n\t});\n\n\tlet isUpdating = false; // Prevent concurrent executions\n\n\tasync function update() {\n\t\tif (!browserSvelte) return;\n\t\tif (isUpdating) return; // Prevent multiple updates\n\t\tisUpdating = true;\n\n\t\ttry {\n\t\t\tawait stopActivityTracking();\n\t\t\t// Set lock icon\n\t\t\tawait setBadgeText('');\n\t\t\tawait setIconLock();\n\t\t\tsetLocks(true);\n\n\t\t\t// Clear session-specific state\n\t\t\tremoveTimers();\n\t\t\tremoveListeners();\n\t\t\tsetMiscStore('');\n\t\t\tresetTokenDataStoreValues();\n\t\t\tsetYakklTokenDataCustomStorage($yakklTokenDataCustomStore); // Zero out values in custom token storage\n\t\t\tresetStores();\n\t\t} catch (error) {\n\t\t\tlog.error('Logout failed:', false, error);\n\t\t\talert(\n\t\t\t\t'Logout encountered an error. Please try again or refresh the extension via browser extension manager.'\n\t\t\t);\n\t\t} finally {\n\t\t\tisUpdating = false;\n\t\t\twindow.close();\n\t\t}\n\t}\n\n\tif (browserSvelte) {\n\t\tupdate();\n\t}\n</script>\n"],"names":["browserSvelte","ErrorHandler","getInstance","yakklCurrentlySelected","$.tag","$.state","yakklSettings","$.user_effect","set","$yakklCurrentlySelectedStore","$yakklSettingsStore","isUpdating","update","stopActivityTracking","setBadgeText","setIconLock","setLocks","removeTimers","removeListeners","setMiscStore","resetTokenDataStoreValues","setYakklTokenDataCustomStorage","$yakklTokenDataCustomStore","resetStores","error","log","alert","window","close"],"mappings":"6pDAsBKA,cAAe,CAClBC,aAAaC,aACd,CAGI,IAAAC,uBAAAC,IAAAC,MAA+D,MAAI,0BACnE,IAAAC,cAAAF,IAAAC,MAAwC,MAAI,iBAEhDE,YAAc,KACbC,IAAAL,uBAAyBM,+BAAA,QAE1BF,YAAc,KACbC,IAAAF,cAAgBI,sBAAA,YAGbC,WAAa,qBAEFC,SACT,IAAAZ,cAAA,OACD,GAAAW,WAAA,OACSA,WAAA,KAET,UACGE,6BAEAC,aAAa,UACbC,cACNC,SAAS,MAGTC,eACAC,kBACAC,aAAa,IACbC,4BACAC,+BAA+BC,8BAC/BC,aACD,OAASC,OACJC,IAAAD,MAAM,iBAAkB,MAAOA,OACnCE,MACC,yGAEA,QACYf,WAAA,MACbgB,OAAOC,OACR,CACD,IAEI5B,cAAe,CAClBY,QACD"}