{"version":3,"mappings":"q7JASO,SAASA,QAAQC,UAAWC,UAAYC,QAAQC,KACtDC,gBAAgB,YAEhB,IAAIC,QAAU,KAEdC,eAAe,KAEd,IAAIC,MAAQC,cAMR,IACHD,MAAQP,WACR,OAAQS,OAERP,QAAQO,MAAMA,MACjB,CAEE,GAAIF,QAAUC,cAAe,CAC5BP,UAAUI,QAAU,OAAS,YAAaK,SAASH,MAAO,MAC7D,CAEYF,QAAA,OAEZ,CC7BM,MAAAM,oBAAsB,sBACtB,MAAAC,uBAAyB,yBACzB,MAAAC,uBAAyB,yBACzB,MAAAC,oBAAsB,sBACtB,MAAAC,sBAAwB,wBACxB,MAAAC,mBAOF,WAAAC,CAAYC,sDAJZC,cAAAC,KAAA,qCAEAD,cAAAC,KAAA,eACAD,cAAAC,KAAA,oEAmBIC,GAAIC,kBAAKC,KAAIC,QACb,mBAAoBC,mBAAmBL,KAAKM,YAAYF,SACxD,gBAAiBG,gBAAgBP,KAAKQ,SAASJ,SAC9Cb,sBAAsB,mCApBvBkB,aAAAT,KAAKG,IAAML,MAAMG,IACjBD,KAAKQ,SAAWV,MAAMU,SACtBC,aAAAT,KAAKU,KAAOZ,MAAMa,KAClBC,WAAU,CACNX,GAAIH,MAAMG,GACVU,IAAKT,aAAAF,KAAIU,QAEbV,KAAKM,YAAcR,MAAMQ,YACzBG,aAAAT,KAAKa,MAAQf,MAAMgB,MACnBd,KAAKe,iBAAmBC,eAAc,CAClCC,WAAYf,aAAIF,KAAAG,KAChBe,cAAe1B,uBACfsB,KAAMZ,aAAIF,KAAAa,OACVP,YAAaN,KAAKM,uBAG1BR,mDAAKX,yHAOIgC,6BAA6BvB,mBAGtC,WAAAC,CAAYC,OACRsB,MAAMtB,iCAFAC,cAAAC,KAAA,iBAGNS,aAAAT,KAAKqB,OAASvB,MAAMX,OACpBa,KAAKsB,aAAetB,KAAKsB,aAAaC,KAAKvB,MAC3CA,KAAKwB,WAAaxB,KAAKwB,WAAWD,KAAKvB,MAE3C,YAAAsB,CAAaG,MACF,OAAAC,cAAAxB,aAAAF,KAAKqB,QAAOjB,QAAYqB,MAEnC,UAAAD,CAAWC,MACPvB,aAAAF,KAAKqB,QAAOjB,QAAUJ,KAAKsB,aAAaG,MAAQ,GAAKA,+BAGhDE,4BAA4B/B,mBAGrC,WAAAC,CAAYC,OACRsB,MAAMtB,kCAFAC,cAAAC,KAAA,gBAGNS,aAAAT,KAAKqB,QAASvB,MAAMX,OACpBa,KAAKsB,aAAetB,KAAKsB,aAAaC,KAAKvB,MAC3CA,KAAKwB,WAAaxB,KAAKwB,WAAWD,KAAKvB,MAE3C,YAAAsB,CAAaG,MACF,OAAAvB,2BAAYE,QAAQwB,SAASH,MAExC,UAAAD,CAAWC,MACH,GAAAzB,KAAKsB,aAAaG,MAAO,CACzBvB,aAAAF,cAAYI,QAAUF,aAAKmB,cAAOjB,QAAQyB,OAAQC,GAAMJ,cAAAI,EAAML,KAAI,OACtE,KACK,CACDvB,aAAAF,KAAIqB,SAAQjB,QAAO,IAAOF,aAAImB,cAAQjB,QAASqB,4BAI9C,MAAAM,mBAQT,WAAAlC,CAAYC,wDALZC,cAAAC,KAAA,SACAD,cAAAC,KAAA,YACAD,cAAAC,KAAA,yDAC6BA,KAAKgC,KAAKV,aAAatB,KAAKb,MAAMiB,UAAO,mFACvCJ,KAAKQ,SAASJ,SAAWJ,KAAKgC,KAAKxB,SAASJ,SAAO,mFAkB9EH,GAAIC,kBAAKC,MAAIC,QACb,aAAc6B,kBAAkBjC,KAAKkC,UACrC,gBAAiB3B,gBAAgBP,KAAKmC,YACtC,mBAAoB9B,mBAAmBL,KAAKgC,KAAK1B,YAAYF,SAC5DV,sBAAsB,mCApBvBM,KAAKb,MAAQW,MAAMX,MACnBa,KAAKQ,SAAWV,MAAMU,SACtBR,KAAKgC,KAAOlC,MAAMsC,UAClB3B,aAAAT,KAAKG,KAAML,MAAMG,IACjBQ,aAAAT,KAAKU,MAAOZ,MAAMa,KAClBX,KAAKqC,YAAcrC,KAAKqC,YAAYd,KAAKvB,MAC/BY,WAAA,CACNX,GAAIC,aAAIC,WACRQ,IAAKT,aAAIQ,YACT4B,KAAI,IAAQtC,KAAKkC,uBAZzBA,yDAAQ/C,6DACRgD,6DAAUhD,iDAcV,WAAAkD,GACIrC,KAAKgC,KAAKR,WAAWxB,KAAKb,MAAMiB,kBAEpCN,oDAAKX,mJAQH,MAAAoD,sBASF,WAAA1C,CAAYC,MAAO0C,+KAHRC,IAAAC,aAAA,IAAqBxC,aAAAF,KAAK2C,WAAUvC,SAC3CF,aAAAF,KAAK4C,YAAWpC,SAASJ,SACzBF,yBAAWM,SAASJ,SAAO,uFAgC3BH,GAAIC,kBAAKC,MAAIC,QACbI,SAAQqC,IAAE3C,aAAAF,KAAI8C,eACd,gBAAiBC,gBAAgB7C,aAAKF,KAAA4C,YAAWV,UACjD,gBAAiBc,gBAAgBH,IAAA3C,aAAAF,qBACjC,gBAAiBO,gBAAgBsC,IAAA3C,aAAAF,qBACjC,aAAciC,kBAAkB/B,aAAKF,KAAA4C,YAAWV,UAChD,mBAAoB7B,mBAAmBH,yBAAWI,YAAYF,SAC7DZ,yBAAyB,GAC1ByD,SAAU,EAEVC,QAASlD,KAAKkD,QACdC,UAAWnD,KAAKmD,6CAzChB1C,aAAAT,KAAK2C,UAAY7C,MAAMU,UACvBC,aAAAT,KAAI4C,WAAcJ,WAClB/B,aAAAT,KAAKoD,MAAQZ,UAAUR,MACvBvB,aAAAT,KAAKG,KAAML,MAAMG,IACjBQ,aAAAT,KAAKU,MAAOZ,MAAMa,KAClBX,KAAKmD,UAAYnD,KAAKmD,UAAU5B,KAAKvB,MACrCA,KAAKkD,QAAUlD,KAAKkD,QAAQ3B,KAAKvB,MACjCY,WAAU,CACNX,GAAIH,MAAMG,GACVU,IAAKT,aAAAF,KAAIU,SAGjB,OAAAwC,CAAQG,GACAR,OAAA3C,iCAAgB,OAEhBwB,iBAAA2B,EAAEC,OAAW,EACN,cAAAD,EAAEE,iBACbrD,aAAAF,KAAI4C,YAAYP,cAEpB,SAAAc,CAAUE,GACFR,OAAA3C,iCAAgB,OAEhBwB,iBAAA2B,EAAEG,IAAQC,QAAS/B,cAAI2B,EAAEG,IAAQE,OAAW,CAC5CL,EAAEE,iBACFrD,aAAAF,KAAI4C,YAAYP,qBAGpBnC,aAAAF,KAAKoD,OAAMrC,iBAAiB4C,cAAczD,aAAKQ,YAAKN,QAASiD,YAEjEvD,oDAAKX,6LAeH,MAAAyE,sBAUF,WAAA/D,CAAYC,MAAO2B,MATnB1B,cAAAC,KAAA,yDAGA6D,aAAA7D,KAAA8D,iBAC6BD,aAAA7D,KAAA+D,2BAAA,OAC7BF,aAAA7D,KAAAgE,iBAAgB,GAAC,iCACjBH,aAAA7D,KAAAiE,kBAAiB,GAAC,iHAEU/D,aAAIF,KAAAkE,aAAa9D,SAAWJ,KAAKyB,KAAKS,UAAQ,kCA8CtEO,oCAAAC,aAAA,MAAAyB,KAAMnE,KAAKyB,KAAKS,YAAQ,wFAGxBjC,GAAIC,kBAAKC,MAAIC,QACb,aAAc6B,kBAAkBjC,KAAKyB,KAAKS,UAC1C,gBAAiB3B,gBAAgBP,KAAKyB,KAAKU,YAC3C,mBAAoB9B,mBAAmBL,KAAKyB,KAAKO,KAAK1B,YAAYF,SACjEX,yBAAyB,GAC1B2E,MAAK,CACD,kCAAiC,GAAAvB,IAAK3C,aAAAF,KAAIiE,cAC1C,iCAAgC,GAAApB,IAAK3C,aAAAF,KAAIgE,iDAtD7ChE,KAAKyB,KAAOA,KACZhB,aAAAT,KAAKkE,YAAcpE,MAAMuE,yDACSrE,KAAKyB,KAAKS,UAC5CzB,aAAAT,KAAKG,KAAML,MAAMG,IACjBQ,aAAAT,KAAKU,MAAOZ,MAAMa,KAClBC,WAAU,CACNX,GAAIC,aAAAF,KAAIG,MACRQ,IAAKT,aAAAF,KAAIU,SAEb4D,qBACU,MAAAC,IAAMC,sBAAqB,KAC7B/D,aAAAT,KAAI+D,2BAA8B,oBAGlCU,qBAAqBF,QAG7BG,MAAa,KAAA1E,KAAK2E,YAAezE,aAAAF,KAAIU,OAAMN,SAAY,EAAAwE,EAAGC,aACjDA,KAAI,OAETC,mBACS5E,aAAIQ,YAAMN,QAAO,OAGjBK,aAAAT,KAAA8D,gBAAkB5D,oCAAoB,CACvC6E,mBAAoBF,KAAKT,MAAMW,mBAC/BC,cAAeH,KAAKT,MAAMY,gBAG9BH,KAAKT,MAAMW,mBAAqB,KAChCF,KAAKT,MAAMY,cAAgB,OACrB,MAAAC,KAAOJ,KAAKK,wBAClBC,IAAAjF,aAAKF,KAAAiE,SAAUgB,KAAKG,OAAM,MAC1BD,IAAAjF,aAAKF,KAAAgE,QAASiB,KAAKI,MAAK,UAEnBnF,kBAAI6D,4BAA6B,CAC1B,MAAAiB,4BAAAD,mBAAeA,oBAAuB7E,mCAC9C2E,KAAKT,MAAMW,mBAAqBA,mBAChCF,KAAKT,MAAMY,cAAgBA,8BAxC3CL,uDAAOxF,8DA6CPmG,iEAAYnG,4DAGZW,oDAAKX,iFArDL2E,gBAAA,IAAAyB,QACAxB,2BAAA,IAAAwB,QACAvB,OAAA,IAAAuB,QACAtB,QAAA,IAAAsB,qDAgDIC,cAAA,IAAAD,4BAcF,MAAAE,qBAKF,WAAA5F,CAAYC,MAAO2B,2JAWfxB,GAAIC,kBAAKC,MAAIC,QACbsF,KAAM,UACN,aAAcxF,kBAAKyF,QAAOvF,QAC1B,qBAAsBF,kBAAKyF,QAAOvF,QAClC,aAAc6B,kBAAkB/B,aAAKF,KAAA4F,OAAM1D,UAC3C,mBAAoB7B,mBAAmBH,aAAAF,KAAI4F,OAAO5D,KAAK1B,YAAYF,SAClET,wBAAwB,qCAhBzBc,aAAAT,KAAK2F,OAAS7F,MAAM+F,OACpBpF,aAAAT,KAAKG,KAAML,MAAMG,IACjBQ,aAAAT,KAAKU,MAAOZ,MAAMa,KAClBC,WAAU,CACNX,GAAIC,aAAAF,KAAIG,MACRQ,IAAKT,aAAAF,KAAIU,SAEbD,aAAAT,KAAI4F,MAASnE,eAEjB3B,oDAAKX,gJAUF2G,wBAAyBC,yBAA2BC,cAAc,wBAClEC,wBAAyBC,yBAA2BF,cAAc,2BACzDG,iBAAiBrG,kBACrBsG,QAASC,MAASvG,MACpB,MAAAsC,UAASV,cAAG0E,KAAS,UAAQ,IACzBjF,qBAAqBkF,MAAI,IACzB1E,oBAAoB0E,MACvB,OAAAP,wBAAwB1D,UACnC,UACgBkE,iBAAiBxG,OACvB,MAAAsC,UAAY2D,0BACX,OAAAE,wBAA4B,IAAAlE,mBAAwB,IAAAjC,MAAOsC,sBACtE,UACgBmE,oBAAoBzG,OAC1B,MAAA2B,KAAOyE,qCACF3D,sBAAsBzC,MAAO2B,KAC5C,UACgB+E,oBAAoB1G,OAC1B,MAAA2B,KAAOyE,qCACFtC,sBAAsB9D,MAAO2B,KAC5C,UACgBgF,mBAAmB3G,OACzB,MAAA2B,KAAOyE,qCACFT,qBAAqB3F,MAAO2B,KAC3C,4XCnRE,IAAAjB,SAAWkG,KAAAC,QAAA,oBAIXxH,MAAAuH,KAAAC,QAAA,YACAhG,IAAA+F,KAAAC,QAAA,SAAgB,MAChB1G,GAAKyG,KAAAC,QAAA,QAAAC,OACLC,cAAgBH,KAAAC,QAAA,kBAAAG,MAChBhG,KAAO4F,KAAAC,QAAA,eACPrG,YAAcoG,KAAAC,QAAA,4BACdI,gBAAkBL,KAAAC,QAAA,2BACfK,UAAAC,+LAGJ9H,aAAU,IAAcA,iCAAiB,UAAW,aAE9CiD,UAAY+D,iBAAA,CACjBC,KAAAO,QAAAP,KACAjH,MAAO+H,IAAIC,KACJ,IAAAhI,QACL2C,OACIiF,kBAAiB,CACpBF,gBAAc/E,OACR,CACN3C,MAAQ2C,GACR+E,gBAAc/E,EACf,IAGF7B,GAAIiH,IAAIC,SAAWlH,MACnBO,SAAU0G,IAAIC,SAAW3G,YACzBM,KAAMoG,IAAIC,SAAWrG,QACrBR,YAAa4G,IAAIC,SAAW7G,eAC5BK,IAAKuG,IAAIC,KAAA,IACFxG,MACLmB,GAAOnB,IAAMmB,MAIV,MAAAsF,YAAuB3E,IAAAC,aAAA,IAAA2E,WAAWL,UAAW5E,UAAUtC,QAAK,6JAIjDwH,QAAAC,OAAA,IAAAZ,QAAAa,MAAA,MAAA1H,UAAOsH,6HAEfA,6qBC9CRnH,GAAKyG,KAAAC,QAAA,QAAAC,OACLpG,SAAWkG,KAAAC,QAAA,oBACXxH,MAAQuH,KAAAC,QAAA,WAAAC,OAGRjG,IAAA+F,KAAAC,QAAA,SAAgB,MACbK,UAAAC,yHAGEzE,UAAY8D,iBAAA,CACjBnH,MAAO+H,IAAIC,SAAWhI,SACtBqB,SAAU0G,IAAIC,SAAW3G,YACzBP,GAAIiH,IAAIC,SAAWlH,MACnBU,IAAKuG,IAAIC,KAAA,IACFxG,MACLmB,GAAOnB,IAAMmB,MAIV,MAAAsF,YAAuB3E,IAAAC,aAAA,IAAA2E,WAAWL,UAAWxE,UAAU1C,QAAK,6JAIjDwH,QAAAC,OAAA,IAAAZ,QAAAa,MAAA,MAAA1H,UAAOsH,6HAEfA,2qBCzBR,IAAAnH,GAAKyG,KAAAC,QAAA,QAAAC,OACLf,MAAQa,KAAAC,QAAA,aAGRhG,IAAA+F,KAAAC,QAAA,SAAgB,MACbK,UAAAC,8GAGEQ,YAAchB,mBAAA,CACnBxG,GAAIiH,IAAIC,SAAWlH,MACnB4F,MAAOqB,IAAIC,SAAWtB,SACtBlF,IAAKuG,IAAIC,KAAA,IACFxG,MACLmB,GAAOnB,IAAMmB,MAIV,MAAAsF,YAAuB3E,IAAAC,aAAA,IAAA2E,WAAWL,UAAWS,YAAY3H,QAAK,6JAInDwH,QAAAC,OAAA,IAAAZ,QAAAa,MAAA,MAAA1H,UAAOsH,6HAEfA,8rBCvBR,IAAA5G,SAAWkG,KAAAC,QAAA,oBACXhG,IAAA+F,KAAAC,QAAA,SAAgB,MAChB1G,GAAKyG,KAAAC,QAAA,QAAAC,OAGFI,UAAAC,iHAGES,aAAenB,oBAAA,CACpB/F,SAAU0G,IAAIC,SAAW3G,YACzBP,GAAIiH,IAAIC,SAAWlH,MACnBU,IAAKuG,IAAIC,KAAA,IACFxG,MACLmB,GAAOnB,IAAMmB,MAIV,MAAAsF,YAAuB3E,IAAAC,aAAA,IAAA2E,WAAWL,UAAWU,aAAa5H,QAAK,6JAIpDwH,QAAAC,OAAA,IAAAZ,QAAAa,MAAA,MAAA1H,UAAOsH,iJAEEA,isBCrBzB,IAAAzG,IAAA+F,KAAAC,QAAA,SAAgB,MAChB1G,GAAKyG,KAAAC,QAAA,QAAAC,OACLvC,WAAaqC,KAAAC,QAAA,sBAEVK,UAAAC,mHAGEU,aAAenB,oBAAA,CACpBnC,WAAY6C,IAAIC,SAAW9C,cAC3BpE,GAAIiH,IAAIC,SAAWlH,MACnBU,IAAKuG,IAAIC,KAAA,IACFxG,MACLmB,GAAOnB,IAAMmB,sHAMK,IAAA6C,oBAAA,YAAAiD,SAAAjD,2CACZ,MAAAyC,6BAAcC,WAAWL,UAAWW,aAAa7H,MAAK,CAC7D+H,OAAQxD,kBAA0B,GAAAM,UAAQvE,eADnCgH,8KAKNtH,UAAOsH,gBACJO,aAAarC,mLAGR8B,wRAXe,mBAAe,OAAAO,aAAahD,ivCCjBrDmD,OAASpB,KAAAC,QAAA,iBACToB,UAAYrB,KAAAC,QAAA,wBAQPqB,cAA+BC,eAAAtB,QAAAuB,MAAqBC,OAAQ,OAC5DzG,cACLsG,cAAkB,MACf,iBACAA,eAAiB,EAChB,iBACA,eAED,IAAAI,QAAA3F,IAAA4F,MAAAC,OAAAC,GAAA5B,QAAAuB,QAAA,UAAwB,EAAAK,GAAAH,UAAO,WAC/B,IAAAI,MAAA/F,IAAA4F,MAAe,GAAC,SAChB,IAAAI,eAAAhG,IAAA4F,MAAwB,IAAE,kBAC1B,IAAAlJ,MAAAsD,IAAA4F,MAAe,GAAC,SAChB,IAAAK,eAAAjG,IAAA4F,MAAwB,IAAE,kBAE9BM,YAAc,wBACbP,SAAiBG,IAAA5B,QAAAuB,QAAA,UAAAK,MAAAH,QAAA,MACjBQ,IAAAJ,QAAAK,IAAAC,IAAAnC,QAAAuB,QAAA,UAAAY,MAAeN,QAAf,YAAAK,GAAsBL,QAAS,QAC/BrD,IAAAsD,eAAiBM,gBAAYP,QAAK,MAClCrD,IAAAhG,MAAA0D,IAAQuF,SAAUY,OAAAnG,IAAOuF,UAAOvF,IAAI2F,OAAQ,QAC5CrD,IAAAuD,eAAiBK,gBAAY5J,QAAK,QAG/BJ,IAAAkK,KAAK,gBAAiB,OACzBf,MAAAvB,QAAAuB,MACAJ,gBACAM,QAAezB,QAAAuB,MAAAE,QACfc,SAAgBvC,QAAAuB,MAAAgB,SAChBV,OAAAM,GAAAnC,QAAAuB,MAAaM,QAAb,UAAoB,EAAAM,GAAAN,iBAIZW,kBACJtG,OAAA2F,OAAQ,IAAM,OAEXY,UAAYvG,IAAA2F,OAAMa,sBAAcC,oBAC3BF,UAAUG,QAAQ,SAAU,KACxC,CACU,SAAAR,YAAAlG,IAAY2F,SACvB,uPAYmBgB,+CAAoBC,6EAD1BD,QAAOE,SAAAC,gMASAR,yOAEf,wBAAAS,IAAApB,OAAQ,IACN,UAAYO,gCAAkBP,wBAAOA,QAAS,GAC9CO,cAAWD,IAAAnC,QAAAuB,MAAOM,QAAP,YAAAM,IAAcN,QAAS,uIAnB5BqB,mLAGyJ9B,aAAS,MAOtI+B,eAAA,GAAAnD,QAAAuB,MAAA6B,2BAAcN,QAAM,4OAqB1CD,iDAAoBC,+EAD1BD,QAAOE,SAAAM,+MASAb,2OAEf,wBAAAS,IAAApB,OAAQ,IACN,UAAYO,gCAAkBP,wBAAOA,QAAS,GAC9CO,cAAWD,IAAAnC,QAAAuB,MAAOM,QAAP,YAAAM,IAAcN,QAAS,4PAhBiGT,aAAS,MAO1GkC,SAAAC,OAAA,GAAAvD,QAAAuB,MAAA6B,2BAAcN,QAAM,4EApCnDI,IAAGH,SAAAS,mBAAAT,SAAAU,UAAA,gbCtDZ,IAAAzJ,IAAA+F,KAAAC,QAAA,SAAgB,MAGbK,UAAAC,iJAMG,MAAAoD,WAAA3H,aAAA,IAAA4H,GACN,2HAA0H3D,QAAA4D,2MAGvHvD,qkBCbH,IAAArG,IAAA+F,KAAAC,QAAA,SAAgB,MAEbK,UAAAC,sIAIoC,MAAAoD,WAAA3H,aAAA,IAAA4H,GAAG,WAAU3D,QAAA4D,wMAAkBvD;;;;;;GCLxE,MAAMwD,kBAAoB,CACtBC,MAAO,6BACPpF,MAAO,GACPD,OAAQ,GACRsF,QAAS,YACTC,KAAM,OACNC,OAAQ,eACR,eAAgB,EAChB,iBAAkB,QAClB,kBAAmB,sjBCdZ,IAAAb,gCAAgB,GAChB,IAAAc,6BAAQ,gBACR,IAAAC,2BAAO,IACP,IAAAC,yCAAc,GACd,IAAAC,yDAAsB,WACtBC,SAAQvE,KAAAC,QAAA,sBACb,MAAAuE,aAAmB,IAAAC,UAAYA,QAAQtJ,OAAQ,CAAAkG,UAAWqD,OAAOC,QAC5DC,QAAQvD,YAAcrG,cAAA2J,MAAME,QAAQxD,WAAeqD,SAEzDI,KAAK,gEAIJhB,qBACAiB,kBACGX,cACCA,cACAD,0CAENG,sBACIhC,OAAO+B,eAAe,GAAK/B,OAAO8B,QAClCC,kBAGJG,aACE,cACA,SACAnB,OAAiB,UAAAA,SAAQ,GACjB2B,kBAAAnB,yCAILU,SAAQU,MAAA,CAAAC,UAAAC,oEAAKC,KAAI,IAAAjJ,IAAAkJ,SAAA,cAACC,MAAM,IAAAnJ,IAAAkJ,SAAA,gGACPD,2FAASE,2jBC3B7B,MAAAf,SAAa,SAAU,CAAAgB,EAAK,yGAce,OAAAhB,+kBCf/C,IAAAtK,IAAA+F,KAAAC,QAAA,SAAgB,MAEhBd,MAAQa,KAAAC,QAAA,aAELK,UAAAC,qZASI,MAAAoD,WAAA3H,aAAA,IAAA4H,GACN,+HAA8H3D,QAAA4D,gNAG3HvD,0gBCnBN,MAAMkF,KAAOC,2gBCiBXC,iBAAmB1F,KAAAC,QAAA,wBACnBmB,OAASpB,KAAAC,QAAA,iBACT0F,UAAA3F,KAAAC,QAAA,mBAAYmB,SAAS,EAAI,GACzBC,UAAYrB,KAAAC,QAAA,kBAGT,IAAA2F,OAAA7J,IAAA4F,MAAAC,MAAA,eACA,IAAAiE,cAAA9J,IAAA4F,MAAAC,MAAA,sBACA,IAAAkE,gBAAA/J,IAAA4F,MAAAC,MAAA,wBACA,IAAAmE,WAAAhK,IAAA4F,MAAoB,OAAK,cAEzBqE,MAAAzD,KAAK,qBAAsB,MAAO,YAEtC0D,QAAkCC,UAC7BF,MAAAzD,KAAK,qBAAsB,MAAO,WAEhC,MAAA4D,eAA2BC,kBAC5BD,SAASE,OAASF,SAASG,MAAMC,YAAa,CAClDrE,IAAA0D,OAAA,SACAY,yBACM,CACNC,wBAAwBC,KAAMC,gBAC7BvO,QAAQC,OAAAuO,sBAAA,MAAI,6CAA8CD,cAAcE,SAGpE,GAAA7L,cAAA2L,cAAcE,OAAW,GAAG,CAC/BxO,MAAIyO,KACH,mNAE8C,OAAAC,uCAAA,KAAAC,YAAA,cAAA7D,KAAEuD,OAAQK,yCACxDA,qBAAoBL,KAAW,KAE9BD,wBAAwBC,KAAMO,iBAC7B7O,QAAQC,OAAAuO,sBAAA,MAAI,0CAA2CK,eAAeJ,SAChEK,0BAAqB9F,SAASuE,YAAYA,YAAY,EAAIA,YAAY,EAC5EzD,IAAA0D,OACCsB,oBAAqB,EAClBD,eAAeE,MAAM,EAAGD,qBACxBD,eAAA,MACJT,0BAIJ,CAEM,MAAAU,mBAAqB9F,SAASuE,YAAYA,YAAY,EAAIA,YAAY,EAC5EzD,IAAA0D,OACCsB,mBAAqB,EAAIP,cAAcQ,MAAM,EAAGD,oBAAsBP,cAAA,MACvEH,sBAEF,IAEIY,YAAa,CACJA,YAAAC,QAAQC,UAAUC,YAAYC,2BAC1CJ,YAAYC,QAAQI,aAAcC,OAAQ,iBAE1CC,qBACAC,mBACD,OAGMC,YAAcC,wBAAwBC,UAAWC,YAEhD,MAAAd,mBAAqB9F,SAASuE,YAAYA,YAAY,EAAIA,YAAY,EAC5EzD,IAAA0D,OAASsB,mBAAqB,EAAIc,UAAUb,MAAM,EAAGD,oBAAsBc,UAAA,MAC3ExB,uBAGY,WACZqB,iBACIT,YAAa,CACJA,YAAAC,QAAQC,UAAUW,eAAeT,0BAC9C,cAIOhB,sCAEJd,mBAAqB,IAAAvJ,IAAKyJ,QAAOiB,QAAUnB,mBAAkB,KAChEG,cAAgB1J,IAAAyJ,QAAA,MAChB1D,IAAA4D,gBAAA,aACM,CACN5D,IAAA2D,cAAgB1J,IAAAyJ,QAAOuB,MAAM,EAAGzB,oBAAgB,MAChDxD,IAAA4D,gBAAkB3J,IAAAyJ,QAAOuB,MAAMzB,oBAAgB,KAChD,CACAtN,QAAQC,OAAIuO,sBAAA,4BACXf,cAAA1J,IAAA0J,eACAC,gBAAA3J,IAAA2J,iBACAJ,oCACAC,sBACAvE,kBAEF,uCASQ8G,KAAAC,MAAA,OAAAhM,IAAA0J,gCAAiBrE,48BAWpB4G,gBAAA,IAAAC,SAAAjF,OAAAjH,IAAA4J,YAAa,YAAsB,QAAA5J,IAAA2J,iBAAgBe,6RAI5CqB,KAAAI,MAAA,OAAAnM,IAAA2J,kCAAmBtE,uVAV1BsE,iBAAgBe,OAAS,WAAC5D,2EAPpBW,GAAG,gBAAiBvC,+lBCrH9B,IAAAkH,MAAQvI,KAAAC,QAAA,8BACRuI,QAAUxI,KAAAC,QAAA,yCACVwI,QAAUzI,KAAAC,QAAA,uBACVyI,eAAiB1I,KAAAC,QAAA,qUAgBCyI,eAAcpP,KAAAqP,OAAAC,OAAA,0FAC7BH,+DAFE,GAAAC,iBAAc1F,SAAAC,0EAHasF,yBACXC,8cCjBrBK,YAAc7I,KAAAC,QAAA,uBAEG6I,KAAA7I,QAAA,4bASb,GAAA4I,cAAW7F,SAAAC,iBAAAD,SAAAU,UAAA,oJCuCPqF,SAAWC,IAAAC,aAAAC,OACnBhH,IAAA+G,cAAA9M,IAAgB8M,cAAe,EAAIC,QAAMrC,QAAUqC,QAAMrC,OAC1D,ygDAxBC,IAAAsC,KAAAnJ,KAAAC,QAAA,UAAiB,MACjBiJ,MAAAlJ,KAAAC,QAAA,mBACAmJ,SAAWpJ,KAAAC,QAAA,gBACXoJ,WAAarJ,KAAAC,QAAA,qBACbqJ,aAAetJ,KAAAC,QAAA,uBASZ,IAAAgJ,aAAAlN,IAAA4F,MAAsB,GAAC,gBACrB,MAAA4H,aAAeC,oBAAoBC,oBACnCC,QAAU,kBACZ,IAAAhQ,QAAAqC,IAAAC,aAAA,IAAmBkN,YAAMD,gBAAY,oBAEhCU,YACRV,cAAgB9M,IAAA8M,cAAe,GAAKC,QAAMrC,OAC3C,CAMA5E,YAAc,KACT,GAAAoH,cAAcD,WAAW,GAAKF,QAAMrC,OAAS,EAAG,CACnD0C,aAAaK,aAAaF,SAC1BH,aAAaM,eAAeH,SAC5BH,aAAaO,YAAYJ,QAASC,MAAMP,YACxCG,aAAaQ,cAAcL,aACrB,CACNH,aAAaK,aAAaF,SAC1BH,aAAaM,eAAeH,QAC7B,IAGDM,UAAgB,KACfT,aAAaK,aAAaF,SAC1BH,aAAaM,eAAeH,wQAUhBX,SAAQE,aAAAC,0FAoBRS,4EAxBP,GAAAL,gBAAgBJ,QAAMrC,OAAS,WAAC5D,sIA+ClBvJ,SAAQgP,gDACfhP,UAAQgP,wCAAiBvM,IAAA8M,gBAC/B,4CAHCvP,SAAO,6JAQIA,SAAQuQ,+CACdvQ,UAAQuQ,uCAAgB9N,IAAA8M,qBACrB,2CACIvP,SAAQgP,gDACfhP,UAAQgP,wCAAiBvM,IAAA8M,gBAC/B,wCANCvP,SAAO,oOASLwQ,KAAAC,OAAA,IAAAhO,IAAAzC,SAAQ0Q,uFADN1Q,SAAQgG,KAAS,mBAAQ2K,+EAVzB3Q,SAAQgG,KAAS,eAAI4D,mBAAAN,SAAAsH,YAAA,oEAP1B5Q,SAAQgG,KAAS,mBAAQ+D,mBAAAT,SAAAU,UAAA,qGAwBtB6G,KAAAC,MAAA,GAAAtB,uBAAShL,EAACuM,6BAKCC,SAAAC,QAAA,IAAAlM,IAAAwK,aAAewB,EAAC,MACPG,cAAAF,SAAA,4BAAAD,EAAI,KAJsBrC,gBAAA,IAAAyC,UAAAH,SAAA,gDAAA1P,cAAAyP,EAAMtO,IAAA8M,eACtD,aACA,gHANF,GAAAK,gBAAgBJ,QAAMrC,OAAS,WAACiE,sEAvBzBxB,gBAAgBJ,QAAMrC,OAAS,EAAI,OAAS,sDA7CrD,GAAAsC,OAAInG,SAAA+H,miBCzEA3G,KAAOpE,KAAAC,QAAA,aAAIiE,OAASlE,KAAAC,QAAA,2BAAgBoB,UAAYrB,KAAAC,QAAA,uHASjDmE,mCACCA,6BACD/C,+hBCNWyH,KAAA7I,QAAA,+mBCAZoB,UAAYrB,KAAAC,QAAA,4EAWXoB,gIC0DE,SAAA2J,kBAAkBrO,8EAC1BA,EAAEE,qBACFoO,WAAa,MACb/I,IAAAgJ,OAASvO,EAAEwO,QAAA,MACX1M,IAAA2M,YAAAjP,IAAckP,aAAYC,aAAA,MACjBC,SAAAC,iBAAiB,YAAaC,kBAC9BF,SAAAC,iBAAiB,UAAWE,gBACtC,UAmBSC,eAAiBzN,EAAA0N,iBACzBA,aAAezP,IAAAyP,aAChB,q6CA1FC,IAAAzC,KAAAnJ,KAAAC,QAAA,UAAiB,MAEX4L,MAAO7L,KAAAC,QAAA,eACboB,UAAYrB,KAAAC,QAAA,kBACZ6L,SAAW9L,KAAAC,QAAA,oBACX8L,IAAM/L,KAAAC,QAAA,eACN+L,WAAahM,KAAAC,QAAA,8CACbgM,UAAYjM,KAAAC,QAAA,uBACZiM,UAAYlM,KAAAC,QAAA,uBACZmB,OAASpB,KAAAC,QAAA,iBACDkM,OAASnM,KAAAC,QAAA,iBACjBmM,YAAApM,KAAAC,QAAA,2BACcoM,aAAerM,KAAAC,QAAA,uBAC7BqM,kBAAAtM,KAAAC,QAAA,iCAoBG,IAAA2L,YAAA7P,IAAA4F,MAAqB,OAAK,eAC1B,IAAAsJ,WAAAlP,IAAA4F,MAAoB,OAAK,cACzB,IAAA4K,WAAAxQ,IAAA4F,MAAAC,MAAoBqK,cAAS,cAC7B,IAAAf,OAAAnP,IAAA4F,MAAgB,GAAC,UACjB,IAAAyJ,YAAArP,IAAA4F,MAAqB,GAAC,eACtB,IAAA0J,YAAAtP,IAAA4F,MAAyC,MAAI,eAC7C,IAAA6K,eAAAzQ,IAAA4F,MAA4C,MAAI,kBAChD,IAAA8K,SAAA1Q,IAAA4F,MAAkB,OAAK,YACvB,IAAA+K,oBAAA3Q,IAAA4F,MAA6B,IAAE,gCAE1BgL,uCACHtB,eAAgBlP,IAAAqQ,gBAAA,OAEf,MAAAI,eAAAzQ,OACJkP,aAAYwB,cAAc,YADtB1Q,eACwDmP,eAAgB,EACxE,MAAAwB,kBAAA3Q,OACJqQ,gBAAeK,cAAc,WADzB1Q,eAC0DmP,eAAgB,QAI1EyB,aAAe5Q,IAAAsQ,UAAWG,aAAeE,gBAAkBF,aACjE1K,IAAAwK,oBAAA,GAAyBK,qBAGrBC,SAAS7Q,IAAAoQ,aAAcQ,aAAc,KACxCR,WAAapQ,IAAAuQ,qBAAA,KACd,CACD,CAWS,SAAAjB,iBAAiB9O,GACpB,IAAAR,IAAA8O,YAAA,OAEC,MAAAgC,OAAStQ,EAAEwO,QAAUhP,IAAA+O,QACrB,MAAAgC,UAAYC,KAAKC,IACtBJ,SAAS7Q,IAAAuQ,sBAAuBT,aAChCkB,KAAKE,IAAIL,SAASd,aAAY/P,IAAAiP,aAAc6B,SAE7C/K,IAAAqK,WAAA,GAAgBW,cACjB,UAESxB,sBACRT,WAAa,OACJM,SAAA+B,oBAAoB,YAAa7B,kBACjCF,SAAA+B,oBAAoB,UAAW5B,gBACzC,CAMAzF,QAAc,KAEb0G,qBAGM,MAAAY,SAAA,IAAeC,iBAAuB,KAC3CtL,IAAAuK,SAAWzR,cAAAmB,IAAAqQ,gBAAeK,cAAc,SAAa,aACrDF,8BAGGH,gBAAgB,CACVe,SAAAE,QAAQtR,IAAAqQ,gBAAA,CAChBkB,UAAW,KACXC,QAAS,MAEX,CAEa,WACHpC,SAAA+B,oBAAoB,YAAa7B,kBACjCF,SAAA+B,oBAAoB,UAAW5B,iBACxC6B,SAASK,mcAwBH/B,WAAI7I,SAAAC,2KAKU+I,2MADd,GAAAD,MAAG/I,SAAAS,gGASEkI,eAAcC,oSAGlBA,aAAW5I,SAAAM,mBAAAN,SAAAU,UAAA,4LAWPmK,UAAAC,MAAAC,SAAAtP,IAAA+N,iVAeSF,4PAMNF,oFAJJ,GAAAD,SAAMnJ,SAAA8H,sDANX,GAAA1J,UAAUiL,wBAAYhC,mBAAArH,SAAAsH,YAAA,0EADtBsB,sBAAWb,mHAuBFC,mQANTY,sBAAWoC,2BAvENH,UAAAI,IAAAF,SAAAtP,IAAA4M,kHAUKO,aAAc,OAAMzP,IAAGoQ,cAAU,0EAqBlCX,aAAc,iBAAmB,mDAe/BA,aAAc,IAAM,YA7C9B,IAAAsC,KAAAtK,GACN,6FACA,0CACA,kBACA,gBACA,WACAkI,YAAY,gCACZzK,gEAVE,GAAA8H,OAAInG,SAAAmL,uwBCjIA/J,KAAOpE,KAAAC,QAAA,aAAIiE,OAASlE,KAAAC,QAAA,2BAAgBoB,UAAYrB,KAAAC,QAAA,uHASjDmE,mCACCA,6BACD/C,i4ECVDA,UAAYrB,KAAAC,QAAA,4EAqBXoB,irBCrBDA,UAAYrB,KAAAC,QAAA,4EAaXoB,y+BCdDA,UAAYrB,KAAAC,QAAA,kFAWXoB,0zDCJR6E,eAAsBa,oBACjB,IAEH3O,QAAQC,IAAI,0BAEZ,MAAMuN,OAAsBwI,cAAcC,IAAK7M,oCAC1C,IAAC8M,cAAc9M,OAAQ,CAC1B,MAAM,IAAI+M,MAAM,uBAAuBC,KAAKC,UAAUjN,SAAQ,CAExD,OACNkN,QAASlN,MAAMkN,QACfrL,KAAM7B,MAAM6B,KACZN,OAAQvB,MAAMuB,OACdH,SAAUpB,MAAMoB,SAChB+L,QAASnN,MAAMmN,QACfC,SAAUpN,MAAMoN,UAAY,MAC5BC,aAAcrN,MAAMqN,cAAgB,MACpC/L,QAAStB,MAAMsB,SAAW,GAC1BgM,YAAatN,MAAMsN,aAAe,GAClCpN,QAASF,MAAME,SAAW,GAC1Bc,SAAUhB,MAAMgB,UAAY,EAC5BV,MACCN,MAAMM,OACL,CACAA,QAAOD,GAAAL,MAAMM,QAAN,YAAAD,GAAaC,QAAS,EAC7B8M,WAAUxM,GAAAZ,MAAMM,QAAN,YAAAM,GAAawM,WAAY,MACnCG,WAAU5M,GAAAX,MAAMM,QAAN,YAAAK,GAAa4M,WAAY,GACnCC,cAAaC,GAAAzN,MAAMM,QAAN,YAAAmN,GAAaD,cAAe,EACzCL,UAASO,GAAA1N,MAAMM,QAAN,YAAAoN,GAAaP,UAAW,EACjCQ,WAAUC,GAAA5N,MAAMM,QAAN,YAAAsN,GAAaD,WAAY,GACnCE,SAAQC,GAAA9N,MAAMM,QAAN,YAAAwN,GAAaD,SAAU,GAC/B7G,UAAS+G,GAAA/N,MAAMM,QAAN,YAAAyN,GAAa/G,UAAW,IAEnC/G,OAAQD,MAAMC,QAAU,GACxBhJ,MAAO+I,MAAM/I,OAAS,EACtB+W,KAAMhO,MAAMgO,MAAQ,GACpBC,QAASjO,MAAMiO,SAAW,GAC1BC,cAAe,UACfC,UAAWnO,MAAMmO,WAAa,KAC9BC,cAAepO,MAAMoO,eAAiB,KACtCzM,IAAK3B,MAAM2B,KAAO,YAKd0M,yBAAyBjK,QAG/BvN,MAAIkK,KAAK,uBAAuBqD,OAAOiB,wBAAyB,MAAO,CACtEiJ,aAAclK,OAAOyI,IAAK0B,GAAMA,EAAEhN,gBAE3BpK,OACJqN,MAAAc,KAAK,iCAAkC,MAAOnO,MAAK,CAEzD,CAKA,SAAS2V,cAAc9M,OAGrB,cAAOA,MAAMkN,UAAY,iBAClBlN,MAAM6B,OAAS,iBACf7B,MAAMuB,SAAW,iBACjBvB,MAAMoB,WAAa,iBACnBpB,MAAMmN,UAAY,iBAClBnN,MAAMsB,UAAY,QAE3B,0JC/CO,MAAMkN,yBAAN,MAAMA,yBAKJ,WAAA7W,GAHAE,cAAAC,KAAA,gBAAmE2W,KACnE5W,cAAAC,KAAA,eAAe,EAAI,GAAK,IAEV,CAEtB,kBAAOmQ,GACF,IAACuG,yBAAwBE,SAAU,CACdF,yBAAAE,SAAW,IAAIF,wBAAwB,CAEhE,OAAOA,yBAAwBE,QAAA,CAGhC,eAAMC,CAAUC,SAEf,MAAMC,OAAS/W,KAAKgX,UAAUpN,IAAIkN,SAClC,GAAIC,QAAUE,KAAKC,MAAQH,OAAOI,UAAYnX,KAAKoX,aAAc,CAChE,OAAOL,OAAOM,IAAA,CAGX,IAEG,MAAAC,eAAiBC,MAAMT,QAAS,CACrCU,QAAS,CACR,aAAc,gCAAkCC,QAChDC,OAAQ,oDAIN,IAACJ,SAASK,GAAI,CACjB,MAAM,IAAI1C,MAAM,6BAA6BqC,SAASM,aAAY,CAG7D9N,kBAAawN,SAASxN,OAC5B,MAAM+N,WAAa7X,KAAK8X,aAAahO,MAAMgN,SAGtC9W,KAAAgX,UAAUpO,IAAIkO,QAAS,CAAEO,KAAMQ,KAAMV,UAAWF,KAAKC,cAGpDlX,KAAK+X,4BAA4BjB,QAASe,MAEzC,OAAAA,WACCxY,OACAP,QAAAO,MAAM,2BAA4BA,OAG1C,MAAM2Y,iBAAmBhY,KAAKiY,6BAA6BnB,SAC3D,GAAIkB,WAAY,CACR,OAAAA,UAAA,CAGF,MAAA3Y,KAAA,CACP,CAGD,iCAAc0Y,CAA4BjB,QAAiBe,MACtD,IACH,MAAMrU,IAAM,YAAY0U,KAAKpB,iBACvBhJ,YAAYqK,QAAQC,MAAMxP,IAAI,CAAEpF,CAACA,KAAMqU,aACrCxY,OACAP,QAAAO,MAAM,6CAA8CA,MAAK,CAClE,CAGD,kCAAc4Y,CAA6BnB,SACtC,IACH,MAAMtT,IAAM,YAAY0U,KAAKpB,WAC7B,MAAMuB,aAAevK,YAAYqK,QAAQC,MAAMxO,IAAIpG,KACnD,OAAO6U,OAAO7U,WACNnE,OACAP,QAAAO,MAAM,8CAA+CA,OACtD,YACR,CAGD,yBAAciZ,CACbzO,KAEI,IACG,MAAAyN,eAAiBC,MAAM1N,IAAK,CACjC2N,QAAS,CACR,aAAc,gCAAkCC,QAChDC,OAAQ,qCAIN,IAACJ,SAASK,GAAI,CACjB,MAAM,IAAI1C,MAAM,4BAA4BqC,SAASM,aAAY,CAG5D9G,kBAAawG,SAASxN,OACrB,OAAA9J,KAAKuY,sBAAsBzH,aAC1BzR,OACAP,QAAAO,MAAM,kCAAmCA,OACjD,MAAO,CAAEmZ,QAAS,GAAIC,QAAS,UAAU,CAC1C,CAGO,qBAAAF,CAAsBzH,OAIvB,MAAA4H,OAAS,IAAIC,UACnB,MAAMC,IAAMF,OAAOG,gBAAgB/H,MAAM,aAGnC,MAAAgI,SAAWF,IAAIrF,cAAc,uDAC7B,MAAAwF,SAAWH,IAAIrF,cAAc,+CAEnC,GAAIuF,UAAYC,SAAU,CACzB,MAAO,CAAEP,QAAS,GAAIC,QAAS,UAAU,CAI1C,MAAMO,iBAAmB,CAExB,yBAEA,wBAEA,2BACA,mBACA,wBACA,yBAEA,WAID,UAAWC,YAAYD,iBAAkB,CAClCE,eAAUN,IAAIrF,cAAc0F,UAClC,GAAIC,SAAS,CAEN,MAAAC,iBAAmBD,SAAQE,iBAAiB,ubAUlDD,iBAAiBE,QAASC,IAAOA,GAAGC,UAGhC,IAAAf,QAAUU,SAAQM,aAAe,GAGrChB,QAAUA,QACRjP,QAAQ,OAAQ,KAChBA,QAAQ,OAAQ,MAChBA,QAAQ,WAAY,IACpBA,QAAQ,WAAY,IACpBkQ,OAGF,MAAMC,UAAYlB,QAAQmB,MAAM,OAAOpM,OACvC,MAAMkL,QAAUzY,KAAK4Z,qBAAqBpB,QAASkB,WAEnD,GAAIjB,UAAY,UAAW,CACnB,OAAED,gBAASC,gBAAQ,CAC3B,CACD,CAGD,MAAO,CAAED,QAAS,GAAIC,QAAS,UAAU,CAGlC,oBAAAmB,CACPpB,QACAkB,WAGA,MAAMG,cAAgBrB,QAAQmB,MAAM,MAAMpM,OAAS,EACnD,MAAMuM,UAAYtB,QAAQ5W,SAAS,MAAQ4W,QAAQ5W,SAAS,KAC5D,MAAMmY,cAAgBvB,QAAQ5W,SAAS,SAAW4W,QAAQ5W,SAAS,gBAGnE,GAAI8X,UAAY,KAAOG,gBAAkBC,WAAaC,eAAgB,CAC9D,yBACGL,UAAY,KAAOG,cAAe,CACrC,gBAED,gBAGA,iBAAAG,CACPvY,KACA+T,oBAEM,MAAAgD,QAAUhD,YAAYyE,cAGxB,GAAAzB,QAAQ5W,SAAS,UAAY4W,QAAQ5W,SAAS,UAAY4W,QAAQ5W,SAAS,WAAY,CACnF,cAEJ,GAAA4W,QAAQ5W,SAAS,WAAa4W,QAAQ5W,SAAS,YAAc4W,QAAQ5W,SAAS,SAAU,CACpF,gBAIF,MAAAsY,kBAAoBzY,KAAK8R,cAAc,4BACvC,MAAA4G,kBAAoB1Y,KAAK8R,cAAc,4BAE7C,GAAI2G,kBAA0B,cAC9B,GAAIC,kBAA0B,gBAGxB,MAAAC,aACL3Y,KAAK4Y,qBAAqB,iBAAiB,IAC3C5Y,KAAK4Y,qBAAqB,mBAAmB,GAC9C,GAAID,aAAc,CACjB,MAAMhU,OAAOmC,GAAa6R,aAAAE,aAAa,UAA1B,eAAmCL,gBAAiB,GACjE,GAAI7T,KAAKmU,WAAW,SAAiB,cACrC,GAAInU,KAAKmU,WAAW,SAAiB,gBAG/B,gBAGR,kBAAMzC,CAAa0C,QAAiB1D,sBAC7B,MAAA4B,OAAS,IAAIC,UACnB,MAAMC,IAAMF,OAAOG,gBAAgB2B,QAAS,YAGtC,MAAAC,WAAa7B,IAAIrF,cAAc,eACrC,GAAIkH,WAAY,CACT,UAAIxF,MAAM,0BAAyB,CAIpC,MAAAyF,QAAU9B,IAAIrF,cAAc,WAClC,IAAKmH,QAAS,CACP,UAAIzF,MAAM,uCAAsC,CAGvD,MAAMhG,QAAQ1G,GAAQmS,QAAAnH,cAAc,WAAtB,eAAgCiG,cAAe,GAC7D,MAAMhE,cAAc1M,GAAQ4R,QAAAnH,cAAc,iBAAtB,eAAsCiG,cAAe,GACzE,MAAMmB,OAAO9R,GAAQ6R,QAAAnH,cAAc,UAAtB,eAA+BiG,cAAe,GAG3D,MAAM5J,MAAmB,GACnB,MAAAgL,aAAehC,IAAIQ,iBAAiB,QAG1C,MAAMyB,aAAejO,UACpB,MAAMkO,iBAAmB,EACnB,MAAAC,OAASC,MAAMC,KAAKL,cAAcM,OAAO,CAACC,IAAK1Z,KAAM0P,KAC1D,MAAMiK,WAAavH,KAAKwH,MAAMlK,EAAI2J,kBAClC,IAAKK,IAAIC,YAAiBD,IAAAC,YAAc,GACpCD,IAAAC,YAAYE,KAAK7Z,MACd,OAAA0Z,KACL,IAEH,UAAWI,SAASR,OAAQ,OACrBS,QAAQC,IACbF,MAAMxG,IAAInI,MAAOnL,4CACV,MAAAia,YACL5S,KAAAP,IAAA9G,KAAK8R,cAAc,WAAnB,UAAAhL,MAA6BiR,cAA7B,YAAA1Q,IAA0CS,QAAQ,qBAAsB,MAAO,GAC1E,MAAAoS,WAAW9S,IAAApH,KAAK8R,cAAc,UAAnB,YAAA1K,IAA4B2Q,cAAe,GACtD,MAAAoC,kBACLhG,IAAKD,GAAAlU,KAAA8R,cAAc,iBAAnB,eAAmCiG,cAAnC,YAAA5D,GAAgDrM,QAAQ,qBAAsB,MAC9E,GAGD,MAAMsS,YAAc7b,KAAKga,kBAAkBvY,KAAMma,iBAGjD,IAAIpD,QAAUxY,KAAK8b,UAAUF,kBAAoBF,UACjD,IAAIK,eAAqD,UAEzD,GAAIF,cAAgB,UAAW,CAC1B,IAEH,MAAMG,sBAAwBva,KAAK4Y,qBAAqB,mBAAmB,GAC3E,MAAM4B,iBACLnG,GAAuBkG,uBAAA,YAAAA,sBAAAxC,cAAvB,UAAoC,EAAA1D,GAAAvM,QAAQ,qBAAsB,MAAO,GAEtE,GAAA0S,gBAAkBA,eAAe1O,OAAS,IAAK,CACxCiL,QAAAyD,eACVF,eAAiB/b,KAAK4Z,qBAAqBpB,QAASA,QAAQmB,MAAM,OAAOpM,gBAC/DoO,SAAU,CAEpB,MAAMtD,aAAerY,KAAKsY,oBAAoBqD,UAC9C,GAAItD,OAAOG,QAAS,CACnBA,QAAUH,OAAOG,QACjBuD,eAAiB1D,OAAOI,OAAA,CACzB,QAEOpZ,OACAP,QAAAO,MAAM,oCAAqCA,MAAK,CAEzD,CAGD,MAAM6c,UAAUlG,GAAKvU,KAAA8R,cAAc,aAAnB,eAA+BiG,cAAe,GAC9D,MAAM2C,OAAOlG,GAAKxU,KAAA8R,cAAc,UAAnB,eAA4BiG,cAAe,GAGxD,MAAM4C,WAAuB,GAC7B3a,KAAK2X,iBAAiB,YAAYC,QAASgD,MAC1C,GAAIA,IAAI7C,YAAwB4C,WAAAd,KAAKe,IAAI7C,eAI1C,IAAI8C,SAAWtc,KAAKuc,qBAAqB9a,KAAMma,iBAGzC,MAAAY,WAAaxc,KAAKyc,iBAAiBd,UAEzC,MAAMe,QAAmB,CACxBzN,MAAOyM,UACPiB,SAAUP,WAAW7O,OAAS,EAAI6O,WAAW,GAAK,cAClD5G,YAAaxV,KAAK8b,UAAUF,kBAAoBF,UAChDlD,gBACA8D,kBACAM,OAAQ5c,KAAK6c,qBAAqB/F,SAClCgG,KAAM9c,KAAK+c,WAAWb,SACtBc,YAAad,QACbrS,IAAK2S,WACLL,UACAC,sBACAa,SACCC,IAAKC,GAAA1b,KAAA8R,cAAc,YAAnB,eAA8BiG,cAA9B,YAAA0D,GAA2C3T,QAAQ,qBAAsB,MAAO,GACjFsS,wBACAE,+BAGDnM,MAAM0L,KAAKoB,WAEb,SAII7B,eAEC,OACN5L,YACAuG,wBACAmF,UACA/K,YACA8F,gBAAiBuB,KAClB,CAGO,oBAAAsF,CAAqB9a,KAAe+T,aAErC,MAAA4E,aAAe3Y,KAAK8R,cAAc,gBACxC,GAAI6G,aAAc,CACV,OAAAA,aAAaE,aAAa,QAAU,GAItC,MAAA8C,eAAiB3b,KAAK8R,cAAc,kBAC1C,GAAI6J,eAAgB,CACZ,OAAAA,eAAe9C,aAAa,QAAU,GAIxC,MAAA+C,UAAY5b,KAAK8R,cAAc,4BACrC,GAAI8J,UAAW,CACP,OAAAA,UAAU/C,aAAa,QAAU,GAInC,MAAAgD,cAAgBtd,KAAKud,qBAAqB/H,aAChD,GAAI8H,cAAe,CACX,OAAAA,aAAA,CAID,2EAGA,oBAAAC,CAAqBzM,OACtB,MAAA0M,SAAW1M,MAAK2M,MAAM,kCACrB,OAAAD,SAAWA,SAAS,GAAK,GAGzB,SAAA1B,CAAUhL,OACX,MAAA6D,IAAM1C,SAASyL,cAAc,OACnC/I,IAAIgJ,UAAY7M,MACT,OAAA6D,IAAI6E,aAAe7E,IAAIiJ,WAAa,GAGpC,oBAAAf,CAAqBhT,KACxB,IACH,MAAMgU,SAAW,IAAIC,IAAIjU,KAAKgU,SACvB,OAAAA,SAAStU,QAAQ,OAAQ,IAAIoQ,MAAM,KAAK,EAAC,CACzC,MACA,iBACR,CAGO,gBAAA8C,CAAiB5S,KACpB,IACG,MAAAkU,OAAS,IAAID,IAAIjU,KACjB,MAAAmU,UAAYD,OAAOE,OAAO1Q,OAAS,EAGlCwQ,OAAAG,aAAatV,IAAI,aAAc,aAC/BmV,OAAAG,aAAatV,IAAI,aAAc,UAC/BmV,OAAAG,aAAatV,IAAI,eAAgB,aAGxCmV,OAAOG,aAAatV,IAAI,gBAAiBqO,KAAKC,MAAMiH,YAEpD,OAAOJ,OAAOI,UAAS,CAChB,MACA,OAAAtU,GAAA,CACR,CAGO,UAAAkT,CAAWqB,YACd,IACG,MAAAtB,KAAO,IAAI7F,KAAKmH,YAChB,MAAAlH,QAAUD,KACV,MAAAoH,YAAcxK,KAAKwH,OAAOnE,IAAIoH,UAAYxB,KAAKwB,YAAc,IAAO,GAAK,KAE/E,GAAID,cAAgB,EAAG,CAChB,MAAAE,cAAgB1K,KAAKwH,OAAOnE,IAAIoH,UAAYxB,KAAKwB,YAAc,IAAO,KAC5E,OAAOC,gBAAkB,EAAI,WAAa,GAAGA,2BAAa,SAChDF,YAAc,GAAI,CAC5B,MAAO,GAAGA,uBAAW,SACXA,YAAc,GAAI,CACrB,sBACD,CACN,MAAMG,WAAa3K,KAAKwH,MAAMgD,YAAc,IAC5C,MAAO,GAAGG,qBAAU,CACrB,CACO,MACA,OAAAJ,UAAA,CACR,GAlbDre,cADY2W,yBACG,YADT,IAAM+H,wBAAN/H,0uCCVU3O,UAAYrB,KAAAC,QAAA,kBAAa6I,KAAA7I,QAAA,iBAGnC,MAAA+X,gBAAA/X,QAAAgY,UAAAhY,QAAAgY,SAEI1P,OACAtI,QAAAgY,SAAAnJ,aAAA7O,QAAAgY,SACArC,UACA3V,QAAAgY,SAAA/B,QAAAjW,QAAAgY,SACA7B,MACAnW,QAAAgY,SAAA9U,ujBAMOA,8CAQEyS,mDACArN,uCAMJA,wCAGM2N,yCAEAE,uCAGNtH,qIAzBV,GAAAkJ,yBAAe/U,iBAAAD,SAAAU,UAAA,6DADTrC,mlBC3BLA,UAAYrB,KAAAC,QAAA,0HAGmEoB,klCCH/EA,UAAYrB,KAAAC,QAAA,mFASXoB,k4BCTDA,UAAYrB,KAAAC,QAAA,mFASXoB,0OC8hBU,IAAA6W,WAAA,CAAAha,EAAAia,YAAAlY,UAAAkY,4BAAoBhV,uGAYnB,IAAAiV,aAAA,CAAApP,IAAAqP,yBAAA5Z,IAAA4Z,uBAAyB,42BA1iB1CC,gBAAkBtY,KAAAC,QAAA,0BAClBsY,aAAevY,KAAAC,QAAA,uBACfuY,cAAgBxY,KAAAC,QAAA,yBAUMwY,QAAA,KAAAxY,QAAAyY,SAAAtgB,QAAQC,KAE3B,IAAAggB,uBAAAtc,IAAA4F,MAAgC,OAAK,0BAGnC,MAAAgX,aAAeC,QAAQC,6BAA+BC,QAC3DA,OAAOC,KAAMC,GAAMhe,cAAAge,EAAEzQ,MAAkBtI,QAAAyY,QAAAnQ,QAAAvN,cAASge,EAAE9C,OAAAjW,QAAAyY,QAAmBxC,UAI7D,SAAA+C,gBAAgBnH,SAClB,MAAAE,OAAa,IAAAC,gBACbC,IAAMF,OAAOG,gBAAgBL,QAAS,aAGtC,MAAAoH,iBAAA,CACL,SACA,SACA,QACA,OACA,OACA,SACA,QACA,SACA,WACA,OACA,QACA,SACA,SACA,WACA,YACA,WACA,YACA,gCACA,wBACA,yBACA,uBACA,qBACA,kBACA,kBACA,iBACA,kBACA,mBACA,qBACA,iBACA,kBACA,kBACA,cACA,kBACA,iBACA,mBACA,qBACA,oBACA,iBACA,kBACA,kBACA,qBACA,mBACA,mBACA,gBACA,iBACA,mBACA,mBACA,kBACA,iBACA,iBACA,eACA,iBACA,gBACA,eACA,mBACA,cACA,gBACA,iBACA,gBACA,mBACA,kBACA,gBACA,gBACA,iBACA,uBACA,gBACA,qBACA,gBACA,eACA,uBACA,mBACA,cACA,gBACA,iBACA,gBACA,mBACA,kBACA,gBACA,gBACA,iBACA,uBACA,gBACA,sBAGgBA,iBAAAvG,QAASJ,WACrBL,IAAAQ,iBAAiBH,UAAUI,QAASC,IAAOA,GAAGC,YAInDX,IAAIQ,iBAAiB,KAAKC,QAASC,KAClCA,GAAGuG,gBAAgB,SACnBvG,GAAGuG,gBAAgB,WACnBvG,GAAGuG,gBAAgB,UACnBvG,GAAGuG,gBAAgB,WACnBvG,GAAGuG,gBAAgB,eACnBvG,GAAGuG,gBAAgB,cACnBvG,GAAGuG,gBAAgB,gBACnBvG,GAAGuG,gBAAgB,gBACnBvG,GAAGuG,gBAAgB,eACnBvG,GAAGuG,gBAAgB,aACnBvG,GAAGuG,gBAAgB,eACnBvG,GAAGuG,gBAAgB,aACnBvG,GAAGuG,gBAAgB,WACnBvG,GAAGuG,gBAAgB,cACnBvG,GAAGuG,gBAAgB,WACnBvG,GAAGuG,gBAAgB,UACnBvG,GAAGuG,gBAAgB,YACnBvG,GAAGuG,gBAAgB,YACnBvG,GAAGuG,gBAAgB,WACnBvG,GAAGuG,gBAAgB,YACnBvG,GAAGuG,gBAAgB,WACnBvG,GAAGuG,gBAAgB,aACnBvG,GAAGuG,gBAAgB,oBACnBvG,GAAGuG,gBAAgB,oBACnBvG,GAAGuG,gBAAgB,aACnBvG,GAAGuG,gBAAgB,WACnBvG,GAAGuG,gBAAgB,WACnBvG,GAAGuG,gBAAgB,gBACnBvG,GAAGuG,gBAAgB,oBACnBvG,GAAGuG,gBAAgB,eACnBvG,GAAGuG,gBAAgB,WACnBvG,GAAGuG,gBAAgB,UACnBvG,GAAGuG,gBAAgB,aACnBvG,GAAGuG,gBAAgB,cACnBvG,GAAGuG,gBAAgB,gBACnBvG,GAAGuG,gBAAgB,sBACnBvG,GAAGuG,gBAAgB,YACnBvG,GAAGuG,gBAAgB,aACnBvG,GAAGuG,gBAAgB,aACnBvG,GAAGuG,gBAAgB,aACnBvG,GAAGuG,gBAAgB,gBACnBvG,GAAGuG,gBAAgB,kBACnBvG,GAAGuG,gBAAgB,eAIpBjH,IAAIQ,iBAAiB,WAAWC,QAASsB,OACpC,IACG,MAAAmF,KAAOnF,KAAKL,aAAa,WAC3BwF,OAASA,KAAKvF,WAAW,QAAS,CAC/B,MAAAwF,YAAkB,IAAAjC,IAAIgC,KAAcnZ,QAAAyY,QAAAvV,KAAKsU,WAC1CxD,KAAAqF,aAAa,OAAQD,YAC3B,CACD,OAAS1c,GACRvE,QAAQO,SAAAiO,sBAAA,QAAM,wBAAyBjK,GACxC,IAIG,IAAA4c,iBAAmBrH,IAAIsH,KAAKvC,UAGhCsC,iBAAmBA,iBACjB1W,QAAQ,sDAAuD,IAC/DA,QAAQ,gBAAiB,IACzBA,QAAQ,UAAW,IACnBA,QAAQ,cAAe,IACvBA,QAAQ,iBAAkB,IAC1BA,QAAQ,iBAAkB,IAC1BA,QAAQ,iBAAkB,IAC1BA,QAAQ,iBAAkB,IAErB,OAAA0W,gBACR,gBAGeE,iBACT,IAAAnB,kBAAA,aAECoB,mBAAqBC,mCAEvBC,gBAAe,CAEZ,MAAAC,gBAAkBH,mBAAmBve,OACzC6d,KAAAhe,cAAQge,EAAEzQ,MAAkBtI,QAAAyY,QAAAnQ,QAAAvN,cAASge,EAAE9C,OAAmBjW,QAAAyY,QAAAxC,gBAEtD4D,2BAA2BD,qBAC3B,CAEA,MAAAE,YAAcL,mBAAmBX,KACrCC,GAAAhe,cAAMge,EAAEzQ,MAAkBtI,QAAAyY,QAAAnQ,QAAAvN,cAASge,EAAE9C,OAAmBjW,QAAAyY,QAAAxC,aAGrD6D,YAAa,OAEXF,gBAAsB,IAAAH,mBAAAzZ,QAAAyY,eACtBoB,2BAA2BD,gBAClC,CACD,CACD,gBAGeG,eACT,IAAAxB,gBAAA,OAES,GAAAvY,QAAAga,SAAA,6CAEP,OACAR,gBACP,KAEApB,uBAAyB,MAC1B,CAiBS,SAAAF,YAAY+B,WAAqB,IAOzC9hB,QAAQC,OAAAuO,sBAAA,MAAI,wCAAyCsT,aAC/C,MAAAX,iBAAmBN,gBAAAhZ,QAAAyY,QAChB5G,yBAAmBhD,aAAuB7O,QAAAyY,QAAAnQ,OAE7C,MAAA6B,MAAO+P,kCAA2BZ,wBAElCa,YAAcC,OAAO5c,KAAK,GAAI,cAC/B2c,YAAa,CACjBhiB,QAAQO,MAAM,qCAEf,CAGAyhB,YAAY7O,SAAS9N,OACT2c,YAAA7O,SAAS+O,MAAMlQ,OAC3BgQ,YAAY7O,SAASgP,QAGrBH,YAAYI,OAAe,KAC1BJ,YAAYK,QACZL,YAAYM,QA+Gd,CAyBS,SAAAP,kBAAkBzB,SAAkBa,iGAK3Bb,SAAQnQ,gpEAwETmQ,SAAQnQ,gGAEqBmQ,SAAQxC,gCACvCwC,SAAQnC,OAA2CmC,2CAAQnC,gBAAkB,uDAC3CmC,SAAQpC,aAAeoC,SAAQtC,mGAInEmD,iDAGRb,SAAQhD,YAAcgD,SAAQhD,WAAW7O,OAAS,2DAGlC6R,SAAQhD,WAAWrH,IAAKjJ,MAAA,qBAAqCA,eAAcN,KAAK,sCAG7F,4EAGyB4T,SAAQvV,wBAAwBuV,SAAQvV,4CACzC,IAAAoN,MAAOoK,sIACuEC,mBAAmBlC,SAAQxC,uBAAuB0E,mBAAmBlC,SAAQnQ,4GAK3L,2GAMkBqR,gBAAgB,qBAAuB,+KAM9CH,4EAGYG,gBACjB,kBACA,kPATkEtB,kBACnE,GACA,oDACQA,qeAY2DC,eACnE,GACA,sDACQA,keAS2DC,gBACnE,GACA,sDACQA,uLAUNH,kHAGK2B,aACKa,SAAA,KACfpc,IAAA4Z,uBAAyB,6CAPvBA,wBAAsBrV,SAAAC,ykBC7eN,IAAAiV,WAAA,CAAAha,EAAA4c,8BAAArc,IAAAqc,iCAA+BA,02CApDlD,IAAAC,UAAA/a,KAAAC,QAAA,uBACA+a,gBAAkBhb,KAAAC,QAAA,uBAClBoB,UAAYrB,KAAAC,QAAA,kBACZmB,OAASpB,KAAAC,QAAA,iBACTgb,gBAAAjb,KAAAC,QAAA,yBAAkBmB,SAAS,EAAI,GAI1B,MAAA8Z,kBAAoB9Z,SAAUpG,cAAAigB,kBAAoB,GAAI,EAAIA,kBAAmB,EAC7E,MAAAE,aAAeD,kBAAoB,EAAIH,YAAU5T,MAAM,EAAG+T,mBAAqBH,gBACjFK,aAAsBrf,IAAA4F,MAAAC,MAAAuZ,aAAahU,MAAM,EAAG6T,qBAAe,gBAC3D,IAAAK,eAAwBtf,IAAA4F,MAAAC,MAAAuZ,aAAahU,MAAM6T,qBAAe,kBAC1D,IAAAF,4BAAA/e,IAAA4F,MAAqC,MAAI,+BAG7CM,YAAc,KACPiZ,yBAAoB9Z,SAAUpG,cAAAigB,kBAAoB,GAAI,EAAIA,kBAAmB,EAC7EE,oBAAeD,mBAAoB,EAAIH,YAAU5T,MAAM,EAAG+T,oBAAqBH,gBACrFK,aAAeD,cAAahU,MAAM,EAAG6T,mBAAe,UACpDK,eAAiBF,cAAahU,MAAM6T,mBAAe,QAI9C,MAAAM,cAAgBH,aAAatU,OAAS,6HAOnCqB,KAAAC,MAAA,OAAAhM,IAAAif,+BAAgBrgB,KAAI2J,iIAKI3J,iIAEHA,2IACrB,GAAA2J,OAAQvI,IAAAif,cAAavU,OAAS,WAAC5D,ggBAoB9B6X,6BAA2B9X,SAAAS,mBAAAT,SAAAU,UAAA,oHAUzBwE,KAAAqT,MAAA,OAAApf,IAAAkf,iCAAkBtgB,KAAI2J,iIAKE3J,mGAEHA,+IACrB,GAAA2J,OAAQvI,IAAAkf,gBAAexU,OAAS,WAACvD,gIAVpCwX,sCAA2BzQ,6BAX9BmR,gBAAA,IAAAnT,SAAAjF,MAAA,GAAAjH,IAAAkf,gBAAexU,QAAM,+EAPrBwU,gBAAexU,OAAS,WAACiE,kJArB1B,GAAAwQ,uBAAavQ,mBAAA/H,SAAAsH,YAAA,6DADPjJ,0qBCnDLA,UAAYrB,KAAAC,QAAA,mFASXoB,iKCoGQoa,aAAevd,EAAAwd,WAI7BA,WAGD,6mCA5GM,MAAAC,aAAe,EAAI,GAAK,IACxB,MAAAC,eAAiB,GAAK,GAAK,IAchC,IAAAzS,KAAAnJ,KAAAC,QAAA,UAAiB,MAEjB+a,gBAAkBhb,KAAAC,QAAA,uBAClBoB,UAAYrB,KAAAC,QAAA,kBACZmB,OAASpB,KAAAC,QAAA,iBACTgb,gBAAAjb,KAAAC,QAAA,yBAAkBmB,SAAS,EAAI,GAC/BmH,MAAQvI,KAAAC,QAAA,yBACRmJ,SAAWpJ,KAAAC,QAAA,aAAA0b,cAIN,MAAAE,kBAAoBza,SAASwa,eAAiBxS,WAEhD,IAAA2R,UAAAhf,IAAA4F,MAAAC,MAAA,kBACA,IAAAka,UAAA/f,IAAA4F,MAAmB,MAAI,aACvB,IAAAhJ,MAAAoD,IAAA4F,MAA8B,MAAI,SAEhC,MAAAoa,WAAahE,wBAAwBtO,cACrC,MAAAF,aAAeC,oBAAoBC,oBACnCC,QAAU,mBAEhBzD,QAAc,KACbyV,YAGanS,aAAAO,YAAYJ,QAASgS,UAAWG,mBAC7CtS,aAAaQ,cAAcL,eAGrBsS,gBAAmB,CAAAxT,QAAcyT,OAAaC,gBAC/C,GAAAlhB,cAAAwN,QAAQ9I,KAAS,mBAAmB,CACvCgc,WACD,CACO,OAAA5G,QAAQqH,QAAQ,OAGZ/U,YAAAC,QAAQC,UAAUC,YAAYyU,iBAE7B,WACZzS,aAAaK,aAAaF,SAC1BH,aAAaM,eAAeH,SAChBtC,YAAAC,QAAQC,UAAUW,eAAe+T,mCAIhCN,gBACdI,UAAY,UACZnjB,MAAQ,MAEJ,IACG,MAAAyjB,SAAA,GAGA,MAAAC,aAAApc,QAAAqc,SAAwBjO,IAC5BlL,KACA4Y,WAAW5L,UAAUhN,KAAKoZ,MAAOC,MAChCnkB,MAAIyO,KAA6B,wBAAA3D,OAAQ,MAAOqZ,KACzC,qBAIJC,YAAc3H,QAAQC,IAAIsH,cAG1BI,MAAA9J,QAASxB,UACVA,KAAM,CACAiL,SAAAxH,QAAQzD,KAAKjI,MAAM/B,MAAM,EAAG8T,mBACtC,IAIQmB,SAAAM,KAAA,CAAM1D,EAAG2D,KACX,MAAAC,MAAQC,kBAAkB7D,EAAE5C,MAC5B,MAAA0G,MAAQD,kBAAkBF,EAAEvG,MAC3B,OAAA0G,MAAMlF,UAAYgF,MAAMhF,YAGhC1V,IAAA6Y,UAAYqB,SAAA,KACb,OAASI,SACR7jB,MAAQ6jB,eAAejO,MAAQiO,IAAIhU,QAAU,iCACzCxC,MAAAc,KAAK,kBAAmB,MAAO0V,KAClC,YACDV,UAAY,MACb,CACD,CAWS,SAAAe,kBAAkBE,SACpB,MAAAvM,QAAUD,KAEZvV,iBAAA+hB,QAAY,YAAY,CACpB,OAAAvM,GACR,CAEM,MAAAuG,MAAQgG,QAAQhG,MAAM,wCACxBA,MAAO,OACJte,MAAQuU,SAAS+J,MAAM,IACvB,MAAAiG,KAAOjG,MAAM,GAEX,OAAAiG,MACF,aACO,WAAAzM,KAAKC,IAAIoH,UAAYnf,MAAQ,GAAK,KACzC,WACO,WAAA8X,KAAKC,IAAIoH,UAAYnf,MAAQ,GAAK,GAAK,KAC9C,UACO,WAAA8X,KAAKC,IAAIoH,UAAYnf,MAAQ,GAAK,GAAK,GAAK,KAE1D,CAEIuC,iBAAA+hB,QAAY,aAAa,CACjB,WAAAxM,KAAKC,IAAIoH,UAAY,GAAK,GAAK,GAAK,IAChD,CAGO,OAAApH,GACR,uYAcaiL,aAAYC,+DAFG/iB,+NAYf8iB,aAAYC,yYAFanT,6EAb3B5P,OAAKqK,SAAAS,mBAAAT,SAAAsH,YAAA,sDAJVwR,WAAS9Y,SAAAC,iBAAAD,SAAAU,UAAA,6DADHrC,+DADR,GAAA8H,OAAInG,SAAAM,ooCC1JFjC,UAAYrB,KAAAC,QAAA,kFAWXoB,0ICuNE,SAAA4b,qEACJC,aAAY,CACT,MAAAzkB,MAAAuC,cAAAmB,IAAQghB,cAAiB,OAAAhhB,IAAQihB,KAAMpiB,cAAAmB,IAAAghB,cAAiB,YAASE,MAAOlhB,IAAAmhB,OAC9EJ,aAAWzkB,UAAO0kB,eACb,IAAAI,UAASpU,KAAO,MACtB,CACD,UAESqU,YAAcxU,IAAAoU,IAAAC,KAAAC,WACtBF,IAAM,QACNC,KAAO,QACPC,MAAQ,GACT,8nHApOC,IAAAnU,KAAAnJ,KAAAC,QAAA,UAAiB,OACjBwd,aAAezd,KAAAC,QAAA,qBACfyd,YAAc1d,KAAAC,QAAA,yBACdid,WAAald,KAAAC,QAAA,qBACbsd,QAAUvd,KAAAC,QAAA,mBACV0d,aAAe3d,KAAAC,QAAA,uBACf2d,QAAgB5d,KAAAC,QAAA,iBACfkJ,KAAO,SAaL,IAAAiU,IAAArhB,IAAA4F,MAAa,IAAE,OACf,IAAA0b,KAAAthB,IAAA4F,MAAc,IAAE,QAChB,IAAA2b,MAAAvhB,IAAA4F,MAAe,IAAE,SACjB,IAAAkc,SAAA9hB,IAAA4F,MAAkB,GAAC,YACnB,IAAAwb,aAAAphB,IAAA4F,MAAAC,MAAgD8b,gBAAW,gBAG3D,IAAAI,WAAA/hB,IAA+BC,aAAA,KAC9B,GAAAG,IAAAmhB,QAAAnhB,IAAS0hB,WAAYF,eAAc,CAChC,MAAAI,SAAWC,eAAWV,YACvBW,MAAMF,WAAaA,SAAW,EAAG,CAC/B,MAAAG,SAAWH,SAAW5hB,IAAA0hB,UACjB,UAAAK,SAASvD,oBAAe,GAAawD,sBAAuB,EAAGC,sBAAuB,KAClG,CACD,CACO,yBAGF,MAAAC,aAAmB,IAAAC,aAAA,EACtBvP,SAAc,IAAAwP,sBAAyBC,OAAQ,IAC/CzP,SAAc,IAAA0P,uBAA0BD,OAAQ,IAChDzP,SAAc,IAAA2P,oBAAuBF,OAAQ,KAIvC,SAAAG,UAAUvB,MACd,IACEA,wBAAOA,KAAQ,KAAY,SAC1B,MAAAwB,OAASC,OAAOzB,MAChB,MAAA0B,UAAYF,OAAS,YACrB,MAAAG,UAAYH,OAAS,YAEvB5jB,iBAAA+jB,UAAc,IAAI,QACdD,UAAUrH,UAClB,CAEM,MAAAuH,aAAeD,UAAUtH,WAAWwH,SAAS,EAAG,WAChDC,QAAUF,aAAanc,QAAQ,MAAO,OAExCqc,QAAS,CACF,SAAAJ,aAAaI,SACxB,QACOJ,UAAUrH,WACV,MACA,QACR,CACD,CAES,SAAA0H,WAAW/B,MACf,IACEA,wBAAOA,KAAQ,KAAY,SAC1B,MAAAwB,OAASC,OAAOzB,MAChB,MAAAgC,WAAaR,OAAS,qBACtB,MAAAG,UAAYH,OAAS,qBAEvB5jB,iBAAA+jB,UAAc,IAAI,QACdK,WAAW3H,UACnB,CAEM,MAAAuH,aAAeD,UAAUtH,WAAWwH,SAAS,GAAI,WACjDC,QAAUF,aAAanc,QAAQ,MAAO,OAExCqc,QAAS,CACF,SAAAE,cAAcF,SACzB,QACOE,WAAW3H,WACX,MACA,QACR,CACD,CAES,SAAA4H,UAAUhC,OACd,QACEA,MAAa,SACZ,MAAAiC,MAAQjC,MAAKpK,MAAM,KACnB,MAAAsM,UAAYD,MAAM,IAAM,IACxB,MAAAE,YAAcF,MAAM,IAAM,GAE1B,MAAAG,cAAgBD,YAAYE,OAAO,EAAG,KAAKvY,MAAM,EAAG,GACpD,MAAAwY,UAAYd,OAAOU,WAAa,YAChC,MAAAK,aAAef,OAAOY,eAEpB,OAAAE,UAAYC,cAAcnI,WAC3B,MACA,QACR,CACD,CAES,SAAAoI,YAAYxC,OAChB,QACEA,MAAa,SACZ,MAAAyC,SAAWT,UAAUhC,OACpB,OAAA8B,WAAWW,UACX,MACA,QACR,CACD,CAES,SAAAC,WAAWzC,QACf,QACEA,OAAc,SACb,MAAAgC,MAAQhC,OAAMrK,MAAM,KACpB,MAAAsM,UAAYD,MAAM,IAAM,IACxB,MAAAE,YAAcF,MAAM,IAAM,GAE1B,MAAAG,cAAgBD,YAAYE,OAAO,GAAI,KAAKvY,MAAM,EAAG,IACrD,MAAA6Y,SAAWT,UAAYE,cAEtB,OAAAZ,OAAOmB,UAAUvI,WACjB,MACA,QACR,CACD,CAES,SAAAwI,YAAY3C,QAChB,QACEA,OAAc,SACb,MAAAwC,SAAWC,WAAWzC,QACrB,OAAAqB,UAAUmB,UACV,MACA,QACR,CACD,gBAGeI,gBACV,UACGvO,aAAe0M,aAAa8B,eAAe,WACjD1hB,IAAAof,SAAWlM,6BAAiBA,OAAW,WAAY,UAAWA,OAASA,OAAO7P,MAAQ,OACvF,OAASnJ,OACJqN,MAAArN,MAAM,6BAA8B,MAAOA,WAC/CklB,SAAW,EACZ,CACD,CAGS,SAAAuC,eAAezjB,GACjB,MAAA0jB,OAAS1jB,EAAE0jB,OACX,MAAA5nB,MAAQ4nB,OAAO5nB,UAEhB,QAAQ6nB,KAAK7nB,OAAQ,CAClB4nB,OAAA5nB,MAAQ0D,IAAAihB,WAEhB,CAEAlb,IAAAkb,IAAM3kB,MAAA,UACN0kB,aAAe,UACX1kB,MAAO,CACVgG,IAAA4e,KAAOsB,UAAUlmB,OAAK,MACtBgG,IAAA6e,MAAQ6B,WAAW1mB,OAAK,UAClB,KACN4kB,KAAO,QACPC,MAAQ,GACT,CACD,CAES,SAAAiD,gBAAgB5jB,GAClB,MAAA0jB,OAAS1jB,EAAE0jB,OACX,MAAA5nB,MAAQ4nB,OAAO5nB,UAEhB,kBAAkB6nB,KAAK7nB,OAAQ,CAC5B4nB,OAAA5nB,MAAQ0D,IAAAkhB,YAEhB,CAEAnb,IAAAmb,KAAO5kB,MAAA,UACP0kB,aAAe,WACX1kB,MAAO,CACVgG,IAAA2e,IAAMiC,UAAU5mB,OAAK,MACrBgG,IAAA6e,MAAQuC,YAAYpnB,OAAK,UACnB,KACN2kB,IAAM,QACNE,MAAQ,GACT,CACD,CAES,SAAAkD,iBAAiB7jB,GACnB,MAAA0jB,OAAS1jB,EAAE0jB,OACX,MAAA5nB,MAAQ4nB,OAAO5nB,UAEhB,mBAAmB6nB,KAAK7nB,OAAQ,CAC7B4nB,OAAA5nB,MAAQ0D,IAAAmhB,aAEhB,CAEApb,IAAAob,MAAQ7kB,MAAA,UACR0kB,aAAe,YACX1kB,MAAO,CACVgG,IAAA2e,IAAM2C,WAAWtnB,OAAK,MACtBgG,IAAA4e,KAAO4C,YAAYxnB,OAAK,UAClB,KACN2kB,IAAM,QACNC,KAAO,GACR,CACD,CAgBApX,QAAoBC,aACfyX,eAAc,OACXuC,eACP,IAEIzC,eAAc,CACT,OAAAC,eACF,UACJxb,IAAAkb,IAAMK,gBACN2C,eAAA,CAAiBC,QAAU5nB,MAAOglB,wBAE9B,WACJvb,IAAAmb,KAAOI,gBACP8C,gBAAA,CAAkBF,QAAU5nB,MAAOglB,wBAE/B,YACJvb,IAAAob,MAAQG,gBACR+C,iBAAA,CAAmBH,QAAU5nB,MAAOglB,wBAGvC,mLASkFD,YAAWJ,IAAAC,KAAAC,mJAgBjF8C,0IAYAG,2IAYAC,wMAOT1C,kEAFE,GAAAH,oBAAgBG,qBAAU7a,0IAQiCga,iIAF3D,GAAAC,aAAUla,SAAAS,2BApCAgd,WAAAC,MAAA,IAAAvkB,IAAAihB,sBAAGrP,UAYH0S,WAAAE,QAAA,IAAAxkB,IAAAkhB,wBAAItP,UAYJ0S,WAAAG,QAAA,IAAAzkB,IAAAmhB,0BAAKvP,+XA0BRyP,YAAWJ,IAAAC,KAAAC,mJA8BT8C,8IAYAG,+IAYAC,mVAgBN1C,0EAFEA,YAAU9a,SAAAqH,6FAPJ,IAAAlO,IAAA0hB,cACPA,UAASlD,oBAAwB,GACjCwD,sBAAuB,EACvBC,sBAAuB,IAEvB,4DARD,GAAAT,eAAY3a,SAAA8H,sKAsBsCmS,uHADnD,GAAAC,aAAUla,SAAA+H,0FAG0C6S,QAAOtkB,KAAAqP,OAAAkY,iBAAA,sCArDjDJ,WAAAK,QAAA,IAAA3kB,IAAAihB,sBAAGrP,UAYH0S,WAAAM,QAAA,IAAA5kB,IAAAkhB,wBAAItP,UAYJ0S,WAAAO,QAAA,IAAA7kB,IAAAmhB,0BAAKvP,wFA3HnB,GAAAwP,UAAOva,SAAAM,mBAAAN,SAAAU,UAAA,klBCpQLrC,UAAYrB,KAAAC,QAAA,mFASXoB,yiBCRDA,UAAYrB,KAAAC,QAAA,mFASXoB,8ICYE,SAAA4f,aAAatkB,EAAUukB,iBACzB,MAAAzoB,MAASkE,EAAE0jB,OAA4B5nB,MAC7CyoB,gBAAgBzoB,MACjB,CAGS,SAAA0oB,sBAAsBxkB,EAAUsD,SAClC,MAAAxH,MAASkE,EAAE0jB,OAA6B5nB,gCAC5BA,MACnB,UAGS2oB,0BAA4BljB,EAAA+B,wCAErC,0nCAlCCohB,YAAcrhB,KAAAC,QAAA,oBACdqhB,UAAYthB,KAAAC,QAAA,sBACZshB,cAAgBvhB,KAAAC,QAAA,0BAcX,MAAAihB,gBAAkB1X,oBAAoBgY,eAAgB/oB,yBAClDA,QACP,wPAiCSwoB,aAAYC,oGAQdI,6CACGH,sBAAqBlhB,qMAQtBmhB,0BAAyBnhB,kCAGoB,MAAA0D,WAAA3H,aAAA,IAAAhB,cAAAumB,gBAAkB,OACpE,aACA,wMAvBGF,+CASAC,aAAS,8BAATA,cAAS,wBAATA,iqBCjEFld,KAAOpE,KAAAC,QAAA,aAAIiE,OAASlE,KAAAC,QAAA,2BAAgBoB,UAAYrB,KAAAC,QAAA,uHASjDmE,mCACCA,6BACD/C,4KC8Ee6b,slCAnFrB,IAAA/T,KAAAnJ,KAAAC,QAAA,UAAiB,MACjBmB,OAASpB,KAAAC,QAAA,kBACTwhB,YAAczhB,KAAAC,QAAA,kDACdyhB,WAAa1hB,KAAAC,QAAA,qBACbid,WAAAld,KAAAC,QAAA,uBAUAmM,YAAApM,KAAAC,QAAA,2BAEAqM,kBAAAtM,KAAAC,QAAA,01CAgES,GAAAyhB,aAAU1e,SAAAC,2SAFN,IAAAjI,qBAAAymB,cAAgB,YAAaA,gBAAgBA,oEAVpD,GAAArgB,SAAM4B,SAAAS,sEARH,IAAAyK,KAAAtK,GACN,8BACAxC,UAAU,0HAtBV,GAAA+H,OAAInG,SAAAM,m5DCpBP,IAAA6F,KAAAnJ,KAAAC,QAAA,UAAiB,MACjBid,WAAAld,KAAAC,QAAA,wBACAmB,OAAApB,KAAAC,QAAA,YAAmB,MACnB0hB,OAAA3hB,KAAAC,QAAA,YAAmB,MACnBmM,YAAApM,KAAAC,QAAA,qBAAA2hB,UAAAhgB,MAAA,oBACAigB,aAAA7hB,KAAAC,QAAA,kBAAyB,MACzBqM,kBAAAtM,KAAAC,QAAA,2BAAA2hB,UAAAhgB,MAAA,0BAGG,IAAAkgB,iBAAA/lB,IAAA4F,MAA0B,OAAK,oBAE7B,MAAA0f,YAAcU,SAAS,IACvB,MAAAT,UAAYS,SAA2B,QACvC,MAAAR,cAAgBQ,SAAyB,cAEzCC,iBAAmBpJ,SACvBC,6BAA8BwI,YAAaC,UAAWC,iBACrDU,SAAUC,MAAOC,MAAOC,kBACrBC,SAAWJ,YACXC,MAAO,CACJ,MAAAI,YAAcJ,MAAM3O,cACf8O,SAAAJ,SAAS9mB,OAClBud,iBACA,OAAAA,QAAQnQ,MAAMgL,cAAcrY,SAASonB,gBACrCzgB,GAAQ6W,QAAA5J,cAAR,UAAqB,EAAAjN,GAAA0R,cAAcrY,SAASonB,eAC5C5J,QAAQxC,OAAO3C,cAAcrY,SAASonB,cAEzC,WAEWD,UAAU3F,KAAM,CAAA1D,EAAG2D,KACzB3hB,iBAAAmnB,MAAU,QAAQ,CACf,MAAAvF,MAAA,IAAYrM,KAAKyI,EAAE1C,aAAe0C,EAAE5C,MAAQ,IAAIwB,UAChD,MAAAkF,MAAA,IAAYvM,KAAKoM,EAAErG,aAAeqG,EAAEvG,MAAQ,IAAIwB,+BAC/CwK,UAAc,OAAQxF,MAAQE,MAAQA,MAAQF,KACtD,sBACOwF,UAAc,OAClBpJ,EAAEzQ,MAAMga,cAAc5F,EAAEpU,OACxBoU,EAAEpU,MAAMga,cAAcvJ,EAAEzQ,WAK9BtC,QAAoBC,UACnB9E,aAAgBohB,aAAgB,MAAQ,QAGhC,SAAAvB,cAAaiB,OACrBb,YAAYnf,IAAIggB,MACjB,CAES,SAAAf,uBAAsBgB,OAC9Bb,UAAUpf,IAAIigB,MACf,UAESf,6BACMG,cAAAkB,OAAQld,GAAAvK,cAAOuK,EAAM,OAAQ,OAAS,MACrD,CAEeW,eAAAwc,oBAAoBhK,eAC5BiK,gBAAkBhJ,sCAClBE,gBAAkB8I,gBAAgBxnB,OACtC6d,KAAQhe,cAAAge,EAAEzQ,MAAUmQ,QAAQnQ,QAAAvN,cAASge,EAAE9C,OAAWwC,QAAQxC,gBAEtD4D,2BAA2BD,gBAClC,CAGI,IAAA+I,iBAAA7mB,IAAA4F,MAA0B,OAAK,mCAEpBkhB,8BACdD,yBAA2BJ,cAC5B,CAEAvgB,YAAc,KACb4gB,6IAIkBf,qCAAA5f,IAAA4f,iBAAgB/T,QAAA,0EAgBrB6U,kBAAmBf,eAAe,MAC7B,MAAAiB,aAAA9mB,aAAA,IAAAG,IAAAymB,kBAAmBtW,oBAAiB,mIAZjD,OAAAyW,+IAKM,KACM7F,WAAA,KACjBze,IAAAqjB,iBAAmB,yZAQNkB,uCACFC,yCACIC,2BACLjC,gCACSE,6CACIC,yMAKlB4B,eAAe,6BAA+B,qGAI3CzY,KAAApC,MAAA,EAAAgb,mCAAqBzK,QAAOhU,iIAKJgU,gIAIX,oBACF,cACLgK,0JAEN,GAAAhe,OAAQye,oBAAkBtc,OAAS,WAACpD,yIAnBxC0f,oBAAkBtc,OAAW,YAAC5D,iBAAAD,SAAAU,UAAA,ohBChIlCN,MAAOpD,KAAAC,QAAA,aACPmjB,WAAapjB,KAAAC,QAAA,mBACbojB,SAAArjB,KAAAC,QAAA,qBACAqjB,QAAUtjB,KAAAC,QAAA,uBACVoB,UAAYrB,KAAAC,QAAA,kBASP,MAAAsjB,eAAA,CACLC,QAAS,kEACTC,QAAS,0EACTC,QAAS,sEACTnhB,KAAM,mEAGPN,YAAc,KAER,IAAA0hB,OAAOC,KAAKL,gBAAgBroB,SAASooB,WAAU,CACnDA,QAAU,UACX,yLAmBUD,SAAQ/pB,KAAAqP,OAAAkb,cAAA,oLARXP,UAAY,YACjB,2GAAwG,8BACnGA,UAAY,YACjB,uHAAoH,8BAC/GA,UAAY,YACjB,iHAA8G,8BACzGA,UAAY,SACjB,2GAAwG,sBAGxGF,mEAbE,GAAAA,aAAUpgB,SAAAC,mGAH2BsgB,eAAeD,YAAO,MAAqBjiB,aAAS,sBAE1E+B,odChCnBA,MAAOpD,KAAAC,QAAA,qEACPmjB,WAAapjB,KAAAC,QAAA,uSASbmD,SAAI,uBAEHggB,uFCVI,MAAMU,uBAAN,MAAMA,uBAUJ,WAAA3qB,GARuBE,cAAAC,KAAA,WACHD,cAAAC,KAAA,uBACGD,cAAAC,KAAA,0BACND,cAAAC,KAAA,sBACeD,cAAAC,KAAA,uBAChCD,cAAAC,KAAA,sBAAmD,IACnDD,cAAAC,KAAA,cAGFA,KAAAyiB,WAAahE,wBAAwBtO,aAAY,CAGvD,kBAAOA,GACF,IAACqa,uBAAsB5T,SAAU,CACd4T,uBAAA5T,SAAW,IAAI4T,sBAAsB,CAE5D,OAAOA,uBAAsB5T,QAAA,CAG9B,aAAM6T,CAAQC,cACb,KAAIniB,GAAKvI,KAAA2qB,KAAL,UAAS,EAAApiB,GAAAqiB,cAAeC,UAAUC,KAAM,CAC3C,OAGG,IACE9qB,KAAA2qB,GAAK,IAAIE,UAAUH,OAEnB1qB,KAAA2qB,GAAGI,OAAS,KACZre,MAAAzD,KAAK,sBAAuB,OAChCjJ,KAAKgrB,kBAAoB,EACzBhrB,KAAKirB,eAAiB,KAGlBjrB,KAAA2qB,GAAGO,UAAYte,MAAOue,QACtB,IACH,MAAM9T,KAAOnC,KAAKkW,MAAMD,MAAM9T,MAE1B,GAAAA,KAAKjR,OAAS,WAAY,CAEzB,UAAOiR,KAAKmB,UAAY,SAAU,CACrC,MAAMX,WAAa7X,KAAKyiB,WAAW3K,aAAaT,KAAKmB,QAASkS,OAC9D1qB,KAAKqrB,iBAAiBxT,KAGd,SAAAR,KAAKmB,SAAWnB,KAAKmB,QAAQ5I,MAAO,CACvC5P,KAAAqrB,iBAAiBhU,KAAKmB,QAAkB,CAC9C,QAEOnZ,OACJqN,MAAArN,MAAM,sCAAuC,MAAOA,MAAK,GAI1DW,KAAA2qB,GAAGW,QAAU,KACb5e,MAAAc,KAAK,8BAA+B,OACxCxN,KAAKurB,oBAGDvrB,KAAA2qB,GAAGa,QAAWnsB,QACdqN,MAAArN,MAAM,mBAAoB,MAAOA,cAE9BA,OACJqN,MAAArN,MAAM,iCAAkC,MAAOA,OACnDW,KAAKurB,kBAAiB,CACvB,CAGO,gBAAAA,GACH,GAAAvrB,KAAKgrB,mBAAqBhrB,KAAKyrB,qBAAsB,CACpD/e,MAAArN,MAAM,oCAAqC,OAC/C,OAGD,GAAIW,KAAK0rB,eAAgB,CACxBC,aAAa3rB,KAAK0rB,eAAc,CAG5B1rB,KAAA0rB,eAAiB3K,OAAO6K,WAAW,YAClC5rB,KAAAgrB,oBACLhrB,KAAKirB,gBAAkB,EACvBjrB,KAAKyqB,UAAQliB,GAAAvI,KAAK2qB,KAAL,YAAApiB,GAASsB,MAAO,KAC3B7J,KAAKirB,eAAc,CAGvB,UAAA3W,GACC,GAAItU,KAAK2qB,GAAI,CACZ3qB,KAAK2qB,GAAG1J,QACRjhB,KAAK2qB,GAAK,KAEX,GAAI3qB,KAAK0rB,eAAgB,CACxBC,aAAa3rB,KAAK0rB,gBAClB1rB,KAAK0rB,eAAiB,KACvB,CAGD,YAAAG,CAAaC,UACP9rB,KAAA+rB,oBAAoBzQ,KAAKwQ,UAC9B,MAAO,KACN9rB,KAAK+rB,oBAAsB/rB,KAAK+rB,oBAAoBlqB,OAAQmqB,IAAOA,KAAOF,UAC3E,CAGO,gBAAAT,CAAiBxT,MACxB7X,KAAK+rB,oBAAoB1S,QAASyS,UAAaA,SAASjU,MAAK,CAI9D,oBAAMoU,GACD,IACG,MAAA3U,eAAiBC,MAAM,wCACvB,MAAAiD,cAAgBlD,SAASxN,OAC/B,aAAa9J,KAAKyiB,WAAW3K,aAAa0C,QAAS,qBAC3Cnb,OACJqN,MAAArN,MAAM,6BAA8B,MAAOA,OACzC,MAAAA,KAAA,CACP,GApHDU,cADYyqB,uBACG,YADT,IAAM0B,sBAAN1B,mGCgES5d,eAAAuf,yFACVC,gBAAe,CACd,QACH5J,UAAY,MACN,MAAA3K,WAAawU,eAAeJ,iBAClCrjB,IAAA6Y,UAAY5J,KAAKjI,MAAM/B,MAAM,EAAG8T,mBAAe,KAChD,OAASuB,SACR7jB,MAAQ6jB,eAAejO,MAAQiO,IAAIhU,QAAU,+BAC5C,YACDsT,UAAY,MACb,CACD,CAED,osCA/DC,IAAA4J,cAAgB1lB,KAAAC,QAAA,yBAChB+a,gBAAkBhb,KAAAC,QAAA,uBAClBoB,UAAYrB,KAAAC,QAAA,kBACZmB,OAASpB,KAAAC,QAAA,iBACTgb,gBAAAjb,KAAAC,QAAA,yBAAkBmB,SAAS,EAAI,GAC/BmH,MAAQvI,KAAAC,QAAA,yBACRkJ,KAAAnJ,KAAAC,QAAA,UAAiB,MAGd,IAAA8a,UAAAhf,IAAA4F,MAAAC,MAAA,kBACA,IAAAka,UAAA/f,IAAA4F,MAAmB,MAAI,aACvB,IAAAhJ,MAAAoD,IAAA4F,MAA8B,MAAI,SAClC,IAAAikB,YAAA7pB,IAAA4F,MAAqB,OAAK,eAExB,MAAAgkB,eAAiBH,sBAAsB/b,kBACzC5B,YAAmC,KAEvC5B,QAAoBC,UACf,OACCwf,gBAAe,CACZ,MAAAvU,WAAawU,eAAeJ,iBAClCrjB,IAAA6Y,UAAY5J,KAAKjI,MAAM/B,MAAM,EAAG8T,mBAAe,UAC/Ca,UAAY,eACK7b,QAAA+jB,MAAA,CACHnc,YAAA8d,eAAeR,aAAchU,OAC1CjP,IAAA6Y,UAAY5J,KAAKjI,MAAM/B,MAAM,EAAG8T,mBAAe,UAC/Ca,UAAY,WACZ8J,YAAc,cAGTD,eAAe5B,QAAA9jB,QAAA+jB,WACf,CACI,UAAAzV,MAAM,iDACjB,CACD,OAASiO,SACR7jB,MAAQ6jB,eAAejO,MAAQiO,IAAIhU,QAAU,gCACzCxC,MAAArN,MAAM,kBAAmB,MAAO6jB,SACpCV,UAAY,MACb,IAGD9R,UAAgB,QACXnC,YAAa,CAChBA,aACD,CACW,GAAA5H,QAAA+jB,MAAA,CACV2B,eAAe/X,YAChB,0YA8BY6X,wIAFe9sB,6WAaDitB,aAAc,iBAAmB,yCACrDA,aAAc,YAAc,iKAGdH,0YAPiBld,6EAb3B5P,OAAKqK,SAAAS,mBAAAT,SAAAsH,YAAA,sDAJVwR,WAAS9Y,SAAAC,iBAAAD,SAAAU,UAAA,6DADHrC,+DADR,GAAA8H,OAAInG,SAAAqH,yMCtDCwb,iBAAmB3nB,EAAA4nB,UAAAC,YACtB,IAAA5pB,IAAA2pB,WAAA,aAECE,eAAiB7pB,IAAA4pB,YAAa,MAAID,WAAUG,aAClD/iB,IAAA4iB,WAAUI,SAAA,CACTC,IAAKH,eACLI,SAAU,UAEZ,+ZA1BI,IAAAjd,KAAApN,IAAA4F,MAAc,OAAK,QACnB,IAAAokB,WAAAhqB,IAAA4F,MAAoB,OAAK,cACzB,IAAAmkB,UAAA/pB,IAAA4F,MAAuC,MAAI,aAC3C,IAAA/E,OAAAb,IAAA4F,MAAoC,MAAI,mBAEnC0kB,eACH,IAAAlqB,IAAA2pB,WAAA,OAEG,MAAAQ,oBAAWL,0BAAAM,aAAcA,cAAiBpqB,IAAA2pB,WAC5C,MAAAU,aAAeP,aAAeK,UAAYC,aAGhDrkB,IAAAiH,KAAOmd,UAAY,IAGnBpkB,IAAA6jB,WAAaS,aAAe,GAC7B,CAYAvgB,QAAc,YACT6f,WAAW,KACdA,WAAUta,iBAAiB,SAAU6a,cAErCA,cACD,IAGDrc,UAAgB,YACX8b,WAAW,KACdA,WAAUxY,oBAAoB,SAAU+Y,aACzC,4NAuBUR,iBAAgBC,UAAAC,uPAIpBA,YAAU/iB,SAAAC,iBAAAD,SAAAU,UAAA,yBAhBJmK,UAAA4Y,SAAA1Y,SAAAtP,IAAA7B,uHAaCmpB,YAAa,gBAAkB,sBAZpC,IAAA7X,KAAAtK,GACN,8BACA,yBACA,+BACA,4BACA,mCACA,8BACA,kCACA,2CACA,8GAIiB8iB,WAAA,EAAAD,SAAA,IAAAE,IAAA,MAAAC,EAAG,GAAIC,SAAU,qEAhBhC1d,MAAInG,SAAAS,2BALMoK,UAAAI,IAAAF,SAAAtP,IAAAqnB,wLCuNI,IAAA5N,SAAA,IAAA4O,KAAK,izBA8ID,IAAA1O,WAAA,CAAAla,EAAA6oB,mBAAAtoB,IAAAsoB,iBAAmB,05CApXtC,IAAAjF,iBAAA/lB,IAAA4F,MAA0B,OAAK,oBAC/B,IAAAolB,iBAAAhrB,IAAA4F,MAA0B,OAAK,oBAE/B,IAAA0E,MAAAtK,IAAA4F,MAAc,OAAK,QACnB,IAAAP,OAAArF,IAAA4F,MAAgB,MAAI,UAEpB,IAAAqlB,kBAAAjrB,IAAA4F,MAA2B,GAAC,qBAC5B,IAAAslB,qBAAAlrB,IAAA4F,MAA8B,GAAC,wBAC/B,IAAA+D,iBAA0B,EAC1B,IAAAwhB,WAAAnrB,IAAA4F,MAAoB,MAAI,cAExB,IAAAwlB,qBAAAprB,IAAA4F,MAA8B,OAAK,wBAQjC,MAAAylB,YAAA,CACL,uEACA,wFACA,iFAIKC,UAAY,gDAETC,gBACJC,cAAe,CAClBngB,YAAYC,QAAQI,aAAc/H,KAAM,UACzC,CACD,CAGM,MAAA8nB,YAAA,EAEJ9nB,KAAM,SACN6I,MAAO,mBACPC,QAAS,8BA2HXvC,QAAoBC,UACf,IACE,IAAAqhB,cAAA,OAEC,MAAAphB,eAAiBC,kBAClBD,SAASE,OAASF,SAASG,MAAMC,YAAa,KAClDF,MAAO,OACEkF,SAAAkc,gBAAgBC,UAAU7U,OAAO,QAC1C8U,aAAaC,MAAQ,cACfC,aAAa,eAEb,KACNxhB,MAAO,MACP5H,IAAA2C,aAAgBohB,aAAgB,MAAQ,eACxCwE,kBAAoB,GACpBvoB,IAAAwoB,2BAA8BzE,aAAgB,GAAK,OACpD,OAGMzb,oBACN+gB,iCACMC,6BAA6B7kB,MAAI4E,yBACxC,OAASnP,OACJN,IAAAyO,KAAK,gCAAiC,MAAOnO,MAClD,IAGDqR,UAAgB,KACV,IAAAud,cAAA,kBAQGrK,iBACR4E,iBAAmB,KACpB,UAESkG,4BACRlG,iBAAmB,MAEpB,UAESmG,yBACRnG,iBAAmB,MAEpB,mGAMYkG,8BACHC,mBACQC,SAAA,IAAAzpB,IAAAqjB,iBAAmB,6BAJzBA,qCAAA5f,IAAA4f,iBAAgB/T,QAAA,uiBA4BduZ,iUAC0KjhB,OAChL,gBACA,+MAOAA,gBAAIpD,4FAQH,OAAAukB,wBACK,mBACE,4BAHHN,+BAAAhlB,IAAAglB,WAAUnZ,QAAA,6TA2BZ,OAAAoa,oBACI,UACL,yIAKS,OAAAtE,kCAEbzgB,KAAM,qCACNggB,WAAY,mBACZC,SAAQ,IAAA5kB,IAASqjB,iBAAmB,MACpCwB,QAAS,0JAGwC0D,gKAM5C,OAAAoB,sDAGE,yBACM,OAAAC,kCAEbC,UAAS,IAAA7pB,IAASqjB,iBAAmB,MACrC1e,KAAM,kEACNggB,WAAY,qMAOJiE,oEAEUJ,wDACAA,yIAJNE,yCAAAjlB,IAAAilB,qBAAoBpZ,QAAA,mFAWrB,OAAAqZ,8CACOH,wDACAA,yFAET,4CAjBLE,sBAAoBnkB,SAAAS,mBAAAT,SAAAU,UAAA,sJAkCnB,yDAEQ,OAAA2kB,kCAEbC,UAAS,IAAA7pB,IAASqjB,iBAAmB,MACrC1e,KAAM,iCACNggB,WAAY,uGAKuB,OAAAmF,2hBAaNxB,qCAAA7kB,IAAA6kB,iBAAgBhZ,QAAA,oQA0B/B,OAAA8V,kCAEbzgB,KAAM,8CACNggB,WAAY,mBACZC,SAAQ,IAAA5kB,IAASqjB,iBAAmB,MACpCwB,QAAS,mMAQE,sBACO,oBACF,mBACD","names":["inspect","get_value","inspector","console","log","validate_effect","initial","inspect_effect","value","UNINITIALIZED","error","snapshot","ACCORDION_ROOT_ATTR","ACCORDION_TRIGGER_ATTR","ACCORDION_CONTENT_ATTR","ACCORDION_ITEM_ATTR","ACCORDION_HEADER_ATTR","AccordionBaseState","constructor","props","__publicField","this","id","__privateGet","_id","current","getDataOrientation","orientation","getDataDisabled","disabled","__privateSet","_ref","ref","useRefById","_loop","loop","rovingFocusGroup","useRovingFocus","rootNodeId","candidateAttr","AccordionSingleState","super","_value","includesItem","bind","toggleItem","item","$.strict_equals","AccordionMultiState","includes","filter","v","AccordionItemState","root","getDataOpenClosed","isActive","isDisabled","rootState","updateValue","deps","AccordionTriggerState","itemState","$.tag","$.derived","_disabled","_itemState","$.get","_isDisabled","getAriaExpanded","getAriaDisabled","tabindex","onclick","onkeydown","_root","e","button","preventDefault","key","kbd.SPACE","kbd.ENTER","handleKeydown","AccordionContentState","__privateAdd","_originalStyles","_isMountAnimationPrevented","_width","_height","_forceMount","open","style","forceMount","$.user_pre_effect","rAF","requestAnimationFrame","cancelAnimationFrame","watch","present","_","node","afterTick","transitionDuration","animationName","rect","getBoundingClientRect","$.set","height","width","snippetProps","WeakMap","_snippetProps","AccordionHeaderState","role","_level","_item","level","setAccordionRootContext","getAccordionRootContext","createContext","setAccordionItemContext","getAccordionItemContext","useAccordionRoot","type","rest","useAccordionItem","useAccordionTrigger","useAccordionContent","useAccordionHeader","$.prop","$$props","useId","onValueChange","noop","controlledValue","restProps","$.rest_props","box","with","mergedProps","mergeProps","snippet","node_1","child","headerState","triggerState","contentState","$$arg0","hidden","locked","className","percentChange","getTokenChange","token","change","balance","$.state","$.proxy","_a","price","priceFormatted","valueFormatted","$.user_effect","set","_c","_b","formatPrice","Number","info","quantity","getTooltipPrice","formatted","toFixed","decimals","replace","logoURI","symbol","$$render","consequent","get","url","text","name","consequent_2","set_text","text_2","consequent_1","alternate","expression","cn","class","defaultAttributes","xmlns","viewBox","fill","stroke","color","size","strokeWidth","absoluteStrokeWidth","iconNode","mergeClasses","classes","index","array","Boolean","indexOf","join","$$restProps","$$sanitized_props","$.index","$$anchor","$$item","tag","$$array","attrs","d","Root","AccordionPrimitive.Root","maxVisibleTokens","maxTokens","tokens","visibleTokens","remainingTokens","isExpanded","log$1","onMount","async","settings","getSettings","init","legal","termsAgreed","updateTokenDisplay","getYakklCombinedToken","then","initialTokens","$.log_if_contains_state","length","warn","loadDefaultTokens","__VITE_PRELOAD__","reloadedTokens","effectiveMaxTokens","slice","browser_ext","runtime","onMessage","addListener","handleOnMessageForPricing","sendMessage","action","startPricingChecks","updateTokenPrices","unsubscribe","yakklCombinedTokenStore","subscribe","newTokens","removeListener","each","div_1","$.template_effect","$.set_text","div_2","title","message","ctaText","onCallToAction","$$args","Banner","useGoogleAd","prop","previous","__1","currentIndex","items","show","interval","autoRotate","showControls","timerManager","UnifiedTimerManager","getInstance","timerId","next","stopInterval","removeInterval","addInterval","startInterval","onDestroy","customContent","$.html","node_3","html","consequent_3","alternate_1","$.each","div_4","i","button_2","__click","$.set_attribute","$.set_class","consequent_4","consequent_5","handleResizeStart","isResizing","startY","clientY","startHeight","cardElement","offsetHeight","document","addEventListener","handleResizeMove","handleResizeEnd","toggleCollapse","isCollapsed","Icon","isPinned","eye","eyeTooltip","minHeight","maxHeight","Footer","footerProps","LockedFooter","lockedFooterProps","cardHeight","contentElement","hasItems","calculatedMinHeight","calculateMinHeight","headerHeight","querySelector","firstItemHeight","newMinHeight","parseInt","deltaY","newHeight","Math","max","min","removeEventListener","observer","MutationObserver","observe","childList","subtree","disconnect","bind_this","div_3","$$value","consequent_6","div","$.clsx","consequent_7","defaultTokens","map","validateToken","Error","JSON","stringify","address","chainId","isNative","isStablecoin","description","provider","lastUpdated","_d","_e","currency","_f","status","_g","_h","tags","version","customDefault","sidepanel","evmCompatible","setYakklTokenDataStorage","tokenSymbols","t","_ExtensionRSSFeedService","Map","instance","fetchFeed","feedUrl","cached","feedCache","Date","now","timestamp","cacheTimeout","data","response","fetch","headers","VERSION","Accept","ok","statusText","feed","parseRSSFeed","storeFeedInExtensionStorage","storedFeed","loadFeedFromExtensionStorage","btoa","storage","local","result","fetchArticleContent","extractArticleContent","content","quality","parser","DOMParser","doc","parseFromString","hasVideo","hasAudio","contentSelectors","selector","element","unwantedElements","querySelectorAll","forEach","el","remove","textContent","trim","wordCount","split","assessContentQuality","hasParagraphs","hasQuotes","hasReferences","detectContentType","toLowerCase","hasVideoEnclosure","hasAudioEnclosure","mediaContent","getElementsByTagName","getAttribute","startsWith","xmlText","parseError","channel","link","itemElements","processItems","concurrencyLimit","chunks","Array","from","reduce","acc","chunkIndex","floor","push","chunk","Promise","all","itemTitle","itemLink","itemDescription","contentType","stripHTML","contentQuality","contentEncodedElement","encodedContent","pubDate","guid","categories","cat","imageUrl","extractImageFromItem","trackedUrl","addUTMParameters","rssItem","subtitle","source","extractSourceFromURL","date","formatDate","publishedAt","author","_j","_i","mediaThumbnail","enclosure","imageFromHTML","extractImageFromHTML","imgMatch","match","createElement","innerHTML","innerText","hostname","URL","urlObj","hasParams","search","searchParams","toString","dateString","diffInHours","getTime","diffInMinutes","diffInDays","ExtensionRSSFeedService","isValidNewsItem","newsItem","on_click","handlePrint","on_click_1","showDeleteConfirmation","bookmarkEnabled","printEnabled","deleteEnabled","$.inspect","article","isBookmarked","derived","yakklBookmarkedArticlesStore","$store","some","a","sanitizeContent","elementsToRemove","removeAttribute","href","absoluteUrl","setAttribute","sanitizedContent","body","handleBookmark","bookmarkedArticles","$yakklBookmarkedArticlesStore","$isBookmarked","updatedArticles","setYakklBookmarkedArticles","isDuplicate","handleDelete","onDelete","articleUrl","generatePrintHtml","printWindow","window","write","close","onload","focus","print","toLocaleString","encodeURIComponent","onReject","isRemainingSectionCollapsed","newsItems","maxVisibleItems","maxItemsPerFeed","effectiveMaxItems","limitedItems","visibleItems","remainingItems","hasValidItems","div_7","template_effect","refreshFeeds","loadFeeds","FIVE_MINUTES","THIRTY_MINUTES","effectiveInterval","isLoading","rssService","messageListener","sender","sendResponse","resolve","allItems","feedPromises","feedUrls","catch","err","feeds","sort","b","dateA","parseRelativeDate","dateB","dateStr","unit","applyValue","onComplete","selectedUnit","wei","gwei","ether","compact","clearFields","initialValue","initialUnit","showUsdValue","onClose","ethPrice","ethUnitUsd","etherNum","parseFloat","isNaN","usdValue","minimumFractionDigits","maximumFractionDigits","priceManager","PriceManager","CoinbasePriceProvider","weight","CoingeckoPriceProvider","KrakenPriceProvider","weiToGwei","weiNum","BigInt","gweiWhole","remainder","remainderStr","padStart","trimmed","weiToEther","etherWhole","gweiToWei","parts","wholePart","decimalPart","paddedDecimal","padEnd","gweiInWei","decimalInWei","gweiToEther","weiValue","etherToWei","combined","etherToGwei","fetchEthPrice","getMarketPrice","handleWeiInput","target","test","handleGweiInput","handleEtherInput","bind_value","input","input_1","input_2","EthUnitConverter","input_3","input_4","input_5","handleSearch","debouncedSearch","handleSortOrderChange","handleSortDirectionChange","searchQuery","sortOrder","sortDirection","createDebounce","lockMessage","showButton","footer","$.tag_proxy","lockedFooter","showUpgradeModal","writable","filteredArticles","articles","query","order","direction","filtered","searchLower","localeCompare","isProLevel","update","handleArticleDelete","currentArticles","showLockedFooter","updateLockedFooterState","expression_1","BookmarkIcon","$searchQuery","$sortOrder","$sortDirection","$filteredArticles","buttonText","onAction","variant","variantClasses","default","warning","success","Object","keys","GenericFooter","_DynamicRSSFeedService","connect","wsUrl","ws","readyState","WebSocket","OPEN","onopen","reconnectAttempts","reconnectDelay","onmessage","event","parse","notifyFeedUpdate","onclose","attemptReconnect","onerror","maxReconnectAttempts","reconnectTimer","clearTimeout","setTimeout","onFeedUpdate","callback","feedUpdateCallbacks","cb","loadSampleFeed","DynamicRSSFeedService","refreshFeed","useSampleFeed","dynamicService","isConnected","scrollToPosition","container","isAtBottom","targetPosition","scrollHeight","scrollTo","top","behavior","handleScroll","scrollTop","clientHeight","scrollBottom","button_1","transition","fly","y","duration","goto","showEthConverter","tokensLockedCount","newsfeedsLockedCount","showBanner","showDynamicNewsfeeds","cryptoFeeds","wsFeedUrl","openWallet","browserSvelte","bannerItems","documentElement","classList","localStorage","theme","setBadgeText","updateCombinedTokenStore","setYakklCombinedTokenStorage","handleUpgradeComplete","handleUpgradeClose","onCancel","TokenIcon","NewsIcon","UpgradeFooter","onUpgrade","ToolIcon"],"ignoreList":[0,1,2,3,4,5,6,10,11,12],"sources":["../../../../../../../../node_modules/.pnpm/svelte@5.34.3/node_modules/svelte/src/internal/client/dev/inspect.js","../../../../../../../../node_modules/.pnpm/bits-ui@1.0.0-next.74_svelte@5.34.3/node_modules/bits-ui/dist/bits/accordion/accordion.svelte.js","../../../../../../../../node_modules/.pnpm/bits-ui@1.0.0-next.74_svelte@5.34.3/node_modules/bits-ui/dist/bits/accordion/components/accordion.svelte","../../../../../../../../node_modules/.pnpm/bits-ui@1.0.0-next.74_svelte@5.34.3/node_modules/bits-ui/dist/bits/accordion/components/accordion-item.svelte","../../../../../../../../node_modules/.pnpm/bits-ui@1.0.0-next.74_svelte@5.34.3/node_modules/bits-ui/dist/bits/accordion/components/accordion-header.svelte","../../../../../../../../node_modules/.pnpm/bits-ui@1.0.0-next.74_svelte@5.34.3/node_modules/bits-ui/dist/bits/accordion/components/accordion-trigger.svelte","../../../../../../../../node_modules/.pnpm/bits-ui@1.0.0-next.74_svelte@5.34.3/node_modules/bits-ui/dist/bits/accordion/components/accordion-content.svelte","../../../../../../src/lib/components/TokenLineView.svelte","../../../../../../src/lib/components/ui/accordion/accordion-content.svelte","../../../../../../src/lib/components/ui/accordion/accordion-item.svelte","../../../../../../../../node_modules/.pnpm/lucide-svelte@0.468.0_svelte@5.34.3/node_modules/lucide-svelte/dist/defaultAttributes.js","../../../../../../../../node_modules/.pnpm/lucide-svelte@0.468.0_svelte@5.34.3/node_modules/lucide-svelte/dist/Icon.svelte","../../../../../../../../node_modules/.pnpm/lucide-svelte@0.468.0_svelte@5.34.3/node_modules/lucide-svelte/dist/icons/chevron-down.svelte","../../../../../../src/lib/components/ui/accordion/accordion-trigger.svelte","../../../../../../src/lib/components/ui/accordion/index.ts","../../../../../../src/lib/components/TokenComponentList.svelte","../../../../../../src/lib/components/Banner.svelte","../../../../../../src/lib/components/Ad.svelte","../../../../../../src/lib/components/RotatingBanner.svelte","../../../../../../src/lib/components/icons/ChevronDownIcon.svelte","../../../../../../src/lib/components/icons/ChevronUpIcon.svelte","../../../../../../src/lib/components/icons/ResizeIcon.svelte","../../../../../../src/lib/components/SectionCard.svelte","../../../../../../src/lib/components/icons/WalletIcon.svelte","../../../../../../src/lib/components/icons/TokenIcon.svelte","../../../../../../src/lib/components/icons/NewsIcon.svelte","../../../../../../src/lib/components/icons/ToolIcon.svelte","../../../../../../src/lib/managers/tokens/loadDefaultTokens.ts","../../../../../../src/lib/managers/ExtensionRSSFeedService.ts","../../../../../../src/lib/components/NewsFeedLineView.svelte","../../../../../../src/lib/components/icons/BookmarkIcon.svelte","../../../../../../src/lib/components/icons/PrinterIcon.svelte","../../../../../../src/lib/components/icons/TrashIcon.svelte","../../../../../../src/lib/components/ArticleControls.svelte","../../../../../../src/lib/components/NewsFeed.svelte","../../../../../../src/lib/components/icons/RefreshIcon.svelte","../../../../../../src/lib/components/ExtensionRSSNewsFeed.svelte","../../../../../../src/lib/components/icons/CalcIcon.svelte","../../../../../../src/lib/components/EthUnitConverter.svelte","../../../../../../src/lib/components/icons/SearchIcon.svelte","../../../../../../src/lib/components/icons/SortIcon.svelte","../../../../../../src/lib/components/SearchSortControls.svelte","../../../../../../src/lib/components/icons/LockIcon.svelte","../../../../../../src/lib/components/LockedSectionCard.svelte","../../../../../../src/lib/components/BookmarkedArticles.svelte","../../../../../../src/lib/components/GenericFooter.svelte","../../../../../../src/lib/components/UpgradeFooter.svelte","../../../../../../src/lib/managers/DynamicRSSFeedService.ts","../../../../../../src/lib/components/DynamicRSSNewsFeed.svelte","../../../../../../src/lib/components/ScrollIndicator.svelte","../../../../../../src/routes/(sidepanel)/sidepanel/sidepanel/+page.svelte"],"sourcesContent":["import { UNINITIALIZED } from '../../../constants.js';\nimport { snapshot } from '../../shared/clone.js';\nimport { inspect_effect, validate_effect } from '../reactivity/effects.js';\n\n/**\n * @param {() => any[]} get_value\n * @param {Function} [inspector]\n */\n// eslint-disable-next-line no-console\nexport function inspect(get_value, inspector = console.log) {\n\tvalidate_effect('$inspect');\n\n\tlet initial = true;\n\n\tinspect_effect(() => {\n\t\t/** @type {any} */\n\t\tvar value = UNINITIALIZED;\n\n\t\t// Capturing the value might result in an exception due to the inspect effect being\n\t\t// sync and thus operating on stale data. In the case we encounter an exception we\n\t\t// can bail-out of reporting the value. Instead we simply console.error the error\n\t\t// so at least it's known that an error occured, but we don't stop execution\n\t\ttry {\n\t\t\tvalue = get_value();\n\t\t} catch (error) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.error(error);\n\t\t}\n\n\t\tif (value !== UNINITIALIZED) {\n\t\t\tinspector(initial ? 'init' : 'update', ...snapshot(value, true));\n\t\t}\n\n\t\tinitial = false;\n\t});\n}\n","import { afterTick, useRefById } from \"svelte-toolbelt\";\nimport { watch } from \"runed\";\nimport { getAriaDisabled, getAriaExpanded, getDataDisabled, getDataOpenClosed, getDataOrientation, } from \"../../internal/attrs.js\";\nimport { kbd } from \"../../internal/kbd.js\";\nimport { useRovingFocus, } from \"../../internal/use-roving-focus.svelte.js\";\nimport { createContext } from \"../../internal/create-context.js\";\nconst ACCORDION_ROOT_ATTR = \"data-accordion-root\";\nconst ACCORDION_TRIGGER_ATTR = \"data-accordion-trigger\";\nconst ACCORDION_CONTENT_ATTR = \"data-accordion-content\";\nconst ACCORDION_ITEM_ATTR = \"data-accordion-item\";\nconst ACCORDION_HEADER_ATTR = \"data-accordion-header\";\nclass AccordionBaseState {\n    #id;\n    #ref;\n    disabled;\n    #loop;\n    orientation;\n    rovingFocusGroup;\n    constructor(props) {\n        this.#id = props.id;\n        this.disabled = props.disabled;\n        this.#ref = props.ref;\n        useRefById({\n            id: props.id,\n            ref: this.#ref,\n        });\n        this.orientation = props.orientation;\n        this.#loop = props.loop;\n        this.rovingFocusGroup = useRovingFocus({\n            rootNodeId: this.#id,\n            candidateAttr: ACCORDION_TRIGGER_ATTR,\n            loop: this.#loop,\n            orientation: this.orientation,\n        });\n    }\n    props = $derived.by(() => ({\n        id: this.#id.current,\n        \"data-orientation\": getDataOrientation(this.orientation.current),\n        \"data-disabled\": getDataDisabled(this.disabled.current),\n        [ACCORDION_ROOT_ATTR]: \"\",\n    }));\n}\nexport class AccordionSingleState extends AccordionBaseState {\n    #value;\n    isMulti = false;\n    constructor(props) {\n        super(props);\n        this.#value = props.value;\n        this.includesItem = this.includesItem.bind(this);\n        this.toggleItem = this.toggleItem.bind(this);\n    }\n    includesItem(item) {\n        return this.#value.current === item;\n    }\n    toggleItem(item) {\n        this.#value.current = this.includesItem(item) ? \"\" : item;\n    }\n}\nexport class AccordionMultiState extends AccordionBaseState {\n    #value;\n    isMulti = true;\n    constructor(props) {\n        super(props);\n        this.#value = props.value;\n        this.includesItem = this.includesItem.bind(this);\n        this.toggleItem = this.toggleItem.bind(this);\n    }\n    includesItem(item) {\n        return this.#value.current.includes(item);\n    }\n    toggleItem(item) {\n        if (this.includesItem(item)) {\n            this.#value.current = this.#value.current.filter((v) => v !== item);\n        }\n        else {\n            this.#value.current = [...this.#value.current, item];\n        }\n    }\n}\nexport class AccordionItemState {\n    #id;\n    #ref;\n    value;\n    disabled;\n    root;\n    isActive = $derived.by(() => this.root.includesItem(this.value.current));\n    isDisabled = $derived.by(() => this.disabled.current || this.root.disabled.current);\n    constructor(props) {\n        this.value = props.value;\n        this.disabled = props.disabled;\n        this.root = props.rootState;\n        this.#id = props.id;\n        this.#ref = props.ref;\n        this.updateValue = this.updateValue.bind(this);\n        useRefById({\n            id: this.#id,\n            ref: this.#ref,\n            deps: () => this.isActive,\n        });\n    }\n    updateValue() {\n        this.root.toggleItem(this.value.current);\n    }\n    props = $derived.by(() => ({\n        id: this.#id.current,\n        \"data-state\": getDataOpenClosed(this.isActive),\n        \"data-disabled\": getDataDisabled(this.isDisabled),\n        \"data-orientation\": getDataOrientation(this.root.orientation.current),\n        [ACCORDION_ITEM_ATTR]: \"\",\n    }));\n}\nclass AccordionTriggerState {\n    #ref;\n    #disabled;\n    #id;\n    #root;\n    #itemState;\n    #isDisabled = $derived.by(() => this.#disabled.current ||\n        this.#itemState.disabled.current ||\n        this.#root.disabled.current);\n    constructor(props, itemState) {\n        this.#disabled = props.disabled;\n        this.#itemState = itemState;\n        this.#root = itemState.root;\n        this.#id = props.id;\n        this.#ref = props.ref;\n        this.onkeydown = this.onkeydown.bind(this);\n        this.onclick = this.onclick.bind(this);\n        useRefById({\n            id: props.id,\n            ref: this.#ref,\n        });\n    }\n    onclick(e) {\n        if (this.#isDisabled)\n            return;\n        if (e.button !== 0)\n            return e.preventDefault();\n        this.#itemState.updateValue();\n    }\n    onkeydown(e) {\n        if (this.#isDisabled)\n            return;\n        if (e.key === kbd.SPACE || e.key === kbd.ENTER) {\n            e.preventDefault();\n            this.#itemState.updateValue();\n            return;\n        }\n        this.#root.rovingFocusGroup.handleKeydown(this.#ref.current, e);\n    }\n    props = $derived.by(() => ({\n        id: this.#id.current,\n        disabled: this.#isDisabled,\n        \"aria-expanded\": getAriaExpanded(this.#itemState.isActive),\n        \"aria-disabled\": getAriaDisabled(this.#isDisabled),\n        \"data-disabled\": getDataDisabled(this.#isDisabled),\n        \"data-state\": getDataOpenClosed(this.#itemState.isActive),\n        \"data-orientation\": getDataOrientation(this.#root.orientation.current),\n        [ACCORDION_TRIGGER_ATTR]: \"\",\n        tabindex: 0,\n        //\n        onclick: this.onclick,\n        onkeydown: this.onkeydown,\n    }));\n}\nclass AccordionContentState {\n    item;\n    #ref;\n    #id;\n    #originalStyles = undefined;\n    #isMountAnimationPrevented = false;\n    #width = $state(0);\n    #height = $state(0);\n    #forceMount;\n    present = $derived.by(() => this.#forceMount.current || this.item.isActive);\n    constructor(props, item) {\n        this.item = item;\n        this.#forceMount = props.forceMount;\n        this.#isMountAnimationPrevented = this.item.isActive;\n        this.#id = props.id;\n        this.#ref = props.ref;\n        useRefById({\n            id: this.#id,\n            ref: this.#ref,\n        });\n        $effect.pre(() => {\n            const rAF = requestAnimationFrame(() => {\n                this.#isMountAnimationPrevented = false;\n            });\n            return () => {\n                cancelAnimationFrame(rAF);\n            };\n        });\n        watch([() => this.present, () => this.#ref.current], ([_, node]) => {\n            if (!node)\n                return;\n            afterTick(() => {\n                if (!this.#ref.current)\n                    return;\n                // get the dimensions of the element\n                this.#originalStyles = this.#originalStyles || {\n                    transitionDuration: node.style.transitionDuration,\n                    animationName: node.style.animationName,\n                };\n                // block any animations/transitions so the element renders at full dimensions\n                node.style.transitionDuration = \"0s\";\n                node.style.animationName = \"none\";\n                const rect = node.getBoundingClientRect();\n                this.#height = rect.height;\n                this.#width = rect.width;\n                // unblock any animations/transitions that were originally set if not the initial render\n                if (!this.#isMountAnimationPrevented) {\n                    const { animationName, transitionDuration } = this.#originalStyles;\n                    node.style.transitionDuration = transitionDuration;\n                    node.style.animationName = animationName;\n                }\n            });\n        });\n    }\n    snippetProps = $derived.by(() => ({\n        open: this.item.isActive,\n    }));\n    props = $derived.by(() => ({\n        id: this.#id.current,\n        \"data-state\": getDataOpenClosed(this.item.isActive),\n        \"data-disabled\": getDataDisabled(this.item.isDisabled),\n        \"data-orientation\": getDataOrientation(this.item.root.orientation.current),\n        [ACCORDION_CONTENT_ATTR]: \"\",\n        style: {\n            \"--bits-accordion-content-height\": `${this.#height}px`,\n            \"--bits-accordion-content-width\": `${this.#width}px`,\n        },\n    }));\n}\nclass AccordionHeaderState {\n    #id;\n    #ref;\n    #level;\n    #item;\n    constructor(props, item) {\n        this.#level = props.level;\n        this.#id = props.id;\n        this.#ref = props.ref;\n        useRefById({\n            id: this.#id,\n            ref: this.#ref,\n        });\n        this.#item = item;\n    }\n    props = $derived.by(() => ({\n        id: this.#id.current,\n        role: \"heading\",\n        \"aria-level\": this.#level.current,\n        \"data-heading-level\": this.#level.current,\n        \"data-state\": getDataOpenClosed(this.#item.isActive),\n        \"data-orientation\": getDataOrientation(this.#item.root.orientation.current),\n        [ACCORDION_HEADER_ATTR]: \"\",\n    }));\n}\nconst [setAccordionRootContext, getAccordionRootContext] = createContext(\"Accordion.Root\");\nconst [setAccordionItemContext, getAccordionItemContext] = createContext(\"Accordion.Item\");\nexport function useAccordionRoot(props) {\n    const { type, ...rest } = props;\n    const rootState = type === \"single\"\n        ? new AccordionSingleState(rest)\n        : new AccordionMultiState(rest);\n    return setAccordionRootContext(rootState);\n}\nexport function useAccordionItem(props) {\n    const rootState = getAccordionRootContext();\n    return setAccordionItemContext(new AccordionItemState({ ...props, rootState }));\n}\nexport function useAccordionTrigger(props) {\n    const item = getAccordionItemContext();\n    return new AccordionTriggerState(props, item);\n}\nexport function useAccordionContent(props) {\n    const item = getAccordionItemContext();\n    return new AccordionContentState(props, item);\n}\nexport function useAccordionHeader(props) {\n    const item = getAccordionItemContext();\n    return new AccordionHeaderState(props, item);\n}\n","<script lang=\"ts\">\n\timport { type WritableBox, box, mergeProps } from \"svelte-toolbelt\";\n\timport { useAccordionRoot } from \"../accordion.svelte.js\";\n\timport type { AccordionRootProps } from \"../types.js\";\n\timport { useId } from \"../../../internal/use-id.js\";\n\timport { noop } from \"../../../internal/noop.js\";\n\n\tlet {\n\t\tdisabled = false,\n\t\tchildren,\n\t\tchild,\n\t\ttype,\n\t\tvalue = $bindable(),\n\t\tref = $bindable(null),\n\t\tid = useId(),\n\t\tonValueChange = noop,\n\t\tloop = true,\n\t\torientation = \"vertical\",\n\t\tcontrolledValue = false,\n\t\t...restProps\n\t}: AccordionRootProps = $props();\n\n\tvalue === undefined && (value = type === \"single\" ? \"\" : []);\n\n\tconst rootState = useAccordionRoot({\n\t\ttype,\n\t\tvalue: box.with(\n\t\t\t() => value!,\n\t\t\t(v) => {\n\t\t\t\tif (controlledValue) {\n\t\t\t\t\tonValueChange(v as any);\n\t\t\t\t} else {\n\t\t\t\t\tvalue = v;\n\t\t\t\t\tonValueChange(v as any);\n\t\t\t\t}\n\t\t\t}\n\t\t) as WritableBox<string> | WritableBox<string[]>,\n\t\tid: box.with(() => id),\n\t\tdisabled: box.with(() => disabled),\n\t\tloop: box.with(() => loop),\n\t\torientation: box.with(() => orientation),\n\t\tref: box.with(\n\t\t\t() => ref,\n\t\t\t(v) => (ref = v)\n\t\t),\n\t});\n\n\tconst mergedProps = $derived(mergeProps(restProps, rootState.props));\n</script>\n\n{#if child}\n\t{@render child({ props: mergedProps })}\n{:else}\n\t<div {...mergedProps}>\n\t\t{@render children?.()}\n\t</div>\n{/if}\n","<script lang=\"ts\">\n\timport { box, mergeProps } from \"svelte-toolbelt\";\n\timport type { AccordionItemProps } from \"../types.js\";\n\timport { useAccordionItem } from \"../accordion.svelte.js\";\n\timport { useId } from \"../../../internal/use-id.js\";\n\n\tlet {\n\t\tid = useId(),\n\t\tdisabled = false,\n\t\tvalue = useId(),\n\t\tchildren,\n\t\tchild,\n\t\tref = $bindable(null),\n\t\t...restProps\n\t}: AccordionItemProps = $props();\n\n\tconst itemState = useAccordionItem({\n\t\tvalue: box.with(() => value),\n\t\tdisabled: box.with(() => disabled),\n\t\tid: box.with(() => id),\n\t\tref: box.with(\n\t\t\t() => ref,\n\t\t\t(v) => (ref = v)\n\t\t),\n\t});\n\n\tconst mergedProps = $derived(mergeProps(restProps, itemState.props));\n</script>\n\n{#if child}\n\t{@render child({ props: mergedProps })}\n{:else}\n\t<div {...mergedProps}>\n\t\t{@render children?.()}\n\t</div>\n{/if}\n","<script lang=\"ts\">\n\timport { box, mergeProps } from \"svelte-toolbelt\";\n\timport type { AccordionHeaderProps } from \"../types.js\";\n\timport { useAccordionHeader } from \"../accordion.svelte.js\";\n\timport { useId } from \"../../../internal/use-id.js\";\n\n\tlet {\n\t\tid = useId(),\n\t\tlevel = 2,\n\t\tchildren,\n\t\tchild,\n\t\tref = $bindable(null),\n\t\t...restProps\n\t}: AccordionHeaderProps = $props();\n\n\tconst headerState = useAccordionHeader({\n\t\tid: box.with(() => id),\n\t\tlevel: box.with(() => level),\n\t\tref: box.with(\n\t\t\t() => ref,\n\t\t\t(v) => (ref = v)\n\t\t),\n\t});\n\n\tconst mergedProps = $derived(mergeProps(restProps, headerState.props));\n</script>\n\n{#if child}\n\t{@render child({ props: mergedProps })}\n{:else}\n\t<div {...mergedProps}>\n\t\t{@render children?.()}\n\t</div>\n{/if}\n","<script lang=\"ts\">\n\timport { box, mergeProps } from \"svelte-toolbelt\";\n\timport type { AccordionTriggerProps } from \"../types.js\";\n\timport { useAccordionTrigger } from \"../accordion.svelte.js\";\n\timport { useId } from \"../../../internal/use-id.js\";\n\n\tlet {\n\t\tdisabled = false,\n\t\tref = $bindable(null),\n\t\tid = useId(),\n\t\tchildren,\n\t\tchild,\n\t\t...restProps\n\t}: AccordionTriggerProps = $props();\n\n\tconst triggerState = useAccordionTrigger({\n\t\tdisabled: box.with(() => disabled),\n\t\tid: box.with(() => id),\n\t\tref: box.with(\n\t\t\t() => ref,\n\t\t\t(v) => (ref = v)\n\t\t),\n\t});\n\n\tconst mergedProps = $derived(mergeProps(restProps, triggerState.props));\n</script>\n\n{#if child}\n\t{@render child({ props: mergedProps })}\n{:else}\n\t<button type=\"button\" {...mergedProps}>\n\t\t{@render children?.()}\n\t</button>\n{/if}\n","<script lang=\"ts\">\n\timport { box, mergeProps } from \"svelte-toolbelt\";\n\timport { useAccordionContent } from \"../accordion.svelte.js\";\n\timport type { AccordionContentProps } from \"../types.js\";\n\timport { PresenceLayer } from \"../../utilities/presence-layer/index.js\";\n\timport { useId } from \"../../../internal/use-id.js\";\n\n\tlet {\n\t\tchild,\n\t\tref = $bindable(null),\n\t\tid = useId(),\n\t\tforceMount = false,\n\t\tchildren,\n\t\t...restProps\n\t}: AccordionContentProps = $props();\n\n\tconst contentState = useAccordionContent({\n\t\tforceMount: box.with(() => forceMount),\n\t\tid: box.with(() => id),\n\t\tref: box.with(\n\t\t\t() => ref,\n\t\t\t(v) => (ref = v)\n\t\t),\n\t});\n</script>\n\n<PresenceLayer forceMount={true} present={contentState.present} {id}>\n\t{#snippet presence({ present })}\n\t\t{@const mergedProps = mergeProps(restProps, contentState.props, {\n\t\t\thidden: forceMount ? undefined : !present.current,\n\t\t})}\n\t\t{#if child}\n\t\t\t{@render child({\n\t\t\t\tprops: mergedProps,\n\t\t\t\t...contentState.snippetProps,\n\t\t\t})}\n\t\t{:else}\n\t\t\t<div {...mergedProps}>\n\t\t\t\t{@render children?.()}\n\t\t\t</div>\n\t\t{/if}\n\t{/snippet}\n</PresenceLayer>\n","<script lang=\"ts\">\n\timport type { TokenData } from '$lib/common/interfaces';\n\timport { log } from '$lib/common/logger-wrapper';\n\timport { formatPrice, getTokenChange } from '$lib/utilities/utilities';\n\timport ProtectedValue from './ProtectedValue.svelte';\n\timport Tooltip from './Tooltip.svelte';\n\n\tlet {\n\t\ttoken,\n\t\tlocked = true,\n\t\tclassName = ''\n\t} = $props<{\n\t\ttoken: TokenData;\n\t\tlocked?: boolean;\n\t\tclassName?: string;\n\t}>();\n\n\t// Determine the 24h percentChange color\n\tconst percentChange: number | null = getTokenChange(token.change, '24h');\n\tconst percentChangeColor =\n\t\tpercentChange === null\n\t\t\t? 'text-slate-900'\n\t\t\t: percentChange >= 0\n\t\t\t\t? 'text-green-500'\n\t\t\t\t: 'text-red-500';\n\n\tlet balance = $state(token?.balance);\n\tlet price = $state(0);\n\tlet priceFormatted = $state('');\n\tlet value = $state(0);\n\tlet valueFormatted = $state('');\n\n\t$effect(() => {\n\t\tbalance = token?.balance;\n\t\tprice = token?.price?.price ?? 0;\n\t\tpriceFormatted = formatPrice(price);\n\t\tvalue = balance ? Number(balance) * price : 0;\n\t\tvalueFormatted = formatPrice(value);\n\t});\n\n\tlog.info('TokenLineView', false, {\n\t\ttoken,\n\t\tlocked,\n\t\tbalance: token.balance,\n\t\tquantity: token.quantity,\n\t\tprice: token.price?.price\n\t});\n\n\t// Function to format the tooltip price based on the value\n\tfunction getTooltipPrice(): string {\n\t\tif (price < 0.01) {\n\t\t\t// Format with token decimals and trim trailing zeros\n\t\t\tconst formatted = price.toFixed(token.decimals);\n\t\t\treturn `$${formatted.replace(/\\.?0+$/, '')}`;\n\t\t}\n\t\treturn `${formatPrice(price)}`;\n\t}\n</script>\n\n{#if token.url}\n\t<a\n\t\thref={token.url}\n\t\ttarget=\"_blank\"\n\t\trel=\"noopener noreferrer\"\n\t\tclass=\"flex justify-between items-center py-1.5 px-2 border-b border-gray-200 border-solid hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors cursor-pointer {className}\"\n\t>\n\t\t<div class=\"flex items-center gap-2 item\">\n\t\t\t{#if token.logoURI}\n\t\t\t\t<img src={token.logoURI} alt={token.symbol} class=\"w-6 h-6 rounded-full\" />\n\t\t\t{/if}\n\t\t\t<div>\n\t\t\t\t<p class=\"text-sm font-medium\">{token.name} ({token.symbol})</p>\n\t\t\t\t<!-- <p class=\"text-xs text-gray-500\">Balance: <ProtectedValue value={token.balance?.toString() ?? '0'} placeholder=\"*******\" /></p> -->\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"text-right\">\n\t\t\t<Tooltip content={getTooltipPrice()}>\n\t\t\t\t<p class=\"text-sm font-medium\">\n\t\t\t\t\t{price < 0.01\n\t\t\t\t\t\t? '< .01 ~' + formatPrice(token.price?.price ?? 0)\n\t\t\t\t\t\t: formatPrice(token.price?.price ?? 0)}\n\t\t\t\t</p>\n\t\t\t</Tooltip>\n\t\t\t<!-- <p class=\"text-xs {percentChangeColor}\">{percentChange ? `${percentChange > 0 ? '+' : ''}${percentChange}%` : '--'}</p> -->\n\t\t</div>\n\t</a>\n{:else}\n\t<div\n\t\tclass=\"flex justify-between items-center py-1.5 px-2 border-b border-gray-200 border-solid hover:bg-gray-50 dark:hover:bg-zinc-800 item {className}\"\n\t>\n\t\t<div class=\"flex items-center gap-2\">\n\t\t\t{#if token.logoURI}\n\t\t\t\t<img src={token.logoURI} alt={token.symbol} class=\"w-6 h-6 rounded-full\" />\n\t\t\t{/if}\n\t\t\t<div>\n\t\t\t\t<p class=\"text-sm font-medium\">{token.name} ({token.symbol})</p>\n\t\t\t\t<!-- <p class=\"text-xs text-gray-500\">Balance: <ProtectedValue value={token.balance?.toString() ?? '0'} placeholder=\"*******\" /></p> -->\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"text-right\">\n\t\t\t<Tooltip content={getTooltipPrice()}>\n\t\t\t\t<p class=\"text-sm font-medium\">\n\t\t\t\t\t{price < 0.01\n\t\t\t\t\t\t? '< .01 ~' + formatPrice(token.price?.price ?? 0)\n\t\t\t\t\t\t: formatPrice(token.price?.price ?? 0)}\n\t\t\t\t</p>\n\t\t\t</Tooltip>\n\t\t\t<!-- <p class=\"text-xs {percentChangeColor}\">{percentChange ? `${percentChange > 0 ? '+' : ''}${percentChange}%` : '--'}</p> -->\n\t\t</div>\n\t</div>\n{/if}\n","<script lang=\"ts\">\n\timport { Accordion as AccordionPrimitive, type WithoutChild } from 'bits-ui';\n\timport { cn } from '$lib/utils.js';\n\n\tlet {\n\t\tref = $bindable(null),\n\t\tclass: className,\n\t\tchildren,\n\t\t...restProps\n\t}: WithoutChild<AccordionPrimitive.ContentProps> = $props();\n</script>\n\n<AccordionPrimitive.Content\n\tbind:ref\n\tclass={cn(\n\t\t'data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm transition-all',\n\t\tclassName\n\t)}\n\t{...restProps}\n>\n\t<div class=\"pb-4 pt-0\">\n\t\t{@render children?.()}\n\t</div>\n</AccordionPrimitive.Content>\n","<script lang=\"ts\">\n\timport { Accordion as AccordionPrimitive } from 'bits-ui';\n\timport { cn } from '$lib/utils.js';\n\n\tlet {\n\t\tref = $bindable(null),\n\t\tclass: className,\n\t\t...restProps\n\t}: AccordionPrimitive.ItemProps = $props();\n</script>\n\n<AccordionPrimitive.Item bind:ref class={cn('border-b', className)} {...restProps} />\n","/**\n * @license lucide-svelte v0.468.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\nconst defaultAttributes = {\n    xmlns: 'http://www.w3.org/2000/svg',\n    width: 24,\n    height: 24,\n    viewBox: '0 0 24 24',\n    fill: 'none',\n    stroke: 'currentColor',\n    'stroke-width': 2,\n    'stroke-linecap': 'round',\n    'stroke-linejoin': 'round',\n};\nexport default defaultAttributes;\n","<script>import defaultAttributes from './defaultAttributes';\nexport let name = undefined;\nexport let color = 'currentColor';\nexport let size = 24;\nexport let strokeWidth = 2;\nexport let absoluteStrokeWidth = false;\nexport let iconNode = [];\nconst mergeClasses = (...classes) => classes.filter((className, index, array) => {\n    return Boolean(className) && array.indexOf(className) === index;\n})\n    .join(' ');\n</script>\n\n<svg\n  {...defaultAttributes}\n  {...$$restProps}\n  width={size}\n  height={size}\n  stroke={color}\n  stroke-width={\n    absoluteStrokeWidth\n      ? Number(strokeWidth) * 24 / Number(size)\n      : strokeWidth\n  }\n  class={\n    mergeClasses(\n      'lucide-icon',\n      'lucide',\n      name ? `lucide-${name}`: '',\n      $$props.class\n    )\n  }\n>\n  {#each iconNode as [tag, attrs]}\n    <svelte:element this={tag} {...attrs}/>\n  {/each}\n  <slot />\n</svg>\n","<script>/**\n * @license lucide-svelte v0.468.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\nimport Icon from '../Icon.svelte';\nconst iconNode = [[\"path\", { \"d\": \"m6 9 6 6 6-6\" }]];\n/**\n * @component @name ChevronDown\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtNiA5IDYgNiA2LTYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/chevron-down\n * @see https://lucide.dev/guide/packages/lucide-svelte - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {FunctionalComponent} Svelte component\n *\n */\n</script>\n\n<Icon name=\"chevron-down\" {...$$props} iconNode={iconNode}>\n  <slot/>\n</Icon>\n","<script lang=\"ts\">\n\timport { Accordion as AccordionPrimitive, type WithoutChild } from 'bits-ui';\n\timport ChevronDown from 'lucide-svelte/icons/chevron-down';\n\timport { cn } from '$lib/utils.js';\n\n\tlet {\n\t\tref = $bindable(null),\n\t\tclass: className,\n\t\tlevel = 3,\n\t\tchildren,\n\t\t...restProps\n\t}: WithoutChild<AccordionPrimitive.TriggerProps> & {\n\t\tlevel?: AccordionPrimitive.HeaderProps['level'];\n\t} = $props();\n</script>\n\n<AccordionPrimitive.Header {level} class=\"flex\">\n\t<AccordionPrimitive.Trigger\n\t\tbind:ref\n\t\tclass={cn(\n\t\t\t'flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180',\n\t\t\tclassName\n\t\t)}\n\t\t{...restProps}\n\t>\n\t\t{@render children?.()}\n\t\t<ChevronDown class=\"size-4 shrink-0 transition-transform duration-200\" />\n\t</AccordionPrimitive.Trigger>\n</AccordionPrimitive.Header>\n","import { Accordion as AccordionPrimitive } from 'bits-ui';\nimport Content from './accordion-content.svelte';\nimport Item from './accordion-item.svelte';\nimport Trigger from './accordion-trigger.svelte';\nconst Root = AccordionPrimitive.Root;\n\nexport {\n\tRoot,\n\tContent,\n\tItem,\n\tTrigger,\n\t//\n\tRoot as Accordion,\n\tContent as AccordionContent,\n\tItem as AccordionItem,\n\tTrigger as AccordionTrigger\n};\n","<script lang=\"ts\">\n\timport { getYakklCombinedToken, yakklCombinedTokenStore, getSettings } from '$lib/common/stores';\n\timport type { Settings, TokenData } from '$lib/common';\n\timport { onMount } from 'svelte';\n\timport { log } from '$lib/managers/Logger';\n\timport { browser_ext } from '$lib/common/environment';\n\timport { handleOnMessageForPricing } from '$lib/common/listeners/ui/uiListeners';\n\timport { startPricingChecks } from '$lib/tokens/prices';\n\timport { updateTokenPrices } from '$lib/common/tokenPriceManager';\n\timport TokenLineView from './TokenLineView.svelte';\n\timport * as Accordion from './ui/accordion';\n\timport { cn } from '$lib/utils';\n\n\tinterface Props {\n\t\tmaxVisibleTokens?: number; // 0 means show all\n\t\tmaxTokens?: number;\n\t\tlocked?: boolean;\n\t\tclassName?: string;\n\t}\n\n\tlet {\n\t\tmaxVisibleTokens = 0,\n\t\tlocked = true,\n\t\tmaxTokens = locked ? 3 : 0,\n\t\tclassName = ''\n\t}: Props = $props();\n\n\tlet tokens: TokenData[] = $state([]);\n\tlet visibleTokens: TokenData[] = $state([]);\n\tlet remainingTokens: TokenData[] = $state([]);\n\tlet isExpanded = $state(false);\n\n\tlog.info('TokenComponentList', false, 'Mounting');\n\n\tonMount(async (): Promise<any> => {\n\t\tlog.info('TokenComponentList', false, 'onMount');\n\n\t\tconst settings: Settings = await getSettings();\n\t\tif (!settings.init || !settings.legal.termsAgreed) {\n\t\t\ttokens = [];\n\t\t\tupdateTokenDisplay();\n\t\t} else {\n\t\t\tgetYakklCombinedToken().then((initialTokens) => {\n\t\t\t\tconsole.log('TokenComponentList: combined tokens loaded', initialTokens.length);\n\n\t\t\t\t// If no tokens are loaded, try to trigger loading them\n\t\t\t\tif (initialTokens.length === 0) {\n\t\t\t\t\tlog.warn(\n\t\t\t\t\t\t'TokenComponentList: No tokens loaded from combined store, attempting to load defaults'\n\t\t\t\t\t);\n\t\t\t\t\timport('$lib/managers/tokens/loadDefaultTokens').then(({ loadDefaultTokens }) => {\n\t\t\t\t\t\tloadDefaultTokens().then(() => {\n\t\t\t\t\t\t\t// After loading defaults, attempt to get combined tokens again\n\t\t\t\t\t\t\tgetYakklCombinedToken().then((reloadedTokens) => {\n\t\t\t\t\t\t\t\tconsole.log('TokenComponentList: tokens after reload', reloadedTokens.length);\n\t\t\t\t\t\t\t\tconst effectiveMaxTokens = locked ? maxTokens : maxTokens > 0 ? maxTokens : 0;\n\t\t\t\t\t\t\t\ttokens =\n\t\t\t\t\t\t\t\t\teffectiveMaxTokens > 0\n\t\t\t\t\t\t\t\t\t\t? reloadedTokens.slice(0, effectiveMaxTokens)\n\t\t\t\t\t\t\t\t\t\t: reloadedTokens;\n\t\t\t\t\t\t\t\tupdateTokenDisplay();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tconst effectiveMaxTokens = locked ? maxTokens : maxTokens > 0 ? maxTokens : 0;\n\t\t\t\ttokens =\n\t\t\t\t\teffectiveMaxTokens > 0 ? initialTokens.slice(0, effectiveMaxTokens) : initialTokens;\n\t\t\t\tupdateTokenDisplay();\n\t\t\t});\n\t\t}\n\n\t\tif (browser_ext) {\n\t\t\tbrowser_ext.runtime.onMessage.addListener(handleOnMessageForPricing);\n\t\t\tbrowser_ext.runtime.sendMessage({ action: 'getTokenData' });\n\n\t\t\tstartPricingChecks();\n\t\t\tupdateTokenPrices(); // Initial token price update\n\t\t}\n\n\t\t// Subscribe to store changes\n\t\tconst unsubscribe = yakklCombinedTokenStore.subscribe((newTokens) => {\n\t\t\t// Apply the same token limit logic when store updates\n\t\t\tconst effectiveMaxTokens = locked ? maxTokens : maxTokens > 0 ? maxTokens : 0;\n\t\t\ttokens = effectiveMaxTokens > 0 ? newTokens.slice(0, effectiveMaxTokens) : newTokens;\n\t\t\tupdateTokenDisplay();\n\t\t});\n\n\t\treturn () => {\n\t\t\tunsubscribe();\n\t\t\tif (browser_ext) {\n\t\t\t\tbrowser_ext.runtime.onMessage.removeListener(handleOnMessageForPricing);\n\t\t\t}\n\t\t};\n\t});\n\n\tfunction updateTokenDisplay() {\n\t\t// If maxVisibleTokens is 0 or we have fewer tokens than maxVisibleTokens, show all tokens\n\t\tif (maxVisibleTokens === 0 || tokens.length <= maxVisibleTokens) {\n\t\t\tvisibleTokens = tokens;\n\t\t\tremainingTokens = [];\n\t\t} else {\n\t\t\tvisibleTokens = tokens.slice(0, maxVisibleTokens);\n\t\t\tremainingTokens = tokens.slice(maxVisibleTokens);\n\t\t}\n\t\tconsole.log('updateTokenDisplay', {\n\t\t\tvisibleTokens,\n\t\t\tremainingTokens,\n\t\t\tmaxVisibleTokens,\n\t\t\tmaxTokens,\n\t\t\tlocked\n\t\t});\n\t}\n\n\tfunction toggleExpand() {\n\t\tisExpanded = !isExpanded;\n\t}\n</script>\n\n<div class={cn('flex flex-col', className)}>\n\t<div class=\"space-y-1\">\n\t\t{#each visibleTokens as token}\n\t\t\t<TokenLineView {token} {locked} />\n\t\t{/each}\n\t</div>\n\n\t{#if remainingTokens.length > 0}\n\t\t<Accordion.Root type=\"single\">\n\t\t\t<Accordion.Item value=\"remaining-tokens\">\n\t\t\t\t<Accordion.Trigger\n\t\t\t\t\tclass=\"w-full py-2 text-sm text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200\"\n\t\t\t\t>\n\t\t\t\t\t{isExpanded ? 'Show Less' : `Show ${remainingTokens.length} More Tokens`}\n\t\t\t\t</Accordion.Trigger>\n\t\t\t\t<Accordion.Content>\n\t\t\t\t\t<div class=\"space-y-1\">\n\t\t\t\t\t\t{#each remainingTokens as token}\n\t\t\t\t\t\t\t<TokenLineView {token} {locked} />\n\t\t\t\t\t\t{/each}\n\t\t\t\t\t</div>\n\t\t\t\t</Accordion.Content>\n\t\t\t</Accordion.Item>\n\t\t</Accordion.Root>\n\t{/if}\n</div>\n","<!-- File: src/lib/components/Banner.svelte -->\n<script lang=\"ts\">\n\tlet {\n\t\ttitle = 'Welcome to YAKKL',\n\t\tmessage = 'Your secure crypto wallet',\n\t\tctaText = 'UPGRADE',\n\t\tonCallToAction = null\n\t} = $props<{\n\t\ttitle?: string;\n\t\tmessage?: string;\n\t\tctaText?: string;\n\t\tonCallToAction?: ((index: number) => void) | null;\n\t}>();\n</script>\n\n<div class=\"bg-primary text-primary-content p-4\">\n\t<div class=\"flex justify-between items-center\">\n\t\t<div>\n\t\t\t<h2 class=\"text-lg font-bold\">{title}</h2>\n\t\t\t<p class=\"text-sm\">{message}</p>\n\t\t</div>\n\t\t{#if onCallToAction}\n\t\t\t<button onclick={onCallToAction} class=\"btn btn-secondary btn-sm\">\n\t\t\t\t{ctaText}\n\t\t\t</button>\n\t\t{/if}\n\t</div>\n</div>\n","<script lang=\"ts\">\n\tlet {\n\t\tuseGoogleAd = false,\n\t\tcustomContent,\n\t\tonCallToAction = null\n\t} = $props<{\n\t\tuseGoogleAd?: boolean;\n\t\tcustomContent?: () => string;\n\t\tonCallToAction?: ((index: number) => void) | null;\n\t}>();\n</script>\n\n<div class=\"bg-primary text-primary-content p-2\">\n\t{#if useGoogleAd}\n\t\t<!-- Google AdSense placeholder -->\n\t\t<div class=\"h-[100px] flex items-center justify-center\">Ad Space</div>\n\t{:else if customContent}\n\t\t{@html customContent()}\n\t{/if}\n</div>\n","<!-- File: src/lib/components/RotatingBanner.svelte -->\n<script lang=\"ts\">\n\timport { onDestroy } from 'svelte';\n\timport Banner from './Banner.svelte';\n\timport Ad from './Ad.svelte';\n\timport { UnifiedTimerManager } from '$lib/managers/UnifiedTimerManager';\n\n\ttype BannerItem = {\n\t\ttype: 'banner';\n\t\ttitle?: string;\n\t\tmessage?: string;\n\t\tctaText?: string;\n\t\tonCallToAction?: ((index: number) => void) | null;\n\t};\n\n\ttype AdItem = {\n\t\ttype: 'ad';\n\t\tuseGoogleAd?: boolean;\n\t\tcustomContent?: (index: number) => string;\n\t\tonCallToAction?: ((index: number) => void) | null;\n\t};\n\n\ttype CustomItem = {\n\t\ttype: 'custom';\n\t\thtml: string;\n\t};\n\n\ttype RotatingItem = BannerItem | AdItem | CustomItem;\n\n\tlet {\n\t\tshow = $bindable(true),\n\t\titems = [],\n\t\tinterval = 0,\n\t\tautoRotate = true,\n\t\tshowControls = true\n\t} = $props<{\n\t\tshow?: boolean;\n\t\titems: RotatingItem[];\n\t\tinterval?: number;\n\t\tautoRotate?: boolean;\n\t\tshowControls?: boolean;\n\t}>();\n\n\tlet currentIndex = $state(0);\n\tconst timerManager = UnifiedTimerManager.getInstance();\n\tconst timerId = 'rotating-banner';\n\tlet current = $derived(items[currentIndex]);\n\n\tfunction next() {\n\t\tcurrentIndex = (currentIndex + 1) % items.length;\n\t}\n\n\tfunction previous() {\n\t\tcurrentIndex = (currentIndex - 1 + items.length) % items.length;\n\t}\n\n\t$effect(() => {\n\t\tif (autoRotate && interval > 0 && items.length > 1) {\n\t\t\ttimerManager.stopInterval(timerId);\n\t\t\ttimerManager.removeInterval(timerId);\n\t\t\ttimerManager.addInterval(timerId, next, interval);\n\t\t\ttimerManager.startInterval(timerId);\n\t\t} else {\n\t\t\ttimerManager.stopInterval(timerId);\n\t\t\ttimerManager.removeInterval(timerId);\n\t\t}\n\t});\n\n\tonDestroy(() => {\n\t\ttimerManager.stopInterval(timerId);\n\t\ttimerManager.removeInterval(timerId);\n\t});\n</script>\n\n{#if show}\n\t<div class=\"relative\">\n\t\t{#if showControls && items.length > 1}\n\t\t\t<div class=\"absolute inset-y-0 left-0 flex items-center z-10\">\n\t\t\t\t<button\n\t\t\t\t\tclass=\"p-0.5 rounded-full bg-black/10 hover:bg-black/20 transition-colors\"\n\t\t\t\t\tonclick={previous}\n\t\t\t\t\taria-label=\"Previous\"\n\t\t\t\t>\n\t\t\t\t\t<svg\n\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\tclass=\"h-3 w-3\"\n\t\t\t\t\t\tviewBox=\"0 0 20 20\"\n\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\td=\"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z\"\n\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</svg>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div class=\"absolute inset-y-0 right-0 flex items-center z-10\">\n\t\t\t\t<button\n\t\t\t\t\tclass=\"p-0.5 rounded-full bg-black/10 hover:bg-black/20 transition-colors\"\n\t\t\t\t\tonclick={next}\n\t\t\t\t\taria-label=\"Next\"\n\t\t\t\t>\n\t\t\t\t\t<svg\n\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\tclass=\"h-3 w-3\"\n\t\t\t\t\t\tviewBox=\"0 0 20 20\"\n\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\td=\"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z\"\n\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</svg>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t{/if}\n\n\t\t<div class={showControls && items.length > 1 ? 'px-4' : ''}>\n\t\t\t{#if current.type === 'banner'}\n\t\t\t\t<Banner\n\t\t\t\t\t{...current}\n\t\t\t\t\tonCallToAction={current.onCallToAction\n\t\t\t\t\t\t? () => current.onCallToAction?.(currentIndex)\n\t\t\t\t\t\t: null}\n\t\t\t\t/>\n\t\t\t{:else if current.type === 'ad'}\n\t\t\t\t<Ad\n\t\t\t\t\t{...current}\n\t\t\t\t\tcustomContent={current.customContent\n\t\t\t\t\t\t? () => current.customContent?.(currentIndex)\n\t\t\t\t\t\t: undefined}\n\t\t\t\t\tonCallToAction={current.onCallToAction\n\t\t\t\t\t\t? () => current.onCallToAction?.(currentIndex)\n\t\t\t\t\t\t: null}\n\t\t\t\t/>\n\t\t\t{:else if current.type === 'custom'}\n\t\t\t\t{@html current.html}\n\t\t\t{/if}\n\t\t</div>\n\n\t\t{#if showControls && items.length > 1}\n\t\t\t<div class=\"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex gap-1 z-10\">\n\t\t\t\t{#each items as _, i}\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"w-1.5 h-1.5 rounded-full transition-colors {i === currentIndex\n\t\t\t\t\t\t\t? 'bg-primary'\n\t\t\t\t\t\t\t: 'bg-gray-300'}\"\n\t\t\t\t\t\tonclick={() => (currentIndex = i)}\n\t\t\t\t\t\taria-label=\"Go to slide {i + 1}\"\n\t\t\t\t\t>\n\t\t\t\t\t</button>\n\t\t\t\t{/each}\n\t\t\t</div>\n\t\t{/if}\n\t</div>\n{/if}\n","<script lang=\"ts\">\n\tconst { size = 24, stroke = 'currentColor', className = '' } = $props();\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width=\"1.5\"\n\t{stroke}\n\twidth={size}\n\theight={size}\n\tclass={className}\n>\n\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"m19.5 8.25-7.5 7.5-7.5-7.5\" />\n</svg>\n","<!-- File: src/lib/components/icons/ChevronUpIcon.svelte -->\n<script lang=\"ts\">\n\tinterface Props {\n\t\tclassName?: string;\n\t}\n\n\tlet { className = '' }: Props = $props();\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width=\"1.5\"\n\tstroke=\"currentColor\"\n\tclass=\"size-6\"\n>\n\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"m4.5 15.75 7.5-7.5 7.5 7.5\" />\n</svg>\n","<!-- File: src/lib/components/icons/ResizeIcon.svelte -->\n<script lang=\"ts\">\n\tinterface Props {\n\t\tclassName?: string;\n\t}\n\n\tlet { className = '' }: Props = $props();\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tviewBox=\"0 0 24 24\"\n\tfill=\"none\"\n\tstroke=\"currentColor\"\n\tstroke-width=\"2\"\n\tstroke-linecap=\"round\"\n\tstroke-linejoin=\"round\"\n\tclass={className}\n>\n\t<path d=\"M21 3L3 21\" />\n\t<path d=\"M21 21L3 3\" />\n\t<path d=\"M21 15L15 21\" />\n\t<path d=\"M9 3L3 9\" />\n</svg>\n","<!-- svelte-ignore non_reactive_update -->\n<!-- svelte-ignore non_reactive_update -->\n<!-- File: src/lib/components/SectionCard.svelte -->\n<script lang=\"ts\">\n\timport { onMount } from 'svelte';\n\timport ChevronDownIcon from './icons/ChevronDownIcon.svelte';\n\timport ChevronUpIcon from './icons/ChevronUpIcon.svelte';\n\timport ResizeIcon from './icons/ResizeIcon.svelte';\n\timport EyeIcon from './icons/EyeIcon.svelte';\n\timport { cn } from '$lib/utils';\n\timport Tooltip from './Tooltip.svelte';\n\n\tlet {\n\t\tshow = $bindable(true),\n\t\ttitle,\n\t\ticon: Icon = null,\n\t\tclassName = '',\n\t\tisPinned = false,\n\t\teye = false,\n\t\teyeTooltip = 'Toggle visibility of values',\n\t\tminHeight = '200px',\n\t\tmaxHeight = '400px',\n\t\tlocked = true,\n\t\tfooter: Footer = null,\n\t\tfooterProps = {},\n\t\tlockedFooter: LockedFooter = null,\n\t\tlockedFooterProps = {},\n\t\tchildren\n\t} = $props<{\n\t\tshow?: boolean;\n\t\ttitle: string;\n\t\ticon?: any;\n\t\tclassName?: string;\n\t\tisPinned?: boolean;\n\t\teye?: boolean;\n\t\teyeTooltip?: string;\n\t\tminHeight?: string;\n\t\tmaxHeight?: string;\n\t\tlocked?: boolean;\n\t\tfooter?: any;\n\t\tfooterProps?: Record<string, any>;\n\t\tlockedFooter?: any;\n\t\tlockedFooterProps?: Record<string, any>;\n\t\tchildren: () => any;\n\t}>();\n\n\tlet isCollapsed = $state(false);\n\tlet isResizing = $state(false);\n\tlet cardHeight = $state(minHeight);\n\tlet startY = $state(0);\n\tlet startHeight = $state(0);\n\tlet cardElement = $state<HTMLElement | null>(null);\n\tlet contentElement = $state<HTMLElement | null>(null);\n\tlet hasItems = $state(false);\n\tlet calculatedMinHeight = $state('');\n\n\tfunction calculateMinHeight() {\n\t\tif (!cardElement || !contentElement) return;\n\n\t\tconst headerHeight =\n\t\t\t(cardElement.querySelector('header') as HTMLElement | null)?.offsetHeight || 0;\n\t\tconst firstItemHeight =\n\t\t\t(contentElement.querySelector('.item') as HTMLElement | null)?.offsetHeight || 0;\n\n\t\t// If there are items, min height is header + one item\n\t\t// If no items, min height is just the header\n\t\tconst newMinHeight = hasItems ? headerHeight + firstItemHeight : headerHeight;\n\t\tcalculatedMinHeight = `${newMinHeight}px`;\n\n\t\t// Update card height if it's currently smaller than the new minimum\n\t\tif (parseInt(cardHeight) < newMinHeight) {\n\t\t\tcardHeight = calculatedMinHeight;\n\t\t}\n\t}\n\n\tfunction handleResizeStart(e: MouseEvent) {\n\t\te.preventDefault();\n\t\tisResizing = true;\n\t\tstartY = e.clientY;\n\t\tstartHeight = cardElement.offsetHeight;\n\t\tdocument.addEventListener('mousemove', handleResizeMove);\n\t\tdocument.addEventListener('mouseup', handleResizeEnd);\n\t}\n\n\tfunction handleResizeMove(e: MouseEvent) {\n\t\tif (!isResizing) return;\n\n\t\tconst deltaY = e.clientY - startY;\n\t\tconst newHeight = Math.max(\n\t\t\tparseInt(calculatedMinHeight || minHeight),\n\t\t\tMath.min(parseInt(maxHeight), startHeight + deltaY)\n\t\t);\n\t\tcardHeight = `${newHeight}px`;\n\t}\n\n\tfunction handleResizeEnd() {\n\t\tisResizing = false;\n\t\tdocument.removeEventListener('mousemove', handleResizeMove);\n\t\tdocument.removeEventListener('mouseup', handleResizeEnd);\n\t}\n\n\tfunction toggleCollapse() {\n\t\tisCollapsed = !isCollapsed;\n\t}\n\n\tonMount(() => {\n\t\t// Initial calculation\n\t\tcalculateMinHeight();\n\n\t\t// Observe content changes to recalculate minimum height\n\t\tconst observer = new MutationObserver(() => {\n\t\t\thasItems = contentElement.querySelector('.item') !== null;\n\t\t\tcalculateMinHeight();\n\t\t});\n\n\t\tif (contentElement) {\n\t\t\tobserver.observe(contentElement, {\n\t\t\t\tchildList: true,\n\t\t\t\tsubtree: true\n\t\t\t});\n\t\t}\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('mousemove', handleResizeMove);\n\t\t\tdocument.removeEventListener('mouseup', handleResizeEnd);\n\t\t\tobserver.disconnect();\n\t\t};\n\t});\n</script>\n\n{#if show}\n\t<div\n\t\tbind:this={cardElement}\n\t\tclass={cn(\n\t\t\t'bg-white dark:bg-zinc-800 rounded-xl shadow-sm border border-zinc-200 dark:border-zinc-700',\n\t\t\t'transition-all duration-200 ease-in-out',\n\t\t\t'hover:shadow-md',\n\t\t\t'flex flex-col',\n\t\t\t'relative',\n\t\t\tisPinned && 'sticky top-0 z-10 scroll-mt-4',\n\t\t\tclassName\n\t\t)}\n\t\tstyle=\"height: {isCollapsed ? 'auto' : cardHeight}\"\n\t>\n\t\t<!-- Header -->\n\t\t<header\n\t\t\tclass=\"flex items-center justify-between p-4 border-b border-zinc-200 dark:border-zinc-700\"\n\t\t>\n\t\t\t<div class=\"flex items-center gap-2\">\n\t\t\t\t{#if Icon}\n\t\t\t\t\t<Icon className=\"w-5 h-5 text-zinc-600 dark:text-zinc-400\" />\n\t\t\t\t{/if}\n\t\t\t\t<h2 class=\"text-md font-semibold text-zinc-900 dark:text-zinc-100\">{title}</h2>\n\t\t\t\t{#if eye}\n\t\t\t\t\t<Tooltip content={eyeTooltip}>\n\t\t\t\t\t\t<EyeIcon className=\"w-4 h-4 text-zinc-600 dark:text-zinc-400\" />\n\t\t\t\t\t</Tooltip>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t\t<div class=\"flex items-center gap-2\">\n\t\t\t\t<button\n\t\t\t\t\tclass=\"p-1 rounded-lg hover:bg-zinc-100 dark:hover:bg-zinc-700 transition-colors\"\n\t\t\t\t\tonclick={toggleCollapse}\n\t\t\t\t\taria-label={isCollapsed ? 'Expand section' : 'Collapse section'}\n\t\t\t\t>\n\t\t\t\t\t{#if isCollapsed}\n\t\t\t\t\t\t<ChevronDownIcon className=\"w-4 h-4 text-zinc-600 dark:text-zinc-400\" />\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<ChevronUpIcon className=\"w-4 h-4 text-zinc-600 dark:text-zinc-400\" />\n\t\t\t\t\t{/if}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</header>\n\n\t\t<!-- Content -->\n\t\t<div\n\t\t\tbind:this={contentElement}\n\t\t\tclass=\"flex-1 overflow-y-auto transition-all duration-200\"\n\t\t\tstyle=\"height: {isCollapsed ? '0' : 'auto'}\"\n\t\t>\n\t\t\t<div class=\"px-4 pb-4 pt-2\">\n\t\t\t\t{@render children()}\n\t\t\t</div>\n\t\t</div>\n\n\t\t<!-- Footer -->\n\t\t{#if !isCollapsed}\n\t\t\t{#if locked && LockedFooter}\n\t\t\t\t<div\n\t\t\t\t\tclass=\"border-t border-zinc-200 dark:border-zinc-700 p-4 bg-zinc-50 dark:bg-zinc-800/50\"\n\t\t\t\t>\n\t\t\t\t\t<LockedFooter {...lockedFooterProps} />\n\t\t\t\t</div>\n\t\t\t{:else if Footer}\n\t\t\t\t<div\n\t\t\t\t\tclass=\"border-t border-zinc-200 dark:border-zinc-700 p-4 bg-zinc-50 dark:bg-zinc-800/50\"\n\t\t\t\t>\n\t\t\t\t\t<Footer {...footerProps} />\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t{/if}\n\n\t\t<!-- Resize Handle -->\n\t\t{#if !isCollapsed}\n\t\t\t<div\n\t\t\t\trole=\"button\"\n\t\t\t\ttabindex=\"0\"\n\t\t\t\taria-label=\"Resize section\"\n\t\t\t\tclass=\"absolute bottom-0 left-0 right-0 h-4 cursor-ns-resize flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity bg-gradient-to-t from-zinc-100 dark:from-zinc-700 to-transparent\"\n\t\t\t\tonmousedown={handleResizeStart}\n\t\t\t>\n\t\t\t\t<ResizeIcon className=\"w-4 h-4 text-zinc-400 rotate-90\" />\n\t\t\t</div>\n\t\t{/if}\n\t</div>\n{/if}\n","<script lang=\"ts\">\n\tconst { size = 24, stroke = 'currentColor', className = '' } = $props();\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width=\"1.5\"\n\t{stroke}\n\twidth={size}\n\theight={size}\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M21 12a2.25 2.25 0 0 0-2.25-2.25H15a3 3 0 1 1-6 0H5.25A2.25 2.25 0 0 0 3 12m18 0v6a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 18v-6m18 0V9M3 12V9m18 0a2.25 2.25 0 0 0-2.25-2.25H5.25A2.25 2.25 0 0 0 3 9m18 0V6a2.25 2.25 0 0 0-2.25-2.25H5.25A2.25 2.25 0 0 0 3 6v3\"\n\t/>\n</svg>\n","<!-- File: src/lib/components/icons/TokenIcon.svelte -->\n<script lang=\"ts\">\n\tlet { className = '' } = $props<{\n\t\tclassName?: string;\n\t}>();\n</script>\n\n<!-- <svg\n  xmlns=\"http://www.w3.org/2000/svg\"\n  viewBox=\"0 0 24 24\"\n  fill=\"none\"\n  stroke=\"currentColor\"\n  stroke-width=\"2\"\n  stroke-linecap=\"round\"\n  stroke-linejoin=\"round\"\n  class={className}\n>\n  <circle cx=\"12\" cy=\"12\" r=\"10\" />\n  <path d=\"M12 2v20\" />\n  <path d=\"M2 12h20\" />\n</svg> -->\n\n<img\n\tclass={className}\n\tsrc=\"data:image/png;base64,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\"\n\talt=\"chip--v1\"\n/>\n","<!-- File: src/lib/components/icons/NewsIcon.svelte -->\n<script lang=\"ts\">\n\tlet { className = '' } = $props<{\n\t\tclassName?: string;\n\t}>();\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tviewBox=\"0 0 24 24\"\n\tfill=\"none\"\n\tstroke=\"currentColor\"\n\tstroke-width=\"2\"\n\tstroke-linecap=\"round\"\n\tstroke-linejoin=\"round\"\n\tclass={className}\n>\n\t<path\n\t\td=\"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2\"\n\t/>\n\t<path d=\"M18 14h-8\" />\n\t<path d=\"M18 18h-8\" />\n\t<path d=\"M18 10h-8\" />\n</svg>\n","<script lang=\"ts\">\n\tlet { className = 'size-6' } = $props<{\n\t\tclassName?: string;\n\t}>();\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width=\"1.5\"\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M11.42 15.17 17.25 21A2.652 2.652 0 0 0 21 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655 5.653a2.548 2.548 0 1 1-3.586-3.586l6.837-5.63m5.108-.233c.55-.164 1.163-.188 1.743-.14a4.5 4.5 0 0 0 4.486-6.336l-3.276 3.277a3.004 3.004 0 0 1-2.25-2.25l3.276-3.276a4.5 4.5 0 0 0-6.336 4.486c.091 1.076-.071 2.264-.904 2.95l-.102.085m-1.745 1.437L5.909 7.5H4.5L2.25 3.75l1.5-1.5L7.5 4.5v1.409l4.26 4.26m-1.745 1.437 1.745-1.437m6.615 8.206L15.75 15.75M4.867 19.125h.008v.008h-.008v-.008Z\"\n\t/>\n</svg>\n","import type { TokenData, MarketPriceData } from '$lib/common/interfaces'; // Assume the minimal TokenData interface is in a file\nimport { setYakklTokenDataStorage } from '$lib/common/stores';\nimport { log } from '$managers/Logger';\nimport defaultTokens from '$managers/tokens/defaultTokens.json';\n\n/**\n * Load default tokens from JSON and populate setYakklTokensStorage.\n */\nexport async function loadDefaultTokens(): Promise<void> {\n\ttry {\n\t\t// Validate and transform each token from JSON\n\t\tconsole.log('>>>> loadDefaultTokens');\n\n\t\tconst tokens: TokenData[] = defaultTokens.map((token: any) => {\n\t\t\tif (!validateToken(token)) {\n\t\t\t\tthrow new Error(`Invalid token data: ${JSON.stringify(token)}`);\n\t\t\t}\n\t\t\treturn {\n\t\t\t\taddress: token.address,\n\t\t\t\tname: token.name,\n\t\t\t\tsymbol: token.symbol,\n\t\t\t\tdecimals: token.decimals,\n\t\t\t\tchainId: token.chainId,\n\t\t\t\tisNative: token.isNative ?? false,\n\t\t\t\tisStablecoin: token.isStablecoin ?? false,\n\t\t\t\tlogoURI: token.logoURI ?? '',\n\t\t\t\tdescription: token.description ?? '',\n\t\t\t\tbalance: token.balance ?? 0n,\n\t\t\t\tquantity: token.quantity ?? 0,\n\t\t\t\tprice:\n\t\t\t\t\ttoken.price ??\n\t\t\t\t\t({\n\t\t\t\t\t\tprice: token.price?.price ?? 0,\n\t\t\t\t\t\tisNative: token.price?.isNative ?? false,\n\t\t\t\t\t\tprovider: token.price?.provider ?? '',\n\t\t\t\t\t\tlastUpdated: token.price?.lastUpdated ?? 0,\n\t\t\t\t\t\tchainId: token.price?.chainId ?? 1,\n\t\t\t\t\t\tcurrency: token.price?.currency ?? '',\n\t\t\t\t\t\tstatus: token.price?.status ?? '',\n\t\t\t\t\t\tmessage: token.price?.message ?? ''\n\t\t\t\t\t} as MarketPriceData),\n\t\t\t\tchange: token.change ?? [],\n\t\t\t\tvalue: token.value ?? 0,\n\t\t\t\ttags: token.tags ?? [],\n\t\t\t\tversion: token.version ?? '',\n\t\t\t\tcustomDefault: 'default',\n\t\t\t\tsidepanel: token.sidepanel ?? true,\n\t\t\t\tevmCompatible: token.evmCompatible ?? true,\n\t\t\t\turl: token.url ?? ''\n\t\t\t};\n\t\t});\n\n\t\t// Update the storage and store\n\t\tawait setYakklTokenDataStorage(tokens);\n\n\t\t// Log success information\n\t\tlog.info(`Successfully loaded ${tokens.length} default tokens`, false, {\n\t\t\ttokenSymbols: tokens.map((t) => t.symbol)\n\t\t});\n\t} catch (error) {\n\t\tlog.warn('Failed to load default tokens:', false, error);\n\t}\n}\n\n/**\n * Validate token data to ensure it matches the expected structure.\n */\nfunction validateToken(token: any): boolean {\n\t// Partial validation to ensure required fields are present\n\treturn (\n\t\ttypeof token.address === 'string' &&\n\t\ttypeof token.name === 'string' &&\n\t\ttypeof token.symbol === 'string' &&\n\t\ttypeof token.decimals === 'number' &&\n\t\ttypeof token.chainId === 'number' &&\n\t\ttypeof token.logoURI === 'string'\n\t);\n}\n\n// Example default token JSON structure for ChainLink\n// {\n//   \"name\": \"ChainLink Token\",\n//   \"address\": \"0x514910771AF9Ca656af840dff83E8264EcF986CA\",\n//   \"symbol\": \"LINK\",\n//   \"decimals\": 18,\n//   \"chainId\": 1,\n//   \"isNative\": false,\n//   \"isStablecoin\": false,\n//   \"url\": \"https://etherscan.io/token/0x514910771AF9Ca656af840dff83E8264EcF986CA\",\n//   \"logoURI\": \"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x514910771AF9Ca656af840dff83E8264EcF986CA/logo.png\"\n// },\n","// src/lib/services/ExtensionRSSFeedService.ts\n\nimport { VERSION } from '$lib/common/constants';\nimport { browser_ext } from '$lib/common/environment';\n\nexport interface RSSItem {\n\ttitle: string;\n\tsubtitle: string;\n\tdescription: string;\n\tcontent?: string;\n\timageUrl: string;\n\tsource: string;\n\tdate: string;\n\turl: string;\n\tguid?: string;\n\tcategories?: string[];\n\tauthor?: string;\n\tpublishedAt?: string;\n\tcontentType?: 'article' | 'video' | 'podcast' | 'unknown';\n\tcontentQuality?: 'complete' | 'partial' | 'minimal';\n}\n\nexport interface RSSFeed {\n\ttitle: string;\n\tdescription: string;\n\tlink: string;\n\titems: RSSItem[];\n\tlastUpdated: Date;\n}\n\nexport class ExtensionRSSFeedService {\n\tprivate static instance: ExtensionRSSFeedService;\n\tprivate feedCache: Map<string, { data: RSSFeed; timestamp: number }> = new Map();\n\tprivate cacheTimeout = 5 * 60 * 1000; // 5 minutes\n\n\tprivate constructor() {}\n\n\tstatic getInstance(): ExtensionRSSFeedService {\n\t\tif (!ExtensionRSSFeedService.instance) {\n\t\t\tExtensionRSSFeedService.instance = new ExtensionRSSFeedService();\n\t\t}\n\t\treturn ExtensionRSSFeedService.instance;\n\t}\n\n\tasync fetchFeed(feedUrl: string): Promise<RSSFeed> {\n\t\t// Check cache first\n\t\tconst cached = this.feedCache.get(feedUrl);\n\t\tif (cached && Date.now() - cached.timestamp < this.cacheTimeout) {\n\t\t\treturn cached.data;\n\t\t}\n\n\t\ttry {\n\t\t\t// Direct fetch - no CORS proxy needed in extension!\n\t\t\tconst response = await fetch(feedUrl, {\n\t\t\t\theaders: {\n\t\t\t\t\t'User-Agent': 'YAKKL Smart Wallet Extension/' + VERSION,\n\t\t\t\t\tAccept: 'application/rss+xml, application/xml, text/xml'\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (!response.ok) {\n\t\t\t\tthrow new Error(`Failed to fetch RSS feed: ${response.statusText}`);\n\t\t\t}\n\n\t\t\tconst text = await response.text();\n\t\t\tconst feed = await this.parseRSSFeed(text, feedUrl);\n\n\t\t\t// Cache the feed\n\t\t\tthis.feedCache.set(feedUrl, { data: feed, timestamp: Date.now() });\n\n\t\t\t// Store in extension storage for offline access\n\t\t\tawait this.storeFeedInExtensionStorage(feedUrl, feed);\n\n\t\t\treturn feed;\n\t\t} catch (error) {\n\t\t\tconsole.error('Error fetching RSS feed:', error);\n\n\t\t\t// Try to load from extension storage if fetch fails\n\t\t\tconst storedFeed = await this.loadFeedFromExtensionStorage(feedUrl);\n\t\t\tif (storedFeed) {\n\t\t\t\treturn storedFeed;\n\t\t\t}\n\n\t\t\tthrow error;\n\t\t}\n\t}\n\n\tprivate async storeFeedInExtensionStorage(feedUrl: string, feed: RSSFeed) {\n\t\ttry {\n\t\t\tconst key = `rss_feed_${btoa(feedUrl)}`;\n\t\t\tawait browser_ext.storage.local.set({ [key]: feed });\n\t\t} catch (error) {\n\t\t\tconsole.error('Failed to store feed in extension storage:', error);\n\t\t}\n\t}\n\n\tprivate async loadFeedFromExtensionStorage(feedUrl: string): Promise<RSSFeed | null> {\n\t\ttry {\n\t\t\tconst key = `rss_feed_${btoa(feedUrl)}`;\n\t\t\tconst result = await browser_ext.storage.local.get(key);\n\t\t\treturn result[key] as RSSFeed | null;\n\t\t} catch (error) {\n\t\t\tconsole.error('Failed to load feed from extension storage:', error);\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tprivate async fetchArticleContent(\n\t\turl: string\n\t): Promise<{ content: string; quality: 'complete' | 'partial' | 'minimal' }> {\n\t\ttry {\n\t\t\tconst response = await fetch(url, {\n\t\t\t\theaders: {\n\t\t\t\t\t'User-Agent': 'YAKKL Smart Wallet Extension/' + VERSION,\n\t\t\t\t\tAccept: 'text/html,application/xhtml+xml'\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (!response.ok) {\n\t\t\t\tthrow new Error(`Failed to fetch article: ${response.statusText}`);\n\t\t\t}\n\n\t\t\tconst html = await response.text();\n\t\t\treturn this.extractArticleContent(html);\n\t\t} catch (error) {\n\t\t\tconsole.error('Error fetching article content:', error);\n\t\t\treturn { content: '', quality: 'minimal' };\n\t\t}\n\t}\n\n\tprivate extractArticleContent(html: string): {\n\t\tcontent: string;\n\t\tquality: 'complete' | 'partial' | 'minimal';\n\t} {\n\t\tconst parser = new DOMParser();\n\t\tconst doc = parser.parseFromString(html, 'text/html');\n\n\t\t// Check for media content first\n\t\tconst hasVideo = doc.querySelector('video, iframe[src*=\"youtube\"], iframe[src*=\"vimeo\"]');\n\t\tconst hasAudio = doc.querySelector('audio, [class*=\"podcast\"], [class*=\"audio\"]');\n\n\t\tif (hasVideo || hasAudio) {\n\t\t\treturn { content: '', quality: 'minimal' };\n\t\t}\n\n\t\t// Common article content selectors for different news sites\n\t\tconst contentSelectors = [\n\t\t\t// Cointelegraph\n\t\t\t'article .post__content',\n\t\t\t// CoinDesk\n\t\t\t'article .article-body',\n\t\t\t// General news sites\n\t\t\t'article .article-content',\n\t\t\t'article .content',\n\t\t\t'article .post-content',\n\t\t\t'article .entry-content',\n\t\t\t// Fallback to any article tag\n\t\t\t'article'\n\t\t];\n\n\t\t// Try each selector until we find content\n\t\tfor (const selector of contentSelectors) {\n\t\t\tconst element = doc.querySelector(selector);\n\t\t\tif (element) {\n\t\t\t\t// Remove unwanted elements\n\t\t\t\tconst unwantedElements = element.querySelectorAll(`\n          script, style, iframe,\n          .ad, .advertisement, .social-share, .related-posts,\n          .comments, .comment-section, .newsletter-signup,\n          .recommended, .trending, .popular-posts,\n          [class*=\"ad-\"], [class*=\"banner\"], [class*=\"promo\"],\n          [class*=\"sidebar\"], [class*=\"widget\"],\n          [class*=\"social\"], [class*=\"share\"],\n          [class*=\"related\"], [class*=\"recommended\"]\n        `);\n\t\t\t\tunwantedElements.forEach((el) => el.remove());\n\n\t\t\t\t// Get clean text content\n\t\t\t\tlet content = element.textContent || '';\n\n\t\t\t\t// Clean up the content\n\t\t\t\tcontent = content\n\t\t\t\t\t.replace(/\\s+/g, ' ') // Replace multiple spaces with single space\n\t\t\t\t\t.replace(/\\n+/g, '\\n') // Replace multiple newlines with single newline\n\t\t\t\t\t.replace(/\\[.*?\\]/g, '') // Remove text in square brackets (often ads or notes)\n\t\t\t\t\t.replace(/\\(.*?\\)/g, '') // Remove text in parentheses (often ads or notes)\n\t\t\t\t\t.trim();\n\n\t\t\t\t// Assess content quality\n\t\t\t\tconst wordCount = content.split(/\\s+/).length;\n\t\t\t\tconst quality = this.assessContentQuality(content, wordCount);\n\n\t\t\t\tif (quality !== 'minimal') {\n\t\t\t\t\treturn { content, quality };\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn { content: '', quality: 'minimal' };\n\t}\n\n\tprivate assessContentQuality(\n\t\tcontent: string,\n\t\twordCount: number\n\t): 'complete' | 'partial' | 'minimal' {\n\t\t// Check for common indicators of complete articles\n\t\tconst hasParagraphs = content.split('\\n').length > 3;\n\t\tconst hasQuotes = content.includes('\"') || content.includes('\"');\n\t\tconst hasReferences = content.includes('said') || content.includes('according to');\n\n\t\t// Quality thresholds\n\t\tif (wordCount > 300 && hasParagraphs && (hasQuotes || hasReferences)) {\n\t\t\treturn 'complete';\n\t\t} else if (wordCount > 100 && hasParagraphs) {\n\t\t\treturn 'partial';\n\t\t}\n\t\treturn 'minimal';\n\t}\n\n\tprivate detectContentType(\n\t\titem: Element,\n\t\tdescription: string\n\t): 'article' | 'video' | 'podcast' | 'unknown' {\n\t\tconst content = description.toLowerCase();\n\n\t\t// Check for media indicators in description\n\t\tif (content.includes('watch') || content.includes('video') || content.includes('youtube')) {\n\t\t\treturn 'video';\n\t\t}\n\t\tif (content.includes('listen') || content.includes('podcast') || content.includes('audio')) {\n\t\t\treturn 'podcast';\n\t\t}\n\n\t\t// Check for media enclosures\n\t\tconst hasVideoEnclosure = item.querySelector('enclosure[type^=\"video\"]');\n\t\tconst hasAudioEnclosure = item.querySelector('enclosure[type^=\"audio\"]');\n\n\t\tif (hasVideoEnclosure) return 'video';\n\t\tif (hasAudioEnclosure) return 'podcast';\n\n\t\t// Check for media:content using getElementsByTagName instead of querySelector\n\t\tconst mediaContent =\n\t\t\titem.getElementsByTagName('media:content')[0] ||\n\t\t\titem.getElementsByTagName('media\\\\:content')[0];\n\t\tif (mediaContent) {\n\t\t\tconst type = mediaContent.getAttribute('type')?.toLowerCase() || '';\n\t\t\tif (type.startsWith('video')) return 'video';\n\t\t\tif (type.startsWith('audio')) return 'podcast';\n\t\t}\n\n\t\treturn 'article';\n\t}\n\n\tasync parseRSSFeed(xmlText: string, feedUrl: string): Promise<RSSFeed> {\n\t\tconst parser = new DOMParser();\n\t\tconst doc = parser.parseFromString(xmlText, 'text/xml');\n\n\t\t// Check for parse errors\n\t\tconst parseError = doc.querySelector('parsererror');\n\t\tif (parseError) {\n\t\t\tthrow new Error('Invalid RSS feed format');\n\t\t}\n\n\t\t// Get channel information\n\t\tconst channel = doc.querySelector('channel');\n\t\tif (!channel) {\n\t\t\tthrow new Error('No channel element found in RSS feed');\n\t\t}\n\n\t\tconst title = channel.querySelector('title')?.textContent || '';\n\t\tconst description = channel.querySelector('description')?.textContent || '';\n\t\tconst link = channel.querySelector('link')?.textContent || '';\n\n\t\t// Parse items\n\t\tconst items: RSSItem[] = [];\n\t\tconst itemElements = doc.querySelectorAll('item');\n\n\t\t// Process items in parallel with a concurrency limit\n\t\tconst processItems = async () => {\n\t\t\tconst concurrencyLimit = 3;\n\t\t\tconst chunks = Array.from(itemElements).reduce((acc, item, i) => {\n\t\t\t\tconst chunkIndex = Math.floor(i / concurrencyLimit);\n\t\t\t\tif (!acc[chunkIndex]) acc[chunkIndex] = [];\n\t\t\t\tacc[chunkIndex].push(item);\n\t\t\t\treturn acc;\n\t\t\t}, [] as Element[][]);\n\n\t\t\tfor (const chunk of chunks) {\n\t\t\t\tawait Promise.all(\n\t\t\t\t\tchunk.map(async (item) => {\n\t\t\t\t\t\tconst itemTitle =\n\t\t\t\t\t\t\titem.querySelector('title')?.textContent?.replace(/<!\\[CDATA\\[|\\]\\]>/g, '') || '';\n\t\t\t\t\t\tconst itemLink = item.querySelector('link')?.textContent || '';\n\t\t\t\t\t\tconst itemDescription =\n\t\t\t\t\t\t\titem.querySelector('description')?.textContent?.replace(/<!\\[CDATA\\[|\\]\\]>/g, '') ||\n\t\t\t\t\t\t\t'';\n\n\t\t\t\t\t\t// Detect content type\n\t\t\t\t\t\tconst contentType = this.detectContentType(item, itemDescription);\n\n\t\t\t\t\t\t// Initialize content with description as fallback\n\t\t\t\t\t\tlet content = this.stripHTML(itemDescription) || itemTitle;\n\t\t\t\t\t\tlet contentQuality: 'complete' | 'partial' | 'minimal' = 'minimal';\n\n\t\t\t\t\t\tif (contentType === 'article') {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t// Try content:encoded first\n\t\t\t\t\t\t\t\tconst contentEncodedElement = item.getElementsByTagName('content:encoded')[0];\n\t\t\t\t\t\t\t\tconst encodedContent =\n\t\t\t\t\t\t\t\t\tcontentEncodedElement?.textContent?.replace(/<!\\[CDATA\\[|\\]\\]>/g, '') || '';\n\n\t\t\t\t\t\t\t\tif (encodedContent && encodedContent.length > 200) {\n\t\t\t\t\t\t\t\t\tcontent = encodedContent;\n\t\t\t\t\t\t\t\t\tcontentQuality = this.assessContentQuality(content, content.split(/\\s+/).length);\n\t\t\t\t\t\t\t\t} else if (itemLink) {\n\t\t\t\t\t\t\t\t\t// If no content:encoded or content is too short, try to fetch full article\n\t\t\t\t\t\t\t\t\tconst result = await this.fetchArticleContent(itemLink);\n\t\t\t\t\t\t\t\t\tif (result.content) {\n\t\t\t\t\t\t\t\t\t\tcontent = result.content;\n\t\t\t\t\t\t\t\t\t\tcontentQuality = result.quality;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\t\tconsole.error('Error processing article content:', error);\n\t\t\t\t\t\t\t\t// Keep the fallback content from description\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst pubDate = item.querySelector('pubDate')?.textContent || '';\n\t\t\t\t\t\tconst guid = item.querySelector('guid')?.textContent || '';\n\n\t\t\t\t\t\t// Extract categories\n\t\t\t\t\t\tconst categories: string[] = [];\n\t\t\t\t\t\titem.querySelectorAll('category').forEach((cat) => {\n\t\t\t\t\t\t\tif (cat.textContent) categories.push(cat.textContent);\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t// Extract media content (images)\n\t\t\t\t\t\tlet imageUrl = this.extractImageFromItem(item, itemDescription);\n\n\t\t\t\t\t\t// Add UTM parameters to the article URL\n\t\t\t\t\t\tconst trackedUrl = this.addUTMParameters(itemLink);\n\n\t\t\t\t\t\tconst rssItem: RSSItem = {\n\t\t\t\t\t\t\ttitle: itemTitle,\n\t\t\t\t\t\t\tsubtitle: categories.length > 0 ? categories[0] : 'Crypto News',\n\t\t\t\t\t\t\tdescription: this.stripHTML(itemDescription) || itemTitle,\n\t\t\t\t\t\t\tcontent: content,\n\t\t\t\t\t\t\timageUrl,\n\t\t\t\t\t\t\tsource: this.extractSourceFromURL(feedUrl),\n\t\t\t\t\t\t\tdate: this.formatDate(pubDate),\n\t\t\t\t\t\t\tpublishedAt: pubDate,\n\t\t\t\t\t\t\turl: trackedUrl,\n\t\t\t\t\t\t\tguid,\n\t\t\t\t\t\t\tcategories,\n\t\t\t\t\t\t\tauthor:\n\t\t\t\t\t\t\t\titem.querySelector('author')?.textContent?.replace(/<!\\[CDATA\\[|\\]\\]>/g, '') || '',\n\t\t\t\t\t\t\tcontentType,\n\t\t\t\t\t\t\tcontentQuality\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\titems.push(rssItem);\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\t\t};\n\n\t\tawait processItems();\n\n\t\treturn {\n\t\t\ttitle,\n\t\t\tdescription,\n\t\t\tlink,\n\t\t\titems,\n\t\t\tlastUpdated: new Date()\n\t\t};\n\t}\n\n\tprivate extractImageFromItem(item: Element, description: string): string {\n\t\t// Try media:content first\n\t\tconst mediaContent = item.querySelector('content[url]');\n\t\tif (mediaContent) {\n\t\t\treturn mediaContent.getAttribute('url') || '';\n\t\t}\n\n\t\t// Try media:thumbnail\n\t\tconst mediaThumbnail = item.querySelector('thumbnail[url]');\n\t\tif (mediaThumbnail) {\n\t\t\treturn mediaThumbnail.getAttribute('url') || '';\n\t\t}\n\n\t\t// Try enclosure\n\t\tconst enclosure = item.querySelector('enclosure[type^=\"image\"]');\n\t\tif (enclosure) {\n\t\t\treturn enclosure.getAttribute('url') || '';\n\t\t}\n\n\t\t// Extract from content or description if no dedicated image element\n\t\tconst imageFromHTML = this.extractImageFromHTML(description);\n\t\tif (imageFromHTML) {\n\t\t\treturn imageFromHTML;\n\t\t}\n\n\t\t// Default image if none found\n\t\treturn 'https://images.unsplash.com/photo-1639762681485-074b7f938ba0?w=200';\n\t}\n\n\tprivate extractImageFromHTML(html: string): string {\n\t\tconst imgMatch = html.match(/<img[^>]+src=[\"']([^\"']+)[\"']/i);\n\t\treturn imgMatch ? imgMatch[1] : '';\n\t}\n\n\tprivate stripHTML(html: string): string {\n\t\tconst div = document.createElement('div');\n\t\tdiv.innerHTML = html;\n\t\treturn div.textContent || div.innerText || '';\n\t}\n\n\tprivate extractSourceFromURL(url: string): string {\n\t\ttry {\n\t\t\tconst hostname = new URL(url).hostname;\n\t\t\treturn hostname.replace('www.', '').split('.')[0];\n\t\t} catch {\n\t\t\treturn 'RSS Feed';\n\t\t}\n\t}\n\n\tprivate addUTMParameters(url: string): string {\n\t\ttry {\n\t\t\tconst urlObj = new URL(url);\n\t\t\tconst hasParams = urlObj.search.length > 0;\n\n\t\t\t// Add UTM parameters\n\t\t\turlObj.searchParams.set('utm_source', 'yakkl.com');\n\t\t\turlObj.searchParams.set('utm_medium', 'wallet');\n\t\t\turlObj.searchParams.set('utm_campaign', 'news_feed');\n\n\t\t\t// Add timestamp for time-based analytics\n\t\t\turlObj.searchParams.set('utm_timestamp', Date.now().toString());\n\n\t\t\treturn urlObj.toString();\n\t\t} catch {\n\t\t\treturn url;\n\t\t}\n\t}\n\n\tprivate formatDate(dateString: string): string {\n\t\ttry {\n\t\t\tconst date = new Date(dateString);\n\t\t\tconst now = new Date();\n\t\t\tconst diffInHours = Math.floor((now.getTime() - date.getTime()) / (1000 * 60 * 60));\n\n\t\t\tif (diffInHours === 0) {\n\t\t\t\tconst diffInMinutes = Math.floor((now.getTime() - date.getTime()) / (1000 * 60));\n\t\t\t\treturn diffInMinutes === 0 ? 'Just now' : `${diffInMinutes} minutes ago`;\n\t\t\t} else if (diffInHours < 24) {\n\t\t\t\treturn `${diffInHours} hours ago`;\n\t\t\t} else if (diffInHours < 48) {\n\t\t\t\treturn 'Yesterday';\n\t\t\t} else {\n\t\t\t\tconst diffInDays = Math.floor(diffInHours / 24);\n\t\t\t\treturn `${diffInDays} days ago`;\n\t\t\t}\n\t\t} catch {\n\t\t\treturn dateString;\n\t\t}\n\t}\n}\n","<script lang=\"ts\">\n\tinterface Props {\n\t\tnewsItem: {\n\t\t\ttitle: string;\n\t\t\tsubtitle: string;\n\t\t\tdescription: string;\n\t\t\tcontent?: string;\n\t\t\timageUrl: string;\n\t\t\tsource: string;\n\t\t\tdate: string;\n\t\t\turl: string;\n\t\t\tguid?: string;\n\t\t\tcategories?: string[];\n\t\t\tauthor?: string;\n\t\t\tpublishedAt?: string;\n\t\t};\n\t\tclassName?: string;\n\t\tlocked?: boolean;\n\t}\n\n\tlet { newsItem, className = '', locked = true }: Props = $props();\n\n\t// Check if the news item has all required properties\n\tconst isValidNewsItem =\n\t\tnewsItem &&\n\t\tnewsItem.title &&\n\t\tnewsItem.description &&\n\t\tnewsItem.imageUrl &&\n\t\tnewsItem.source &&\n\t\tnewsItem.date &&\n\t\tnewsItem.url;\n</script>\n\n<div class={className}>\n\t{#if isValidNewsItem}\n\t\t<a\n\t\t\thref={newsItem.url}\n\t\t\ttarget=\"_blank\"\n\t\t\trel=\"noopener noreferrer\"\n\t\t\tclass=\"block hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors\"\n\t\t>\n\t\t\t<div class=\"flex gap-4 p-3 item\">\n\t\t\t\t<div class=\"flex-shrink-0\">\n\t\t\t\t\t<img\n\t\t\t\t\t\tsrc={newsItem.imageUrl}\n\t\t\t\t\t\talt={newsItem.title}\n\t\t\t\t\t\tclass=\"w-16 h-16 object-cover rounded-md\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"flex-1 min-w-0 pr-0\">\n\t\t\t\t\t<h3 class=\"text-sm font-semibold text-gray-900 dark:text-gray-100 truncate\">\n\t\t\t\t\t\t{newsItem.title}\n\t\t\t\t\t</h3>\n\t\t\t\t\t<div class=\"flex items-center gap-1 text-[10px] text-gray-500 dark:text-gray-400 mt-1\">\n\t\t\t\t\t\t<span>{newsItem.source}</span>\n\t\t\t\t\t\t<span>•</span>\n\t\t\t\t\t\t<span>{newsItem.date}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<p class=\"text-xs text-gray-600 dark:text-gray-300 mt-1 line-clamp-2\">\n\t\t\t\t\t\t{newsItem.description}\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</a>\n\t{:else}\n\t\t<div class=\"flex items-center justify-center p-4 text-gray-500 dark:text-gray-400\">\n\t\t\t<p class=\"text-sm\">Unable to display news content</p>\n\t\t</div>\n\t{/if}\n</div>\n","<!-- File: src/lib/components/icons/BookmarkIcon.svelte -->\n<script lang=\"ts\">\n\tinterface Props {\n\t\tclassName?: string;\n\t}\n\n\tlet { className = 'w-6 h-6 fill-none stroke-current text-gray-400' }: Props = $props();\n</script>\n\n<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" class={className}>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0 1 11.186 0Z\"\n\t/>\n</svg>\n","<!-- File: src/lib/components/icons/PrinterIcon.svelte -->\n<script lang=\"ts\">\n\tinterface Props {\n\t\tclassName?: string;\n\t}\n\n\tlet { className = 'w-6 h-6' }: Props = $props();\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width=\"1.5\"\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z\"\n\t/>\n</svg>\n","<!-- File: src/lib/components/icons/TrashIcon.svelte -->\n<script lang=\"ts\">\n\tinterface Props {\n\t\tclassName?: string;\n\t}\n\n\tlet { className = 'w-6 h-6' }: Props = $props();\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width=\"1.5\"\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0\"\n\t/>\n</svg>\n","<!-- ArticleControls.svelte -->\n<script lang=\"ts\">\n\timport BookmarkIcon from './icons/BookmarkIcon.svelte';\n\timport PrinterIcon from './icons/PrinterIcon.svelte';\n\timport TrashIcon from './icons/TrashIcon.svelte';\n\timport Confirmation from './Confirmation.svelte';\n\timport { fade } from 'svelte/transition';\n\timport type { RSSItem } from '$lib/managers/ExtensionRSSFeedService';\n\timport Tooltip from './Tooltip.svelte';\n\timport { yakklBookmarkedArticlesStore, setYakklBookmarkedArticles } from '$lib/common/stores';\n\timport { derived } from 'svelte/store';\n\timport { log } from '$lib/managers/Logger';\n\n\tlet {\n\t\tarticle,\n\t\tbookmarkEnabled = true,\n\t\tprintEnabled = true,\n\t\tdeleteEnabled = false,\n\t\tonDelete\n\t} = $props<{\n\t\tarticle: RSSItem;\n\t\tbookmarkEnabled?: boolean;\n\t\tprintEnabled?: boolean;\n\t\tdeleteEnabled?: boolean;\n\t\tonDelete?: (article: RSSItem) => Promise<void>;\n\t}>();\n\n\t$inspect(article).with(console.log);\n\n\tlet showDeleteConfirmation = $state(false);\n\n\t// Create a derived store for bookmark state\n\tconst isBookmarked = derived(yakklBookmarkedArticlesStore, ($store) =>\n\t\t$store.some((a) => a.title === article.title && a.source === article.source)\n\t);\n\n\t// Function to sanitize content\n\tfunction sanitizeContent(content: string): string {\n\t\tconst parser = new DOMParser();\n\t\tconst doc = parser.parseFromString(content, 'text/html');\n\n\t\t// Remove potentially problematic elements\n\t\tconst elementsToRemove = [\n\t\t\t'script',\n\t\t\t'iframe',\n\t\t\t'style',\n\t\t\t'link',\n\t\t\t'meta',\n\t\t\t'object',\n\t\t\t'embed',\n\t\t\t'applet',\n\t\t\t'noscript',\n\t\t\t'form',\n\t\t\t'input',\n\t\t\t'button',\n\t\t\t'select',\n\t\t\t'textarea',\n\t\t\t'[onclick]',\n\t\t\t'[onload]',\n\t\t\t'[onerror]',\n\t\t\t'[src*=\"platform.twitter.com\"]',\n\t\t\t'[src*=\"facebook.com\"]',\n\t\t\t'[src*=\"instagram.com\"]',\n\t\t\t'[src*=\"youtube.com\"]',\n\t\t\t'[src*=\"vimeo.com\"]',\n\t\t\t'[src*=\"player\"]',\n\t\t\t'[src*=\"widget\"]',\n\t\t\t'[src*=\"embed\"]',\n\t\t\t'[src*=\"script\"]',\n\t\t\t'[src*=\"tracker\"]',\n\t\t\t'[src*=\"analytics\"]',\n\t\t\t'[src*=\"pixel\"]',\n\t\t\t'[src*=\"beacon\"]',\n\t\t\t'[src*=\"cookie\"]',\n\t\t\t'[src*=\"ad\"]',\n\t\t\t'[src*=\"banner\"]',\n\t\t\t'[src*=\"promo\"]',\n\t\t\t'[src*=\"sponsor\"]',\n\t\t\t'[src*=\"affiliate\"]',\n\t\t\t'[src*=\"tracking\"]',\n\t\t\t'[src*=\"pixel\"]',\n\t\t\t'[src*=\"beacon\"]',\n\t\t\t'[src*=\"cookie\"]',\n\t\t\t'[src*=\"analytics\"]',\n\t\t\t'[src*=\"tracker\"]',\n\t\t\t'[src*=\"monitor\"]',\n\t\t\t'[src*=\"stat\"]',\n\t\t\t'[src*=\"count\"]',\n\t\t\t'[src*=\"counter\"]',\n\t\t\t'[src*=\"measure\"]',\n\t\t\t'[src*=\"metric\"]',\n\t\t\t'[src*=\"track\"]',\n\t\t\t'[src*=\"trace\"]',\n\t\t\t'[src*=\"log\"]',\n\t\t\t'[src*=\"debug\"]',\n\t\t\t'[src*=\"test\"]',\n\t\t\t'[src*=\"dev\"]',\n\t\t\t'[src*=\"staging\"]',\n\t\t\t'[src*=\"qa\"]',\n\t\t\t'[src*=\"beta\"]',\n\t\t\t'[src*=\"alpha\"]',\n\t\t\t'[src*=\"demo\"]',\n\t\t\t'[src*=\"example\"]',\n\t\t\t'[src*=\"sample\"]',\n\t\t\t'[src*=\"mock\"]',\n\t\t\t'[src*=\"fake\"]',\n\t\t\t'[src*=\"dummy\"]',\n\t\t\t'[src*=\"placeholder\"]',\n\t\t\t'[src*=\"temp\"]',\n\t\t\t'[src*=\"temporary\"]',\n\t\t\t'[src*=\"test\"]',\n\t\t\t'[src*=\"dev\"]',\n\t\t\t'[src*=\"development\"]',\n\t\t\t'[src*=\"staging\"]',\n\t\t\t'[src*=\"qa\"]',\n\t\t\t'[src*=\"beta\"]',\n\t\t\t'[src*=\"alpha\"]',\n\t\t\t'[src*=\"demo\"]',\n\t\t\t'[src*=\"example\"]',\n\t\t\t'[src*=\"sample\"]',\n\t\t\t'[src*=\"mock\"]',\n\t\t\t'[src*=\"fake\"]',\n\t\t\t'[src*=\"dummy\"]',\n\t\t\t'[src*=\"placeholder\"]',\n\t\t\t'[src*=\"temp\"]',\n\t\t\t'[src*=\"temporary\"]'\n\t\t];\n\n\t\telementsToRemove.forEach((selector) => {\n\t\t\tdoc.querySelectorAll(selector).forEach((el) => el.remove());\n\t\t});\n\n\t\t// Remove inline styles and event handlers\n\t\tdoc.querySelectorAll('*').forEach((el) => {\n\t\t\tel.removeAttribute('style');\n\t\t\tel.removeAttribute('onclick');\n\t\t\tel.removeAttribute('onload');\n\t\t\tel.removeAttribute('onerror');\n\t\t\tel.removeAttribute('onmouseover');\n\t\t\tel.removeAttribute('onmouseout');\n\t\t\tel.removeAttribute('onmouseenter');\n\t\t\tel.removeAttribute('onmouseleave');\n\t\t\tel.removeAttribute('onmousedown');\n\t\t\tel.removeAttribute('onmouseup');\n\t\t\tel.removeAttribute('onmousemove');\n\t\t\tel.removeAttribute('onkeydown');\n\t\t\tel.removeAttribute('onkeyup');\n\t\t\tel.removeAttribute('onkeypress');\n\t\t\tel.removeAttribute('onfocus');\n\t\t\tel.removeAttribute('onblur');\n\t\t\tel.removeAttribute('onchange');\n\t\t\tel.removeAttribute('onsubmit');\n\t\t\tel.removeAttribute('onreset');\n\t\t\tel.removeAttribute('onselect');\n\t\t\tel.removeAttribute('onabort');\n\t\t\tel.removeAttribute('oncanplay');\n\t\t\tel.removeAttribute('oncanplaythrough');\n\t\t\tel.removeAttribute('ondurationchange');\n\t\t\tel.removeAttribute('onemptied');\n\t\t\tel.removeAttribute('onended');\n\t\t\tel.removeAttribute('onerror');\n\t\t\tel.removeAttribute('onloadeddata');\n\t\t\tel.removeAttribute('onloadedmetadata');\n\t\t\tel.removeAttribute('onloadstart');\n\t\t\tel.removeAttribute('onpause');\n\t\t\tel.removeAttribute('onplay');\n\t\t\tel.removeAttribute('onplaying');\n\t\t\tel.removeAttribute('onprogress');\n\t\t\tel.removeAttribute('onratechange');\n\t\t\tel.removeAttribute('onreadystatechange');\n\t\t\tel.removeAttribute('onseeked');\n\t\t\tel.removeAttribute('onseeking');\n\t\t\tel.removeAttribute('onstalled');\n\t\t\tel.removeAttribute('onsuspend');\n\t\t\tel.removeAttribute('ontimeupdate');\n\t\t\tel.removeAttribute('onvolumechange');\n\t\t\tel.removeAttribute('onwaiting');\n\t\t});\n\n\t\t// Convert relative URLs to absolute\n\t\tdoc.querySelectorAll('a[href]').forEach((link) => {\n\t\t\ttry {\n\t\t\t\tconst href = link.getAttribute('href');\n\t\t\t\tif (href && !href.startsWith('http')) {\n\t\t\t\t\tconst absoluteUrl = new URL(href, article.url).toString();\n\t\t\t\t\tlink.setAttribute('href', absoluteUrl);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error('Error converting URL:', e);\n\t\t\t}\n\t\t});\n\n\t\t// Get the sanitized content\n\t\tlet sanitizedContent = doc.body.innerHTML;\n\n\t\t// Clean up any remaining script-like content\n\t\tsanitizedContent = sanitizedContent\n\t\t\t.replace(/<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi, '')\n\t\t\t.replace(/javascript:/gi, '')\n\t\t\t.replace(/data:/gi, '')\n\t\t\t.replace(/vbscript:/gi, '')\n\t\t\t.replace(/on\\w+=\"[^\"]*\"/g, '')\n\t\t\t.replace(/on\\w+='[^']*'/g, '')\n\t\t\t.replace(/style=\"[^\"]*\"/g, '')\n\t\t\t.replace(/style='[^']*'/g, '');\n\n\t\treturn sanitizedContent;\n\t}\n\n\t// Function to handle bookmarking\n\tasync function handleBookmark() {\n\t\tif (!bookmarkEnabled) return;\n\n\t\tconst bookmarkedArticles = $yakklBookmarkedArticlesStore;\n\n\t\tif ($isBookmarked) {\n\t\t\t// Remove from bookmarks\n\t\t\tconst updatedArticles = bookmarkedArticles.filter(\n\t\t\t\t(a) => !(a.title === article.title && a.source === article.source)\n\t\t\t);\n\t\t\tawait setYakklBookmarkedArticles(updatedArticles);\n\t\t} else {\n\t\t\t// Check for duplicates before adding\n\t\t\tconst isDuplicate = bookmarkedArticles.some(\n\t\t\t\t(a) => a.title === article.title && a.source === article.source\n\t\t\t);\n\n\t\t\tif (!isDuplicate) {\n\t\t\t\t// Add to bookmarks only if not a duplicate\n\t\t\t\tconst updatedArticles = [...bookmarkedArticles, article];\n\t\t\t\tawait setYakklBookmarkedArticles(updatedArticles);\n\t\t\t}\n\t\t}\n\t}\n\n\t// Function to handle deletion\n\tasync function handleDelete() {\n\t\tif (!deleteEnabled) return;\n\n\t\tif (onDelete) {\n\t\t\tawait onDelete(article);\n\t\t} else {\n\t\t\tawait handleBookmark(); // Fallback to bookmark logic if no onDelete provided\n\t\t}\n\n\t\tshowDeleteConfirmation = false;\n\t}\n\n\t// Prints out the full article in a new window\n\t// Example usage:\n\t// <button onclick=\"printFullArticle('https://news.example.com/article/123')\">\n\t//   🖨️ Print Full Article\n\t// </button>\n\tfunction printFullArticle(articleUrl: string) {\n\t\tconst printWindow = window.open(articleUrl, '_blank');\n\n\t\tprintWindow.onload = () => {\n\t\t\tprintWindow.focus();\n\t\t\tprintWindow.print();\n\t\t};\n\t}\n\n\t// Function to handle printing\n\tfunction handlePrint(articleUrl: string = '') {\n\t\t// if (articleUrl) {\n\t\t//   console.log('Printing article from external source', articleUrl);\n\t\t//   printFullArticle(articleUrl); // Optional external print\n\t\t//   return;\n\t\t// }\n\n\t\tconsole.log('Printing article from internal source', articleUrl);\n\t\tconst sanitizedContent = sanitizeContent(\n\t\t\tarticle.content || article.description || article.title\n\t\t);\n\t\tconst html = generatePrintHtml(article, sanitizedContent);\n\n\t\tconst printWindow = window.open('', '_blank');\n\t\tif (!printWindow) {\n\t\t\tconsole.error('Failed to open print window');\n\t\t\treturn;\n\t\t}\n\n\t\t// Wait until the new window DOM is available\n\t\tprintWindow.document.open();\n\t\tprintWindow.document.write(html);\n\t\tprintWindow.document.close();\n\n\t\t// Ensure content loads before printing\n\t\tprintWindow.onload = () => {\n\t\t\tprintWindow.focus();\n\t\t\tprintWindow.print();\n\t\t};\n\n\t\t// const doc = printWindow.document;\n\t\t// doc.open();\n\t\t// doc.write(`\n\t\t//   <!DOCTYPE html>\n\t\t//   <html>\n\t\t//     <head>\n\t\t//       <title>${article.title}</title>\n\t\t//       <meta charset=\"utf-8\">\n\t\t//       <link rel=\"shortcut icon\" href=\"https://yakkl.com/images/favicon.png\" />\n\t\t//       <style>\n\t\t//         body {\n\t\t//           font-family: Arial, sans-serif;\n\t\t//           padding: 20px;\n\t\t//           max-width: 800px;\n\t\t//           margin: 0 auto;\n\t\t//           color: #333;\n\t\t//         }\n\t\t//         .header {\n\t\t//           margin-bottom: 20px;\n\t\t//           border-bottom: 1px solid #eee;\n\t\t//           padding-bottom: 20px;\n\t\t//         }\n\t\t//         .metadata {\n\t\t//           color: #666;\n\t\t//           font-size: 0.9em;\n\t\t//           margin: 10px 0;\n\t\t//         }\n\t\t//         .metadata span {\n\t\t//           margin-right: 15px;\n\t\t//         }\n\t\t//         .content {\n\t\t//           line-height: 1.6;\n\t\t//           font-size: 1.1em;\n\t\t//           white-space: pre-wrap;\n\t\t//           margin: 20px 0;\n\t\t//         }\n\t\t//         .content img {\n\t\t//           max-width: 100%;\n\t\t//           height: auto;\n\t\t//           margin: 10px 0;\n\t\t//         }\n\t\t//         .content a {\n\t\t//           color: #0066cc;\n\t\t//           text-decoration: none;\n\t\t//         }\n\t\t//         .content a:hover {\n\t\t//           text-decoration: underline;\n\t\t//         }\n\t\t//         .tags {\n\t\t//           margin-top: 20px;\n\t\t//           padding-top: 20px;\n\t\t//           border-top: 1px solid #eee;\n\t\t//         }\n\t\t//         .tag {\n\t\t//           display: inline-block;\n\t\t//           background: #f0f0f0;\n\t\t//           padding: 3px 8px;\n\t\t//           border-radius: 3px;\n\t\t//           margin-right: 5px;\n\t\t//           font-size: 0.9em;\n\t\t//         }\n\t\t//         .source-link {\n\t\t//           margin-top: 20px;\n\t\t//           font-size: 0.9em;\n\t\t//           color: #666;\n\t\t//           border-top: 1px solid #eee;\n\t\t//           padding-top: 20px;\n\t\t//         }\n\t\t//         @media print {\n\t\t//           body { padding: 0; }\n\t\t//           .header { border-bottom: 1px solid #000; }\n\t\t//           .tags { border-top: 1px solid #000; }\n\t\t//           .source-link { border-top: 1px solid #000; }\n\t\t//         }\n\t\t//       </style>\n\t\t//     </head>\n\t\t//     <body>\n\t\t//       <div class=\"header\">\n\t\t//         <h1>${article.title}</h1>\n\t\t//         <div class=\"metadata\">\n\t\t//           <span><strong>Source:</strong> ${article.source}</span>\n\t\t//           ${article.author ? `<span><strong>Author:</strong> ${article.author}</span>` : ''}\n\t\t//           <span><strong>Published:</strong> ${article.publishedAt || article.date}</span>\n\t\t//         </div>\n\t\t//       </div>\n\t\t//       <div class=\"content\">\n\t\t//         ${sanitizedContent}\n\t\t//       </div>\n\t\t//       ${article.categories && article.categories.length > 0 ? `\n\t\t//         <div class=\"tags\">\n\t\t//           Tags: ${article.categories.map((tag: string) => `<span class=\"tag\">${tag}</span>`).join('')}\n\t\t//         </div>\n\t\t//       ` : ''}\n\t\t//       <div class=\"source-link\">\n\t\t//         <p>Source: <a href=\"${article.url}\" target=\"_blank\">${article.url}</a></p>\n\t\t//         <p>Printed on: ${new Date().toLocaleString()}</p>\n\t\t//         <p>Printed by: <a href=\"https://yakkl.com/?utm_source=yakkl-wallet&utm_medium=print&utm_campaign=${encodeURIComponent(article.source)}&utm_content=${encodeURIComponent(article.title)}\" target=\"_blank\">YAKKL Smart Wallet</a></p>\n\t\t//       </div>\n\t\t//     </body>\n\t\t//   </html>\n\t\t// `);\n\t\t// doc.close();\n\n\t\t// Ensure the content is loaded before printing\n\t\t// setTimeout(() => {\n\t\t//   printWindow.focus();\n\t\t//   printWindow.print();\n\t\t// }, 500);\n\t}\n\n\t// Not for printing from extension context. Use in normal browser context window.\n\tfunction printArticle(article: RSSItem, sanitizedContent: string) {\n\t\tconst iframe = document.createElement('iframe');\n\t\tiframe.style.position = 'fixed';\n\t\tiframe.style.right = '0';\n\t\tiframe.style.bottom = '0';\n\t\tiframe.style.width = '0';\n\t\tiframe.style.height = '0';\n\t\tiframe.style.border = 'none';\n\n\t\t// Set the HTML via srcdoc\n\t\tiframe.srcdoc = generatePrintHtml(article, sanitizedContent);\n\n\t\tdocument.body.appendChild(iframe);\n\n\t\tiframe.onload = () => {\n\t\t\tiframe.contentWindow.focus();\n\t\t\tiframe.contentWindow.print();\n\t\t\t// Optionally remove the iframe afterward\n\t\t\tsetTimeout(() => iframe.remove(), 1000);\n\t\t};\n\t}\n\n\tfunction generatePrintHtml(article: RSSItem, sanitizedContent: string) {\n\t\treturn `\n    <!DOCTYPE html>\n      <html>\n        <head>\n          <title>${article.title}</title>\n          <meta charset=\"utf-8\">\n          <link rel=\"shortcut icon\" href=\"https://yakkl.com/images/favicon.png\" />\n          <style>\n            body {\n              font-family: Arial, sans-serif;\n              padding: 20px;\n              max-width: 800px;\n              margin: 0 auto;\n              color: #333;\n            }\n            .header {\n              margin-bottom: 20px;\n              border-bottom: 1px solid #eee;\n              padding-bottom: 20px;\n            }\n            .metadata {\n              color: #666;\n              font-size: 0.9em;\n              margin: 10px 0;\n            }\n            .metadata span {\n              margin-right: 15px;\n            }\n            .content {\n              line-height: 1.6;\n              font-size: 1.1em;\n              white-space: pre-wrap;\n              margin: 20px 0;\n            }\n            .content img {\n              max-width: 100%;\n              height: auto;\n              margin: 10px 0;\n            }\n            .content a {\n              color: #0066cc;\n              text-decoration: none;\n            }\n            .content a:hover {\n              text-decoration: underline;\n            }\n            .tags {\n              margin-top: 20px;\n              padding-top: 20px;\n              border-top: 1px solid #eee;\n            }\n            .tag {\n              display: inline-block;\n              background: #f0f0f0;\n              padding: 3px 8px;\n              border-radius: 3px;\n              margin-right: 5px;\n              font-size: 0.9em;\n            }\n            .source-link {\n              margin-top: 20px;\n              font-size: 0.9em;\n              color: #666;\n              border-top: 1px solid #eee;\n              padding-top: 20px;\n            }\n            @media print {\n              body { padding: 0; }\n              .header { border-bottom: 1px solid #000; }\n              .tags { border-top: 1px solid #000; }\n              .source-link { border-top: 1px solid #000; }\n            }\n          </style>\n        </head>\n        <body>\n          <div class=\"header\">\n            <h1>${article.title}</h1>\n            <div class=\"metadata\">\n              <span><strong>Source:</strong> ${article.source}</span>\n              ${article.author ? `<span><strong>Author:</strong> ${article.author}</span>` : ''}\n              <span><strong>Published:</strong> ${article.publishedAt || article.date}</span>\n            </div>\n          </div>\n          <div class=\"content\">\n            ${sanitizedContent}\n          </div>\n          ${\n\t\t\t\t\t\tarticle.categories && article.categories.length > 0\n\t\t\t\t\t\t\t? `\n            <div class=\"tags\">\n              Tags: ${article.categories.map((tag: string) => `<span class=\"tag\">${tag}</span>`).join('')}\n            </div>\n          `\n\t\t\t\t\t\t\t: ''\n\t\t\t\t\t}\n          <div class=\"source-link\">\n            <p>Source: <a href=\"${article.url}\" target=\"_blank\">${article.url}</a></p>\n            <p>Printed on: ${new Date().toLocaleString()}</p>\n            <p>Printed by: <a href=\"https://yakkl.com/?utm_source=yakkl-wallet&utm_medium=print&utm_campaign=${encodeURIComponent(article.source)}&utm_content=${encodeURIComponent(article.title)}\" target=\"_blank\">YAKKL Smart Wallet</a></p>\n          </div>\n        </body>\n      </html>\n    `;\n\t}\n</script>\n\n<div\n\tclass=\"absolute top-1 right-1 flex items-center space-x-2 bg-white/90 dark:bg-zinc-800/90 backdrop-blur-sm rounded-full p-1 shadow-lg z-10 transition-all duration-200 opacity-0 group-hover:opacity-100\"\n>\n\t<Tooltip content={$isBookmarked ? 'Unbookmark article' : 'Bookmark article'}>\n\t\t<button\n\t\t\tclass=\"text-gray-400 hover:text-gray-500 focus:outline-none relative {bookmarkEnabled\n\t\t\t\t? ''\n\t\t\t\t: 'opacity-50 cursor-not-allowed'}\"\n\t\t\tdisabled={!bookmarkEnabled}\n\t\t\tonclick={handleBookmark}\n\t\t>\n\t\t\t<BookmarkIcon\n\t\t\t\tclassName=\"w-5 h-5 {$isBookmarked\n\t\t\t\t\t? 'fill-yellow-400'\n\t\t\t\t\t: 'fill-none'} stroke-current text-gray-400\"\n\t\t\t/>\n\t\t</button>\n\t</Tooltip>\n\t<Tooltip content=\"Print article\">\n\t\t<button\n\t\t\tclass=\"text-gray-400 hover:text-gray-500 focus:outline-none relative {printEnabled\n\t\t\t\t? ''\n\t\t\t\t: 'opacity-50 cursor-not-allowed'}\"\n\t\t\tdisabled={!printEnabled}\n\t\t\tonclick={() => handlePrint(article.url)}\n\t\t>\n\t\t\t<PrinterIcon className=\"w-5 h-5 text-gray-400\" />\n\t\t</button>\n\t</Tooltip>\n\n\t<Tooltip content=\"Delete\">\n\t\t<button\n\t\t\tclass=\"text-gray-400 hover:text-gray-500 focus:outline-none relative {deleteEnabled\n\t\t\t\t? ''\n\t\t\t\t: 'opacity-50 cursor-not-allowed'}\"\n\t\t\tdisabled={!deleteEnabled}\n\t\t\tonclick={() => (showDeleteConfirmation = true)}\n\t\t>\n\t\t\t<TrashIcon className=\"w-5 h-5 text-gray-400\" />\n\t\t</button>\n\t</Tooltip>\n</div>\n\n{#if showDeleteConfirmation}\n\t<Confirmation\n\t\tshow={showDeleteConfirmation}\n\t\ttitle=\"Delete Article\"\n\t\tmessage=\"Are you sure you want to delete this article?\"\n\t\tonConfirm={handleDelete}\n\t\tonReject={() => {\n\t\t\tshowDeleteConfirmation = false;\n\t\t}}\n\t/>\n{/if}\n","<!-- src/lib/components/NewsFeed.svelte -->\n<script lang=\"ts\">\n\timport ChevronDownIcon from '$lib/components/icons/ChevronDownIcon.svelte';\n\timport ChevronUpIcon from '$lib/components/icons/ChevronUpIcon.svelte';\n\timport NewsFeedLineView from './NewsFeedLineView.svelte';\n\timport ArticleControls from './ArticleControls.svelte';\n\n\tinterface NewsItem {\n\t\ttitle: string;\n\t\tsubtitle: string;\n\t\tdescription: string;\n\t\tcontent?: string;\n\t\timageUrl: string;\n\t\tsource: string;\n\t\tdate: string;\n\t\turl: string;\n\t\tguid?: string;\n\t\tcategories?: string[];\n\t\tauthor?: string;\n\t\tpublishedAt?: string;\n\t}\n\n\tinterface Props {\n\t\tnewsItems?: NewsItem[];\n\t\tmaxVisibleItems?: number;\n\t\tclassName?: string;\n\t\tlocked?: boolean;\n\t\tmaxItemsPerFeed?: number;\n\t}\n\n\tlet {\n\t\tnewsItems = [],\n\t\tmaxVisibleItems = 3,\n\t\tclassName = '',\n\t\tlocked = true,\n\t\tmaxItemsPerFeed = locked ? 3 : 0\n\t}: Props = $props();\n\n\t// Apply maxItemsPerFeed limit if locked\n\tconst effectiveMaxItems = locked ? (maxItemsPerFeed === 0 ? 3 : maxItemsPerFeed) : 0;\n\tconst limitedItems = effectiveMaxItems > 0 ? newsItems.slice(0, effectiveMaxItems) : newsItems;\n\tlet visibleItems = $state(limitedItems.slice(0, maxVisibleItems));\n\tlet remainingItems = $state(limitedItems.slice(maxVisibleItems));\n\tlet isRemainingSectionCollapsed = $state(true);\n\n\t// Update when newsItems prop changes\n\t$effect(() => {\n\t\tconst effectiveMaxItems = locked ? (maxItemsPerFeed === 0 ? 3 : maxItemsPerFeed) : 0;\n\t\tconst limitedItems = effectiveMaxItems > 0 ? newsItems.slice(0, effectiveMaxItems) : newsItems;\n\t\tvisibleItems = limitedItems.slice(0, maxVisibleItems);\n\t\tremainingItems = limitedItems.slice(maxVisibleItems);\n\t});\n\n\t// Check if we have any valid news items\n\tconst hasValidItems = limitedItems.length > 0;\n</script>\n\n<div class={className}>\n\t{#if hasValidItems}\n\t\t<!-- Visible Items Section -->\n\t\t<div class=\"space-y-0\">\n\t\t\t{#each visibleItems as item, index}\n\t\t\t\t<div class=\"relative group\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"group-hover:bg-gray-50 dark:group-hover:bg-zinc-800/50 transition-colors duration-200\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<NewsFeedLineView newsItem={item} {locked} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<ArticleControls article={item} />\n\t\t\t\t\t{#if index < visibleItems.length - 1}\n\t\t\t\t\t\t<div class=\"flex justify-center\">\n\t\t\t\t\t\t\t<div class=\"w-[80%] h-[1px] bg-gray-200 dark:bg-gray-700\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t{/each}\n\t\t</div>\n\n\t\t<!-- Remaining Items Section -->\n\t\t{#if remainingItems.length > 0}\n\t\t\t<div class=\"space-y-0\">\n\t\t\t\t<button\n\t\t\t\t\tclass=\"flex items-center justify-between w-full py-2 cursor-pointer\"\n\t\t\t\t\tonclick={() => (isRemainingSectionCollapsed = !isRemainingSectionCollapsed)}\n\t\t\t\t>\n\t\t\t\t\t<h3 class=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n\t\t\t\t\t\t{remainingItems.length} More Stories\n\t\t\t\t\t</h3>\n\t\t\t\t\t<div class=\"text-gray-500 dark:text-gray-400\">\n\t\t\t\t\t\t{#if isRemainingSectionCollapsed}\n\t\t\t\t\t\t\t<ChevronDownIcon className=\"w-4 h-4\" />\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t<ChevronUpIcon className=\"w-4 h-4\" />\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t</button>\n\n\t\t\t\t{#if !isRemainingSectionCollapsed}\n\t\t\t\t\t<div class=\"space-y-0\">\n\t\t\t\t\t\t{#each remainingItems as item, index}\n\t\t\t\t\t\t\t<div class=\"relative group\">\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclass=\"group-hover:bg-gray-50 dark:group-hover:bg-zinc-800/50 transition-colors duration-200\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<NewsFeedLineView newsItem={item} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<ArticleControls article={item} />\n\t\t\t\t\t\t\t\t{#if index < remainingItems.length - 1}\n\t\t\t\t\t\t\t\t\t<div class=\"flex justify-center\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"w-[80%] h-[1px] bg-gray-200 dark:bg-gray-700\"></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/each}\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t{/if}\n\t{:else}\n\t\t<div class=\"flex items-center justify-center p-4 text-gray-500 dark:text-gray-400\">\n\t\t\t<p class=\"text-sm\">No news items available at this time</p>\n\t\t</div>\n\t{/if}\n</div>\n","<!-- File: src/lib/components/icons/RefreshIcon.svelte -->\n<script lang=\"ts\">\n\tinterface Props {\n\t\tclassName?: string;\n\t}\n\n\tlet { className = 'w-6 h-6' }: Props = $props();\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width=\"1.5\"\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99\"\n\t/>\n</svg>\n","<!-- src/lib/components/ExtensionRSSNewsFeed.svelte -->\n<script lang=\"ts\">\n\timport { onMount, onDestroy } from 'svelte';\n\timport {\n\t\tExtensionRSSFeedService,\n\t\ttype RSSItem,\n\t\ttype RSSFeed\n\t} from '$lib/managers/ExtensionRSSFeedService';\n\timport NewsFeed from './NewsFeed.svelte';\n\timport { log } from '$lib/managers/Logger';\n\timport RefreshIcon from './icons/RefreshIcon.svelte';\n\timport { browser_ext } from '$lib/common/environment';\n\timport { UnifiedTimerManager } from '$lib/managers/UnifiedTimerManager';\n\n\tconst FIVE_MINUTES = 5 * 60 * 1000; // 5 minutes in milliseconds\n\tconst THIRTY_MINUTES = 30 * 60 * 1000; // 30 minutes in milliseconds\n\n\tinterface Props {\n\t\tshow?: boolean;\n\t\tfeedUrls: string[];\n\t\tmaxItemsPerFeed?: number;\n\t\tmaxVisibleItems?: number;\n\t\tclassName?: string;\n\t\tlocked?: boolean;\n\t\ttitle?: string;\n\t\tinterval?: number;\n\t}\n\n\tlet {\n\t\tshow = $bindable(true),\n\t\tfeedUrls,\n\t\tmaxVisibleItems = 3,\n\t\tclassName = '',\n\t\tlocked = true,\n\t\tmaxItemsPerFeed = locked ? 3 : 0,\n\t\ttitle = 'Crypto News',\n\t\tinterval = FIVE_MINUTES\n\t}: Props = $props();\n\n\t// Override interval if locked\n\tconst effectiveInterval = locked ? THIRTY_MINUTES : interval;\n\n\tlet newsItems = $state<RSSItem[]>([]);\n\tlet isLoading = $state(true);\n\tlet error = $state<string | null>(null);\n\n\tconst rssService = ExtensionRSSFeedService.getInstance();\n\tconst timerManager = UnifiedTimerManager.getInstance();\n\tconst timerId = 'rss-feed-refresh';\n\n\tonMount(() => {\n\t\tloadFeeds();\n\n\t\t// Set up refresh interval using UnifiedTimerManager\n\t\ttimerManager.addInterval(timerId, loadFeeds, effectiveInterval);\n\t\ttimerManager.startInterval(timerId);\n\n\t\t// Listen for updates from background script\n\t\tconst messageListener = (message: any, sender: any, sendResponse: any) => {\n\t\t\tif (message.type === 'RSS_FEED_UPDATE') {\n\t\t\t\tloadFeeds();\n\t\t\t}\n\t\t\treturn Promise.resolve(true);\n\t\t};\n\n\t\tbrowser_ext.runtime.onMessage.addListener(messageListener);\n\n\t\treturn () => {\n\t\t\ttimerManager.stopInterval(timerId);\n\t\t\ttimerManager.removeInterval(timerId);\n\t\t\tbrowser_ext.runtime.onMessage.removeListener(messageListener);\n\t\t};\n\t});\n\n\tasync function loadFeeds() {\n\t\tisLoading = true;\n\t\terror = null;\n\n\t\ttry {\n\t\t\tconst allItems: RSSItem[] = [];\n\n\t\t\t// Try to fetch fresh data\n\t\t\tconst feedPromises = feedUrls.map(\n\t\t\t\t(url: string): Promise<RSSFeed | null> =>\n\t\t\t\t\trssService.fetchFeed(url).catch((err: unknown): null => {\n\t\t\t\t\t\tlog.warn(`Failed to fetch feed ${url}:`, false, err);\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t})\n\t\t\t);\n\n\t\t\tconst feeds = await Promise.all(feedPromises);\n\n\t\t\t// Combine and sort items from all feeds\n\t\t\tfeeds.forEach((feed) => {\n\t\t\t\tif (feed) {\n\t\t\t\t\tallItems.push(...feed.items.slice(0, maxItemsPerFeed));\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Sort by date (assuming the date strings can be parsed)\n\t\t\tallItems.sort((a, b) => {\n\t\t\t\tconst dateA = parseRelativeDate(a.date);\n\t\t\t\tconst dateB = parseRelativeDate(b.date);\n\t\t\t\treturn dateB.getTime() - dateA.getTime();\n\t\t\t});\n\n\t\t\tnewsItems = allItems;\n\t\t} catch (err) {\n\t\t\terror = err instanceof Error ? err.message : 'Failed to load RSS feeds';\n\t\t\tlog.warn('RSS feed error:', false, err);\n\t\t} finally {\n\t\t\tisLoading = false;\n\t\t}\n\t}\n\n\tasync function refreshFeeds() {\n\t\t// Send message to background script to refresh feeds\n\t\t// chrome.runtime.sendMessage({ action: 'fetchRSSFeeds' }, (response) => {\n\t\t//   if (response.success) {\n\t\tloadFeeds();\n\t\t//   }\n\t\t// });\n\t}\n\n\tfunction parseRelativeDate(dateStr: string): Date {\n\t\tconst now = new Date();\n\n\t\tif (dateStr === 'Just now') {\n\t\t\treturn now;\n\t\t}\n\n\t\tconst match = dateStr.match(/(\\d+)\\s+(minute|hour|day)s?\\s+ago/);\n\t\tif (match) {\n\t\t\tconst value = parseInt(match[1]);\n\t\t\tconst unit = match[2];\n\n\t\t\tswitch (unit) {\n\t\t\t\tcase 'minute':\n\t\t\t\t\treturn new Date(now.getTime() - value * 60 * 1000);\n\t\t\t\tcase 'hour':\n\t\t\t\t\treturn new Date(now.getTime() - value * 60 * 60 * 1000);\n\t\t\t\tcase 'day':\n\t\t\t\t\treturn new Date(now.getTime() - value * 24 * 60 * 60 * 1000);\n\t\t\t}\n\t\t}\n\n\t\tif (dateStr === 'Yesterday') {\n\t\t\treturn new Date(now.getTime() - 24 * 60 * 60 * 1000);\n\t\t}\n\n\t\t// Default to now if we can't parse\n\t\treturn now;\n\t}\n</script>\n\n{#if show}\n\t<div class={className}>\n\t\t{#if isLoading}\n\t\t\t<div class=\"flex items-center justify-center p-8\">\n\t\t\t\t<div class=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500\"></div>\n\t\t\t</div>\n\t\t{:else if error}\n\t\t\t<div class=\"flex flex-col items-center justify-center p-8 text-red-500\">\n\t\t\t\t<p class=\"text-sm font-medium\">Error loading news</p>\n\t\t\t\t<p class=\"text-xs mt-1\">{error}</p>\n\t\t\t\t<button\n\t\t\t\t\tonclick={refreshFeeds}\n\t\t\t\t\tclass=\"mt-4 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 text-sm\"\n\t\t\t\t>\n\t\t\t\t\tRetry\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t{:else}\n\t\t\t<div class=\"flex items-center justify-between mb-0\">\n\t\t\t\t<h2 class=\"text-lg font-semibold\">{title}</h2>\n\t\t\t\t<button\n\t\t\t\t\tonclick={refreshFeeds}\n\t\t\t\t\tclass=\"p-1 text-blue-500 hover:text-blue-600 transition-colors\"\n\t\t\t\t\taria-label=\"Refresh feeds\"\n\t\t\t\t>\n\t\t\t\t\t<RefreshIcon className=\"w-4 h-4\" />\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<NewsFeed {newsItems} {maxVisibleItems} {className} {locked} {maxItemsPerFeed} />\n\t\t{/if}\n\t</div>\n{/if}\n","<script lang=\"ts\">\n\tlet { className = 'size-6' } = $props<{\n\t\tclassName?: string;\n\t}>();\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width=\"1.5\"\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M15.75 15.75V18m-7.5-6.75h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V13.5Zm0 2.25h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V18Zm2.498-6.75h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V13.5Zm0 2.25h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V18Zm2.504-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5Zm0 2.25h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V18Zm2.498-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5ZM8.25 6h7.5v2.25h-7.5V6ZM12 2.25c-1.892 0-3.758.11-5.593.322C5.307 2.7 4.5 3.65 4.5 4.757V19.5a2.25 2.25 0 0 0 2.25 2.25h10.5a2.25 2.25 0 0 0 2.25-2.25V4.757c0-1.108-.806-2.057-1.907-2.185A48.507 48.507 0 0 0 12 2.25Z\"\n\t/>\n</svg>\n","<!-- src/lib/components/EthUnitConverter.svelte -->\n<script lang=\"ts\">\n\timport Modal from './Modal.svelte';\n\timport { onMount } from 'svelte';\n\timport { PriceManager } from '$lib/managers/PriceManager';\n\timport { CoinbasePriceProvider } from '$lib/managers/providers/price/coinbase/CoinbasePriceProvider';\n\timport { CoingeckoPriceProvider } from '$lib/managers/providers/price/coingecko/CoingeckoPriceProvider';\n\timport { KrakenPriceProvider } from '$lib/managers/providers/price/kraken/KrakenPriceProvider';\n\timport { log } from '$lib/managers/Logger';\n\n\tlet {\n\t\tshow = $bindable(false),\n\t\tinitialValue = '',\n\t\tinitialUnit = 'ether' as 'wei' | 'gwei' | 'ether',\n\t\tonComplete = null as ((value: string, unit: 'wei' | 'gwei' | 'ether') => void) | null,\n\t\tcompact = false,\n\t\tshowUsdValue = true,\n\t\tonClose = () => {\n\t\t\tshow = false;\n\t\t}\n\t} = $props<{\n\t\tshow?: boolean;\n\t\tinitialValue?: string;\n\t\tinitialUnit?: 'wei' | 'gwei' | 'ether';\n\t\tonComplete?: ((value: string, unit: 'wei' | 'gwei' | 'ether') => void) | null;\n\t\tcompact?: boolean;\n\t\tshowUsdValue?: boolean;\n\t\tonClose?: () => void;\n\t}>();\n\n\t// ETH unit conversion state\n\tlet wei = $state('');\n\tlet gwei = $state('');\n\tlet ether = $state('');\n\tlet ethPrice = $state(0);\n\tlet selectedUnit = $state<'wei' | 'gwei' | 'ether'>(initialUnit);\n\n\t// USD calculation\n\tlet ethUnitUsd = $derived.by(() => {\n\t\tif (ether && ethPrice && showUsdValue) {\n\t\t\tconst etherNum = parseFloat(ether);\n\t\t\tif (!isNaN(etherNum) && etherNum > 0) {\n\t\t\t\tconst usdValue = etherNum * ethPrice;\n\t\t\t\treturn `$${usdValue.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;\n\t\t\t}\n\t\t}\n\t\treturn '';\n\t});\n\n\tconst priceManager = new PriceManager([\n\t\t{ provider: new CoinbasePriceProvider(), weight: 5 },\n\t\t{ provider: new CoingeckoPriceProvider(), weight: 3 },\n\t\t{ provider: new KrakenPriceProvider(), weight: 2 }\n\t]);\n\n\t// ETH conversion functions\n\tfunction weiToGwei(wei: string): string {\n\t\ttry {\n\t\t\tif (!wei || wei === '0') return '';\n\t\t\tconst weiNum = BigInt(wei);\n\t\t\tconst gweiWhole = weiNum / 1_000_000_000n;\n\t\t\tconst remainder = weiNum % 1_000_000_000n;\n\n\t\t\tif (remainder === 0n) {\n\t\t\t\treturn gweiWhole.toString();\n\t\t\t}\n\n\t\t\tconst remainderStr = remainder.toString().padStart(9, '0');\n\t\t\tconst trimmed = remainderStr.replace(/0+$/, '');\n\n\t\t\tif (trimmed) {\n\t\t\t\treturn `${gweiWhole}.${trimmed}`;\n\t\t\t}\n\t\t\treturn gweiWhole.toString();\n\t\t} catch {\n\t\t\treturn '';\n\t\t}\n\t}\n\n\tfunction weiToEther(wei: string): string {\n\t\ttry {\n\t\t\tif (!wei || wei === '0') return '';\n\t\t\tconst weiNum = BigInt(wei);\n\t\t\tconst etherWhole = weiNum / 1_000_000_000_000_000_000n;\n\t\t\tconst remainder = weiNum % 1_000_000_000_000_000_000n;\n\n\t\t\tif (remainder === 0n) {\n\t\t\t\treturn etherWhole.toString();\n\t\t\t}\n\n\t\t\tconst remainderStr = remainder.toString().padStart(18, '0');\n\t\t\tconst trimmed = remainderStr.replace(/0+$/, '');\n\n\t\t\tif (trimmed) {\n\t\t\t\treturn `${etherWhole}.${trimmed}`;\n\t\t\t}\n\t\t\treturn etherWhole.toString();\n\t\t} catch {\n\t\t\treturn '';\n\t\t}\n\t}\n\n\tfunction gweiToWei(gwei: string): string {\n\t\ttry {\n\t\t\tif (!gwei) return '';\n\t\t\tconst parts = gwei.split('.');\n\t\t\tconst wholePart = parts[0] || '0';\n\t\t\tconst decimalPart = parts[1] || '';\n\n\t\t\tconst paddedDecimal = decimalPart.padEnd(9, '0').slice(0, 9);\n\t\t\tconst gweiInWei = BigInt(wholePart) * 1_000_000_000n;\n\t\t\tconst decimalInWei = BigInt(paddedDecimal);\n\n\t\t\treturn (gweiInWei + decimalInWei).toString();\n\t\t} catch {\n\t\t\treturn '';\n\t\t}\n\t}\n\n\tfunction gweiToEther(gwei: string): string {\n\t\ttry {\n\t\t\tif (!gwei) return '';\n\t\t\tconst weiValue = gweiToWei(gwei);\n\t\t\treturn weiToEther(weiValue);\n\t\t} catch {\n\t\t\treturn '';\n\t\t}\n\t}\n\n\tfunction etherToWei(ether: string): string {\n\t\ttry {\n\t\t\tif (!ether) return '';\n\t\t\tconst parts = ether.split('.');\n\t\t\tconst wholePart = parts[0] || '0';\n\t\t\tconst decimalPart = parts[1] || '';\n\n\t\t\tconst paddedDecimal = decimalPart.padEnd(18, '0').slice(0, 18);\n\t\t\tconst combined = wholePart + paddedDecimal;\n\n\t\t\treturn BigInt(combined).toString();\n\t\t} catch {\n\t\t\treturn '';\n\t\t}\n\t}\n\n\tfunction etherToGwei(ether: string): string {\n\t\ttry {\n\t\t\tif (!ether) return '';\n\t\t\tconst weiValue = etherToWei(ether);\n\t\t\treturn weiToGwei(weiValue);\n\t\t} catch {\n\t\t\treturn '';\n\t\t}\n\t}\n\n\t// Fetch ETH price\n\tasync function fetchEthPrice() {\n\t\ttry {\n\t\t\tconst result = await priceManager.getMarketPrice('ETH-USD');\n\t\t\tethPrice = result && typeof result === 'object' && 'price' in result ? result.price : 0;\n\t\t} catch (error) {\n\t\t\tlog.error('Failed to fetch ETH price:', false, error);\n\t\t\tethPrice = 0;\n\t\t}\n\t}\n\n\t// Input handlers\n\tfunction handleWeiInput(e: Event) {\n\t\tconst target = e.target as HTMLInputElement;\n\t\tconst value = target.value;\n\n\t\tif (!/^\\d*$/.test(value)) {\n\t\t\ttarget.value = wei;\n\t\t\treturn;\n\t\t}\n\n\t\twei = value;\n\t\tselectedUnit = 'wei';\n\t\tif (value) {\n\t\t\tgwei = weiToGwei(value);\n\t\t\tether = weiToEther(value);\n\t\t} else {\n\t\t\tgwei = '';\n\t\t\tether = '';\n\t\t}\n\t}\n\n\tfunction handleGweiInput(e: Event) {\n\t\tconst target = e.target as HTMLInputElement;\n\t\tconst value = target.value;\n\n\t\tif (!/^\\d*\\.?\\d{0,9}$/.test(value)) {\n\t\t\ttarget.value = gwei;\n\t\t\treturn;\n\t\t}\n\n\t\tgwei = value;\n\t\tselectedUnit = 'gwei';\n\t\tif (value) {\n\t\t\twei = gweiToWei(value);\n\t\t\tether = gweiToEther(value);\n\t\t} else {\n\t\t\twei = '';\n\t\t\tether = '';\n\t\t}\n\t}\n\n\tfunction handleEtherInput(e: Event) {\n\t\tconst target = e.target as HTMLInputElement;\n\t\tconst value = target.value;\n\n\t\tif (!/^\\d*\\.?\\d{0,18}$/.test(value)) {\n\t\t\ttarget.value = ether;\n\t\t\treturn;\n\t\t}\n\n\t\tether = value;\n\t\tselectedUnit = 'ether';\n\t\tif (value) {\n\t\t\twei = etherToWei(value);\n\t\t\tgwei = etherToGwei(value);\n\t\t} else {\n\t\t\twei = '';\n\t\t\tgwei = '';\n\t\t}\n\t}\n\n\tfunction applyValue() {\n\t\tif (onComplete) {\n\t\t\tconst value = selectedUnit === 'wei' ? wei : selectedUnit === 'gwei' ? gwei : ether;\n\t\t\tonComplete(value, selectedUnit);\n\t\t\tif (!compact) show = false;\n\t\t}\n\t}\n\n\tfunction clearFields() {\n\t\twei = '';\n\t\tgwei = '';\n\t\tether = '';\n\t}\n\n\tonMount(async () => {\n\t\tif (showUsdValue) {\n\t\t\tawait fetchEthPrice();\n\t\t}\n\n\t\tif (initialValue) {\n\t\t\tswitch (initialUnit) {\n\t\t\t\tcase 'wei':\n\t\t\t\t\twei = initialValue;\n\t\t\t\t\thandleWeiInput({ target: { value: initialValue } } as any);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'gwei':\n\t\t\t\t\tgwei = initialValue;\n\t\t\t\t\thandleGweiInput({ target: { value: initialValue } } as any);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'ether':\n\t\t\t\t\tether = initialValue;\n\t\t\t\t\thandleEtherInput({ target: { value: initialValue } } as any);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t});\n</script>\n\n{#if compact}\n\t<!-- Inline version for embedding -->\n\t<div class=\"eth-converter-compact space-y-2 p-3 border rounded-lg\">\n\t\t<div class=\"flex items-center justify-between mb-2\">\n\t\t\t<h3 class=\"text-sm font-medium\">ETH Unit Converter</h3>\n\t\t\t<button type=\"button\" class=\"text-xs text-gray-500 hover:text-gray-700\" onclick={clearFields}>\n\t\t\t\tClear\n\t\t\t</button>\n\t\t</div>\n\n\t\t<div class=\"space-y-2\">\n\t\t\t<div class=\"flex gap-2 items-center\">\n\t\t\t\t<!-- svelte-ignore a11y_label_has_associated_control -->\n\t\t\t\t<label class=\"w-12 text-xs\">Wei</label>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tpattern=\"[0-9]*\"\n\t\t\t\t\tinputmode=\"numeric\"\n\t\t\t\t\tplaceholder=\"0\"\n\t\t\t\t\tclass=\"rounded border px-2 py-1 flex-1 font-mono text-xs\"\n\t\t\t\t\tbind:value={wei}\n\t\t\t\t\toninput={handleWeiInput}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div class=\"flex gap-2 items-center\">\n\t\t\t\t<!-- svelte-ignore a11y_label_has_associated_control -->\n\t\t\t\t<label class=\"w-12 text-xs\">Gwei (gas)</label>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tinputmode=\"decimal\"\n\t\t\t\t\tplaceholder=\"0.0\"\n\t\t\t\t\tclass=\"rounded border px-2 py-1 flex-1 font-mono text-xs\"\n\t\t\t\t\tbind:value={gwei}\n\t\t\t\t\toninput={handleGweiInput}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div class=\"flex gap-2 items-center\">\n\t\t\t\t<!-- svelte-ignore a11y_label_has_associated_control -->\n\t\t\t\t<label class=\"w-12 text-xs\">ETH</label>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tinputmode=\"decimal\"\n\t\t\t\t\tplaceholder=\"0.0\"\n\t\t\t\t\tclass=\"rounded border px-2 py-1 flex-1 font-mono text-xs\"\n\t\t\t\t\tbind:value={ether}\n\t\t\t\t\toninput={handleEtherInput}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\n\t\t{#if showUsdValue && ethUnitUsd}\n\t\t\t<div class=\"text-xs text-green-600 dark:text-green-400 font-semibold mt-2\">\n\t\t\t\t{ethUnitUsd}\n\t\t\t</div>\n\t\t{/if}\n\n\t\t{#if onComplete}\n\t\t\t<div class=\"flex justify-end mt-2\">\n\t\t\t\t<button type=\"button\" class=\"btn btn-sm btn-primary\" onclick={applyValue}> Apply </button>\n\t\t\t</div>\n\t\t{/if}\n\t</div>\n{:else}\n\t<!-- Modal version -->\n\t<Modal bind:show title=\"ETH Unit Converter\" {onClose}>\n\t\t<div class=\"space-y-4 p-4 mt-4\">\n\t\t\t<div class=\"relative\">\n\t\t\t\t<button\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tclass=\"absolute -top-8 right-0 text-xs text-gray-600 hover:text-gray-900 dark:hover:text-gray-200 px-2 py-1\"\n\t\t\t\t\tonclick={clearFields}\n\t\t\t\t\taria-label=\"Clear\"\n\t\t\t\t>\n\t\t\t\t\t<svg\n\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\tstroke-width=\"1.5\"\n\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\tclass=\"size-6\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\td=\"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</svg>\n\t\t\t\t</button>\n\n\t\t\t\t<div class=\"flex flex-col gap-3\">\n\t\t\t\t\t<div class=\"flex gap-2 items-center\">\n\t\t\t\t\t\t<!-- svelte-ignore a11y_label_has_associated_control -->\n\t\t\t\t\t\t<label class=\"w-16 text-sm\">Wei</label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tpattern=\"[0-9]*\"\n\t\t\t\t\t\t\tinputmode=\"numeric\"\n\t\t\t\t\t\t\tplaceholder=\"0\"\n\t\t\t\t\t\t\tclass=\"rounded border px-3 py-2 flex-1 font-mono text-sm\"\n\t\t\t\t\t\t\tbind:value={wei}\n\t\t\t\t\t\t\toninput={handleWeiInput}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"flex gap-2 items-center\">\n\t\t\t\t\t\t<!-- svelte-ignore a11y_label_has_associated_control -->\n\t\t\t\t\t\t<label class=\"w-16 text-sm\">Gwei (gas)</label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tinputmode=\"decimal\"\n\t\t\t\t\t\t\tplaceholder=\"0.0\"\n\t\t\t\t\t\t\tclass=\"rounded border px-3 py-2 flex-1 font-mono text-sm\"\n\t\t\t\t\t\t\tbind:value={gwei}\n\t\t\t\t\t\t\toninput={handleGweiInput}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"flex gap-2 items-center\">\n\t\t\t\t\t\t<!-- svelte-ignore a11y_label_has_associated_control -->\n\t\t\t\t\t\t<label class=\"w-16 text-sm\">Ether</label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tinputmode=\"decimal\"\n\t\t\t\t\t\t\tplaceholder=\"0.0\"\n\t\t\t\t\t\t\tclass=\"rounded border px-3 py-2 flex-1 font-mono text-sm\"\n\t\t\t\t\t\t\tbind:value={ether}\n\t\t\t\t\t\t\toninput={handleEtherInput}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{#if showUsdValue}\n\t\t\t\t\t\t<div class=\"pt-2 space-y-1\">\n\t\t\t\t\t\t\t<div class=\"text-xs text-gray-500\">\n\t\t\t\t\t\t\t\t1 ETH ≈ ${ethPrice\n\t\t\t\t\t\t\t\t\t? ethPrice.toLocaleString(undefined, {\n\t\t\t\t\t\t\t\t\t\t\tminimumFractionDigits: 2,\n\t\t\t\t\t\t\t\t\t\t\tmaximumFractionDigits: 2\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t: '--'} USD\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{#if ethUnitUsd}\n\t\t\t\t\t\t\t\t<div class=\"text-sm text-green-600 dark:text-green-400 font-semibold\">\n\t\t\t\t\t\t\t\t\t{ethUnitUsd}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"flex justify-end gap-2 mt-6\">\n\t\t\t\t{#if onComplete}\n\t\t\t\t\t<button type=\"button\" class=\"btn btn-primary\" onclick={applyValue}> Apply </button>\n\t\t\t\t{/if}\n\t\t\t\t<button type=\"button\" class=\"btn btn-secondary\" onclick={onClose}> Close </button>\n\t\t\t</div>\n\t\t</div>\n\t</Modal>\n{/if}\n","<script lang=\"ts\">\n\tinterface Props {\n\t\tclassName?: string;\n\t}\n\n\tlet { className = 'w-6 h-6' }: Props = $props();\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width=\"1.5\"\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z\"\n\t/>\n</svg>\n","<!-- File: src/lib/components/icons/SortIcon.svelte -->\n<script lang=\"ts\">\n\tinterface Props {\n\t\tclassName?: string;\n\t}\n\n\tlet { className = 'w-6 h-6' }: Props = $props();\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width=\"1.5\"\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M3 7.5 7.5 3m0 0L12 7.5M7.5 3v13.5m13.5 0L16.5 21m0 0L12 16.5m4.5 4.5V7.5\"\n\t/>\n</svg>\n","<!-- SearchSortControls.svelte -->\n<script lang=\"ts\">\n\timport SearchIcon from './icons/SearchIcon.svelte';\n\timport SortIcon from './icons/SortIcon.svelte';\n\timport { UnifiedTimerManager } from '$lib/managers/UnifiedTimerManager';\n\n\tlet {\n\t\tsearchQuery = '',\n\t\tsortOrder = 'date',\n\t\tsortDirection = 'desc',\n\t\tonSearch,\n\t\tonSortOrderChange,\n\t\tonSortDirectionChange\n\t} = $props<{\n\t\tsearchQuery?: string;\n\t\tsortOrder?: 'date' | 'title';\n\t\tsortDirection?: 'asc' | 'desc';\n\t\tonSearch: (query: string) => void;\n\t\tonSortOrderChange: (order: 'date' | 'title') => void;\n\t\tonSortDirectionChange: () => void;\n\t}>();\n\n\t// Handle search input with debounce using UnifiedTimerManager\n\tconst debouncedSearch = UnifiedTimerManager.createDebounce((value: string) => {\n\t\tonSearch(value);\n\t}, 300);\n\n\tfunction handleSearch(e: Event) {\n\t\tconst value = (e.target as HTMLInputElement).value;\n\t\tdebouncedSearch(value);\n\t}\n\n\t// Handle sort order change\n\tfunction handleSortOrderChange(e: Event) {\n\t\tconst value = (e.target as HTMLSelectElement).value as 'date' | 'title';\n\t\tonSortOrderChange(value);\n\t}\n\n\t// Handle sort direction change\n\tfunction handleSortDirectionChange() {\n\t\tonSortDirectionChange();\n\t}\n</script>\n\n<div class=\"flex items-center justify-end mb-2\">\n\t<div\n\t\tclass=\"flex items-center space-x-2 bg-white/90 dark:bg-zinc-800/90 backdrop-blur-sm rounded-full p-1.5 shadow-lg\"\n\t>\n\t\t<!-- Search Field -->\n\t\t<div class=\"relative flex-1 max-w-xs\">\n\t\t\t<div class=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n\t\t\t\t<SearchIcon className=\"w-4 h-4 text-gray-400\" />\n\t\t\t</div>\n\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\tclass=\"block w-full pl-10 pr-3 py-1.5 text-sm bg-transparent border border-gray-200 dark:border-zinc-700 rounded-full focus:ring-1 focus:ring-gray-300 dark:focus:ring-zinc-700 dark:text-gray-200\"\n\t\t\t\tplaceholder=\"Search articles...\"\n\t\t\t\tvalue={searchQuery}\n\t\t\t\toninput={handleSearch}\n\t\t\t/>\n\t\t</div>\n\n\t\t<!-- Sort Controls -->\n\t\t<div class=\"flex items-center space-x-1\">\n\t\t\t<select\n\t\t\t\tclass=\"text-sm bg-transparent border-0 focus:ring-0 focus:outline-none dark:text-gray-200\"\n\t\t\t\tvalue={sortOrder}\n\t\t\t\tonchange={handleSortOrderChange}\n\t\t\t>\n\t\t\t\t<option value=\"date\">Date</option>\n\t\t\t\t<option value=\"title\">Title</option>\n\t\t\t</select>\n\n\t\t\t<button\n\t\t\t\tclass=\"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-zinc-700 transition-colors duration-200\"\n\t\t\t\tonclick={handleSortDirectionChange}\n\t\t\t>\n\t\t\t\t<SortIcon\n\t\t\t\t\tclassName=\"w-4 h-4 text-gray-500 dark:text-gray-400 {sortDirection === 'asc'\n\t\t\t\t\t\t? 'rotate-180'\n\t\t\t\t\t\t: ''}\"\n\t\t\t\t/>\n\t\t\t</button>\n\t\t</div>\n\t</div>\n</div>\n","<script lang=\"ts\">\n\tconst { size = 24, stroke = 'currentColor', className = '' } = $props();\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width=\"1.5\"\n\t{stroke}\n\twidth={size}\n\theight={size}\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z\"\n\t/>\n</svg>\n","<script lang=\"ts\">\n\timport SectionCard from './SectionCard.svelte';\n\timport LockIcon from './icons/LockIcon.svelte';\n\timport Tooltip from './Tooltip.svelte';\n\timport { cn } from '$lib/utils';\n\n\tlet {\n\t\tshow = $bindable(true),\n\t\tlocked = false,\n\t\tlockMessage = 'Upgrade to unlock this feature',\n\t\tshowButton = true,\n\t\tonComplete = () => {},\n\t\ttitle,\n\t\ticon,\n\t\tisPinned,\n\t\teye,\n\t\teyeTooltip,\n\t\tclassName,\n\t\tminHeight,\n\t\tmaxHeight,\n\t\tfooter,\n\t\tfooterProps = {},\n\t\tlockedFooter,\n\t\tlockedFooterProps = {},\n\t\tchildren\n\t} = $props<{\n\t\tshow?: boolean;\n\t\tlocked?: boolean;\n\t\tlockMessage?: string | (() => string);\n\t\tshowButton?: boolean;\n\t\tonComplete?: () => void;\n\t\ttitle: string;\n\t\ticon?: any;\n\t\tclassName?: string;\n\t\tisPinned?: boolean;\n\t\teye?: boolean;\n\t\teyeTooltip?: string;\n\t\tminHeight?: string;\n\t\tmaxHeight?: string;\n\t\tfooter?: any;\n\t\tfooterProps?: Record<string, any>;\n\t\tlockedFooter?: any;\n\t\tlockedFooterProps?: Record<string, any>;\n\t\tchildren: () => any;\n\t}>();\n</script>\n\n{#if show}\n\t<SectionCard\n\t\tbind:show\n\t\t{title}\n\t\t{icon}\n\t\t{isPinned}\n\t\t{eye}\n\t\t{eyeTooltip}\n\t\t{className}\n\t\t{minHeight}\n\t\t{maxHeight}\n\t\t{footer}\n\t\t{footerProps}\n\t\t{lockedFooter}\n\t\t{lockedFooterProps}\n\t\t{locked}\n\t>\n\t\t<div class=\"relative\">\n\t\t\t<!-- The actual content -->\n\t\t\t<div\n\t\t\t\tclass={cn(\n\t\t\t\t\t'transition-all duration-300',\n\t\t\t\t\tlocked && 'blur-sm select-none pointer-events-none'\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t{@render children()}\n\t\t\t</div>\n\n\t\t\t{#if locked}\n\t\t\t\t<!-- Overlay with lock icon, message, and optional button -->\n\t\t\t\t<div\n\t\t\t\t\tclass=\"absolute inset-0 flex flex-col items-center bg-white/80 dark:bg-zinc-900/70 text-center py-4 rounded-xl z-10\"\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"sticky top-0 w-full flex flex-col items-center bg-white/80 dark:bg-zinc-900/70 backdrop-blur-sm py-1\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<LockIcon className=\"w-6 h-6 text-zinc-500 mb-2\" />\n\t\t\t\t\t\t<div class=\"text-zinc-800 dark:text-zinc-200 text-sm mb-2\">\n\t\t\t\t\t\t\t{typeof lockMessage === 'function' ? lockMessage() : lockMessage}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{#if showButton}\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"mt-1 px-4 py-2 rounded-lg bg-blue-600 text-white text-sm hover:bg-blue-700 transition\"\n\t\t\t\t\t\t\t\tonclick={() => onComplete()}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tUpgrade Now\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t<Tooltip content=\"Available with YAKKL Pro\">\n\t\t\t\t\t\t\t<span class=\"text-xs text-zinc-500 mt-2 cursor-help underline\"\n\t\t\t\t\t\t\t\t>Why is this locked?</span\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</div>\n\t</SectionCard>\n{/if}\n","<!-- svelte-ignore state_referenced_locally -->\n<!-- svelte-ignore state_referenced_locally -->\n<!-- BookmarkedArticles.svelte -->\n<script lang=\"ts\">\n\timport ArticleControls from './ArticleControls.svelte';\n\timport BookmarkIcon from './icons/BookmarkIcon.svelte';\n\timport NewsFeedLineView from './NewsFeedLineView.svelte';\n\timport SearchSortControls from './SearchSortControls.svelte';\n\timport type { RSSItem } from '$lib/managers/ExtensionRSSFeedService';\n\timport { yakklBookmarkedArticlesStore, setYakklBookmarkedArticles } from '$lib/common/stores';\n\timport { derived, writable } from 'svelte/store';\n\timport LockedSectionCard from './LockedSectionCard.svelte';\n\timport Upgrade from './Upgrade.svelte';\n\timport { onMount } from 'svelte';\n\timport { isProLevel } from '$lib/common/utils';\n\n\tinterface Props {\n\t\tshow?: boolean;\n\t\tlocked?: boolean;\n\t\tonComplete?: () => void;\n\t\tfooter?: any;\n\t\tfooterProps?: Record<string, any>;\n\t\tlockedFooter?: any;\n\t\tlockedFooterProps?: Record<string, any>;\n\t}\n\n\tlet {\n\t\tshow = $bindable(true),\n\t\tonComplete = $bindable(() => {}),\n\t\tlocked = $bindable(true),\n\t\tfooter = $bindable(null),\n\t\tfooterProps = $bindable({}),\n\t\tlockedFooter = $bindable(null),\n\t\tlockedFooterProps = $bindable({})\n\t}: Props = $props();\n\n\tlet showUpgradeModal = $state(false);\n\n\tconst searchQuery = writable('');\n\tconst sortOrder = writable<'date' | 'title'>('date');\n\tconst sortDirection = writable<'asc' | 'desc'>('desc');\n\n\tconst filteredArticles = derived(\n\t\t[yakklBookmarkedArticlesStore, searchQuery, sortOrder, sortDirection],\n\t\t([articles, query, order, direction]) => {\n\t\t\tlet filtered = articles;\n\t\t\tif (query) {\n\t\t\t\tconst searchLower = query.toLowerCase();\n\t\t\t\tfiltered = articles.filter(\n\t\t\t\t\t(article) =>\n\t\t\t\t\t\tarticle.title.toLowerCase().includes(searchLower) ||\n\t\t\t\t\t\tarticle.description?.toLowerCase().includes(searchLower) ||\n\t\t\t\t\t\tarticle.source.toLowerCase().includes(searchLower)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn [...filtered].sort((a, b) => {\n\t\t\t\tif (order === 'date') {\n\t\t\t\t\tconst dateA = new Date(a.publishedAt || a.date || '').getTime();\n\t\t\t\t\tconst dateB = new Date(b.publishedAt || b.date || '').getTime();\n\t\t\t\t\treturn direction === 'asc' ? dateA - dateB : dateB - dateA;\n\t\t\t\t}\n\t\t\t\treturn direction === 'asc'\n\t\t\t\t\t? a.title.localeCompare(b.title)\n\t\t\t\t\t: b.title.localeCompare(a.title);\n\t\t\t});\n\t\t}\n\t);\n\n\tonMount(async () => {\n\t\tlocked = (await isProLevel()) ? false : true;\n\t});\n\n\tfunction handleSearch(query: string) {\n\t\tsearchQuery.set(query);\n\t}\n\n\tfunction handleSortOrderChange(order: 'date' | 'title') {\n\t\tsortOrder.set(order);\n\t}\n\n\tfunction handleSortDirectionChange() {\n\t\tsortDirection.update((d) => (d === 'asc' ? 'desc' : 'asc'));\n\t}\n\n\tasync function handleArticleDelete(article: RSSItem) {\n\t\tconst currentArticles = $yakklBookmarkedArticlesStore;\n\t\tconst updatedArticles = currentArticles.filter(\n\t\t\t(a) => !(a.title === article.title && a.source === article.source)\n\t\t);\n\t\tawait setYakklBookmarkedArticles(updatedArticles);\n\t}\n\n\t// Only show locked footer if not pro\n\tlet showLockedFooter = $state(false);\n\n\tasync function updateLockedFooterState() {\n\t\tshowLockedFooter = !(await isProLevel());\n\t}\n\n\t$effect(() => {\n\t\tupdateLockedFooterState();\n\t});\n</script>\n\n<Upgrade bind:show={showUpgradeModal} {onComplete} />\n\n<LockedSectionCard\n\tbind:show\n\ttitle=\"Bookmarked Articles\"\n\ticon={BookmarkIcon}\n\tminHeight=\"300px\"\n\tmaxHeight=\"750px\"\n\t{locked}\n\tlockMessage=\"Upgrade to Pro to unlock this feature\"\n\tshowButton={true}\n\tonComplete={() => {\n\t\tshowUpgradeModal = true;\n\t}}\n\t{footer}\n\t{footerProps}\n\tlockedFooter={showLockedFooter ? lockedFooter : null}\n\tlockedFooterProps={showLockedFooter ? lockedFooterProps : {}}\n>\n\t<SearchSortControls\n\t\tsearchQuery={$searchQuery}\n\t\tsortOrder={$sortOrder}\n\t\tsortDirection={$sortDirection}\n\t\tonSearch={handleSearch}\n\t\tonSortOrderChange={handleSortOrderChange}\n\t\tonSortDirectionChange={handleSortDirectionChange}\n\t/>\n\n\t{#if $filteredArticles.length === 0}\n\t\t<div class=\"flex items-center justify-center h-32 text-gray-500\">\n\t\t\t<p>{$searchQuery ? 'No matching articles found' : 'No bookmarked articles yet'}</p>\n\t\t</div>\n\t{:else}\n\t\t<div class=\"space-y-0\">\n\t\t\t{#each $filteredArticles as article, index}\n\t\t\t\t<div class=\"relative group\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"group-hover:bg-gray-50 dark:group-hover:bg-zinc-800/50 transition-colors duration-200\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<NewsFeedLineView newsItem={article} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<ArticleControls\n\t\t\t\t\t\t{article}\n\t\t\t\t\t\tbookmarkEnabled={false}\n\t\t\t\t\t\tdeleteEnabled={true}\n\t\t\t\t\t\tonDelete={handleArticleDelete}\n\t\t\t\t\t/>\n\t\t\t\t\t{#if index < $filteredArticles.length - 1}\n\t\t\t\t\t\t<div class=\"flex justify-center\">\n\t\t\t\t\t\t\t<div class=\"w-[80%] h-[1px] bg-gray-200 dark:bg-gray-700\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t{/each}\n\t\t</div>\n\t{/if}\n</LockedSectionCard>\n","<!-- GenericFooter.svelte -->\n<script lang=\"ts\">\n\ttype FooterVariant = 'default' | 'warning' | 'success' | 'info';\n\n\tlet {\n\t\ttext = '',\n\t\tbuttonText = '',\n\t\tonAction = () => {},\n\t\tvariant = 'default' as FooterVariant,\n\t\tclassName = ''\n\t} = $props<{\n\t\ttext?: string;\n\t\tbuttonText?: string;\n\t\tonAction?: () => void;\n\t\tvariant?: FooterVariant;\n\t\tclassName?: string;\n\t}>();\n\n\tconst variantClasses: Record<FooterVariant, string> = {\n\t\tdefault: 'bg-zinc-50 dark:bg-zinc-800/50 text-zinc-700 dark:text-zinc-300',\n\t\twarning: 'bg-yellow-50 dark:bg-yellow-900/20 text-yellow-700 dark:text-yellow-300',\n\t\tsuccess: 'bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300',\n\t\tinfo: 'bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300'\n\t};\n\n\t$effect(() => {\n\t\t// Ensure variant is always a valid FooterVariant\n\t\tif (!Object.keys(variantClasses).includes(variant)) {\n\t\t\tvariant = 'default';\n\t\t}\n\t});\n</script>\n\n<div\n\tclass=\"flex items-center justify-between {variantClasses[variant as FooterVariant]} {className}\"\n>\n\t<p class=\"text-sm\">{text}</p>\n\t{#if buttonText}\n\t\t<button\n\t\t\tclass=\"px-4 py-2 text-sm font-medium rounded-lg transition-colors\n        {variant === 'default' &&\n\t\t\t\t'bg-zinc-200 hover:bg-zinc-300 dark:bg-zinc-700 dark:hover:bg-zinc-600 text-zinc-900 dark:text-zinc-100'}\n        {variant === 'warning' &&\n\t\t\t\t'bg-yellow-200 hover:bg-yellow-300 dark:bg-yellow-800 dark:hover:bg-yellow-700 text-yellow-900 dark:text-yellow-100'}\n        {variant === 'success' &&\n\t\t\t\t'bg-green-200 hover:bg-green-300 dark:bg-green-800 dark:hover:bg-green-700 text-green-900 dark:text-green-100'}\n        {variant === 'info' &&\n\t\t\t\t'bg-blue-200 hover:bg-blue-300 dark:bg-blue-800 dark:hover:bg-blue-700 text-blue-900 dark:text-blue-100'}\"\n\t\t\tonclick={onAction}\n\t\t>\n\t\t\t{buttonText}\n\t\t</button>\n\t{/if}\n</div>\n","<!-- File: src/lib/components/UpgradeFooter.svelte -->\n<script lang=\"ts\">\n\tlet {\n\t\tonUpgrade,\n\t\ttext = \"Unlock the rest of the world's insightful information by\",\n\t\tbuttonText = 'Upgrading today!'\n\t} = $props<{\n\t\tonUpgrade: () => void;\n\t\ttext?: string;\n\t\tbuttonText?: string;\n\t}>();\n</script>\n\n<div class=\"text-sm text-zinc-600 dark:text-zinc-400\">\n\t{text}\n\t<button class=\"text-blue-600 dark:text-blue-400 hover:underline\" onclick={onUpgrade}>\n\t\t{buttonText}\n\t</button>\n</div>\n","import { ExtensionRSSFeedService, type RSSFeed, type RSSItem } from './ExtensionRSSFeedService';\nimport { browser_ext } from '$lib/common/environment';\nimport { log } from '$lib/managers/Logger';\n\nexport type { RSSFeed, RSSItem };\n\nexport class DynamicRSSFeedService {\n\tprivate static instance: DynamicRSSFeedService;\n\tprivate ws: WebSocket | null = null;\n\tprivate reconnectAttempts = 0;\n\tprivate maxReconnectAttempts = 5;\n\tprivate reconnectDelay = 1000; // Start with 1 second\n\tprivate reconnectTimer: number | null = null;\n\tprivate feedUpdateCallbacks: ((feed: RSSFeed) => void)[] = [];\n\tprivate rssService: ExtensionRSSFeedService;\n\n\tprivate constructor() {\n\t\tthis.rssService = ExtensionRSSFeedService.getInstance();\n\t}\n\n\tstatic getInstance(): DynamicRSSFeedService {\n\t\tif (!DynamicRSSFeedService.instance) {\n\t\t\tDynamicRSSFeedService.instance = new DynamicRSSFeedService();\n\t\t}\n\t\treturn DynamicRSSFeedService.instance;\n\t}\n\n\tasync connect(wsUrl: string): Promise<void> {\n\t\tif (this.ws?.readyState === WebSocket.OPEN) {\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tthis.ws = new WebSocket(wsUrl);\n\n\t\t\tthis.ws.onopen = () => {\n\t\t\t\tlog.info('WebSocket connected', false);\n\t\t\t\tthis.reconnectAttempts = 0;\n\t\t\t\tthis.reconnectDelay = 1000;\n\t\t\t};\n\n\t\t\tthis.ws.onmessage = async (event) => {\n\t\t\t\ttry {\n\t\t\t\t\tconst data = JSON.parse(event.data);\n\n\t\t\t\t\tif (data.type === 'rss_feed') {\n\t\t\t\t\t\t// Handle raw XML feed\n\t\t\t\t\t\tif (typeof data.content === 'string') {\n\t\t\t\t\t\t\tconst feed = await this.rssService.parseRSSFeed(data.content, wsUrl);\n\t\t\t\t\t\t\tthis.notifyFeedUpdate(feed);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// Handle pre-parsed feed object\n\t\t\t\t\t\telse if (data.content && data.content.items) {\n\t\t\t\t\t\t\tthis.notifyFeedUpdate(data.content as RSSFeed);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tlog.error('Error processing WebSocket message:', false, error);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.ws.onclose = () => {\n\t\t\t\tlog.warn('WebSocket connection closed', false);\n\t\t\t\tthis.attemptReconnect();\n\t\t\t};\n\n\t\t\tthis.ws.onerror = (error) => {\n\t\t\t\tlog.error('WebSocket error:', false, error);\n\t\t\t};\n\t\t} catch (error) {\n\t\t\tlog.error('Error connecting to WebSocket:', false, error);\n\t\t\tthis.attemptReconnect();\n\t\t}\n\t}\n\n\tprivate attemptReconnect() {\n\t\tif (this.reconnectAttempts >= this.maxReconnectAttempts) {\n\t\t\tlog.error('Max reconnection attempts reached', false);\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.reconnectTimer) {\n\t\t\tclearTimeout(this.reconnectTimer);\n\t\t}\n\n\t\tthis.reconnectTimer = window.setTimeout(() => {\n\t\t\tthis.reconnectAttempts++;\n\t\t\tthis.reconnectDelay *= 2; // Exponential backoff\n\t\t\tthis.connect(this.ws?.url || '');\n\t\t}, this.reconnectDelay);\n\t}\n\n\tdisconnect() {\n\t\tif (this.ws) {\n\t\t\tthis.ws.close();\n\t\t\tthis.ws = null;\n\t\t}\n\t\tif (this.reconnectTimer) {\n\t\t\tclearTimeout(this.reconnectTimer);\n\t\t\tthis.reconnectTimer = null;\n\t\t}\n\t}\n\n\tonFeedUpdate(callback: (feed: RSSFeed) => void): () => void {\n\t\tthis.feedUpdateCallbacks.push(callback);\n\t\treturn () => {\n\t\t\tthis.feedUpdateCallbacks = this.feedUpdateCallbacks.filter((cb) => cb !== callback);\n\t\t};\n\t}\n\n\tprivate notifyFeedUpdate(feed: RSSFeed) {\n\t\tthis.feedUpdateCallbacks.forEach((callback) => callback(feed));\n\t}\n\n\t// Method to load the sample feed from static data\n\tasync loadSampleFeed(): Promise<RSSFeed> {\n\t\ttry {\n\t\t\tconst response = await fetch('/src/lib/data/sample-crypto-feed.xml');\n\t\t\tconst xmlText = await response.text();\n\t\t\treturn await this.rssService.parseRSSFeed(xmlText, 'sample-feed');\n\t\t} catch (error) {\n\t\t\tlog.error('Error loading sample feed:', false, error);\n\t\t\tthrow error;\n\t\t}\n\t}\n}\n","<script lang=\"ts\">\n\timport { onMount, onDestroy } from 'svelte';\n\timport { DynamicRSSFeedService, type RSSFeed } from '$lib/managers/DynamicRSSFeedService';\n\timport NewsFeed from './NewsFeed.svelte';\n\timport { log } from '$lib/managers/Logger';\n\timport { browser_ext } from '$lib/common/environment';\n\n\tinterface Props {\n\t\twsUrl?: string;\n\t\tuseSampleFeed?: boolean;\n\t\tmaxItemsPerFeed?: number;\n\t\tmaxVisibleItems?: number;\n\t\tclassName?: string;\n\t\tlocked?: boolean;\n\t\tshow?: boolean;\n\t\ttitle?: string;\n\t}\n\n\tlet {\n\t\twsUrl,\n\t\tuseSampleFeed = false,\n\t\tmaxVisibleItems = 3,\n\t\tclassName = '',\n\t\tlocked = true,\n\t\tmaxItemsPerFeed = locked ? 3 : 0,\n\t\ttitle = 'Crypto News',\n\t\tshow = $bindable(true)\n\t}: Props = $props();\n\n\tlet newsItems = $state<RSSFeed['items']>([]);\n\tlet isLoading = $state(true);\n\tlet error = $state<string | null>(null);\n\tlet isConnected = $state(false);\n\n\tconst dynamicService = DynamicRSSFeedService.getInstance();\n\tlet unsubscribe: (() => void) | null = null;\n\n\tonMount(async () => {\n\t\ttry {\n\t\t\tif (useSampleFeed) {\n\t\t\t\tconst feed = await dynamicService.loadSampleFeed();\n\t\t\t\tnewsItems = feed.items.slice(0, maxItemsPerFeed);\n\t\t\t\tisLoading = false;\n\t\t\t} else if (wsUrl) {\n\t\t\t\tunsubscribe = dynamicService.onFeedUpdate((feed) => {\n\t\t\t\t\tnewsItems = feed.items.slice(0, maxItemsPerFeed);\n\t\t\t\t\tisLoading = false;\n\t\t\t\t\tisConnected = true;\n\t\t\t\t});\n\n\t\t\t\tawait dynamicService.connect(wsUrl);\n\t\t\t} else {\n\t\t\t\tthrow new Error('Either wsUrl or useSampleFeed must be provided');\n\t\t\t}\n\t\t} catch (err) {\n\t\t\terror = err instanceof Error ? err.message : 'Failed to load RSS feed';\n\t\t\tlog.error('RSS feed error:', false, err);\n\t\t\tisLoading = false;\n\t\t}\n\t});\n\n\tonDestroy(() => {\n\t\tif (unsubscribe) {\n\t\t\tunsubscribe();\n\t\t}\n\t\tif (wsUrl) {\n\t\t\tdynamicService.disconnect();\n\t\t}\n\t});\n\n\tasync function refreshFeed() {\n\t\tif (useSampleFeed) {\n\t\t\ttry {\n\t\t\t\tisLoading = true;\n\t\t\t\tconst feed = await dynamicService.loadSampleFeed();\n\t\t\t\tnewsItems = feed.items.slice(0, maxItemsPerFeed);\n\t\t\t} catch (err) {\n\t\t\t\terror = err instanceof Error ? err.message : 'Failed to refresh feed';\n\t\t\t} finally {\n\t\t\t\tisLoading = false;\n\t\t\t}\n\t\t}\n\t\t// For WebSocket feeds, the server should handle refresh requests\n\t}\n</script>\n\n{#if show}\n\t<div class={className}>\n\t\t{#if isLoading}\n\t\t\t<div class=\"flex items-center justify-center p-8\">\n\t\t\t\t<div class=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500\"></div>\n\t\t\t</div>\n\t\t{:else if error}\n\t\t\t<div class=\"flex flex-col items-center justify-center p-8 text-red-500\">\n\t\t\t\t<p class=\"text-sm font-medium\">Error loading news</p>\n\t\t\t\t<p class=\"text-xs mt-1\">{error}</p>\n\t\t\t\t<button\n\t\t\t\t\tonclick={refreshFeed}\n\t\t\t\t\tclass=\"mt-4 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 text-sm\"\n\t\t\t\t>\n\t\t\t\t\tRetry\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t{:else}\n\t\t\t<div class=\"flex items-center justify-between mb-2\">\n\t\t\t\t<h2 class=\"text-lg font-semibold\">{title}</h2>\n\t\t\t\t<div class=\"flex items-center gap-2\">\n\t\t\t\t\t{#if wsUrl}\n\t\t\t\t\t\t<span class=\"text-xs {isConnected ? 'text-green-500' : 'text-yellow-500'}\">\n\t\t\t\t\t\t\t{isConnected ? 'Connected' : 'Connecting...'}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t{/if}\n\t\t\t\t\t<button onclick={refreshFeed} class=\"text-sm text-blue-500 hover:text-blue-600\">\n\t\t\t\t\t\tRefresh\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<NewsFeed {newsItems} {maxVisibleItems} {className} {locked} {maxItemsPerFeed} />\n\t\t{/if}\n\t</div>\n{/if}\n","<!-- File: src/lib/components/ScrollIndicator.svelte -->\n<script lang=\"ts\">\n\timport { onMount, onDestroy } from 'svelte';\n\timport { fade, fly } from 'svelte/transition';\n\timport ChevronDownIcon from './icons/ChevronDownIcon.svelte';\n\timport ChevronUpIcon from './icons/ChevronUpIcon.svelte';\n\timport { cn } from '$lib/utils';\n\n\tinterface Props {\n\t\tchildren?: import('svelte').Snippet;\n\t}\n\n\tlet { children }: Props = $props();\n\n\tlet show = $state(false);\n\tlet isAtBottom = $state(false);\n\tlet container = $state<HTMLElement | null>(null);\n\tlet button = $state<HTMLElement | null>(null);\n\n\tfunction handleScroll() {\n\t\tif (!container) return;\n\n\t\tconst { scrollTop, scrollHeight, clientHeight } = container;\n\t\tconst scrollBottom = scrollHeight - scrollTop - clientHeight;\n\n\t\t// Show button if not at bottom and scrolled down at least 75px\n\t\tshow = scrollTop > 75;\n\n\t\t// Check if we're at the bottom (within 10px threshold)\n\t\tisAtBottom = scrollBottom < 10;\n\t}\n\n\tfunction scrollToPosition() {\n\t\tif (!container) return;\n\n\t\tconst targetPosition = isAtBottom ? 0 : container.scrollHeight;\n\t\tcontainer.scrollTo({\n\t\t\ttop: targetPosition,\n\t\t\tbehavior: 'smooth'\n\t\t});\n\t}\n\n\tonMount(() => {\n\t\tif (container) {\n\t\t\tcontainer.addEventListener('scroll', handleScroll);\n\t\t\t// Initial check\n\t\t\thandleScroll();\n\t\t}\n\t});\n\n\tonDestroy(() => {\n\t\tif (container) {\n\t\t\tcontainer.removeEventListener('scroll', handleScroll);\n\t\t}\n\t});\n</script>\n\n<div bind:this={container} class=\"relative h-full overflow-y-auto overflow-x-hidden\">\n\t<div class=\"w-full\">\n\t\t{@render children?.()}\n\t</div>\n\n\t{#if show}\n\t\t<button\n\t\t\tbind:this={button}\n\t\t\tclass={cn(\n\t\t\t\t'fixed bottom-4 right-4 z-50',\n\t\t\t\t'w-10 h-10 rounded-full',\n\t\t\t\t'bg-blue-500 dark:bg-blue-600',\n\t\t\t\t'shadow-lg hover:shadow-xl',\n\t\t\t\t'flex items-center justify-center',\n\t\t\t\t'transition-all duration-300',\n\t\t\t\t'hover:scale-110 active:scale-95',\n\t\t\t\t'hover:bg-blue-600 dark:hover:bg-blue-700',\n\t\t\t\t'focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2 dark:focus:ring-offset-zinc-900'\n\t\t\t)}\n\t\t\tonclick={scrollToPosition}\n\t\t\taria-label={isAtBottom ? 'Scroll to top' : 'Scroll to bottom'}\n\t\t\ttransition:fly={{ y: 20, duration: 300 }}\n\t\t>\n\t\t\t{#if isAtBottom}\n\t\t\t\t<ChevronUpIcon className=\"w-5 h-5 text-white\" />\n\t\t\t{:else}\n\t\t\t\t<ChevronDownIcon className=\"w-5 h-5 text-white\" />\n\t\t\t{/if}\n\t\t</button>\n\t{/if}\n</div>\n\n<style>\n\t/* Hide scrollbar but keep functionality */\n\tdiv::-webkit-scrollbar {\n\t\twidth: 0px;\n\t\tbackground: transparent;\n\t}\n</style>\n","<!-- File: src/routes/sidepanel/+page.svelte -->\n<script lang=\"ts\">\n\timport TokenComponentList from '$lib/components/TokenComponentList.svelte';\n\timport RotatingBanner from '$lib/components/RotatingBanner.svelte';\n\timport SectionCard from '$lib/components/SectionCard.svelte';\n\timport { browser_ext, browserSvelte } from '$lib/common/environment';\n\timport WalletIcon from '$lib/components/icons/WalletIcon.svelte';\n\timport TokenIcon from '$lib/components/icons/TokenIcon.svelte';\n\timport NewsIcon from '$lib/components/icons/NewsIcon.svelte';\n\timport ToolIcon from '$lib/components/icons/ToolIcon.svelte';\n\timport { onDestroy, onMount } from 'svelte';\n\timport {\n\t\tgetSettings,\n\t\tsetYakklCombinedTokenStorage,\n\t\tupdateCombinedTokenStore,\n\t\tyakklCombinedTokenStore\n\t} from '$lib/common/stores';\n\timport { loadDefaultTokens } from '$lib/managers/tokens/loadDefaultTokens';\n\timport { get } from 'svelte/store';\n\timport ExtensionRSSNewsFeed from '$lib/components/ExtensionRSSNewsFeed.svelte';\n\timport CalcIcon from '$lib/components/icons/CalcIcon.svelte';\n\t// import FiatIcon from '$lib/components/icons/FiatIcon.svelte';\n\timport EthUnitConverter from '$lib/components/EthUnitConverter.svelte';\n\t// import TokenFiatConverter from '$lib/components/TokenFiatConverter.svelte';\n\timport { log } from '$lib/common/logger-wrapper';\n\timport { setBadgeText } from '$lib/utilities/utilities';\n\timport Copyright from '$lib/components/Copyright.svelte';\n\timport BookmarkedArticles from '$lib/components/BookmarkedArticles.svelte';\n\t// import LockedSectionCard from '$lib/components/LockedSectionCard.svelte';\n\timport { isProLevel } from '$lib/common/utils';\n\timport Upgrade from '$lib/components/Upgrade.svelte';\n\timport GenericFooter from '$lib/components/GenericFooter.svelte';\n\timport UpgradeFooter from '$lib/components/UpgradeFooter.svelte';\n\timport Placeholder from '$lib/components/Placeholder.svelte';\n\timport DynamicRSSNewsFeed from '$lib/components/DynamicRSSNewsFeed.svelte';\n\timport PlanBadge from '$lib/components/PlanBadge.svelte';\n\timport Sponsorship, { type Sponsor } from '$lib/components/Sponsorship.svelte';\n\timport SponsorIcon from '$lib/components/icons/SponsorIcon.svelte';\n\timport ScrollIndicator from '$lib/components/ScrollIndicator.svelte';\n\timport SimpleTooltip from '$lib/components/SimpleTooltip.svelte';\n\timport { goto } from '$app/navigation';\n\n\tlet showUpgradeModal = $state(false);\n\tlet showEthConverter = $state(false);\n\tlet showTokenFiatConverter = $state(false);\n\tlet init = $state(false);\n\tlet locked = $state(true);\n\tlet foundingUser = $state(false);\n\tlet tokensLockedCount = $state(0); // Show all tokens for both Basic and Pro\n\tlet newsfeedsLockedCount = $state(6);\n\tlet maxVisibleTokens = $state(0); // Show all tokens initially\n\tlet showBanner = $state(true);\n\tlet showNewsfeeds = $state(false);\n\tlet showDynamicNewsfeeds = $state(false);\n\n\tlet storageListener: {\n\t\t(changes: any, areaName: any): void;\n\t\t(changes: { [key: string]: chrome.storage.StorageChange }, areaName: string): void;\n\t};\n\n\t// List of crypto news RSS feeds\n\tconst cryptoFeeds = [\n\t\t'https://cointelegraph.com/rss/?utm_source=yakkl&utm_medium=extension',\n\t\t'https://www.coindesk.com/arc/outboundfeeds/rss/?utm_source=yakkl&utm_medium=extension',\n\t\t'https://cryptonews.com/news/feed/?utm_source=yakkl&utm_medium=extension'\n\t];\n\n\t// WebSocket URL for dynamic feed\n\tconst wsFeedUrl = 'wss://your-websocket-server.com/feed';\n\n\tfunction openWallet() {\n\t\tif (browserSvelte) {\n\t\t\tbrowser_ext.runtime.sendMessage({ type: 'popout' });\n\t\t}\n\t}\n\n\t// DO NOT REMOVE THESE BANNER ITEMS NOR COMMENTS\n\tconst bannerItems = [\n\t\t{\n\t\t\ttype: 'banner' as const,\n\t\t\ttitle: 'Welcome to YAKKL',\n\t\t\tmessage: 'Your secure crypto wallet'\n\t\t\t// ctaText: 'UPGRADE',\n\t\t\t// onCallToAction: (index: number) => {\n\t\t\t//   console.log('Upgrade clicked for item at index:', index);\n\t\t\t// }\n\t\t}\n\t\t// #region example of an ad\n\t\t// {\n\t\t//   type: 'ad' as const,\n\t\t//   useGoogleAd: false,\n\t\t//   customContent: (index: number) => `\n\t\t//     <div class=\"card w-full glass\">\n\t\t//       <figure class=\"mt-1\"><img src=\"/images/logoBull32x32.png\" alt=\"token\"/></figure>\n\t\t//       <div class=\"card-body\">\n\t\t//         <h2 class=\"card-title\">PROMOTION</h2>\n\t\t//         <p>Upgrade to Pro plan and never see an AD again!</p>\n\t\t//         <div class=\"card-actions justify-end\">\n\t\t//           <button\n\t\t//             class=\"btn btn-primary yakkl-upgrade-btn\"\n\t\t//             data-index=\"${index}\"\n\t\t//           >\n\t\t//             UPGRADE\n\t\t//           </button>\n\t\t//         </div>\n\t\t//       </div>\n\t\t//     </div>\n\t\t//   `,\n\t\t//   onCallToAction: (index: number) => {\n\t\t//     console.log('Ad upgrade clicked for item at index:', index);\n\t\t//     // Handle ad upgrade\n\t\t//   }\n\t\t// }\n\t\t// #endregion\n\t];\n\n\tconst content = `\n    <div class=\"w-full h-full flex flex-col rounded-2xl overflow-hidden bg-white shadow-md hover:shadow-lg transition-shadow duration-300\">\n    <!-- Image Section -->\n    <div class=\"flex-grow aspect-[1/1] relative\">\n      <img\n        src=\"/images/sponsors/logoCryptoGrampsTrimmed.png\"\n        alt=\"CryptoGramps Sponsorship Ad\"\n        class=\"w-full h-full object-contain p-4\"\n      />\n    </div>\n\n    <!-- Content Section -->\n    <div class=\"p-4 text-center flex flex-col justify-center\">\n      <h3 class=\"text-base md:text-lg font-semibold text-gray-800 mb-1\">Sponsored by CryptoGramps</h3>\n      <p class=\"text-sm md:text-base text-gray-600 mb-2\">Bridging AI & Blockchain wisdom.</p>\n      <a\n        href=\"https://CryptoGramps.ai\"\n        class=\"inline-block px-4 py-2 bg-blue-600 text-white text-sm md:text-base rounded-lg hover:bg-blue-700 transition\"\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >\n        CryptoGramps.ai\n      </a>\n    </div>\n    </div>\n  `;\n\n\t// Example of how to handle onCallToAction in a single function\n\t// Define a single handler function\n\t// function handleCallToAction(index: number) {\n\t//   console.log('Upgrade clicked for item at index:', index);\n\t//   // Handle all upgrade actions in one place\n\t//   // You can use the index to determine which item was clicked\n\t//   // and take appropriate action\n\t// }\n\n\t// const bannerItems = [\n\t//   {\n\t//     type: 'banner' as const,\n\t//     title: 'Welcome to YAKKL',\n\t//     message: 'Your secure crypto wallet',\n\t//     ctaText: 'UPGRADE',\n\t//     onCallToAction: handleCallToAction  // Reference the same function\n\t//   },\n\t//   {\n\t//     type: 'ad' as const,\n\t//     useGoogleAd: false,\n\t//     customContent: (index: number) => `...`,\n\t//     onCallToAction: handleCallToAction  // Reference the same function\n\t//   }\n\t// ];\n\n\t// Add event listener for the custom event. This method passes the CSP test.\n\t// if (browserSvelte) {\n\t//   document.addEventListener('click', (event) => {\n\t//     const target = event.target as HTMLElement;\n\t//     if (target.classList.contains('yakkl-upgrade-btn')) {\n\t//       const index = parseInt(target.getAttribute('data-index') || '0', 10);\n\t//       console.log('Upgrade button clicked with index:', index);\n\t//       if (bannerItems[index]?.onCallToAction) {\n\t//         bannerItems[index].onCallToAction(index);\n\t//       }\n\t//     }\n\t//   });\n\t// }\n\n\t// This is for the sponsors section that lives in the sidepanel and not the banner which is above.\n\tconst sponsors = [\n\t\t{\n\t\t\tid: 'cryptogramps',\n\t\t\tname: 'Cryptogramps.ai',\n\t\t\turl: 'https://cryptogramps.ai',\n\t\t\tcontent: content, //'<img src=\"/images/sponsors/logoCryptoGrampsTrimmed.png\" alt=\"cryptogramps.ai\" class=\"w-full h-auto aspect-1/1\" />',\n\t\t\tweight: 1,\n\t\t\tduration: 5000,\n\t\t\tcategory: 'premium'\n\t\t}\n\t\t// Add more sponsors...\n\t];\n\n\tfunction handleSponsorClick(sponsor: Sponsor) {\n\t\tconsole.log('Sponsor clicked:', sponsor.name);\n\t}\n\n\tfunction handleSponsorImpression(sponsor: Sponsor) {\n\t\tconsole.log('Sponsor impression:', sponsor.name);\n\t}\n\n\tonMount(async () => {\n\t\ttry {\n\t\t\tif (!browserSvelte) return;\n\n\t\t\tconst settings = await getSettings();\n\t\t\tif (!settings.init || !settings.legal.termsAgreed) {\n\t\t\t\tinit = false;\n\t\t\t\tdocument.documentElement.classList.remove('dark');\n\t\t\t\tlocalStorage.theme = 'light';\n\t\t\t\tawait setBadgeText('');\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tinit = true;\n\t\t\t\tlocked = (await isProLevel()) ? false : true;\n\t\t\t\ttokensLockedCount = 0; // Show all tokens for both Basic and Pro\n\t\t\t\tnewsfeedsLockedCount = (await isProLevel()) ? 10 : 4;\n\t\t\t}\n\n\t\t\t// Always load default tokens regardless of init state\n\t\t\tawait loadDefaultTokens();\n\t\t\tupdateCombinedTokenStore();\n\t\t\tawait setYakklCombinedTokenStorage(get(yakklCombinedTokenStore));\n\t\t} catch (error) {\n\t\t\tlog.warn('Error initializing sidepanel:', false, error);\n\t\t}\n\t});\n\n\tonDestroy(() => {\n\t\tif (!browserSvelte) return;\n\n\t\t// Clean up listener\n\t\tif (storageListener) {\n\t\t\tbrowser_ext.storage.onChanged.removeListener(storageListener);\n\t\t}\n\t});\n\n\tfunction onComplete() {\n\t\tshowUpgradeModal = true;\n\t}\n\n\tfunction handleUpgradeComplete() {\n\t\tshowUpgradeModal = false;\n\t\t// Refresh any necessary data\n\t}\n\n\tfunction handleUpgradeClose() {\n\t\tshowUpgradeModal = false;\n\t\t// Handle any cleanup\n\t}\n</script>\n\n<Upgrade\n\tbind:show={showUpgradeModal}\n\t{openWallet}\n\tonComplete={handleUpgradeComplete}\n\tonClose={handleUpgradeClose}\n\tonCancel={() => (showUpgradeModal = false)}\n/>\n\n<div class=\"flex flex-col h-screen bg-white dark:bg-zinc-900 text-zinc-800 dark:text-zinc-100\">\n\t<header\n\t\tclass=\"px-4 py-3 border-b border-zinc-200 dark:border-zinc-700 flex justify-between items-center\"\n\t>\n\t\t<h1 class=\"text-lg font-bold\">YAKKL Insights</h1>\n\t\t<!-- Preview2 Integration -->\n    <div class=\"flex items-center gap-2\">\n\t\t\t<SimpleTooltip content=\"Try the new wallet experience\" position=\"bottom\">\n\t\t\t\t<button\n\t\t\t\t\tonclick={() => goto('/preview2')}\n\t\t\t\t\tclass=\"flex items-center gap-2 bg-gradient-to-r from-purple-500 to-indigo-600 text-white px-3 py-2 rounded-lg shadow-md hover:from-purple-600 hover:to-indigo-700 transition-all text-sm group\"\n\t\t\t\t>\n\t\t\t\t\t<svg class=\"w-4 h-4 group-hover:scale-110 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\n\t\t\t\t\t</svg>\n\t\t\t\t\tPreview 2.0\n\t\t\t\t</button>\n\t\t\t</SimpleTooltip>\n\n\t\t\t<SimpleTooltip content=\"Click here to unlock your wallet\" position=\"bottom\">\n\t\t\t\t<button\n\t\t\t\t\tonclick={openWallet}\n\t\t\t\t\tclass=\"flex items-center gap-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white px-4 py-2 rounded-xl shadow-md hover:from-green-600 hover:to-emerald-700 transition-all {!init\n\t\t\t\t\t\t? 'animate-pulse'\n\t\t\t\t\t\t: ''}\"\n\t\t\t\t>\n\t\t\t\t\t<WalletIcon className=\"w-5 h-5\" />\n\t\t\t\t\tOpen Smart Wallet\n\t\t\t\t</button>\n\t\t\t</SimpleTooltip>\n\t\t</div>\n\t\t{#if !init}\n\t\t\t<span class=\"absolute top-1 right-1 block h-2 w-2 rounded-full bg-red-500 animate-ping\"\n\t\t\t></span>\n\t\t{/if}\n\t</header>\n\n\t<RotatingBanner\n\t\tbind:show={showBanner}\n\t\titems={bannerItems}\n\t\tautoRotate={false}\n\t\tshowControls={false}\n\t/>\n\n\t<div class=\"flex justify-end px-4 py-2\">\n\t\t<PlanBadge />\n\t</div>\n\n\t<ScrollIndicator>\n\t\t<main class=\"flex-1 overflow-y-auto px-4 pb-4\">\n\t\t\t<!-- Grid container for cards -->\n\t\t\t<div class=\"grid grid-cols-1 md:grid-cols-3 gap-4 pb-4 pt-0\">\n\t\t\t\t<!-- <SectionCard title=\"Sponsors\" icon={SponsorIcon}>\n          <Sponsorship\n            {sponsors}\n            onSponsorClick={handleSponsorClick}\n            onSponsorImpression={handleSponsorImpression}\n            className=\"min-h-[200px]\"\n          />\n        </SectionCard> -->\n\n\t\t\t\t<!-- Token Prices Card -->\n\t\t\t\t<!-- eye={false} for now but if we want to show the balances, we can set it to true -->\n\t\t\t\t<SectionCard\n\t\t\t\t\ttitle=\"Token Prices\"\n\t\t\t\t\ticon={TokenIcon}\n\t\t\t\t\tisPinned={false}\n\t\t\t\t\teye={false}\n\t\t\t\t\teyeTooltip=\"Toggle visibility of balances\"\n\t\t\t\t\tminHeight=\"300px\"\n\t\t\t\t\tmaxHeight=\"750px\"\n\t\t\t\t\t{locked}\n\t\t\t\t\tlockedFooter={GenericFooter}\n\t\t\t\t\tlockedFooterProps={{\n\t\t\t\t\t\ttext: 'Unlock visibility of all tokens by',\n\t\t\t\t\t\tbuttonText: 'Upgrading today!',\n\t\t\t\t\t\tonAction: () => (showUpgradeModal = true),\n\t\t\t\t\t\tvariant: 'info'\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<TokenComponentList {maxVisibleTokens} maxTokens={tokensLockedCount} {locked} />\n\t\t\t\t</SectionCard>\n\n\t\t\t\t<!-- Newsfeeds Card -->\n\t\t\t\t<SectionCard\n\t\t\t\t\ttitle=\"Newsfeeds\"\n\t\t\t\t\ticon={NewsIcon}\n\t\t\t\t\tminHeight=\"350px\"\n\t\t\t\t\tmaxHeight=\"1000px\"\n\t\t\t\t\tlocked={false}\n\t\t\t\t\tlockedFooter={UpgradeFooter}\n\t\t\t\t\tlockedFooterProps={{\n\t\t\t\t\t\tonUpgrade: () => (showUpgradeModal = true),\n\t\t\t\t\t\ttext: 'Unlock visibility of all newsfeeds with faster refresh times by',\n\t\t\t\t\t\tbuttonText: 'Upgrade Now'\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<!-- Use DynamicRSSNewsFeed for WebSocket feed -->\n\t\t\t\t\t{#if showDynamicNewsfeeds}\n\t\t\t\t\t\t<DynamicRSSNewsFeed\n\t\t\t\t\t\t\tbind:show={showDynamicNewsfeeds}\n\t\t\t\t\t\t\twsUrl={wsFeedUrl}\n\t\t\t\t\t\t\ttitle=\"Live Crypto News\"\n\t\t\t\t\t\t\tmaxVisibleItems={newsfeedsLockedCount}\n\t\t\t\t\t\t\tmaxItemsPerFeed={newsfeedsLockedCount}\n\t\t\t\t\t\t\tclassName=\"bg-white dark:bg-gray-900 rounded-lg shadow-md\"\n\t\t\t\t\t\t\t{locked}\n\t\t\t\t\t\t/>\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<!-- Fallback to regular RSS feed if WebSocket is not available -->\n\t\t\t\t\t\t<ExtensionRSSNewsFeed\n\t\t\t\t\t\t\tfeedUrls={cryptoFeeds}\n\t\t\t\t\t\t\tmaxVisibleItems={newsfeedsLockedCount}\n\t\t\t\t\t\t\tmaxItemsPerFeed={newsfeedsLockedCount}\n\t\t\t\t\t\t\tclassName=\"bg-white dark:bg-gray-900 rounded-lg shadow-md\"\n\t\t\t\t\t\t\tlocked={false}\n\t\t\t\t\t\t/>\n\t\t\t\t\t{/if}\n\t\t\t\t</SectionCard>\n\n\t\t\t\t<!-- Bookmarked Articles Card -->\n\t\t\t\t<!-- Example of how to use the GenericFooter component\n          footer={GenericFooter}\n          footerProps={{\n            text: 'Manage your bookmarked articles',\n            buttonText: 'View All',\n            onAction: () => console.log('View all bookmarks'),\n            variant: 'info'\n          }}\n        -->\n\t\t\t\t<BookmarkedArticles\n\t\t\t\t\t{onComplete}\n\t\t\t\t\tshow={true}\n\t\t\t\t\t{locked}\n\t\t\t\t\tlockedFooter={UpgradeFooter}\n\t\t\t\t\tlockedFooterProps={{\n\t\t\t\t\t\tonUpgrade: () => (showUpgradeModal = true),\n\t\t\t\t\t\ttext: 'Unlock bookmarking features by',\n\t\t\t\t\t\tbuttonText: 'Upgrading today!'\n\t\t\t\t\t}}\n\t\t\t\t/>\n\n\t\t\t\t<!-- Utilities Card -->\n\t\t\t\t<SectionCard title=\"Utilities\" icon={ToolIcon} minHeight=\"250px\" maxHeight=\"800px\">\n\t\t\t\t\t<!-- Grid container -->\n\t\t\t\t\t<div class=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 p-2 mt-2\">\n\t\t\t\t\t\t<!-- Icon button 1 -->\n\t\t\t\t\t\t<SimpleTooltip content=\"ETH Unit Converter\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"p-2 rounded hover:bg-gray-100 dark:hover:bg-zinc-800 transition\"\n\t\t\t\t\t\t\t\taria-label=\"Open Conversion Calculator\"\n\t\t\t\t\t\t\t\tonclick={() => (showEthConverter = true)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<CalcIcon className=\"w-7 h-7\" />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</SimpleTooltip>\n\t\t\t\t\t\t<EthUnitConverter bind:show={showEthConverter} />\n\n\t\t\t\t\t\t<!-- Icon button 2 -->\n\n\t\t\t\t\t\t<!-- <SimpleTooltip content=\"Token Fiat Converter\">\n              <button\n                class=\"p-2 rounded hover:bg-gray-100 dark:hover:bg-zinc-800 transition\"\n                aria-label=\"Open Token Fiat Converter\"\n                onclick={() => showTokenFiatConverter = true}\n              >\n                <FiatIcon className=\"w-7 h-7\" />\n              </button>\n            </SimpleTooltip>\n            <TokenFiatConverter\n              bind:show={showTokenFiatConverter}\n            /> -->\n\t\t\t\t\t</div>\n\t\t\t\t</SectionCard>\n\n\t\t\t\t<!-- Chart Section (for expanded view) -->\n\t\t\t\t<div class=\"hidden md:block mt-4\">\n\t\t\t\t\t<SectionCard\n\t\t\t\t\t\ttitle=\"Market Overview\"\n\t\t\t\t\t\tminHeight=\"300px\"\n\t\t\t\t\t\tmaxHeight=\"600px\"\n\t\t\t\t\t\t{locked}\n\t\t\t\t\t\tlockedFooter={GenericFooter}\n\t\t\t\t\t\tlockedFooterProps={{\n\t\t\t\t\t\t\ttext: 'Unlock visibility of the market overview by',\n\t\t\t\t\t\t\tbuttonText: 'Upgrading today!',\n\t\t\t\t\t\t\tonAction: () => (showUpgradeModal = true),\n\t\t\t\t\t\t\tvariant: 'info'\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<!-- Chart component will go here -->\n\t\t\t\t\t\t<!-- Could use !border-none to remove all borders if desired or use showBorderTop={false}-->\n\t\t\t\t\t\t<Placeholder\n\t\t\t\t\t\t\ttext=\"Chart coming soon...\"\n\t\t\t\t\t\t\tclassName=\"flex items-center justify-center text-zinc-500 !border-t-0\"\n\t\t\t\t\t\t\tanchorTop={true}\n\t\t\t\t\t\t\tcenterHorizontal={true}\n\t\t\t\t\t\t\tcenterVertical={true}\n\t\t\t\t\t\t\tshowBorderTop={false}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<!-- <div class=\"h-[300px] flex items-center justify-center text-zinc-500\">\n              Chart coming soon...\n            </div> -->\n\t\t\t\t\t</SectionCard>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</main>\n\t</ScrollIndicator>\n\n\t<!-- Responsive message for narrow viewports -->\n\t<Placeholder\n\t\ttext=\"👈 💡 Drag the edge of this panel to make it wider and discover more features!\"\n\t\tclassName=\"md:hidden\"\n\t/>\n\n\t<footer\n\t\tclass=\"px-4 py-2 border-t border-zinc-200 dark:border-zinc-700 text-xs text-center font-bold flex flex-col items-center justify-center gap-2\"\n\t>\n\t\t<span class=\"text-zinc-500 mb-4\">Smart Wallet Insights</span>\n\t\t<Copyright />\n\t</footer>\n</div>\n"],"file":"app/immutable/nodes/26.BgK6y6wA.js"}