import{p as push,h as copy_payload,i as assign_payload,k as bind_props,c as pop,l as prevent_snippet_stringification,a as push_element,b as pop_element,e as escape_html,g as stringify,s as store_get,m as attr,u as unsubscribe_stores}from"./index2.js";import{c as createForm}from"./create-form.js";import*as yup from"yup";import{M as Modal}from"./Modal2.js";import{L as Login}from"./Login.js";import{R as RegistrationPrompt}from"./RegistrationPrompt.js";import{o as getProfile,d as getSettings,i as isEncryptedData,j as decryptData,w as dateString,M as PromoClassificationType,A as AccessSourceType,P as PlanType,R as encryptData,U as setProfileStorage,Z as setSettingsStorage,aL as FOUNDING_MEMBER_DEADLINE,aM as EARLY_ADOPTER_DEADLINES,f as getContextTypeStore,k as yakklMiscStore}from"./encryption.js";import{l as log}from"./Logger.js";import{E as ErrorNoAction}from"./ErrorNoAction.js";import{C as Confirmation}from"./Confirmation.js";import{s as safeLogout}from"./safeNavigate.js";import{F as FILENAME}from"./utils.js";import{c as canUpgrade}from"./utils2.js";import"./environment.js";import{i as isAuthenticated}from"./auth-store.js";import{a as AuthError,A as AuthLoading}from"./AuthLoading.js";import{c as closeModal}from"./modal.js";Notification[FILENAME]="src/lib/components/Notification.svelte";function Notification($$payload,$$props){push(Notification);let{show:show=false,title:title="Notification",message:message="",onClose:onClose=()=>safeLogout()}=$$props;let $$settled=true;let $$inner_payload;function $$render_inner($$payload2){Modal($$payload2,{title:title,get show(){return show},set show($$value){show=$$value;$$settled=false},children:prevent_snippet_stringification($$payload3=>{$$payload3.out+=`<div class="p-6">`;push_element($$payload3,"div",18,1);$$payload3.out+=`<div class="flex items-center mb-4">`;push_element($$payload3,"div",19,2);$$payload3.out+=`<div class="flex-shrink-0">`;push_element($$payload3,"div",20,3);$$payload3.out+=`<svg class="w-6 h-6 text-gray-400" aria-hidden="true" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">`;push_element($$payload3,"svg",21,4);$$payload3.out+=`<path d="M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z">`;push_element($$payload3,"path",28,5);$$payload3.out+=`</path>`;pop_element();$$payload3.out+=`</svg>`;pop_element();$$payload3.out+=`</div>`;pop_element();$$payload3.out+=` <div class="ml-3">`;push_element($$payload3,"div",33,3);$$payload3.out+=`<p class="text-sm text-gray-500">`;push_element($$payload3,"p",34,4);$$payload3.out+=`${escape_html(message)}</p>`;pop_element();$$payload3.out+=`</div>`;pop_element();$$payload3.out+=`</div>`;pop_element();$$payload3.out+=` <div class="mt-4 flex justify-end">`;push_element($$payload3,"div",37,2);$$payload3.out+=`<button type="button" class="rounded-md border border-gray-300 bg-white py-2 px-4 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">`;push_element($$payload3,"button",38,3);$$payload3.out+=`Close</button>`;pop_element();$$payload3.out+=`</div>`;pop_element();$$payload3.out+=`</div>`;pop_element()}),$$slots:{default:true}})}do{$$settled=true;$$inner_payload=copy_payload($$payload);$$render_inner($$inner_payload)}while(!$$settled);assign_payload($$payload,$$inner_payload);bind_props($$props,{show:show});pop()}Notification.render=function(){throw new Error("Component.render(...) is no longer valid in Svelte 5. See https://svelte.dev/docs/svelte/v5-migration-guide#Components-are-no-longer-classes for more information")};class UpgradeManager{static instance;messagePort=null;upgradeTimeout=3e4;maxRetries=3;currentUpgradeId=null;messageHandlers=new Map;constructor(){this.initializeMessagePort()}static getInstance(){if(!UpgradeManager.instance){UpgradeManager.instance=new UpgradeManager}return UpgradeManager.instance}initializeMessagePort(){}async processUpgrade(request){try{this.currentUpgradeId=`upgrade-${Date.now()}`;this.sendMessage({type:"UPGRADE_STARTED"});const profile=await getProfile();const settings=await getSettings();if(!profile||!settings){throw new Error("Profile or settings not found")}this.sendMessage({type:"UPGRADE_PROGRESS",progress:25,status:"Preparing upgrade data..."});const response=await this.makeApiCall(request);if(!response.success){throw new Error(response.error||"Upgrade failed")}this.sendMessage({type:"UPGRADE_PROGRESS",progress:75,status:"Updating local data..."});if(isEncryptedData(profile.data)){const decryptedData=await decryptData(profile.data,request.encryptionKey);decryptedData.registered={...decryptedData.registered,plan:{type:PlanType.YAKKL_PRO,source:AccessSourceType.SUBSCRIBED,promo:PromoClassificationType.NONE,trialEndDate:"",upgradeDate:""},key:response.customerId||`PRO-${dateString()}`,updateDate:dateString()};profile.data=await encryptData(decryptedData,request.encryptionKey)}settings.plan={type:PlanType.YAKKL_PRO,source:AccessSourceType.SUBSCRIBED,promo:PromoClassificationType.NONE,trialEndDate:"",upgradeDate:""};settings.upgradeDate=dateString();settings.updateDate=dateString();await setProfileStorage(profile);await setSettingsStorage(settings);this.sendMessage({type:"UPGRADE_COMPLETED",data:{success:true,customerId:response.customerId,upgradeDate:dateString()}})}catch(error){log.error("Error in upgrade process:",false,error);this.sendMessage({type:"UPGRADE_ERROR",error:error instanceof Error?error.message:"An error occurred during upgrade"})}}async makeApiCall(request){let retries=0;while(retries<this.maxRetries){try{const controller=new AbortController;const timeoutId=setTimeout(()=>controller.abort(),this.upgradeTimeout);const response=await fetch("https://api.yakkl.com/wallet/upgrade",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(request),signal:controller.signal});clearTimeout(timeoutId);if(!response.ok){throw new Error(`HTTP error! status: ${response.status}`)}const data=await response.json();return{success:true,customerId:data.customerId,upgradeDate:data.upgradeDate}}catch(error){retries++;if(retries===this.maxRetries){throw error}await new Promise(resolve=>setTimeout(resolve,Math.pow(2,retries)*1e3))}}throw new Error("Max retries exceeded")}sendMessage(message){this.messageHandlers.forEach(handler=>handler(message))}registerMessageHandler(handler){const id=Math.random().toString(36).substr(2,9);this.messageHandlers.set(id,handler);return()=>this.messageHandlers.delete(id)}cancelUpgrade(){if(this.currentUpgradeId){this.sendMessage({type:"CANCEL_UPGRADE"});this.currentUpgradeId=null}}}function getAvailableMemberUpgradePlanLevel(now=new Date){try{if(now<new Date(FOUNDING_MEMBER_DEADLINE)){return"founding_member"}for(const offer of EARLY_ADOPTER_DEADLINES){if(now<new Date(offer.date)){return"early_adopter"}}return"yakkl_pro"}catch(error){log.warn("Error determining available member upgrade plan level:",false,error);return"yakkl_pro"}}async function checkRegistrationStatus(){try{const settings=await getSettings();const hasAgreedToTerms=settings?.legal?.termsAgreed??false;const isInitialized=settings?.init??false;let requiresAction=null;if(!hasAgreedToTerms){requiresAction="terms"}else if(!isInitialized){requiresAction="register"}else{requiresAction="login"}return{isRegistered:hasAgreedToTerms&&isInitialized,hasAgreedToTerms:hasAgreedToTerms,isInitialized:isInitialized,requiresAction:requiresAction}}catch(error){console.error("Error checking registration status:",error);return{isRegistered:false,hasAgreedToTerms:false,isInitialized:false,requiresAction:"terms"}}}function isUserLoggedIn(miscStore){return!!miscStore&&miscStore.length>0}Upgrade[FILENAME]="src/lib/components/Upgrade.svelte";function Upgrade($$payload,$$props){push(Upgrade);var $$store_subs;let{show:show=false,onComplete:onComplete=()=>{},onClose:onClose=()=>{safeLogout()},onCancel:onCancel=()=>{show=false,showConfirmation=false,showNotification=false,showError=false},openWallet:openWallet,useAuthStore:useAuthStore=false}=$$props;const contextType=getContextTypeStore();const isSidepanel=contextType==="sidepanel"||(contextType?.includes?.("sidepanel")??false);let showError=false;let errorMessage="";let isUpgrading=false;let isProUser=false;let showConfirmation=false;let showNotification=false;let showRegistrationPrompt=false;let showLoginModal=false;let isInitializing=false;let retryCount=0;const maxRetries=3;let formValues={userName:"",password:"",email:""};let isLoggedIn=false;let registrationStatus=null;let planLevelAvailable=getAvailableMemberUpgradePlanLevel()?.toString()?.toUpperCase()?.replace("_"," ")??"YAKKL PRO";const upgradeManager=UpgradeManager.getInstance();function handleSidepanelClose(){show=false;closeModal();if(!isSidepanel){onClose()}}function handleSidepanelCancel(){show=false;closeModal();showConfirmation=false;showNotification=false;showError=false;if(!isSidepanel){onCancel()}}function handleNotificationClose(){showNotification=false;closeModal();setTimeout(()=>{if(!isSidepanel){onClose()}},50)}async function initializeUpgradeFlow(){try{retryCount=0;registrationStatus=await checkRegistrationStatus();if(!registrationStatus.isRegistered){showRegistrationPrompt=true;return}isLoggedIn=useAuthStore?store_get($$store_subs??={},"$isAuthenticated",isAuthenticated):isUserLoggedIn(store_get($$store_subs??={},"$yakklMiscStore",yakklMiscStore));if(!isLoggedIn){showLoginModal=true;return}await checkProLevelStatus()}catch(error){retryCount++;log.error("Error initializing upgrade flow:",false,error);if(error instanceof Error){errorMessage=`Initialization failed: ${error.message}`}else{errorMessage="Failed to initialize upgrade process"}if(retryCount<maxRetries){errorMessage+=` (Attempt ${retryCount}/${maxRetries})`}showError=true}}async function handleInitRetry(){if(retryCount<maxRetries){showError=false;errorMessage="";isInitializing=true;try{await initializeUpgradeFlow()}finally{isInitializing=false}}}function handleInitDismiss(){showError=false;errorMessage="";retryCount=0;if(isSidepanel){closeModal()}}async function checkProLevelStatus(){try{const upgradeAllowed=await canUpgrade();isProUser=!upgradeAllowed;if(!upgradeAllowed){showError=true}}catch(error){log.error("Error checking upgrade eligibility:",false,error)}}createForm({initialValues:formValues,validationSchema:yup.object().shape({userName:yup.string().required("Member username is required"),password:yup.string().required("Password is required"),email:yup.string().email("Must be a valid email.").required("Email is required.")}),onSubmit:async values=>{formValues=values;showConfirmation=true}});function handleLoginSuccess(profile,digest,_isMinimal,jwtToken){isLoggedIn=true;showLoginModal=false;if(jwtToken){log.debug("JWT token received in upgrade flow",false,{hasToken:true,username:profile.userName})}if(profile){formValues.userName=profile.userName;if(profile.data?.email){if(isEncryptedData(profile.data)){decryptData(profile.data,digest).then(profileData=>{const data=profileData;formValues.email=data.email}).catch(error=>{log.warn("Error decrypting profile data:",false,error);formValues.email=""})}else{formValues.email=profile.data.email}}}checkProLevelStatus()}function handleLoginError(error){errorMessage=typeof error==="string"?error:"Authentication failed";showError=true;if(isSidepanel){setTimeout(()=>{closeModal()},2e3)}}async function processUpgrade(){try{const analyticsData={utm_source:"wallet",utm_campaign:"yakkl_pro_upgrade",user_location:navigator.language,upgrade_date:dateString(),current_version:(await getSettings())?.version??"unknown",platform:navigator?.userAgentData?.platform??navigator?.platform??"unknown",user_agent:navigator?.userAgent??"unknown"};const planLevel=planLevelAvailable?.replace(" ","_ ")?.toLowerCase()??"yakkl_pro";analyticsData.utm_campaign=planLevel.includes("_upgrade")?planLevel:planLevel+"_upgrade";await upgradeManager.processUpgrade({userName:formValues.userName,email:formValues.email,analytics:analyticsData,profileId:(await getSettings())?.id??"",encryptionKey:store_get($$store_subs??={},"$yakklMiscStore",yakklMiscStore)})}catch(error){log.error("Error in upgrade process:",false,error);errorMessage=error instanceof Error?error.message:"An error occurred during upgrade";showError=true}}function onConfirm(){processUpgrade()}function getCurrentContext(){if(typeof window!=="undefined"){const pathIncludes=window.location.pathname.includes("sidepanel");return pathIncludes?"sidepanel":"wallet"}return"wallet"}let $$settled=true;let $$inner_payload;function $$render_inner($$payload2){RegistrationPrompt($$payload2,{context:getCurrentContext(),openWallet:openWallet,onCancel:()=>{showRegistrationPrompt=false;show=false;if(isSidepanel){closeModal()}},get show(){return showRegistrationPrompt},set show($$value){showRegistrationPrompt=$$value;$$settled=false}});$$payload2.out+=`\x3c!----\x3e `;if(showLoginModal){$$payload2.out+="\x3c!--[--\x3e";Modal($$payload2,{title:"Login Required",className:"z-[701] text-base-content",get show(){return showLoginModal},set show($$value){showLoginModal=$$value;$$settled=false},children:prevent_snippet_stringification($$payload3=>{$$payload3.out+=`<div class="p-6">`;push_element($$payload3,"div",350,2);$$payload3.out+=`<p class="text-center mb-4 text-gray-600">`;push_element($$payload3,"p",351,3);$$payload3.out+=`Please login to upgrade your account</p>`;pop_element();$$payload3.out+=` `;Login($$payload3,{onSuccess:handleLoginSuccess,onError:handleLoginError,onCancel:()=>{showLoginModal=false;show=false;if(isSidepanel){closeModal()}},loginButtonText:"Login to Upgrade",cancelButtonText:"Cancel",useAuthStore:useAuthStore,generateJWT:!useAuthStore,inputTextClass:"text-base-content",inputBgClass:"bg-base-100"});$$payload3.out+=`\x3c!----\x3e</div>`;pop_element()}),$$slots:{default:true}})}else{$$payload2.out+="\x3c!--[!--\x3e"}$$payload2.out+=`\x3c!--]--\x3e `;ErrorNoAction($$payload2,{value:`You are already using a ${stringify(planLevelAvailable.toUpperCase())} level plan`,title:"Congratulations!",onClose:isSidepanel?handleSidepanelCancel:onCancel,get show(){return showError},set show($$value){showError=$$value;$$settled=false}});$$payload2.out+=`\x3c!----\x3e `;Confirmation($$payload2,{title:`Upgrading to ${stringify(planLevelAvailable.toUpperCase())}!`,message:`Are you sure you want to upgrade to ${stringify(planLevelAvailable.toUpperCase())}?`,onConfirm:onConfirm,onCancel:isSidepanel?handleSidepanelCancel:onCancel,get show(){return showConfirmation},set show($$value){showConfirmation=$$value;$$settled=false}});$$payload2.out+=`\x3c!----\x3e `;Notification($$payload2,{title:`Upgraded to ${stringify(planLevelAvailable.toUpperCase())}!`,message:`You are now using the ${stringify(planLevelAvailable.toUpperCase())} plan. You can now access all the features of the ${stringify(planLevelAvailable.toUpperCase())} plan.`,onClose:isSidepanel?handleNotificationClose:onClose,get show(){return showNotification},set show($$value){showNotification=$$value;$$settled=false}});$$payload2.out+=`\x3c!----\x3e `;Modal($$payload2,{title:`Upgrade to ${stringify(planLevelAvailable.toUpperCase())}`,onClose:isSidepanel?handleSidepanelClose:onClose,get show(){return show},set show($$value){show=$$value;$$settled=false},children:prevent_snippet_stringification($$payload3=>{$$payload3.out+=`<div class="space-y-6 p-6">`;push_element($$payload3,"div",399,1);$$payload3.out+=`<div class="text-center">`;push_element($$payload3,"div",400,2);$$payload3.out+=`<h3 class="text-lg font-medium text-gray-900">`;push_element($$payload3,"h3",401,3);$$payload3.out+=`YAKKL Smart Wallet - ${escape_html(planLevelAvailable.toUpperCase())}</h3>`;pop_element();$$payload3.out+=` <p class="mt-2 text-sm text-gray-500">`;push_element($$payload3,"p",404,3);$$payload3.out+=`Unlock advanced features and enhanced security for your crypto assets.</p>`;pop_element();$$payload3.out+=`</div>`;pop_element();$$payload3.out+=` `;if(isInitializing){$$payload3.out+="\x3c!--[--\x3e";AuthLoading($$payload3,{message:"Initializing upgrade process...",variant:"spinner",size:"md",className:"py-8"})}else{$$payload3.out+="\x3c!--[!--\x3e";$$payload3.out+=`<div class="bg-gray-50 p-4 rounded-lg">`;push_element($$payload3,"div",444,3);$$payload3.out+=`<h4 class="font-medium text-gray-900">`;push_element($$payload3,"h4",445,4);$$payload3.out+=`Pro Features</h4>`;pop_element();$$payload3.out+=` <ul class="mt-2 space-y-2 text-sm text-gray-600">`;push_element($$payload3,"ul",446,4);$$payload3.out+=`<li class="flex items-center">`;push_element($$payload3,"li",447,5);$$payload3.out+=`<svg class="h-5 w-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">`;push_element($$payload3,"svg",448,6);$$payload3.out+=`<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7">`;push_element($$payload3,"path",454,7);$$payload3.out+=`</path>`;pop_element();$$payload3.out+=`</svg>`;pop_element();$$payload3.out+=` Automatic price updates with full analytics</li>`;pop_element();$$payload3.out+=` <li class="flex items-center">`;push_element($$payload3,"li",463,5);$$payload3.out+=`<svg class="h-5 w-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">`;push_element($$payload3,"svg",464,6);$$payload3.out+=`<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7">`;push_element($$payload3,"path",470,7);$$payload3.out+=`</path>`;pop_element();$$payload3.out+=`</svg>`;pop_element();$$payload3.out+=` Participate in early access to new features and products</li>`;pop_element();$$payload3.out+=` <li class="flex items-center">`;push_element($$payload3,"li",479,5);$$payload3.out+=`<svg class="h-5 w-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">`;push_element($$payload3,"svg",480,6);$$payload3.out+=`<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7">`;push_element($$payload3,"path",486,7);$$payload3.out+=`</path>`;pop_element();$$payload3.out+=`</svg>`;pop_element();$$payload3.out+=` Reduced swap fees for DeFi platforms</li>`;pop_element();$$payload3.out+=` <li class="flex items-center">`;push_element($$payload3,"li",495,5);$$payload3.out+=`<svg class="h-5 w-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">`;push_element($$payload3,"svg",496,6);$$payload3.out+=`<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7">`;push_element($$payload3,"path",502,7);$$payload3.out+=`</path>`;pop_element();$$payload3.out+=`</svg>`;pop_element();$$payload3.out+=` Advanced market analytics and charting</li>`;pop_element();$$payload3.out+=` <li class="flex items-center">`;push_element($$payload3,"li",511,5);$$payload3.out+=`<svg class="h-5 w-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">`;push_element($$payload3,"svg",512,6);$$payload3.out+=`<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7">`;push_element($$payload3,"path",518,7);$$payload3.out+=`</path>`;pop_element();$$payload3.out+=`</svg>`;pop_element();$$payload3.out+=` Full Emergency Kit for wallet recovery</li>`;pop_element();$$payload3.out+=` <li class="flex items-center">`;push_element($$payload3,"li",527,5);$$payload3.out+=`<svg class="h-5 w-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">`;push_element($$payload3,"svg",528,6);$$payload3.out+=`<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7">`;push_element($$payload3,"path",534,7);$$payload3.out+=`</path>`;pop_element();$$payload3.out+=`</svg>`;pop_element();$$payload3.out+=` Unlimited accounts</li>`;pop_element();$$payload3.out+=` <li class="flex items-center">`;push_element($$payload3,"li",543,5);$$payload3.out+=`<svg class="h-5 w-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">`;push_element($$payload3,"svg",544,6);$$payload3.out+=`<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7">`;push_element($$payload3,"path",550,7);$$payload3.out+=`</path>`;pop_element();$$payload3.out+=`</svg>`;pop_element();$$payload3.out+=` Advanced security features and more...</li>`;pop_element();$$payload3.out+=`</ul>`;pop_element();$$payload3.out+=`</div>`;pop_element();$$payload3.out+=` `;if(!isLoggedIn&&!showLoginModal&&!showRegistrationPrompt){$$payload3.out+="\x3c!--[--\x3e";$$payload3.out+=`<div class="text-center py-8">`;push_element($$payload3,"div",563,4);$$payload3.out+=`<p class="text-gray-600 mb-4">`;push_element($$payload3,"p",564,5);$$payload3.out+=`Please login to upgrade your account</p>`;pop_element();$$payload3.out+=` <button class="px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors">`;push_element($$payload3,"button",565,5);$$payload3.out+=`Login to Continue</button>`;pop_element();$$payload3.out+=`</div>`;pop_element()}else if(isLoggedIn){$$payload3.out+="\x3c!--[1--\x3e";$$payload3.out+=`<div class="pt-5">`;push_element($$payload3,"div",573,4);$$payload3.out+=`<div class="flex justify-end space-x-4">`;push_element($$payload3,"div",574,5);$$payload3.out+=`<button type="button" class="rounded-md border border-gray-300 bg-white py-2 px-4 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">`;push_element($$payload3,"button",575,6);$$payload3.out+=`Cancel</button>`;pop_element();$$payload3.out+=` <button type="button" class="rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"${attr("disabled",isUpgrading,true)}>`;push_element($$payload3,"button",582,6);$$payload3.out+=`${escape_html("Upgrade to Pro Level")}</button>`;pop_element();$$payload3.out+=`</div>`;pop_element();$$payload3.out+=`</div>`;pop_element()}else{$$payload3.out+="\x3c!--[!--\x3e"}$$payload3.out+=`\x3c!--]--\x3e`}$$payload3.out+=`\x3c!--]--\x3e `;AuthError($$payload3,{error:showError?errorMessage:null,onRetry:retryCount<maxRetries&&!isUpgrading&&!isInitializing?handleInitRetry:void 0,onDismiss:!isInitializing?handleInitDismiss:void 0});$$payload3.out+=`\x3c!----\x3e</div>`;pop_element()}),$$slots:{default:true}});$$payload2.out+=`\x3c!----\x3e`}do{$$settled=true;$$inner_payload=copy_payload($$payload);$$render_inner($$inner_payload)}while(!$$settled);assign_payload($$payload,$$inner_payload);if($$store_subs)unsubscribe_stores($$store_subs);bind_props($$props,{show:show,onComplete:onComplete,onClose:onClose,onCancel:onCancel});pop()}Upgrade.render=function(){throw new Error("Component.render(...) is no longer valid in Svelte 5. See https://svelte.dev/docs/svelte/v5-migration-guide#Components-are-no-longer-classes for more information")};export{Upgrade as U};
//# sourceMappingURL=Upgrade.js.map
