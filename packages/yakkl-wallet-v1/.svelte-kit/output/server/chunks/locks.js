import{P as PlanType,v as getObjectFromLocalStorage,S as STORAGE_YAKKL_SETTINGS,w as dateString,x as setObjectInLocalStorage,z as yakklSettingsStore,C as STORAGE_YAKKL_CURRENTLY_SELECTED,m as yakklCurrentlySelectedStore}from"./encryption.js";import{l as log}from"./Logger.js";async function setLocks(locked=true,planType=PlanType.BASIC_MEMBER){try{let dirty=false;const yakklSettings=await getObjectFromLocalStorage(STORAGE_YAKKL_SETTINGS);if(yakklSettings){dirty=false;if(locked){if(!yakklSettings.isLocked){yakklSettings.isLocked=true;yakklSettings.lastAccessDate=dateString();if(planType)yakklSettings.plan.type=planType;await setObjectInLocalStorage("settings",yakklSettings);dirty=true}}else{if(yakklSettings.isLocked){yakklSettings.isLocked=false;yakklSettings.lastAccessDate=dateString();if(planType)yakklSettings.plan.type=planType;await setObjectInLocalStorage("settings",yakklSettings);dirty=true}}if(dirty)yakklSettingsStore.set(yakklSettings)}const yakklCurrentlySelected=await getObjectFromLocalStorage(STORAGE_YAKKL_CURRENTLY_SELECTED);if(yakklCurrentlySelected){dirty=false;if(locked){if(!yakklCurrentlySelected.shortcuts.isLocked){yakklCurrentlySelected.shortcuts.isLocked=true;await setObjectInLocalStorage(STORAGE_YAKKL_CURRENTLY_SELECTED,yakklCurrentlySelected);dirty=true}}else{if(yakklCurrentlySelected.shortcuts.isLocked){yakklCurrentlySelected.shortcuts.isLocked=false;await setObjectInLocalStorage(STORAGE_YAKKL_CURRENTLY_SELECTED,yakklCurrentlySelected);dirty=true}}if(dirty)yakklCurrentlySelectedStore.set(yakklCurrentlySelected)}}catch(error){log.error("Error setting locks:",false,error)}}export{setLocks};
//# sourceMappingURL=locks.js.map
