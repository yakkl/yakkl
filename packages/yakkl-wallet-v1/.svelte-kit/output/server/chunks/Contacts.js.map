{"version":3,"file":"Contacts.js","sources":["../../../../src/lib/components/ContactForm.svelte","../../../../src/lib/components/icons/EthereumIcon.svelte","../../../../src/lib/components/icons/BaseIcon.svelte","../../../../src/lib/components/icons/OptimismIcon.svelte","../../../../src/lib/components/icons/BitcoinIcon.svelte","../../../../src/lib/components/ContactList.svelte","../../../../src/lib/components/Contacts.svelte"],"sourcesContent":["<!-- ContactForm.svelte -->\n<script lang=\"ts\">\n\timport { createForm } from 'svelte-forms-lib';\n\timport * as yup from 'yup';\n\timport { debug_log, type YakklContact } from '$lib/common';\n\timport Modal from './Modal.svelte';\n\timport { dateString } from '$lib/common/datetime';\n\timport { onMount } from 'svelte';\n\timport { yakklCurrentlySelectedStore, yakklContactsStore } from '$lib/common/stores';\n\timport WalletManager from '$lib/managers/WalletManager';\n\timport type { Wallet } from '$lib/managers/Wallet';\n\timport { VERSION } from '$lib/common/constants';\n\timport { log } from '$lib/managers/Logger';\n\n\tinterface Props {\n\t\t// import { Input } from './ui/input';\n\t\tshow?: boolean;\n\t\tcontact?: YakklContact | null;\n\t\tclassName?: string;\n\t\tonSubmit?: (contact: YakklContact) => void;\n\t}\n\n\tlet {\n\t\tshow = $bindable(false),\n\t\tcontact = null,\n\t\tclassName = 'z-[999]',\n\t\tonSubmit = () => {}\n\t}: Props = $props();\n\n\tconst blockchains = ['Ethereum', 'Base', 'Optimism', 'Bitcoin'];\n\tlet wallet: Wallet;\n\tlet currentlySelected;\n\tlet addressType = 'EOA';\n\n\tconst { form, errors, handleChange, handleSubmit, updateInitialValues } = createForm({\n\t\tinitialValues: {\n\t\t\tblockchain: 'Ethereum',\n\t\t\tname: '',\n\t\t\taddress: '',\n\t\t\talias: '',\n\t\t\tnote: ''\n\t\t},\n\t\tvalidationSchema: yup.object().shape({\n\t\t\tblockchain: yup.string().required('Please select a blockchain'),\n\t\t\tname: yup.string().required('Please enter a contact name'),\n\t\t\taddress: yup.string().required('Please enter a contact address'),\n\t\t\talias: yup.string().optional(),\n\t\t\tnote: yup.string().optional()\n\t\t}),\n\t\tonSubmit: async (values) => {\n\t\t\ttry {\n\t\t\t\tconst verified = await verifyContact(\n\t\t\t\t\tvalues.name,\n\t\t\t\t\tvalues.address,\n\t\t\t\t\tvalues.alias ? values.alias : '',\n\t\t\t\t\tvalues.note ? values.note : ''\n\t\t\t\t);\n\t\t\t\tif (verified) {\n\t\t\t\t\tconst updatedContact: YakklContact = contact\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t...contact,\n\t\t\t\t\t\t\t\t...values,\n\t\t\t\t\t\t\t\taddressType: addressType,\n\t\t\t\t\t\t\t\tversion: $yakklCurrentlySelectedStore!.version ?? VERSION,\n\t\t\t\t\t\t\t\tupdateDate: dateString()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t: {\n\t\t\t\t\t\t\t\tid: crypto.randomUUID(),\n\t\t\t\t\t\t\t\t...values,\n\t\t\t\t\t\t\t\taddressType: addressType,\n\t\t\t\t\t\t\t\tversion: $yakklCurrentlySelectedStore!.version ?? VERSION,\n\t\t\t\t\t\t\t\tcreateDate: dateString(),\n\t\t\t\t\t\t\t\tupdateDate: dateString()\n\t\t\t\t\t\t\t};\n\t\t\t\t\tonSubmit(updatedContact);\n\t\t\t\t\tshow = false;\n\t\t\t\t} else {\n\t\t\t\t\talert(\n\t\t\t\t\t\t'Unable to verify contact before processing. There could be a duplicate contact or invalid address.'\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tlog.error('Error processing contact:', false, error);\n\t\t\t}\n\t\t}\n\t});\n\n\tonMount(async () => {\n\t\tcurrentlySelected = $yakklCurrentlySelectedStore;\n\t\twallet = WalletManager.getInstance(\n\t\t\t['Alchemy'],\n\t\t\t['Ethereum'],\n\t\t\tcurrentlySelected!.shortcuts.chainId ?? 1,\n\t\t\timport.meta.env.VITE_ALCHEMY_API_KEY_PROD\n\t\t);\n\t});\n\n\tasync function verifyContact(fname: string, faddress: string, falias: string, fnote: string) {\n\t\tlet resolvedAddr = null;\n\t\tconst blockchain = wallet.getBlockchain();\n\n\t\tconst isValid = blockchain.isAddress(faddress);\n\t\tif (!isValid) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst isSmartContract =\n\t\t\tblockchain.isSmartContractSupported() && (await blockchain.isSmartContract(faddress));\n\t\taddressType = isSmartContract ? 'SC' : 'EOA';\n\n\t\t// Check for duplicates\n\t\tconst contacts = $yakklContactsStore;\n\t\tconst isDuplicate = contacts.some((c) => c.name === fname || c.address === faddress); // alias can be blank so not checking for duplicates\n\t\tif (isDuplicate && !contact) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tfunction resetForm() {\n\t\tupdateInitialValues({\n\t\t\tblockchain: 'Ethereum',\n\t\t\tname: '',\n\t\t\taddress: '',\n\t\t\talias: '',\n\t\t\tnote: ''\n\t\t});\n\t}\n\n\t$effect(() => {\n\t\tif (contact) {\n\t\t\tupdateInitialValues({\n\t\t\t\tblockchain: contact.blockchain,\n\t\t\t\tname: contact.name,\n\t\t\t\taddress: contact.address,\n\t\t\t\talias: contact.alias || '',\n\t\t\t\tnote: contact.note || ''\n\t\t\t});\n\t\t} else {\n\t\t\tresetForm();\n\t\t}\n\t});\n</script>\n\n<Modal bind:show title={contact ? 'Edit Contact' : 'Add Contact'} {className}>\n\t<form onsubmit={handleSubmit} class=\"space-y-4 p-6\">\n\t\t<div>\n\t\t\t<label for=\"blockchain\" class=\"block text-sm font-medium text-gray-700 dark:text-gray-200\"\n\t\t\t\t>Blockchain</label\n\t\t\t>\n\t\t\t<select\n\t\t\t\tid=\"blockchain\"\n\t\t\t\tclass=\"mt-1 block w-full rounded-md border-gray-300 py-2 pl-3 pr-10 text-base focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm text-gray-800\"\n\t\t\t\tbind:value={$form.blockchain}\n\t\t\t\tonchange={handleChange}\n\t\t\t>\n\t\t\t\t{#each blockchains as blockchain}\n\t\t\t\t\t<option value={blockchain}>{blockchain}</option>\n\t\t\t\t{/each}\n\t\t\t</select>\n\t\t\t{#if $errors.blockchain}\n\t\t\t\t<p class=\"mt-2 text-sm text-red-600\">{$errors.blockchain}</p>\n\t\t\t{/if}\n\t\t</div>\n\n\t\t<div>\n\t\t\t<label for=\"name\" class=\"block text-sm font-medium text-gray-700 dark:text-gray-200\"\n\t\t\t\t>Name</label\n\t\t\t>\n\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\tid=\"name\"\n\t\t\t\tclass=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm text-gray-800\"\n\t\t\t\tbind:value={$form.name}\n\t\t\t\tonchange={handleChange}\n\t\t\t/>\n\t\t\t{#if $errors.name}\n\t\t\t\t<p class=\"mt-2 text-sm text-red-600\">{$errors.name}</p>\n\t\t\t{/if}\n\t\t</div>\n\n\t\t<div>\n\t\t\t<label for=\"address\" class=\"block text-sm font-medium text-gray-700 dark:text-gray-200\"\n\t\t\t\t>Address</label\n\t\t\t>\n\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\tid=\"address\"\n\t\t\t\tclass=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focusring:indigo-500 sm:text-sm text-gray-800\"\n\t\t\t\tbind:value={$form.address}\n\t\t\t\tonchange={handleChange}\n\t\t\t/>\n\t\t\t{#if $errors.address}\n\t\t\t\t<p class=\"mt-2 text-sm text-red-600\">{$errors.address}</p>\n\t\t\t{/if}\n\t\t</div>\n\n\t\t<div>\n\t\t\t<label for=\"alias\" class=\"block text-sm font-medium text-gray-700 dark:text-gray-200\"\n\t\t\t\t>Alias</label\n\t\t\t>\n\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\tid=\"alias\"\n\t\t\t\tclass=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm text-gray-800\"\n\t\t\t\tbind:value={$form.alias}\n\t\t\t\tonchange={handleChange}\n\t\t\t/>\n\t\t\t{#if $errors.alias}\n\t\t\t\t<p class=\"mt-2 text-sm text-red-600\">{$errors.alias}</p>\n\t\t\t{/if}\n\t\t</div>\n\n\t\t<div>\n\t\t\t<label for=\"note\" class=\"block text-sm font-medium medium text-gray-700 dark:text-gray-200\"\n\t\t\t\t>Note</label\n\t\t\t>\n\t\t\t<textarea\n\t\t\t\tid=\"note\"\n\t\t\t\trows=\"3\"\n\t\t\t\tclass=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border:indigo-500 focus:ring-indigo-500 sm: text-sm text-gray-800\"\n\t\t\t\tbind:value={$form.note}\n\t\t\t\tonchange={handleChange}\n\t\t\t></textarea>\n\t\t\t{#if $errors.note}\n\t\t\t\t<p class=\"mt-2 text-sm text-red-600\">{$errors.note}</p>\n\t\t\t{/if}\n\t\t</div>\n\n\t\t<div class=\"pt-5\">\n\t\t\t<div class=\"flex justify-end space-x-4\">\n\t\t\t\t<button\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tclass=\"rounded-md border border-gray-300 bg-white py-2 px-4 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2\"\n\t\t\t\t\tonclick={() => (show = false)}>Cancel</button\n\t\t\t\t>\n\t\t\t\t<button\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tclass=\"rounded-md border border-gray-300 bg-white py-2 px-4 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2\"\n\t\t\t\t\tonclick={resetForm}>Reset</button\n\t\t\t\t>\n\t\t\t\t<button\n\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\tclass=\"rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2\"\n\t\t\t\t\t>Save</button\n\t\t\t\t>\n\t\t\t</div>\n\t\t</div>\n\t</form>\n</Modal>\n","<script lang=\"ts\">\n\tinterface Props {\n\t\tclassName?: string;\n\t}\n\n\tlet { className = 'h-6 w-6 rounded-full' }: Props = $props();\n</script>\n\n<div>\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 256 417\" class={className}>\n\t\t<g fill=\"none\">\n\t\t\t<polygon fill=\"#343434\" points=\"127.9,0 127.9,134.6 255.8,209.7\" />\n\t\t\t<polygon fill=\"#8C8C8C\" points=\"127.9,0 0,209.7 127.9,134.6\" />\n\t\t\t<polygon fill=\"#3C3C3B\" points=\"127.9,277.4 127.9,416.9 255.9,231.1\" />\n\t\t\t<polygon fill=\"#8C8C8C\" points=\"127.9,416.9 127.9,277.4 0,231.1\" />\n\t\t\t<polygon fill=\"#141414\" points=\"127.9,263.1 255.8,209.7 127.9,134.6\" />\n\t\t\t<polygon fill=\"#393939\" points=\"0,209.7 127.9,263.1 127.9,134.6\" />\n\t\t</g>\n\t</svg>\n</div>\n","<script lang=\"ts\">\n\tinterface Props {\n\t\tclassName?: string;\n\t}\n\n\tlet { className = 'h-6 w-6 rounded-full' }: Props = $props();\n</script>\n\n<div>\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 1024 1024\" class={className}>\n\t\t<circle cx=\"512\" cy=\"512\" r=\"512\" fill=\"#0052FF\" />\n\t\t<path\n\t\t\td=\"M512 704c53 0 96-43 96-96s-43-96-96-96-96 43-96 96 43 96 96 96zm0-192c53 0 96-43 96-96s-43-96-96-96-96 43-96 96 43 96 96 96z\"\n\t\t\tfill=\"#fff\"\n\t\t/>\n\t</svg>\n</div>\n","<script lang=\"ts\">\n\tinterface Props {\n\t\tclassName?: string;\n\t}\n\n\tlet { className = 'h-6 w-6 rounded-full' }: Props = $props();\n</script>\n\n<div>\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 1200 1200\" class={className}>\n\t\t<circle cx=\"600\" cy=\"600\" r=\"600\" fill=\"#FF0420\" />\n\t\t<path\n\t\t\td=\"M498 787h105l63-326h-106l-62 326zm7-160c7-38 26-56 59-56h1c31 0 44 19 37 55l-13 70c-7 38-26 57-59 57h-1c-31 0-44-19-37-55l13-71zm286 24c15-75-30-126-116-126h-60l-39 206h61c84 0 138-46 154-123zm-155 60l12-65c9-47 35-61 64-61h2c32 0 55 15 47 61l-11 65c-9 48-35 62-65 62h-1c-32 0-55-15-48-62z\"\n\t\t\tfill=\"#fff\"\n\t\t/>\n\t</svg>\n</div>\n","<script lang=\"ts\">\n\tinterface Props {\n\t\tclassName?: string;\n\t}\n\n\tlet { className = 'h-6 w-6 rounded-full' }: Props = $props();\n</script>\n\n<div>\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 32 32\" class={className}>\n\t\t<circle cx=\"16\" cy=\"16\" r=\"16\" fill=\"#f7931a\" />\n\t\t<path\n\t\t\td=\"M22.26 13.258c.316-2.113-1.292-3.246-3.496-3.998l.714-2.862-1.743-.435-.695 2.786c-.46-.115-.931-.225-1.402-.333l.7-2.808-1.742-.434-.714 2.862a56.346 56.346 0 00-1.12-.272l.002-.011-2.407-.599-.464 1.89s1.292.296 1.263.313c.705.176.832.644.812 1.015l-1.263 5.076c.049.012.111.03.182.059l-.186-.046L8.95 21.42c-.085.215-.3.54-.785.417.017.025-1.263-.313-1.263-.313l-.867 2.011 2.27.566c.422.105.835.216 1.247.324l-.721 2.894 1.742.434.714-2.862c.477.129.943.248 1.402.364l-.712 2.85 1.742.434.721-2.891c2.974.563 5.208.336 6.145-2.359.758-2.17-.038-3.431-1.601-4.253 1.14-.263 2.003-1.01 2.232-2.559zM19.074 20.11c-.514 2.17-3.994.997-5.13.704l.914-3.664c1.136.284 4.77.844 4.216 2.96zm.514-5.28c-.469 1.876-3.354.923-4.29.688l.857-3.43c.937.234 3.923.669 3.433 2.742z\"\n\t\t\tfill=\"#fff\"\n\t\t/>\n\t</svg>\n</div>\n","<!-- ContactList.svelte -->\n<script lang=\"ts\">\n\timport type { YakklContact } from '$lib/common';\n\timport ContactForm from './ContactForm.svelte';\n\timport Confirmation from './Confirmation.svelte';\n\timport EthereumIcon from '$lib/components/icons/EthereumIcon.svelte';\n\timport BaseIcon from '$lib/components/icons/BaseIcon.svelte';\n\timport OptimismIcon from '$lib/components/icons/OptimismIcon.svelte';\n\timport BitcoinIcon from '$lib/components/icons/BitcoinIcon.svelte';\n\timport EditControls from './EditControls.svelte';\n\n\tinterface Props {\n\t\tcontacts?: YakklContact[];\n\t\tonContactSelect?: (contact: YakklContact) => void;\n\t\tonContactUpdate?: (contact: YakklContact) => void;\n\t\tonContactDelete?: (contact: YakklContact) => void;\n\t}\n\n\tlet {\n\t\tcontacts = [],\n\t\tonContactSelect = () => {},\n\t\tonContactUpdate = () => {},\n\t\tonContactDelete = () => {}\n\t}: Props = $props();\n\n\tlet selectedContact: YakklContact | null = $state(null);\n\tlet showEditModal = $state(false);\n\tlet showDeleteModal = $state(false);\n\n\tfunction handleEdit(contact: YakklContact) {\n\t\tselectedContact = contact;\n\t\tshowEditModal = true;\n\t}\n\n\tfunction handleDelete(contact: YakklContact) {\n\t\tselectedContact = contact;\n\t\tshowDeleteModal = true;\n\t}\n\n\tfunction handleCopy(contact: YakklContact) {\n\t\tnavigator.clipboard.writeText(contact.address);\n\t}\n\n\tfunction confirmDelete() {\n\t\tif (selectedContact) {\n\t\t\tonContactDelete(selectedContact);\n\t\t\tshowDeleteModal = false;\n\t\t\tselectedContact = null;\n\t\t}\n\t}\n</script>\n\n<ul class=\"overflow-hidden\">\n\t{#each contacts as contact}\n\t\t<li class=\"mb-3 relative overflow-hidden\">\n\t\t\t<button\n\t\t\t\tclass=\"w-full flex items-start rounded-lg p-3 transition-colors duration-200 overflow-hidden {contact.blockchain === 'Ethereum'\n\t\t\t\t\t? 'bg-indigo-50 hover:bg-indigo-100 border border-indigo-200'\n\t\t\t\t\t: contact.blockchain === 'Base'\n\t\t\t\t\t\t? 'bg-blue-50 hover:bg-blue-100 border border-blue-200'\n\t\t\t\t\t\t: contact.blockchain === 'Optimism'\n\t\t\t\t\t\t\t? 'bg-red-50 hover:bg-red-100 border border-red-200'\n\t\t\t\t\t\t\t: contact.blockchain === 'Bitcoin'\n\t\t\t\t\t\t\t\t? 'bg-orange-50 hover:bg-orange-100 border border-orange-200'\n\t\t\t\t\t\t\t\t: 'bg-gray-50 hover:bg-gray-100 border border-gray-200'}\"\n\t\t\t\tonclick={() => onContactSelect(contact)}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"w-6 h-6 flex items-center justify-center rounded-full {contact.blockchain === 'Ethereum'\n\t\t\t\t\t\t? 'bg-indigo-500'\n\t\t\t\t\t\t: contact.blockchain === 'Base'\n\t\t\t\t\t\t\t? 'bg-blue-500'\n\t\t\t\t\t\t\t: contact.blockchain === 'Optimism'\n\t\t\t\t\t\t\t\t? 'bg-red-500'\n\t\t\t\t\t\t\t\t: contact.blockchain === 'Bitcoin'\n\t\t\t\t\t\t\t\t\t? 'bg-orange-500'\n\t\t\t\t\t\t\t\t\t: 'bg-gray-500'} text-white mr-3 shrink-0\"\n\t\t\t\t>\n\t\t\t\t\t{#if contact.blockchain === 'Ethereum'}\n\t\t\t\t\t\t<EthereumIcon className=\"h-4 w-4\" />\n\t\t\t\t\t{:else if contact.blockchain === 'Base'}\n\t\t\t\t\t\t<BaseIcon className=\"h-4 w-4\" />\n\t\t\t\t\t{:else if contact.blockchain === 'Optimism'}\n\t\t\t\t\t\t<OptimismIcon className=\"h-4 w-4\" />\n\t\t\t\t\t{:else if contact.blockchain === 'Bitcoin'}\n\t\t\t\t\t\t<BitcoinIcon className=\"h-4 w-4\" />\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\tclass=\"w-3 h-3\"\n\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\n\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\t\td=\"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z\"\n\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"flex-1 min-w-0 overflow-hidden\">\n\t\t\t\t\t<div class=\"flex items-center justify-between mb-1\">\n\t\t\t\t\t\t<div class=\"flex items-center space-x-2\">\n\t\t\t\t\t\t\t<h3 class=\"text-sm font-semibold text-gray-800\">\n\t\t\t\t\t\t\t\t{contact.blockchain?.toUpperCase() || 'CONTACT'}\n\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t<span class=\"text-xs px-2 py-1 rounded-full {contact.blockchain === 'Ethereum'\n\t\t\t\t\t\t\t\t? 'bg-indigo-100 text-indigo-700'\n\t\t\t\t\t\t\t\t: contact.blockchain === 'Base'\n\t\t\t\t\t\t\t\t\t? 'bg-blue-100 text-blue-700'\n\t\t\t\t\t\t\t\t\t: contact.blockchain === 'Optimism'\n\t\t\t\t\t\t\t\t\t\t? 'bg-red-100 text-red-700'\n\t\t\t\t\t\t\t\t\t\t: contact.blockchain === 'Bitcoin'\n\t\t\t\t\t\t\t\t\t\t\t? 'bg-orange-100 text-orange-700'\n\t\t\t\t\t\t\t\t\t\t\t: 'bg-gray-100 text-gray-700'}\">\n\t\t\t\t\t\t\t\t{contact.blockchain || 'Unknown'}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<p class=\"text-sm font-medium text-gray-700 truncate mb-1\" title={contact.name}>\n\t\t\t\t\t\t{contact.name}\n\t\t\t\t\t</p>\n\t\t\t\t\t{#if contact.alias}\n\t\t\t\t\t\t<p class=\"text-xs text-gray-500 mb-1 truncate\" title={contact.alias}>\n\t\t\t\t\t\t\tAlias: {contact.alias}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t{/if}\n\t\t\t\t\t<p class=\"text-xs text-gray-500 font-mono truncate mb-2\" title={contact.address}>\n\t\t\t\t\t\t{contact.address}\n\t\t\t\t\t</p>\n\t\t\t\t\t\n\t\t\t\t\t<!-- Contact info badges -->\n\t\t\t\t\t<div class=\"flex items-center space-x-2\">\n\t\t\t\t\t\t{#if contact.email}\n\t\t\t\t\t\t\t<span class=\"text-xs px-2 py-1 bg-green-100 text-green-700 rounded-full flex items-center\">\n\t\t\t\t\t\t\t\t<svg class=\"w-3 h-3 mr-1\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n\t\t\t\t\t\t\t\t\t<path d=\"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z\"/>\n\t\t\t\t\t\t\t\t\t<path d=\"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z\"/>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\tEmail\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t{#if contact.phone}\n\t\t\t\t\t\t\t<span class=\"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded-full flex items-center\">\n\t\t\t\t\t\t\t\t<svg class=\"w-3 h-3 mr-1\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n\t\t\t\t\t\t\t\t\t<path d=\"M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z\"/>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\tPhone\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</button>\n\t\t\t<EditControls\n\t\t\t\tonEdit={() => handleEdit(contact)}\n\t\t\t\tonDelete={() => handleDelete(contact)}\n\t\t\t\tonCopy={() => handleCopy(contact)}\n\t\t\t\tcontrols={['copy', 'edit', 'delete']}\n\t\t\t/>\n\t\t</li>\n\t{/each}\n</ul>\n\n<ContactForm bind:show={showEditModal} contact={selectedContact} onSubmit={onContactUpdate} />\n\n<Confirmation\n\tbind:show={showDeleteModal}\n\tonConfirm={confirmDelete}\n\ttitle=\"Delete Contact\"\n\tmessage=\"Are you sure you want to delete this contact? This action cannot be undone.\"\n/>\n","<!-- Contacts.svelte -->\n<script lang=\"ts\">\n\timport { setYakklContactsStorage, yakklContactsStore } from '$lib/common/stores';\n\timport { type YakklContact } from '$lib/common';\n\timport Modal from './Modal.svelte';\n\timport ContactList from './ContactList.svelte';\n\timport ContactForm from './ContactForm.svelte';\n\n\tinterface Props {\n\t\tshow?: boolean;\n\t\tonContactSelect?: ((contact: YakklContact) => void) | null;\n\t\tclassName?: string;\n\t}\n\n\tlet { show = $bindable(false), onContactSelect = null, className = 'z-[899]' }: Props = $props();\n\n\tlet showAddModal = $state(false);\n\tlet contacts: YakklContact[] = $state([]);\n\n\t$effect(() => {\n\t\tcontacts = $yakklContactsStore;\n\t});\n\n\tfunction handleContactSelect(selectedContact: YakklContact) {\n\t\tif (onContactSelect !== null) {\n\t\t\tonContactSelect(selectedContact);\n\t\t}\n\t\tshow = false;\n\t}\n\n\tfunction handleContactAdd(contact: YakklContact) {\n\t\tyakklContactsStore.update((contacts) => [...contacts, contact]);\n\t\tsetYakklContactsStorage($yakklContactsStore); // Save to local storage - make sure contact is saved. If not then it will be lost.\n\t\tshowAddModal = false;\n\t}\n\n\tfunction handleContactDelete(deletedContact: YakklContact) {\n\t\tyakklContactsStore.update((contacts) => {\n\t\t\tconst updatedContacts = contacts.filter((c) => c.address !== deletedContact.address);\n\t\t\tsetYakklContactsStorage(updatedContacts);\n\t\t\treturn updatedContacts;\n\t\t});\n\t}\n\n\tfunction handleContactUpdate(updatedContact: YakklContact) {\n\t\tyakklContactsStore.update((contacts) => {\n\t\t\tconst updatedContacts = contacts.map((c) =>\n\t\t\t\tc.address === updatedContact.address ? updatedContact : c\n\t\t\t);\n\t\t\tsetYakklContactsStorage(updatedContacts);\n\t\t\treturn updatedContacts;\n\t\t});\n\t}\n\n\tfunction closeModal() {\n\t\tshow = false;\n\t}\n</script>\n\n<!-- <div class=\"relative {className}\"> -->\n<Modal\n\tbind:show\n\ttitle=\"Contact List\"\n\tdescription=\"Select the contact you wish to send/transfer to\"\n\tonClose={closeModal}\n\t{className}\n>\n\t<div class=\"p-4\">\n\t\t{#if $yakklContactsStore.length > 0}\n\t\t\t<!-- Contact list with AccountListing-style cards -->\n\t\t\t<div class=\"space-y-3 mb-4\">\n\t\t\t\t<ContactList\n\t\t\t\t\t{contacts}\n\t\t\t\t\tonContactSelect={handleContactSelect}\n\t\t\t\t\tonContactUpdate={handleContactUpdate}\n\t\t\t\t\tonContactDelete={handleContactDelete}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t{:else}\n\t\t\t<!-- Empty state with modern styling -->\n\t\t\t<div class=\"text-center py-12\">\n\t\t\t\t<div class=\"w-16 h-16 mx-auto mb-4 bg-gradient-to-br from-indigo-100 to-purple-100 rounded-full flex items-center justify-center\">\n\t\t\t\t\t<svg class=\"w-8 h-8 text-indigo-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\" />\n\t\t\t\t\t</svg>\n\t\t\t\t</div>\n\t\t\t\t<h3 class=\"text-lg font-semibold text-gray-700 mb-2\">No Contacts Yet</h3>\n\t\t\t\t<p class=\"text-gray-500 mb-6\">Add your first contact to make sending payments easier</p>\n\t\t\t</div>\n\t\t{/if}\n\n\t\t<!-- Action buttons -->\n\t\t<div class=\"border-t border-gray-200 pt-4\">\n\t\t\t<button\n\t\t\t\tonclick={() => (showAddModal = true)}\n\t\t\t\tclass=\"w-full bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white font-semibold py-3 px-4 rounded-lg transition-all duration-200 shadow-md hover:shadow-lg flex items-center justify-center space-x-2\"\n\t\t\t>\n\t\t\t\t<svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\" />\n\t\t\t\t</svg>\n\t\t\t\t<span>Add New Contact</span>\n\t\t\t</button>\n\t\t\t\n\t\t\t<div class=\"mt-3 p-3 bg-blue-50 rounded-lg border border-blue-200\">\n\t\t\t\t<div class=\"flex items-center\">\n\t\t\t\t\t<div class=\"flex-shrink-0\">\n\t\t\t\t\t\t<svg class=\"w-4 h-4 text-blue-600\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n\t\t\t\t\t\t\t<path fill-rule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\" clip-rule=\"evenodd\" />\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ml-2\">\n\t\t\t\t\t\t<p class=\"text-xs text-blue-800\">\n\t\t\t\t\t\t\tSelected contacts will be used for sending and transferring funds\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</Modal>\n<!-- </div> -->\n\n<ContactForm bind:show={showAddModal} onSubmit={handleContactAdd} />\n"],"names":["show","contact","className","onSubmit","blockchains","wallet","addressType","form","errors","createForm","initialValues","blockchain","name","address","alias","note","validationSchema","yup","object","shape","string","required","optional","async","values","verified","verifyContact","updatedContact","version","$.store_get","$$store_subs","yakklCurrentlySelectedStore","VERSION","updateDate","dateString","id","crypto","randomUUID","createDate","alert","error","log","fname","faddress","falias","fnote","getBlockchain","isValid","isAddress","isSmartContract","isSmartContractSupported","contacts","yakklContactsStore","isDuplicate","some","c","each_array","$$index","$$payload3","out","$.attr","$$props","onContactSelect","onContactUpdate","onContactDelete","selectedContact","showEditModal","showDeleteModal","handleEdit","handleDelete","handleCopy","navigator","clipboard","writeText","confirmDelete","$$payload","$.attr_class","$.stringify","$.escape","toUpperCase","email","phone","onEdit","onDelete","onCopy","$$value","showAddModal","handleContactSelect","handleContactAdd","update","setYakklContactsStorage","handleContactDelete","deletedContact","updatedContacts","filter","handleContactUpdate","map","closeModal","length"],"mappings":"i5BAuBEA,KAAiB,MAAAC,QACjBA,QAAU,KAAAC,UACVA,UAAY,UAAAC,SACZA,SAAA,sBAGKC,YAAe,CAAA,WAAY,OAAQ,WAAY,WACjD,IAAAC,WAEAC,YAAc,iBAEVC,KAAAC,OAAMA,QAA4DC,WAAA,CACzEC,cAAA,CACCC,WAAY,WACZC,KAAM,GACNC,QAAS,GACTC,MAAO,GACPC,KAAM,IAEPC,iBAAkBC,IAAIC,SAASC,MAAA,CAC9BR,WAAYM,IAAIG,SAASC,SAAS,8BAClCT,KAAMK,IAAIG,SAASC,SAAS,+BAC5BR,QAASI,IAAIG,SAASC,SAAS,kCAC/BP,MAAOG,IAAIG,SAASE,WACpBP,KAAME,IAAIG,SAASE,aAEpBnB,SAAAoB,MAAiBC,SACZ,IACG,MAAAC,eAAiBC,cACtBF,OAAOZ,KACPY,OAAOX,QACPW,OAAOV,MAAQU,OAAOV,MAAQ,GAC9BU,OAAOT,KAAOS,OAAOT,KAAO,OAEzBU,SAAU,OACPE,eAA+B1B,YAE/BA,WACAuB,OACHlB,wBACAsB,QAAAC,UAAAC,eAAA,CAAA,EAAA,+BAAAC,6BAAuCH,SAAWI,QAClDC,WAAYC,eAGZC,GAAIC,OAAOC,gBACRb,OACHlB,wBACAsB,QAAAC,UAAAC,eAAA,CAAA,EAAA,+BAAAC,6BAAuCH,SAAWI,QAClDM,WAAYJ,aACZD,WAAYC,cAEf/B,SAASwB,gBACF3B,KAAA,KAAA,KACD,CACNuC,MACC,qGAAA,QAGMC,OACJC,IAAAD,MAAM,4BAA6B,MAAOA,MAAK,oBAevCd,cAAcgB,MAAeC,SAAkBC,OAAgBC,OAEvE,MAAAlC,WAAaN,OAAOyC,gBAEpB,MAAAC,QAAUpC,WAAWqC,UAAUL,cAChCI,QAAS,CACN,OAAA,KAAA,CAGF,MAAAE,gBACLtC,WAAWuC,kCAAqCvC,WAAWsC,gBAAgBN,UAC5ErC,YAAc2C,gBAAkB,KAAO,MAGjC,MAAAE,SAAAtB,UAAAC,eAAA,CAAA,EAAA,sBAAAsB,oBACA,MAAAC,YAAcF,SAASG,KAAMC,GAAMA,EAAE3C,OAAS8B,OAASa,EAAE1C,UAAY8B,UACvE,GAAAU,cAAgBpD,QAAS,CACrB,OAAA,KAAA,CAGD,OAAA,IAAA,oGA4BeA,QAAU,eAAiB,mMAYxCG,sqBAHWO,qHAGI,IAAAA,WAAU6C,WAAAC,SAChBC,WAAAC,KAAA,UAAAC,KAAA,QAAAjD,wCAAAA,sFAAaA,oNAGjBA,WAAU,0MACwBA,mmBAY5BC,oIAGNA,KAAI,0MAC8BA,qmBAY5BC,uIAGNA,QAAO,0MAC2BA,mmBAY5BC,qIAGNA,MAAK,0MAC6BA,6pBAY5BC,8JAGNA,KAAI,0MAC8BA,y9DC7N3Cb,UAAY,wBAAA2D,gKAImD3D,shDCJ/DA,UAAY,wBAAA2D,kKAIqD3D,o2BCJjEA,UAAY,wBAAA2D,kKAIqD3D,ygCCJjEA,UAAY,wBAAA2D,8JAIiD3D,69CCUlEiD,SAAA,GAAAW,gBACAA,gBAAA,OAAyBC,gBACzBA,gBAAA,OAAyBC,gBACzBA,gBAAA,gBAGG,IAAAC,gBAA8C,KAC9C,IAAAC,cAAuB,MACvB,IAAAC,gBAAyB,MAEpB,SAAAC,WAAWnE,SACDgE,gBAAAhE,QACFiE,cAAA,IACjB,CAES,SAAAG,aAAapE,SACHgE,gBAAAhE,QACAkE,gBAAA,IACnB,CAES,SAAAG,WAAWrE,SACTsE,UAAAC,UAAUC,UAAUxE,QAAQY,QACvC,UAES6D,mBACJT,gBAAiB,CACpBD,gBAAgBC,iBACEE,gBAAA,MACAF,gBAAA,IACnB,CACD,+GAIOd,sMAAY,IAAAlD,QAAOuD,WAAAC,yGAGuEkB,WAAAhB,KAAA,UAAAiB,WAAA,yFAAAC,UAAA5E,QAAQU,aAAe,WAClH,4DACAV,QAAQU,aAAe,OACtB,sDACAV,QAAQU,aAAe,WACtB,mDACAV,QAAQU,aAAe,UACtB,4DACA,oGAIyDgE,WAAAhB,KAAA,OAAAiB,WAAA,yDAAAC,UAAA5E,QAAQU,aAAe,WAClF,gBACAV,QAAQU,aAAe,OACtB,cACAV,QAAQU,aAAe,WACtB,aACAV,QAAQU,aAAe,UACtB,gBACA,kFAED,GAAAV,QAAQU,aAAe,WAAU,yFAE5BV,QAAQU,aAAe,OAAM,sFAE7BV,QAAQU,aAAe,WAAU,0FAEjCV,QAAQU,aAAe,UAAS,s8BAqBtCgE,WAAAhB,KAAA,GAAAmB,YAAA7E,QAAQU,YAAYoE,eAAiB,gCAEMJ,WAAAhB,KAAA,SAAAiB,WAAA,kCAAAC,UAAA5E,QAAQU,aAAe,WACjE,gCACAV,QAAQU,aAAe,OACtB,4BACAV,QAAQU,aAAe,WACtB,0BACAV,QAAQU,aAAe,UACtB,gCACA,uGACJV,QAAQU,YAAc,gHAIwCgE,WAAAhB,KAAA,8DAAAC,KAAA,QAAA3D,QAAQW,4CACxE+D,WAAAhB,KAAA,GAAAmB,YAAA7E,QAAQW,8CAEL,GAAAX,QAAQa,MAAK,kCACqC6D,WAAAhB,KAAA,iDAAAC,KAAA,QAAA3D,QAAQa,6CACrD6D,WAAAhB,KAAA,UAAAmB,YAAA7E,QAAQa,kEAG8C6D,WAAAhB,KAAA,0EAAAC,KAAA,QAAA3D,QAAQY,+CACtE8D,WAAAhB,KAAA,GAAAmB,YAAA7E,QAAQY,+HAKJ,GAAAZ,QAAQ+E,MAAK,myBASb,GAAA/E,QAAQgF,MAAK,s5BAYNC,OAAA,IAAAd,WAAWnE,SACTkF,SAAA,IAAAd,aAAapE,SACfmF,OAAA,IAAAd,WAAWrE,mBACd,OAAQ,OAAQ,uKAMiBgE,yBAA2BF,2BAAnD,OAAAG,iCAAaA,cAAAmB,+FAIzBX,sIADA,OAAAP,mCAAeA,gBAAAkB,ijBCzJpBrF,KAAiB,MAAA8D,gBAAQA,gBAAkB,KAAA5D,UAAMA,UAAY,mBAE/D,IAAAoF,aAAsB,MACtB,IAAAnC,SAAA,GAMK,SAAAoC,oBAAoBtB,iBACxB,GAAAH,kBAAoB,KAAM,CAC7BA,gBAAgBG,gBACjB,CACOjE,KAAA,KACR,CAES,SAAAwF,iBAAiBvF,SACzBmD,mBAAmBqC,OAAQtC,WAAiBA,IAAAA,UAAUlD,UACtDyF,wBAAA7D,UAAAC,eAAA,CAAA,EAAA,sBAAAsB,qBACekC,aAAA,KAChB,CAES,SAAAK,oBAAoBC,gBACTxC,mBAAAqC,OAAQtC,YACpB,MAAA0C,gBAAkB1C,UAAS2C,OAAQvC,GAAMA,EAAE1C,UAAY+E,eAAe/E,SAC5E6E,wBAAwBG,iBACjB,OAAAA,iBAET,CAES,SAAAE,oBAAoBpE,gBACTyB,mBAAAqC,OAAQtC,YACpB,MAAA0C,gBAAkB1C,UAAS6C,IAAKzC,GACrCA,EAAE1C,UAAYc,eAAed,QAAUc,eAAiB4B,GAEzDmC,wBAAwBG,iBACjB,OAAAA,iBAET,UAESI,aACDjG,KAAA,KACR,yLAQSiG,qOAIiBpE,GAAAA,UAAAC,eAAA,CAAA,EAAA,sBAAAsB,oBAAA8C,OAAS,EAAC,+KAKfX,oCACAQ,oCACAJ,4mHA+C0BH,4BAAxB,OAAAF,gCAAYA,aAAAD"}