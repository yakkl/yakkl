{"version":3,"file":"_page.svelte.js","sources":["../../../../../../../../../../node_modules/.pnpm/bits-ui@1.0.0-next.74_svelte@5.34.3/node_modules/bits-ui/dist/bits/accordion/accordion.svelte.js","../../../../../../../../../../node_modules/.pnpm/bits-ui@1.0.0-next.74_svelte@5.34.3/node_modules/bits-ui/dist/bits/accordion/components/accordion.svelte","../../../../../../../../../../node_modules/.pnpm/bits-ui@1.0.0-next.74_svelte@5.34.3/node_modules/bits-ui/dist/bits/accordion/components/accordion-item.svelte","../../../../../../../../../../node_modules/.pnpm/bits-ui@1.0.0-next.74_svelte@5.34.3/node_modules/bits-ui/dist/bits/accordion/components/accordion-header.svelte","../../../../../../../../../../node_modules/.pnpm/bits-ui@1.0.0-next.74_svelte@5.34.3/node_modules/bits-ui/dist/bits/accordion/components/accordion-trigger.svelte","../../../../../../../../../../node_modules/.pnpm/bits-ui@1.0.0-next.74_svelte@5.34.3/node_modules/bits-ui/dist/bits/accordion/components/accordion-content.svelte","../../../../../../../../src/lib/managers/ListenerManager.ts","../../../../../../../../src/lib/common/listeners/ui/uiListeners.ts","../../../../../../../../src/lib/components/TokenLineView.svelte","../../../../../../../../src/lib/components/ui/accordion/accordion-content.svelte","../../../../../../../../src/lib/components/ui/accordion/accordion-item.svelte","../../../../../../../../../../node_modules/.pnpm/lucide-svelte@0.468.0_svelte@5.34.3/node_modules/lucide-svelte/dist/defaultAttributes.js","../../../../../../../../../../node_modules/.pnpm/lucide-svelte@0.468.0_svelte@5.34.3/node_modules/lucide-svelte/dist/Icon.svelte","../../../../../../../../../../node_modules/.pnpm/lucide-svelte@0.468.0_svelte@5.34.3/node_modules/lucide-svelte/dist/icons/chevron-down.svelte","../../../../../../../../src/lib/components/ui/accordion/accordion-trigger.svelte","../../../../../../../../src/lib/components/ui/accordion/index.ts","../../../../../../../../src/lib/components/TokenComponentList.svelte","../../../../../../../../src/lib/components/Banner.svelte","../../../../../../../../src/lib/components/Ad.svelte","../../../../../../../../src/lib/components/RotatingBanner.svelte","../../../../../../../../src/lib/components/icons/ChevronUpIcon.svelte","../../../../../../../../src/lib/components/icons/ResizeIcon.svelte","../../../../../../../../src/lib/components/SectionCard.svelte","../../../../../../../../src/lib/components/icons/WalletIcon.svelte","../../../../../../../../src/lib/components/icons/TokenIcon.svelte","../../../../../../../../src/lib/components/icons/NewsIcon.svelte","../../../../../../../../src/lib/components/icons/ToolIcon.svelte","../../../../../../../../src/lib/components/NewsFeedLineView.svelte","../../../../../../../../src/lib/components/icons/BookmarkIcon.svelte","../../../../../../../../src/lib/components/icons/PrinterIcon.svelte","../../../../../../../../src/lib/components/icons/TrashIcon.svelte","../../../../../../../../src/lib/components/ArticleControls.svelte","../../../../../../../../src/lib/components/ExtensionRSSNewsFeed.svelte","../../../../../../../../src/lib/components/icons/CalcIcon.svelte","../../../../../../../../src/lib/components/EthUnitConverter.svelte","../../../../../../../../src/lib/components/icons/SearchIcon.svelte","../../../../../../../../src/lib/components/icons/SortIcon.svelte","../../../../../../../../src/lib/components/SearchSortControls.svelte","../../../../../../../../src/lib/components/icons/LockIcon.svelte","../../../../../../../../src/lib/components/LockedSectionCard.svelte","../../../../../../../../src/lib/components/BookmarkedArticles.svelte","../../../../../../../../src/lib/components/GenericFooter.svelte","../../../../../../../../src/lib/components/UpgradeFooter.svelte","../../../../../../../../src/lib/components/ScrollIndicator.svelte","../../../../../../../../src/routes/(sidepanel)/sidepanel/sidepanel/+page.svelte"],"sourcesContent":["import { afterTick, useRefById } from \"svelte-toolbelt\";\nimport { watch } from \"runed\";\nimport { getAriaDisabled, getAriaExpanded, getDataDisabled, getDataOpenClosed, getDataOrientation, } from \"../../internal/attrs.js\";\nimport { kbd } from \"../../internal/kbd.js\";\nimport { useRovingFocus, } from \"../../internal/use-roving-focus.svelte.js\";\nimport { createContext } from \"../../internal/create-context.js\";\nconst ACCORDION_ROOT_ATTR = \"data-accordion-root\";\nconst ACCORDION_TRIGGER_ATTR = \"data-accordion-trigger\";\nconst ACCORDION_CONTENT_ATTR = \"data-accordion-content\";\nconst ACCORDION_ITEM_ATTR = \"data-accordion-item\";\nconst ACCORDION_HEADER_ATTR = \"data-accordion-header\";\nclass AccordionBaseState {\n    #id;\n    #ref;\n    disabled;\n    #loop;\n    orientation;\n    rovingFocusGroup;\n    constructor(props) {\n        this.#id = props.id;\n        this.disabled = props.disabled;\n        this.#ref = props.ref;\n        useRefById({\n            id: props.id,\n            ref: this.#ref,\n        });\n        this.orientation = props.orientation;\n        this.#loop = props.loop;\n        this.rovingFocusGroup = useRovingFocus({\n            rootNodeId: this.#id,\n            candidateAttr: ACCORDION_TRIGGER_ATTR,\n            loop: this.#loop,\n            orientation: this.orientation,\n        });\n    }\n    props = $derived.by(() => ({\n        id: this.#id.current,\n        \"data-orientation\": getDataOrientation(this.orientation.current),\n        \"data-disabled\": getDataDisabled(this.disabled.current),\n        [ACCORDION_ROOT_ATTR]: \"\",\n    }));\n}\nexport class AccordionSingleState extends AccordionBaseState {\n    #value;\n    isMulti = false;\n    constructor(props) {\n        super(props);\n        this.#value = props.value;\n        this.includesItem = this.includesItem.bind(this);\n        this.toggleItem = this.toggleItem.bind(this);\n    }\n    includesItem(item) {\n        return this.#value.current === item;\n    }\n    toggleItem(item) {\n        this.#value.current = this.includesItem(item) ? \"\" : item;\n    }\n}\nexport class AccordionMultiState extends AccordionBaseState {\n    #value;\n    isMulti = true;\n    constructor(props) {\n        super(props);\n        this.#value = props.value;\n        this.includesItem = this.includesItem.bind(this);\n        this.toggleItem = this.toggleItem.bind(this);\n    }\n    includesItem(item) {\n        return this.#value.current.includes(item);\n    }\n    toggleItem(item) {\n        if (this.includesItem(item)) {\n            this.#value.current = this.#value.current.filter((v) => v !== item);\n        }\n        else {\n            this.#value.current = [...this.#value.current, item];\n        }\n    }\n}\nexport class AccordionItemState {\n    #id;\n    #ref;\n    value;\n    disabled;\n    root;\n    isActive = $derived.by(() => this.root.includesItem(this.value.current));\n    isDisabled = $derived.by(() => this.disabled.current || this.root.disabled.current);\n    constructor(props) {\n        this.value = props.value;\n        this.disabled = props.disabled;\n        this.root = props.rootState;\n        this.#id = props.id;\n        this.#ref = props.ref;\n        this.updateValue = this.updateValue.bind(this);\n        useRefById({\n            id: this.#id,\n            ref: this.#ref,\n            deps: () => this.isActive,\n        });\n    }\n    updateValue() {\n        this.root.toggleItem(this.value.current);\n    }\n    props = $derived.by(() => ({\n        id: this.#id.current,\n        \"data-state\": getDataOpenClosed(this.isActive),\n        \"data-disabled\": getDataDisabled(this.isDisabled),\n        \"data-orientation\": getDataOrientation(this.root.orientation.current),\n        [ACCORDION_ITEM_ATTR]: \"\",\n    }));\n}\nclass AccordionTriggerState {\n    #ref;\n    #disabled;\n    #id;\n    #root;\n    #itemState;\n    #isDisabled = $derived.by(() => this.#disabled.current ||\n        this.#itemState.disabled.current ||\n        this.#root.disabled.current);\n    constructor(props, itemState) {\n        this.#disabled = props.disabled;\n        this.#itemState = itemState;\n        this.#root = itemState.root;\n        this.#id = props.id;\n        this.#ref = props.ref;\n        this.onkeydown = this.onkeydown.bind(this);\n        this.onclick = this.onclick.bind(this);\n        useRefById({\n            id: props.id,\n            ref: this.#ref,\n        });\n    }\n    onclick(e) {\n        if (this.#isDisabled)\n            return;\n        if (e.button !== 0)\n            return e.preventDefault();\n        this.#itemState.updateValue();\n    }\n    onkeydown(e) {\n        if (this.#isDisabled)\n            return;\n        if (e.key === kbd.SPACE || e.key === kbd.ENTER) {\n            e.preventDefault();\n            this.#itemState.updateValue();\n            return;\n        }\n        this.#root.rovingFocusGroup.handleKeydown(this.#ref.current, e);\n    }\n    props = $derived.by(() => ({\n        id: this.#id.current,\n        disabled: this.#isDisabled,\n        \"aria-expanded\": getAriaExpanded(this.#itemState.isActive),\n        \"aria-disabled\": getAriaDisabled(this.#isDisabled),\n        \"data-disabled\": getDataDisabled(this.#isDisabled),\n        \"data-state\": getDataOpenClosed(this.#itemState.isActive),\n        \"data-orientation\": getDataOrientation(this.#root.orientation.current),\n        [ACCORDION_TRIGGER_ATTR]: \"\",\n        tabindex: 0,\n        //\n        onclick: this.onclick,\n        onkeydown: this.onkeydown,\n    }));\n}\nclass AccordionContentState {\n    item;\n    #ref;\n    #id;\n    #originalStyles = undefined;\n    #isMountAnimationPrevented = false;\n    #width = $state(0);\n    #height = $state(0);\n    #forceMount;\n    present = $derived.by(() => this.#forceMount.current || this.item.isActive);\n    constructor(props, item) {\n        this.item = item;\n        this.#forceMount = props.forceMount;\n        this.#isMountAnimationPrevented = this.item.isActive;\n        this.#id = props.id;\n        this.#ref = props.ref;\n        useRefById({\n            id: this.#id,\n            ref: this.#ref,\n        });\n        $effect.pre(() => {\n            const rAF = requestAnimationFrame(() => {\n                this.#isMountAnimationPrevented = false;\n            });\n            return () => {\n                cancelAnimationFrame(rAF);\n            };\n        });\n        watch([() => this.present, () => this.#ref.current], ([_, node]) => {\n            if (!node)\n                return;\n            afterTick(() => {\n                if (!this.#ref.current)\n                    return;\n                // get the dimensions of the element\n                this.#originalStyles = this.#originalStyles || {\n                    transitionDuration: node.style.transitionDuration,\n                    animationName: node.style.animationName,\n                };\n                // block any animations/transitions so the element renders at full dimensions\n                node.style.transitionDuration = \"0s\";\n                node.style.animationName = \"none\";\n                const rect = node.getBoundingClientRect();\n                this.#height = rect.height;\n                this.#width = rect.width;\n                // unblock any animations/transitions that were originally set if not the initial render\n                if (!this.#isMountAnimationPrevented) {\n                    const { animationName, transitionDuration } = this.#originalStyles;\n                    node.style.transitionDuration = transitionDuration;\n                    node.style.animationName = animationName;\n                }\n            });\n        });\n    }\n    snippetProps = $derived.by(() => ({\n        open: this.item.isActive,\n    }));\n    props = $derived.by(() => ({\n        id: this.#id.current,\n        \"data-state\": getDataOpenClosed(this.item.isActive),\n        \"data-disabled\": getDataDisabled(this.item.isDisabled),\n        \"data-orientation\": getDataOrientation(this.item.root.orientation.current),\n        [ACCORDION_CONTENT_ATTR]: \"\",\n        style: {\n            \"--bits-accordion-content-height\": `${this.#height}px`,\n            \"--bits-accordion-content-width\": `${this.#width}px`,\n        },\n    }));\n}\nclass AccordionHeaderState {\n    #id;\n    #ref;\n    #level;\n    #item;\n    constructor(props, item) {\n        this.#level = props.level;\n        this.#id = props.id;\n        this.#ref = props.ref;\n        useRefById({\n            id: this.#id,\n            ref: this.#ref,\n        });\n        this.#item = item;\n    }\n    props = $derived.by(() => ({\n        id: this.#id.current,\n        role: \"heading\",\n        \"aria-level\": this.#level.current,\n        \"data-heading-level\": this.#level.current,\n        \"data-state\": getDataOpenClosed(this.#item.isActive),\n        \"data-orientation\": getDataOrientation(this.#item.root.orientation.current),\n        [ACCORDION_HEADER_ATTR]: \"\",\n    }));\n}\nconst [setAccordionRootContext, getAccordionRootContext] = createContext(\"Accordion.Root\");\nconst [setAccordionItemContext, getAccordionItemContext] = createContext(\"Accordion.Item\");\nexport function useAccordionRoot(props) {\n    const { type, ...rest } = props;\n    const rootState = type === \"single\"\n        ? new AccordionSingleState(rest)\n        : new AccordionMultiState(rest);\n    return setAccordionRootContext(rootState);\n}\nexport function useAccordionItem(props) {\n    const rootState = getAccordionRootContext();\n    return setAccordionItemContext(new AccordionItemState({ ...props, rootState }));\n}\nexport function useAccordionTrigger(props) {\n    const item = getAccordionItemContext();\n    return new AccordionTriggerState(props, item);\n}\nexport function useAccordionContent(props) {\n    const item = getAccordionItemContext();\n    return new AccordionContentState(props, item);\n}\nexport function useAccordionHeader(props) {\n    const item = getAccordionItemContext();\n    return new AccordionHeaderState(props, item);\n}\n","<script lang=\"ts\">\n\timport { type WritableBox, box, mergeProps } from \"svelte-toolbelt\";\n\timport { useAccordionRoot } from \"../accordion.svelte.js\";\n\timport type { AccordionRootProps } from \"../types.js\";\n\timport { useId } from \"../../../internal/use-id.js\";\n\timport { noop } from \"../../../internal/noop.js\";\n\n\tlet {\n\t\tdisabled = false,\n\t\tchildren,\n\t\tchild,\n\t\ttype,\n\t\tvalue = $bindable(),\n\t\tref = $bindable(null),\n\t\tid = useId(),\n\t\tonValueChange = noop,\n\t\tloop = true,\n\t\torientation = \"vertical\",\n\t\tcontrolledValue = false,\n\t\t...restProps\n\t}: AccordionRootProps = $props();\n\n\tvalue === undefined && (value = type === \"single\" ? \"\" : []);\n\n\tconst rootState = useAccordionRoot({\n\t\ttype,\n\t\tvalue: box.with(\n\t\t\t() => value!,\n\t\t\t(v) => {\n\t\t\t\tif (controlledValue) {\n\t\t\t\t\tonValueChange(v as any);\n\t\t\t\t} else {\n\t\t\t\t\tvalue = v;\n\t\t\t\t\tonValueChange(v as any);\n\t\t\t\t}\n\t\t\t}\n\t\t) as WritableBox<string> | WritableBox<string[]>,\n\t\tid: box.with(() => id),\n\t\tdisabled: box.with(() => disabled),\n\t\tloop: box.with(() => loop),\n\t\torientation: box.with(() => orientation),\n\t\tref: box.with(\n\t\t\t() => ref,\n\t\t\t(v) => (ref = v)\n\t\t),\n\t});\n\n\tconst mergedProps = $derived(mergeProps(restProps, rootState.props));\n</script>\n\n{#if child}\n\t{@render child({ props: mergedProps })}\n{:else}\n\t<div {...mergedProps}>\n\t\t{@render children?.()}\n\t</div>\n{/if}\n","<script lang=\"ts\">\n\timport { box, mergeProps } from \"svelte-toolbelt\";\n\timport type { AccordionItemProps } from \"../types.js\";\n\timport { useAccordionItem } from \"../accordion.svelte.js\";\n\timport { useId } from \"../../../internal/use-id.js\";\n\n\tlet {\n\t\tid = useId(),\n\t\tdisabled = false,\n\t\tvalue = useId(),\n\t\tchildren,\n\t\tchild,\n\t\tref = $bindable(null),\n\t\t...restProps\n\t}: AccordionItemProps = $props();\n\n\tconst itemState = useAccordionItem({\n\t\tvalue: box.with(() => value),\n\t\tdisabled: box.with(() => disabled),\n\t\tid: box.with(() => id),\n\t\tref: box.with(\n\t\t\t() => ref,\n\t\t\t(v) => (ref = v)\n\t\t),\n\t});\n\n\tconst mergedProps = $derived(mergeProps(restProps, itemState.props));\n</script>\n\n{#if child}\n\t{@render child({ props: mergedProps })}\n{:else}\n\t<div {...mergedProps}>\n\t\t{@render children?.()}\n\t</div>\n{/if}\n","<script lang=\"ts\">\n\timport { box, mergeProps } from \"svelte-toolbelt\";\n\timport type { AccordionHeaderProps } from \"../types.js\";\n\timport { useAccordionHeader } from \"../accordion.svelte.js\";\n\timport { useId } from \"../../../internal/use-id.js\";\n\n\tlet {\n\t\tid = useId(),\n\t\tlevel = 2,\n\t\tchildren,\n\t\tchild,\n\t\tref = $bindable(null),\n\t\t...restProps\n\t}: AccordionHeaderProps = $props();\n\n\tconst headerState = useAccordionHeader({\n\t\tid: box.with(() => id),\n\t\tlevel: box.with(() => level),\n\t\tref: box.with(\n\t\t\t() => ref,\n\t\t\t(v) => (ref = v)\n\t\t),\n\t});\n\n\tconst mergedProps = $derived(mergeProps(restProps, headerState.props));\n</script>\n\n{#if child}\n\t{@render child({ props: mergedProps })}\n{:else}\n\t<div {...mergedProps}>\n\t\t{@render children?.()}\n\t</div>\n{/if}\n","<script lang=\"ts\">\n\timport { box, mergeProps } from \"svelte-toolbelt\";\n\timport type { AccordionTriggerProps } from \"../types.js\";\n\timport { useAccordionTrigger } from \"../accordion.svelte.js\";\n\timport { useId } from \"../../../internal/use-id.js\";\n\n\tlet {\n\t\tdisabled = false,\n\t\tref = $bindable(null),\n\t\tid = useId(),\n\t\tchildren,\n\t\tchild,\n\t\t...restProps\n\t}: AccordionTriggerProps = $props();\n\n\tconst triggerState = useAccordionTrigger({\n\t\tdisabled: box.with(() => disabled),\n\t\tid: box.with(() => id),\n\t\tref: box.with(\n\t\t\t() => ref,\n\t\t\t(v) => (ref = v)\n\t\t),\n\t});\n\n\tconst mergedProps = $derived(mergeProps(restProps, triggerState.props));\n</script>\n\n{#if child}\n\t{@render child({ props: mergedProps })}\n{:else}\n\t<button type=\"button\" {...mergedProps}>\n\t\t{@render children?.()}\n\t</button>\n{/if}\n","<script lang=\"ts\">\n\timport { box, mergeProps } from \"svelte-toolbelt\";\n\timport { useAccordionContent } from \"../accordion.svelte.js\";\n\timport type { AccordionContentProps } from \"../types.js\";\n\timport { PresenceLayer } from \"../../utilities/presence-layer/index.js\";\n\timport { useId } from \"../../../internal/use-id.js\";\n\n\tlet {\n\t\tchild,\n\t\tref = $bindable(null),\n\t\tid = useId(),\n\t\tforceMount = false,\n\t\tchildren,\n\t\t...restProps\n\t}: AccordionContentProps = $props();\n\n\tconst contentState = useAccordionContent({\n\t\tforceMount: box.with(() => forceMount),\n\t\tid: box.with(() => id),\n\t\tref: box.with(\n\t\t\t() => ref,\n\t\t\t(v) => (ref = v)\n\t\t),\n\t});\n</script>\n\n<PresenceLayer forceMount={true} present={contentState.present} {id}>\n\t{#snippet presence({ present })}\n\t\t{@const mergedProps = mergeProps(restProps, contentState.props, {\n\t\t\thidden: forceMount ? undefined : !present.current,\n\t\t})}\n\t\t{#if child}\n\t\t\t{@render child({\n\t\t\t\tprops: mergedProps,\n\t\t\t\t...contentState.snippetProps,\n\t\t\t})}\n\t\t{:else}\n\t\t\t<div {...mergedProps}>\n\t\t\t\t{@render children?.()}\n\t\t\t</div>\n\t\t{/if}\n\t{/snippet}\n</PresenceLayer>\n","// ListenerManager.ts\nimport type { ListenerContext } from './GlobalListenerManager';\n\ntype ListenerEntry = {\n\tevent: any; // Event source (e.g., browser.runtime.onMessage)\n\thandler: Function; // Listener function\n};\n\nexport class ListenerManager {\n\tprivate listeners: Set<ListenerEntry> = new Set();\n\tprivate context: ListenerContext;\n\n\tconstructor(context: ListenerContext) {\n\t\tthis.context = context;\n\t}\n\n\tadd(event: any, handler: Function) {\n\t\tconst wrappedHandler = async (...args: any[]) => {\n\t\t\tconst [message] = args;\n\n\t\t\t// Check if message should be handled in this context\n\t\t\tif (message.targetContext && message.targetContext !== this.context) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn await handler(...args);\n\t\t};\n\n\t\tif (event.hasListener(wrappedHandler)) {\n\t\t\tevent.removeListener(wrappedHandler);\n\t\t}\n\t\tevent.addListener(wrappedHandler);\n\t\tthis.listeners.add({ event, handler: wrappedHandler });\n\t}\n\n\tremove(event: any, handler: Function) {\n\t\tif (event.hasListener(handler)) {\n\t\t\tevent.removeListener(handler);\n\t\t\tthis.listeners.delete({ event, handler });\n\t\t}\n\t}\n\n\tremoveAll(context?: string) {\n\t\tthis.listeners.forEach(({ event, handler }) => {\n\t\t\tevent.removeListener(handler);\n\t\t});\n\t\tthis.listeners.clear();\n\t}\n}\n","import { ListenerManager } from '$lib/managers/ListenerManager';\nimport { browser_ext, isBrowserEnv } from '$lib/common/environment'; // UI context only\nimport type { Runtime } from 'webextension-polyfill'; // Correct Type Import\nimport { startCheckPrices, stopCheckPrices } from '$lib/tokens/prices';\nimport { handleLockDown } from '$lib/common/handlers';\nimport { globalListenerManager } from '$lib/managers/GlobalListenerManager';\nimport { log } from '$lib/common/logger-wrapper';\nimport { NotificationService } from '$lib/common/notifications';\nimport { activeTabUIStore } from '$lib/common/stores';\nimport { addWindowListeners, removeWindowListeners } from './windowListeners';\nimport { safeLogout } from '$lib/common/safeNavigate';\nimport { protectedContexts } from '$lib/common/globals';\nimport { playBeep } from '$lib/common/sound';\n\nexport const uiListenerManager = new ListenerManager('ui');\n\n// Register uiListenerManager globally\nglobalListenerManager.registerContext('ui', uiListenerManager);\n\n// Track cleanup state to prevent race conditions\nlet isClearing = false;\nlet clearingPromise: Promise<void> | null = null;\n\n// Get current context type\nfunction getCurrentContextType(): string {\n\ttry {\n\t\tif (typeof window === 'undefined') return 'unknown';\n\n\t\tconst pathname = window.location.pathname;\n\t\tconst href = window.location.href;\n\n\t\tif (pathname.includes('sidepanel') || href.includes('sidepanel')) {\n\t\t\treturn 'sidepanel';\n\t\t} else if (\n\t\t\tpathname.includes('index.html') ||\n\t\t\thref.includes('index.html') ||\n\t\t\tpathname === '/' ||\n\t\t\tpathname === ''\n\t\t) {\n\t\t\treturn 'popup-wallet';\n\t\t} else if (pathname.includes('dapp/popups') || href.includes('dapp/popups')) {\n\t\t\treturn 'popup-dapp';\n\t\t} else {\n\t\t\treturn 'popup-wallet'; // Default to popup-wallet for main extension\n\t\t}\n\t} catch (error) {\n\t\treturn 'unknown';\n\t}\n}\n\n// Check if current context needs idle protection\nfunction currentContextNeedsIdleProtection(): boolean {\n\tconst contextType = getCurrentContextType();\n\n\t// If context is unknown but we're in an extension popup, assume it needs protection\n\tif (contextType === 'unknown' && typeof window !== 'undefined') {\n\t\tconst href = window.location.href;\n\t\tif (\n\t\t\thref.includes('chrome-extension://') &&\n\t\t\t(href.includes('index.html') || href.endsWith('/'))\n\t\t) {\n\t\t\treturn true; // Assume it's a popup-wallet\n\t\t}\n\t}\n\n\treturn protectedContexts.includes(contextType);\n}\n\n// Check if message is targeted to this context type - be more permissive\nfunction isMessageTargeted(message: any): boolean {\n\t// If no target context types specified, message is for all contexts\n\tif (!message.targetContextTypes || !Array.isArray(message.targetContextTypes)) {\n\t\treturn true;\n\t}\n\n\tconst currentContextType = getCurrentContextType();\n\n\t// If current context is unknown but we're in a popup, assume it's popup-wallet\n\tconst effectiveContextType =\n\t\tcurrentContextType === 'unknown' ? 'popup-wallet' : currentContextType;\n\n\tlog.debug(`[uiListeners] Message targeting check:`, false, {\n\t\tmessageTargets: message.targetContextTypes,\n\t\tcurrentContext: currentContextType,\n\t\teffectiveContext: effectiveContextType,\n\t\tisTargeted: message.targetContextTypes.includes(effectiveContextType)\n\t});\n\n\treturn message.targetContextTypes.includes(effectiveContextType);\n}\n\n/**\n * Centralized cleanup function to avoid race conditions\n */\nasync function performEnhancedCleanup(source: string = 'unknown'): Promise<void> {\n\t// Prevent multiple simultaneous cleanup operations\n\tif (isClearing) {\n\t\tlog.info(`[uiListeners] Already clearing alerts from ${source}, waiting for completion`);\n\t\tif (clearingPromise) {\n\t\t\tawait clearingPromise;\n\t\t}\n\t\treturn;\n\t}\n\n\tisClearing = true;\n\tclearingPromise = _performCleanup(source);\n\n\ttry {\n\t\tawait clearingPromise;\n\t} finally {\n\t\tisClearing = false;\n\t\tclearingPromise = null;\n\t}\n}\n\n/**\n * Internal cleanup implementation\n */\nasync function _performCleanup(source: string): Promise<void> {\n\ttry {\n\t\tlog.info(`[uiListeners] Starting enhanced cleanup from: ${source}`);\n\n\t\t// 1. Clear badge and reset icon FIRST (most visible to user)\n\t\tif (browser_ext?.action) {\n\t\t\ttry {\n\t\t\t\tawait browser_ext.action.setBadgeText({ text: '' });\n\t\t\t\tawait browser_ext.action.setIcon({\n\t\t\t\t\tpath: {\n\t\t\t\t\t\t16: '/images/logoBullFav16x16.png',\n\t\t\t\t\t\t32: '/images/logoBullFav32x32.png',\n\t\t\t\t\t\t48: '/images/logoBullFav48x48.png',\n\t\t\t\t\t\t96: '/images/logoBullFav96x96.png',\n\t\t\t\t\t\t128: '/images/logoBullFav128x128.png'\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tlog.info('[uiListeners] Badge and icon cleared');\n\t\t\t} catch (error) {\n\t\t\t\tlog.warn('[uiListeners] Error clearing badge/icon:', false, error);\n\t\t\t}\n\t\t}\n\n\t\t// 2. Clear any browser notifications\n\t\tif (browser_ext?.notifications) {\n\t\t\ttry {\n\t\t\t\tconst notifications = await browser_ext.notifications.getAll();\n\t\t\t\tlog.info(`[uiListeners] Found ${Object.keys(notifications).length} notifications to clear`);\n\n\t\t\t\tconst clearPromises = Object.keys(notifications).map((id) =>\n\t\t\t\t\tbrowser_ext.notifications.clear(id).catch(() => {})\n\t\t\t\t);\n\t\t\t\tawait Promise.all(clearPromises);\n\t\t\t\tlog.info('[uiListeners] Browser notifications cleared');\n\t\t\t} catch (error) {\n\t\t\t\tlog.warn('[uiListeners] Error clearing notifications:', false, error);\n\t\t\t}\n\t\t}\n\n\t\t// 3. Stop any playing sounds and close audio contexts\n\t\tif (typeof window !== 'undefined') {\n\t\t\ttry {\n\t\t\t\t// Close any audio contexts we might have created\n\t\t\t\tconst audioContext = (window as any).__yakklAudioContext;\n\t\t\t\tif (audioContext && audioContext.state !== 'closed') {\n\t\t\t\t\tawait audioContext.close();\n\t\t\t\t\t(window as any).__yakklAudioContext = null;\n\t\t\t\t\tlog.info('[uiListeners] Audio context closed');\n\t\t\t\t}\n\n\t\t\t\t// Clear any stored audio elements\n\t\t\t\tconst audioElements = document.querySelectorAll('audio[data-yakkl-sound]');\n\t\t\t\taudioElements.forEach((audio) => {\n\t\t\t\t\t(audio as HTMLAudioElement).pause();\n\t\t\t\t\taudio.remove();\n\t\t\t\t});\n\n\t\t\t\tif (audioElements.length > 0) {\n\t\t\t\t\tlog.info(`[uiListeners] Cleared ${audioElements.length} audio elements`);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tlog.warn('Audio cleanup error (may be normal):', false, e);\n\t\t\t}\n\t\t}\n\n\t\t// 4. Clear in-app security warning\n\t\tif (typeof window !== 'undefined') {\n\t\t\ttry {\n\t\t\t\tconst { hideSecurityWarning } = await import('$lib/common/stores/securityWarning');\n\t\t\t\thideSecurityWarning();\n\t\t\t\tlog.info('[uiListeners] In-app security warning cleared');\n\t\t\t} catch (e) {\n\t\t\t\tlog.warn('Error clearing security warning:', false, e);\n\t\t\t}\n\t\t}\n\n\t\t// 5. Clear title flash and restore original title\n\t\tif (typeof window !== 'undefined') {\n\t\t\ttry {\n\t\t\t\t// Clear any title flash intervals\n\t\t\t\tif ((window as any).__yakklTitleFlashInterval) {\n\t\t\t\t\tclearInterval((window as any).__yakklTitleFlashInterval);\n\t\t\t\t\t(window as any).__yakklTitleFlashInterval = null;\n\t\t\t\t\tlog.info('[uiListeners] Title flash interval cleared');\n\t\t\t\t}\n\n\t\t\t\t// Restore original title if it was changed\n\t\t\t\tif ((window as any).__yakklOriginalTitle) {\n\t\t\t\t\tdocument.title = (window as any).__yakklOriginalTitle;\n\t\t\t\t\t(window as any).__yakklOriginalTitle = null;\n\t\t\t\t\tlog.info('[uiListeners] Original title restored');\n\t\t\t\t} else if (document.title.includes('🚨 URGENT')) {\n\t\t\t\t\t// Fallback title restoration\n\t\t\t\t\tdocument.title = document.title.replace(/🚨 URGENT[^!]*!/g, '').trim() || 'YAKKL Wallet';\n\t\t\t\t\tlog.info('[uiListeners] Title cleaned up (fallback)');\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tlog.warn('Title cleanup error:', false, e);\n\t\t\t}\n\t\t}\n\n\t\t// 6. Clear any countdown timers and intervals\n\t\tif (typeof window !== 'undefined') {\n\t\t\ttry {\n\t\t\t\t// Clear countdown interval\n\t\t\t\tif ((window as any).__yakklCountdownInterval) {\n\t\t\t\t\tclearInterval((window as any).__yakklCountdownInterval);\n\t\t\t\t\t(window as any).__yakklCountdownInterval = null;\n\t\t\t\t\tlog.info('[uiListeners] Countdown interval cleared');\n\t\t\t\t}\n\n\t\t\t\t// Clear any other YAKKL-specific intervals\n\t\t\t\tif ((window as any).__yakklIntervals) {\n\t\t\t\t\tconst intervals = (window as any).__yakklIntervals as number[];\n\t\t\t\t\tintervals.forEach((id) => clearInterval(id));\n\t\t\t\t\t(window as any).__yakklIntervals = [];\n\t\t\t\t\tlog.info(`[uiListeners] Cleared ${intervals.length} stored intervals`);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tlog.warn('Interval cleanup error:', false, e);\n\t\t\t}\n\t\t}\n\n\t\t// 7. Clear any pending alarms\n\t\tif (browser_ext?.alarms) {\n\t\t\ttry {\n\t\t\t\tawait Promise.all([\n\t\t\t\t\tbrowser_ext.alarms.clear('yakkl-lock-alarm').catch(() => {}),\n\t\t\t\t\tbrowser_ext.alarms.clear('yakkl-lock-notification').catch(() => {})\n\t\t\t\t]);\n\t\t\t\tlog.info('[uiListeners] Alarms cleared');\n\t\t\t} catch (error) {\n\t\t\t\tlog.debug('Alarm clearing error:', false, error);\n\t\t\t}\n\t\t}\n\n\t\t// 8. Use NotificationService centralized cleanup\n\t\ttry {\n\t\t\tawait NotificationService.clearAllAlertsEnhanced();\n\t\t\tlog.info('[uiListeners] NotificationService cleanup completed');\n\t\t} catch (error) {\n\t\t\tlog.warn('[uiListeners] NotificationService cleanup error:', false, error);\n\t\t}\n\n\t\tlog.info(`[uiListeners] Enhanced cleanup completed successfully from: ${source}`);\n\t} catch (error) {\n\t\tlog.warn(`[uiListeners] Enhanced cleanup failed from ${source}:`, false, error);\n\t\tthrow error;\n\t}\n}\n\nexport async function handleOnActiveTabUIChanged(\n\tmessage: any,\n\tsender: Runtime.MessageSender,\n\tsendResponse: (response?: any) => void\n): Promise<any> {\n\ttry {\n\t\tif (!browser_ext) return undefined;\n\t\tswitch (message.type) {\n\t\t\tcase 'setActiveTab': {\n\t\t\t\ttry {\n\t\t\t\t\tactiveTabUIStore.set(message.activeTab);\n\t\t\t\t\tsendResponse({ success: true });\n\t\t\t\t} catch (error) {\n\t\t\t\t\tlog.warn('Error on active tab change:', true, error);\n\t\t\t\t\tsendResponse({ success: false, error: error });\n\t\t\t\t}\n\t\t\t\treturn true; // Indicate asynchronous response\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\treturn false; // Let other listeners handle it\n\t\t\t}\n\t\t}\n\t} catch (error: any) {\n\t\tlog.warn('Error handling setActiveTab message:', true, error);\n\t\tif (isBrowserEnv())\n\t\t\tsendResponse({ success: false, error: error?.message || 'Unknown error occurred.' });\n\t\treturn true; // Indicate asynchronous response\n\t}\n}\n\nexport async function handleOnMessageForExtension(\n\tmessage: any,\n\tsender: Runtime.MessageSender,\n\tsendResponse: (response?: any) => void\n): Promise<any> {\n\ttry {\n\t\tif (!browser_ext) return undefined;\n\n\t\t// Enhanced logging for ALL messages\n\t\tlog.info('[uiListeners] Received message:', false, {\n\t\t\ttype: message.type,\n\t\t\tcurrentContext: getCurrentContextType(),\n\t\t\tneedsProtection: currentContextNeedsIdleProtection(),\n\t\t\tisTargeted: isMessageTargeted(message),\n\t\t\tmessageData: message\n\t\t});\n\n\t\tswitch (message.type) {\n\t\t\tcase 'lockdown': {\n\t\t\t\tlog.info('[uiListeners] Processing LOCKDOWN message', false, {\n\t\t\t\t\tcontext: getCurrentContextType(),\n\t\t\t\t\tneedsProtection: currentContextNeedsIdleProtection(),\n\t\t\t\t\tisTargeted: isMessageTargeted(message)\n\t\t\t\t});\n\n\t\t\t\t// Only handle lockdown if this context needs protection AND message is targeted to us\n\t\t\t\tif (!currentContextNeedsIdleProtection()) {\n\t\t\t\t\tlog.info(\n\t\t\t\t\t\t'[uiListeners] Ignoring lockdown - context does not need idle protection:',\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t\tgetCurrentContextType()\n\t\t\t\t\t);\n\t\t\t\t\treturn false; // Let other listeners handle it if any\n\t\t\t\t}\n\n\t\t\t\tif (!isMessageTargeted(message)) {\n\t\t\t\t\tlog.info(\n\t\t\t\t\t\t'[uiListeners] Ignoring lockdown - not targeted to this context type:',\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t\tgetCurrentContextType()\n\t\t\t\t\t);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tlog.info(\n\t\t\t\t\t'[uiListeners] EXECUTING lockdown for protected context:',\n\t\t\t\t\tfalse,\n\t\t\t\t\tgetCurrentContextType()\n\t\t\t\t);\n\n\t\t\t\ttry {\n\t\t\t\t\t// Execute all preliminary operations\n\t\t\t\t\tawait Promise.all([\n\t\t\t\t\t\tbrowser_ext.runtime.sendMessage({ type: 'stopPricingChecks' }).catch(() => {}),\n\t\t\t\t\t\thandleLockDown()\n\t\t\t\t\t]);\n\n\t\t\t\t\t// Use ENHANCED security alert for lockdown\n\t\t\t\t\tawait NotificationService.sendSecurityAlertEnhanced(\n\t\t\t\t\t\t'YAKKL Wallet locked due to inactivity. \\nTo prevent unauthorized transactions, your wallet has been locked and logged out.',\n\t\t\t\t\t\t{ contextMessage: 'Click extension icon to relaunch' }\n\t\t\t\t\t);\n\n\t\t\t\t\t// Send the response before logout\n\t\t\t\t\tsendResponse({ success: true, message: 'Lockdown initiated.' });\n\n\t\t\t\t\t// Delay logout slightly to ensure response is sent\n\t\t\t\t\tsetTimeout(() => safeLogout(), 50);\n\n\t\t\t\t\t// Return true to indicate we're using the sendResponse callback\n\t\t\t\t\treturn true;\n\t\t\t\t} catch (error: any) {\n\t\t\t\t\tlog.warn('Lockdown failed:', false, error);\n\t\t\t\t\tsendResponse({ success: false, error: error.message || 'Lockdown failed' });\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcase 'lockdownImminent': {\n\t\t\t\tlog.info('[uiListeners] Processing LOCKDOWN IMMINENT message', false, {\n\t\t\t\t\tcontext: getCurrentContextType(),\n\t\t\t\t\tneedsProtection: currentContextNeedsIdleProtection(),\n\t\t\t\t\tisTargeted: isMessageTargeted(message),\n\t\t\t\t\tenhanced: message.enhanced,\n\t\t\t\t\tdelayMs: message?.delayMs\n\t\t\t\t});\n\n\t\t\t\t// Only handle lockdown warning if this context needs protection AND message is targeted to us\n\t\t\t\tif (!currentContextNeedsIdleProtection()) {\n\t\t\t\t\tlog.info(\n\t\t\t\t\t\t'[uiListeners] Ignoring lockdownImminent - context does not need idle protection:',\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t\tgetCurrentContextType()\n\t\t\t\t\t);\n\t\t\t\t\treturn false; // Let other listeners handle it if any\n\t\t\t\t}\n\n\t\t\t\tif (!isMessageTargeted(message)) {\n\t\t\t\t\tlog.info(\n\t\t\t\t\t\t'[uiListeners] Ignoring lockdownImminent - not targeted to this context type:',\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t\tgetCurrentContextType()\n\t\t\t\t\t);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tlog.info(\n\t\t\t\t\t'[uiListeners] EXECUTING lockdownImminent for protected context:',\n\t\t\t\t\tfalse,\n\t\t\t\t\tgetCurrentContextType()\n\t\t\t\t);\n\n\t\t\t\ttry {\n\t\t\t\t\t// Check if this is an enhanced lockdown warning request\n\t\t\t\t\tif (message.enhanced) {\n\t\t\t\t\t\tlog.info('[uiListeners] Using ENHANCED lockdown warning with full attention features');\n\n\t\t\t\t\t\t// Use the enhanced version with icon changes, badge countdown, focus, etc.\n\t\t\t\t\t\tawait NotificationService.sendLockdownWarningEnhanced(message?.delayMs || 30000, {\n\t\t\t\t\t\t\tcontextMessage: 'Use YAKKL before timeout to stop lockdown'\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlog.info('[uiListeners] Using standard lockdown warning');\n\n\t\t\t\t\t\t// Use the original version\n\t\t\t\t\t\tawait NotificationService.sendLockdownWarning(message?.delayMs || 30000, {\n\t\t\t\t\t\t\tcontextMessage: 'Use YAKKL before timeout to stop lockdown'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tlog.info('[uiListeners] NotificationService.sendLockdownWarning completed');\n\t\t\t\t\tsendResponse({ success: true, message: 'Imminent lockdown notification sent.' });\n\t\t\t\t\treturn true;\n\t\t\t\t} catch (error: any) {\n\t\t\t\t\tlog.warn('[uiListeners] Lockdown imminent failed:', false, error);\n\t\t\t\t\tsendResponse({ success: false, error: error.message || 'Lockdown imminent failed' });\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcase 'LOCKDOWN_WARNING_ENHANCED': {\n\t\t\t\tlog.info('[uiListeners] Processing ENHANCED LOCKDOWN WARNING message', false, {\n\t\t\t\t\tcontext: getCurrentContextType(),\n\t\t\t\t\tdelayMs: message.delayMs,\n\t\t\t\t\twindowFocused: message.windowFocused\n\t\t\t\t});\n\n\t\t\t\tif (!currentContextNeedsIdleProtection()) {\n\t\t\t\t\tlog.info(\n\t\t\t\t\t\t'[uiListeners] Ignoring enhanced lockdown warning - context does not need protection'\n\t\t\t\t\t);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\t// 1. Focus window and get attention\n\t\t\t\t\tif (typeof window !== 'undefined') {\n\t\t\t\t\t\twindow.focus();\n\n\t\t\t\t\t\t// Flash document title for attention\n\t\t\t\t\t\tconst originalTitle = document.title;\n\t\t\t\t\t\tlet flashCount = 0;\n\t\t\t\t\t\tconst flashInterval = setInterval(() => {\n\t\t\t\t\t\t\tdocument.title =\n\t\t\t\t\t\t\t\tflashCount % 2 === 0 ? '🚨 URGENT - YAKKL Security Alert!' : originalTitle;\n\t\t\t\t\t\t\tflashCount++;\n\n\t\t\t\t\t\t\tif (flashCount >= 10) {\n\t\t\t\t\t\t\t\t// Flash 5 times\n\t\t\t\t\t\t\t\tclearInterval(flashInterval);\n\t\t\t\t\t\t\t\tdocument.title = originalTitle;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, 500);\n\n\t\t\t\t\t\t// Store for cleanup\n\t\t\t\t\t\t(window as any).__yakklTitleFlashInterval = flashInterval;\n\t\t\t\t\t\t(window as any).__yakklOriginalTitle = originalTitle;\n\t\t\t\t\t}\n\n\t\t\t\t\t// 2. Show enhanced in-app security warning\n\t\t\t\t\tif (typeof window !== 'undefined') {\n\t\t\t\t\t\tconst { showSecurityWarning } = await import('$lib/common/stores/securityWarning');\n\t\t\t\t\t\tshowSecurityWarning(message.delaySeconds || Math.ceil(message.delayMs / 1000), () => {\n\t\t\t\t\t\t\tlog.info('[uiListeners] Enhanced security warning completed');\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tlog.info('[uiListeners] Enhanced lockdown warning processed');\n\t\t\t\t\tsendResponse({ success: true, message: 'Enhanced lockdown warning displayed.' });\n\t\t\t\t\treturn true;\n\t\t\t\t} catch (error: any) {\n\t\t\t\t\tlog.warn('[uiListeners] Enhanced lockdown warning failed:', false, error);\n\t\t\t\t\tsendResponse({ success: false, error: error.message });\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcase 'SECURITY_ALERT_ENHANCED': {\n\t\t\t\tlog.info('[uiListeners] Processing ENHANCED SECURITY ALERT message');\n\n\t\t\t\tif (!currentContextNeedsIdleProtection()) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\t// Focus window\n\t\t\t\t\tif (typeof window !== 'undefined') {\n\t\t\t\t\t\twindow.focus();\n\t\t\t\t\t}\n\n\t\t\t\t\t// Show enhanced security alert using existing method\n\t\t\t\t\tawait NotificationService.sendSecurityAlert(message.message, message.options, message.id);\n\n\t\t\t\t\tlog.info('[uiListeners] Enhanced security alert processed');\n\t\t\t\t\tsendResponse({ success: true });\n\t\t\t\t\treturn true;\n\t\t\t\t} catch (error: any) {\n\t\t\t\t\tlog.warn('[uiListeners] Enhanced security alert failed:', false, error);\n\t\t\t\t\tsendResponse({ success: false, error: error.message });\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcase 'PLAY_URGENT_SOUND': {\n\t\t\t\ttry {\n\t\t\t\t\tif (typeof window !== 'undefined' && window.AudioContext) {\n\t\t\t\t\t\tplayBeep(800, 0.2, 0.3);\n\t\t\t\t\t}\n\t\t\t\t\tsendResponse({ success: true });\n\t\t\t\t\treturn true;\n\t\t\t\t} catch (error: any) {\n\t\t\t\t\tsendResponse({ success: false, error: error.message });\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcase 'CLEAR_ALL_ENHANCED_ALERTS': {\n\t\t\t\tlog.info('[uiListeners] Received CLEAR_ALL_ENHANCED_ALERTS message', false, {\n\t\t\t\t\tcontext: getCurrentContextType(),\n\t\t\t\t\tsource: message.source,\n\t\t\t\t\ttimestamp: message.timestamp\n\t\t\t\t});\n\n\t\t\t\ttry {\n\t\t\t\t\t// Use centralized cleanup to avoid race conditions\n\t\t\t\t\tawait performEnhancedCleanup(`message_${message.source || 'unknown'}`);\n\n\t\t\t\t\tlog.info('[uiListeners] All enhanced alerts cleared successfully');\n\t\t\t\t\tsendResponse({ success: true });\n\t\t\t\t\treturn true;\n\t\t\t\t} catch (error: any) {\n\t\t\t\t\tlog.warn('[uiListeners] Failed to clear enhanced alerts:', false, error);\n\t\t\t\t\tsendResponse({ success: false, error: error.message });\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcase 'CLEAR_NOTIFICATION': {\n\t\t\t\tlog.info('[uiListeners] Handling CLEAR_NOTIFICATION:', false, message.notificationId);\n\n\t\t\t\ttry {\n\t\t\t\t\t// Clear the specific notification\n\t\t\t\t\tif (browser_ext.notifications && message.notificationId) {\n\t\t\t\t\t\tawait browser_ext.notifications.clear(message.notificationId);\n\t\t\t\t\t}\n\n\t\t\t\t\t// May not be needed - but clear badge just in case\n\t\t\t\t\tif (browser_ext.action) {\n\t\t\t\t\t\tawait browser_ext.action.setBadgeText({ text: '' });\n\t\t\t\t\t\tawait browser_ext.action.setIcon({\n\t\t\t\t\t\t\tpath: {\n\t\t\t\t\t\t\t\t16: '/images/logoBullFav16x16.png',\n\t\t\t\t\t\t\t\t32: '/images/logoBullFav32x32.png',\n\t\t\t\t\t\t\t\t48: '/images/logoBullFav48x48.png',\n\t\t\t\t\t\t\t\t96: '/images/logoBullFav96x96.png',\n\t\t\t\t\t\t\t\t128: '/images/logoBullFav128x128.png'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tsendResponse({ success: true, message: 'Notification cleared from UI' });\n\t\t\t\t} catch (error: any) {\n\t\t\t\t\tlog.warn('[uiListeners] Error clearing notification:', false, error);\n\t\t\t\t\tsendResponse({ success: false, error: error.message });\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tcase 'CLEAR_NOTIFICATION_ENHANCED': {\n\t\t\t\tlog.info('[uiListeners] Clearing enhanced notification:', false, message.notificationId);\n\n\t\t\t\ttry {\n\t\t\t\t\t// Clear the specific notification\n\t\t\t\t\tif (browser_ext.notifications && message.notificationId) {\n\t\t\t\t\t\tawait browser_ext.notifications.clear(message.notificationId);\n\t\t\t\t\t}\n\n\t\t\t\t\t// If it's a lockdown warning, clear enhanced features\n\t\t\t\t\tif (message.notificationId.includes('lockdown-warning')) {\n\t\t\t\t\t\tawait performEnhancedCleanup('enhanced_notification_clear');\n\t\t\t\t\t}\n\n\t\t\t\t\tlog.info('[uiListeners] Enhanced notification cleared');\n\t\t\t\t\tsendResponse({ success: true });\n\t\t\t\t\treturn true;\n\t\t\t\t} catch (error: any) {\n\t\t\t\t\tlog.warn('[uiListeners] Failed to clear enhanced notification:', false, error);\n\t\t\t\t\tsendResponse({ success: false, error: error.message });\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcase 'focusWindow': {\n\t\t\t\tlog.info('[uiListeners] Processing FOCUS WINDOW message');\n\n\t\t\t\ttry {\n\t\t\t\t\t// Try to focus the current window\n\t\t\t\t\tif (typeof window !== 'undefined') {\n\t\t\t\t\t\twindow.focus();\n\n\t\t\t\t\t\t// If the window is minimized or hidden, try to bring it to front\n\t\t\t\t\t\tif (document.hidden || document.visibilityState === 'hidden') {\n\t\t\t\t\t\t\t// Request user attention\n\t\t\t\t\t\t\tif ('requestIdleCallback' in window) {\n\t\t\t\t\t\t\t\trequestIdleCallback(() => {\n\t\t\t\t\t\t\t\t\twindow.focus();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Try to use the Page Visibility API to detect when visible\n\t\t\t\t\t\t\tconst handleVisibilityChange = () => {\n\t\t\t\t\t\t\t\tif (!document.hidden) {\n\t\t\t\t\t\t\t\t\twindow.focus();\n\t\t\t\t\t\t\t\t\tdocument.removeEventListener('visibilitychange', handleVisibilityChange);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tdocument.addEventListener('visibilitychange', handleVisibilityChange);\n\n\t\t\t\t\t\t\t// Clean up listener after 30 seconds\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tdocument.removeEventListener('visibilitychange', handleVisibilityChange);\n\t\t\t\t\t\t\t}, 30000);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Flash the document title to get attention\n\t\t\t\t\t\tconst originalTitle = document.title;\n\t\t\t\t\t\tlet flashCount = 0;\n\t\t\t\t\t\tconst flashInterval = setInterval(() => {\n\t\t\t\t\t\t\tdocument.title =\n\t\t\t\t\t\t\t\tflashCount % 2 === 0 ? '🚨 URGENT - YAKKL Security Alert!' : originalTitle;\n\t\t\t\t\t\t\tflashCount++;\n\n\t\t\t\t\t\t\tif (flashCount >= 10) {\n\t\t\t\t\t\t\t\t// Flash 5 times\n\t\t\t\t\t\t\t\tclearInterval(flashInterval);\n\t\t\t\t\t\t\t\tdocument.title = originalTitle;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, 500);\n\n\t\t\t\t\t\t// Store for cleanup\n\t\t\t\t\t\t(window as any).__yakklTitleFlashInterval = flashInterval;\n\t\t\t\t\t\t(window as any).__yakklOriginalTitle = originalTitle;\n\n\t\t\t\t\t\tlog.info('✅ [uiListeners] Window focus and attention requested');\n\t\t\t\t\t}\n\n\t\t\t\t\tsendResponse({ success: true, message: 'Window focus requested.' });\n\t\t\t\t\treturn true;\n\t\t\t\t} catch (error: any) {\n\t\t\t\t\tlog.warn('[uiListeners] Focus window failed:', false, error);\n\t\t\t\t\tsendResponse({ success: false, error: error.message || 'Focus window failed' });\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcase 'clearAllAlerts': {\n\t\t\t\tlog.info('[uiListeners] Processing CLEAR ALL ALERTS message');\n\n\t\t\t\ttry {\n\t\t\t\t\t// Use centralized cleanup\n\t\t\t\t\tawait performEnhancedCleanup('clearAllAlerts_message');\n\n\t\t\t\t\tlog.info('[uiListeners] All alerts cleared');\n\t\t\t\t\tsendResponse({ success: true, message: 'All alerts cleared.' });\n\t\t\t\t\treturn true;\n\t\t\t\t} catch (error: any) {\n\t\t\t\t\tlog.warn('[uiListeners] Clear alerts failed:', false, error);\n\t\t\t\t\tsendResponse({ success: false, error: error.message || 'Clear alerts failed' });\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcase 'IDLE_STATUS_CHANGED': {\n\t\t\t\tlog.info('[uiListeners] Processing IDLE STATUS CHANGED message', false, {\n\t\t\t\t\tstate: message.state,\n\t\t\t\t\tcontext: getCurrentContextType(),\n\t\t\t\t\tneedsProtection: currentContextNeedsIdleProtection(),\n\t\t\t\t\tisTargeted: isMessageTargeted(message),\n\t\t\t\t\tisClearing: isClearing\n\t\t\t\t});\n\n\t\t\t\t// Only handle idle status changes for protected contexts\n\t\t\t\tif (!currentContextNeedsIdleProtection()) {\n\t\t\t\t\tlog.debug(\n\t\t\t\t\t\t'[uiListeners] Ignoring idle status change - context does not need idle protection:',\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t\tgetCurrentContextType()\n\t\t\t\t\t);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif (!isMessageTargeted(message)) {\n\t\t\t\t\tlog.debug(\n\t\t\t\t\t\t'[uiListeners] Ignoring idle status change - not targeted to this context type:',\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t\tgetCurrentContextType()\n\t\t\t\t\t);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// Handle idle status change for protected contexts\n\t\t\t\tlog.info(\n\t\t\t\t\t`[uiListeners] PROCESSING idle status changed to ${message.state} for protected context ${getCurrentContextType()}`\n\t\t\t\t);\n\n\t\t\t\t// If becoming active, clear all enhanced alerts\n\t\t\t\tif (message.state === 'active') {\n\t\t\t\t\tlog.info('[uiListeners] Active state detected, performing centralized cleanup');\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\t// Use centralized cleanup to avoid race conditions\n\t\t\t\t\t\tawait performEnhancedCleanup('idle_status_active');\n\t\t\t\t\t\tlog.info('[uiListeners] Centralized cleanup completed for active state');\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tlog.warn('[uiListeners] Failed to perform centralized cleanup:', false, error);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Dispatch event for UI components\n\t\t\t\tif (typeof window !== 'undefined') {\n\t\t\t\t\tlog.info('[uiListeners] Dispatching yakklIdleStateChanged event');\n\t\t\t\t\twindow.dispatchEvent(\n\t\t\t\t\t\tnew CustomEvent('yakklIdleStateChanged', {\n\t\t\t\t\t\t\tdetail: {\n\t\t\t\t\t\t\t\tstate: message.state,\n\t\t\t\t\t\t\t\ttimestamp: message.timestamp\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn false; // Allow other listeners to process this message\n\t\t\t}\n\n\t\t\tdefault: {\n\t\t\t\tlog.debug(`[uiListeners] Unhandled message type: ${message.type}`);\n\t\t\t\treturn false; // Let other listeners handle it\n\t\t\t}\n\t\t}\n\t} catch (e: any) {\n\t\tlog.warn('[uiListeners] Error handling message:', false, e);\n\t\tif (isBrowserEnv())\n\t\t\tsendResponse({ success: false, error: e?.message || 'Unknown error occurred.' });\n\t\treturn true; // Indicate asynchronous response\n\t}\n}\n\n// Message handler for pricing checks\nexport function handleOnMessageForPricing(\n\tmessage: any,\n\tsender: Runtime.MessageSender,\n\tsendResponse: (response?: any) => void\n): boolean {\n\tif (!browser_ext) return false;\n\n\ttry {\n\t\tswitch (message.type) {\n\t\t\tcase 'startPricingChecks': {\n\t\t\t\tstartCheckPrices();\n\t\t\t\tsendResponse({ success: true, message: 'Price checks initiated.' });\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tcase 'stopPricingChecks': {\n\t\t\t\tstopCheckPrices();\n\t\t\t\tsendResponse({ success: true, message: 'Stop price checks initiated.' });\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\treturn false; // Let other listeners handle it\n\t\t\t}\n\t\t}\n\t} catch (e: any) {\n\t\tlog.warn('Error handling message:', e);\n\t\tif (isBrowserEnv())\n\t\t\tsendResponse({ success: false, error: e?.message || 'Unknown error occurred.' });\n\t\treturn true; // Indicate asynchronous response\n\t}\n}\n\nexport function addUIListeners() {\n\tif (!browser_ext) return;\n\n\tlog.info('[uiListeners] Adding UI listeners for context:', false, getCurrentContextType());\n\n\tuiListenerManager.add(browser_ext.runtime.onMessage, handleOnActiveTabUIChanged);\n\tuiListenerManager.add(browser_ext.runtime.onMessage, handleOnMessageForExtension);\n\tuiListenerManager.add(browser_ext.runtime.onMessage, handleOnMessageForPricing);\n\n\taddWindowListeners();\n}\n\nexport function removeUIListeners() {\n\tif (!browser_ext) return;\n\tlog.info('[uiListeners] Removing UI listeners');\n\tuiListenerManager.removeAll();\n\tremoveWindowListeners();\n}\n","<script lang=\"ts\">\n\timport type { TokenData } from '$lib/common/interfaces';\n\timport { log } from '$lib/common/logger-wrapper';\n\timport { formatPrice, getTokenChange } from '$lib/utilities/utilities';\n\timport ProtectedValue from './ProtectedValue.svelte';\n\timport Tooltip from './Tooltip.svelte';\n\n\tlet {\n\t\ttoken,\n\t\tlocked = true,\n\t\tclassName = ''\n\t} = $props<{\n\t\ttoken: TokenData;\n\t\tlocked?: boolean;\n\t\tclassName?: string;\n\t}>();\n\n\t// Determine the 24h percentChange color\n\tconst percentChange: number | null = getTokenChange(token.change, '24h');\n\tconst percentChangeColor =\n\t\tpercentChange === null\n\t\t\t? 'text-slate-900'\n\t\t\t: percentChange >= 0\n\t\t\t\t? 'text-green-500'\n\t\t\t\t: 'text-red-500';\n\n\tlet balance = $state(token?.balance);\n\tlet price = $state(0);\n\tlet priceFormatted = $state('');\n\tlet value = $state(0);\n\tlet valueFormatted = $state('');\n\n\t$effect(() => {\n\t\tbalance = token?.balance;\n\t\tprice = token?.price?.price ?? 0;\n\t\tpriceFormatted = formatPrice(price);\n\t\tvalue = balance ? Number(balance) * price : 0;\n\t\tvalueFormatted = formatPrice(value);\n\t});\n\n\tlog.info('TokenLineView', false, {\n\t\ttoken,\n\t\tlocked,\n\t\tbalance: token.balance,\n\t\tquantity: token.quantity,\n\t\tprice: token.price?.price\n\t});\n\n\t// Function to format the tooltip price based on the value\n\tfunction getTooltipPrice(): string {\n\t\tif (price < 0.01) {\n\t\t\t// Format with token decimals and trim trailing zeros\n\t\t\tconst formatted = price.toFixed(token.decimals);\n\t\t\treturn `$${formatted.replace(/\\.?0+$/, '')}`;\n\t\t}\n\t\treturn `${formatPrice(price)}`;\n\t}\n</script>\n\n{#if token.url}\n\t<a\n\t\thref={token.url}\n\t\ttarget=\"_blank\"\n\t\trel=\"noopener noreferrer\"\n\t\tclass=\"flex justify-between items-center py-1.5 px-2 border-b border-gray-200 border-solid hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors cursor-pointer {className}\"\n\t>\n\t\t<div class=\"flex items-center gap-2 item\">\n\t\t\t{#if token.logoURI}\n\t\t\t\t<img src={token.logoURI} alt={token.symbol} class=\"w-6 h-6 rounded-full\" />\n\t\t\t{/if}\n\t\t\t<div>\n\t\t\t\t<p class=\"text-sm font-medium\">{token.name} ({token.symbol})</p>\n\t\t\t\t<!-- <p class=\"text-xs text-gray-500\">Balance: <ProtectedValue value={token.balance?.toString() ?? '0'} placeholder=\"*******\" /></p> -->\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"text-right\">\n\t\t\t<Tooltip content={getTooltipPrice()}>\n\t\t\t\t<p class=\"text-sm font-medium\">\n\t\t\t\t\t{price < 0.01\n\t\t\t\t\t\t? '< .01 ~' + formatPrice(token.price?.price ?? 0)\n\t\t\t\t\t\t: formatPrice(token.price?.price ?? 0)}\n\t\t\t\t</p>\n\t\t\t</Tooltip>\n\t\t\t<!-- <p class=\"text-xs {percentChangeColor}\">{percentChange ? `${percentChange > 0 ? '+' : ''}${percentChange}%` : '--'}</p> -->\n\t\t</div>\n\t</a>\n{:else}\n\t<div\n\t\tclass=\"flex justify-between items-center py-1.5 px-2 border-b border-gray-200 border-solid hover:bg-gray-50 dark:hover:bg-zinc-800 item {className}\"\n\t>\n\t\t<div class=\"flex items-center gap-2\">\n\t\t\t{#if token.logoURI}\n\t\t\t\t<img src={token.logoURI} alt={token.symbol} class=\"w-6 h-6 rounded-full\" />\n\t\t\t{/if}\n\t\t\t<div>\n\t\t\t\t<p class=\"text-sm font-medium\">{token.name} ({token.symbol})</p>\n\t\t\t\t<!-- <p class=\"text-xs text-gray-500\">Balance: <ProtectedValue value={token.balance?.toString() ?? '0'} placeholder=\"*******\" /></p> -->\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"text-right\">\n\t\t\t<Tooltip content={getTooltipPrice()}>\n\t\t\t\t<p class=\"text-sm font-medium\">\n\t\t\t\t\t{price < 0.01\n\t\t\t\t\t\t? '< .01 ~' + formatPrice(token.price?.price ?? 0)\n\t\t\t\t\t\t: formatPrice(token.price?.price ?? 0)}\n\t\t\t\t</p>\n\t\t\t</Tooltip>\n\t\t\t<!-- <p class=\"text-xs {percentChangeColor}\">{percentChange ? `${percentChange > 0 ? '+' : ''}${percentChange}%` : '--'}</p> -->\n\t\t</div>\n\t</div>\n{/if}\n","<script lang=\"ts\">\n\timport { Accordion as AccordionPrimitive, type WithoutChild } from 'bits-ui';\n\timport { cn } from '$lib/utils.js';\n\n\tlet {\n\t\tref = $bindable(null),\n\t\tclass: className,\n\t\tchildren,\n\t\t...restProps\n\t}: WithoutChild<AccordionPrimitive.ContentProps> = $props();\n</script>\n\n<AccordionPrimitive.Content\n\tbind:ref\n\tclass={cn(\n\t\t'data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm transition-all',\n\t\tclassName\n\t)}\n\t{...restProps}\n>\n\t<div class=\"pb-4 pt-0\">\n\t\t{@render children?.()}\n\t</div>\n</AccordionPrimitive.Content>\n","<script lang=\"ts\">\n\timport { Accordion as AccordionPrimitive } from 'bits-ui';\n\timport { cn } from '$lib/utils.js';\n\n\tlet {\n\t\tref = $bindable(null),\n\t\tclass: className,\n\t\t...restProps\n\t}: AccordionPrimitive.ItemProps = $props();\n</script>\n\n<AccordionPrimitive.Item bind:ref class={cn('border-b', className)} {...restProps} />\n","/**\n * @license lucide-svelte v0.468.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\nconst defaultAttributes = {\n    xmlns: 'http://www.w3.org/2000/svg',\n    width: 24,\n    height: 24,\n    viewBox: '0 0 24 24',\n    fill: 'none',\n    stroke: 'currentColor',\n    'stroke-width': 2,\n    'stroke-linecap': 'round',\n    'stroke-linejoin': 'round',\n};\nexport default defaultAttributes;\n","<script>import defaultAttributes from './defaultAttributes';\nexport let name = undefined;\nexport let color = 'currentColor';\nexport let size = 24;\nexport let strokeWidth = 2;\nexport let absoluteStrokeWidth = false;\nexport let iconNode = [];\nconst mergeClasses = (...classes) => classes.filter((className, index, array) => {\n    return Boolean(className) && array.indexOf(className) === index;\n})\n    .join(' ');\n</script>\n\n<svg\n  {...defaultAttributes}\n  {...$$restProps}\n  width={size}\n  height={size}\n  stroke={color}\n  stroke-width={\n    absoluteStrokeWidth\n      ? Number(strokeWidth) * 24 / Number(size)\n      : strokeWidth\n  }\n  class={\n    mergeClasses(\n      'lucide-icon',\n      'lucide',\n      name ? `lucide-${name}`: '',\n      $$props.class\n    )\n  }\n>\n  {#each iconNode as [tag, attrs]}\n    <svelte:element this={tag} {...attrs}/>\n  {/each}\n  <slot />\n</svg>\n","<script>/**\n * @license lucide-svelte v0.468.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\nimport Icon from '../Icon.svelte';\nconst iconNode = [[\"path\", { \"d\": \"m6 9 6 6 6-6\" }]];\n/**\n * @component @name ChevronDown\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtNiA5IDYgNiA2LTYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/chevron-down\n * @see https://lucide.dev/guide/packages/lucide-svelte - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {FunctionalComponent} Svelte component\n *\n */\n</script>\n\n<Icon name=\"chevron-down\" {...$$props} iconNode={iconNode}>\n  <slot/>\n</Icon>\n","<script lang=\"ts\">\n\timport { Accordion as AccordionPrimitive, type WithoutChild } from 'bits-ui';\n\timport ChevronDown from 'lucide-svelte/icons/chevron-down';\n\timport { cn } from '$lib/utils.js';\n\n\tlet {\n\t\tref = $bindable(null),\n\t\tclass: className,\n\t\tlevel = 3,\n\t\tchildren,\n\t\t...restProps\n\t}: WithoutChild<AccordionPrimitive.TriggerProps> & {\n\t\tlevel?: AccordionPrimitive.HeaderProps['level'];\n\t} = $props();\n</script>\n\n<AccordionPrimitive.Header {level} class=\"flex\">\n\t<AccordionPrimitive.Trigger\n\t\tbind:ref\n\t\tclass={cn(\n\t\t\t'flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180',\n\t\t\tclassName\n\t\t)}\n\t\t{...restProps}\n\t>\n\t\t{@render children?.()}\n\t\t<ChevronDown class=\"size-4 shrink-0 transition-transform duration-200\" />\n\t</AccordionPrimitive.Trigger>\n</AccordionPrimitive.Header>\n","import { Accordion as AccordionPrimitive } from 'bits-ui';\nimport Content from './accordion-content.svelte';\nimport Item from './accordion-item.svelte';\nimport Trigger from './accordion-trigger.svelte';\nconst Root = AccordionPrimitive.Root;\n\nexport {\n\tRoot,\n\tContent,\n\tItem,\n\tTrigger,\n\t//\n\tRoot as Accordion,\n\tContent as AccordionContent,\n\tItem as AccordionItem,\n\tTrigger as AccordionTrigger\n};\n","<script lang=\"ts\">\n\timport { getYakklCombinedToken, yakklCombinedTokenStore, getSettings } from '$lib/common/stores';\n\timport type { Settings, TokenData } from '$lib/common';\n\timport { onMount } from 'svelte';\n\timport { log } from '$lib/managers/Logger';\n\timport { browser_ext } from '$lib/common/environment';\n\timport { handleOnMessageForPricing } from '$lib/common/listeners/ui/uiListeners';\n\timport { startPricingChecks } from '$lib/tokens/prices';\n\timport { updateTokenPrices } from '$lib/common/tokenPriceManager';\n\timport TokenLineView from './TokenLineView.svelte';\n\timport * as Accordion from './ui/accordion';\n\timport { cn } from '$lib/utils';\n\n\tinterface Props {\n\t\tmaxVisibleTokens?: number; // 0 means show all\n\t\tmaxTokens?: number;\n\t\tlocked?: boolean;\n\t\tclassName?: string;\n\t}\n\n\tlet {\n\t\tmaxVisibleTokens = 0,\n\t\tlocked = true,\n\t\tmaxTokens = locked ? 3 : 0,\n\t\tclassName = ''\n\t}: Props = $props();\n\n\tlet tokens: TokenData[] = $state([]);\n\tlet visibleTokens: TokenData[] = $state([]);\n\tlet remainingTokens: TokenData[] = $state([]);\n\tlet isExpanded = $state(false);\n\n\tlog.info('TokenComponentList', false, 'Mounting');\n\n\tonMount(async (): Promise<any> => {\n\t\tlog.info('TokenComponentList', false, 'onMount');\n\n\t\tconst settings: Settings = await getSettings();\n\t\tif (!settings.init || !settings.legal.termsAgreed) {\n\t\t\ttokens = [];\n\t\t\tupdateTokenDisplay();\n\t\t} else {\n\t\t\tgetYakklCombinedToken().then((initialTokens) => {\n\t\t\t\tconsole.log('TokenComponentList: combined tokens loaded', initialTokens.length);\n\n\t\t\t\t// If no tokens are loaded, try to trigger loading them\n\t\t\t\tif (initialTokens.length === 0) {\n\t\t\t\t\tlog.warn(\n\t\t\t\t\t\t'TokenComponentList: No tokens loaded from combined store, attempting to load defaults'\n\t\t\t\t\t);\n\t\t\t\t\timport('$lib/managers/tokens/loadDefaultTokens').then(({ loadDefaultTokens }) => {\n\t\t\t\t\t\tloadDefaultTokens().then(() => {\n\t\t\t\t\t\t\t// After loading defaults, attempt to get combined tokens again\n\t\t\t\t\t\t\tgetYakklCombinedToken().then((reloadedTokens) => {\n\t\t\t\t\t\t\t\tconsole.log('TokenComponentList: tokens after reload', reloadedTokens.length);\n\t\t\t\t\t\t\t\tconst effectiveMaxTokens = locked ? maxTokens : maxTokens > 0 ? maxTokens : 0;\n\t\t\t\t\t\t\t\ttokens =\n\t\t\t\t\t\t\t\t\teffectiveMaxTokens > 0\n\t\t\t\t\t\t\t\t\t\t? reloadedTokens.slice(0, effectiveMaxTokens)\n\t\t\t\t\t\t\t\t\t\t: reloadedTokens;\n\t\t\t\t\t\t\t\tupdateTokenDisplay();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tconst effectiveMaxTokens = locked ? maxTokens : maxTokens > 0 ? maxTokens : 0;\n\t\t\t\ttokens =\n\t\t\t\t\teffectiveMaxTokens > 0 ? initialTokens.slice(0, effectiveMaxTokens) : initialTokens;\n\t\t\t\tupdateTokenDisplay();\n\t\t\t});\n\t\t}\n\n\t\tif (browser_ext) {\n\t\t\tbrowser_ext.runtime.onMessage.addListener(handleOnMessageForPricing);\n\t\t\tbrowser_ext.runtime.sendMessage({ action: 'getTokenData' });\n\n\t\t\tstartPricingChecks();\n\t\t\tupdateTokenPrices(); // Initial token price update\n\t\t}\n\n\t\t// Subscribe to store changes\n\t\tconst unsubscribe = yakklCombinedTokenStore.subscribe((newTokens) => {\n\t\t\t// Apply the same token limit logic when store updates\n\t\t\tconst effectiveMaxTokens = locked ? maxTokens : maxTokens > 0 ? maxTokens : 0;\n\t\t\ttokens = effectiveMaxTokens > 0 ? newTokens.slice(0, effectiveMaxTokens) : newTokens;\n\t\t\tupdateTokenDisplay();\n\t\t});\n\n\t\treturn () => {\n\t\t\tunsubscribe();\n\t\t\tif (browser_ext) {\n\t\t\t\tbrowser_ext.runtime.onMessage.removeListener(handleOnMessageForPricing);\n\t\t\t}\n\t\t};\n\t});\n\n\tfunction updateTokenDisplay() {\n\t\t// If maxVisibleTokens is 0 or we have fewer tokens than maxVisibleTokens, show all tokens\n\t\tif (maxVisibleTokens === 0 || tokens.length <= maxVisibleTokens) {\n\t\t\tvisibleTokens = tokens;\n\t\t\tremainingTokens = [];\n\t\t} else {\n\t\t\tvisibleTokens = tokens.slice(0, maxVisibleTokens);\n\t\t\tremainingTokens = tokens.slice(maxVisibleTokens);\n\t\t}\n\t\tconsole.log('updateTokenDisplay', {\n\t\t\tvisibleTokens,\n\t\t\tremainingTokens,\n\t\t\tmaxVisibleTokens,\n\t\t\tmaxTokens,\n\t\t\tlocked\n\t\t});\n\t}\n\n\tfunction toggleExpand() {\n\t\tisExpanded = !isExpanded;\n\t}\n</script>\n\n<div class={cn('flex flex-col', className)}>\n\t<div class=\"space-y-1\">\n\t\t{#each visibleTokens as token}\n\t\t\t<TokenLineView {token} {locked} />\n\t\t{/each}\n\t</div>\n\n\t{#if remainingTokens.length > 0}\n\t\t<Accordion.Root type=\"single\">\n\t\t\t<Accordion.Item value=\"remaining-tokens\">\n\t\t\t\t<Accordion.Trigger\n\t\t\t\t\tclass=\"w-full py-2 text-sm text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200\"\n\t\t\t\t>\n\t\t\t\t\t{isExpanded ? 'Show Less' : `Show ${remainingTokens.length} More Tokens`}\n\t\t\t\t</Accordion.Trigger>\n\t\t\t\t<Accordion.Content>\n\t\t\t\t\t<div class=\"space-y-1\">\n\t\t\t\t\t\t{#each remainingTokens as token}\n\t\t\t\t\t\t\t<TokenLineView {token} {locked} />\n\t\t\t\t\t\t{/each}\n\t\t\t\t\t</div>\n\t\t\t\t</Accordion.Content>\n\t\t\t</Accordion.Item>\n\t\t</Accordion.Root>\n\t{/if}\n</div>\n","<!-- File: src/lib/components/Banner.svelte -->\n<script lang=\"ts\">\n\tlet {\n\t\ttitle = 'Welcome to YAKKL',\n\t\tmessage = 'Your secure crypto wallet',\n\t\tctaText = 'UPGRADE',\n\t\tonCallToAction = null\n\t} = $props<{\n\t\ttitle?: string;\n\t\tmessage?: string;\n\t\tctaText?: string;\n\t\tonCallToAction?: ((index: number) => void) | null;\n\t}>();\n</script>\n\n<div class=\"bg-primary text-primary-content p-4\">\n\t<div class=\"flex justify-between items-center\">\n\t\t<div>\n\t\t\t<h2 class=\"text-lg font-bold\">{title}</h2>\n\t\t\t<p class=\"text-sm\">{message}</p>\n\t\t</div>\n\t\t{#if onCallToAction}\n\t\t\t<button onclick={onCallToAction} class=\"btn btn-secondary btn-sm\">\n\t\t\t\t{ctaText}\n\t\t\t</button>\n\t\t{/if}\n\t</div>\n</div>\n","<script lang=\"ts\">\n\tlet {\n\t\tuseGoogleAd = false,\n\t\tcustomContent,\n\t\tonCallToAction = null\n\t} = $props<{\n\t\tuseGoogleAd?: boolean;\n\t\tcustomContent?: () => string;\n\t\tonCallToAction?: ((index: number) => void) | null;\n\t}>();\n</script>\n\n<div class=\"bg-primary text-primary-content p-2\">\n\t{#if useGoogleAd}\n\t\t<!-- Google AdSense placeholder -->\n\t\t<div class=\"h-[100px] flex items-center justify-center\">Ad Space</div>\n\t{:else if customContent}\n\t\t{@html customContent()}\n\t{/if}\n</div>\n","<!-- File: src/lib/components/RotatingBanner.svelte -->\n<script lang=\"ts\">\n\timport { onDestroy } from 'svelte';\n\timport Banner from './Banner.svelte';\n\timport Ad from './Ad.svelte';\n\timport { UnifiedTimerManager } from '$lib/managers/UnifiedTimerManager';\n\n\ttype BannerItem = {\n\t\ttype: 'banner';\n\t\ttitle?: string;\n\t\tmessage?: string;\n\t\tctaText?: string;\n\t\tonCallToAction?: ((index: number) => void) | null;\n\t};\n\n\ttype AdItem = {\n\t\ttype: 'ad';\n\t\tuseGoogleAd?: boolean;\n\t\tcustomContent?: (index: number) => string;\n\t\tonCallToAction?: ((index: number) => void) | null;\n\t};\n\n\ttype CustomItem = {\n\t\ttype: 'custom';\n\t\thtml: string;\n\t};\n\n\ttype RotatingItem = BannerItem | AdItem | CustomItem;\n\n\tlet {\n\t\tshow = $bindable(true),\n\t\titems = [],\n\t\tinterval = 0,\n\t\tautoRotate = true,\n\t\tshowControls = true\n\t} = $props<{\n\t\tshow?: boolean;\n\t\titems: RotatingItem[];\n\t\tinterval?: number;\n\t\tautoRotate?: boolean;\n\t\tshowControls?: boolean;\n\t}>();\n\n\tlet currentIndex = $state(0);\n\tconst timerManager = UnifiedTimerManager.getInstance();\n\tconst timerId = 'rotating-banner';\n\tlet current = $derived(items[currentIndex]);\n\n\tfunction next() {\n\t\tcurrentIndex = (currentIndex + 1) % items.length;\n\t}\n\n\tfunction previous() {\n\t\tcurrentIndex = (currentIndex - 1 + items.length) % items.length;\n\t}\n\n\t$effect(() => {\n\t\tif (autoRotate && interval > 0 && items.length > 1) {\n\t\t\ttimerManager.stopInterval(timerId);\n\t\t\ttimerManager.removeInterval(timerId);\n\t\t\ttimerManager.addInterval(timerId, next, interval);\n\t\t\ttimerManager.startInterval(timerId);\n\t\t} else {\n\t\t\ttimerManager.stopInterval(timerId);\n\t\t\ttimerManager.removeInterval(timerId);\n\t\t}\n\t});\n\n\tonDestroy(() => {\n\t\ttimerManager.stopInterval(timerId);\n\t\ttimerManager.removeInterval(timerId);\n\t});\n</script>\n\n{#if show}\n\t<div class=\"relative\">\n\t\t{#if showControls && items.length > 1}\n\t\t\t<div class=\"absolute inset-y-0 left-0 flex items-center z-10\">\n\t\t\t\t<button\n\t\t\t\t\tclass=\"p-0.5 rounded-full bg-black/10 hover:bg-black/20 transition-colors\"\n\t\t\t\t\tonclick={previous}\n\t\t\t\t\taria-label=\"Previous\"\n\t\t\t\t>\n\t\t\t\t\t<svg\n\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\tclass=\"h-3 w-3\"\n\t\t\t\t\t\tviewBox=\"0 0 20 20\"\n\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\td=\"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z\"\n\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</svg>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div class=\"absolute inset-y-0 right-0 flex items-center z-10\">\n\t\t\t\t<button\n\t\t\t\t\tclass=\"p-0.5 rounded-full bg-black/10 hover:bg-black/20 transition-colors\"\n\t\t\t\t\tonclick={next}\n\t\t\t\t\taria-label=\"Next\"\n\t\t\t\t>\n\t\t\t\t\t<svg\n\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\tclass=\"h-3 w-3\"\n\t\t\t\t\t\tviewBox=\"0 0 20 20\"\n\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\td=\"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z\"\n\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</svg>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t{/if}\n\n\t\t<div class={showControls && items.length > 1 ? 'px-4' : ''}>\n\t\t\t{#if current.type === 'banner'}\n\t\t\t\t<Banner\n\t\t\t\t\t{...current}\n\t\t\t\t\tonCallToAction={current.onCallToAction\n\t\t\t\t\t\t? () => current.onCallToAction?.(currentIndex)\n\t\t\t\t\t\t: null}\n\t\t\t\t/>\n\t\t\t{:else if current.type === 'ad'}\n\t\t\t\t<Ad\n\t\t\t\t\t{...current}\n\t\t\t\t\tcustomContent={current.customContent\n\t\t\t\t\t\t? () => current.customContent?.(currentIndex)\n\t\t\t\t\t\t: undefined}\n\t\t\t\t\tonCallToAction={current.onCallToAction\n\t\t\t\t\t\t? () => current.onCallToAction?.(currentIndex)\n\t\t\t\t\t\t: null}\n\t\t\t\t/>\n\t\t\t{:else if current.type === 'custom'}\n\t\t\t\t{@html current.html}\n\t\t\t{/if}\n\t\t</div>\n\n\t\t{#if showControls && items.length > 1}\n\t\t\t<div class=\"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex gap-1 z-10\">\n\t\t\t\t{#each items as _, i}\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"w-1.5 h-1.5 rounded-full transition-colors {i === currentIndex\n\t\t\t\t\t\t\t? 'bg-primary'\n\t\t\t\t\t\t\t: 'bg-gray-300'}\"\n\t\t\t\t\t\tonclick={() => (currentIndex = i)}\n\t\t\t\t\t\taria-label=\"Go to slide {i + 1}\"\n\t\t\t\t\t>\n\t\t\t\t\t</button>\n\t\t\t\t{/each}\n\t\t\t</div>\n\t\t{/if}\n\t</div>\n{/if}\n","<!-- File: src/lib/components/icons/ChevronUpIcon.svelte -->\n<script lang=\"ts\">\n\tinterface Props {\n\t\tclassName?: string;\n\t}\n\n\tlet { className = '' }: Props = $props();\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width=\"1.5\"\n\tstroke=\"currentColor\"\n\tclass=\"size-6\"\n>\n\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"m4.5 15.75 7.5-7.5 7.5 7.5\" />\n</svg>\n","<!-- File: src/lib/components/icons/ResizeIcon.svelte -->\n<script lang=\"ts\">\n\tinterface Props {\n\t\tclassName?: string;\n\t}\n\n\tlet { className = '' }: Props = $props();\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tviewBox=\"0 0 24 24\"\n\tfill=\"none\"\n\tstroke=\"currentColor\"\n\tstroke-width=\"2\"\n\tstroke-linecap=\"round\"\n\tstroke-linejoin=\"round\"\n\tclass={className}\n>\n\t<path d=\"M21 3L3 21\" />\n\t<path d=\"M21 21L3 3\" />\n\t<path d=\"M21 15L15 21\" />\n\t<path d=\"M9 3L3 9\" />\n</svg>\n","<!-- svelte-ignore non_reactive_update -->\n<!-- svelte-ignore non_reactive_update -->\n<!-- File: src/lib/components/SectionCard.svelte -->\n<script lang=\"ts\">\n\timport { onMount } from 'svelte';\n\timport ChevronDownIcon from './icons/ChevronDownIcon.svelte';\n\timport ChevronUpIcon from './icons/ChevronUpIcon.svelte';\n\timport ResizeIcon from './icons/ResizeIcon.svelte';\n\timport EyeIcon from './icons/EyeIcon.svelte';\n\timport { cn } from '$lib/utils';\n\timport Tooltip from './Tooltip.svelte';\n\n\tlet {\n\t\tshow = $bindable(true),\n\t\ttitle,\n\t\ticon: Icon = null,\n\t\tclassName = '',\n\t\tisPinned = false,\n\t\teye = false,\n\t\teyeTooltip = 'Toggle visibility of values',\n\t\tminHeight = '200px',\n\t\tmaxHeight = '400px',\n\t\tlocked = true,\n\t\tfooter: Footer = null,\n\t\tfooterProps = {},\n\t\tlockedFooter: LockedFooter = null,\n\t\tlockedFooterProps = {},\n\t\tchildren\n\t} = $props<{\n\t\tshow?: boolean;\n\t\ttitle: string;\n\t\ticon?: any;\n\t\tclassName?: string;\n\t\tisPinned?: boolean;\n\t\teye?: boolean;\n\t\teyeTooltip?: string;\n\t\tminHeight?: string;\n\t\tmaxHeight?: string;\n\t\tlocked?: boolean;\n\t\tfooter?: any;\n\t\tfooterProps?: Record<string, any>;\n\t\tlockedFooter?: any;\n\t\tlockedFooterProps?: Record<string, any>;\n\t\tchildren: () => any;\n\t}>();\n\n\tlet isCollapsed = $state(false);\n\tlet isResizing = $state(false);\n\tlet cardHeight = $state(minHeight);\n\tlet startY = $state(0);\n\tlet startHeight = $state(0);\n\tlet cardElement = $state<HTMLElement | null>(null);\n\tlet contentElement = $state<HTMLElement | null>(null);\n\tlet hasItems = $state(false);\n\tlet calculatedMinHeight = $state('');\n\n\tfunction calculateMinHeight() {\n\t\tif (!cardElement || !contentElement) return;\n\n\t\tconst headerHeight =\n\t\t\t(cardElement.querySelector('header') as HTMLElement | null)?.offsetHeight || 0;\n\t\tconst firstItemHeight =\n\t\t\t(contentElement.querySelector('.item') as HTMLElement | null)?.offsetHeight || 0;\n\n\t\t// If there are items, min height is header + one item\n\t\t// If no items, min height is just the header\n\t\tconst newMinHeight = hasItems ? headerHeight + firstItemHeight : headerHeight;\n\t\tcalculatedMinHeight = `${newMinHeight}px`;\n\n\t\t// Update card height if it's currently smaller than the new minimum\n\t\tif (parseInt(cardHeight) < newMinHeight) {\n\t\t\tcardHeight = calculatedMinHeight;\n\t\t}\n\t}\n\n\tfunction handleResizeStart(e: MouseEvent) {\n\t\te.preventDefault();\n\t\tisResizing = true;\n\t\tstartY = e.clientY;\n\t\tstartHeight = cardElement.offsetHeight;\n\t\tdocument.addEventListener('mousemove', handleResizeMove);\n\t\tdocument.addEventListener('mouseup', handleResizeEnd);\n\t}\n\n\tfunction handleResizeMove(e: MouseEvent) {\n\t\tif (!isResizing) return;\n\n\t\tconst deltaY = e.clientY - startY;\n\t\tconst newHeight = Math.max(\n\t\t\tparseInt(calculatedMinHeight || minHeight),\n\t\t\tMath.min(parseInt(maxHeight), startHeight + deltaY)\n\t\t);\n\t\tcardHeight = `${newHeight}px`;\n\t}\n\n\tfunction handleResizeEnd() {\n\t\tisResizing = false;\n\t\tdocument.removeEventListener('mousemove', handleResizeMove);\n\t\tdocument.removeEventListener('mouseup', handleResizeEnd);\n\t}\n\n\tfunction toggleCollapse() {\n\t\tisCollapsed = !isCollapsed;\n\t}\n\n\tonMount(() => {\n\t\t// Initial calculation\n\t\tcalculateMinHeight();\n\n\t\t// Observe content changes to recalculate minimum height\n\t\tconst observer = new MutationObserver(() => {\n\t\t\thasItems = contentElement.querySelector('.item') !== null;\n\t\t\tcalculateMinHeight();\n\t\t});\n\n\t\tif (contentElement) {\n\t\t\tobserver.observe(contentElement, {\n\t\t\t\tchildList: true,\n\t\t\t\tsubtree: true\n\t\t\t});\n\t\t}\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('mousemove', handleResizeMove);\n\t\t\tdocument.removeEventListener('mouseup', handleResizeEnd);\n\t\t\tobserver.disconnect();\n\t\t};\n\t});\n</script>\n\n{#if show}\n\t<div\n\t\tbind:this={cardElement}\n\t\tclass={cn(\n\t\t\t'bg-white dark:bg-zinc-800 rounded-xl shadow-sm border border-zinc-200 dark:border-zinc-700',\n\t\t\t'transition-all duration-200 ease-in-out',\n\t\t\t'hover:shadow-md',\n\t\t\t'flex flex-col',\n\t\t\t'relative',\n\t\t\tisPinned && 'sticky top-0 z-10 scroll-mt-4',\n\t\t\tclassName\n\t\t)}\n\t\tstyle=\"height: {isCollapsed ? 'auto' : cardHeight}\"\n\t>\n\t\t<!-- Header -->\n\t\t<header\n\t\t\tclass=\"flex items-center justify-between p-4 border-b border-zinc-200 dark:border-zinc-700\"\n\t\t>\n\t\t\t<div class=\"flex items-center gap-2\">\n\t\t\t\t{#if Icon}\n\t\t\t\t\t<Icon className=\"w-5 h-5 text-zinc-600 dark:text-zinc-400\" />\n\t\t\t\t{/if}\n\t\t\t\t<h2 class=\"text-md font-semibold text-zinc-900 dark:text-zinc-100\">{title}</h2>\n\t\t\t\t{#if eye}\n\t\t\t\t\t<Tooltip content={eyeTooltip}>\n\t\t\t\t\t\t<EyeIcon className=\"w-4 h-4 text-zinc-600 dark:text-zinc-400\" />\n\t\t\t\t\t</Tooltip>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t\t<div class=\"flex items-center gap-2\">\n\t\t\t\t<button\n\t\t\t\t\tclass=\"p-1 rounded-lg hover:bg-zinc-100 dark:hover:bg-zinc-700 transition-colors\"\n\t\t\t\t\tonclick={toggleCollapse}\n\t\t\t\t\taria-label={isCollapsed ? 'Expand section' : 'Collapse section'}\n\t\t\t\t>\n\t\t\t\t\t{#if isCollapsed}\n\t\t\t\t\t\t<ChevronDownIcon className=\"w-4 h-4 text-zinc-600 dark:text-zinc-400\" />\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<ChevronUpIcon className=\"w-4 h-4 text-zinc-600 dark:text-zinc-400\" />\n\t\t\t\t\t{/if}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</header>\n\n\t\t<!-- Content -->\n\t\t<div\n\t\t\tbind:this={contentElement}\n\t\t\tclass=\"flex-1 overflow-y-auto transition-all duration-200\"\n\t\t\tstyle=\"height: {isCollapsed ? '0' : 'auto'}\"\n\t\t>\n\t\t\t<div class=\"px-4 pb-4 pt-2\">\n\t\t\t\t{@render children()}\n\t\t\t</div>\n\t\t</div>\n\n\t\t<!-- Footer -->\n\t\t{#if !isCollapsed}\n\t\t\t{#if locked && LockedFooter}\n\t\t\t\t<div\n\t\t\t\t\tclass=\"border-t border-zinc-200 dark:border-zinc-700 p-4 bg-zinc-50 dark:bg-zinc-800/50\"\n\t\t\t\t>\n\t\t\t\t\t<LockedFooter {...lockedFooterProps} />\n\t\t\t\t</div>\n\t\t\t{:else if Footer}\n\t\t\t\t<div\n\t\t\t\t\tclass=\"border-t border-zinc-200 dark:border-zinc-700 p-4 bg-zinc-50 dark:bg-zinc-800/50\"\n\t\t\t\t>\n\t\t\t\t\t<Footer {...footerProps} />\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t{/if}\n\n\t\t<!-- Resize Handle -->\n\t\t{#if !isCollapsed}\n\t\t\t<div\n\t\t\t\trole=\"button\"\n\t\t\t\ttabindex=\"0\"\n\t\t\t\taria-label=\"Resize section\"\n\t\t\t\tclass=\"absolute bottom-0 left-0 right-0 h-4 cursor-ns-resize flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity bg-gradient-to-t from-zinc-100 dark:from-zinc-700 to-transparent\"\n\t\t\t\tonmousedown={handleResizeStart}\n\t\t\t>\n\t\t\t\t<ResizeIcon className=\"w-4 h-4 text-zinc-400 rotate-90\" />\n\t\t\t</div>\n\t\t{/if}\n\t</div>\n{/if}\n","<script lang=\"ts\">\n\tconst { size = 24, stroke = 'currentColor', className = '' } = $props();\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width=\"1.5\"\n\t{stroke}\n\twidth={size}\n\theight={size}\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M21 12a2.25 2.25 0 0 0-2.25-2.25H15a3 3 0 1 1-6 0H5.25A2.25 2.25 0 0 0 3 12m18 0v6a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 18v-6m18 0V9M3 12V9m18 0a2.25 2.25 0 0 0-2.25-2.25H5.25A2.25 2.25 0 0 0 3 9m18 0V6a2.25 2.25 0 0 0-2.25-2.25H5.25A2.25 2.25 0 0 0 3 6v3\"\n\t/>\n</svg>\n","<!-- File: src/lib/components/icons/TokenIcon.svelte -->\n<script lang=\"ts\">\n\tlet { className = '' } = $props<{\n\t\tclassName?: string;\n\t}>();\n</script>\n\n<!-- <svg\n  xmlns=\"http://www.w3.org/2000/svg\"\n  viewBox=\"0 0 24 24\"\n  fill=\"none\"\n  stroke=\"currentColor\"\n  stroke-width=\"2\"\n  stroke-linecap=\"round\"\n  stroke-linejoin=\"round\"\n  class={className}\n>\n  <circle cx=\"12\" cy=\"12\" r=\"10\" />\n  <path d=\"M12 2v20\" />\n  <path d=\"M2 12h20\" />\n</svg> -->\n\n<img\n\tclass={className}\n\tsrc=\"data:image/png;base64,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\"\n\talt=\"chip--v1\"\n/>\n","<!-- File: src/lib/components/icons/NewsIcon.svelte -->\n<script lang=\"ts\">\n\tlet { className = '' } = $props<{\n\t\tclassName?: string;\n\t}>();\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tviewBox=\"0 0 24 24\"\n\tfill=\"none\"\n\tstroke=\"currentColor\"\n\tstroke-width=\"2\"\n\tstroke-linecap=\"round\"\n\tstroke-linejoin=\"round\"\n\tclass={className}\n>\n\t<path\n\t\td=\"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2\"\n\t/>\n\t<path d=\"M18 14h-8\" />\n\t<path d=\"M18 18h-8\" />\n\t<path d=\"M18 10h-8\" />\n</svg>\n","<script lang=\"ts\">\n\tlet { className = 'size-6' } = $props<{\n\t\tclassName?: string;\n\t}>();\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width=\"1.5\"\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M11.42 15.17 17.25 21A2.652 2.652 0 0 0 21 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655 5.653a2.548 2.548 0 1 1-3.586-3.586l6.837-5.63m5.108-.233c.55-.164 1.163-.188 1.743-.14a4.5 4.5 0 0 0 4.486-6.336l-3.276 3.277a3.004 3.004 0 0 1-2.25-2.25l3.276-3.276a4.5 4.5 0 0 0-6.336 4.486c.091 1.076-.071 2.264-.904 2.95l-.102.085m-1.745 1.437L5.909 7.5H4.5L2.25 3.75l1.5-1.5L7.5 4.5v1.409l4.26 4.26m-1.745 1.437 1.745-1.437m6.615 8.206L15.75 15.75M4.867 19.125h.008v.008h-.008v-.008Z\"\n\t/>\n</svg>\n","<script lang=\"ts\">\n\tinterface Props {\n\t\tnewsItem: {\n\t\t\ttitle: string;\n\t\t\tsubtitle: string;\n\t\t\tdescription: string;\n\t\t\tcontent?: string;\n\t\t\timageUrl: string;\n\t\t\tsource: string;\n\t\t\tdate: string;\n\t\t\turl: string;\n\t\t\tguid?: string;\n\t\t\tcategories?: string[];\n\t\t\tauthor?: string;\n\t\t\tpublishedAt?: string;\n\t\t};\n\t\tclassName?: string;\n\t\tlocked?: boolean;\n\t}\n\n\tlet { newsItem, className = '', locked = true }: Props = $props();\n\n\t// Check if the news item has all required properties\n\tconst isValidNewsItem =\n\t\tnewsItem &&\n\t\tnewsItem.title &&\n\t\tnewsItem.description &&\n\t\tnewsItem.imageUrl &&\n\t\tnewsItem.source &&\n\t\tnewsItem.date &&\n\t\tnewsItem.url;\n</script>\n\n<div class={className}>\n\t{#if isValidNewsItem}\n\t\t<a\n\t\t\thref={newsItem.url}\n\t\t\ttarget=\"_blank\"\n\t\t\trel=\"noopener noreferrer\"\n\t\t\tclass=\"block hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors\"\n\t\t>\n\t\t\t<div class=\"flex gap-4 p-3 item\">\n\t\t\t\t<div class=\"flex-shrink-0\">\n\t\t\t\t\t<img\n\t\t\t\t\t\tsrc={newsItem.imageUrl}\n\t\t\t\t\t\talt={newsItem.title}\n\t\t\t\t\t\tclass=\"w-16 h-16 object-cover rounded-md\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"flex-1 min-w-0 pr-0\">\n\t\t\t\t\t<h3 class=\"text-sm font-semibold text-gray-900 dark:text-gray-100 truncate\">\n\t\t\t\t\t\t{newsItem.title}\n\t\t\t\t\t</h3>\n\t\t\t\t\t<div class=\"flex items-center gap-1 text-[10px] text-gray-500 dark:text-gray-400 mt-1\">\n\t\t\t\t\t\t<span>{newsItem.source}</span>\n\t\t\t\t\t\t<span>•</span>\n\t\t\t\t\t\t<span>{newsItem.date}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<p class=\"text-xs text-gray-600 dark:text-gray-300 mt-1 line-clamp-2\">\n\t\t\t\t\t\t{newsItem.description}\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</a>\n\t{:else}\n\t\t<div class=\"flex items-center justify-center p-4 text-gray-500 dark:text-gray-400\">\n\t\t\t<p class=\"text-sm\">Unable to display news content</p>\n\t\t</div>\n\t{/if}\n</div>\n","<!-- File: src/lib/components/icons/BookmarkIcon.svelte -->\n<script lang=\"ts\">\n\tinterface Props {\n\t\tclassName?: string;\n\t}\n\n\tlet { className = 'w-6 h-6 fill-none stroke-current text-gray-400' }: Props = $props();\n</script>\n\n<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" class={className}>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0 1 11.186 0Z\"\n\t/>\n</svg>\n","<!-- File: src/lib/components/icons/PrinterIcon.svelte -->\n<script lang=\"ts\">\n\tinterface Props {\n\t\tclassName?: string;\n\t}\n\n\tlet { className = 'w-6 h-6' }: Props = $props();\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width=\"1.5\"\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z\"\n\t/>\n</svg>\n","<!-- File: src/lib/components/icons/TrashIcon.svelte -->\n<script lang=\"ts\">\n\tinterface Props {\n\t\tclassName?: string;\n\t}\n\n\tlet { className = 'w-6 h-6' }: Props = $props();\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width=\"1.5\"\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0\"\n\t/>\n</svg>\n","<!-- ArticleControls.svelte -->\n<script lang=\"ts\">\n\timport BookmarkIcon from './icons/BookmarkIcon.svelte';\n\timport PrinterIcon from './icons/PrinterIcon.svelte';\n\timport TrashIcon from './icons/TrashIcon.svelte';\n\timport Confirmation from './Confirmation.svelte';\n\timport { fade } from 'svelte/transition';\n\timport type { RSSItem } from '$lib/managers/ExtensionRSSFeedService';\n\timport Tooltip from './Tooltip.svelte';\n\timport { yakklBookmarkedArticlesStore, setYakklBookmarkedArticles } from '$lib/common/stores';\n\timport { derived } from 'svelte/store';\n\timport { log } from '$lib/managers/Logger';\n\n\tlet {\n\t\tarticle,\n\t\tbookmarkEnabled = true,\n\t\tprintEnabled = true,\n\t\tdeleteEnabled = false,\n\t\tonDelete\n\t} = $props<{\n\t\tarticle: RSSItem;\n\t\tbookmarkEnabled?: boolean;\n\t\tprintEnabled?: boolean;\n\t\tdeleteEnabled?: boolean;\n\t\tonDelete?: (article: RSSItem) => Promise<void>;\n\t}>();\n\n\t$inspect(article).with(console.log);\n\n\tlet showDeleteConfirmation = $state(false);\n\n\t// Create a derived store for bookmark state\n\tconst isBookmarked = derived(yakklBookmarkedArticlesStore, ($store) =>\n\t\t$store.some((a) => a.title === article.title && a.source === article.source)\n\t);\n\n\t// Function to sanitize content\n\tfunction sanitizeContent(content: string): string {\n\t\tconst parser = new DOMParser();\n\t\tconst doc = parser.parseFromString(content, 'text/html');\n\n\t\t// Remove potentially problematic elements\n\t\tconst elementsToRemove = [\n\t\t\t'script',\n\t\t\t'iframe',\n\t\t\t'style',\n\t\t\t'link',\n\t\t\t'meta',\n\t\t\t'object',\n\t\t\t'embed',\n\t\t\t'applet',\n\t\t\t'noscript',\n\t\t\t'form',\n\t\t\t'input',\n\t\t\t'button',\n\t\t\t'select',\n\t\t\t'textarea',\n\t\t\t'[onclick]',\n\t\t\t'[onload]',\n\t\t\t'[onerror]',\n\t\t\t'[src*=\"platform.twitter.com\"]',\n\t\t\t'[src*=\"facebook.com\"]',\n\t\t\t'[src*=\"instagram.com\"]',\n\t\t\t'[src*=\"youtube.com\"]',\n\t\t\t'[src*=\"vimeo.com\"]',\n\t\t\t'[src*=\"player\"]',\n\t\t\t'[src*=\"widget\"]',\n\t\t\t'[src*=\"embed\"]',\n\t\t\t'[src*=\"script\"]',\n\t\t\t'[src*=\"tracker\"]',\n\t\t\t'[src*=\"analytics\"]',\n\t\t\t'[src*=\"pixel\"]',\n\t\t\t'[src*=\"beacon\"]',\n\t\t\t'[src*=\"cookie\"]',\n\t\t\t'[src*=\"ad\"]',\n\t\t\t'[src*=\"banner\"]',\n\t\t\t'[src*=\"promo\"]',\n\t\t\t'[src*=\"sponsor\"]',\n\t\t\t'[src*=\"affiliate\"]',\n\t\t\t'[src*=\"tracking\"]',\n\t\t\t'[src*=\"pixel\"]',\n\t\t\t'[src*=\"beacon\"]',\n\t\t\t'[src*=\"cookie\"]',\n\t\t\t'[src*=\"analytics\"]',\n\t\t\t'[src*=\"tracker\"]',\n\t\t\t'[src*=\"monitor\"]',\n\t\t\t'[src*=\"stat\"]',\n\t\t\t'[src*=\"count\"]',\n\t\t\t'[src*=\"counter\"]',\n\t\t\t'[src*=\"measure\"]',\n\t\t\t'[src*=\"metric\"]',\n\t\t\t'[src*=\"track\"]',\n\t\t\t'[src*=\"trace\"]',\n\t\t\t'[src*=\"log\"]',\n\t\t\t'[src*=\"debug\"]',\n\t\t\t'[src*=\"test\"]',\n\t\t\t'[src*=\"dev\"]',\n\t\t\t'[src*=\"staging\"]',\n\t\t\t'[src*=\"qa\"]',\n\t\t\t'[src*=\"beta\"]',\n\t\t\t'[src*=\"alpha\"]',\n\t\t\t'[src*=\"demo\"]',\n\t\t\t'[src*=\"example\"]',\n\t\t\t'[src*=\"sample\"]',\n\t\t\t'[src*=\"mock\"]',\n\t\t\t'[src*=\"fake\"]',\n\t\t\t'[src*=\"dummy\"]',\n\t\t\t'[src*=\"placeholder\"]',\n\t\t\t'[src*=\"temp\"]',\n\t\t\t'[src*=\"temporary\"]',\n\t\t\t'[src*=\"test\"]',\n\t\t\t'[src*=\"dev\"]',\n\t\t\t'[src*=\"development\"]',\n\t\t\t'[src*=\"staging\"]',\n\t\t\t'[src*=\"qa\"]',\n\t\t\t'[src*=\"beta\"]',\n\t\t\t'[src*=\"alpha\"]',\n\t\t\t'[src*=\"demo\"]',\n\t\t\t'[src*=\"example\"]',\n\t\t\t'[src*=\"sample\"]',\n\t\t\t'[src*=\"mock\"]',\n\t\t\t'[src*=\"fake\"]',\n\t\t\t'[src*=\"dummy\"]',\n\t\t\t'[src*=\"placeholder\"]',\n\t\t\t'[src*=\"temp\"]',\n\t\t\t'[src*=\"temporary\"]'\n\t\t];\n\n\t\telementsToRemove.forEach((selector) => {\n\t\t\tdoc.querySelectorAll(selector).forEach((el) => el.remove());\n\t\t});\n\n\t\t// Remove inline styles and event handlers\n\t\tdoc.querySelectorAll('*').forEach((el) => {\n\t\t\tel.removeAttribute('style');\n\t\t\tel.removeAttribute('onclick');\n\t\t\tel.removeAttribute('onload');\n\t\t\tel.removeAttribute('onerror');\n\t\t\tel.removeAttribute('onmouseover');\n\t\t\tel.removeAttribute('onmouseout');\n\t\t\tel.removeAttribute('onmouseenter');\n\t\t\tel.removeAttribute('onmouseleave');\n\t\t\tel.removeAttribute('onmousedown');\n\t\t\tel.removeAttribute('onmouseup');\n\t\t\tel.removeAttribute('onmousemove');\n\t\t\tel.removeAttribute('onkeydown');\n\t\t\tel.removeAttribute('onkeyup');\n\t\t\tel.removeAttribute('onkeypress');\n\t\t\tel.removeAttribute('onfocus');\n\t\t\tel.removeAttribute('onblur');\n\t\t\tel.removeAttribute('onchange');\n\t\t\tel.removeAttribute('onsubmit');\n\t\t\tel.removeAttribute('onreset');\n\t\t\tel.removeAttribute('onselect');\n\t\t\tel.removeAttribute('onabort');\n\t\t\tel.removeAttribute('oncanplay');\n\t\t\tel.removeAttribute('oncanplaythrough');\n\t\t\tel.removeAttribute('ondurationchange');\n\t\t\tel.removeAttribute('onemptied');\n\t\t\tel.removeAttribute('onended');\n\t\t\tel.removeAttribute('onerror');\n\t\t\tel.removeAttribute('onloadeddata');\n\t\t\tel.removeAttribute('onloadedmetadata');\n\t\t\tel.removeAttribute('onloadstart');\n\t\t\tel.removeAttribute('onpause');\n\t\t\tel.removeAttribute('onplay');\n\t\t\tel.removeAttribute('onplaying');\n\t\t\tel.removeAttribute('onprogress');\n\t\t\tel.removeAttribute('onratechange');\n\t\t\tel.removeAttribute('onreadystatechange');\n\t\t\tel.removeAttribute('onseeked');\n\t\t\tel.removeAttribute('onseeking');\n\t\t\tel.removeAttribute('onstalled');\n\t\t\tel.removeAttribute('onsuspend');\n\t\t\tel.removeAttribute('ontimeupdate');\n\t\t\tel.removeAttribute('onvolumechange');\n\t\t\tel.removeAttribute('onwaiting');\n\t\t});\n\n\t\t// Convert relative URLs to absolute\n\t\tdoc.querySelectorAll('a[href]').forEach((link) => {\n\t\t\ttry {\n\t\t\t\tconst href = link.getAttribute('href');\n\t\t\t\tif (href && !href.startsWith('http')) {\n\t\t\t\t\tconst absoluteUrl = new URL(href, article.url).toString();\n\t\t\t\t\tlink.setAttribute('href', absoluteUrl);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error('Error converting URL:', e);\n\t\t\t}\n\t\t});\n\n\t\t// Get the sanitized content\n\t\tlet sanitizedContent = doc.body.innerHTML;\n\n\t\t// Clean up any remaining script-like content\n\t\tsanitizedContent = sanitizedContent\n\t\t\t.replace(/<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi, '')\n\t\t\t.replace(/javascript:/gi, '')\n\t\t\t.replace(/data:/gi, '')\n\t\t\t.replace(/vbscript:/gi, '')\n\t\t\t.replace(/on\\w+=\"[^\"]*\"/g, '')\n\t\t\t.replace(/on\\w+='[^']*'/g, '')\n\t\t\t.replace(/style=\"[^\"]*\"/g, '')\n\t\t\t.replace(/style='[^']*'/g, '');\n\n\t\treturn sanitizedContent;\n\t}\n\n\t// Function to handle bookmarking\n\tasync function handleBookmark() {\n\t\tif (!bookmarkEnabled) return;\n\n\t\tconst bookmarkedArticles = $yakklBookmarkedArticlesStore;\n\n\t\tif ($isBookmarked) {\n\t\t\t// Remove from bookmarks\n\t\t\tconst updatedArticles = bookmarkedArticles.filter(\n\t\t\t\t(a) => !(a.title === article.title && a.source === article.source)\n\t\t\t);\n\t\t\tawait setYakklBookmarkedArticles(updatedArticles);\n\t\t} else {\n\t\t\t// Check for duplicates before adding\n\t\t\tconst isDuplicate = bookmarkedArticles.some(\n\t\t\t\t(a) => a.title === article.title && a.source === article.source\n\t\t\t);\n\n\t\t\tif (!isDuplicate) {\n\t\t\t\t// Add to bookmarks only if not a duplicate\n\t\t\t\tconst updatedArticles = [...bookmarkedArticles, article];\n\t\t\t\tawait setYakklBookmarkedArticles(updatedArticles);\n\t\t\t}\n\t\t}\n\t}\n\n\t// Function to handle deletion\n\tasync function handleDelete() {\n\t\tif (!deleteEnabled) return;\n\n\t\tif (onDelete) {\n\t\t\tawait onDelete(article);\n\t\t} else {\n\t\t\tawait handleBookmark(); // Fallback to bookmark logic if no onDelete provided\n\t\t}\n\n\t\tshowDeleteConfirmation = false;\n\t}\n\n\t// Prints out the full article in a new window\n\t// Example usage:\n\t// <button onclick=\"printFullArticle('https://news.example.com/article/123')\">\n\t//   🖨️ Print Full Article\n\t// </button>\n\tfunction printFullArticle(articleUrl: string) {\n\t\tconst printWindow = window.open(articleUrl, '_blank');\n\n\t\tprintWindow.onload = () => {\n\t\t\tprintWindow.focus();\n\t\t\tprintWindow.print();\n\t\t};\n\t}\n\n\t// Function to handle printing\n\tfunction handlePrint(articleUrl: string = '') {\n\t\t// if (articleUrl) {\n\t\t//   console.log('Printing article from external source', articleUrl);\n\t\t//   printFullArticle(articleUrl); // Optional external print\n\t\t//   return;\n\t\t// }\n\n\t\tconsole.log('Printing article from internal source', articleUrl);\n\t\tconst sanitizedContent = sanitizeContent(\n\t\t\tarticle.content || article.description || article.title\n\t\t);\n\t\tconst html = generatePrintHtml(article, sanitizedContent);\n\n\t\tconst printWindow = window.open('', '_blank');\n\t\tif (!printWindow) {\n\t\t\tconsole.error('Failed to open print window');\n\t\t\treturn;\n\t\t}\n\n\t\t// Wait until the new window DOM is available\n\t\tprintWindow.document.open();\n\t\tprintWindow.document.write(html);\n\t\tprintWindow.document.close();\n\n\t\t// Ensure content loads before printing\n\t\tprintWindow.onload = () => {\n\t\t\tprintWindow.focus();\n\t\t\tprintWindow.print();\n\t\t};\n\n\t\t// const doc = printWindow.document;\n\t\t// doc.open();\n\t\t// doc.write(`\n\t\t//   <!DOCTYPE html>\n\t\t//   <html>\n\t\t//     <head>\n\t\t//       <title>${article.title}</title>\n\t\t//       <meta charset=\"utf-8\">\n\t\t//       <link rel=\"shortcut icon\" href=\"https://yakkl.com/images/favicon.png\" />\n\t\t//       <style>\n\t\t//         body {\n\t\t//           font-family: Arial, sans-serif;\n\t\t//           padding: 20px;\n\t\t//           max-width: 800px;\n\t\t//           margin: 0 auto;\n\t\t//           color: #333;\n\t\t//         }\n\t\t//         .header {\n\t\t//           margin-bottom: 20px;\n\t\t//           border-bottom: 1px solid #eee;\n\t\t//           padding-bottom: 20px;\n\t\t//         }\n\t\t//         .metadata {\n\t\t//           color: #666;\n\t\t//           font-size: 0.9em;\n\t\t//           margin: 10px 0;\n\t\t//         }\n\t\t//         .metadata span {\n\t\t//           margin-right: 15px;\n\t\t//         }\n\t\t//         .content {\n\t\t//           line-height: 1.6;\n\t\t//           font-size: 1.1em;\n\t\t//           white-space: pre-wrap;\n\t\t//           margin: 20px 0;\n\t\t//         }\n\t\t//         .content img {\n\t\t//           max-width: 100%;\n\t\t//           height: auto;\n\t\t//           margin: 10px 0;\n\t\t//         }\n\t\t//         .content a {\n\t\t//           color: #0066cc;\n\t\t//           text-decoration: none;\n\t\t//         }\n\t\t//         .content a:hover {\n\t\t//           text-decoration: underline;\n\t\t//         }\n\t\t//         .tags {\n\t\t//           margin-top: 20px;\n\t\t//           padding-top: 20px;\n\t\t//           border-top: 1px solid #eee;\n\t\t//         }\n\t\t//         .tag {\n\t\t//           display: inline-block;\n\t\t//           background: #f0f0f0;\n\t\t//           padding: 3px 8px;\n\t\t//           border-radius: 3px;\n\t\t//           margin-right: 5px;\n\t\t//           font-size: 0.9em;\n\t\t//         }\n\t\t//         .source-link {\n\t\t//           margin-top: 20px;\n\t\t//           font-size: 0.9em;\n\t\t//           color: #666;\n\t\t//           border-top: 1px solid #eee;\n\t\t//           padding-top: 20px;\n\t\t//         }\n\t\t//         @media print {\n\t\t//           body { padding: 0; }\n\t\t//           .header { border-bottom: 1px solid #000; }\n\t\t//           .tags { border-top: 1px solid #000; }\n\t\t//           .source-link { border-top: 1px solid #000; }\n\t\t//         }\n\t\t//       </style>\n\t\t//     </head>\n\t\t//     <body>\n\t\t//       <div class=\"header\">\n\t\t//         <h1>${article.title}</h1>\n\t\t//         <div class=\"metadata\">\n\t\t//           <span><strong>Source:</strong> ${article.source}</span>\n\t\t//           ${article.author ? `<span><strong>Author:</strong> ${article.author}</span>` : ''}\n\t\t//           <span><strong>Published:</strong> ${article.publishedAt || article.date}</span>\n\t\t//         </div>\n\t\t//       </div>\n\t\t//       <div class=\"content\">\n\t\t//         ${sanitizedContent}\n\t\t//       </div>\n\t\t//       ${article.categories && article.categories.length > 0 ? `\n\t\t//         <div class=\"tags\">\n\t\t//           Tags: ${article.categories.map((tag: string) => `<span class=\"tag\">${tag}</span>`).join('')}\n\t\t//         </div>\n\t\t//       ` : ''}\n\t\t//       <div class=\"source-link\">\n\t\t//         <p>Source: <a href=\"${article.url}\" target=\"_blank\">${article.url}</a></p>\n\t\t//         <p>Printed on: ${new Date().toLocaleString()}</p>\n\t\t//         <p>Printed by: <a href=\"https://yakkl.com/?utm_source=yakkl-wallet&utm_medium=print&utm_campaign=${encodeURIComponent(article.source)}&utm_content=${encodeURIComponent(article.title)}\" target=\"_blank\">YAKKL Smart Wallet</a></p>\n\t\t//       </div>\n\t\t//     </body>\n\t\t//   </html>\n\t\t// `);\n\t\t// doc.close();\n\n\t\t// Ensure the content is loaded before printing\n\t\t// setTimeout(() => {\n\t\t//   printWindow.focus();\n\t\t//   printWindow.print();\n\t\t// }, 500);\n\t}\n\n\t// Not for printing from extension context. Use in normal browser context window.\n\tfunction printArticle(article: RSSItem, sanitizedContent: string) {\n\t\tconst iframe = document.createElement('iframe');\n\t\tiframe.style.position = 'fixed';\n\t\tiframe.style.right = '0';\n\t\tiframe.style.bottom = '0';\n\t\tiframe.style.width = '0';\n\t\tiframe.style.height = '0';\n\t\tiframe.style.border = 'none';\n\n\t\t// Set the HTML via srcdoc\n\t\tiframe.srcdoc = generatePrintHtml(article, sanitizedContent);\n\n\t\tdocument.body.appendChild(iframe);\n\n\t\tiframe.onload = () => {\n\t\t\tiframe.contentWindow.focus();\n\t\t\tiframe.contentWindow.print();\n\t\t\t// Optionally remove the iframe afterward\n\t\t\tsetTimeout(() => iframe.remove(), 1000);\n\t\t};\n\t}\n\n\tfunction generatePrintHtml(article: RSSItem, sanitizedContent: string) {\n\t\treturn `\n    <!DOCTYPE html>\n      <html>\n        <head>\n          <title>${article.title}</title>\n          <meta charset=\"utf-8\">\n          <link rel=\"shortcut icon\" href=\"https://yakkl.com/images/favicon.png\" />\n          <style>\n            body {\n              font-family: Arial, sans-serif;\n              padding: 20px;\n              max-width: 800px;\n              margin: 0 auto;\n              color: #333;\n            }\n            .header {\n              margin-bottom: 20px;\n              border-bottom: 1px solid #eee;\n              padding-bottom: 20px;\n            }\n            .metadata {\n              color: #666;\n              font-size: 0.9em;\n              margin: 10px 0;\n            }\n            .metadata span {\n              margin-right: 15px;\n            }\n            .content {\n              line-height: 1.6;\n              font-size: 1.1em;\n              white-space: pre-wrap;\n              margin: 20px 0;\n            }\n            .content img {\n              max-width: 100%;\n              height: auto;\n              margin: 10px 0;\n            }\n            .content a {\n              color: #0066cc;\n              text-decoration: none;\n            }\n            .content a:hover {\n              text-decoration: underline;\n            }\n            .tags {\n              margin-top: 20px;\n              padding-top: 20px;\n              border-top: 1px solid #eee;\n            }\n            .tag {\n              display: inline-block;\n              background: #f0f0f0;\n              padding: 3px 8px;\n              border-radius: 3px;\n              margin-right: 5px;\n              font-size: 0.9em;\n            }\n            .source-link {\n              margin-top: 20px;\n              font-size: 0.9em;\n              color: #666;\n              border-top: 1px solid #eee;\n              padding-top: 20px;\n            }\n            @media print {\n              body { padding: 0; }\n              .header { border-bottom: 1px solid #000; }\n              .tags { border-top: 1px solid #000; }\n              .source-link { border-top: 1px solid #000; }\n            }\n          </style>\n        </head>\n        <body>\n          <div class=\"header\">\n            <h1>${article.title}</h1>\n            <div class=\"metadata\">\n              <span><strong>Source:</strong> ${article.source}</span>\n              ${article.author ? `<span><strong>Author:</strong> ${article.author}</span>` : ''}\n              <span><strong>Published:</strong> ${article.publishedAt || article.date}</span>\n            </div>\n          </div>\n          <div class=\"content\">\n            ${sanitizedContent}\n          </div>\n          ${\n\t\t\t\t\t\tarticle.categories && article.categories.length > 0\n\t\t\t\t\t\t\t? `\n            <div class=\"tags\">\n              Tags: ${article.categories.map((tag: string) => `<span class=\"tag\">${tag}</span>`).join('')}\n            </div>\n          `\n\t\t\t\t\t\t\t: ''\n\t\t\t\t\t}\n          <div class=\"source-link\">\n            <p>Source: <a href=\"${article.url}\" target=\"_blank\">${article.url}</a></p>\n            <p>Printed on: ${new Date().toLocaleString()}</p>\n            <p>Printed by: <a href=\"https://yakkl.com/?utm_source=yakkl-wallet&utm_medium=print&utm_campaign=${encodeURIComponent(article.source)}&utm_content=${encodeURIComponent(article.title)}\" target=\"_blank\">YAKKL Smart Wallet</a></p>\n          </div>\n        </body>\n      </html>\n    `;\n\t}\n</script>\n\n<div\n\tclass=\"absolute top-1 right-1 flex items-center space-x-2 bg-white/90 dark:bg-zinc-800/90 backdrop-blur-sm rounded-full p-1 shadow-lg z-10 transition-all duration-200 opacity-0 group-hover:opacity-100\"\n>\n\t<Tooltip content={$isBookmarked ? 'Unbookmark article' : 'Bookmark article'}>\n\t\t<button\n\t\t\tclass=\"text-gray-400 hover:text-gray-500 focus:outline-none relative {bookmarkEnabled\n\t\t\t\t? ''\n\t\t\t\t: 'opacity-50 cursor-not-allowed'}\"\n\t\t\tdisabled={!bookmarkEnabled}\n\t\t\tonclick={handleBookmark}\n\t\t>\n\t\t\t<BookmarkIcon\n\t\t\t\tclassName=\"w-5 h-5 {$isBookmarked\n\t\t\t\t\t? 'fill-yellow-400'\n\t\t\t\t\t: 'fill-none'} stroke-current text-gray-400\"\n\t\t\t/>\n\t\t</button>\n\t</Tooltip>\n\t<Tooltip content=\"Print article\">\n\t\t<button\n\t\t\tclass=\"text-gray-400 hover:text-gray-500 focus:outline-none relative {printEnabled\n\t\t\t\t? ''\n\t\t\t\t: 'opacity-50 cursor-not-allowed'}\"\n\t\t\tdisabled={!printEnabled}\n\t\t\tonclick={() => handlePrint(article.url)}\n\t\t>\n\t\t\t<PrinterIcon className=\"w-5 h-5 text-gray-400\" />\n\t\t</button>\n\t</Tooltip>\n\n\t<Tooltip content=\"Delete\">\n\t\t<button\n\t\t\tclass=\"text-gray-400 hover:text-gray-500 focus:outline-none relative {deleteEnabled\n\t\t\t\t? ''\n\t\t\t\t: 'opacity-50 cursor-not-allowed'}\"\n\t\t\tdisabled={!deleteEnabled}\n\t\t\tonclick={() => (showDeleteConfirmation = true)}\n\t\t>\n\t\t\t<TrashIcon className=\"w-5 h-5 text-gray-400\" />\n\t\t</button>\n\t</Tooltip>\n</div>\n\n{#if showDeleteConfirmation}\n\t<Confirmation\n\t\tshow={showDeleteConfirmation}\n\t\ttitle=\"Delete Article\"\n\t\tmessage=\"Are you sure you want to delete this article?\"\n\t\tonConfirm={handleDelete}\n\t\tonReject={() => {\n\t\t\tshowDeleteConfirmation = false;\n\t\t}}\n\t/>\n{/if}\n","<!-- src/lib/components/ExtensionRSSNewsFeed.svelte -->\n<script lang=\"ts\">\n\timport { onMount, onDestroy } from 'svelte';\n\timport {\n\t\tExtensionRSSFeedService,\n\t\ttype RSSItem,\n\t\ttype RSSFeed\n\t} from '$lib/managers/ExtensionRSSFeedService';\n\timport NewsFeed from './NewsFeed.svelte';\n\timport { log } from '$lib/managers/Logger';\n\timport RefreshIcon from './icons/RefreshIcon.svelte';\n\timport { browser_ext } from '$lib/common/environment';\n\timport { UnifiedTimerManager } from '$lib/managers/UnifiedTimerManager';\n\n\tconst FIVE_MINUTES = 5 * 60 * 1000; // 5 minutes in milliseconds\n\tconst THIRTY_MINUTES = 30 * 60 * 1000; // 30 minutes in milliseconds\n\n\tinterface Props {\n\t\tshow?: boolean;\n\t\tfeedUrls: string[];\n\t\tmaxItemsPerFeed?: number;\n\t\tmaxVisibleItems?: number;\n\t\tclassName?: string;\n\t\tlocked?: boolean;\n\t\ttitle?: string;\n\t\tinterval?: number;\n\t}\n\n\tlet {\n\t\tshow = $bindable(true),\n\t\tfeedUrls,\n\t\tmaxVisibleItems = 3,\n\t\tclassName = '',\n\t\tlocked = true,\n\t\tmaxItemsPerFeed = locked ? 3 : 0,\n\t\ttitle = 'Crypto News',\n\t\tinterval = FIVE_MINUTES\n\t}: Props = $props();\n\n\t// Override interval if locked\n\tconst effectiveInterval = locked ? THIRTY_MINUTES : interval;\n\n\tlet newsItems = $state<RSSItem[]>([]);\n\tlet isLoading = $state(true);\n\tlet error = $state<string | null>(null);\n\n\tconst rssService = ExtensionRSSFeedService.getInstance();\n\tconst timerManager = UnifiedTimerManager.getInstance();\n\tconst timerId = 'rss-feed-refresh';\n\n\tonMount(() => {\n\t\tloadFeeds();\n\n\t\t// Set up refresh interval using UnifiedTimerManager\n\t\ttimerManager.addInterval(timerId, loadFeeds, effectiveInterval);\n\t\ttimerManager.startInterval(timerId);\n\n\t\t// Listen for updates from background script\n\t\tconst messageListener = (message: any, sender: any, sendResponse: any) => {\n\t\t\tif (message.type === 'RSS_FEED_UPDATE') {\n\t\t\t\tloadFeeds();\n\t\t\t}\n\t\t\treturn Promise.resolve(true);\n\t\t};\n\n\t\tbrowser_ext.runtime.onMessage.addListener(messageListener);\n\n\t\treturn () => {\n\t\t\ttimerManager.stopInterval(timerId);\n\t\t\ttimerManager.removeInterval(timerId);\n\t\t\tbrowser_ext.runtime.onMessage.removeListener(messageListener);\n\t\t};\n\t});\n\n\tasync function loadFeeds() {\n\t\tisLoading = true;\n\t\terror = null;\n\n\t\ttry {\n\t\t\tconst allItems: RSSItem[] = [];\n\n\t\t\t// Try to fetch fresh data\n\t\t\tconst feedPromises = feedUrls.map(\n\t\t\t\t(url: string): Promise<RSSFeed | null> =>\n\t\t\t\t\trssService.fetchFeed(url).catch((err: unknown): null => {\n\t\t\t\t\t\tlog.warn(`Failed to fetch feed ${url}:`, false, err);\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t})\n\t\t\t);\n\n\t\t\tconst feeds = await Promise.all(feedPromises);\n\n\t\t\t// Combine and sort items from all feeds\n\t\t\tfeeds.forEach((feed) => {\n\t\t\t\tif (feed) {\n\t\t\t\t\tallItems.push(...feed.items.slice(0, maxItemsPerFeed));\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Sort by date (assuming the date strings can be parsed)\n\t\t\tallItems.sort((a, b) => {\n\t\t\t\tconst dateA = parseRelativeDate(a.date);\n\t\t\t\tconst dateB = parseRelativeDate(b.date);\n\t\t\t\treturn dateB.getTime() - dateA.getTime();\n\t\t\t});\n\n\t\t\tnewsItems = allItems;\n\t\t} catch (err) {\n\t\t\terror = err instanceof Error ? err.message : 'Failed to load RSS feeds';\n\t\t\tlog.warn('RSS feed error:', false, err);\n\t\t} finally {\n\t\t\tisLoading = false;\n\t\t}\n\t}\n\n\tasync function refreshFeeds() {\n\t\t// Send message to background script to refresh feeds\n\t\t// chrome.runtime.sendMessage({ action: 'fetchRSSFeeds' }, (response) => {\n\t\t//   if (response.success) {\n\t\tloadFeeds();\n\t\t//   }\n\t\t// });\n\t}\n\n\tfunction parseRelativeDate(dateStr: string): Date {\n\t\tconst now = new Date();\n\n\t\tif (dateStr === 'Just now') {\n\t\t\treturn now;\n\t\t}\n\n\t\tconst match = dateStr.match(/(\\d+)\\s+(minute|hour|day)s?\\s+ago/);\n\t\tif (match) {\n\t\t\tconst value = parseInt(match[1]);\n\t\t\tconst unit = match[2];\n\n\t\t\tswitch (unit) {\n\t\t\t\tcase 'minute':\n\t\t\t\t\treturn new Date(now.getTime() - value * 60 * 1000);\n\t\t\t\tcase 'hour':\n\t\t\t\t\treturn new Date(now.getTime() - value * 60 * 60 * 1000);\n\t\t\t\tcase 'day':\n\t\t\t\t\treturn new Date(now.getTime() - value * 24 * 60 * 60 * 1000);\n\t\t\t}\n\t\t}\n\n\t\tif (dateStr === 'Yesterday') {\n\t\t\treturn new Date(now.getTime() - 24 * 60 * 60 * 1000);\n\t\t}\n\n\t\t// Default to now if we can't parse\n\t\treturn now;\n\t}\n</script>\n\n{#if show}\n\t<div class={className}>\n\t\t{#if isLoading}\n\t\t\t<div class=\"flex items-center justify-center p-8\">\n\t\t\t\t<div class=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500\"></div>\n\t\t\t</div>\n\t\t{:else if error}\n\t\t\t<div class=\"flex flex-col items-center justify-center p-8 text-red-500\">\n\t\t\t\t<p class=\"text-sm font-medium\">Error loading news</p>\n\t\t\t\t<p class=\"text-xs mt-1\">{error}</p>\n\t\t\t\t<button\n\t\t\t\t\tonclick={refreshFeeds}\n\t\t\t\t\tclass=\"mt-4 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 text-sm\"\n\t\t\t\t>\n\t\t\t\t\tRetry\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t{:else}\n\t\t\t<div class=\"flex items-center justify-between mb-0\">\n\t\t\t\t<h2 class=\"text-lg font-semibold\">{title}</h2>\n\t\t\t\t<button\n\t\t\t\t\tonclick={refreshFeeds}\n\t\t\t\t\tclass=\"p-1 text-blue-500 hover:text-blue-600 transition-colors\"\n\t\t\t\t\taria-label=\"Refresh feeds\"\n\t\t\t\t>\n\t\t\t\t\t<RefreshIcon className=\"w-4 h-4\" />\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<NewsFeed {newsItems} {maxVisibleItems} {className} {locked} {maxItemsPerFeed} />\n\t\t{/if}\n\t</div>\n{/if}\n","<script lang=\"ts\">\n\tlet { className = 'size-6' } = $props<{\n\t\tclassName?: string;\n\t}>();\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width=\"1.5\"\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M15.75 15.75V18m-7.5-6.75h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V13.5Zm0 2.25h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V18Zm2.498-6.75h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V13.5Zm0 2.25h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V18Zm2.504-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5Zm0 2.25h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V18Zm2.498-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5ZM8.25 6h7.5v2.25h-7.5V6ZM12 2.25c-1.892 0-3.758.11-5.593.322C5.307 2.7 4.5 3.65 4.5 4.757V19.5a2.25 2.25 0 0 0 2.25 2.25h10.5a2.25 2.25 0 0 0 2.25-2.25V4.757c0-1.108-.806-2.057-1.907-2.185A48.507 48.507 0 0 0 12 2.25Z\"\n\t/>\n</svg>\n","<!-- src/lib/components/EthUnitConverter.svelte -->\n<script lang=\"ts\">\n\timport Modal from './Modal.svelte';\n\timport { onMount } from 'svelte';\n\timport { PriceManager } from '$lib/managers/PriceManager';\n\timport { CoinbasePriceProvider } from '$lib/managers/providers/price/coinbase/CoinbasePriceProvider';\n\timport { CoingeckoPriceProvider } from '$lib/managers/providers/price/coingecko/CoingeckoPriceProvider';\n\timport { KrakenPriceProvider } from '$lib/managers/providers/price/kraken/KrakenPriceProvider';\n\timport { log } from '$lib/managers/Logger';\n\n\tlet {\n\t\tshow = $bindable(false),\n\t\tinitialValue = '',\n\t\tinitialUnit = 'ether' as 'wei' | 'gwei' | 'ether',\n\t\tonComplete = null as ((value: string, unit: 'wei' | 'gwei' | 'ether') => void) | null,\n\t\tcompact = false,\n\t\tshowUsdValue = true,\n\t\tonClose = () => {\n\t\t\tshow = false;\n\t\t}\n\t} = $props<{\n\t\tshow?: boolean;\n\t\tinitialValue?: string;\n\t\tinitialUnit?: 'wei' | 'gwei' | 'ether';\n\t\tonComplete?: ((value: string, unit: 'wei' | 'gwei' | 'ether') => void) | null;\n\t\tcompact?: boolean;\n\t\tshowUsdValue?: boolean;\n\t\tonClose?: () => void;\n\t}>();\n\n\t// ETH unit conversion state\n\tlet wei = $state('');\n\tlet gwei = $state('');\n\tlet ether = $state('');\n\tlet ethPrice = $state(0);\n\tlet selectedUnit = $state<'wei' | 'gwei' | 'ether'>(initialUnit);\n\n\t// USD calculation\n\tlet ethUnitUsd = $derived.by(() => {\n\t\tif (ether && ethPrice && showUsdValue) {\n\t\t\tconst etherNum = parseFloat(ether);\n\t\t\tif (!isNaN(etherNum) && etherNum > 0) {\n\t\t\t\tconst usdValue = etherNum * ethPrice;\n\t\t\t\treturn `$${usdValue.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;\n\t\t\t}\n\t\t}\n\t\treturn '';\n\t});\n\n\tconst priceManager = new PriceManager([\n\t\t{ provider: new CoinbasePriceProvider(), weight: 5 },\n\t\t{ provider: new CoingeckoPriceProvider(), weight: 3 },\n\t\t{ provider: new KrakenPriceProvider(), weight: 2 }\n\t]);\n\n\t// ETH conversion functions\n\tfunction weiToGwei(wei: string): string {\n\t\ttry {\n\t\t\tif (!wei || wei === '0') return '';\n\t\t\tconst weiNum = BigInt(wei);\n\t\t\tconst gweiWhole = weiNum / 1_000_000_000n;\n\t\t\tconst remainder = weiNum % 1_000_000_000n;\n\n\t\t\tif (remainder === 0n) {\n\t\t\t\treturn gweiWhole.toString();\n\t\t\t}\n\n\t\t\tconst remainderStr = remainder.toString().padStart(9, '0');\n\t\t\tconst trimmed = remainderStr.replace(/0+$/, '');\n\n\t\t\tif (trimmed) {\n\t\t\t\treturn `${gweiWhole}.${trimmed}`;\n\t\t\t}\n\t\t\treturn gweiWhole.toString();\n\t\t} catch {\n\t\t\treturn '';\n\t\t}\n\t}\n\n\tfunction weiToEther(wei: string): string {\n\t\ttry {\n\t\t\tif (!wei || wei === '0') return '';\n\t\t\tconst weiNum = BigInt(wei);\n\t\t\tconst etherWhole = weiNum / 1_000_000_000_000_000_000n;\n\t\t\tconst remainder = weiNum % 1_000_000_000_000_000_000n;\n\n\t\t\tif (remainder === 0n) {\n\t\t\t\treturn etherWhole.toString();\n\t\t\t}\n\n\t\t\tconst remainderStr = remainder.toString().padStart(18, '0');\n\t\t\tconst trimmed = remainderStr.replace(/0+$/, '');\n\n\t\t\tif (trimmed) {\n\t\t\t\treturn `${etherWhole}.${trimmed}`;\n\t\t\t}\n\t\t\treturn etherWhole.toString();\n\t\t} catch {\n\t\t\treturn '';\n\t\t}\n\t}\n\n\tfunction gweiToWei(gwei: string): string {\n\t\ttry {\n\t\t\tif (!gwei) return '';\n\t\t\tconst parts = gwei.split('.');\n\t\t\tconst wholePart = parts[0] || '0';\n\t\t\tconst decimalPart = parts[1] || '';\n\n\t\t\tconst paddedDecimal = decimalPart.padEnd(9, '0').slice(0, 9);\n\t\t\tconst gweiInWei = BigInt(wholePart) * 1_000_000_000n;\n\t\t\tconst decimalInWei = BigInt(paddedDecimal);\n\n\t\t\treturn (gweiInWei + decimalInWei).toString();\n\t\t} catch {\n\t\t\treturn '';\n\t\t}\n\t}\n\n\tfunction gweiToEther(gwei: string): string {\n\t\ttry {\n\t\t\tif (!gwei) return '';\n\t\t\tconst weiValue = gweiToWei(gwei);\n\t\t\treturn weiToEther(weiValue);\n\t\t} catch {\n\t\t\treturn '';\n\t\t}\n\t}\n\n\tfunction etherToWei(ether: string): string {\n\t\ttry {\n\t\t\tif (!ether) return '';\n\t\t\tconst parts = ether.split('.');\n\t\t\tconst wholePart = parts[0] || '0';\n\t\t\tconst decimalPart = parts[1] || '';\n\n\t\t\tconst paddedDecimal = decimalPart.padEnd(18, '0').slice(0, 18);\n\t\t\tconst combined = wholePart + paddedDecimal;\n\n\t\t\treturn BigInt(combined).toString();\n\t\t} catch {\n\t\t\treturn '';\n\t\t}\n\t}\n\n\tfunction etherToGwei(ether: string): string {\n\t\ttry {\n\t\t\tif (!ether) return '';\n\t\t\tconst weiValue = etherToWei(ether);\n\t\t\treturn weiToGwei(weiValue);\n\t\t} catch {\n\t\t\treturn '';\n\t\t}\n\t}\n\n\t// Fetch ETH price\n\tasync function fetchEthPrice() {\n\t\ttry {\n\t\t\tconst result = await priceManager.getMarketPrice('ETH-USD');\n\t\t\tethPrice = result && typeof result === 'object' && 'price' in result ? result.price : 0;\n\t\t} catch (error) {\n\t\t\tlog.error('Failed to fetch ETH price:', false, error);\n\t\t\tethPrice = 0;\n\t\t}\n\t}\n\n\t// Input handlers\n\tfunction handleWeiInput(e: Event) {\n\t\tconst target = e.target as HTMLInputElement;\n\t\tconst value = target.value;\n\n\t\tif (!/^\\d*$/.test(value)) {\n\t\t\ttarget.value = wei;\n\t\t\treturn;\n\t\t}\n\n\t\twei = value;\n\t\tselectedUnit = 'wei';\n\t\tif (value) {\n\t\t\tgwei = weiToGwei(value);\n\t\t\tether = weiToEther(value);\n\t\t} else {\n\t\t\tgwei = '';\n\t\t\tether = '';\n\t\t}\n\t}\n\n\tfunction handleGweiInput(e: Event) {\n\t\tconst target = e.target as HTMLInputElement;\n\t\tconst value = target.value;\n\n\t\tif (!/^\\d*\\.?\\d{0,9}$/.test(value)) {\n\t\t\ttarget.value = gwei;\n\t\t\treturn;\n\t\t}\n\n\t\tgwei = value;\n\t\tselectedUnit = 'gwei';\n\t\tif (value) {\n\t\t\twei = gweiToWei(value);\n\t\t\tether = gweiToEther(value);\n\t\t} else {\n\t\t\twei = '';\n\t\t\tether = '';\n\t\t}\n\t}\n\n\tfunction handleEtherInput(e: Event) {\n\t\tconst target = e.target as HTMLInputElement;\n\t\tconst value = target.value;\n\n\t\tif (!/^\\d*\\.?\\d{0,18}$/.test(value)) {\n\t\t\ttarget.value = ether;\n\t\t\treturn;\n\t\t}\n\n\t\tether = value;\n\t\tselectedUnit = 'ether';\n\t\tif (value) {\n\t\t\twei = etherToWei(value);\n\t\t\tgwei = etherToGwei(value);\n\t\t} else {\n\t\t\twei = '';\n\t\t\tgwei = '';\n\t\t}\n\t}\n\n\tfunction applyValue() {\n\t\tif (onComplete) {\n\t\t\tconst value = selectedUnit === 'wei' ? wei : selectedUnit === 'gwei' ? gwei : ether;\n\t\t\tonComplete(value, selectedUnit);\n\t\t\tif (!compact) show = false;\n\t\t}\n\t}\n\n\tfunction clearFields() {\n\t\twei = '';\n\t\tgwei = '';\n\t\tether = '';\n\t}\n\n\tonMount(async () => {\n\t\tif (showUsdValue) {\n\t\t\tawait fetchEthPrice();\n\t\t}\n\n\t\tif (initialValue) {\n\t\t\tswitch (initialUnit) {\n\t\t\t\tcase 'wei':\n\t\t\t\t\twei = initialValue;\n\t\t\t\t\thandleWeiInput({ target: { value: initialValue } } as any);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'gwei':\n\t\t\t\t\tgwei = initialValue;\n\t\t\t\t\thandleGweiInput({ target: { value: initialValue } } as any);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'ether':\n\t\t\t\t\tether = initialValue;\n\t\t\t\t\thandleEtherInput({ target: { value: initialValue } } as any);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t});\n</script>\n\n{#if compact}\n\t<!-- Inline version for embedding -->\n\t<div class=\"eth-converter-compact space-y-2 p-3 border rounded-lg\">\n\t\t<div class=\"flex items-center justify-between mb-2\">\n\t\t\t<h3 class=\"text-sm font-medium\">ETH Unit Converter</h3>\n\t\t\t<button type=\"button\" class=\"text-xs text-gray-500 hover:text-gray-700\" onclick={clearFields}>\n\t\t\t\tClear\n\t\t\t</button>\n\t\t</div>\n\n\t\t<div class=\"space-y-2\">\n\t\t\t<div class=\"flex gap-2 items-center\">\n\t\t\t\t<!-- svelte-ignore a11y_label_has_associated_control -->\n\t\t\t\t<label class=\"w-12 text-xs\">Wei</label>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tpattern=\"[0-9]*\"\n\t\t\t\t\tinputmode=\"numeric\"\n\t\t\t\t\tplaceholder=\"0\"\n\t\t\t\t\tclass=\"rounded border px-2 py-1 flex-1 font-mono text-xs\"\n\t\t\t\t\tbind:value={wei}\n\t\t\t\t\toninput={handleWeiInput}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div class=\"flex gap-2 items-center\">\n\t\t\t\t<!-- svelte-ignore a11y_label_has_associated_control -->\n\t\t\t\t<label class=\"w-12 text-xs\">Gwei (gas)</label>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tinputmode=\"decimal\"\n\t\t\t\t\tplaceholder=\"0.0\"\n\t\t\t\t\tclass=\"rounded border px-2 py-1 flex-1 font-mono text-xs\"\n\t\t\t\t\tbind:value={gwei}\n\t\t\t\t\toninput={handleGweiInput}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div class=\"flex gap-2 items-center\">\n\t\t\t\t<!-- svelte-ignore a11y_label_has_associated_control -->\n\t\t\t\t<label class=\"w-12 text-xs\">ETH</label>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tinputmode=\"decimal\"\n\t\t\t\t\tplaceholder=\"0.0\"\n\t\t\t\t\tclass=\"rounded border px-2 py-1 flex-1 font-mono text-xs\"\n\t\t\t\t\tbind:value={ether}\n\t\t\t\t\toninput={handleEtherInput}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\n\t\t{#if showUsdValue && ethUnitUsd}\n\t\t\t<div class=\"text-xs text-green-600 dark:text-green-400 font-semibold mt-2\">\n\t\t\t\t{ethUnitUsd}\n\t\t\t</div>\n\t\t{/if}\n\n\t\t{#if onComplete}\n\t\t\t<div class=\"flex justify-end mt-2\">\n\t\t\t\t<button type=\"button\" class=\"btn btn-sm btn-primary\" onclick={applyValue}> Apply </button>\n\t\t\t</div>\n\t\t{/if}\n\t</div>\n{:else}\n\t<!-- Modal version -->\n\t<Modal bind:show title=\"ETH Unit Converter\" {onClose}>\n\t\t<div class=\"space-y-4 p-4 mt-4\">\n\t\t\t<div class=\"relative\">\n\t\t\t\t<button\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tclass=\"absolute -top-8 right-0 text-xs text-gray-600 hover:text-gray-900 dark:hover:text-gray-200 px-2 py-1\"\n\t\t\t\t\tonclick={clearFields}\n\t\t\t\t\taria-label=\"Clear\"\n\t\t\t\t>\n\t\t\t\t\t<svg\n\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\tstroke-width=\"1.5\"\n\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\tclass=\"size-6\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\td=\"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</svg>\n\t\t\t\t</button>\n\n\t\t\t\t<div class=\"flex flex-col gap-3\">\n\t\t\t\t\t<div class=\"flex gap-2 items-center\">\n\t\t\t\t\t\t<!-- svelte-ignore a11y_label_has_associated_control -->\n\t\t\t\t\t\t<label class=\"w-16 text-sm\">Wei</label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tpattern=\"[0-9]*\"\n\t\t\t\t\t\t\tinputmode=\"numeric\"\n\t\t\t\t\t\t\tplaceholder=\"0\"\n\t\t\t\t\t\t\tclass=\"rounded border px-3 py-2 flex-1 font-mono text-sm\"\n\t\t\t\t\t\t\tbind:value={wei}\n\t\t\t\t\t\t\toninput={handleWeiInput}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"flex gap-2 items-center\">\n\t\t\t\t\t\t<!-- svelte-ignore a11y_label_has_associated_control -->\n\t\t\t\t\t\t<label class=\"w-16 text-sm\">Gwei (gas)</label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tinputmode=\"decimal\"\n\t\t\t\t\t\t\tplaceholder=\"0.0\"\n\t\t\t\t\t\t\tclass=\"rounded border px-3 py-2 flex-1 font-mono text-sm\"\n\t\t\t\t\t\t\tbind:value={gwei}\n\t\t\t\t\t\t\toninput={handleGweiInput}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"flex gap-2 items-center\">\n\t\t\t\t\t\t<!-- svelte-ignore a11y_label_has_associated_control -->\n\t\t\t\t\t\t<label class=\"w-16 text-sm\">Ether</label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tinputmode=\"decimal\"\n\t\t\t\t\t\t\tplaceholder=\"0.0\"\n\t\t\t\t\t\t\tclass=\"rounded border px-3 py-2 flex-1 font-mono text-sm\"\n\t\t\t\t\t\t\tbind:value={ether}\n\t\t\t\t\t\t\toninput={handleEtherInput}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{#if showUsdValue}\n\t\t\t\t\t\t<div class=\"pt-2 space-y-1\">\n\t\t\t\t\t\t\t<div class=\"text-xs text-gray-500\">\n\t\t\t\t\t\t\t\t1 ETH ≈ ${ethPrice\n\t\t\t\t\t\t\t\t\t? ethPrice.toLocaleString(undefined, {\n\t\t\t\t\t\t\t\t\t\t\tminimumFractionDigits: 2,\n\t\t\t\t\t\t\t\t\t\t\tmaximumFractionDigits: 2\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t: '--'} USD\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{#if ethUnitUsd}\n\t\t\t\t\t\t\t\t<div class=\"text-sm text-green-600 dark:text-green-400 font-semibold\">\n\t\t\t\t\t\t\t\t\t{ethUnitUsd}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"flex justify-end gap-2 mt-6\">\n\t\t\t\t{#if onComplete}\n\t\t\t\t\t<button type=\"button\" class=\"btn btn-primary\" onclick={applyValue}> Apply </button>\n\t\t\t\t{/if}\n\t\t\t\t<button type=\"button\" class=\"btn btn-secondary\" onclick={onClose}> Close </button>\n\t\t\t</div>\n\t\t</div>\n\t</Modal>\n{/if}\n","<script lang=\"ts\">\n\tinterface Props {\n\t\tclassName?: string;\n\t}\n\n\tlet { className = 'w-6 h-6' }: Props = $props();\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width=\"1.5\"\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z\"\n\t/>\n</svg>\n","<!-- File: src/lib/components/icons/SortIcon.svelte -->\n<script lang=\"ts\">\n\tinterface Props {\n\t\tclassName?: string;\n\t}\n\n\tlet { className = 'w-6 h-6' }: Props = $props();\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width=\"1.5\"\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M3 7.5 7.5 3m0 0L12 7.5M7.5 3v13.5m13.5 0L16.5 21m0 0L12 16.5m4.5 4.5V7.5\"\n\t/>\n</svg>\n","<!-- SearchSortControls.svelte -->\n<script lang=\"ts\">\n\timport SearchIcon from './icons/SearchIcon.svelte';\n\timport SortIcon from './icons/SortIcon.svelte';\n\timport { UnifiedTimerManager } from '$lib/managers/UnifiedTimerManager';\n\n\tlet {\n\t\tsearchQuery = '',\n\t\tsortOrder = 'date',\n\t\tsortDirection = 'desc',\n\t\tonSearch,\n\t\tonSortOrderChange,\n\t\tonSortDirectionChange\n\t} = $props<{\n\t\tsearchQuery?: string;\n\t\tsortOrder?: 'date' | 'title';\n\t\tsortDirection?: 'asc' | 'desc';\n\t\tonSearch: (query: string) => void;\n\t\tonSortOrderChange: (order: 'date' | 'title') => void;\n\t\tonSortDirectionChange: () => void;\n\t}>();\n\n\t// Handle search input with debounce using UnifiedTimerManager\n\tconst debouncedSearch = UnifiedTimerManager.createDebounce((value: string) => {\n\t\tonSearch(value);\n\t}, 300);\n\n\tfunction handleSearch(e: Event) {\n\t\tconst value = (e.target as HTMLInputElement).value;\n\t\tdebouncedSearch(value);\n\t}\n\n\t// Handle sort order change\n\tfunction handleSortOrderChange(e: Event) {\n\t\tconst value = (e.target as HTMLSelectElement).value as 'date' | 'title';\n\t\tonSortOrderChange(value);\n\t}\n\n\t// Handle sort direction change\n\tfunction handleSortDirectionChange() {\n\t\tonSortDirectionChange();\n\t}\n</script>\n\n<div class=\"flex items-center justify-end mb-2\">\n\t<div\n\t\tclass=\"flex items-center space-x-2 bg-white/90 dark:bg-zinc-800/90 backdrop-blur-sm rounded-full p-1.5 shadow-lg\"\n\t>\n\t\t<!-- Search Field -->\n\t\t<div class=\"relative flex-1 max-w-xs\">\n\t\t\t<div class=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n\t\t\t\t<SearchIcon className=\"w-4 h-4 text-gray-400\" />\n\t\t\t</div>\n\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\tclass=\"block w-full pl-10 pr-3 py-1.5 text-sm bg-transparent border border-gray-200 dark:border-zinc-700 rounded-full focus:ring-1 focus:ring-gray-300 dark:focus:ring-zinc-700 dark:text-gray-200\"\n\t\t\t\tplaceholder=\"Search articles...\"\n\t\t\t\tvalue={searchQuery}\n\t\t\t\toninput={handleSearch}\n\t\t\t/>\n\t\t</div>\n\n\t\t<!-- Sort Controls -->\n\t\t<div class=\"flex items-center space-x-1\">\n\t\t\t<select\n\t\t\t\tclass=\"text-sm bg-transparent border-0 focus:ring-0 focus:outline-none dark:text-gray-200\"\n\t\t\t\tvalue={sortOrder}\n\t\t\t\tonchange={handleSortOrderChange}\n\t\t\t>\n\t\t\t\t<option value=\"date\">Date</option>\n\t\t\t\t<option value=\"title\">Title</option>\n\t\t\t</select>\n\n\t\t\t<button\n\t\t\t\tclass=\"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-zinc-700 transition-colors duration-200\"\n\t\t\t\tonclick={handleSortDirectionChange}\n\t\t\t>\n\t\t\t\t<SortIcon\n\t\t\t\t\tclassName=\"w-4 h-4 text-gray-500 dark:text-gray-400 {sortDirection === 'asc'\n\t\t\t\t\t\t? 'rotate-180'\n\t\t\t\t\t\t: ''}\"\n\t\t\t\t/>\n\t\t\t</button>\n\t\t</div>\n\t</div>\n</div>\n","<script lang=\"ts\">\n\tconst { size = 24, stroke = 'currentColor', className = '' } = $props();\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width=\"1.5\"\n\t{stroke}\n\twidth={size}\n\theight={size}\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z\"\n\t/>\n</svg>\n","<script lang=\"ts\">\n\timport SectionCard from './SectionCard.svelte';\n\timport LockIcon from './icons/LockIcon.svelte';\n\timport Tooltip from './Tooltip.svelte';\n\timport { cn } from '$lib/utils';\n\n\tlet {\n\t\tshow = $bindable(true),\n\t\tlocked = false,\n\t\tlockMessage = 'Upgrade to unlock this feature',\n\t\tshowButton = true,\n\t\tonComplete = () => {},\n\t\ttitle,\n\t\ticon,\n\t\tisPinned,\n\t\teye,\n\t\teyeTooltip,\n\t\tclassName,\n\t\tminHeight,\n\t\tmaxHeight,\n\t\tfooter,\n\t\tfooterProps = {},\n\t\tlockedFooter,\n\t\tlockedFooterProps = {},\n\t\tchildren\n\t} = $props<{\n\t\tshow?: boolean;\n\t\tlocked?: boolean;\n\t\tlockMessage?: string | (() => string);\n\t\tshowButton?: boolean;\n\t\tonComplete?: () => void;\n\t\ttitle: string;\n\t\ticon?: any;\n\t\tclassName?: string;\n\t\tisPinned?: boolean;\n\t\teye?: boolean;\n\t\teyeTooltip?: string;\n\t\tminHeight?: string;\n\t\tmaxHeight?: string;\n\t\tfooter?: any;\n\t\tfooterProps?: Record<string, any>;\n\t\tlockedFooter?: any;\n\t\tlockedFooterProps?: Record<string, any>;\n\t\tchildren: () => any;\n\t}>();\n</script>\n\n{#if show}\n\t<SectionCard\n\t\tbind:show\n\t\t{title}\n\t\t{icon}\n\t\t{isPinned}\n\t\t{eye}\n\t\t{eyeTooltip}\n\t\t{className}\n\t\t{minHeight}\n\t\t{maxHeight}\n\t\t{footer}\n\t\t{footerProps}\n\t\t{lockedFooter}\n\t\t{lockedFooterProps}\n\t\t{locked}\n\t>\n\t\t<div class=\"relative\">\n\t\t\t<!-- The actual content -->\n\t\t\t<div\n\t\t\t\tclass={cn(\n\t\t\t\t\t'transition-all duration-300',\n\t\t\t\t\tlocked && 'blur-sm select-none pointer-events-none'\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t{@render children()}\n\t\t\t</div>\n\n\t\t\t{#if locked}\n\t\t\t\t<!-- Overlay with lock icon, message, and optional button -->\n\t\t\t\t<div\n\t\t\t\t\tclass=\"absolute inset-0 flex flex-col items-center bg-white/80 dark:bg-zinc-900/70 text-center py-4 rounded-xl z-10\"\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"sticky top-0 w-full flex flex-col items-center bg-white/80 dark:bg-zinc-900/70 backdrop-blur-sm py-1\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<LockIcon className=\"w-6 h-6 text-zinc-500 mb-2\" />\n\t\t\t\t\t\t<div class=\"text-zinc-800 dark:text-zinc-200 text-sm mb-2\">\n\t\t\t\t\t\t\t{typeof lockMessage === 'function' ? lockMessage() : lockMessage}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{#if showButton}\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"mt-1 px-4 py-2 rounded-lg bg-blue-600 text-white text-sm hover:bg-blue-700 transition\"\n\t\t\t\t\t\t\t\tonclick={() => onComplete()}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tUpgrade Now\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t<Tooltip content=\"Available with YAKKL Pro\">\n\t\t\t\t\t\t\t<span class=\"text-xs text-zinc-500 mt-2 cursor-help underline\"\n\t\t\t\t\t\t\t\t>Why is this locked?</span\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</div>\n\t</SectionCard>\n{/if}\n","<!-- svelte-ignore state_referenced_locally -->\n<!-- svelte-ignore state_referenced_locally -->\n<!-- BookmarkedArticles.svelte -->\n<script lang=\"ts\">\n\timport ArticleControls from './ArticleControls.svelte';\n\timport BookmarkIcon from './icons/BookmarkIcon.svelte';\n\timport NewsFeedLineView from './NewsFeedLineView.svelte';\n\timport SearchSortControls from './SearchSortControls.svelte';\n\timport type { RSSItem } from '$lib/managers/ExtensionRSSFeedService';\n\timport { yakklBookmarkedArticlesStore, setYakklBookmarkedArticles } from '$lib/common/stores';\n\timport { derived, writable } from 'svelte/store';\n\timport LockedSectionCard from './LockedSectionCard.svelte';\n\timport Upgrade from './Upgrade.svelte';\n\timport { onMount } from 'svelte';\n\timport { isProLevel } from '$lib/common/utils';\n\n\tinterface Props {\n\t\tshow?: boolean;\n\t\tlocked?: boolean;\n\t\tonComplete?: () => void;\n\t\tfooter?: any;\n\t\tfooterProps?: Record<string, any>;\n\t\tlockedFooter?: any;\n\t\tlockedFooterProps?: Record<string, any>;\n\t}\n\n\tlet {\n\t\tshow = $bindable(true),\n\t\tonComplete = $bindable(() => {}),\n\t\tlocked = $bindable(true),\n\t\tfooter = $bindable(null),\n\t\tfooterProps = $bindable({}),\n\t\tlockedFooter = $bindable(null),\n\t\tlockedFooterProps = $bindable({})\n\t}: Props = $props();\n\n\tlet showUpgradeModal = $state(false);\n\n\tconst searchQuery = writable('');\n\tconst sortOrder = writable<'date' | 'title'>('date');\n\tconst sortDirection = writable<'asc' | 'desc'>('desc');\n\n\tconst filteredArticles = derived(\n\t\t[yakklBookmarkedArticlesStore, searchQuery, sortOrder, sortDirection],\n\t\t([articles, query, order, direction]) => {\n\t\t\tlet filtered = articles;\n\t\t\tif (query) {\n\t\t\t\tconst searchLower = query.toLowerCase();\n\t\t\t\tfiltered = articles.filter(\n\t\t\t\t\t(article) =>\n\t\t\t\t\t\tarticle.title.toLowerCase().includes(searchLower) ||\n\t\t\t\t\t\tarticle.description?.toLowerCase().includes(searchLower) ||\n\t\t\t\t\t\tarticle.source.toLowerCase().includes(searchLower)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn [...filtered].sort((a, b) => {\n\t\t\t\tif (order === 'date') {\n\t\t\t\t\tconst dateA = new Date(a.publishedAt || a.date || '').getTime();\n\t\t\t\t\tconst dateB = new Date(b.publishedAt || b.date || '').getTime();\n\t\t\t\t\treturn direction === 'asc' ? dateA - dateB : dateB - dateA;\n\t\t\t\t}\n\t\t\t\treturn direction === 'asc'\n\t\t\t\t\t? a.title.localeCompare(b.title)\n\t\t\t\t\t: b.title.localeCompare(a.title);\n\t\t\t});\n\t\t}\n\t);\n\n\tonMount(async () => {\n\t\tlocked = (await isProLevel()) ? false : true;\n\t});\n\n\tfunction handleSearch(query: string) {\n\t\tsearchQuery.set(query);\n\t}\n\n\tfunction handleSortOrderChange(order: 'date' | 'title') {\n\t\tsortOrder.set(order);\n\t}\n\n\tfunction handleSortDirectionChange() {\n\t\tsortDirection.update((d) => (d === 'asc' ? 'desc' : 'asc'));\n\t}\n\n\tasync function handleArticleDelete(article: RSSItem) {\n\t\tconst currentArticles = $yakklBookmarkedArticlesStore;\n\t\tconst updatedArticles = currentArticles.filter(\n\t\t\t(a) => !(a.title === article.title && a.source === article.source)\n\t\t);\n\t\tawait setYakklBookmarkedArticles(updatedArticles);\n\t}\n\n\t// Only show locked footer if not pro\n\tlet showLockedFooter = $state(false);\n\n\tasync function updateLockedFooterState() {\n\t\tshowLockedFooter = !(await isProLevel());\n\t}\n\n\t$effect(() => {\n\t\tupdateLockedFooterState();\n\t});\n</script>\n\n<Upgrade bind:show={showUpgradeModal} {onComplete} />\n\n<LockedSectionCard\n\tbind:show\n\ttitle=\"Bookmarked Articles\"\n\ticon={BookmarkIcon}\n\tminHeight=\"300px\"\n\tmaxHeight=\"750px\"\n\t{locked}\n\tlockMessage=\"Upgrade to Pro to unlock this feature\"\n\tshowButton={true}\n\tonComplete={() => {\n\t\tshowUpgradeModal = true;\n\t}}\n\t{footer}\n\t{footerProps}\n\tlockedFooter={showLockedFooter ? lockedFooter : null}\n\tlockedFooterProps={showLockedFooter ? lockedFooterProps : {}}\n>\n\t<SearchSortControls\n\t\tsearchQuery={$searchQuery}\n\t\tsortOrder={$sortOrder}\n\t\tsortDirection={$sortDirection}\n\t\tonSearch={handleSearch}\n\t\tonSortOrderChange={handleSortOrderChange}\n\t\tonSortDirectionChange={handleSortDirectionChange}\n\t/>\n\n\t{#if $filteredArticles.length === 0}\n\t\t<div class=\"flex items-center justify-center h-32 text-gray-500\">\n\t\t\t<p>{$searchQuery ? 'No matching articles found' : 'No bookmarked articles yet'}</p>\n\t\t</div>\n\t{:else}\n\t\t<div class=\"space-y-0\">\n\t\t\t{#each $filteredArticles as article, index}\n\t\t\t\t<div class=\"relative group\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"group-hover:bg-gray-50 dark:group-hover:bg-zinc-800/50 transition-colors duration-200\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<NewsFeedLineView newsItem={article} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<ArticleControls\n\t\t\t\t\t\t{article}\n\t\t\t\t\t\tbookmarkEnabled={false}\n\t\t\t\t\t\tdeleteEnabled={true}\n\t\t\t\t\t\tonDelete={handleArticleDelete}\n\t\t\t\t\t/>\n\t\t\t\t\t{#if index < $filteredArticles.length - 1}\n\t\t\t\t\t\t<div class=\"flex justify-center\">\n\t\t\t\t\t\t\t<div class=\"w-[80%] h-[1px] bg-gray-200 dark:bg-gray-700\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t{/each}\n\t\t</div>\n\t{/if}\n</LockedSectionCard>\n","<!-- GenericFooter.svelte -->\n<script lang=\"ts\">\n\ttype FooterVariant = 'default' | 'warning' | 'success' | 'info';\n\n\tlet {\n\t\ttext = '',\n\t\tbuttonText = '',\n\t\tonAction = () => {},\n\t\tvariant = 'default' as FooterVariant,\n\t\tclassName = ''\n\t} = $props<{\n\t\ttext?: string;\n\t\tbuttonText?: string;\n\t\tonAction?: () => void;\n\t\tvariant?: FooterVariant;\n\t\tclassName?: string;\n\t}>();\n\n\tconst variantClasses: Record<FooterVariant, string> = {\n\t\tdefault: 'bg-zinc-50 dark:bg-zinc-800/50 text-zinc-700 dark:text-zinc-300',\n\t\twarning: 'bg-yellow-50 dark:bg-yellow-900/20 text-yellow-700 dark:text-yellow-300',\n\t\tsuccess: 'bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300',\n\t\tinfo: 'bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300'\n\t};\n\n\t$effect(() => {\n\t\t// Ensure variant is always a valid FooterVariant\n\t\tif (!Object.keys(variantClasses).includes(variant)) {\n\t\t\tvariant = 'default';\n\t\t}\n\t});\n</script>\n\n<div\n\tclass=\"flex items-center justify-between {variantClasses[variant as FooterVariant]} {className}\"\n>\n\t<p class=\"text-sm\">{text}</p>\n\t{#if buttonText}\n\t\t<button\n\t\t\tclass=\"px-4 py-2 text-sm font-medium rounded-lg transition-colors\n        {variant === 'default' &&\n\t\t\t\t'bg-zinc-200 hover:bg-zinc-300 dark:bg-zinc-700 dark:hover:bg-zinc-600 text-zinc-900 dark:text-zinc-100'}\n        {variant === 'warning' &&\n\t\t\t\t'bg-yellow-200 hover:bg-yellow-300 dark:bg-yellow-800 dark:hover:bg-yellow-700 text-yellow-900 dark:text-yellow-100'}\n        {variant === 'success' &&\n\t\t\t\t'bg-green-200 hover:bg-green-300 dark:bg-green-800 dark:hover:bg-green-700 text-green-900 dark:text-green-100'}\n        {variant === 'info' &&\n\t\t\t\t'bg-blue-200 hover:bg-blue-300 dark:bg-blue-800 dark:hover:bg-blue-700 text-blue-900 dark:text-blue-100'}\"\n\t\t\tonclick={onAction}\n\t\t>\n\t\t\t{buttonText}\n\t\t</button>\n\t{/if}\n</div>\n","<!-- File: src/lib/components/UpgradeFooter.svelte -->\n<script lang=\"ts\">\n\tlet {\n\t\tonUpgrade,\n\t\ttext = \"Unlock the rest of the world's insightful information by\",\n\t\tbuttonText = 'Upgrading today!'\n\t} = $props<{\n\t\tonUpgrade: () => void;\n\t\ttext?: string;\n\t\tbuttonText?: string;\n\t}>();\n</script>\n\n<div class=\"text-sm text-zinc-600 dark:text-zinc-400\">\n\t{text}\n\t<button class=\"text-blue-600 dark:text-blue-400 hover:underline\" onclick={onUpgrade}>\n\t\t{buttonText}\n\t</button>\n</div>\n","<!-- File: src/lib/components/ScrollIndicator.svelte -->\n<script lang=\"ts\">\n\timport { onMount, onDestroy } from 'svelte';\n\timport { fade, fly } from 'svelte/transition';\n\timport ChevronDownIcon from './icons/ChevronDownIcon.svelte';\n\timport ChevronUpIcon from './icons/ChevronUpIcon.svelte';\n\timport { cn } from '$lib/utils';\n\n\tinterface Props {\n\t\tchildren?: import('svelte').Snippet;\n\t}\n\n\tlet { children }: Props = $props();\n\n\tlet show = $state(false);\n\tlet isAtBottom = $state(false);\n\tlet container = $state<HTMLElement | null>(null);\n\tlet button = $state<HTMLElement | null>(null);\n\n\tfunction handleScroll() {\n\t\tif (!container) return;\n\n\t\tconst { scrollTop, scrollHeight, clientHeight } = container;\n\t\tconst scrollBottom = scrollHeight - scrollTop - clientHeight;\n\n\t\t// Show button if not at bottom and scrolled down at least 75px\n\t\tshow = scrollTop > 75;\n\n\t\t// Check if we're at the bottom (within 10px threshold)\n\t\tisAtBottom = scrollBottom < 10;\n\t}\n\n\tfunction scrollToPosition() {\n\t\tif (!container) return;\n\n\t\tconst targetPosition = isAtBottom ? 0 : container.scrollHeight;\n\t\tcontainer.scrollTo({\n\t\t\ttop: targetPosition,\n\t\t\tbehavior: 'smooth'\n\t\t});\n\t}\n\n\tonMount(() => {\n\t\tif (container) {\n\t\t\tcontainer.addEventListener('scroll', handleScroll);\n\t\t\t// Initial check\n\t\t\thandleScroll();\n\t\t}\n\t});\n\n\tonDestroy(() => {\n\t\tif (container) {\n\t\t\tcontainer.removeEventListener('scroll', handleScroll);\n\t\t}\n\t});\n</script>\n\n<div bind:this={container} class=\"relative h-full overflow-y-auto overflow-x-hidden\">\n\t<div class=\"w-full\">\n\t\t{@render children?.()}\n\t</div>\n\n\t{#if show}\n\t\t<button\n\t\t\tbind:this={button}\n\t\t\tclass={cn(\n\t\t\t\t'fixed bottom-4 right-4 z-50',\n\t\t\t\t'w-10 h-10 rounded-full',\n\t\t\t\t'bg-blue-500 dark:bg-blue-600',\n\t\t\t\t'shadow-lg hover:shadow-xl',\n\t\t\t\t'flex items-center justify-center',\n\t\t\t\t'transition-all duration-300',\n\t\t\t\t'hover:scale-110 active:scale-95',\n\t\t\t\t'hover:bg-blue-600 dark:hover:bg-blue-700',\n\t\t\t\t'focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2 dark:focus:ring-offset-zinc-900'\n\t\t\t)}\n\t\t\tonclick={scrollToPosition}\n\t\t\taria-label={isAtBottom ? 'Scroll to top' : 'Scroll to bottom'}\n\t\t\ttransition:fly={{ y: 20, duration: 300 }}\n\t\t>\n\t\t\t{#if isAtBottom}\n\t\t\t\t<ChevronUpIcon className=\"w-5 h-5 text-white\" />\n\t\t\t{:else}\n\t\t\t\t<ChevronDownIcon className=\"w-5 h-5 text-white\" />\n\t\t\t{/if}\n\t\t</button>\n\t{/if}\n</div>\n\n<style>\n\t/* Hide scrollbar but keep functionality */\n\tdiv::-webkit-scrollbar {\n\t\twidth: 0px;\n\t\tbackground: transparent;\n\t}\n</style>\n","<!-- File: src/routes/sidepanel/+page.svelte -->\n<script lang=\"ts\">\n\timport TokenComponentList from '$lib/components/TokenComponentList.svelte';\n\timport RotatingBanner from '$lib/components/RotatingBanner.svelte';\n\timport SectionCard from '$lib/components/SectionCard.svelte';\n\timport { browser_ext, browserSvelte } from '$lib/common/environment';\n\timport WalletIcon from '$lib/components/icons/WalletIcon.svelte';\n\timport TokenIcon from '$lib/components/icons/TokenIcon.svelte';\n\timport NewsIcon from '$lib/components/icons/NewsIcon.svelte';\n\timport ToolIcon from '$lib/components/icons/ToolIcon.svelte';\n\timport { onDestroy, onMount } from 'svelte';\n\timport {\n\t\tgetSettings,\n\t\tsetYakklCombinedTokenStorage,\n\t\tupdateCombinedTokenStore,\n\t\tyakklCombinedTokenStore\n\t} from '$lib/common/stores';\n\timport { loadDefaultTokens } from '$lib/managers/tokens/loadDefaultTokens';\n\timport { get } from 'svelte/store';\n\timport ExtensionRSSNewsFeed from '$lib/components/ExtensionRSSNewsFeed.svelte';\n\timport CalcIcon from '$lib/components/icons/CalcIcon.svelte';\n\t// import FiatIcon from '$lib/components/icons/FiatIcon.svelte';\n\timport EthUnitConverter from '$lib/components/EthUnitConverter.svelte';\n\t// import TokenFiatConverter from '$lib/components/TokenFiatConverter.svelte';\n\timport { log } from '$lib/common/logger-wrapper';\n\timport { setBadgeText } from '$lib/utilities/utilities';\n\timport Copyright from '$lib/components/Copyright.svelte';\n\timport BookmarkedArticles from '$lib/components/BookmarkedArticles.svelte';\n\t// import LockedSectionCard from '$lib/components/LockedSectionCard.svelte';\n\timport { isProLevel } from '$lib/common/utils';\n\timport Upgrade from '$lib/components/Upgrade.svelte';\n\timport GenericFooter from '$lib/components/GenericFooter.svelte';\n\timport UpgradeFooter from '$lib/components/UpgradeFooter.svelte';\n\timport Placeholder from '$lib/components/Placeholder.svelte';\n\timport DynamicRSSNewsFeed from '$lib/components/DynamicRSSNewsFeed.svelte';\n\timport PlanBadge from '$lib/components/PlanBadge.svelte';\n\timport Sponsorship, { type Sponsor } from '$lib/components/Sponsorship.svelte';\n\timport SponsorIcon from '$lib/components/icons/SponsorIcon.svelte';\n\timport ScrollIndicator from '$lib/components/ScrollIndicator.svelte';\n\timport SimpleTooltip from '$lib/components/SimpleTooltip.svelte';\n\timport { goto } from '$app/navigation';\n\n\tlet showUpgradeModal = $state(false);\n\tlet showEthConverter = $state(false);\n\tlet showTokenFiatConverter = $state(false);\n\tlet init = $state(false);\n\tlet locked = $state(true);\n\tlet foundingUser = $state(false);\n\tlet tokensLockedCount = $state(0); // Show all tokens for both Basic and Pro\n\tlet newsfeedsLockedCount = $state(6);\n\tlet maxVisibleTokens = $state(0); // Show all tokens initially\n\tlet showBanner = $state(true);\n\tlet showNewsfeeds = $state(false);\n\tlet showDynamicNewsfeeds = $state(false);\n\n\tlet storageListener: {\n\t\t(changes: any, areaName: any): void;\n\t\t(changes: { [key: string]: chrome.storage.StorageChange }, areaName: string): void;\n\t};\n\n\t// List of crypto news RSS feeds\n\tconst cryptoFeeds = [\n\t\t'https://cointelegraph.com/rss/?utm_source=yakkl&utm_medium=extension',\n\t\t'https://www.coindesk.com/arc/outboundfeeds/rss/?utm_source=yakkl&utm_medium=extension',\n\t\t'https://cryptonews.com/news/feed/?utm_source=yakkl&utm_medium=extension'\n\t];\n\n\t// WebSocket URL for dynamic feed\n\tconst wsFeedUrl = 'wss://your-websocket-server.com/feed';\n\n\tfunction openWallet() {\n\t\tif (browserSvelte) {\n\t\t\tbrowser_ext.runtime.sendMessage({ type: 'popout' });\n\t\t}\n\t}\n\n\t// DO NOT REMOVE THESE BANNER ITEMS NOR COMMENTS\n\tconst bannerItems = [\n\t\t{\n\t\t\ttype: 'banner' as const,\n\t\t\ttitle: 'Welcome to YAKKL',\n\t\t\tmessage: 'Your secure crypto wallet'\n\t\t\t// ctaText: 'UPGRADE',\n\t\t\t// onCallToAction: (index: number) => {\n\t\t\t//   console.log('Upgrade clicked for item at index:', index);\n\t\t\t// }\n\t\t}\n\t\t// #region example of an ad\n\t\t// {\n\t\t//   type: 'ad' as const,\n\t\t//   useGoogleAd: false,\n\t\t//   customContent: (index: number) => `\n\t\t//     <div class=\"card w-full glass\">\n\t\t//       <figure class=\"mt-1\"><img src=\"/images/logoBull32x32.png\" alt=\"token\"/></figure>\n\t\t//       <div class=\"card-body\">\n\t\t//         <h2 class=\"card-title\">PROMOTION</h2>\n\t\t//         <p>Upgrade to Pro plan and never see an AD again!</p>\n\t\t//         <div class=\"card-actions justify-end\">\n\t\t//           <button\n\t\t//             class=\"btn btn-primary yakkl-upgrade-btn\"\n\t\t//             data-index=\"${index}\"\n\t\t//           >\n\t\t//             UPGRADE\n\t\t//           </button>\n\t\t//         </div>\n\t\t//       </div>\n\t\t//     </div>\n\t\t//   `,\n\t\t//   onCallToAction: (index: number) => {\n\t\t//     console.log('Ad upgrade clicked for item at index:', index);\n\t\t//     // Handle ad upgrade\n\t\t//   }\n\t\t// }\n\t\t// #endregion\n\t];\n\n\tconst content = `\n    <div class=\"w-full h-full flex flex-col rounded-2xl overflow-hidden bg-white shadow-md hover:shadow-lg transition-shadow duration-300\">\n    <!-- Image Section -->\n    <div class=\"flex-grow aspect-[1/1] relative\">\n      <img\n        src=\"/images/sponsors/logoCryptoGrampsTrimmed.png\"\n        alt=\"CryptoGramps Sponsorship Ad\"\n        class=\"w-full h-full object-contain p-4\"\n      />\n    </div>\n\n    <!-- Content Section -->\n    <div class=\"p-4 text-center flex flex-col justify-center\">\n      <h3 class=\"text-base md:text-lg font-semibold text-gray-800 mb-1\">Sponsored by CryptoGramps</h3>\n      <p class=\"text-sm md:text-base text-gray-600 mb-2\">Bridging AI & Blockchain wisdom.</p>\n      <a\n        href=\"https://CryptoGramps.ai\"\n        class=\"inline-block px-4 py-2 bg-blue-600 text-white text-sm md:text-base rounded-lg hover:bg-blue-700 transition\"\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >\n        CryptoGramps.ai\n      </a>\n    </div>\n    </div>\n  `;\n\n\t// Example of how to handle onCallToAction in a single function\n\t// Define a single handler function\n\t// function handleCallToAction(index: number) {\n\t//   console.log('Upgrade clicked for item at index:', index);\n\t//   // Handle all upgrade actions in one place\n\t//   // You can use the index to determine which item was clicked\n\t//   // and take appropriate action\n\t// }\n\n\t// const bannerItems = [\n\t//   {\n\t//     type: 'banner' as const,\n\t//     title: 'Welcome to YAKKL',\n\t//     message: 'Your secure crypto wallet',\n\t//     ctaText: 'UPGRADE',\n\t//     onCallToAction: handleCallToAction  // Reference the same function\n\t//   },\n\t//   {\n\t//     type: 'ad' as const,\n\t//     useGoogleAd: false,\n\t//     customContent: (index: number) => `...`,\n\t//     onCallToAction: handleCallToAction  // Reference the same function\n\t//   }\n\t// ];\n\n\t// Add event listener for the custom event. This method passes the CSP test.\n\t// if (browserSvelte) {\n\t//   document.addEventListener('click', (event) => {\n\t//     const target = event.target as HTMLElement;\n\t//     if (target.classList.contains('yakkl-upgrade-btn')) {\n\t//       const index = parseInt(target.getAttribute('data-index') || '0', 10);\n\t//       console.log('Upgrade button clicked with index:', index);\n\t//       if (bannerItems[index]?.onCallToAction) {\n\t//         bannerItems[index].onCallToAction(index);\n\t//       }\n\t//     }\n\t//   });\n\t// }\n\n\t// This is for the sponsors section that lives in the sidepanel and not the banner which is above.\n\tconst sponsors = [\n\t\t{\n\t\t\tid: 'cryptogramps',\n\t\t\tname: 'Cryptogramps.ai',\n\t\t\turl: 'https://cryptogramps.ai',\n\t\t\tcontent: content, //'<img src=\"/images/sponsors/logoCryptoGrampsTrimmed.png\" alt=\"cryptogramps.ai\" class=\"w-full h-auto aspect-1/1\" />',\n\t\t\tweight: 1,\n\t\t\tduration: 5000,\n\t\t\tcategory: 'premium'\n\t\t}\n\t\t// Add more sponsors...\n\t];\n\n\tfunction handleSponsorClick(sponsor: Sponsor) {\n\t\tconsole.log('Sponsor clicked:', sponsor.name);\n\t}\n\n\tfunction handleSponsorImpression(sponsor: Sponsor) {\n\t\tconsole.log('Sponsor impression:', sponsor.name);\n\t}\n\n\tonMount(async () => {\n\t\ttry {\n\t\t\tif (!browserSvelte) return;\n\n\t\t\tconst settings = await getSettings();\n\t\t\tif (!settings.init || !settings.legal.termsAgreed) {\n\t\t\t\tinit = false;\n\t\t\t\tdocument.documentElement.classList.remove('dark');\n\t\t\t\tlocalStorage.theme = 'light';\n\t\t\t\tawait setBadgeText('');\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tinit = true;\n\t\t\t\tlocked = (await isProLevel()) ? false : true;\n\t\t\t\ttokensLockedCount = 0; // Show all tokens for both Basic and Pro\n\t\t\t\tnewsfeedsLockedCount = (await isProLevel()) ? 10 : 4;\n\t\t\t}\n\n\t\t\t// Always load default tokens regardless of init state\n\t\t\tawait loadDefaultTokens();\n\t\t\tupdateCombinedTokenStore();\n\t\t\tawait setYakklCombinedTokenStorage(get(yakklCombinedTokenStore));\n\t\t} catch (error) {\n\t\t\tlog.warn('Error initializing sidepanel:', false, error);\n\t\t}\n\t});\n\n\tonDestroy(() => {\n\t\tif (!browserSvelte) return;\n\n\t\t// Clean up listener\n\t\tif (storageListener) {\n\t\t\tbrowser_ext.storage.onChanged.removeListener(storageListener);\n\t\t}\n\t});\n\n\tfunction onComplete() {\n\t\tshowUpgradeModal = true;\n\t}\n\n\tfunction handleUpgradeComplete() {\n\t\tshowUpgradeModal = false;\n\t\t// Refresh any necessary data\n\t}\n\n\tfunction handleUpgradeClose() {\n\t\tshowUpgradeModal = false;\n\t\t// Handle any cleanup\n\t}\n</script>\n\n<Upgrade\n\tbind:show={showUpgradeModal}\n\t{openWallet}\n\tonComplete={handleUpgradeComplete}\n\tonClose={handleUpgradeClose}\n\tonCancel={() => (showUpgradeModal = false)}\n/>\n\n<div class=\"flex flex-col h-screen bg-white dark:bg-zinc-900 text-zinc-800 dark:text-zinc-100\">\n\t<header\n\t\tclass=\"px-4 py-3 border-b border-zinc-200 dark:border-zinc-700 flex justify-between items-center\"\n\t>\n\t\t<h1 class=\"text-lg font-bold\">YAKKL Insights</h1>\n\t\t<!-- Preview2 Integration -->\n    <div class=\"flex items-center gap-2\">\n\t\t\t<SimpleTooltip content=\"Try the new wallet experience\" position=\"bottom\">\n\t\t\t\t<button\n\t\t\t\t\tonclick={() => goto('/preview2')}\n\t\t\t\t\tclass=\"flex items-center gap-2 bg-gradient-to-r from-purple-500 to-indigo-600 text-white px-3 py-2 rounded-lg shadow-md hover:from-purple-600 hover:to-indigo-700 transition-all text-sm group\"\n\t\t\t\t>\n\t\t\t\t\t<svg class=\"w-4 h-4 group-hover:scale-110 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\n\t\t\t\t\t</svg>\n\t\t\t\t\tPreview 2.0\n\t\t\t\t</button>\n\t\t\t</SimpleTooltip>\n\n\t\t\t<SimpleTooltip content=\"Click here to unlock your wallet\" position=\"bottom\">\n\t\t\t\t<button\n\t\t\t\t\tonclick={openWallet}\n\t\t\t\t\tclass=\"flex items-center gap-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white px-4 py-2 rounded-xl shadow-md hover:from-green-600 hover:to-emerald-700 transition-all {!init\n\t\t\t\t\t\t? 'animate-pulse'\n\t\t\t\t\t\t: ''}\"\n\t\t\t\t>\n\t\t\t\t\t<WalletIcon className=\"w-5 h-5\" />\n\t\t\t\t\tOpen Smart Wallet\n\t\t\t\t</button>\n\t\t\t</SimpleTooltip>\n\t\t</div>\n\t\t{#if !init}\n\t\t\t<span class=\"absolute top-1 right-1 block h-2 w-2 rounded-full bg-red-500 animate-ping\"\n\t\t\t></span>\n\t\t{/if}\n\t</header>\n\n\t<RotatingBanner\n\t\tbind:show={showBanner}\n\t\titems={bannerItems}\n\t\tautoRotate={false}\n\t\tshowControls={false}\n\t/>\n\n\t<div class=\"flex justify-end px-4 py-2\">\n\t\t<PlanBadge />\n\t</div>\n\n\t<ScrollIndicator>\n\t\t<main class=\"flex-1 overflow-y-auto px-4 pb-4\">\n\t\t\t<!-- Grid container for cards -->\n\t\t\t<div class=\"grid grid-cols-1 md:grid-cols-3 gap-4 pb-4 pt-0\">\n\t\t\t\t<!-- <SectionCard title=\"Sponsors\" icon={SponsorIcon}>\n          <Sponsorship\n            {sponsors}\n            onSponsorClick={handleSponsorClick}\n            onSponsorImpression={handleSponsorImpression}\n            className=\"min-h-[200px]\"\n          />\n        </SectionCard> -->\n\n\t\t\t\t<!-- Token Prices Card -->\n\t\t\t\t<!-- eye={false} for now but if we want to show the balances, we can set it to true -->\n\t\t\t\t<SectionCard\n\t\t\t\t\ttitle=\"Token Prices\"\n\t\t\t\t\ticon={TokenIcon}\n\t\t\t\t\tisPinned={false}\n\t\t\t\t\teye={false}\n\t\t\t\t\teyeTooltip=\"Toggle visibility of balances\"\n\t\t\t\t\tminHeight=\"300px\"\n\t\t\t\t\tmaxHeight=\"750px\"\n\t\t\t\t\t{locked}\n\t\t\t\t\tlockedFooter={GenericFooter}\n\t\t\t\t\tlockedFooterProps={{\n\t\t\t\t\t\ttext: 'Unlock visibility of all tokens by',\n\t\t\t\t\t\tbuttonText: 'Upgrading today!',\n\t\t\t\t\t\tonAction: () => (showUpgradeModal = true),\n\t\t\t\t\t\tvariant: 'info'\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<TokenComponentList {maxVisibleTokens} maxTokens={tokensLockedCount} {locked} />\n\t\t\t\t</SectionCard>\n\n\t\t\t\t<!-- Newsfeeds Card -->\n\t\t\t\t<SectionCard\n\t\t\t\t\ttitle=\"Newsfeeds\"\n\t\t\t\t\ticon={NewsIcon}\n\t\t\t\t\tminHeight=\"350px\"\n\t\t\t\t\tmaxHeight=\"1000px\"\n\t\t\t\t\tlocked={false}\n\t\t\t\t\tlockedFooter={UpgradeFooter}\n\t\t\t\t\tlockedFooterProps={{\n\t\t\t\t\t\tonUpgrade: () => (showUpgradeModal = true),\n\t\t\t\t\t\ttext: 'Unlock visibility of all newsfeeds with faster refresh times by',\n\t\t\t\t\t\tbuttonText: 'Upgrade Now'\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<!-- Use DynamicRSSNewsFeed for WebSocket feed -->\n\t\t\t\t\t{#if showDynamicNewsfeeds}\n\t\t\t\t\t\t<DynamicRSSNewsFeed\n\t\t\t\t\t\t\tbind:show={showDynamicNewsfeeds}\n\t\t\t\t\t\t\twsUrl={wsFeedUrl}\n\t\t\t\t\t\t\ttitle=\"Live Crypto News\"\n\t\t\t\t\t\t\tmaxVisibleItems={newsfeedsLockedCount}\n\t\t\t\t\t\t\tmaxItemsPerFeed={newsfeedsLockedCount}\n\t\t\t\t\t\t\tclassName=\"bg-white dark:bg-gray-900 rounded-lg shadow-md\"\n\t\t\t\t\t\t\t{locked}\n\t\t\t\t\t\t/>\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<!-- Fallback to regular RSS feed if WebSocket is not available -->\n\t\t\t\t\t\t<ExtensionRSSNewsFeed\n\t\t\t\t\t\t\tfeedUrls={cryptoFeeds}\n\t\t\t\t\t\t\tmaxVisibleItems={newsfeedsLockedCount}\n\t\t\t\t\t\t\tmaxItemsPerFeed={newsfeedsLockedCount}\n\t\t\t\t\t\t\tclassName=\"bg-white dark:bg-gray-900 rounded-lg shadow-md\"\n\t\t\t\t\t\t\tlocked={false}\n\t\t\t\t\t\t/>\n\t\t\t\t\t{/if}\n\t\t\t\t</SectionCard>\n\n\t\t\t\t<!-- Bookmarked Articles Card -->\n\t\t\t\t<!-- Example of how to use the GenericFooter component\n          footer={GenericFooter}\n          footerProps={{\n            text: 'Manage your bookmarked articles',\n            buttonText: 'View All',\n            onAction: () => console.log('View all bookmarks'),\n            variant: 'info'\n          }}\n        -->\n\t\t\t\t<BookmarkedArticles\n\t\t\t\t\t{onComplete}\n\t\t\t\t\tshow={true}\n\t\t\t\t\t{locked}\n\t\t\t\t\tlockedFooter={UpgradeFooter}\n\t\t\t\t\tlockedFooterProps={{\n\t\t\t\t\t\tonUpgrade: () => (showUpgradeModal = true),\n\t\t\t\t\t\ttext: 'Unlock bookmarking features by',\n\t\t\t\t\t\tbuttonText: 'Upgrading today!'\n\t\t\t\t\t}}\n\t\t\t\t/>\n\n\t\t\t\t<!-- Utilities Card -->\n\t\t\t\t<SectionCard title=\"Utilities\" icon={ToolIcon} minHeight=\"250px\" maxHeight=\"800px\">\n\t\t\t\t\t<!-- Grid container -->\n\t\t\t\t\t<div class=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 p-2 mt-2\">\n\t\t\t\t\t\t<!-- Icon button 1 -->\n\t\t\t\t\t\t<SimpleTooltip content=\"ETH Unit Converter\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"p-2 rounded hover:bg-gray-100 dark:hover:bg-zinc-800 transition\"\n\t\t\t\t\t\t\t\taria-label=\"Open Conversion Calculator\"\n\t\t\t\t\t\t\t\tonclick={() => (showEthConverter = true)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<CalcIcon className=\"w-7 h-7\" />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</SimpleTooltip>\n\t\t\t\t\t\t<EthUnitConverter bind:show={showEthConverter} />\n\n\t\t\t\t\t\t<!-- Icon button 2 -->\n\n\t\t\t\t\t\t<!-- <SimpleTooltip content=\"Token Fiat Converter\">\n              <button\n                class=\"p-2 rounded hover:bg-gray-100 dark:hover:bg-zinc-800 transition\"\n                aria-label=\"Open Token Fiat Converter\"\n                onclick={() => showTokenFiatConverter = true}\n              >\n                <FiatIcon className=\"w-7 h-7\" />\n              </button>\n            </SimpleTooltip>\n            <TokenFiatConverter\n              bind:show={showTokenFiatConverter}\n            /> -->\n\t\t\t\t\t</div>\n\t\t\t\t</SectionCard>\n\n\t\t\t\t<!-- Chart Section (for expanded view) -->\n\t\t\t\t<div class=\"hidden md:block mt-4\">\n\t\t\t\t\t<SectionCard\n\t\t\t\t\t\ttitle=\"Market Overview\"\n\t\t\t\t\t\tminHeight=\"300px\"\n\t\t\t\t\t\tmaxHeight=\"600px\"\n\t\t\t\t\t\t{locked}\n\t\t\t\t\t\tlockedFooter={GenericFooter}\n\t\t\t\t\t\tlockedFooterProps={{\n\t\t\t\t\t\t\ttext: 'Unlock visibility of the market overview by',\n\t\t\t\t\t\t\tbuttonText: 'Upgrading today!',\n\t\t\t\t\t\t\tonAction: () => (showUpgradeModal = true),\n\t\t\t\t\t\t\tvariant: 'info'\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<!-- Chart component will go here -->\n\t\t\t\t\t\t<!-- Could use !border-none to remove all borders if desired or use showBorderTop={false}-->\n\t\t\t\t\t\t<Placeholder\n\t\t\t\t\t\t\ttext=\"Chart coming soon...\"\n\t\t\t\t\t\t\tclassName=\"flex items-center justify-center text-zinc-500 !border-t-0\"\n\t\t\t\t\t\t\tanchorTop={true}\n\t\t\t\t\t\t\tcenterHorizontal={true}\n\t\t\t\t\t\t\tcenterVertical={true}\n\t\t\t\t\t\t\tshowBorderTop={false}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<!-- <div class=\"h-[300px] flex items-center justify-center text-zinc-500\">\n              Chart coming soon...\n            </div> -->\n\t\t\t\t\t</SectionCard>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</main>\n\t</ScrollIndicator>\n\n\t<!-- Responsive message for narrow viewports -->\n\t<Placeholder\n\t\ttext=\"👈 💡 Drag the edge of this panel to make it wider and discover more features!\"\n\t\tclassName=\"md:hidden\"\n\t/>\n\n\t<footer\n\t\tclass=\"px-4 py-2 border-t border-zinc-200 dark:border-zinc-700 text-xs text-center font-bold flex flex-col items-center justify-center gap-2\"\n\t>\n\t\t<span class=\"text-zinc-500 mb-4\">Smart Wallet Insights</span>\n\t\t<Copyright />\n\t</footer>\n</div>\n"],"names":["ACCORDION_ROOT_ATTR","ACCORDION_TRIGGER_ATTR","ACCORDION_CONTENT_ATTR","ACCORDION_ITEM_ATTR","ACCORDION_HEADER_ATTR","AccordionBaseState","disabled","orientation","rovingFocusGroup","constructor","props","this","id","ref","useRefById","loop","useRovingFocus","rootNodeId","candidateAttr","current","getDataOrientation","getDataDisabled","AccordionSingleState","isMulti","super","value","includesItem","bind","toggleItem","item","AccordionMultiState","includes","filter","v","AccordionItemState","root","isActive","isDisabled","rootState","updateValue","deps","getDataOpenClosed","AccordionTriggerState","$.derived","itemState","onkeydown","onclick","e","button","preventDefault","key","kbd.SPACE","kbd.ENTER","handleKeydown","getAriaExpanded","getAriaDisabled","tabindex","AccordionContentState","originalStyles","isMountAnimationPrevented","width","height","forceMount","present","watch","_","node","afterTick","transitionDuration","style","animationName","rect","getBoundingClientRect","snippetProps","open","AccordionHeaderState","level","role","setAccordionRootContext","getAccordionRootContext","createContext","setAccordionItemContext","getAccordionItemContext","useAccordionRoot","type","rest","useAccordionItem","useAccordionTrigger","useAccordionContent","useAccordionHeader","children","child","useId","onValueChange","noop","controlledValue","$$slots","restProps","box","with","mergedProps","mergeProps","$$payload","headerState","triggerState","contentState","hidden","ListenerManager","listeners","Set","context","add","event","handler","wrappedHandler","async","args","message","targetContext","hasListener","removeListener","addListener","remove","delete","removeAll","forEach","clear","uiListenerManager","globalListenerManager","registerContext","token","locked","className","$$props","getTokenChange","change","balance","price","log","info","quantity","getTooltipPrice","formatted","toFixed","decimals","replace","url","$.attr_class","$.stringify","logoURI","out","$.attr","symbol","$.escape","name","formatPrice","class","cn","defaultAttributes","xmlns","viewBox","fill","stroke","color","size","strokeWidth","absoluteStrokeWidth","iconNode","$.fallback","mergeClasses","classes","index","array","Boolean","indexOf","join","$$restProps","Number","$$sanitized_props","tag","attrs","each_array","$$index","d","Root","AccordionPrimitive.Root","maxVisibleTokens","maxTokens","visibleTokens","remainingTokens","log$1","length","each_array_1","$$index_1","title","ctaText","onCallToAction","useGoogleAd","customContent","show","items","interval","autoRotate","showControls","currentIndex","timerManager","UnifiedTimerManager","getInstance","timerId","onDestroy","stopInterval","removeInterval","$.html","html","i","icon","Icon","isPinned","eye","eyeTooltip","minHeight","maxHeight","footer","Footer","footerProps","lockedFooter","LockedFooter","lockedFooterProps","cardHeight","$.attr_style","$.clsx","newsItem","isValidNewsItem","description","imageUrl","source","date","article","bookmarkEnabled","printEnabled","deleteEnabled","onDelete","console","isBookmarked","derived","yakklBookmarkedArticlesStore","$store","some","a","content","$.store_get","$$store_subs","FIVE_MINUTES","feedUrls","maxVisibleItems","maxItemsPerFeed","initialValue","initialUnit","onComplete","compact","showUsdValue","onClose","wei","gwei","ether","ethUnitUsd","PriceManager","provider","CoinbasePriceProvider","weight","CoingeckoPriceProvider","KrakenPriceProvider","searchQuery","sortOrder","sortDirection","onSearch","onSortOrderChange","onSortDirectionChange","createDebounce","lockMessage","showButton","showUpgradeModal","writable","filteredArticles","articles","query","order","direction","filtered","searchLower","toLowerCase","sort","b","dateA","Date","publishedAt","getTime","dateB","localeCompare","handleSearch","set","handleSortOrderChange","handleSortDirectionChange","update","handleArticleDelete","currentArticles","updatedArticles","setYakklBookmarkedArticles","$$value","BookmarkIcon","text","buttonText","onAction","variant","variantClasses","default","warning","success","onUpgrade","showEthConverter","tokensLockedCount","newsfeedsLockedCount","showBanner","cryptoFeeds","openWallet","browserSvelte","browser_ext","runtime","sendMessage","bannerItems","handleUpgradeComplete","handleUpgradeClose","onCancel","TokenIcon","GenericFooter","NewsIcon","UpgradeFooter","ToolIcon"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,11,12,13]}