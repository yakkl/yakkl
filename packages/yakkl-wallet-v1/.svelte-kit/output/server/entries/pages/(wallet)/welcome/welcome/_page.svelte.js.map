{"version":3,"file":"_page.svelte.js","sources":["../../../../../../../../../../node_modules/.pnpm/runed@0.15.4_svelte@5.34.3/node_modules/runed/dist/utilities/Readable/readable.svelte.js","../../../../../../../../../../node_modules/.pnpm/runed@0.15.4_svelte@5.34.3/node_modules/runed/dist/utilities/activeElement/activeElement.svelte.js","../../../../../../../../../../node_modules/.pnpm/runed@0.15.4_svelte@5.34.3/node_modules/runed/dist/internal/utils/is.js","../../../../../../../../../../node_modules/.pnpm/runed@0.15.4_svelte@5.34.3/node_modules/runed/dist/utilities/extract/extract.svelte.js","../../../../../../../../../../node_modules/.pnpm/runed@0.15.4_svelte@5.34.3/node_modules/runed/dist/utilities/IsFocusWithin/IsFocusWithin.svelte.js","../../../../../../../../../../node_modules/.pnpm/bits-ui@1.0.0-next.74_svelte@5.34.3/node_modules/bits-ui/dist/bits/utilities/portal/portal.svelte","../../../../../../../../../../node_modules/.pnpm/bits-ui@1.0.0-next.74_svelte@5.34.3/node_modules/bits-ui/dist/internal/arrays.js","../../../../../../../../../../node_modules/.pnpm/bits-ui@1.0.0-next.74_svelte@5.34.3/node_modules/bits-ui/dist/internal/box-auto-reset.svelte.js","../../../../../../../../../../node_modules/.pnpm/bits-ui@1.0.0-next.74_svelte@5.34.3/node_modules/bits-ui/dist/internal/use-dom-typeahead.svelte.js","../../../../../../../../../../node_modules/.pnpm/bits-ui@1.0.0-next.74_svelte@5.34.3/node_modules/bits-ui/dist/bits/utilities/mounted.svelte","../../../../../../../../../../node_modules/.pnpm/bits-ui@1.0.0-next.74_svelte@5.34.3/node_modules/bits-ui/dist/bits/menu/utils.js","../../../../../../../../../../node_modules/.pnpm/bits-ui@1.0.0-next.74_svelte@5.34.3/node_modules/bits-ui/dist/internal/polygon.js","../../../../../../../../../../node_modules/.pnpm/bits-ui@1.0.0-next.74_svelte@5.34.3/node_modules/bits-ui/dist/bits/menu/menu.svelte.js","../../../../../../../../../../node_modules/.pnpm/bits-ui@1.0.0-next.74_svelte@5.34.3/node_modules/bits-ui/dist/bits/menu/components/menu-item.svelte","../../../../../../../../../../node_modules/.pnpm/bits-ui@1.0.0-next.74_svelte@5.34.3/node_modules/bits-ui/dist/bits/menu/components/menu-group.svelte","../../../../../../../../../../node_modules/.pnpm/bits-ui@1.0.0-next.74_svelte@5.34.3/node_modules/bits-ui/dist/bits/menu/components/menu-group-heading.svelte","../../../../../../../../../../node_modules/.pnpm/bits-ui@1.0.0-next.74_svelte@5.34.3/node_modules/bits-ui/dist/bits/menu/components/menu-separator.svelte","../../../../../../../../../../node_modules/.pnpm/bits-ui@1.0.0-next.74_svelte@5.34.3/node_modules/bits-ui/dist/bits/menu/components/menu.svelte","../../../../../../../../../../node_modules/.pnpm/bits-ui@1.0.0-next.74_svelte@5.34.3/node_modules/bits-ui/dist/bits/dropdown-menu/components/dropdown-menu-content.svelte","../../../../../../../../../../node_modules/.pnpm/bits-ui@1.0.0-next.74_svelte@5.34.3/node_modules/bits-ui/dist/bits/menu/components/menu-trigger.svelte","../../../../../../../../../../node_modules/.pnpm/bits-ui@1.0.0-next.74_svelte@5.34.3/node_modules/bits-ui/dist/bits/link-preview/link-preview.svelte.js","../../../../../../../../../../node_modules/.pnpm/bits-ui@1.0.0-next.74_svelte@5.34.3/node_modules/bits-ui/dist/bits/link-preview/components/link-preview.svelte","../../../../../../../../../../node_modules/.pnpm/bits-ui@1.0.0-next.74_svelte@5.34.3/node_modules/bits-ui/dist/bits/link-preview/components/link-preview-content.svelte","../../../../../../../../../../node_modules/.pnpm/bits-ui@1.0.0-next.74_svelte@5.34.3/node_modules/bits-ui/dist/bits/link-preview/components/link-preview-trigger.svelte","../../../../../../../../src/lib/components/Import.svelte","../../../../../../../../src/lib/components/ui/dropdown-menu/dropdown-menu-content.svelte","../../../../../../../../src/lib/components/ui/dropdown-menu/dropdown-menu-group-heading.svelte","../../../../../../../../src/lib/components/ui/dropdown-menu/dropdown-menu-item.svelte","../../../../../../../../src/lib/components/ui/dropdown-menu/dropdown-menu-separator.svelte","../../../../../../../../src/lib/components/ui/dropdown-menu/index.ts","../../../../../../../../../../node_modules/.pnpm/phosphor-svelte@3.0.1_svelte@5.34.3_vite@6.3.5_@types+node@20.19.1_jiti@1.21.7_terser@5.43.0_yaml@2.7.0_/node_modules/phosphor-svelte/lib/context.js","../../../../../../../../../../node_modules/.pnpm/phosphor-svelte@3.0.1_svelte@5.34.3_vite@6.3.5_@types+node@20.19.1_jiti@1.21.7_terser@5.43.0_yaml@2.7.0_/node_modules/phosphor-svelte/lib/DotsThreeCircle.svelte","../../../../../../../../src/lib/components/ViewToggleMenu.svelte","../../../../../../../../src/lib/components/ViewControls.svelte","../../../../../../../../src/lib/components/ui/hover-card/hover-card-content.svelte","../../../../../../../../src/lib/components/ui/hover-card/index.ts","../../../../../../../../src/lib/components/TokenGridItem.svelte","../../../../../../../../src/lib/components/TokenGridView.svelte","../../../../../../../../src/lib/components/TokenChartsTradingView.svelte","../../../../../../../../src/lib/components/TokenNewsTradingView.svelte","../../../../../../../../src/lib/components/TokenTechnicalView.svelte","../../../../../../../../src/lib/components/TokenSymbolView.svelte","../../../../../../../../src/lib/components/TokenSymbolOverviewView.svelte","../../../../../../../../src/lib/components/TokenViews.svelte","../../../../../../../../src/routes/(wallet)/welcome/welcome/+page.svelte"],"sourcesContent":["import { tick } from \"svelte\";\n/**\n * A class that contains a reactive `current` property\n *\n * Accepts an initial value, and an optional `start` function, which has a `set` function as its first argument,\n * which is used to update the value of the `current` property.\n *\n * @example\n * ```html\n * <script>\n * const now = new Readable(new Date(), (set) => {\n * \tconst interval = setInterval(() => set(new Date()), 1000);\n * \treturn () => clearInterval(interval);\n * });\n * </script>\n *\n * <p>{now.current.toLocaleTimeString()}</p>\n * ```\n *\n * @see {@link https://runed.dev/docs/utilities/readable}\n *\n */\nexport class Readable {\n    #current = $state();\n    #start;\n    constructor(initialValue, start) {\n        this.#current = initialValue;\n        this.#start = start;\n    }\n    #subscribers = 0;\n    #stop = null;\n    get current() {\n        if ($effect.tracking()) {\n            $effect(() => {\n                this.#subscribers++;\n                if (this.#subscribers === 1) {\n                    this.#subscribe(true);\n                }\n                return () => {\n                    tick().then(() => {\n                        this.#subscribers--;\n                        if (this.#subscribers === 0) {\n                            this.#unsubscribe();\n                        }\n                    });\n                };\n            });\n        }\n        else if (this.#subscribers === 0) {\n            this.#subscribe(false);\n            this.#unsubscribe();\n        }\n        return this.#current;\n    }\n    #subscribe(inEffect) {\n        this.#stop =\n            this.#start((value) => {\n                this.#current = value;\n            }, inEffect) ?? null;\n    }\n    #unsubscribe() {\n        if (this.#stop === null)\n            return;\n        this.#stop();\n        this.#stop = null;\n    }\n}\n","import { Readable } from \"../Readable/readable.svelte.js\";\nimport { browser } from \"../../internal/utils/browser.js\";\n/**\n * An object holding a reactive value that is equal to `document.activeElement`.\n * It automatically listens for changes, keeping the reference up to date.\n *\n * @see {@link https://runed.dev/docs/utilities/active-element}\n */\nexport const activeElement = new Readable(null, (set, insideEffect) => {\n    function update() {\n        if (!browser)\n            return;\n        set(document.activeElement);\n    }\n    update();\n    if (!insideEffect)\n        return;\n    document.addEventListener(\"focusin\", update);\n    document.addEventListener(\"focusout\", update);\n    return () => {\n        document.removeEventListener(\"focusin\", update);\n        document.removeEventListener(\"focusout\", update);\n    };\n});\n","export function isFunction(value) {\n    return typeof value === \"function\";\n}\nexport function isObject(value) {\n    return value !== null && typeof value === \"object\";\n}\n","import { isFunction } from \"../../internal/utils/is.js\";\n/**\n * Extracts the value from a getter or a value.\n * Optionally, a default value can be provided.\n */\nexport function extract(value, defaultValue) {\n    if (isFunction(value)) {\n        const getter = value;\n        return getter() ?? defaultValue ?? getter();\n    }\n    return value ?? defaultValue ?? value;\n}\n","import { extract } from \"../extract/extract.svelte.js\";\nimport { activeElement } from \"../activeElement/activeElement.svelte.js\";\n/**\n * Tracks whether the focus is within a target element.\n * @see {@link https://runed.dev/docs/utilities/is-focus-within}\n */\nexport class IsFocusWithin {\n    #node;\n    #target = $derived.by(() => extract(this.#node));\n    constructor(node) {\n        this.#node = node;\n    }\n    current = $derived.by(() => {\n        if (!this.#target || !activeElement.current)\n            return false;\n        return this.#target.contains(activeElement.current);\n    });\n}\n","<script lang=\"ts\">\n\timport { getAllContexts, mount, unmount, untrack } from \"svelte\";\n\timport { DEV } from \"esm-env\";\n\timport PortalConsumer from \"./portal-consumer.svelte\";\n\timport type { PortalProps } from \"./types.js\";\n\timport { isBrowser } from \"../../../internal/is.js\";\n\n\tlet { to = \"body\", children, disabled }: PortalProps = $props();\n\n\tconst context = getAllContexts();\n\n\tlet target = $derived(getTarget());\n\n\tfunction getTarget() {\n\t\tif (!isBrowser || disabled) return null;\n\t\tlet localTarget: HTMLElement | null | DocumentFragment | Element = null;\n\t\tif (typeof to === \"string\") {\n\t\t\tlocalTarget = document.querySelector(to);\n\t\t\tif (localTarget === null) {\n\t\t\t\tif (DEV) {\n\t\t\t\t\tthrow new Error(`Target element \"${to}\" not found.`);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (to instanceof HTMLElement || to instanceof DocumentFragment) {\n\t\t\tlocalTarget = to;\n\t\t} else {\n\t\t\tif (DEV) {\n\t\t\t\tthrow new TypeError(\n\t\t\t\t\t`Unknown portal target type: ${\n\t\t\t\t\t\tto === null ? \"null\" : typeof to\n\t\t\t\t\t}. Allowed types: string (query selector), HTMLElement, or DocumentFragment.`\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\treturn localTarget;\n\t}\n\n\tlet instance: any;\n\n\t$effect(() => {\n\t\tif (!target || disabled) {\n\t\t\tif (instance) {\n\t\t\t\tunmount(instance);\n\t\t\t\tinstance = null;\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tuntrack(\n\t\t\t() =>\n\t\t\t\t(instance = mount(PortalConsumer, {\n\t\t\t\t\ttarget: target as any,\n\t\t\t\t\tprops: { children },\n\t\t\t\t\tcontext,\n\t\t\t\t}))\n\t\t);\n\n\t\treturn () => {\n\t\t\tif (instance) {\n\t\t\t\tunmount(instance);\n\t\t\t\tinstance = null;\n\t\t\t}\n\t\t};\n\t});\n</script>\n\n{#if disabled}\n\t{@render children?.()}\n{/if}\n","/**\n * Checks if two arrays are equal by comparing their values.\n */\nexport function arraysAreEqual(arr1, arr2) {\n    if (arr1.length !== arr2.length) {\n        return false;\n    }\n    return arr1.every((value, index) => isEqual(value, arr2[index]));\n}\n/**\n * A utility function that compares two values for equality.\n */\nfunction isEqual(a, b) {\n    if (Number.isNaN(a) && Number.isNaN(b)) {\n        return true;\n    }\n    if (Array.isArray(a) && Array.isArray(b)) {\n        return arraysAreEqual(a, b);\n    }\n    if (typeof a === \"object\" && typeof b === \"object\") {\n        return isDeepEqual(a, b);\n    }\n    return Object.is(a, b);\n}\n/**\n * A utility function that compares two values for deep equality.\n */\nfunction isDeepEqual(a, b) {\n    if (typeof a !== \"object\" || typeof b !== \"object\" || a === null || b === null) {\n        return false;\n    }\n    const aKeys = Object.keys(a);\n    const bKeys = Object.keys(b);\n    if (aKeys.length !== bKeys.length) {\n        return false;\n    }\n    for (const key of aKeys) {\n        if (!bKeys.includes(key)) {\n            return false;\n        }\n        if (!isEqual(a[key], b[key])) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Splits an array into chunks of a given size.\n * @param arr The array to split.\n * @param size The size of each chunk.\n * @returns An array of arrays, where each sub-array has `size` elements from the original array.\n * @example ```ts\n * const arr = [1, 2, 3, 4, 5, 6, 7, 8];\n * const chunks = chunk(arr, 3);\n * // chunks = [[1, 2, 3], [4, 5, 6], [7, 8]]\n * ```\n */\nexport function chunk(arr, size) {\n    if (size <= 0) {\n        return [];\n    }\n    const result = [];\n    for (let i = 0; i < arr.length; i += size) {\n        result.push(arr.slice(i, i + size));\n    }\n    return result;\n}\n/**\n * Checks if the given index is valid for the given array.\n *\n * @param index - The index to check\n * @param arr - The array to check\n */\nexport function isValidIndex(index, arr) {\n    return index >= 0 && index < arr.length;\n}\n/**\n * Returns the array element after the given index, or undefined for out-of-bounds or empty arrays.\n * @param array the array.\n * @param index the index of the current element.\n * @param loop loop to the beginning of the array if the next index is out of bounds?\n */\n/**\n * Returns the array element after the given index, or undefined for out-of-bounds or empty arrays.\n * For single-element arrays, returns the element if the index is 0.\n * @param array the array.\n * @param index the index of the current element.\n * @param loop loop to the beginning of the array if the next index is out of bounds?\n */\nexport function next(array, index, loop = true) {\n    if (array.length === 0 || index < 0 || index >= array.length) {\n        return undefined;\n    }\n    if (array.length === 1 && index === 0) {\n        return array[0];\n    }\n    if (index === array.length - 1) {\n        return loop ? array[0] : undefined;\n    }\n    return array[index + 1];\n}\n/**\n * Returns the array element prior to the given index, or undefined for out-of-bounds or empty arrays.\n * For single-element arrays, returns the element if the index is 0.\n * @param array the array.\n * @param index the index of the current element.\n * @param loop loop to the end of the array if the previous index is out of bounds?\n */\nexport function prev(array, index, loop = true) {\n    if (array.length === 0 || index < 0 || index >= array.length) {\n        return undefined;\n    }\n    if (array.length === 1 && index === 0) {\n        return array[0];\n    }\n    if (index === 0) {\n        return loop ? array[array.length - 1] : undefined;\n    }\n    return array[index - 1];\n}\n/**\n * Returns the element some number after the given index. If the target index is out of bounds:\n *   - If looping is disabled, the first or last element will be returned.\n *   - If looping is enabled, it will wrap around the array.\n * Returns undefined for empty arrays or out-of-bounds initial indices.\n * @param array the array.\n * @param index the index of the current element.\n * @param increment the number of elements to move forward (can be negative).\n * @param loop loop around the array if the target index is out of bounds?\n */\nexport function forward(array, index, increment, loop = true) {\n    if (array.length === 0 || index < 0 || index >= array.length) {\n        return undefined;\n    }\n    let targetIndex = index + increment;\n    if (loop) {\n        // Ensure positive modulus\n        targetIndex = ((targetIndex % array.length) + array.length) % array.length;\n    }\n    else {\n        // Clamp to array bounds when not looping\n        targetIndex = Math.max(0, Math.min(targetIndex, array.length - 1));\n    }\n    return array[targetIndex];\n}\n/**\n * Returns the element some number before the given index. If the target index is out of bounds:\n *   - If looping is disabled, the first or last element will be returned.\n *   - If looping is enabled, it will wrap around the array.\n * Returns undefined for empty arrays or out-of-bounds initial indices.\n * @param array the array.\n * @param index the index of the current element.\n * @param decrement the number of elements to move backward (can be negative).\n * @param loop loop around the array if the target index is out of bounds?\n */\nexport function backward(array, index, decrement, loop = true) {\n    if (array.length === 0 || index < 0 || index >= array.length) {\n        return undefined;\n    }\n    let targetIndex = index - decrement;\n    if (loop) {\n        // Ensure positive modulus\n        targetIndex = ((targetIndex % array.length) + array.length) % array.length;\n    }\n    else {\n        // Clamp to array bounds when not looping\n        targetIndex = Math.max(0, Math.min(targetIndex, array.length - 1));\n    }\n    return array[targetIndex];\n}\n/**\n * This is the \"meat\" of the typeahead matching logic. It takes in all the values,\n * the search and the current match, and returns the next match (or `undefined`).\n *\n * We normalize the search because if a user has repeatedly pressed a character,\n * we want the exact same behavior as if we only had that one character\n * (ie. cycle through options starting with that character)\n *\n * We also reorder the values by wrapping the array around the current match.\n * This is so we always look forward from the current match, and picking the first\n * match will always be the correct one.\n *\n * Finally, if the normalized search is exactly one character, we exclude the\n * current match from the values because otherwise it would be the first to match always\n * and focus would never move. This is as opposed to the regular case, where we\n * don't want focus to move if the current match still matches.\n */\nexport function getNextMatch(values, search, currentMatch) {\n    const isRepeated = search.length > 1 && Array.from(search).every((char) => char === search[0]);\n    const normalizedSearch = isRepeated ? search[0] : search;\n    const currentMatchIndex = currentMatch ? values.indexOf(currentMatch) : -1;\n    let wrappedValues = wrapArray(values, Math.max(currentMatchIndex, 0));\n    const excludeCurrentMatch = normalizedSearch.length === 1;\n    if (excludeCurrentMatch)\n        wrappedValues = wrappedValues.filter((v) => v !== currentMatch);\n    const nextMatch = wrappedValues.find((value) => value?.toLowerCase().startsWith(normalizedSearch.toLowerCase()));\n    return nextMatch !== currentMatch ? nextMatch : undefined;\n}\n/**\n * Wraps an array around itself at a given start index\n * Example: `wrapArray(['a', 'b', 'c', 'd'], 2) === ['c', 'd', 'a', 'b']`\n */\nexport function wrapArray(array, startIndex) {\n    return array.map((_, index) => array[(startIndex + index) % array.length]);\n}\n","import { box } from \"svelte-toolbelt\";\n/**\n * Creates a box which will be reset to the default value after some time.\n *\n * @param defaultValue The value which will be set.\n * @param afterMs      A zero-or-greater delay in milliseconds.\n */\nexport function boxAutoReset(defaultValue, afterMs = 10000) {\n    let timeout = null;\n    let value = $state(defaultValue);\n    function resetAfter() {\n        return setTimeout(() => {\n            value = defaultValue;\n        }, afterMs);\n    }\n    $effect(() => {\n        return () => {\n            if (timeout)\n                clearTimeout(timeout);\n        };\n    });\n    return box.with(() => value, (v) => {\n        value = v;\n        if (timeout)\n            clearTimeout(timeout);\n        timeout = resetAfter();\n    });\n}\n","import { getNextMatch } from \"./arrays.js\";\nimport { boxAutoReset } from \"./box-auto-reset.svelte.js\";\nexport function useDOMTypeahead(opts) {\n    // Reset `search` 1 second after it was last updated\n    const search = boxAutoReset(\"\", 1000);\n    const onMatch = opts?.onMatch ?? ((node) => node.focus());\n    const getCurrentItem = opts?.getCurrentItem ?? (() => document.activeElement);\n    function handleTypeaheadSearch(key, candidates) {\n        if (!candidates.length)\n            return;\n        search.current = search.current + key;\n        const currentItem = getCurrentItem();\n        const currentMatch = candidates.find((item) => item === currentItem)?.textContent?.trim() ?? \"\";\n        const values = candidates.map((item) => item.textContent?.trim() ?? \"\");\n        const nextMatch = getNextMatch(values, search.current, currentMatch);\n        const newItem = candidates.find((item) => item.textContent?.trim() === nextMatch);\n        if (newItem) {\n            onMatch(newItem);\n        }\n        return newItem;\n    }\n    function resetTypeahead() {\n        search.current = \"\";\n    }\n    return {\n        search,\n        handleTypeaheadSearch,\n        resetTypeahead,\n    };\n}\n","<script lang=\"ts\">\n\timport { untrack } from \"svelte\";\n\timport { noop } from \"../../internal/noop.js\";\n\n\tlet {\n\t\tisMounted = $bindable(false),\n\t\tonMountedChange = noop,\n\t}: { isMounted?: boolean; onMountedChange?: (mounted: boolean) => void } = $props();\n\n\t$effect(() => {\n\t\tuntrack(() => {\n\t\t\tisMounted = true;\n\t\t\tonMountedChange(true);\n\t\t});\n\t\treturn () => {\n\t\t\tisMounted = false;\n\t\t\tonMountedChange(false);\n\t\t};\n\t});\n</script>\n","import { kbd } from \"../../internal/kbd.js\";\nexport const ITEM_NAME = \"MenuItem\";\nexport const SELECTION_KEYS = [kbd.ENTER, kbd.SPACE];\nexport const FIRST_KEYS = [kbd.ARROW_DOWN, kbd.PAGE_UP, kbd.HOME];\nexport const LAST_KEYS = [kbd.ARROW_UP, kbd.PAGE_DOWN, kbd.END];\nexport const FIRST_LAST_KEYS = [...FIRST_KEYS, ...LAST_KEYS];\nexport const SUB_OPEN_KEYS = {\n    ltr: [...SELECTION_KEYS, kbd.ARROW_RIGHT],\n    rtl: [...SELECTION_KEYS, kbd.ARROW_LEFT],\n};\nexport const SUB_CLOSE_KEYS = {\n    ltr: [kbd.ARROW_LEFT],\n    rtl: [kbd.ARROW_RIGHT],\n};\nexport function isIndeterminate(checked) {\n    return checked === \"indeterminate\";\n}\nexport function getCheckedState(checked) {\n    return isIndeterminate(checked) ? \"indeterminate\" : checked ? \"checked\" : \"unchecked\";\n}\nexport function isMouseEvent(event) {\n    return event.pointerType === \"mouse\";\n}\n","/*\n * Convex hull algorithm - Library (TypeScript)\n *\n * Copyright (c) 2021 Project Nayuki\n * https://www.nayuki.io/page/convex-hull-algorithm\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Lesser General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program (see COPYING.txt and COPYING.LESSER.txt).\n * If not, see <http://www.gnu.org/licenses/>.\n */\n// Returns a new array of points representing the convex hull of\n// the given set of points. The convex hull excludes collinear points.\n// This algorithm runs in O(n log n) time.\nfunction makeHull(points) {\n    const newPoints = points.slice();\n    newPoints.sort(POINT_COMPARATOR);\n    return makeHullPresorted(newPoints);\n}\n// Returns the convex hull, assuming that each points[i] <= points[i + 1]. Runs in O(n) time.\nexport function makeHullPresorted(points) {\n    if (points.length <= 1)\n        return points.slice();\n    // Andrew's monotone chain algorithm. Positive y coordinates correspond to \"up\"\n    // as per the mathematical convention, instead of \"down\" as per the computer\n    // graphics convention. This doesn't affect the correctness of the result.\n    const upperHull = [];\n    for (let i = 0; i < points.length; i++) {\n        const p = points[i];\n        while (upperHull.length >= 2) {\n            const q = upperHull[upperHull.length - 1];\n            const r = upperHull[upperHull.length - 2];\n            if ((q.x - r.x) * (p.y - r.y) >= (q.y - r.y) * (p.x - r.x))\n                upperHull.pop();\n            else\n                break;\n        }\n        upperHull.push(p);\n    }\n    upperHull.pop();\n    const lowerHull = [];\n    for (let i = points.length - 1; i >= 0; i--) {\n        const p = points[i];\n        while (lowerHull.length >= 2) {\n            const q = lowerHull[lowerHull.length - 1];\n            const r = lowerHull[lowerHull.length - 2];\n            if ((q.x - r.x) * (p.y - r.y) >= (q.y - r.y) * (p.x - r.x))\n                lowerHull.pop();\n            else\n                break;\n        }\n        lowerHull.push(p);\n    }\n    lowerHull.pop();\n    if (upperHull.length === 1 &&\n        lowerHull.length === 1 &&\n        upperHull[0].x === lowerHull[0].x &&\n        upperHull[0].y === lowerHull[0].y)\n        return upperHull;\n    else\n        return upperHull.concat(lowerHull);\n}\nexport function POINT_COMPARATOR(a, b) {\n    if (a.x < b.x)\n        return -1;\n    else if (a.x > b.x)\n        return +1;\n    else if (a.y < b.y)\n        return -1;\n    else if (a.y > b.y)\n        return +1;\n    else\n        return 0;\n}\nfunction getPointsFromEl(el) {\n    const rect = el.getBoundingClientRect();\n    return [\n        { x: rect.left, y: rect.top },\n        { x: rect.right, y: rect.top },\n        { x: rect.right, y: rect.bottom },\n        { x: rect.left, y: rect.bottom },\n    ];\n}\nexport function makeHullFromElements(els) {\n    const points = els.flatMap((el) => getPointsFromEl(el));\n    return makeHull(points);\n}\nexport function pointInPolygon(point, polygon) {\n    let inside = false;\n    for (let i = 0, j = polygon.length - 1; i < polygon.length; j = i++) {\n        const xi = polygon[i].x;\n        const yi = polygon[i].y;\n        const xj = polygon[j].x;\n        const yj = polygon[j].y;\n        const intersect = yi > point.y !== yj > point.y &&\n            point.x < ((xj - xi) * (point.y - yi)) / (yj - yi) + xi;\n        if (intersect)\n            inside = !inside;\n    }\n    return inside;\n}\nexport function isPointerInGraceArea(e, area) {\n    if (!area)\n        return false;\n    return pointInPolygon({ x: e.clientX, y: e.clientY }, area);\n}\n","import { afterTick, box, executeCallbacks, mergeProps, onDestroyEffect, useRefById, } from \"svelte-toolbelt\";\nimport { tick, untrack } from \"svelte\";\nimport { IsFocusWithin } from \"runed\";\nimport { FIRST_LAST_KEYS, LAST_KEYS, SELECTION_KEYS, SUB_OPEN_KEYS, getCheckedState, isMouseEvent, } from \"./utils.js\";\nimport { focusFirst } from \"../../internal/focus.js\";\nimport { addEventListener, createCustomEvent } from \"../../internal/events.js\";\nimport { useDOMTypeahead } from \"../../internal/use-dom-typeahead.svelte.js\";\nimport { isElement, isElementOrSVGElement, isHTMLElement } from \"../../internal/is.js\";\nimport { useRovingFocus } from \"../../internal/use-roving-focus.svelte.js\";\nimport { kbd } from \"../../internal/kbd.js\";\nimport { getAriaChecked, getAriaDisabled, getAriaExpanded, getAriaOrientation, getDataDisabled, getDataOpenClosed, } from \"../../internal/attrs.js\";\nimport { createContext } from \"../../internal/create-context.js\";\nimport { isPointerInGraceArea, makeHullFromElements } from \"../../internal/polygon.js\";\nexport const CONTEXT_MENU_TRIGGER_ATTR = \"data-context-menu-trigger\";\nconst [setMenuRootContext, getMenuRootContext] = createContext(\"Menu.Root\");\nconst [setMenuMenuContext, getMenuMenuContext] = createContext([\"Menu.Root\", \"Menu.Sub\"], \"MenuContext\");\nconst [setMenuContentContext, getMenuContentContext] = createContext(\"Menu.Content\");\nconst [setMenuGroupContext, getMenuGroupContext] = createContext(\"Menu.Group\");\nconst [setMenuRadioGroupContext, getMenuRadioGroupContext] = createContext(\"Menu.RadioGroup\");\nexport const [dispatchMenuOpen, listenMenuOpen] = createCustomEvent(\"bitsmenuopen\", {\n    bubbles: false,\n    cancelable: true,\n});\nclass MenuRootState {\n    onClose;\n    variant;\n    isUsingKeyboard = $state(false);\n    dir;\n    constructor(props) {\n        this.onClose = props.onClose;\n        this.dir = props.dir;\n        this.variant = props.variant;\n        $effect(() => {\n            const callbacksToDispose = [];\n            const handlePointer = (_) => {\n                this.isUsingKeyboard = false;\n            };\n            const handleKeydown = (_) => {\n                this.isUsingKeyboard = true;\n                const disposePointerDown = addEventListener(document, \"pointerdown\", handlePointer, { capture: true, once: true });\n                const disposePointerMove = addEventListener(document, \"pointermove\", handlePointer, { capture: true, once: true });\n                callbacksToDispose.push(disposePointerDown, disposePointerMove);\n            };\n            const disposeKeydown = addEventListener(document, \"keydown\", handleKeydown, {\n                capture: true,\n            });\n            callbacksToDispose.push(disposeKeydown);\n            return () => {\n                executeCallbacks(callbacksToDispose);\n            };\n        });\n    }\n    getAttr(name) {\n        return `data-${this.variant.current}-${name}`;\n    }\n}\nclass MenuMenuState {\n    root;\n    open;\n    contentId = box.with(() => \"\");\n    contentNode = $state(null);\n    triggerNode = $state(null);\n    parentMenu;\n    constructor(props, root, parentMenu) {\n        this.root = root;\n        this.open = props.open;\n        this.parentMenu = parentMenu;\n        if (parentMenu) {\n            $effect(() => {\n                parentMenu.open;\n                untrack(() => {\n                    if (!this.parentMenu?.open)\n                        this.open.current = false;\n                });\n            });\n        }\n    }\n    toggleOpen() {\n        this.open.current = !this.open.current;\n    }\n    onOpen() {\n        this.open.current = true;\n    }\n    onClose() {\n        this.open.current = false;\n    }\n}\nclass MenuContentState {\n    #id;\n    contentRef;\n    parentMenu;\n    search = $state(\"\");\n    #loop;\n    #timer = $state(0);\n    pointerGraceTimer = $state(0);\n    #pointerGraceIntent = $state(null);\n    #pointerDir = $state(\"right\");\n    #lastPointerX = $state(0);\n    #handleTypeaheadSearch;\n    rovingFocusGroup;\n    isMounted;\n    isFocusWithin = new IsFocusWithin(() => this.parentMenu.contentNode ?? undefined);\n    constructor(props, parentMenu) {\n        this.#id = props.id;\n        this.#loop = props.loop;\n        this.parentMenu = parentMenu;\n        this.parentMenu.contentId = props.id;\n        this.contentRef = props.ref;\n        this.isMounted = props.isMounted;\n        this.onkeydown = this.onkeydown.bind(this);\n        this.onblur = this.onblur.bind(this);\n        this.onpointermove = this.onpointermove.bind(this);\n        this.onfocus = this.onfocus.bind(this);\n        this.handleInteractOutside = this.handleInteractOutside.bind(this);\n        useRefById({\n            id: this.#id,\n            ref: this.contentRef,\n            deps: () => this.parentMenu.open.current,\n            onRefChange: (node) => {\n                if (this.parentMenu.contentNode !== node) {\n                    this.parentMenu.contentNode = node;\n                }\n            },\n        });\n        onDestroyEffect(() => {\n            window.clearTimeout(this.#timer);\n        });\n        this.#handleTypeaheadSearch = useDOMTypeahead().handleTypeaheadSearch;\n        this.rovingFocusGroup = useRovingFocus({\n            rootNodeId: this.parentMenu.contentId,\n            candidateAttr: this.parentMenu.root.getAttr(\"item\"),\n            loop: this.#loop,\n            orientation: box.with(() => \"vertical\"),\n        });\n        $effect(() => {\n            const contentNode = this.parentMenu.contentNode;\n            if (!contentNode)\n                return;\n            const handler = () => {\n                afterTick(() => {\n                    if (!this.parentMenu.root.isUsingKeyboard)\n                        return;\n                    this.rovingFocusGroup.focusFirstCandidate();\n                });\n            };\n            return listenMenuOpen(contentNode, handler);\n        });\n    }\n    #getCandidateNodes() {\n        const node = this.parentMenu.contentNode;\n        if (!node)\n            return [];\n        const candidates = Array.from(node.querySelectorAll(`[${this.parentMenu.root.getAttr(\"item\")}]:not([data-disabled])`));\n        return candidates;\n    }\n    #isPointerMovingToSubmenu(e) {\n        const isMovingTowards = this.#pointerDir === this.#pointerGraceIntent?.side;\n        return isMovingTowards && isPointerInGraceArea(e, this.#pointerGraceIntent?.area);\n    }\n    onPointerGraceIntentChange(intent) {\n        this.#pointerGraceIntent = intent;\n    }\n    onkeydown(e) {\n        if (e.defaultPrevented)\n            return;\n        const target = e.target;\n        const currentTarget = e.currentTarget;\n        if (!isHTMLElement(target) || !isHTMLElement(currentTarget))\n            return;\n        const isKeydownInside = target.closest(`[${this.parentMenu.root.getAttr(\"content\")}]`)?.id ===\n            this.parentMenu.contentId.current;\n        const isModifierKey = e.ctrlKey || e.altKey || e.metaKey;\n        const isCharacterKey = e.key.length === 1;\n        const kbdFocusedEl = this.rovingFocusGroup.handleKeydown(target, e);\n        if (kbdFocusedEl)\n            return;\n        // prevent space from being considered with typeahead\n        if (e.code === \"Space\")\n            return;\n        const candidateNodes = this.#getCandidateNodes();\n        if (isKeydownInside) {\n            // menus do not respect the tab key\n            if (e.key === kbd.TAB)\n                e.preventDefault();\n            if (!isModifierKey && isCharacterKey) {\n                this.#handleTypeaheadSearch(e.key, candidateNodes);\n            }\n        }\n        // focus first/last based on key pressed\n        if (e.target?.id !== this.parentMenu.contentId.current)\n            return;\n        if (!FIRST_LAST_KEYS.includes(e.key))\n            return;\n        e.preventDefault();\n        if (LAST_KEYS.includes(e.key)) {\n            candidateNodes.reverse();\n        }\n        focusFirst(candidateNodes);\n    }\n    onblur(e) {\n        if (!isElement(e.currentTarget))\n            return;\n        if (!isElement(e.target))\n            return;\n        // clear search buffer when leaving the menu\n        if (!e.currentTarget.contains?.(e.target)) {\n            window.clearTimeout(this.#timer);\n            this.search = \"\";\n        }\n    }\n    onfocus(_) {\n        if (!this.parentMenu.root.isUsingKeyboard)\n            return;\n        afterTick(() => this.rovingFocusGroup.focusFirstCandidate());\n    }\n    onpointermove(e) {\n        if (!isMouseEvent(e))\n            return;\n        const target = e.target;\n        if (!isElement(target))\n            return;\n        const pointerXHasChanged = this.#lastPointerX !== e.clientX;\n        const currentTarget = e.currentTarget;\n        if (!isElement(currentTarget))\n            return;\n        // We don't use `event.movementX` for this check because Safari will\n        // always return `0` on a pointer event.\n        if (currentTarget.contains(target) && pointerXHasChanged) {\n            const newDir = e.clientX > this.#lastPointerX ? \"right\" : \"left\";\n            this.#pointerDir = newDir;\n            this.#lastPointerX = e.clientX;\n        }\n    }\n    onItemEnter(e) {\n        if (this.#isPointerMovingToSubmenu(e))\n            return true;\n        return false;\n    }\n    onItemLeave(e) {\n        if (this.#isPointerMovingToSubmenu(e))\n            return;\n        const contentNode = this.parentMenu.contentNode;\n        contentNode?.focus();\n        this.rovingFocusGroup.setCurrentTabStopId(\"\");\n    }\n    onTriggerLeave(e) {\n        if (this.#isPointerMovingToSubmenu(e))\n            return true;\n        return false;\n    }\n    onOpenAutoFocus = (e) => {\n        if (e.defaultPrevented)\n            return;\n        e.preventDefault();\n        const contentNode = this.parentMenu.contentNode;\n        contentNode?.focus();\n    };\n    handleInteractOutside(e) {\n        if (!isElementOrSVGElement(e.target))\n            return;\n        const triggerId = this.parentMenu.triggerNode?.id;\n        if (e.target.id === triggerId) {\n            e.preventDefault();\n            return;\n        }\n        if (e.target.closest(`#${triggerId}`)) {\n            e.preventDefault();\n        }\n    }\n    snippetProps = $derived.by(() => ({ open: this.parentMenu.open.current }));\n    props = $derived.by(() => ({\n        id: this.#id.current,\n        role: \"menu\",\n        \"aria-orientation\": getAriaOrientation(\"vertical\"),\n        [this.parentMenu.root.getAttr(\"content\")]: \"\",\n        \"data-state\": getDataOpenClosed(this.parentMenu.open.current),\n        onkeydown: this.onkeydown,\n        onblur: this.onblur,\n        onpointermove: this.onpointermove,\n        onfocus: this.onfocus,\n        dir: this.parentMenu.root.dir.current,\n        style: {\n            pointerEvents: \"auto\",\n        },\n    }));\n}\nclass MenuItemSharedState {\n    content;\n    ref;\n    id;\n    disabled;\n    #isFocused = $state(false);\n    constructor(props, content) {\n        this.content = content;\n        this.id = props.id;\n        this.disabled = props.disabled;\n        this.ref = props.ref;\n        this.onpointermove = this.onpointermove.bind(this);\n        this.onpointerleave = this.onpointerleave.bind(this);\n        this.onfocus = this.onfocus.bind(this);\n        this.onblur = this.onblur.bind(this);\n        useRefById({\n            id: this.id,\n            ref: this.ref,\n            deps: () => this.content.isMounted.current,\n        });\n    }\n    onpointermove(e) {\n        if (e.defaultPrevented)\n            return;\n        if (!isMouseEvent(e))\n            return;\n        if (this.disabled.current) {\n            this.content.onItemLeave(e);\n        }\n        else {\n            const defaultPrevented = this.content.onItemEnter(e);\n            if (defaultPrevented)\n                return;\n            const item = e.currentTarget;\n            if (!isHTMLElement(item))\n                return;\n            item.focus();\n        }\n    }\n    onpointerleave(e) {\n        afterTick(() => {\n            if (e.defaultPrevented)\n                return;\n            if (!isMouseEvent(e))\n                return;\n            this.content.onItemLeave(e);\n        });\n    }\n    onfocus(e) {\n        afterTick(() => {\n            if (e.defaultPrevented || this.disabled.current)\n                return;\n            this.#isFocused = true;\n        });\n    }\n    onblur(e) {\n        afterTick(() => {\n            if (e.defaultPrevented)\n                return;\n            this.#isFocused = false;\n        });\n    }\n    props = $derived.by(() => ({\n        id: this.id.current,\n        tabindex: -1,\n        role: \"menuitem\",\n        \"aria-disabled\": getAriaDisabled(this.disabled.current),\n        \"data-disabled\": getDataDisabled(this.disabled.current),\n        \"data-highlighted\": this.#isFocused ? \"\" : undefined,\n        [this.content.parentMenu.root.getAttr(\"item\")]: \"\",\n        //\n        onpointermove: this.onpointermove,\n        onpointerleave: this.onpointerleave,\n        onfocus: this.onfocus,\n        onblur: this.onblur,\n    }));\n}\nclass MenuItemState {\n    #item;\n    #onSelect;\n    #closeOnSelect;\n    #isPointerDown = $state(false);\n    root;\n    constructor(props, item) {\n        this.#item = item;\n        this.root = item.content.parentMenu.root;\n        this.#onSelect = props.onSelect;\n        this.#closeOnSelect = props.closeOnSelect;\n        this.onkeydown = this.onkeydown.bind(this);\n        this.onclick = this.onclick.bind(this);\n        this.onpointerdown = this.onpointerdown.bind(this);\n        this.onpointerup = this.onpointerup.bind(this);\n    }\n    #handleSelect() {\n        if (this.#item.disabled.current)\n            return;\n        const selectEvent = new CustomEvent(\"menuitemselect\", { bubbles: true, cancelable: true });\n        this.#onSelect.current(selectEvent);\n        afterTick(() => {\n            if (selectEvent.defaultPrevented) {\n                this.#item.content.parentMenu.root.isUsingKeyboard = false;\n                return;\n            }\n            if (this.#closeOnSelect.current) {\n                this.#item.content.parentMenu.root.onClose();\n            }\n        });\n    }\n    onkeydown(e) {\n        const isTypingAhead = this.#item.content.search !== \"\";\n        if (this.#item.disabled.current || (isTypingAhead && e.key === kbd.SPACE))\n            return;\n        if (SELECTION_KEYS.includes(e.key)) {\n            if (!isHTMLElement(e.currentTarget))\n                return;\n            e.currentTarget.click();\n            /**\n             * We prevent default browser behavior for selection keys as they should trigger\n             * a selection only:\n             * - prevents space from scrolling the page.\n             * - if keydown causes focus to move, prevents keydown from firing on the new target.\n             */\n            e.preventDefault();\n        }\n    }\n    onclick(_) {\n        if (this.#item.disabled.current)\n            return;\n        this.#handleSelect();\n    }\n    onpointerup(e) {\n        if (e.defaultPrevented)\n            return;\n        if (!this.#isPointerDown) {\n            if (!isHTMLElement(e.currentTarget))\n                return;\n            e.currentTarget?.click();\n        }\n    }\n    onpointerdown(_) {\n        this.#isPointerDown = true;\n    }\n    props = $derived.by(() => mergeProps(this.#item.props, {\n        onclick: this.onclick,\n        onpointerdown: this.onpointerdown,\n        onpointerup: this.onpointerup,\n        onkeydown: this.onkeydown,\n    }));\n}\nclass MenuSubTriggerState {\n    #item;\n    // The menu this sub-trigger item belongs within\n    #content;\n    // the menu this sub-trigger item opens\n    #submenu;\n    #openTimer = $state(null);\n    constructor(item, content, submenu) {\n        this.#item = item;\n        this.#content = content;\n        this.#submenu = submenu;\n        this.onpointerleave = this.onpointerleave.bind(this);\n        this.onpointermove = this.onpointermove.bind(this);\n        this.onkeydown = this.onkeydown.bind(this);\n        this.onclick = this.onclick.bind(this);\n        onDestroyEffect(() => {\n            this.#clearOpenTimer();\n        });\n        useRefById({\n            id: this.#item.id,\n            ref: this.#item.ref,\n            onRefChange: (node) => {\n                this.#submenu.triggerNode = node;\n            },\n        });\n    }\n    #clearOpenTimer() {\n        if (this.#openTimer === null)\n            return;\n        window.clearTimeout(this.#openTimer);\n        this.#openTimer = null;\n    }\n    onpointermove(e) {\n        if (!isMouseEvent(e))\n            return;\n        const defaultPrevented = this.#content.onItemEnter(e);\n        if (defaultPrevented)\n            return;\n        if (!this.#item.disabled.current && !this.#submenu.open.current && !this.#openTimer) {\n            this.#content.onPointerGraceIntentChange(null);\n            this.#openTimer = window.setTimeout(() => {\n                this.#submenu.onOpen();\n                this.#clearOpenTimer();\n            }, 100);\n        }\n    }\n    onpointerleave(e) {\n        if (!isMouseEvent(e))\n            return;\n        this.#clearOpenTimer();\n        const contentNode = this.#submenu.contentNode;\n        const subTriggerNode = this.#item.ref.current;\n        if (contentNode && subTriggerNode) {\n            const polygon = makeHullFromElements([subTriggerNode, contentNode]);\n            const side = contentNode?.dataset.side;\n            this.#content.onPointerGraceIntentChange({\n                area: polygon,\n                side,\n            });\n            window.clearTimeout(this.#content.pointerGraceTimer);\n            this.#content.pointerGraceTimer = window.setTimeout(() => this.#content.onPointerGraceIntentChange(null), 300);\n        }\n        else {\n            const defaultPrevented = this.#content.onTriggerLeave(e);\n            if (defaultPrevented)\n                return;\n            // There's 100ms where the user may leave an item before the submenu was opened.\n            this.#content.onPointerGraceIntentChange(null);\n        }\n    }\n    onkeydown(e) {\n        const isTypingAhead = this.#content.search !== \"\";\n        if (this.#item.disabled.current || (isTypingAhead && e.key === kbd.SPACE))\n            return;\n        if (SUB_OPEN_KEYS[this.#submenu.root.dir.current].includes(e.key)) {\n            this.#submenu.onOpen();\n            afterTick(() => {\n                const contentNode = this.#submenu.contentNode;\n                if (!contentNode)\n                    return;\n                dispatchMenuOpen(contentNode);\n            });\n            e.preventDefault();\n        }\n    }\n    onclick(e) {\n        if (this.#item.disabled.current)\n            return;\n        /**\n         * We manually focus because iOS Safari doesn't always focus on click (e.g. buttons)\n         * and we rely heavily on `onFocusOutside` for submenus to close when switching\n         * between separate submenus.\n         */\n        if (!isHTMLElement(e.currentTarget))\n            return;\n        e.currentTarget.focus();\n        if (!this.#submenu.open.current) {\n            this.#submenu.onOpen();\n        }\n    }\n    props = $derived.by(() => mergeProps({\n        \"aria-haspopup\": \"menu\",\n        \"aria-expanded\": getAriaExpanded(this.#submenu.open.current),\n        \"data-state\": getDataOpenClosed(this.#submenu.open.current),\n        \"aria-controls\": this.#submenu.open.current\n            ? this.#submenu.contentId.current\n            : undefined,\n        [this.#submenu.root.getAttr(\"sub-trigger\")]: \"\",\n        onclick: this.onclick,\n        onpointermove: this.onpointermove,\n        onpointerleave: this.onpointerleave,\n        onkeydown: this.onkeydown,\n    }, this.#item.props));\n}\nclass MenuCheckboxItemState {\n    #item;\n    #checked;\n    #indeterminate;\n    constructor(props, item) {\n        this.#item = item;\n        this.#checked = props.checked;\n        this.#indeterminate = props.indeterminate;\n    }\n    toggleChecked() {\n        if (this.#indeterminate.current) {\n            this.#indeterminate.current = false;\n            this.#checked.current = true;\n        }\n        else {\n            this.#checked.current = !this.#checked.current;\n        }\n    }\n    snippetProps = $derived.by(() => ({\n        checked: this.#checked.current,\n        indeterminate: this.#indeterminate.current,\n    }));\n    props = $derived.by(() => ({\n        ...this.#item.props,\n        role: \"menuitemcheckbox\",\n        \"aria-checked\": getAriaChecked(this.#checked.current, this.#indeterminate.current),\n        \"data-state\": getCheckedState(this.#checked.current),\n        [this.#item.root.getAttr(\"checkbox-item\")]: \"\",\n    }));\n}\nclass MenuGroupState {\n    #id;\n    #ref;\n    groupHeadingId = $state(undefined);\n    root;\n    constructor(props, root) {\n        this.#id = props.id;\n        this.#ref = props.ref;\n        this.root = root;\n        useRefById({\n            id: this.#id,\n            ref: this.#ref,\n        });\n    }\n    props = $derived.by(() => ({\n        id: this.#id.current,\n        role: \"group\",\n        \"aria-labelledby\": this.groupHeadingId,\n        [this.root.getAttr(\"group\")]: \"\",\n    }));\n}\nclass MenuGroupHeadingState {\n    #id;\n    #ref;\n    #group;\n    constructor(props, group) {\n        this.#id = props.id;\n        this.#ref = props.ref;\n        this.#group = group;\n        useRefById({\n            id: this.#id,\n            ref: this.#ref,\n            onRefChange: (node) => {\n                this.#group.groupHeadingId = node?.id;\n            },\n        });\n    }\n    props = $derived.by(() => ({\n        id: this.#id.current,\n        role: \"group\",\n        [this.#group.root.getAttr(\"group-heading\")]: \"\",\n    }));\n}\nclass MenuSeparatorState {\n    #id;\n    #ref;\n    #root;\n    constructor(props, root) {\n        this.#id = props.id;\n        this.#ref = props.ref;\n        this.#root = root;\n        useRefById({\n            id: this.#id,\n            ref: this.#ref,\n        });\n    }\n    props = $derived.by(() => ({\n        id: this.#id.current,\n        role: \"group\",\n        [this.#root.getAttr(\"separator\")]: \"\",\n    }));\n}\nclass MenuArrowState {\n    #root;\n    constructor(root) {\n        this.#root = root;\n    }\n    props = $derived.by(() => ({\n        [this.#root.getAttr(\"arrow\")]: \"\",\n    }));\n}\nclass MenuRadioGroupState {\n    #id;\n    value;\n    #ref;\n    content;\n    groupHeadingId = $state(null);\n    root;\n    constructor(props, content) {\n        this.value = props.value;\n        this.#id = props.id;\n        this.#ref = props.ref;\n        this.content = content;\n        this.root = content.parentMenu.root;\n        useRefById({\n            id: this.#id,\n            ref: this.#ref,\n        });\n    }\n    setValue(v) {\n        this.value.current = v;\n    }\n    props = $derived.by(() => ({\n        id: this.#id.current,\n        [this.root.getAttr(\"radio-group\")]: \"\",\n        role: \"group\",\n        \"aria-labelledby\": this.groupHeadingId,\n    }));\n}\nclass MenuRadioItemState {\n    #id;\n    #ref;\n    #closeOnSelect;\n    #item;\n    #value;\n    #group;\n    isChecked = $derived.by(() => this.#group.value.current === this.#value.current);\n    constructor(props, item, group) {\n        this.#item = item;\n        this.#id = props.id;\n        this.#ref = props.ref;\n        this.#group = group;\n        this.#value = props.value;\n        this.#closeOnSelect = props.closeOnSelect;\n        useRefById({\n            id: this.#id,\n            ref: this.#ref,\n        });\n    }\n    selectValue() {\n        this.#group.setValue(this.#value.current);\n    }\n    props = $derived.by(() => ({\n        [this.#group.root.getAttr(\"radio-item\")]: \"\",\n        ...this.#item.props,\n        role: \"menuitemradio\",\n        \"aria-checked\": getAriaChecked(this.isChecked, false),\n        \"data-state\": getCheckedState(this.isChecked),\n    }));\n}\nclass DropdownMenuTriggerState {\n    #id;\n    #ref;\n    #parentMenu;\n    #disabled;\n    constructor(props, parentMenu) {\n        this.#ref = props.ref;\n        this.#id = props.id;\n        this.#parentMenu = parentMenu;\n        this.#disabled = props.disabled;\n        this.onpointerdown = this.onpointerdown.bind(this);\n        this.onpointerup = this.onpointerup.bind(this);\n        this.onkeydown = this.onkeydown.bind(this);\n        useRefById({\n            id: this.#id,\n            ref: this.#ref,\n            onRefChange: (ref) => {\n                this.#parentMenu.triggerNode = ref;\n            },\n        });\n    }\n    onpointerdown(e) {\n        if (this.#disabled.current)\n            return;\n        if (e.pointerType === \"touch\")\n            return e.preventDefault();\n        if (e.button === 0 && e.ctrlKey === false) {\n            this.#parentMenu.toggleOpen();\n            // prevent trigger focusing when opening to allow\n            // the content to be given focus without competition\n            if (!this.#parentMenu.open.current)\n                e.preventDefault();\n        }\n    }\n    onpointerup(e) {\n        if (this.#disabled.current)\n            return;\n        if (e.pointerType === \"touch\") {\n            e.preventDefault();\n            this.#parentMenu.toggleOpen();\n        }\n    }\n    onkeydown(e) {\n        if (this.#disabled.current)\n            return;\n        if (e.key === kbd.SPACE || e.key === kbd.ENTER) {\n            this.#parentMenu.toggleOpen();\n            e.preventDefault();\n            return;\n        }\n        if (e.key === kbd.ARROW_DOWN) {\n            this.#parentMenu.onOpen();\n            e.preventDefault();\n        }\n    }\n    #ariaControls = $derived.by(() => {\n        if (this.#parentMenu.open.current && this.#parentMenu.contentId.current)\n            return this.#parentMenu.contentId.current;\n        return undefined;\n    });\n    props = $derived.by(() => ({\n        id: this.#id.current,\n        disabled: this.#disabled.current,\n        \"aria-haspopup\": \"menu\",\n        \"aria-expanded\": getAriaExpanded(this.#parentMenu.open.current),\n        \"aria-controls\": this.#ariaControls,\n        \"data-disabled\": getDataDisabled(this.#disabled.current),\n        \"data-state\": getDataOpenClosed(this.#parentMenu.open.current),\n        [this.#parentMenu.root.getAttr(\"trigger\")]: \"\",\n        //\n        onpointerdown: this.onpointerdown,\n        onpointerup: this.onpointerup,\n        onkeydown: this.onkeydown,\n    }));\n}\nclass ContextMenuTriggerState {\n    #id;\n    #ref;\n    #parentMenu;\n    #disabled;\n    #point = $state({ x: 0, y: 0 });\n    virtualElement = box({\n        getBoundingClientRect: () => DOMRect.fromRect({ width: 0, height: 0, ...this.#point }),\n    });\n    #longPressTimer = $state(null);\n    constructor(props, parentMenu) {\n        this.#parentMenu = parentMenu;\n        this.#disabled = props.disabled;\n        this.#id = props.id;\n        this.#ref = props.ref;\n        this.oncontextmenu = this.oncontextmenu.bind(this);\n        this.onpointerdown = this.onpointerdown.bind(this);\n        this.onpointermove = this.onpointermove.bind(this);\n        this.onpointercancel = this.onpointercancel.bind(this);\n        this.onpointerup = this.onpointerup.bind(this);\n        useRefById({\n            id: this.#id,\n            ref: this.#ref,\n            onRefChange: (node) => {\n                this.#parentMenu.triggerNode = node;\n            },\n            deps: () => this.#parentMenu.open.current,\n        });\n        $effect(() => {\n            this.#point;\n            this.virtualElement.current = {\n                getBoundingClientRect: () => DOMRect.fromRect({ width: 0, height: 0, ...this.#point }),\n            };\n        });\n        $effect(() => {\n            if (this.#disabled.current) {\n                this.#clearLongPressTimer();\n            }\n        });\n        $effect(() => {\n            return () => {\n                this.#clearLongPressTimer();\n            };\n        });\n    }\n    #clearLongPressTimer() {\n        if (this.#longPressTimer === null)\n            return;\n        window.clearTimeout(this.#longPressTimer);\n    }\n    #handleOpen(e) {\n        this.#point = { x: e.clientX, y: e.clientY };\n        this.#parentMenu.onOpen();\n    }\n    oncontextmenu(e) {\n        if (this.#disabled.current)\n            return;\n        this.#clearLongPressTimer();\n        this.#handleOpen(e);\n        e.preventDefault();\n        this.#parentMenu.contentNode?.focus();\n    }\n    onpointerdown(e) {\n        if (this.#disabled.current || isMouseEvent(e))\n            return;\n        this.#clearLongPressTimer();\n        this.#longPressTimer = window.setTimeout(() => this.#handleOpen(e), 700);\n    }\n    onpointermove(e) {\n        if (this.#disabled.current || isMouseEvent(e))\n            return;\n        this.#clearLongPressTimer();\n    }\n    onpointercancel(e) {\n        if (this.#disabled.current || isMouseEvent(e))\n            return;\n        this.#clearLongPressTimer();\n    }\n    onpointerup(e) {\n        if (this.#disabled.current || isMouseEvent(e))\n            return;\n        this.#clearLongPressTimer();\n    }\n    props = $derived.by(() => ({\n        id: this.#id.current,\n        disabled: this.#disabled.current,\n        \"data-disabled\": getDataDisabled(this.#disabled.current),\n        \"data-state\": getDataOpenClosed(this.#parentMenu.open.current),\n        [CONTEXT_MENU_TRIGGER_ATTR]: \"\",\n        //\n        onpointerdown: this.onpointerdown,\n        onpointermove: this.onpointermove,\n        onpointercancel: this.onpointercancel,\n        onpointerup: this.onpointerup,\n        oncontextmenu: this.oncontextmenu,\n    }));\n}\n//\n// CONTEXT METHODS\n//\nexport function useMenuRoot(props) {\n    return setMenuRootContext(new MenuRootState(props));\n}\nexport function useMenuMenu(root, props) {\n    const menu = new MenuMenuState(props, root);\n    return setMenuMenuContext(menu);\n}\nexport function useMenuSubmenu(props) {\n    const menu = getMenuMenuContext();\n    return setMenuMenuContext(new MenuMenuState(props, menu.root, menu));\n}\nexport function useMenuSubTrigger(props) {\n    const content = getMenuContentContext();\n    const item = new MenuItemSharedState(props, content);\n    const submenu = getMenuMenuContext();\n    return new MenuSubTriggerState(item, content, submenu);\n}\nexport function useMenuDropdownTrigger(props) {\n    const menu = getMenuMenuContext();\n    return new DropdownMenuTriggerState(props, menu);\n}\nexport function useMenuContextTrigger(props) {\n    const menu = getMenuMenuContext();\n    return new ContextMenuTriggerState(props, menu);\n}\nexport function useMenuContent(props) {\n    const menu = getMenuMenuContext();\n    return setMenuContentContext(new MenuContentState(props, menu));\n}\nexport function useMenuItem(props) {\n    const content = getMenuContentContext();\n    const item = new MenuItemSharedState(props, content);\n    return new MenuItemState(props, item);\n}\nexport function useMenuCheckboxItem(props) {\n    const content = getMenuContentContext();\n    const item = new MenuItemState(props, new MenuItemSharedState(props, content));\n    return new MenuCheckboxItemState(props, item);\n}\nexport function useMenuRadioGroup(props) {\n    const content = getMenuContentContext();\n    const radioGroup = new MenuRadioGroupState(props, content);\n    return setMenuGroupContext(setMenuRadioGroupContext(radioGroup));\n}\nexport function useMenuRadioItem(props) {\n    const radioGroup = getMenuRadioGroupContext();\n    const sharedItem = new MenuItemSharedState(props, radioGroup.content);\n    const item = new MenuItemState(props, sharedItem);\n    return new MenuRadioItemState(props, item, radioGroup);\n}\nexport function useMenuGroup(props) {\n    const root = getMenuRootContext();\n    return setMenuGroupContext(new MenuGroupState(props, root));\n}\nexport function useMenuGroupHeading(props) {\n    const group = getMenuGroupContext();\n    return new MenuGroupHeadingState(props, group);\n}\nexport function useMenuSeparator(props) {\n    const root = getMenuRootContext();\n    return new MenuSeparatorState(props, root);\n}\nexport function useMenuArrow() {\n    const root = getMenuRootContext();\n    return new MenuArrowState(root);\n}\n","<script lang=\"ts\">\n\timport { box, mergeProps } from \"svelte-toolbelt\";\n\timport type { MenuItemProps } from \"../types.js\";\n\timport { useMenuItem } from \"../menu.svelte.js\";\n\timport { useId } from \"../../../internal/use-id.js\";\n\timport { noop } from \"../../../internal/noop.js\";\n\n\tlet {\n\t\tchild,\n\t\tchildren,\n\t\tref = $bindable(null),\n\t\tid = useId(),\n\t\tdisabled = false,\n\t\tonSelect = noop,\n\t\tcloseOnSelect = true,\n\t\t...restProps\n\t}: MenuItemProps = $props();\n\n\tconst itemState = useMenuItem({\n\t\tid: box.with(() => id),\n\t\tdisabled: box.with(() => disabled),\n\t\tonSelect: box.with(() => onSelect),\n\t\tref: box.with(\n\t\t\t() => ref,\n\t\t\t(v) => (ref = v)\n\t\t),\n\t\tcloseOnSelect: box.with(() => closeOnSelect),\n\t});\n\n\tconst mergedProps = $derived(mergeProps(restProps, itemState.props));\n</script>\n\n{#if child}\n\t{@render child({ props: mergedProps })}\n{:else}\n\t<div {...mergedProps}>\n\t\t{@render children?.()}\n\t</div>\n{/if}\n","<script lang=\"ts\">\n\timport { box, mergeProps } from \"svelte-toolbelt\";\n\timport type { MenuGroupProps } from \"../types.js\";\n\timport { useMenuGroup } from \"../menu.svelte.js\";\n\timport { useId } from \"../../../internal/use-id.js\";\n\n\tlet {\n\t\tchildren,\n\t\tchild,\n\t\tref = $bindable(null),\n\t\tid = useId(),\n\t\t...restProps\n\t}: MenuGroupProps = $props();\n\n\tconst groupState = useMenuGroup({\n\t\tid: box.with(() => id),\n\t\tref: box.with(\n\t\t\t() => ref,\n\t\t\t(v) => (ref = v)\n\t\t),\n\t});\n\tconst mergedProps = $derived(mergeProps(restProps, groupState.props));\n</script>\n\n{#if child}\n\t{@render child({ props: mergedProps })}\n{:else}\n\t<div {...mergedProps}>\n\t\t{@render children?.()}\n\t</div>\n{/if}\n","<script lang=\"ts\">\n\timport { box, mergeProps } from \"svelte-toolbelt\";\n\timport type { MenuGroupHeadingProps } from \"../types.js\";\n\timport { useMenuGroupHeading } from \"../menu.svelte.js\";\n\timport { useId } from \"../../../internal/use-id.js\";\n\n\tlet {\n\t\tchildren,\n\t\tchild,\n\t\tref = $bindable(null),\n\t\tid = useId(),\n\t\t...restProps\n\t}: MenuGroupHeadingProps = $props();\n\n\tconst groupHeadingState = useMenuGroupHeading({\n\t\tid: box.with(() => id),\n\t\tref: box.with(\n\t\t\t() => ref,\n\t\t\t(v) => (ref = v)\n\t\t),\n\t});\n\tconst mergedProps = $derived(mergeProps(restProps, groupHeadingState.props));\n</script>\n\n{#if child}\n\t{@render child({ props: mergedProps })}\n{:else}\n\t<div {...mergedProps}>\n\t\t{@render children?.()}\n\t</div>\n{/if}\n","<script lang=\"ts\">\n\timport { box, mergeProps } from \"svelte-toolbelt\";\n\timport type { MenuSeparatorProps } from \"../types.js\";\n\timport { useMenuSeparator } from \"../menu.svelte.js\";\n\timport { useId } from \"../../../internal/use-id.js\";\n\n\tlet {\n\t\tref = $bindable(null),\n\t\tid = useId(),\n\t\tchild,\n\t\tchildren,\n\t\t...restProps\n\t}: MenuSeparatorProps = $props();\n\n\tconst separatorState = useMenuSeparator({\n\t\tid: box.with(() => id),\n\t\tref: box.with(\n\t\t\t() => ref,\n\t\t\t(v) => (ref = v)\n\t\t),\n\t});\n\n\tconst mergedProps = $derived(mergeProps(restProps, separatorState.props));\n</script>\n\n{#if child}\n\t{@render child({ props: mergedProps })}\n{:else}\n\t<div {...mergedProps}>\n\t\t{@render children?.()}\n\t</div>\n{/if}\n","<script lang=\"ts\">\n\timport { box } from \"svelte-toolbelt\";\n\timport type { MenuRootProps } from \"../types.js\";\n\timport { useMenuMenu, useMenuRoot } from \"../menu.svelte.js\";\n\timport { noop } from \"../../../internal/noop.js\";\n\timport FloatingLayer from \"../../utilities/floating-layer/components/floating-layer.svelte\";\n\n\tlet {\n\t\topen = $bindable(false),\n\t\tdir = \"ltr\",\n\t\tonOpenChange = noop,\n\t\tcontrolledOpen = false,\n\t\t_internal_variant: variant = \"dropdown-menu\",\n\t\tchildren,\n\t}: MenuRootProps & {\n\t\t_internal_variant?: \"context-menu\" | \"dropdown-menu\" | \"menubar\";\n\t} = $props();\n\n\tconst root = useMenuRoot({\n\t\tvariant: box.with(() => variant),\n\t\tdir: box.with(() => dir),\n\t\tonClose: () => {\n\t\t\tif (controlledOpen) {\n\t\t\t\tonOpenChange(false);\n\t\t\t} else {\n\t\t\t\topen = false;\n\t\t\t\tonOpenChange?.(false);\n\t\t\t}\n\t\t},\n\t});\n\n\tuseMenuMenu(root, {\n\t\topen: box.with(\n\t\t\t() => open,\n\t\t\t(v) => {\n\t\t\t\tif (controlledOpen) {\n\t\t\t\t\tonOpenChange(v);\n\t\t\t\t} else {\n\t\t\t\t\topen = v;\n\t\t\t\t\tonOpenChange(v);\n\t\t\t\t}\n\t\t\t}\n\t\t),\n\t});\n</script>\n\n<FloatingLayer>\n\t{@render children?.()}\n</FloatingLayer>\n","<script lang=\"ts\">\n\timport { box, mergeProps } from \"svelte-toolbelt\";\n\timport type { DropdownMenuContentProps } from \"../types.js\";\n\timport { useMenuContent } from \"../../menu/menu.svelte.js\";\n\timport { useId } from \"../../../internal/use-id.js\";\n\timport { noop } from \"../../../internal/noop.js\";\n\timport PopperLayer from \"../../utilities/popper-layer/popper-layer.svelte\";\n\timport Mounted from \"../../utilities/mounted.svelte\";\n\timport { getFloatingContentCSSVars } from \"../../../internal/floating-svelte/floating-utils.svelte.js\";\n\timport PopperLayerForceMount from \"../../utilities/popper-layer/popper-layer-force-mount.svelte\";\n\n\tlet {\n\t\tid = useId(),\n\t\tchild,\n\t\tchildren,\n\t\tref = $bindable(null),\n\t\tloop = true,\n\t\tonInteractOutside = noop,\n\t\tonEscapeKeydown = noop,\n\t\tforceMount = false,\n\t\t...restProps\n\t}: DropdownMenuContentProps = $props();\n\n\tlet isMounted = $state(false);\n\n\tconst contentState = useMenuContent({\n\t\tid: box.with(() => id),\n\t\tloop: box.with(() => loop),\n\t\tref: box.with(\n\t\t\t() => ref,\n\t\t\t(v) => (ref = v)\n\t\t),\n\t\tisMounted: box.with(() => isMounted),\n\t});\n\n\tconst mergedProps = $derived(mergeProps(restProps, contentState.props));\n\n\tfunction handleInteractOutside(e: PointerEvent) {\n\t\tcontentState.handleInteractOutside(e);\n\t\tif (e.defaultPrevented) return;\n\t\tonInteractOutside(e);\n\t\tif (e.defaultPrevented) return;\n\t\tcontentState.parentMenu.onClose();\n\t}\n\tfunction handleEscapeKeydown(e: KeyboardEvent) {\n\t\tonEscapeKeydown(e);\n\t\tif (e.defaultPrevented) return;\n\t\tcontentState.parentMenu.onClose();\n\t}\n</script>\n\n{#if forceMount}\n\t<PopperLayerForceMount\n\t\t{...mergedProps}\n\t\tenabled={contentState.parentMenu.open.current}\n\t\tonInteractOutside={handleInteractOutside}\n\t\tonEscapeKeydown={handleEscapeKeydown}\n\t\ttrapFocus\n\t\t{loop}\n\t\tforceMount={true}\n\t\t{id}\n\t>\n\t\t{#snippet popper({ props, wrapperProps })}\n\t\t\t{@const finalProps = mergeProps(props, {\n\t\t\t\tstyle: getFloatingContentCSSVars(\"dropdown-menu\"),\n\t\t\t})}\n\t\t\t{#if child}\n\t\t\t\t{@render child({ props: finalProps, wrapperProps, ...contentState.snippetProps })}\n\t\t\t{:else}\n\t\t\t\t<div {...wrapperProps}>\n\t\t\t\t\t<div {...finalProps}>\n\t\t\t\t\t\t{@render children?.()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t\t<Mounted bind:isMounted />\n\t\t{/snippet}\n\t</PopperLayerForceMount>\n{:else if !forceMount}\n\t<PopperLayer\n\t\t{...mergedProps}\n\t\tpresent={contentState.parentMenu.open.current}\n\t\tonInteractOutside={handleInteractOutside}\n\t\tonEscapeKeydown={handleEscapeKeydown}\n\t\ttrapFocus\n\t\t{loop}\n\t\tforceMount={false}\n\t\t{id}\n\t>\n\t\t{#snippet popper({ props, wrapperProps })}\n\t\t\t{@const finalProps = mergeProps(props, {\n\t\t\t\tstyle: getFloatingContentCSSVars(\"dropdown-menu\"),\n\t\t\t})}\n\t\t\t{#if child}\n\t\t\t\t{@render child({ props: finalProps, wrapperProps, ...contentState.snippetProps })}\n\t\t\t{:else}\n\t\t\t\t<div {...wrapperProps}>\n\t\t\t\t\t<div {...finalProps}>\n\t\t\t\t\t\t{@render children?.()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t\t<Mounted bind:isMounted />\n\t\t{/snippet}\n\t</PopperLayer>\n{/if}\n","<script lang=\"ts\">\n\timport { box, mergeProps } from \"svelte-toolbelt\";\n\timport type { MenuTriggerProps } from \"../types.js\";\n\timport { useMenuDropdownTrigger } from \"../menu.svelte.js\";\n\timport { useId } from \"../../../internal/use-id.js\";\n\timport FloatingLayerAnchor from \"../../utilities/floating-layer/components/floating-layer-anchor.svelte\";\n\n\tlet {\n\t\tid = useId(),\n\t\tref = $bindable(null),\n\t\tchild,\n\t\tchildren,\n\t\tdisabled = false,\n\t\ttype = \"button\",\n\t\t...restProps\n\t}: MenuTriggerProps = $props();\n\n\tconst triggerState = useMenuDropdownTrigger({\n\t\tid: box.with(() => id),\n\t\tdisabled: box.with(() => disabled ?? false),\n\t\tref: box.with(\n\t\t\t() => ref,\n\t\t\t(v) => (ref = v)\n\t\t),\n\t});\n\n\tconst mergedProps = $derived(mergeProps(restProps, triggerState.props, { type }));\n</script>\n\n<FloatingLayerAnchor {id}>\n\t{#if child}\n\t\t{@render child({ props: mergedProps })}\n\t{:else}\n\t\t<button {...mergedProps}>\n\t\t\t{@render children?.()}\n\t\t</button>\n\t{/if}\n</FloatingLayerAnchor>\n","import { untrack } from \"svelte\";\nimport { afterSleep, box, onDestroyEffect, useRefById } from \"svelte-toolbelt\";\nimport { getAriaExpanded, getDataOpenClosed } from \"../../internal/attrs.js\";\nimport { addEventListener } from \"../../internal/events.js\";\nimport { isElement, isFocusVisible, isTouch } from \"../../internal/is.js\";\nimport { getTabbableCandidates } from \"../../internal/focus.js\";\nimport { createContext } from \"../../internal/create-context.js\";\nimport { useGraceArea } from \"../../internal/use-grace-area.svelte.js\";\nconst CONTENT_ATTR = \"data-link-preview-content\";\nconst TRIGGER_ATTR = \"data-link-preview-trigger\";\nclass LinkPreviewRootState {\n    open;\n    openDelay;\n    closeDelay;\n    hasSelection = $state(false);\n    isPointerDownOnContent = $state(false);\n    containsSelection = $state(false);\n    timeout = null;\n    contentNode = $state(null);\n    contentId = $state(undefined);\n    contentMounted = $state(false);\n    triggerNode = $state(null);\n    isPointerInTransit = box(false);\n    isOpening = $state(false);\n    constructor(props) {\n        this.open = props.open;\n        this.openDelay = props.openDelay;\n        this.closeDelay = props.closeDelay;\n        $effect(() => {\n            if (!this.open.current) {\n                untrack(() => (this.hasSelection = false));\n                return;\n            }\n            const handlePointerUp = () => {\n                this.containsSelection = false;\n                this.isPointerDownOnContent = false;\n                afterSleep(1, () => {\n                    const isSelection = document.getSelection()?.toString() !== \"\";\n                    if (isSelection) {\n                        this.hasSelection = true;\n                    }\n                    else {\n                        this.hasSelection = false;\n                    }\n                });\n            };\n            const unsubListener = addEventListener(document, \"pointerup\", handlePointerUp);\n            const contentNode = untrack(() => this.contentNode);\n            if (!contentNode)\n                return;\n            const tabCandidates = getTabbableCandidates(contentNode);\n            for (const candidate of tabCandidates) {\n                candidate.setAttribute(\"tabindex\", \"-1\");\n            }\n            return () => {\n                unsubListener();\n                this.hasSelection = false;\n                this.isPointerDownOnContent = false;\n            };\n        });\n    }\n    clearTimeout() {\n        if (this.timeout) {\n            window.clearTimeout(this.timeout);\n            this.timeout = null;\n        }\n    }\n    handleOpen() {\n        this.clearTimeout();\n        if (this.open.current)\n            return;\n        this.isOpening = true;\n        this.timeout = window.setTimeout(() => {\n            if (this.isOpening) {\n                this.open.current = true;\n                this.isOpening = false;\n            }\n        }, this.openDelay.current);\n    }\n    immediateClose() {\n        this.clearTimeout();\n        this.isOpening = false;\n        this.open.current = false;\n    }\n    handleClose() {\n        this.isOpening = false;\n        this.clearTimeout();\n        if (!this.isPointerDownOnContent && !this.hasSelection) {\n            this.timeout = window.setTimeout(() => {\n                this.open.current = false;\n            }, this.closeDelay.current);\n        }\n    }\n}\nclass LinkPreviewTriggerState {\n    #id;\n    #ref;\n    #root;\n    constructor(props, root) {\n        this.#id = props.id;\n        this.#ref = props.ref;\n        this.#root = root;\n        this.onpointerenter = this.onpointerenter.bind(this);\n        this.onpointerleave = this.onpointerleave.bind(this);\n        this.onfocus = this.onfocus.bind(this);\n        this.onblur = this.onblur.bind(this);\n        useRefById({\n            id: this.#id,\n            ref: this.#ref,\n            onRefChange: (node) => {\n                this.#root.triggerNode = node;\n            },\n        });\n    }\n    onpointerenter(e) {\n        if (isTouch(e))\n            return;\n        this.#root.handleOpen();\n    }\n    onpointerleave(e) {\n        if (isTouch(e))\n            return;\n        if (!this.#root.contentMounted) {\n            this.#root.immediateClose();\n        }\n    }\n    onfocus(e) {\n        if (!isFocusVisible(e.currentTarget))\n            return;\n        this.#root.handleOpen();\n    }\n    onblur(_) {\n        this.#root.handleClose();\n    }\n    props = $derived.by(() => ({\n        id: this.#id.current,\n        \"aria-haspopup\": \"dialog\",\n        \"aria-expanded\": getAriaExpanded(this.#root.open.current),\n        \"data-state\": getDataOpenClosed(this.#root.open.current),\n        \"aria-controls\": this.#root.contentId,\n        role: \"button\",\n        [TRIGGER_ATTR]: \"\",\n        onpointerenter: this.onpointerenter,\n        onfocus: this.onfocus,\n        onblur: this.onblur,\n        onpointerleave: this.onpointerleave,\n    }));\n}\nclass LinkPreviewContentState {\n    #id;\n    #ref;\n    root;\n    constructor(props, root) {\n        this.#id = props.id;\n        this.#ref = props.ref;\n        this.root = root;\n        this.onpointerdown = this.onpointerdown.bind(this);\n        this.onpointerenter = this.onpointerenter.bind(this);\n        this.onfocusout = this.onfocusout.bind(this);\n        useRefById({\n            id: this.#id,\n            ref: this.#ref,\n            onRefChange: (node) => {\n                this.root.contentNode = node;\n                this.root.contentId = node?.id;\n            },\n            deps: () => this.root.open.current,\n        });\n        $effect(() => {\n            if (!this.root.open.current)\n                return;\n            const { isPointerInTransit, onPointerExit } = useGraceArea(() => this.root.triggerNode, () => this.#ref.current);\n            this.root.isPointerInTransit = isPointerInTransit;\n            onPointerExit(() => {\n                this.root.handleClose();\n            });\n        });\n        onDestroyEffect(() => {\n            this.root.clearTimeout();\n        });\n    }\n    onpointerdown(e) {\n        const target = e.target;\n        if (!isElement(target))\n            return;\n        if (e.currentTarget.contains(target)) {\n            this.root.containsSelection = true;\n        }\n        this.root.hasSelection = true;\n        this.root.isPointerDownOnContent = true;\n    }\n    onpointerenter(e) {\n        if (isTouch(e))\n            return;\n        this.root.handleOpen();\n    }\n    onfocusout(e) {\n        e.preventDefault();\n    }\n    snippetProps = $derived.by(() => ({ open: this.root.open.current }));\n    props = $derived.by(() => ({\n        id: this.#id.current,\n        tabindex: -1,\n        \"data-state\": getDataOpenClosed(this.root.open.current),\n        [CONTENT_ATTR]: \"\",\n        onpointerdown: this.onpointerdown,\n        onpointerenter: this.onpointerenter,\n        onfocusout: this.onfocusout,\n    }));\n}\nconst [setLinkPreviewRootContext, getLinkPreviewRootContext] = createContext(\"LinkPreview.Root\");\nexport function useLinkPreviewRoot(props) {\n    return setLinkPreviewRootContext(new LinkPreviewRootState(props));\n}\nexport function useLinkPreviewTrigger(props) {\n    return new LinkPreviewTriggerState(props, getLinkPreviewRootContext());\n}\nexport function useLinkPreviewContent(props) {\n    return new LinkPreviewContentState(props, getLinkPreviewRootContext());\n}\n","<script lang=\"ts\">\n\timport { box } from \"svelte-toolbelt\";\n\timport type { LinkPreviewRootProps } from \"../types.js\";\n\timport { useLinkPreviewRoot } from \"../link-preview.svelte.js\";\n\timport { noop } from \"../../../internal/noop.js\";\n\timport { FloatingLayer } from \"../../utilities/floating-layer/index.js\";\n\n\tlet {\n\t\topen = $bindable(false),\n\t\tonOpenChange = noop,\n\t\topenDelay = 700,\n\t\tcloseDelay = 300,\n\t\tcontrolledOpen = false,\n\t\tchildren,\n\t}: LinkPreviewRootProps = $props();\n\n\tuseLinkPreviewRoot({\n\t\topen: box.with(\n\t\t\t() => open,\n\t\t\t(v) => {\n\t\t\t\tif (controlledOpen) {\n\t\t\t\t\tonOpenChange(v);\n\t\t\t\t} else {\n\t\t\t\t\topen = v;\n\t\t\t\t\tonOpenChange(v);\n\t\t\t\t}\n\t\t\t}\n\t\t),\n\t\topenDelay: box.with(() => openDelay),\n\t\tcloseDelay: box.with(() => closeDelay),\n\t});\n</script>\n\n<FloatingLayer.Root>\n\t{@render children?.()}\n</FloatingLayer.Root>\n","<script lang=\"ts\">\n\timport { box, mergeProps } from \"svelte-toolbelt\";\n\timport type { LinkPreviewContentProps } from \"../types.js\";\n\timport { useLinkPreviewContent } from \"../link-preview.svelte.js\";\n\timport { useId } from \"../../../internal/use-id.js\";\n\timport PopperLayer from \"../../utilities/popper-layer/popper-layer.svelte\";\n\timport { getFloatingContentCSSVars } from \"../../../internal/floating-svelte/floating-utils.svelte.js\";\n\timport PopperLayerForceMount from \"../../utilities/popper-layer/popper-layer-force-mount.svelte\";\n\timport Mounted from \"../../utilities/mounted.svelte\";\n\n\tlet {\n\t\tchildren,\n\t\tchild,\n\t\tid = useId(),\n\t\tref = $bindable(null),\n\t\tside = \"top\",\n\t\tsideOffset = 0,\n\t\talign = \"center\",\n\t\tavoidCollisions = true,\n\t\tarrowPadding = 0,\n\t\tsticky = \"partial\",\n\t\thideWhenDetached = false,\n\t\tcollisionPadding = 0,\n\t\tonInteractOutside,\n\t\tonEscapeKeydown,\n\t\tforceMount = false,\n\t\t...restProps\n\t}: LinkPreviewContentProps = $props();\n\n\tconst contentState = useLinkPreviewContent({\n\t\tid: box.with(() => id),\n\t\tref: box.with(\n\t\t\t() => ref,\n\t\t\t(v) => (ref = v)\n\t\t),\n\t});\n\n\tconst floatingProps = $derived({\n\t\tside,\n\t\tsideOffset,\n\t\talign,\n\t\tavoidCollisions,\n\t\tarrowPadding,\n\t\tsticky,\n\t\thideWhenDetached,\n\t\tcollisionPadding,\n\t});\n\n\tconst mergedProps = $derived(mergeProps(restProps, floatingProps, contentState.props));\n\n\tfunction handleInteractOutside(e: PointerEvent) {\n\t\tonInteractOutside?.(e);\n\t\tif (e.defaultPrevented) return;\n\t\tcontentState.root.handleClose();\n\t}\n\n\tfunction handleEscapeKeydown(e: KeyboardEvent) {\n\t\tonEscapeKeydown?.(e);\n\t\tif (e.defaultPrevented) return;\n\t\tcontentState.root.handleClose();\n\t}\n</script>\n\n{#if forceMount}\n\t<PopperLayerForceMount\n\t\t{...mergedProps}\n\t\tenabled={contentState.root.open.current}\n\t\t{id}\n\t\tonInteractOutside={handleInteractOutside}\n\t\tonEscapeKeydown={handleEscapeKeydown}\n\t\tonOpenAutoFocus={(e) => e.preventDefault()}\n\t\tonCloseAutoFocus={(e) => e.preventDefault()}\n\t\ttrapFocus={false}\n\t\tloop={false}\n\t\tpreventScroll={false}\n\t\tforceMount={true}\n\t>\n\t\t{#snippet popper({ props, wrapperProps })}\n\t\t\t{@const mergedProps = mergeProps(props, {\n\t\t\t\tstyle: getFloatingContentCSSVars(\"link-preview\"),\n\t\t\t})}\n\t\t\t{#if child}\n\t\t\t\t{@render child({ props: mergedProps, wrapperProps, ...contentState.snippetProps })}\n\t\t\t{:else}\n\t\t\t\t<div {...wrapperProps}>\n\t\t\t\t\t<div {...mergedProps}>\n\t\t\t\t\t\t{@render children?.()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t{/snippet}\n\t</PopperLayerForceMount>\n{:else if !forceMount}\n\t<PopperLayer\n\t\t{...mergedProps}\n\t\tpresent={contentState.root.open.current}\n\t\t{id}\n\t\tonInteractOutside={handleInteractOutside}\n\t\tonEscapeKeydown={handleEscapeKeydown}\n\t\tonOpenAutoFocus={(e) => e.preventDefault()}\n\t\tonCloseAutoFocus={(e) => e.preventDefault()}\n\t\ttrapFocus={false}\n\t\tloop={false}\n\t\tpreventScroll={false}\n\t\tforceMount={false}\n\t>\n\t\t{#snippet popper({ props, wrapperProps })}\n\t\t\t{@const mergedProps = mergeProps(props, {\n\t\t\t\tstyle: getFloatingContentCSSVars(\"link-preview\"),\n\t\t\t})}\n\t\t\t{#if child}\n\t\t\t\t{@render child({ props: mergedProps, wrapperProps, ...contentState.snippetProps })}\n\t\t\t{:else}\n\t\t\t\t<div {...wrapperProps}>\n\t\t\t\t\t<div {...mergedProps}>\n\t\t\t\t\t\t{@render children?.()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t\t<Mounted onMountedChange={(m) => (contentState.root.contentMounted = m)} />\n\t\t{/snippet}\n\t</PopperLayer>\n{/if}\n","<script lang=\"ts\">\n\timport { box, mergeProps } from \"svelte-toolbelt\";\n\timport type { LinkPreviewTriggerProps } from \"../types.js\";\n\timport { useLinkPreviewTrigger } from \"../link-preview.svelte.js\";\n\timport { useId } from \"../../../internal/use-id.js\";\n\timport { FloatingLayer } from \"../../utilities/floating-layer/index.js\";\n\n\tlet {\n\t\tref = $bindable(null),\n\t\tid = useId(),\n\t\tchild,\n\t\tchildren,\n\t\t...restProps\n\t}: LinkPreviewTriggerProps = $props();\n\n\tconst triggerState = useLinkPreviewTrigger({\n\t\tid: box.with(() => id),\n\t\tref: box.with(\n\t\t\t() => ref,\n\t\t\t(v) => (ref = v)\n\t\t),\n\t});\n\n\tconst mergedProps = $derived(mergeProps(restProps, triggerState.props));\n</script>\n\n<FloatingLayer.Anchor {id}>\n\t{#if child}\n\t\t{@render child({ props: mergedProps })}\n\t{:else}\n\t\t<a {...mergedProps}>\n\t\t\t{@render children?.()}\n\t\t</a>\n\t{/if}\n</FloatingLayer.Anchor>\n","<script lang=\"ts\">\n\timport EmergencyKitModal from './EmergencyKitModal.svelte';\n\timport ImportOptionModal from './ImportOptionModal.svelte';\n\timport ImportPhrase from './ImportPhrase.svelte';\n\timport ImportPrivateKey from './ImportPrivateKey.svelte';\n\timport ImportWatchAccount from './ImportWatchAccount.svelte';\n\n\tinterface Props {\n\t\tshow?: boolean;\n\t\tshowImportWatch?: boolean;\n\t\tonCancel?: () => void;\n\t\tonClose?: () => void;\n\t\tonComplete?: (imported: string) => void;\n\t\tonImportKey?: () => void;\n\t\tonImportPhrase?: () => void;\n\t\tonImportWatch?: () => void;\n\t\tonRestore?: () => void;\n\t}\n\n\tlet {\n\t\tshow = $bindable(false),\n\t\tshowImportWatch = false,\n\t\tonCancel = () => {\n\t\t\tshow = false;\n\t\t},\n\t\tonClose = () => {\n\t\t\tshow = false;\n\t\t},\n\t\tonComplete = (imported: string) => {\n\t\t\tshow = false;\n\t\t},\n\t\tonImportKey = () => {\n\t\t\tshow = false;\n\t\t\tshowImportAccount = true;\n\t\t},\n\t\tonImportPhrase = () => {\n\t\t\tshow = false;\n\t\t\tshowImportPhrase = true;\n\t\t},\n\t\tonImportWatch = () => {\n\t\t\tshow = false;\n\t\t\tshowImportWatchAccount = true;\n\t\t},\n\t\tonRestore = () => {\n\t\t\tshow = false;\n\t\t\tshowEmergencyKit = true;\n\t\t}\n\t}: Props = $props();\n\n\tlet showImportWatchAccount = $state(false);\n\tlet showImportAccount = $state(false);\n\tlet showImportPhrase = $state(false);\n\tlet showEmergencyKit = $state(false);\n\n\tfunction onCompleteImportPrivateKey() {\n\t\tshowImportAccount = false;\n\t\tshow = false;\n\t\tonComplete('Private Key');\n\t}\n\n\tfunction onCancelImportPrivateKey() {\n\t\tshowImportAccount = false;\n\t\tshow = false;\n\t}\n\n\tfunction onCompleteImportPhrase() {\n\t\tshowImportPhrase = false;\n\t\tshow = false;\n\t\tonComplete('Secret Phrase');\n\t}\n\n\tfunction onCancelImportPhrase() {\n\t\tshowImportPhrase = false;\n\t\tshow = false;\n\t}\n\n\tfunction onCompleteImportWatch() {\n\t\tshowImportPhrase = false;\n\t\tshow = false;\n\t\tonComplete('Secret Phrase');\n\t}\n\n\tfunction onCancelImportWatch() {\n\t\tshowImportPhrase = false;\n\t\tshow = false;\n\t}\n\n\tfunction onCompleteEmergenyKit() {\n\t\tshowEmergencyKit = false;\n\t\tshow = false;\n\t\tonComplete('Emergency Kit');\n\t}\n\n\tfunction onCancelEmergencyKit() {\n\t\tshowEmergencyKit = false;\n\t\tshow = false;\n\t}\n</script>\n\n<ImportOptionModal\n\t{show}\n\t{showImportWatch}\n\t{onCancel}\n\t{onClose}\n\t{onImportKey}\n\t{onImportPhrase}\n\t{onImportWatch}\n\t{onRestore}\n/>\n\n<ImportPrivateKey\n\tbind:show={showImportAccount}\n\tonComplete={onCompleteImportPrivateKey}\n\tonCancel={onCancelImportPrivateKey}\n/>\n\n<ImportPhrase\n\tbind:show={showImportPhrase}\n\tonComplete={onCompleteImportPhrase}\n\tonCancel={onCancelImportPhrase}\n/>\n\n<ImportWatchAccount\n\tbind:show={showImportWatchAccount}\n\tonComplete={onCompleteImportWatch}\n\tonCancel={onCancelImportWatch}\n/>\n\n<EmergencyKitModal\n\tbind:show={showEmergencyKit}\n\tmode=\"import\"\n\tonComplete={onCompleteEmergenyKit}\n\tonCancel={onCancelEmergencyKit}\n/>\n","<script lang=\"ts\">\n\timport { cn } from '$lib/utils.js';\n\timport { DropdownMenu as DropdownMenuPrimitive } from 'bits-ui';\n\n\tlet {\n\t\tref = $bindable(null),\n\t\tsideOffset = 4,\n\t\tportalProps,\n\t\tclass: className,\n\t\t...restProps\n\t}: DropdownMenuPrimitive.ContentProps & {\n\t\tportalProps?: DropdownMenuPrimitive.PortalProps;\n\t} = $props();\n</script>\n\n<DropdownMenuPrimitive.Portal {...portalProps}>\n\t<DropdownMenuPrimitive.Content\n\t\tbind:ref\n\t\t{sideOffset}\n\t\tclass={cn(\n\t\t\t'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] overflow-hidden rounded-md border p-1 shadow-md outline-none',\n\t\t\tclassName\n\t\t)}\n\t\t{...restProps}\n\t/>\n</DropdownMenuPrimitive.Portal>\n","<script lang=\"ts\">\n\timport { DropdownMenu as DropdownMenuPrimitive } from 'bits-ui';\n\timport { cn } from '$lib/utils.js';\n\n\tlet {\n\t\tref = $bindable(null),\n\t\tclass: className,\n\t\tinset,\n\t\t...restProps\n\t}: DropdownMenuPrimitive.GroupHeadingProps & {\n\t\tinset?: boolean;\n\t} = $props();\n</script>\n\n<DropdownMenuPrimitive.GroupHeading\n\tbind:ref\n\tclass={cn('px-2 py-1.5 text-sm font-semibold', inset && 'pl-8', className)}\n\t{...restProps}\n/>\n","<script lang=\"ts\">\n\timport { cn } from '$lib/utils.js';\n\timport { DropdownMenu as DropdownMenuPrimitive } from 'bits-ui';\n\n\tlet {\n\t\tref = $bindable(null),\n\t\tclass: className,\n\t\tinset,\n\t\t...restProps\n\t}: DropdownMenuPrimitive.ItemProps & {\n\t\tinset?: boolean;\n\t} = $props();\n</script>\n\n<DropdownMenuPrimitive.Item\n\tbind:ref\n\tclass={cn(\n\t\t'data-[highlighted]:bg-accent data-[highlighted]:text-accent-foreground relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0',\n\t\tinset && 'pl-8',\n\t\tclassName\n\t)}\n\t{...restProps}\n/>\n","<script lang=\"ts\">\n\timport { DropdownMenu as DropdownMenuPrimitive } from 'bits-ui';\n\timport { cn } from '$lib/utils.js';\n\n\tlet {\n\t\tref = $bindable(null),\n\t\tclass: className,\n\t\t...restProps\n\t}: DropdownMenuPrimitive.SeparatorProps = $props();\n</script>\n\n<DropdownMenuPrimitive.Separator\n\tbind:ref\n\tclass={cn('bg-muted -mx-1 my-1 h-px', className)}\n\t{...restProps}\n/>\n","import { DropdownMenu as DropdownMenuPrimitive } from 'bits-ui';\nimport CheckboxItem from './dropdown-menu-checkbox-item.svelte';\nimport Content from './dropdown-menu-content.svelte';\nimport GroupHeading from './dropdown-menu-group-heading.svelte';\nimport Item from './dropdown-menu-item.svelte';\nimport Label from './dropdown-menu-label.svelte';\nimport RadioItem from './dropdown-menu-radio-item.svelte';\nimport Separator from './dropdown-menu-separator.svelte';\nimport Shortcut from './dropdown-menu-shortcut.svelte';\nimport SubContent from './dropdown-menu-sub-content.svelte';\nimport SubTrigger from './dropdown-menu-sub-trigger.svelte';\n\nconst Sub = DropdownMenuPrimitive.Sub;\nconst Root = DropdownMenuPrimitive.Root;\nconst Trigger = DropdownMenuPrimitive.Trigger;\nconst Group = DropdownMenuPrimitive.Group;\nconst RadioGroup = DropdownMenuPrimitive.RadioGroup;\n\nexport {\n\tCheckboxItem,\n\tContent,\n\tRoot as DropdownMenu,\n\tCheckboxItem as DropdownMenuCheckboxItem,\n\tContent as DropdownMenuContent,\n\tGroup as DropdownMenuGroup,\n\tGroupHeading as DropdownMenuGroupHeading,\n\tItem as DropdownMenuItem,\n\tLabel as DropdownMenuLabel,\n\tRadioGroup as DropdownMenuRadioGroup,\n\tRadioItem as DropdownMenuRadioItem,\n\tSeparator as DropdownMenuSeparator,\n\tShortcut as DropdownMenuShortcut,\n\tSub as DropdownMenuSub,\n\tSubContent as DropdownMenuSubContent,\n\tSubTrigger as DropdownMenuSubTrigger,\n\tTrigger as DropdownMenuTrigger,\n\tGroup,\n\tGroupHeading,\n\tItem,\n\tLabel,\n\tRadioGroup,\n\tRadioItem,\n\tRoot,\n\tSeparator,\n\tShortcut,\n\tSub,\n\tSubContent,\n\tSubTrigger,\n\tTrigger\n};\n","import { getContext, hasContext, setContext } from \"svelte\";\n\nlet contextKey = Symbol(\"phosphor-svelte\");\n\nexport function setIconContext(value) {\n  setContext(contextKey, value);\n}\n\n/**\n *\n * @returns {import(\"./shared\").IconContextProps[\"values\"]}\n */\nexport function getIconContext() {\n  if (hasContext(contextKey)) {\n    return getContext(contextKey);\n  }\n\n  return {};\n}\n","<!-- GENERATED FILE -->\n<script lang=\"ts\">\n  import type { IconComponentProps } from \"./shared.d.ts\";\n  import { getIconContext } from \"./context\";\n\n  const ctx = getIconContext();\n\n  let { children, ...props }: IconComponentProps = $props();\n\n  let weight = $derived(props.weight ?? ctx.weight ?? \"regular\");\n  let color = $derived(props.color ?? ctx.color ?? \"currentColor\");\n  let size = $derived(props.size ?? ctx.size ?? \"1em\");\n  let mirrored = $derived(props.mirrored ?? ctx.mirrored ?? false);\n\n  function svgAttr(obj: IconComponentProps) {\n    let { weight, color, size, mirrored, ...attrs } = obj;\n    return attrs;\n  }\n</script>\n\n<svg\n  xmlns=\"http://www.w3.org/2000/svg\"\n  role=\"img\"\n  width={size}\n  height={size}\n  fill={color}\n  transform={mirrored ? \"scale(-1, 1)\" : undefined}\n  viewBox=\"0 0 256 256\"\n  {...svgAttr(ctx)}\n  {...svgAttr(props)}\n>\n  {#if children}\n    {@render children()}\n  {/if}\n  <rect width=\"256\" height=\"256\" fill=\"none\" />\n  {#if weight === \"bold\"}\n    <path d=\"M128,20A108,108,0,1,0,236,128,108.12,108.12,0,0,0,128,20Zm0,192a84,84,0,1,1,84-84A84.09,84.09,0,0,1,128,212Zm-16-84a16,16,0,1,1-16-16A16,16,0,0,1,112,128Zm64,0a16,16,0,1,1-16-16A16,16,0,0,1,176,128Z\"/>\n  {:else if weight === \"duotone\"}\n    <path d=\"M224,128a96,96,0,1,1-96-96A96,96,0,0,1,224,128Z\" opacity=\"0.2\"/><path d=\"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm56-88a12,12,0,1,1-12-12A12,12,0,0,1,184,128Zm-44,0a12,12,0,1,1-12-12A12,12,0,0,1,140,128Zm-44,0a12,12,0,1,1-12-12A12,12,0,0,1,96,128Z\"/>\n  {:else if weight === \"fill\"}\n    <path d=\"M128,24A104,104,0,1,0,232,128,104.13,104.13,0,0,0,128,24ZM84,140a12,12,0,1,1,12-12A12,12,0,0,1,84,140Zm44,0a12,12,0,1,1,12-12A12,12,0,0,1,128,140Zm44,0a12,12,0,1,1,12-12A12,12,0,0,1,172,140Z\"/>\n  {:else if weight === \"light\"}\n    <path d=\"M128,26A102,102,0,1,0,230,128,102.12,102.12,0,0,0,128,26Zm0,192a90,90,0,1,1,90-90A90.1,90.1,0,0,1,128,218Zm10-90a10,10,0,1,1-10-10A10,10,0,0,1,138,128Zm-44,0a10,10,0,1,1-10-10A10,10,0,0,1,94,128Zm88,0a10,10,0,1,1-10-10A10,10,0,0,1,182,128Z\"/>\n  {:else if weight === \"regular\"}\n    <path d=\"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm12-88a12,12,0,1,1-12-12A12,12,0,0,1,140,128Zm44,0a12,12,0,1,1-12-12A12,12,0,0,1,184,128Zm-88,0a12,12,0,1,1-12-12A12,12,0,0,1,96,128Z\"/>\n  {:else if weight === \"thin\"}\n    <path d=\"M128,28A100,100,0,1,0,228,128,100.11,100.11,0,0,0,128,28Zm0,192a92,92,0,1,1,92-92A92.1,92.1,0,0,1,128,220Zm8-92a8,8,0,1,1-8-8A8,8,0,0,1,136,128Zm-44,0a8,8,0,1,1-8-8A8,8,0,0,1,92,128Zm88,0a8,8,0,1,1-8-8A8,8,0,0,1,180,128Z\"/>\n  {:else}\n    {(console.error('Unsupported icon weight. Choose from \"thin\", \"light\", \"regular\", \"bold\", \"fill\", or \"duotone\".'), \"\")}\n  {/if}\n</svg>","<script lang=\"ts\">\n\timport * as DropdownMenu from '$lib/components/ui/dropdown-menu/index.js';\n\timport { DotsThreeCircle } from 'phosphor-svelte';\n\n\texport interface Props {\n\t\tonSelect: (value: string) => void;\n\t}\n\n\tlet { onSelect }: Props = $props();\n</script>\n\n<DropdownMenu.Root>\n\t<DropdownMenu.Trigger\n\t\tclass=\"focus-visible border-bordinput bg-backgrounder-lt text-a-foreground inline-flex h-6 w-6 select-none items-center justify-center rounded-full border text-sm font-medium shadow-btn hover:bg-muted focus-visible:ring-2 focus-visible:ring-foreground focus-visible:ring-offset-2 focus-visible:ring-offset-background active:scale-98\"\n\t>\n\t\t<DotsThreeCircle class=\"h-6 w-6 text-foreground\" />\n\t</DropdownMenu.Trigger>\n\t<DropdownMenu.Content\n\t\tclass=\"w-56 bg-white/90 dark:bg-slate-900/90 text-slate-900 dark:text-gray-200 data-[highlight-muted]\"\n\t>\n\t\t<DropdownMenu.Group>\n\t\t\t<DropdownMenu.GroupHeading>Views</DropdownMenu.GroupHeading>\n\t\t\t<DropdownMenu.Separator />\n\t\t\t<!-- <DropdownMenu.Item closeOnSelect={true} onclick={() => onSelect('carousel')} textValue=\"carousel\">\n          Carousel\n        </DropdownMenu.Item> -->\n\t\t\t<DropdownMenu.Item\n\t\t\t\tcloseOnSelect={true}\n\t\t\t\tonclick={() => onSelect('chartAdvanced')}\n\t\t\t\ttextValue=\"chartAdvanced\"\n\t\t\t>\n\t\t\t\tChart Advanced\n\t\t\t</DropdownMenu.Item>\n\t\t\t<DropdownMenu.Item closeOnSelect={true} onclick={() => onSelect('chart')} textValue=\"chart\">\n\t\t\t\tChart\n\t\t\t</DropdownMenu.Item>\n\t\t\t<DropdownMenu.Item closeOnSelect={true} onclick={() => onSelect('grid')} textValue=\"grid\">\n\t\t\t\tGrid\n\t\t\t</DropdownMenu.Item>\n\t\t\t<DropdownMenu.Item closeOnSelect={true} onclick={() => onSelect('news')} textValue=\"news\">\n\t\t\t\tNews\n\t\t\t</DropdownMenu.Item>\n\t\t\t<DropdownMenu.Item closeOnSelect={true} onclick={() => onSelect('symbol')} textValue=\"symbol\">\n\t\t\t\tSymbol View\n\t\t\t</DropdownMenu.Item>\n\t\t\t<DropdownMenu.Item\n\t\t\t\tcloseOnSelect={true}\n\t\t\t\tonclick={() => onSelect('analysis')}\n\t\t\t\ttextValue=\"analysis\"\n\t\t\t>\n\t\t\t\tTechnical Analysis\n\t\t\t</DropdownMenu.Item>\n\t\t\t<!-- <DropdownMenu.Item closeOnSelect={true} onclick={() => onSelect('thumbnail')} textValue=\"thumbnail\">\n          Thumbnail\n        </DropdownMenu.Item> -->\n\t\t</DropdownMenu.Group>\n\t</DropdownMenu.Content>\n</DropdownMenu.Root>\n","<script lang=\"ts\">\n\timport ViewToggleMenu from './ViewToggleMenu.svelte';\n\n\texport interface Props {\n\t\tonSortChange: (criteria: string) => void;\n\t\tonViewChange: (\n\t\t\tview:\n\t\t\t\t| 'grid'\n\t\t\t\t| 'carousel'\n\t\t\t\t| 'thumbnail'\n\t\t\t\t| 'chart'\n\t\t\t\t| 'chartAdvanced'\n\t\t\t\t| 'list'\n\t\t\t\t| 'table'\n\t\t\t\t| 'news'\n\t\t\t\t| 'analysis'\n\t\t\t\t| 'symbol'\n\t\t) => void;\n\t\tonPrint?: () => void;\n\t}\n\n\tlet {\n\t\tonSortChange,\n\t\tonViewChange,\n\t\tonPrint = () => {\n\t\t\talert('Printing is in limited release. Soon to be available to all!');\n\t\t}\n\t}: Props = $props();\n\n\tconst sortOptions = [\n\t\t{ label: 'Name', value: 'name' },\n\t\t{ label: 'Price', value: 'price' },\n\t\t{ label: 'Value', value: 'value' }\n\t];\n\n\t// Manage cycling views\n\tlet currentView = $state<\n\t\t| 'grid'\n\t\t| 'carousel'\n\t\t| 'thumbnail'\n\t\t| 'chart'\n\t\t| 'chartAdvanced'\n\t\t| 'list'\n\t\t| 'table'\n\t\t| 'news'\n\t\t| 'analysis'\n\t\t| 'symbol'\n\t>('grid');\n\n\tfunction onSelect(value: string) {\n\t\tcurrentView = value as\n\t\t\t| 'grid'\n\t\t\t| 'carousel'\n\t\t\t| 'thumbnail'\n\t\t\t| 'chart'\n\t\t\t| 'chartAdvanced'\n\t\t\t| 'list'\n\t\t\t| 'table'\n\t\t\t| 'news'\n\t\t\t| 'analysis'\n\t\t\t| 'symbol';\n\t\tonViewChange(currentView);\n\t}\n</script>\n\n<div class=\"flex items-center space-x-2 text-slate-700 bg-white/90 p-[2px] rounded-full\">\n\t<!-- Sort Dropdown -->\n\t<div class=\"relative w-fit cursor-pointer\">\n\t\t<select\n\t\t\tid=\"sortby\"\n\t\t\tclass=\"bg-gray-500 rounded-full px-2 py-1 text-sm cursor-pointer text-white\"\n\t\t\tonchange={(e) => onSortChange((e.target as HTMLSelectElement).value)}\n\t\t\ttitle=\"Sort Tokens\"\n\t\t>\n\t\t\t{#each sortOptions as option}\n\t\t\t\t<option value={option.value}>{option.label}</option>\n\t\t\t{/each}\n\t\t</select>\n\t\t<div class=\"absolute inset-y-0 right-2 flex items-center pointer-events-none\">\n\t\t\t<!-- Down Chevron -->\n\t\t\t<svg\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\tclass=\"w-4 h-4 text-white\"\n\t\t\t\tfill=\"none\"\n\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\tstroke=\"currentColor\"\n\t\t\t>\n\t\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 9l-7 7-7-7\" />\n\t\t\t</svg>\n\t\t</div>\n\t</div>\n\n\t<!-- Toggle View -->\n\t<ViewToggleMenu {onSelect} />\n\t<!-- May want to enable icon changes below or hover show -->\n\t<!-- <button\n    class=\"hover:text-white\"\n    onclick={nextView}\n    title=\"Switch View\"\n  >\n    {#if currentView === 'grid'} -->\n\t<!-- Grid Icon -->\n\t<!-- <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\">\n        <rect x=\"3\" y=\"3\" width=\"7\" height=\"7\" />\n        <rect x=\"14\" y=\"3\" width=\"7\" height=\"7\" />\n        <rect x=\"14\" y=\"14\" width=\"7\" height=\"7\" />\n        <rect x=\"3\" y=\"14\" width=\"7\" height=\"7\" />\n      </svg>\n    {:else if currentView === 'carousel'} -->\n\t<!-- Carousel Icon -->\n\t<!-- <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"w-6 h-6\" viewBox=\"0 0 24 24\" fill=\"none\" stroke-width=\"1.5\" stroke=\"currentColor\">\n        <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n        <line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"12\"></line>\n        <line x1=\"12\" y1=\"12\" x2=\"16\" y2=\"16\"></line>\n      </svg>\n    {:else if currentView === 'thumbnail'} -->\n\t<!-- Thumbnail Icon -->\n\t<!-- <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"w-6 h-6\" viewBox=\"0 0 24 24\" fill=\"none\" stroke-width=\"1.5\" stroke=\"currentColor\">\n        <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"3\" />\n        <line x1=\"3\" y1=\"12\" x2=\"21\" y2=\"12\" />\n        <line x1=\"12\" y1=\"3\" x2=\"12\" y2=\"21\" />\n      </svg>\n    {/if}\n  </button> -->\n\n\t<!-- Print Button -->\n\t<!-- svelte-ignore a11y_consider_explicit_label -->\n\t<button class=\"hover:text-white\" onclick={onPrint} title=\"Print Portfolio\">\n\t\t<svg\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tfill=\"none\"\n\t\t\tviewBox=\"0 0 24 24\"\n\t\t\tstroke-width=\"1.5\"\n\t\t\tstroke=\"currentColor\"\n\t\t\tclass=\"w-6 h-6\"\n\t\t>\n\t\t\t<path\n\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\td=\"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z\"\n\t\t\t/>\n\t\t</svg>\n\t</button>\n</div>\n","<script lang=\"ts\">\n\timport { LinkPreview as HoverCardPrimitive } from 'bits-ui';\n\timport { cn } from '$lib/utils.js';\n\n\tlet {\n\t\tref = $bindable(null),\n\t\tclass: className,\n\t\talign = 'center',\n\t\tsideOffset = 4,\n\t\tportalProps,\n\t\t...restProps\n\t}: HoverCardPrimitive.ContentProps & {\n\t\tportalProps?: HoverCardPrimitive.PortalProps;\n\t} = $props();\n</script>\n\n<HoverCardPrimitive.Portal {...portalProps}>\n\t<HoverCardPrimitive.Content\n\t\tbind:ref\n\t\t{align}\n\t\t{sideOffset}\n\t\tclass={cn(\n\t\t\t'bg-popover text-popover-foreground z-50 mt-3 w-64 rounded-md border p-4 shadow-md outline-none',\n\t\t\tclassName\n\t\t)}\n\t\t{...restProps}\n\t/>\n</HoverCardPrimitive.Portal>\n","import { LinkPreview as HoverCardPrimitive } from 'bits-ui';\n\nimport Content from './hover-card-content.svelte';\nconst Root = HoverCardPrimitive.Root;\nconst Trigger = HoverCardPrimitive.Trigger;\nconst Arrow = HoverCardPrimitive.Arrow;\n\nexport {\n\tRoot,\n\tArrow,\n\tContent,\n\tTrigger,\n\tRoot as HoverCard,\n\tContent as HoverCardContent,\n\tTrigger as HoverCardTrigger\n};\n","<script lang=\"ts\">\n\timport type { TokenData } from '$lib/common/interfaces';\n\timport { formatPrice, getTokenChange } from '$lib/utilities/utilities';\n\timport ProtectedValue from './ProtectedValue.svelte';\n\timport SkeletonBalance from './SkeletonBalance.svelte';\n\timport * as HoverCard from './ui/hover-card';\n\timport { accountTokenCacheManager } from '$lib/managers/AccountTokenCacheManager';\n\timport { log } from '$lib/managers/Logger';\n\n\tinterface Props {\n\t\ttoken: TokenData;\n\t\tisLarge?: boolean;\n\t\tclassName?: string;\n\t\tonClick?: (token: TokenData) => void;\n\t\taccountAddress?: string;\n\t}\n\n\tlet {\n\t\ttoken,\n\t\tisLarge = false,\n\t\tclassName = 'bg-white',\n\t\tonClick = () => {},\n\t\taccountAddress = ''\n\t}: Props = $props();\n\n\t// Determine the 24h percentChange color\n\tconst percentChange: number | null = getTokenChange(token.change, '24h');\n\tconst percentChangeColor =\n\t\tpercentChange === null\n\t\t\t? 'text-slate-900'\n\t\t\t: percentChange >= 0\n\t\t\t\t? 'text-green-500'\n\t\t\t\t: 'text-red-500';\n\n\tlet balance = $state(token?.balance);\n\tlet price = $state(0);\n\tlet priceFormatted = $state('');\n\tlet value = $state(0);\n\tlet valueFormatted = $state('');\n\tlet isLoadingBalance = $state(false);\n\tlet isStale = $state(false);\n\n\t$effect(() => {\n\t\t// Check if the token data is stale and needs refreshing\n\t\tif (accountAddress && token.address) {\n\t\t\tisStale = accountTokenCacheManager.isTokenStale(accountAddress, token.address);\n\t\t}\n\n\t\tbalance = token?.balance;\n\t\tprice = token?.price?.price ?? 0;\n\t\tpriceFormatted = formatPrice(price);\n\n\t\t// Calculate value based on balance and price\n\t\tif (balance && price) {\n\t\t\t// Handle both number and BigInt balance types\n\t\t\tconst balanceNum =\n\t\t\t\ttypeof balance === 'bigint'\n\t\t\t\t\t? Number(balance) / Math.pow(10, token.decimals || 18)\n\t\t\t\t\t: Number(balance);\n\t\t\tvalue = balanceNum * price;\n\t\t} else {\n\t\t\tvalue = 0;\n\t\t}\n\n\t\tvalueFormatted = formatPrice(value);\n\n\t\t// Update cache when token data changes\n\t\tif (accountAddress && token.address) {\n\t\t\taccountTokenCacheManager.updateTokenForAccount(accountAddress, token);\n\t\t}\n\t});\n\n\t// Format balance for display\n\tfunction formatBalance(balance: any): string {\n\t\tif (!balance) return '0';\n\n\t\ttry {\n\t\t\tlet balanceNum: number;\n\n\t\t\tif (typeof balance === 'bigint') {\n\t\t\t\t// Convert from wei to token units\n\t\t\t\tbalanceNum = Number(balance) / Math.pow(10, token.decimals || 18);\n\t\t\t} else {\n\t\t\t\tbalanceNum = Number(balance);\n\t\t\t}\n\n\t\t\t// Format based on magnitude\n\t\t\tif (balanceNum >= 1000000) {\n\t\t\t\treturn (balanceNum / 1000000).toFixed(2) + 'M';\n\t\t\t} else if (balanceNum >= 1000) {\n\t\t\t\treturn (balanceNum / 1000).toFixed(2) + 'K';\n\t\t\t} else if (balanceNum >= 1) {\n\t\t\t\treturn balanceNum.toFixed(4);\n\t\t\t} else {\n\t\t\t\treturn balanceNum.toFixed(6);\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tlog.warn('[TokenGridItem] Error formatting balance:', false, error);\n\t\t\treturn '0';\n\t\t}\n\t}\n</script>\n\n<HoverCard.Root openDelay={300}>\n\t<HoverCard.Trigger>\n\t\t<div\n\t\t\tclass=\"flex flex-col items-center justify-center p-1 w-full h-full rounded-lg border shadow-md {className} {isStale\n\t\t\t\t? 'opacity-75'\n\t\t\t\t: ''}\"\n\t\t>\n\t\t\t{#if token.logoURI}\n\t\t\t\t<img\n\t\t\t\t\tsrc={token.logoURI}\n\t\t\t\t\talt={token.symbol}\n\t\t\t\t\tclass=\"{isLarge ? 'w-14 h-14' : 'w-8 h-8'} rounded-full\"\n\t\t\t\t\tonerror={() => {}}\n\t\t\t\t/>\n\t\t\t{:else}\n\t\t\t\t<div\n\t\t\t\t\tclass=\"{isLarge\n\t\t\t\t\t\t? 'w-14 h-14'\n\t\t\t\t\t\t: 'w-8 h-8'} rounded-full bg-gray-200 flex items-center justify-center\"\n\t\t\t\t>\n\t\t\t\t\t<span class=\"text-xs font-bold text-gray-600\"\n\t\t\t\t\t\t>{token.symbol?.slice(0, 2).toUpperCase()}</span\n\t\t\t\t\t>\n\t\t\t\t</div>\n\t\t\t{/if}\n\n\t\t\t<h3 class=\"font-bold mt-2 text-md flex items-center gap-1\">\n\t\t\t\t{token.symbol}\n\t\t\t\t{#if isStale}\n\t\t\t\t\t<svg class=\"w-3 h-3 text-yellow-500\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\td=\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\"\n\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</svg>\n\t\t\t\t{/if}\n\t\t\t</h3>\n\n\t\t\t{#if isLoadingBalance}\n\t\t\t\t<SkeletonBalance className=\"mt-1\" showLabel={false} />\n\t\t\t{:else}\n\t\t\t\t<p class=\"text-gray-500 mt-1 text-sm\">\n\t\t\t\t\tValue:\n\t\t\t\t\t{#if value > 0}\n\t\t\t\t\t\t<span><ProtectedValue value={valueFormatted} placeholder=\"*******\" /></span>\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<span class=\"text-gray-400\">-----</span>\n\t\t\t\t\t{/if}\n\t\t\t\t</p>\n\t\t\t{/if}\n\n\t\t\t{#if isLarge}\n\t\t\t\t{#if isLoadingBalance}\n\t\t\t\t\t<SkeletonBalance className=\"mt-1\" showLabel={false} />\n\t\t\t\t\t<SkeletonBalance className=\"mt-1\" showLabel={false} />\n\t\t\t\t{:else}\n\t\t\t\t\t<p class=\"text-gray-500 mt-1 text-sm\">\n\t\t\t\t\t\tPrice:\n\t\t\t\t\t\t{#if price > 0}\n\t\t\t\t\t\t\t<span><ProtectedValue value={priceFormatted} placeholder=\"*******\" /></span>\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t<span class=\"text-gray-400\">-----</span>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</p>\n\t\t\t\t\t<p class=\"text-gray-600 mt-1 text-xs\">\n\t\t\t\t\t\tQty:\n\t\t\t\t\t\t{#if balance}\n\t\t\t\t\t\t\t<span><ProtectedValue value={formatBalance(balance)} placeholder=\"*******\" /></span>\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t<span class=\"text-gray-400\">0</span>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</p>\n\t\t\t\t{/if}\n\t\t\t{/if}\n\t\t</div>\n\t</HoverCard.Trigger>\n\t<HoverCard.Content class=\"w-80 bg-white cursor-pointer p-4\" align=\"end\">\n\t\t<!-- svelte-ignore a11y_click_events_have_key_events -->\n\t\t<!-- svelte-ignore a11y_no_static_element_interactions -->\n\t\t<div class=\"flex justify-between space-x-4\" onclick={() => onClick(token)}>\n\t\t\t<div class=\"space-y-2 text-slate-900 text-md\">\n\t\t\t\t<div class=\"font-bold mb-1 flex items-center gap-2\">\n\t\t\t\t\t{#if token.logoURI}\n\t\t\t\t\t\t<img src={token.logoURI} alt={token.symbol} class=\"w-8 h-8\" onerror={() => {}} />\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<div class=\"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center\">\n\t\t\t\t\t\t\t<span class=\"text-xs font-bold text-gray-600\"\n\t\t\t\t\t\t\t\t>{token.symbol?.slice(0, 2).toUpperCase()}</span\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t\t<span class=\"font-semibold leading-6\">{token.name} - {token.symbol}</span>\n\t\t\t\t\t{#if isStale}\n\t\t\t\t\t\t<span class=\"text-xs text-yellow-600 bg-yellow-100 px-1 rounded\">Stale</span>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\n\t\t\t\t<p>\n\t\t\t\t\tPrice:\n\t\t\t\t\t{#if price > 0}\n\t\t\t\t\t\t<span><ProtectedValue value={priceFormatted} placeholder=\"*******\" /></span>\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<span class=\"text-gray-400\">-----</span>\n\t\t\t\t\t{/if}\n\t\t\t\t</p>\n\n\t\t\t\t<p>\n\t\t\t\t\tValue:\n\t\t\t\t\t{#if value > 0}\n\t\t\t\t\t\t<span><ProtectedValue value={valueFormatted} placeholder=\"*******\" /></span>\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<span class=\"text-gray-400\">$0.00</span>\n\t\t\t\t\t{/if}\n\t\t\t\t</p>\n\n\t\t\t\t<p>\n\t\t\t\t\tQuantity:\n\t\t\t\t\t{#if balance}\n\t\t\t\t\t\t<span><ProtectedValue value={formatBalance(balance)} placeholder=\"*******\" /></span>\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<span class=\"text-gray-400\">0</span>\n\t\t\t\t\t{/if}\n\t\t\t\t</p>\n\n\t\t\t\t<p>\n\t\t\t\t\tChange: <span class={percentChangeColor}\n\t\t\t\t\t\t>{percentChange ? percentChange.toFixed(2) : '--'}%</span\n\t\t\t\t\t>\n\t\t\t\t</p>\n\n\t\t\t\t{#if token.address}\n\t\t\t\t\t<p class=\"text-xs text-gray-500\">\n\t\t\t\t\t\tAddress: {token.address.slice(0, 6)}...{token.address.slice(-4)}\n\t\t\t\t\t</p>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t</div>\n\t</HoverCard.Content>\n</HoverCard.Root>\n","<script lang=\"ts\">\n\timport TokenGridItem from './TokenGridItem.svelte';\n\timport SkeletonBalance from './SkeletonBalance.svelte';\n\timport type { TokenData } from '$lib/common/interfaces';\n\timport { accountTokenCacheManager } from '$lib/managers/AccountTokenCacheManager';\n\timport { yakklCurrentlySelectedStore } from '$lib/common/stores';\n\timport { onMount } from 'svelte';\n\timport { log } from '$lib/managers/Logger';\n\n\t// Props using $props()\n\tconst {\n\t\ttokens = [],\n\t\tonTokenClick,\n\t\taccountAddress = '',\n\t\tshowSkeleton = false\n\t} = $props<{\n\t\ttokens: TokenData[];\n\t\tonTokenClick: (token: TokenData) => void;\n\t\taccountAddress?: string;\n\t\tshowSkeleton?: boolean;\n\t}>();\n\n\tlet accountTokens = $state<TokenData[]>([]);\n\tlet isLoading = $state(false); // Start with false to show any existing data\n\tlet currentAccountAddress = $state('');\n\n\t// Effect to handle account changes and load cached data\n\t$effect(() => {\n\t\tconst selectedAccount = $yakklCurrentlySelectedStore;\n\t\tconst targetAddress = accountAddress || selectedAccount?.shortcuts?.address;\n\n\t\tif (targetAddress && targetAddress !== currentAccountAddress) {\n\t\t\tcurrentAccountAddress = targetAddress;\n\t\t\tloadAccountTokens(targetAddress);\n\t\t}\n\t});\n\n\t// Effect to update tokens when props change\n\t$effect(() => {\n\t\tif (tokens && tokens.length > 0) {\n\t\t\taccountTokens = tokens;\n\t\t\tisLoading = false;\n\n\t\t\t// Cache the tokens for the current account\n\t\t\tif (currentAccountAddress) {\n\t\t\t\taccountTokenCacheManager.setCachedTokensForAccount(currentAccountAddress, tokens);\n\t\t\t}\n\t\t}\n\t});\n\n\tasync function loadAccountTokens(address: string) {\n\t\ttry {\n\t\t\tisLoading = true;\n\n\t\t\t// First, try to load from cache for immediate display\n\t\t\tconst cachedTokens = accountTokenCacheManager.getCachedTokensForAccount(address);\n\n\t\t\tif (cachedTokens && cachedTokens.length > 0) {\n\t\t\t\taccountTokens = cachedTokens;\n\t\t\t\tisLoading = false;\n\t\t\t\tlog.debug('[TokenGridView] Loaded cached tokens for account:', false, {\n\t\t\t\t\taddress,\n\t\t\t\t\ttokenCount: cachedTokens.length\n\t\t\t\t});\n\n\t\t\t\t// Check if cache is stale and needs refresh\n\t\t\t\tif (accountTokenCacheManager.isAccountTokensStale(address)) {\n\t\t\t\t\tlog.debug('[TokenGridView] Account tokens are stale, background refresh needed');\n\t\t\t\t\t// This would trigger a background refresh in a real implementation\n\t\t\t\t\t// The parent component should handle this via token service updates\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// No cached data, show skeleton while waiting for parent to provide tokens\n\t\t\t\taccountTokens = [];\n\t\t\t\tlog.debug('[TokenGridView] No cached tokens found for account:', false, { address });\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tlog.warn('[TokenGridView] Error loading account tokens:', false, error);\n\t\t\tisLoading = false;\n\t\t}\n\t}\n\n\tonMount(() => {\n\t\t// Clean up expired cache entries on mount\n\t\taccountTokenCacheManager.cleanupExpired();\n\t});\n</script>\n\n<div class=\"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3 p-2 h-full overflow-y-scroll\">\n\t{#if showSkeleton || isLoading}\n\t\t<!-- Show skeleton placeholders while loading -->\n\t\t{#each Array(6) as _, i}\n\t\t\t<div class=\"rounded-md p-1 border border-gray-200 dark:border-gray-700\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"flex flex-col items-center justify-center p-1 w-full h-full rounded-lg border shadow-md bg-white\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"w-8 h-8 bg-gray-200 rounded-full animate-pulse mb-2\"></div>\n\t\t\t\t\t<SkeletonBalance className=\"mb-1\" showLabel={false} />\n\t\t\t\t\t<SkeletonBalance className=\"text-sm\" showLabel={false} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{/each}\n\t{:else if accountTokens && accountTokens.length > 0}\n\t\t<!-- Show actual tokens -->\n\t\t{#each accountTokens as token}\n\t\t\t<!-- svelte-ignore a11y_click_events_have_key_events -->\n\t\t\t<div\n\t\t\t\tclass=\"cursor-pointer hover:shadow-lg transition-all duration-200 rounded-md p-1 border border-gray-200 dark:border-gray-700\"\n\t\t\t\tonclick={() => onTokenClick(token)}\n\t\t\t\trole=\"button\"\n\t\t\t\ttabindex=\"0\"\n\t\t\t\taria-label=\"Token item for {token.symbol}\"\n\t\t\t>\n\t\t\t\t<TokenGridItem {token} accountAddress={currentAccountAddress} />\n\t\t\t</div>\n\t\t{/each}\n\t{:else}\n\t\t<!-- Empty state -->\n\t\t<div class=\"col-span-full flex flex-col items-center justify-center py-8 text-gray-500\">\n\t\t\t<svg class=\"w-12 h-12 mb-4 opacity-50\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n\t\t\t\t<path\n\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\tstroke-width=\"2\"\n\t\t\t\t\td=\"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4\"\n\t\t\t\t></path>\n\t\t\t</svg>\n\t\t\t<p class=\"text-center\">No tokens found for this account</p>\n\t\t\t<p class=\"text-sm text-center mt-1\">Tokens will appear here when detected</p>\n\t\t</div>\n\t{/if}\n</div>\n","<script lang=\"ts\">\n\timport { onMount, onDestroy } from 'svelte';\n\n\tlet { symbol = 'COINBASE:ETHUSD' } = $props();\n\tlet widgetContainer: HTMLDivElement | null = null;\n\n\tconst initializeWidget = () => {\n\t\tif (!widgetContainer) return;\n\n\t\t// Clear any existing widget\n\t\twidgetContainer.innerHTML = '';\n\n\t\t// Dynamically add the TradingView script\n\t\tconst script = document.createElement('script');\n\t\tscript.type = 'text/javascript';\n\t\tscript.async = true;\n\t\tscript.src = '../../js/embed-widget-mini-symbol-overview.js'; // Correct widget file\n\t\tscript.innerHTML = JSON.stringify({\n\t\t\tsymbol, // Dynamically set the symbol\n\t\t\twidth: '100%',\n\t\t\theight: '100%',\n\t\t\tlocale: 'en',\n\t\t\tdateRange: '1D',\n\t\t\tcolorTheme: 'light',\n\t\t\ttrendLineColor: 'rgba(152, 0, 255, 1)',\n\t\t\tunderLineColor: 'rgba(152, 0, 255, 1)',\n\t\t\tunderLineBottomColor: 'rgba(0, 255, 255, 0)',\n\t\t\tisTransparent: false,\n\t\t\tautosize: true,\n\t\t\tlargeChartUrl: '',\n\t\t\tchartOnly: false,\n\t\t\tnoTimeScale: false\n\t\t});\n\n\t\twidgetContainer.appendChild(script);\n\t};\n\n\tonMount(() => {\n\t\tinitializeWidget();\n\t});\n\n\tonDestroy(() => {\n\t\tif (widgetContainer) {\n\t\t\twidgetContainer.innerHTML = '';\n\t\t}\n\t});\n</script>\n\n<section id=\"advanced-chart\">\n\t<div class=\"tradingview-widget-container\">\n\t\t<div\n\t\t\tbind:this={widgetContainer}\n\t\t\tclass=\"tradingview-widget-container__widget\"\n\t\t\tstyle=\"width: auto; height: 400px; min-height: 400px; max-height: auto;\"\n\t\t></div>\n\t\t<div class=\"tradingview-widget-copyright\">\n\t\t\t<a href={import.meta.env.VITE_TRADING_VIEW_LINK} rel=\"noopener nofollow\" target=\"_blank\">\n\t\t\t\t<span class=\"blue-text\">Track all markets on TradingView</span>\n\t\t\t</a>\n\t\t</div>\n\t</div>\n</section>\n\n<style>\n\t.tradingview-widget-container {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n</style>\n","<script>\n\tconst URL = import.meta.env.VITE_TRADING_VIEW_LINK;\n</script>\n\n<section id=\"top-stories\">\n\t<div class=\"tradingview-widget-container\">\n\t\t<div\n\t\t\tclass=\"tradingview-widget-container__widget\"\n\t\t\tstyle=\"width: auto; height: 400px; min-height: 400px; max-height: auto;\"\n\t\t>\n\t\t\t<script type=\"text/javascript\" src=\"../../js/embed-widget-timeline.js\" async>\n        {\n        \"feedMode\": \"market\",\n        \"market\": \"crypto\",\n        \"isTransparent\": false,\n        \"displayMode\": \"adaptive\",\n        \"width\": \"100%\",\n        \"height\": \"100%\",\n        \"colorTheme\": \"light\",\n        \"locale\": \"en\"\n        }\n\t\t\t</script>\n\t\t</div>\n\t</div>\n\t<div class=\"tradingview-widget-copyright\">\n\t\t<a href={URL} rel=\"noopener nofollow\" target=\"_blank\"\n\t\t\t><span class=\"blue-text\">Track all markets on TradingView</span></a\n\t\t>\n\t</div>\n</section>\n","<script lang=\"ts\">\n\timport { log } from '$lib/managers/Logger';\n\timport { onMount, onDestroy } from 'svelte';\n\n\tlet { symbol = 'COINBASE:ETHUSD' } = $props();\n\tlet widgetContainer: HTMLDivElement | null = null;\n\tconst URL = import.meta.env.VITE_TRADING_VIEW_LINK;\n\n\tconst initializeWidget = () => {\n\t\tif (!widgetContainer) return;\n\n\t\t// Clear any existing widget\n\t\twidgetContainer.innerHTML = '';\n\n\t\t// Add the widget container for the new TradingView script\n\t\tconst script = document.createElement('script');\n\t\tscript.type = 'text/javascript';\n\t\tscript.async = true;\n\t\tscript.src = '../../js/embed-widget-technical-analysis.js';\n\t\tscript.innerHTML = JSON.stringify({\n\t\t\tinterval: '1m',\n\t\t\twidth: '100%',\n\t\t\theight: '100%',\n\t\t\tisTransparent: false,\n\t\t\tsymbol, // Dynamically set the symbol\n\t\t\tshowIntervalTabs: true,\n\t\t\tdisplayMode: 'multiple',\n\t\t\tlocale: 'en',\n\t\t\tcolorTheme: 'light'\n\t\t});\n\n\t\tlog.info('Script', false, script);\n\t\tlog.info('Widget Container', false, widgetContainer);\n\n\t\twidgetContainer.appendChild(script);\n\t};\n\n\t// Reactively reinitialize the widget when `symbol` changes\n\t// $effect(() => {\n\t//   initializeWidget();\n\t// });\n\n\tonMount(() => {\n\t\tinitializeWidget();\n\t});\n\n\tonDestroy(() => {\n\t\tif (widgetContainer) {\n\t\t\twidgetContainer.innerHTML = '';\n\t\t}\n\t});\n</script>\n\n<section id=\"technical-analysis\">\n\t<div class=\"tradingview-widget-container\">\n\t\t<div\n\t\t\tbind:this={widgetContainer}\n\t\t\tclass=\"tradingview-widget-container__widget\"\n\t\t\tstyle=\"width: auto; height: 400px; min-height: 400px; max-height: auto;\"\n\t\t></div>\n\t\t<div class=\"tradingview-widget-copyright\">\n\t\t\t<a href={URL} rel=\"noopener nofollow\" target=\"_blank\">\n\t\t\t\t<span class=\"blue-text\">Track all markets on TradingView</span>\n\t\t\t</a>\n\t\t</div>\n\t</div>\n</section>\n\n<style>\n\t.tradingview-widget-container {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n</style>\n","<script lang=\"ts\">\n\timport { log } from '$lib/managers/Logger';\n\timport { onMount, onDestroy } from 'svelte';\n\n\tlet { symbol = 'COINBASE:ETHUSD' } = $props();\n\tlet widgetContainer: HTMLDivElement | null = null;\n\tconst URL = import.meta.env.VITE_TRADING_VIEW_LINK;\n\n\tconst initializeWidget = () => {\n\t\ttry {\n\t\t\tif (!widgetContainer) return;\n\n\t\t\t// Clear any existing widget\n\t\t\twidgetContainer.innerHTML = '';\n\n\t\t\t// Add the widget container for the new TradingView script\n\t\t\tconst script = document.createElement('script');\n\t\t\tscript.type = 'text/javascript';\n\t\t\tscript.async = true;\n\t\t\tscript.src = '../../js/embed-widget-symbol-info.js';\n\t\t\tscript.innerHTML = JSON.stringify({\n\t\t\t\twidth: '100%',\n\t\t\t\theight: '100%',\n\t\t\t\tisTransparent: false,\n\t\t\t\tsymbol, // Dynamically set the symbol\n\t\t\t\tlocale: 'en',\n\t\t\t\tcolorTheme: 'light'\n\t\t\t});\n\n\t\t\tlog.info('Script', false, script);\n\t\t\tlog.info('Widget Container', false, widgetContainer);\n\n\t\t\twidgetContainer.appendChild(script);\n\t\t} catch (error) {\n\t\t\tlog.error('Error initializing TradingView widget', false, error);\n\t\t}\n\t};\n\n\t// Reactively reinitialize the widget when `symbol` changes\n\t// $effect(() => {\n\t//   initializeWidget();\n\t// });\n\n\tonMount(() => {\n\t\tinitializeWidget();\n\t});\n\n\tonDestroy(() => {\n\t\tif (widgetContainer) {\n\t\t\twidgetContainer.innerHTML = '';\n\t\t}\n\t});\n</script>\n\n<section id=\"symbol-info\">\n\t<div class=\"tradingview-widget-container\">\n\t\t<div\n\t\t\tbind:this={widgetContainer}\n\t\t\tclass=\"tradingview-widget-container__widget\"\n\t\t\tstyle=\"width: auto; height: 400px; min-height: 400px; max-height: auto;\"\n\t\t></div>\n\t\t<div class=\"tradingview-widget-copyright\">\n\t\t\t<a href={URL} rel=\"noopener nofollow\" target=\"_blank\">\n\t\t\t\t<span class=\"blue-text\">Track all markets on TradingView</span>\n\t\t\t</a>\n\t\t</div>\n\t</div>\n</section>\n\n<style>\n\t.tradingview-widget-container {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n</style>\n","<script lang=\"ts\">\n\timport { log } from '$lib/managers/Logger';\n\timport { onMount, onDestroy } from 'svelte';\n\n\tlet { symbol = 'COINBASE:ETHUSD' } = $props();\n\tlet widgetContainer: HTMLDivElement | null = null;\n\tconst URL = import.meta.env.VITE_TRADING_VIEW_LINK;\n\n\tconst initializeWidget = () => {\n\t\ttry {\n\t\t\tif (!widgetContainer) return;\n\n\t\t\t// Clear any existing widget\n\t\t\twidgetContainer.innerHTML = '';\n\n\t\t\t// Add the widget container for the new TradingView script\n\t\t\tconst script = document.createElement('script');\n\t\t\tscript.type = 'text/javascript';\n\t\t\tscript.async = true;\n\t\t\tscript.src = '../../js/embed-widget-symbol-overview.js';\n\t\t\tscript.innerHTML = JSON.stringify({\n\t\t\t\twidth: '100%',\n\t\t\t\theight: '100%',\n\t\t\t\tsymbols: [['COINBASE:ETHUSD|1D'], ['COINBASE:BTCUSD|1D']], // Dynamically set the symbol\n\t\t\t\tlocale: 'en',\n\t\t\t\tcolorTheme: 'light',\n\t\t\t\tautosize: true,\n\t\t\t\tshowVolume: true,\n\t\t\t\tshowMA: true,\n\t\t\t\thideDateRanges: false,\n\t\t\t\thideMarketStatus: false,\n\t\t\t\thideSymbolLogo: false,\n\t\t\t\tscalePosition: 'right',\n\t\t\t\tscaleMode: 'Normal',\n\t\t\t\tfontFamily: '-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif',\n\t\t\t\tfontSize: '10',\n\t\t\t\tnoTimeScale: false,\n\t\t\t\tvaluesTracking: '1',\n\t\t\t\tchangeMode: 'price-and-percent',\n\t\t\t\tchartType: 'area',\n\t\t\t\tmaLineColor: '#2962FF',\n\t\t\t\tmaLineWidth: 1,\n\t\t\t\tmaLength: 9,\n\t\t\t\theaderFontSize: 'medium',\n\t\t\t\tlineWidth: 2,\n\t\t\t\tlineType: 0,\n\t\t\t\tdateRanges: ['1d|1', '1m|30', '3m|60', '12m|1D', '60m|1W', 'all|1M']\n\t\t\t});\n\n\t\t\tlog.info('Script', false, script);\n\t\t\tlog.info('Widget Container', false, widgetContainer);\n\n\t\t\twidgetContainer.appendChild(script);\n\t\t} catch (error) {\n\t\t\tlog.error('Error initializing TradingView widget', false, error);\n\t\t}\n\t};\n\n\t// Reactively reinitialize the widget when `symbol` changes\n\t// $effect(() => {\n\t//   initializeWidget();\n\t// });\n\n\tonMount(() => {\n\t\tinitializeWidget();\n\t});\n\n\tonDestroy(() => {\n\t\tif (widgetContainer) {\n\t\t\twidgetContainer.innerHTML = '';\n\t\t}\n\t});\n</script>\n\n<section id=\"symbol-info\">\n\t<div class=\"tradingview-widget-container\">\n\t\t<div\n\t\t\tbind:this={widgetContainer}\n\t\t\tclass=\"tradingview-widget-container__widget\"\n\t\t\tstyle=\"width: auto; height: 400px; min-height: 400px; max-height: auto;\"\n\t\t></div>\n\t\t<div class=\"tradingview-widget-copyright\">\n\t\t\t<a href={URL} rel=\"noopener nofollow\" target=\"_blank\">\n\t\t\t\t<span class=\"blue-text\">Track all markets on TradingView</span>\n\t\t\t</a>\n\t\t</div>\n\t</div>\n</section>\n\n<style>\n\t.tradingview-widget-container {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n</style>\n","<script lang=\"ts\">\n\t// svelte-ignore options_renamed_ssr_dom\n\timport ViewControls from './ViewControls.svelte';\n\timport TokenGridView from './TokenGridView.svelte';\n\timport TokenChartsView from './TokenChartsView.svelte';\n\timport TokenNewsTradingView from './TokenNewsTradingView.svelte';\n\timport TokenTechnicalView from './TokenTechnicalView.svelte';\n\timport TokenSymbolView from './TokenSymbolView.svelte';\n\timport type { TokenData } from '$lib/common/interfaces';\n\timport { log } from '$lib/common/logger-wrapper';\n\timport { yakklCombinedTokenStore } from '$lib/common/stores';\n\timport LoadingState from './LoadingState.svelte';\n\timport { onMount } from 'svelte';\n\timport { sessionInitialized } from '$lib/common/stores';\n\timport TokenSymbolOverviewView from './TokenSymbolOverviewView.svelte';\n\timport { UnifiedTimerManager } from '$lib/managers/UnifiedTimerManager';\n\n\tlet tokens = $state<TokenData[]>([]);\n\tlet sortedTokens = $state<TokenData[]>([]);\n\tlet currentView = $state('grid');\n\tlet sortBy = $state('name');\n\tlet isLoading = $state(false); // This should only be true during initial load\n\tlet isInitialized = $state(false);\n\n\t// Reactive store subscription - immediate to show any available data\n\t$effect.root(() => {\n\t\tconst unsubscribe = yakklCombinedTokenStore.subscribe((updatedTokens = []) => {\n\t\t\ttokens = updatedTokens;\n\t\t\thandleSortChange(sortBy);\n\t\t});\n\n\t\treturn () => {\n\t\t\tunsubscribe();\n\t\t};\n\t});\n\n\tonMount(() => {\n\t\t// Always start loading when component mounts\n\t\tif (!$sessionInitialized) {\n\t\t\tisLoading = true;\n\t\t\tconst timerManager = UnifiedTimerManager.getInstance();\n\n\t\t\ttimerManager.addTimeout(\n\t\t\t\t'token-views-loading',\n\t\t\t\t() => {\n\t\t\t\t\tisLoading = false;\n\t\t\t\t\tsessionInitialized.set(true); // Set to true for current session only\n\n\t\t\t\t\t// Initialize store subscription after loading is complete\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tisInitialized = true;\n\t\t\t\t\t}, 500);\n\t\t\t\t},\n\t\t\t\t3000\n\t\t\t);\n\t\t\ttimerManager.startTimeout('token-views-loading');\n\n\t\t\treturn () => {\n\t\t\t\ttimerManager.stopTimeout('token-views-loading');\n\t\t\t\ttimerManager.removeTimeout('token-views-loading');\n\t\t\t};\n\t\t} else {\n\t\t\t// If session is already initialized, enable subscription immediately\n\t\t\tsetTimeout(() => {\n\t\t\t\tisInitialized = true;\n\t\t\t}, 500);\n\t\t}\n\t});\n\n\t// Separate effect for sorting - immediate to show any available data\n\t$effect(() => {\n\t\tif (tokens.length > 0) {\n\t\t\tsortedTokens = [...tokens].sort((a, b) => {\n\t\t\t\tif (sortBy === 'name') return a.name.localeCompare(b.name);\n\t\t\t\tif (sortBy === 'price') return (b.price?.price ?? 0) - (a.price?.price ?? 0);\n\t\t\t\tif (sortBy === 'value') return (b.value ?? 0) - (a.value ?? 0);\n\t\t\t\treturn 0;\n\t\t\t});\n\t\t}\n\t});\n\n\t// Simplified sort handler\n\tfunction handleSortChange(criteria: string) {\n\t\tsortBy = criteria;\n\t}\n\n\t// Change the current view\n\tfunction handleViewChange(view: string) {\n\t\tcurrentView = view;\n\t}\n\n\t// Print handler - basic stub for now. Need to format for print within each view.\n\tfunction handlePrint() {\n\t\talert('Printing is in limited release. Soon to be available to all!');\n\t}\n</script>\n\n<div class=\"w-full h-full mt-1\">\n\t<!-- Header Section -->\n\t<div class=\"flex justify-between items-center px-2 py-1\">\n\t\t<h2 class=\"text-lg font-bold text-gray-300\">Token Portfolio</h2>\n\t\t<ViewControls\n\t\t\tonSortChange={handleSortChange}\n\t\t\tonViewChange={handleViewChange}\n\t\t\tonPrint={handlePrint}\n\t\t/>\n\t</div>\n\n\t<!-- Dynamic Views -->\n\t<div class=\"relative rounded-lg overflow-hidden bg-gray-50 dark:bg-gray-800 shadow-lg h-[400px]\">\n\t\t{#if isLoading && !$sessionInitialized}\n\t\t\t<LoadingState message=\"Analyzing Tokens...\" />\n\t\t{/if}\n\n\t\t{#if currentView === 'grid'}\n\t\t\t<TokenGridView\n\t\t\t\ttokens={sortedTokens}\n\t\t\t\tonTokenClick={(token) => log.info('Clicked:', false, token)}\n\t\t\t/>\n\t\t\t<!-- default onTokenClick for future -->\n\t\t{:else if currentView === 'chart'}\n\t\t\t<TokenChartsView />\n\t\t{:else if currentView === 'chartAdvanced'}\n\t\t\t<TokenSymbolOverviewView />\n\t\t{:else if currentView === 'news'}\n\t\t\t<TokenNewsTradingView />\n\t\t{:else if currentView === 'analysis'}\n\t\t\t<TokenTechnicalView symbol=\"COINBASE:ETHUSD\" />\n\t\t{:else if currentView === 'symbol'}\n\t\t\t{#each sortedTokens as token}\n\t\t\t\t<TokenSymbolView symbol={`COINBASE:${token.symbol.toUpperCase()}USD`} />\n\t\t\t{/each}\n\t\t{/if}\n\t</div>\n</div>\n","<script lang=\"ts\">\n\timport { browserSvelte } from '$lib/common/environment';\n\timport { onDestroy } from 'svelte';\n\timport { PATH_ACCOUNTS, PATH_SECURITY } from '$lib/common/constants';\n\timport ErrorNoAction from '$components/ErrorNoAction.svelte';\n\timport ButtonGridItem from '$components/ButtonGridItem.svelte';\n\timport ButtonGrid from '$components/ButtonGrid.svelte';\n\timport { setIconLock } from '$lib/utilities';\n\timport Import from '$lib/components/Import.svelte';\n\timport TokenViews from '$lib/components/TokenViews.svelte';\n\timport { yakklCombinedTokenStore } from '$lib/common/stores';\n\timport { log } from '$lib/common/logger-wrapper';\n\timport { goto } from '$app/navigation';\n\timport Placeholder from '$lib/components/Placeholder.svelte';\n\n\tlet error = $state(false);\n\tlet errorValue: any = $state(null);\n\tlet showImportOption = $state(false);\n\n\tonDestroy(() => {\n\t\ttry {\n\t\t\tif (browserSvelte) {\n\t\t\t\tsetIconLock();\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tlog.error(e);\n\t\t}\n\t});\n\n\tfunction handleImports() {\n\t\tshowImportOption = true;\n\t}\n\n\tfunction onImportComplete(imported: string) {\n\t\t// Could so something here like: setup the correct current shortcuts...\n\t\tlog.info(imported);\n\t}\n</script>\n\n<Import bind:show={showImportOption} onComplete={onImportComplete} />\n<ErrorNoAction bind:show={error} title=\"Error\" value={errorValue} />\n\n<div\n\tclass=\"bg-primary absolute top-[0.1rem] left-[.1rem] rounded-tl-xl rounded-tr-xl w-[99%] h-2\"\n></div>\n\n<ButtonGrid>\n\t<ButtonGridItem path={PATH_ACCOUNTS} title=\"Wallet Accounts\">\n\t\t<svg\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tfill=\"none\"\n\t\t\tviewBox=\"0 0 24 24\"\n\t\t\tstroke-width=\"1.5\"\n\t\t\tstroke=\"currentColor\"\n\t\t\tclass=\"w-10 h-10 -mb-2\"\n\t\t>\n\t\t\t<path\n\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\td=\"M21 12a2.25 2.25 0 00-2.25-2.25H15a3 3 0 11-6 0H5.25A2.25 2.25 0 003 12m18 0v6a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 18v-6m18 0V9M3 12V9m18 0a2.25 2.25 0 00-2.25-2.25H5.25A2.25 2.25 0 003 9m18 0V6a2.25 2.25 0 00-2.25-2.25H5.25A2.25 2.25 0 003 6v3\"\n\t\t\t/>\n\t\t</svg>\n\t</ButtonGridItem>\n\t<ButtonGridItem path={PATH_SECURITY} title=\"Security\">\n\t\t<svg\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tfill=\"none\"\n\t\t\tviewBox=\"0 0 24 24\"\n\t\t\tstroke-width=\"1.5\"\n\t\t\tstroke=\"currentColor\"\n\t\t\tclass=\"w-10 h-10 mb-0\"\n\t\t>\n\t\t\t<path\n\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\td=\"M7.864 4.243A7.5 7.5 0 0119.5 10.5c0 2.92-.556 5.709-1.568 8.268M5.742 6.364A7.465 7.465 0 004.5 10.5a7.464 7.464 0 01-1.15 3.993m1.989 3.559A11.209 11.209 0 008.25 10.5a3.75 3.75 0 117.5 0c0 .527-.021 1.049-.064 1.565M12 10.5a14.94 14.94 0 01-3.6 9.75m6.633-4.596a18.666 18.666 0 01-2.485 5.33\"\n\t\t\t/>\n\t\t</svg>\n\t</ButtonGridItem>\n\t<ButtonGridItem handle={handleImports} title=\"Import/Recovery Options\">\n\t\t<svg\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tfill=\"none\"\n\t\t\tviewBox=\"0 0 24 24\"\n\t\t\tstroke-width=\"1.5\"\n\t\t\tstroke=\"currentColor\"\n\t\t\tclass=\"w-10 h-10 mb-0\"\n\t\t>\n\t\t\t<path\n\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\td=\"M16.712 4.33a9.027 9.027 0 011.652 1.306c.51.51.944 1.064 1.306 1.652M16.712 4.33l-3.448 4.138m3.448-4.138a9.014 9.014 0 00-9.424 0M19.67 7.288l-4.138 3.448m4.138-3.448a9.014 9.014 0 010 9.424m-4.138-5.976a3.736 3.736 0 00-.88-1.388 3.737 3.737 0 00-1.388-.88m2.268 2.268a3.765 3.765 0 010 2.528m-2.268-4.796a3.765 3.765 0 00-2.528 0m4.796 4.796c-.181.506-.475.982-.88 1.388a3.736 3.736 0 01-1.388.88m2.268-2.268l4.138 3.448m0 0a9.027 9.027 0 01-1.306 1.652c-.51.51-1.064.944-1.652 1.306m0 0l-3.448-4.138m3.448 4.138a9.014 9.014 0 01-9.424 0m5.976-4.138a3.765 3.765 0 01-2.528 0m0 0a3.736 3.736 0 01-1.388-.88 3.737 3.737 0 01-.88-1.388m2.268 2.268L7.288 19.67m0 0a9.024 9.024 0 01-1.652-1.306 9.027 9.027 0 01-1.306-1.652m0 0l4.138-3.448M4.33 16.712a9.014 9.014 0 010-9.424m4.138 5.976a3.765 3.765 0 010-2.528m0 0c.181-.506.475-.982.88-1.388a3.736 3.736 0 011.388-.88m-2.268 2.268L4.33 7.288m6.406 1.18L7.288 4.33m0 0a9.024 9.024 0 00-1.652 1.306A9.025 9.025 0 004.33 7.288\"\n\t\t\t/>\n\t\t</svg>\n\t</ButtonGridItem>\n\t<!-- <ButtonGridItem handle={() => {goto('/dapp/EIP6963')}} title=\"EIP-6963\">\n    <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"w-10 h-10 mb-0\">\n      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M16.712 4.33a9.027 9.027 0 011.652 1.306c.51.51.944 1.064 1.306 1.652M16.712 4.33l-3.448 4.138m3.448-4.138a9.014 9.014 0 00-9.424 0M19.67 7.288l-4.138 3.448m4.138-3.448a9.014 9.014 0 010 9.424m-4.138-5.976a3.736 3.736 0 00-.88-1.388 3.737 3.737 0 00-1.388-.88m2.268 2.268a3.765 3.765 0 010 2.528m-2.268-4.796a3.765 3.765 0 00-2.528 0m4.796 4.796c-.181.506-.475.982-.88 1.388a3.736 3.736 0 01-1.388.88m2.268-2.268l4.138 3.448m0 0a9.027 9.027 0 01-1.306 1.652c-.51.51-1.064.944-1.652 1.306m0 0l-3.448-4.138m3.448 4.138a9.014 9.014 0 01-9.424 0m5.976-4.138a3.765 3.765 0 01-2.528 0m0 0a3.736 3.736 0 01-1.388-.88 3.737 3.737 0 01-.88-1.388m2.268 2.268L7.288 19.67m0 0a9.024 9.024 0 01-1.652-1.306 9.027 9.027 0 01-1.306-1.652m0 0l4.138-3.448M4.33 16.712a9.014 9.014 0 010-9.424m4.138 5.976a3.765 3.765 0 010-2.528m0 0c.181-.506.475-.982.88-1.388a3.736 3.736 0 011.388-.88m-2.268 2.268L4.33 7.288m6.406 1.18L7.288 4.33m0 0a9.024 9.024 0 00-1.652 1.306A9.025 9.025 0 004.33 7.288\" />\n    </svg>\n  </ButtonGridItem> -->\n</ButtonGrid>\n\n{#if $yakklCombinedTokenStore && $yakklCombinedTokenStore.length > 0}\n\t<TokenViews />\n{:else}\n\t<!-- Debug info -->\n\t<div class=\"p-4\">\n\t\t<Placeholder\n\t\t\ttext=\"No additional tokens found\"\n\t\t\tclassName=\"flex items-center justify-center\"\n\t\t\tanchorTop={true}\n\t\t\tcenterHorizontal={true}\n\t\t\tcenterVertical={true}\n\t\t\tshowBorderTop={false}\n\t\t/>\n\t\t<div class=\"text-xs text-gray-500 mt-2\">\n\t\t\tDebug: Token store length = {$yakklCombinedTokenStore?.length ?? 'undefined'}\n\t\t</div>\n\t</div>\n\t<!-- <div class=\"flex items-center justify-center w-full h-full\">\n    <p class=\"text-lg text-gray-400\">No additional tokens found</p>\n  </div> -->\n{/if}\n"],"names":["Readable","constructor","initialValue","start","this","current","subscribers","stop","subscribe","inEffect","value","unsubscribe","activeElement","set","insideEffect","update","document","addEventListener","removeEventListener","isFunction","extract","defaultValue","getter","IsFocusWithin","target","$.derived","node","contains","to","children","disabled","$$props","getAllContexts","getTarget","isBrowser","localTarget","querySelector","Error","HTMLElement","DocumentFragment","TypeError","$$payload","getNextMatch","values","search","currentMatch","isRepeated","length","Array","from","every","char","normalizedSearch","currentMatchIndex","indexOf","wrappedValues","wrapArray","Math","max","excludeCurrentMatch","filter","v","nextMatch","find","toLowerCase","startsWith","array","startIndex","map","_","index","boxAutoReset","afterMs","timeout","resetAfter","setTimeout","box","with","useDOMTypeahead","opts","onMatch","focus","getCurrentItem","handleTypeaheadSearch","key","candidates","currentItem","item","textContent","trim","newItem","resetTypeahead","isMounted","onMountedChange","noop","SELECTION_KEYS","kbd.ENTER","kbd.SPACE","FIRST_KEYS","kbd.ARROW_DOWN","kbd.PAGE_UP","kbd.HOME","LAST_KEYS","kbd.ARROW_UP","kbd.PAGE_DOWN","kbd.END","FIRST_LAST_KEYS","isMouseEvent","event","pointerType","pointInPolygon","point","polygon","inside","i","j","xi","x","yi","y","xj","yj","intersect","isPointerInGraceArea","e","area","clientX","clientY","setMenuRootContext","getMenuRootContext","createContext","setMenuMenuContext","getMenuMenuContext","setMenuContentContext","getMenuContentContext","setMenuGroupContext","getMenuGroupContext","MenuRootState","onClose","variant","isUsingKeyboard","dir","props","getAttr","name","MenuMenuState","root","open","contentId","contentNode","triggerNode","parentMenu","toggleOpen","onOpen","MenuContentState","contentRef","timer","pointerGraceTimer","pointerGraceIntent","pointerDir","lastPointerX","rovingFocusGroup","isFocusWithin","id","loop","ref","onkeydown","bind","onblur","onpointermove","onfocus","handleInteractOutside","useRefById","deps","onRefChange","useRovingFocus","rootNodeId","candidateAttr","orientation","getCandidateNodes","querySelectorAll","isMovingTowards","side","onPointerGraceIntentChange","intent","defaultPrevented","currentTarget","isHTMLElement","isKeydownInside","closest","isModifierKey","ctrlKey","altKey","metaKey","isCharacterKey","kbdFocusedEl","handleKeydown","code","candidateNodes","kbd.TAB","preventDefault","includes","reverse","focusFirst","isElement","window","clearTimeout","afterTick","focusFirstCandidate","pointerXHasChanged","newDir","onItemEnter","isPointerMovingToSubmenu","onItemLeave","setCurrentTabStopId","onTriggerLeave","onOpenAutoFocus","isElementOrSVGElement","triggerId","snippetProps","role","getAriaOrientation","getDataOpenClosed","style","pointerEvents","MenuItemSharedState","content","isFocused","onpointerleave","tabindex","getAriaDisabled","getDataDisabled","MenuItemState","isPointerDown","onSelect","closeOnSelect","onclick","onpointerdown","onpointerup","handleSelect","selectEvent","CustomEvent","bubbles","cancelable","isTypingAhead","click","mergeProps","MenuGroupState","groupHeadingId","MenuGroupHeadingState","group","MenuSeparatorState","DropdownMenuTriggerState","button","ariaControls","getAriaExpanded","useMenuRoot","useMenuMenu","menu","useMenuDropdownTrigger","useMenuContent","useMenuItem","useMenuGroup","useMenuGroupHeading","useMenuSeparator","child","useId","$$slots","restProps","itemState","mergedProps","groupState","groupHeadingState","separatorState","onOpenChange","controlledOpen","_internal_variant","onInteractOutside","onEscapeKeydown","forceMount","contentState","handleEscapeKeydown","popper","wrapperProps","finalProps","getFloatingContentCSSVars","enabled","present","type","triggerState","CONTENT_ATTR","TRIGGER_ATTR","LinkPreviewRootState","openDelay","closeDelay","hasSelection","isPointerDownOnContent","containsSelection","contentMounted","isPointerInTransit","isOpening","handleOpen","immediateClose","handleClose","LinkPreviewTriggerState","onpointerenter","isTouch","isFocusVisible","LinkPreviewContentState","onfocusout","setLinkPreviewRootContext","getLinkPreviewRootContext","useLinkPreviewRoot","useLinkPreviewTrigger","useLinkPreviewContent","sideOffset","align","avoidCollisions","arrowPadding","sticky","hideWhenDetached","collisionPadding","floatingProps","m","show","showImportWatch","onCancel","onComplete","imported","onImportKey","showImportAccount","onImportPhrase","showImportPhrase","onImportWatch","showImportWatchAccount","onRestore","showEmergencyKit","onCompleteImportPrivateKey","onCancelImportPrivateKey","onCompleteImportPhrase","onCancelImportPhrase","onCompleteImportWatch","onCancelImportWatch","onCompleteEmergenyKit","onCancelEmergencyKit","$$value","portalProps","class","className","cn","inset","Root","DropdownMenuPrimitive.Root","Trigger","DropdownMenuPrimitive.Trigger","Group","DropdownMenuPrimitive.Group","contextKey","Symbol","getIconContext","hasContext","getContext","ctx","$$events","weight","color","size","mirrored","svgAttr","obj","attrs","console","error","onSortChange","onViewChange","onPrint","alert","sortOptions","label","currentView","option","each_array","$$index","out","$.attr","$.maybe_selected","$.escape","HoverCardPrimitive.Root","HoverCardPrimitive.Trigger","token","isLarge","onClick","accountAddress","percentChange","getTokenChange","change","percentChangeColor","balance","formatBalance","balanceNum","Number","pow","decimals","toFixed","log","warn","$.attr_class","$.stringify","logoURI","symbol","slice","toUpperCase","address","tokens","onTokenClick","showSkeleton","accountTokens","isLoading","currentAccountAddress","$.ensure_array_like","each_array_1","$$index_1","onDestroy","URL","sortedTokens","handleSortChange","criteria","handleViewChange","view","handlePrint","info","errorValue","showImportOption","browserSvelte","setIconLock","handleImports","onImportComplete","PATH_ACCOUNTS","PATH_SECURITY","$.store_get","$$store_subs","yakklCombinedTokenStore"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,30,31]}